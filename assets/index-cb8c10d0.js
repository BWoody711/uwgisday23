var bC=Object.defineProperty;var _C=(e,t,i)=>t in e?bC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var Eg=(e,t,i)=>(_C(e,typeof t!="symbol"?t+"":t,i),i);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))s(u);new MutationObserver(u=>{for(const d of u)if(d.type==="childList")for(const y of d.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&s(y)}).observe(document,{childList:!0,subtree:!0});function i(u){const d={};return u.integrity&&(d.integrity=u.integrity),u.referrerPolicy&&(d.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?d.credentials="include":u.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function s(u){if(u.ep)return;u.ep=!0;const d=i(u);fetch(u.href,d)}})();function Ql(){}function hS(e){return e()}function n6(){return Object.create(null)}function om(e){e.forEach(hS)}function T9(e){return typeof e=="function"}function xC(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function SC(e){return Object.keys(e).length===0}function $C(e){return e&&T9(e.destroy)?e.destroy:Ql}function jc(e,t){e.appendChild(t)}function TC(e,t,i){e.insertBefore(t,i||null)}function cS(e){e.parentNode&&e.parentNode.removeChild(e)}function Ad(e){return document.createElement(e)}function MC(e){return document.createTextNode(e)}function o6(){return MC(" ")}function kg(e,t,i){i==null?e.removeAttribute(t):e.getAttribute(t)!==i&&e.setAttribute(t,i)}function IC(e){return Array.from(e.childNodes)}let M9;function Y0(e){M9=e}const Zu=[],a6=[];let zh=[];const l6=[],EC=Promise.resolve();let ov=!1;function kC(){ov||(ov=!0,EC.then(pS))}function av(e){zh.push(e)}const Ag=new Set;let Fu=0;function pS(){if(Fu!==0)return;const e=M9;do{try{for(;Fu<Zu.length;){const t=Zu[Fu];Fu++,Y0(t),AC(t.$$)}}catch(t){throw Zu.length=0,Fu=0,t}for(Y0(null),Zu.length=0,Fu=0;a6.length;)a6.pop()();for(let t=0;t<zh.length;t+=1){const i=zh[t];Ag.has(i)||(Ag.add(i),i())}zh.length=0}while(Zu.length);for(;l6.length;)l6.pop()();ov=!1,Ag.clear(),Y0(e)}function AC(e){if(e.fragment!==null){e.update(),om(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(av)}}function OC(e){const t=[],i=[];zh.forEach(s=>e.indexOf(s)===-1?t.push(s):i.push(s)),i.forEach(s=>s()),zh=t}const PC=new Set;function CC(e,t){e&&e.i&&(PC.delete(e),e.i(t))}function jC(e,t,i){const{fragment:s,after_update:u}=e.$$;s&&s.m(t,i),av(()=>{const d=e.$$.on_mount.map(hS).filter(T9);e.$$.on_destroy?e.$$.on_destroy.push(...d):om(d),e.$$.on_mount=[]}),u.forEach(av)}function NC(e,t){const i=e.$$;i.fragment!==null&&(OC(i.after_update),om(i.on_destroy),i.fragment&&i.fragment.d(t),i.on_destroy=i.fragment=null,i.ctx=[])}function RC(e,t){e.$$.dirty[0]===-1&&(Zu.push(e),kC(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function LC(e,t,i,s,u,d,y=null,v=[-1]){const _=M9;Y0(e);const M=e.$$={fragment:null,ctx:[],props:d,update:Ql,not_equal:u,bound:n6(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(_?_.$$.context:[])),callbacks:n6(),dirty:v,skip_bound:!1,root:t.target||_.$$.root};y&&y(M.root);let E=!1;if(M.ctx=i?i(e,t.props||{},(O,C,...R)=>{const L=R.length?R[0]:C;return M.ctx&&u(M.ctx[O],M.ctx[O]=L)&&(!M.skip_bound&&M.bound[O]&&M.bound[O](L),E&&RC(e,O)),C}):[],M.update(),E=!0,om(M.before_update),M.fragment=s?s(M.ctx):!1,t.target){if(t.hydrate){const O=IC(t.target);M.fragment&&M.fragment.l(O),O.forEach(cS)}else M.fragment&&M.fragment.c();t.intro&&CC(e.$$.fragment),jC(e,t.target,t.anchor),pS()}Y0(_)}class DC{constructor(){Eg(this,"$$");Eg(this,"$$set")}$destroy(){NC(this,1),this.$destroy=Ql}$on(t,i){if(!T9(i))return Ql;const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(i),()=>{const u=s.indexOf(i);u!==-1&&s.splice(u,1)}}$set(t){this.$$set&&!SC(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const FC="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(FC);let ca;function oe(e){return typeof ca[e]=="function"?ca[e]=ca[e](globalThis):ca[e]}var iS,rS,sS,nS;ca=(iS=globalThis.dojoConfig)!=null&&iS.has||(rS=globalThis.esriConfig)!=null&&rS.has?{...(sS=globalThis.dojoConfig)==null?void 0:sS.has,...(nS=globalThis.esriConfig)==null?void 0:nS.has}:{},oe.add=(e,t,i,s)=>((s||ca[e]===void 0)&&(ca[e]=t),i&&oe(e)),oe.cache=ca,oe.add("big-integer-warning-enabled",!0),oe.add("esri-deprecation-warnings",!0),oe.add("esri-tests-disable-screenshots",!1),oe.add("esri-tests-use-full-window",!1),oe.add("esri-tests-post-to-influx",!0),(()=>{var t;oe.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const e=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(oe.add("host-browser",e),oe.add("host-node",typeof globalThis.process=="object"&&((t=globalThis.process.versions)==null?void 0:t.node)&&globalThis.process.versions.v8),oe.add("dom",e),oe("host-browser")){const i=navigator,s=i.userAgent,u=i.appVersion,d=parseFloat(u);if(oe.add("wp",parseFloat(s.split("Windows Phone")[1])||void 0),oe.add("msapp",parseFloat(s.split("MSAppHost/")[1])||void 0),oe.add("khtml",u.includes("Konqueror")?d:void 0),oe.add("edge",parseFloat(s.split("Edge/")[1])||void 0),oe.add("opr",parseFloat(s.split("OPR/")[1])||void 0),oe.add("webkit",!oe("wp")&&!oe("edge")&&parseFloat(s.split("WebKit/")[1])||void 0),oe.add("chrome",!oe("edge")&&!oe("opr")&&parseFloat(s.split("Chrome/")[1])||void 0),oe.add("android",!oe("wp")&&parseFloat(s.split("Android ")[1])||void 0),oe.add("safari",!u.includes("Safari")||oe("wp")||oe("chrome")||oe("android")||oe("edge")||oe("opr")?void 0:parseFloat(u.split("Version/")[1])),oe.add("mac",u.includes("Macintosh")),!oe("wp")&&/(iPhone|iPod|iPad)/.test(s)){const y=RegExp.$1.replace(/P/,"p"),v=/OS ([\d_]+)/.test(s)?RegExp.$1:"1",_=parseFloat(v.replace(/_/,".").replaceAll("_",""));oe.add(y,_),oe.add("ios",_)}oe("webkit")||(!s.includes("Gecko")||oe("wp")||oe("khtml")||oe("edge")||oe.add("mozilla",d),oe("mozilla")&&oe.add("ff",parseFloat(s.split("Firefox/")[1]||s.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),i=/iPhone/i.test(e);t&&oe.add("esri-mobile",t),i&&oe.add("esri-iPhone",i),oe.add("esri-geolocation",!!navigator.geolocation)}oe.add("esri-wasm","WebAssembly"in globalThis),oe.add("esri-performance-mode-frames-between-render",20),oe.add("esri-force-performance-mode",!1),oe.add("esri-shared-array-buffer",()=>{const e="SharedArrayBuffer"in globalThis,t=globalThis.crossOriginIsolated===!1;return e&&!t}),oe.add("wasm-simd",()=>{const e=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(e))}),oe.add("esri-atomics","Atomics"in globalThis),oe.add("esri-workers","Worker"in globalThis),oe.add("web-feat:cache","caches"in globalThis),oe.add("esri-workers-arraybuffer-transfer",!oe("safari")||Number(oe("safari"))>=12),oe.add("workers-pool-size",8),oe.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),oe.add("featurelayer-simplify-payload-size-factors",[1,1,4]),oe.add("featurelayer-animation-enabled",!0),oe.add("featurelayer-snapshot-enabled",!0),oe.add("featurelayer-snapshot-point-min-threshold",8e4),oe.add("featurelayer-snapshot-point-max-threshold",4e5),oe.add("featurelayer-snapshot-point-coverage",.1),oe.add("featurelayer-advanced-symbols",!1),oe.add("featurelayer-pbf",!0),oe.add("featurelayer-pbf-statistics",!1),oe.add("feature-layers-workers",!0),oe.add("feature-polyline-generalization-factor",1),oe.add("mapview-transitions-duration",200),oe.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),oe.add("mapserver-pbf-version-support",10.81),oe.add("mapservice-popup-identify-max-tolerance",20),oe.add("heatmap-allow-raster-fallback",!1),oe.add("heatmap-force-raster",!1),oe("host-webworker")||oe("host-browser")&&(oe.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),oe.add("esri-image-decode",()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then(()=>{oe.add("esri-image-decode",!0,!0,!0)}).catch(()=>{oe.add("esri-image-decode",!1,!0,!0)})}return!1}),oe.add("esri-url-encodes-apostrophe",()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")}))})();let Og=class Ya{constructor(t=1){this._seed=t}set seed(t){this._seed=t??Math.random()*Ya._m}getInt(){return this._seed=(Ya._a*this._seed+Ya._c)%Ya._m,this._seed}getFloat(){return this.getInt()/(Ya._m-1)}getIntRange(t,i){return Math.round(this.getFloatRange(t,i))}getFloatRange(t,i){const s=i-t;return t+this.getInt()/Ya._m*s}};Og._m=2147483647,Og._a=48271,Og._c=0;const bae=1.5;function _ae(e,t){return t?e.filter((i,s,u)=>u.findIndex(t.bind(null,i))===s):Array.from(new Set(e))}function am(e,t,i){if(e==null&&t==null)return!0;if(e==null||t==null||e.length!==t.length)return!1;if(i){for(let s=0;s<e.length;s++)if(!i(e[s],t[s]))return!1}else for(let s=0;s<e.length;s++)if(e[s]!==t[s])return!1;return!0}function xae(e,t){let i=e.length!==t.length;i&&(e.length=t.length);for(let s=0;s<t.length;++s)e[s]!==t[s]&&(e[s]=t[s],i=!0);return i}function Sae(e,t,i){let s,u;return i?(s=t.filter(d=>!e.some(y=>i(y,d))),u=e.filter(d=>!t.some(y=>i(y,d)))):(s=t.filter(d=>!e.includes(d)),u=e.filter(d=>!t.includes(d))),{added:s,removed:u}}function $ae(e){return e&&typeof e.length=="number"}const zC=!!Array.prototype.fill;function Tae(e,t){if(zC)return new Array(e).fill(t);const i=new Array(e);for(let s=0;s<e;s++)i[s]=t;return i}function Mae(e,t){t===void 0&&(t=e,e=0);const i=new Array(t-e);for(let s=e;s<t;s++)i[s-e]=s;return i}let dS=class{constructor(){this.last=0}};const fS=new dS;function lv(e,t,i,s){s=s||fS;const u=Math.max(0,s.last-10);for(let y=u;y<i;++y)if(e[y]===t)return s.last=y,y;const d=Math.min(u,i);for(let y=0;y<d;++y)if(e[y]===t)return s.last=y,y;return-1}function VC(e,t,i,s){const u=i??e.length,d=lv(e,t,u,s);if(d!==-1)return e[d]=e[u-1],i==null&&e.pop(),t}const us=new Set;function GC(e,t,i=e.length,s=t.length,u,d){if(s===0||i===0)return i;us.clear();for(let v=0;v<s;++v)us.add(t[v]);u=u||fS;const y=Math.max(0,u.last-10);for(let v=y;v<i;++v)if(us.has(e[v])&&(d==null||d.push(e[v]),us.delete(e[v]),e[v]=e[i-1],--i,--v,us.size===0||i===0))return us.clear(),i;for(let v=0;v<y;++v)if(us.has(e[v])&&(d==null||d.push(e[v]),us.delete(e[v]),e[v]=e[i-1],--i,--v,us.size===0||i===0))return us.clear(),i;return us.clear(),i}function qC(e,t){const i=e.indexOf(t);return i!==-1?(e.splice(i,1),t):null}function tc(e,t){return e!=null}function yS(e){return 32+e.length}function I9(){return 16}function Eae(e){if(!e)return 0;let t=gS;for(const i in e)if(e.hasOwnProperty(i)){const s=e[i];switch(typeof s){case"string":t+=yS(s);break;case"number":t+=I9();break;case"boolean":t+=4}}return t}function UC(e){if(!e)return 0;if(Array.isArray(e))return BC(e);let t=gS;for(const i in e)e.hasOwnProperty(i)&&(t+=mS(e[i]));return t}function BC(e){const t=e.length;if(t===0||typeof e[0]=="number")return 32+8*t;let i=vS;for(let s=0;s<t;s++)i+=mS(e[s]);return i}function mS(e){switch(typeof e){case"object":return UC(e);case"string":return yS(e);case"number":return I9();case"boolean":return 4;default:return 8}}function HC(e,t){return vS+e.length*t}const gS=32,vS=32;function kae(e){return e instanceof ArrayBuffer}function E9(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int8Array"}function wS(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint8Array"}function bS(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint8ClampedArray"}function k9(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int16Array"}function _S(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint16Array"}function A9(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int32Array"}function xS(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint32Array"}function lm(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Float32Array"}function um(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Float64Array"}function WC(e){return!("buffer"in e)}function Aae(...e){return e.reduce((t,i)=>t+(i?WC(i)?HC(i,I9()):i.byteLength+JC:0),0)}const JC=145,Oae=1024;function Pae(e){return um(e)||lm(e)||A9(e)||k9(e)||E9(e)}function Cae(e){return um(e)||lm(e)}function jae(e){return um(e)?179769e303:lm(e)?3402823e32:xS(e)?4294967295:_S(e)?65535:wS(e)||bS(e)?255:A9(e)?2147483647:k9(e)?32767:E9(e)?127:256}function SS(e,t){let i;if(t)for(i in e)e.hasOwnProperty(i)&&(e[i]===void 0?delete e[i]:e[i]instanceof Object&&SS(e[i],!0));else for(i in e)e.hasOwnProperty(i)&&e[i]===void 0&&delete e[i];return e}function ie(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=MS(e);if(t!=null)return t;if(U1(e))return e.clone();if($S(e))return e.map(ie);if(TS(e))return e.clone();const i={};for(const s of Object.getOwnPropertyNames(e))i[s]=ie(e[s]);return i}function uv(e){if(!e||typeof e!="object"||typeof e=="function"||"HTMLElement"in globalThis&&e instanceof HTMLElement)return e;const t=MS(e);if(t!=null)return t;if($S(e)){let i=!0;const s=e.map(u=>{const d=uv(u);return u!=null&&d==null&&(i=!1),d});return i?s:null}if(U1(e))return e.clone();if(e instanceof File||e instanceof Blob)return e;if(!TS(e)){const i=new(Object.getPrototypeOf(e)).constructor;for(const s of Object.getOwnPropertyNames(e)){const u=e[s],d=uv(u);if(u!=null&&d==null)return null;i[s]=d}return i}return null}function U1(e){return typeof e.clone=="function"}function $S(e){return typeof e.map=="function"&&typeof e.forEach=="function"}function TS(e){return typeof e.notifyChange=="function"&&typeof e.watch=="function"}function u6(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function MS(e){if(E9(e)||wS(e)||bS(e)||k9(e)||_S(e)||A9(e)||xS(e)||lm(e)||um(e))return e.slice();if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;for(const[i,s]of e)t.set(i,ie(s));return t}if(e instanceof Set){const t=new Set;for(const i of e)t.add(ie(i));return t}return null}function O9(e,t){return e===t||typeof e=="number"&&isNaN(e)&&typeof t=="number"&&isNaN(t)||typeof(e==null?void 0:e.getTime)=="function"&&typeof(t==null?void 0:t.getTime)=="function"&&e.getTime()===t.getTime()||!1}function IS(e,t){return e===t||(e==null||typeof e=="string"?e===t:typeof e=="number"?e===t||typeof t=="number"&&isNaN(e)&&isNaN(t):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():Array.isArray(e)?Array.isArray(t)&&am(e,t):e instanceof Set?t instanceof Set&&ZC(e,t):e instanceof Map?t instanceof Map&&YC(e,t):!!u6(e)&&u6(t)&&KC(e,t))}function KC(e,t){if(e===null||t===null)return!1;const i=Object.keys(e);if(t===null||Object.keys(t).length!==i.length)return!1;for(const s of i)if(e[s]!==t[s]||!Object.prototype.hasOwnProperty.call(t,s))return!1;return!0}function ZC(e,t){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}function YC(e,t){if(e.size!==t.size)return!1;for(const[i,s]of e){const u=t.get(i);if(u!==s||u===void 0&&!t.has(i))return!1}return!0}function P9(e,t,i=!1){return kS(e,t,i)}function Kp(e,t){if(t!=null)return t[e]||ES(e.split("."),!1,t)}function Hi(e,t,i){const s=e.split("."),u=s.pop(),d=ES(s,!0,i);d&&u&&(d[u]=t)}function ES(e,t,i){let s=i;for(const u of e){if(s==null)return;if(!(u in s)){if(!t)return;s[u]={}}s=s[u]}return s}function kS(e,t,i){return t?Object.keys(t).reduce((s,u)=>{let d=s[u],y=t[u];return d===y?s:d===void 0?(s[u]=ie(y),s):(Array.isArray(y)||Array.isArray(s)?(d=d?Array.isArray(d)?s[u]=d.concat():s[u]=[d]:s[u]=[],y&&(Array.isArray(y)||(y=[y]),i?y.forEach(v=>{d.includes(v)||d.push(v)}):s[u]=y.concat())):y&&typeof y=="object"?s[u]=kS(d,y,i):s.hasOwnProperty(u)&&!t.hasOwnProperty(u)||(s[u]=y),s)},e||{}):e}var oS;const at={apiKey:void 0,applicationName:"",applicationUrl:(oS=globalThis.location)==null?void 0:oS.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(P9(at,globalThis.esriConfig,!0),delete at.has),!at.assetsPath){{const e="4.28";at.assetsPath=`https://js.arcgis.com/${e}/@arcgis/core/assets`}at.defaultAssetsPath=at.assetsPath}const XC="modulepreload",QC=function(e){return"/uwgisday23/"+e},h6={},Se=function(t,i,s){if(!i||i.length===0)return t();const u=document.getElementsByTagName("link");return Promise.all(i.map(d=>{if(d=QC(d),d in h6)return;h6[d]=!0;const y=d.endsWith(".css"),v=y?'[rel="stylesheet"]':"";if(!!s)for(let E=u.length-1;E>=0;E--){const O=u[E];if(O.href===d&&(!y||O.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${v}`))return;const M=document.createElement("link");if(M.rel=y?"stylesheet":XC,y||(M.as="script",M.crossOrigin=""),M.href=d,document.head.appendChild(M),y)return new Promise((E,O)=>{M.addEventListener("load",E),M.addEventListener("error",()=>O(new Error(`Unable to preload CSS for ${d}`)))})})).then(()=>t()).catch(d=>{const y=new Event("vite:preloadError",{cancelable:!0});if(y.payload=d,window.dispatchEvent(y),!y.defaultPrevented)throw d})};function w(e,t,i,s){var u,d=arguments.length,y=d<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,i):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(e,t,i,s);else for(var v=e.length-1;v>=0;v--)(u=e[v])&&(y=(d<3?u(y):d>3?u(t,i,y):u(t,i))||y);return d>3&&y&&Object.defineProperty(t,i,y),y}function Nae(e,t,i,s){function u(d){return d instanceof i?d:new i(function(y){y(d)})}return new(i||(i=Promise))(function(d,y){function v(E){try{M(s.next(E))}catch(O){y(O)}}function _(E){try{M(s.throw(E))}catch(O){y(O)}}function M(E){E.done?d(E.value):u(E.value).then(v,_)}M((s=s.apply(e,t||[])).next())})}const c6=new Set;function ej(e,t,i=!1){i&&c6.has(t)||(i&&c6.add(t),e.warn(`🛑 DEPRECATED - ${t}`))}function AS(e,t,i={}){if(oe("esri-deprecation-warnings")){const{moduleName:s}=i;ic(e,`Function: ${(s?s+"::":"")+t+"()"}`,i)}}function hv(e,t,i={}){if(oe("esri-deprecation-warnings")){const{moduleName:s}=i;ic(e,`Property: ${(s?s+"::":"")+t}`,i)}}function ic(e,t,i={}){if(oe("esri-deprecation-warnings")){const{replacement:s,version:u,see:d,warnOnce:y}=i;let v=t;s&&(v+=`
	🛠️ Replacement: ${s}`),u&&(v+=`
	⚙️ Version: ${u}`),d&&(v+=`
	🔗 See ${d} for more details.`),ej(e,v,y)}}function Rae(e){const t=[];return function*(){yield*t;for(const i of e)t.push(i),yield i}}function tj(e,t){for(const i of e)if(i!=null&&t(i))return i}function B1(e){return e!=null&&typeof e[Symbol.iterator]=="function"}let C9=class cv{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let t=0;return this._groups.forEach(i=>{t+=i.length}),t}add(t,i){if(B1(t)){const s=this._getOrCreateGroup(i);for(const u of t)this._isHandle(u)&&s.push(u)}else this._isHandle(t)&&this._getOrCreateGroup(i).push(t);return this}forEach(t,i){if(typeof t=="function")this._groups.forEach(s=>s.forEach(t));else{const s=this._getGroup(t);s&&i&&s.forEach(i)}}has(t){return this._groups.has(this._ensureGroupKey(t))}remove(t){if(typeof t!="string"&&B1(t)){for(const i of t)this.remove(i);return this}return this.has(t)?(this._removeAllFromGroup(this._getGroup(t)),this._groups.delete(this._ensureGroupKey(t)),this):this}removeAll(){return this._groups.forEach(t=>this._removeAllFromGroup(t)),this._groups.clear(),this}_isHandle(t){return t&&(!!t.remove||t instanceof cv)}_getOrCreateGroup(t){if(this.has(t))return this._getGroup(t);const i=[];return this._groups.set(this._ensureGroupKey(t),i),i}_getGroup(t){return this._groups.get(this._ensureGroupKey(t))}_ensureGroupKey(t){return t||"_default_"}_removeAllFromGroup(t){for(const i of t)i instanceof cv?i.removeAll():i.remove()}};const ij=/\{([^\}]+)\}/g;function p6(e){return e??""}function hm(e,t){return t?e.replaceAll(ij,typeof t=="object"?(i,s)=>p6(Kp(s,t)):(i,s)=>p6(t(s))):e}function Lae(e,t){return e.replaceAll(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,i=>t&&t.includes(i)?i:`\\${i}`)}function j9(e){let t=0;for(let i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t|=0;return t}function Dae(e){return new DOMParser().parseFromString(e||"","text/html").body.innerText||""}function Fae(e,t){return new RegExp(`{${t}}`,"ig").test(e)}const d6={info:0,warn:1,error:2,none:3};let de=class Di{constructor(t){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},t.level!=null&&(this.level=t.level),t.writer!=null&&(this.writer=t.writer),this._module=t.module,Di._loggers.set(this.module,this);const i=this.module.lastIndexOf(".");i!==-1&&(this._parent=Di.getLogger(this.module.slice(0,i)))}get module(){return this._module}get parent(){return this._parent}error(...t){this._log("error","always",...t)}warn(...t){this._log("warn","always",...t)}info(...t){this._log("info","always",...t)}errorOnce(...t){this._log("error","once",...t)}warnOnce(...t){this._log("warn","once",...t)}infoOnce(...t){this._log("info","once",...t)}errorOncePerTick(...t){this._log("error","oncePerTick",...t)}warnOncePerTick(...t){this._log("warn","oncePerTick",...t)}infoOncePerTick(...t){this._log("info","oncePerTick",...t)}get test(){const t=this;return{loggedMessages:t._loggedMessages,clearLoggedWarnings:()=>t._loggedMessages.warn.clear()}}static get test(){return{resetLoggers(t=new Map){const i=Di._loggers;return Di._loggers=t,i},set throttlingDisabled(t){Di._throttlingDisabled=t}}}static getLogger(t){return t=typeof t!="string"?t.declaredClass:t,Di._loggers.get(t)||new Di({module:t})}_log(t,i,...s){if(this._matchLevel(t)){if(i!=="always"&&!Di._throttlingDisabled){const u=this._argsToKey(s),d=this._loggedMessages[t].get(u);if(i==="once"&&d!=null||i==="oncePerTick"&&d&&d>=Di._tickCounter)return;this._loggedMessages[t].set(u,Di._tickCounter),Di._scheduleTickCounterIncrement()}for(const u of at.log.interceptors)if(u(t,this.module,...s))return;this._inheritedWriter()(t,this.module,...s)}}_parentWithMember(t,i){let s=this;for(;s!=null;){const u=s[t];if(u!=null)return u;s=s.parent}return i}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(t,i,...s){console[t](`[${i}]`,...s)}_matchLevel(t){const i=at.log.level||"warn";return d6[this._parentWithMember("level",i)]<=d6[t]}_argsToKey(...t){return j9(JSON.stringify(t,(s,u)=>typeof u!="object"||Array.isArray(u)?u:"[Object]"))}static _scheduleTickCounterIncrement(){Di._tickCounterScheduled||(Di._tickCounterScheduled=!0,Promise.resolve().then(()=>{Di._tickCounter++,Di._tickCounterScheduled=!1}))}};de._loggers=new Map,de._tickCounter=0,de._tickCounterScheduled=!1,de._throttlingDisabled=!1;function OS(e,t){if(e==null)throw new Error(t??"value is None")}function Ot(e){return e==null||e.destroy(),null}function zae(e){return e==null||e.dispose(),null}function Kt(e){return e==null||e.remove(),null}function bp(e){return e==null||e.abort(),null}function Vae(e){return e==null||e.release(),null}function rj(e,t,i){return e!=null&&t!=null?i!=null?i(e,t):e.equals(t):e===t}const PS=Symbol("Accessor-beforeDestroy"),sj={remove:()=>{}};function Et(e){return e?{remove(){e&&(e(),e=void 0)}}:sj}function nj(e){e.forEach(t=>t==null?void 0:t.remove())}function Zp(e){return Et(()=>nj(e))}function sr(e){return e.__accessor__??null}function oj(e,t){var i;return((i=e==null?void 0:e.metadatas)==null?void 0:i[t])!=null}function Cf(e,t,i){return i?H1(e,t,{policy:i,path:""}):H1(e,t,null)}function H1(e,t,i){return t?Object.keys(t).reduce((s,u)=>{const d=u;let y=null,v="merge";if(i&&(y=i.path?`${i.path}.${u}`:u,v=i.policy(y)),v==="replace"||v==="replace-arrays"&&Array.isArray(s[d]))return s[d]=t[d],s;if(s[d]===void 0)return s[d]=ie(t[d]),s;let _=s[d],M=t[d];if(_===M)return s;if(Array.isArray(M)||Array.isArray(s))_=_?Array.isArray(_)?s[d]=_.concat():s[d]=[_]:s[d]=[],M&&(Array.isArray(M)||(M=[M]),M.forEach(E=>{_.includes(E)||_.push(E)}));else if(M&&typeof M=="object")if(i){const E=i.path;i.path=y,s[d]=H1(_,M,i),i.path=E}else s[d]=H1(_,M,null);else s.hasOwnProperty(u)&&!t.hasOwnProperty(u)||(s[d]=M);return s},e||{}):e}function CS(e){return Array.isArray(e)?e:e.split(".")}function f6(e){return e.includes(",")?e.split(",").map(t=>t.trim()):[e.trim()]}function aj(e){if(Array.isArray(e)){const t=[];for(const i of e)t.push(...f6(i));return t}return f6(e)}function jS(e,t,i,s){const u=aj(t);if(u.length!==1){const d=u.map(y=>s(e,y,i));return Zp(d)}return s(e,u[0],i)}function NS(e,t){const i=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const u=parseInt(i,10);if(!isNaN(u))return Array.isArray(t)?t[u]:t.at(u)}const s=sr(t);return oj(s,i)?s.get(i):t[i]}function RS(e,t,i){if(e==null)return e;const s=NS(t[i],e);return!s&&i<t.length-1?void 0:i===t.length-1?s:RS(s,t,i+1)}function Yp(e,t,i=0){return typeof t!="string"||t.includes(".")?RS(e,CS(t),i):NS(t,e)}function Ns(e,t){return Yp(e,t)}function y6(e,t){return Yp(t,e)!==void 0}function Xp(e){let t=e.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!i){t=Object.create(t);for(const s in t)t[s]=ie(t[s]);Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t={},Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return e.constructor.__accessorMetadata__}function cm(e,t){const i=Xp(e);let s=i[t];return s||(s=i[t]={}),s}function lj(e,t){return Cf(e,t,hj)}const uj=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function hj(e){return uj.test(e)?"replace":"merge"}function cj(e){return(e==null?void 0:e.release)&&typeof e.release=="function"}function pj(e){return(e==null?void 0:e.acquire)&&typeof e.acquire=="function"}let Tu=class pv{constructor(t,i,s,u=1,d=0){if(this._ctor=t,this._acquireFunction=i,this._releaseFunction=s,this.allocationSize=u,this._pool=new Array(d),this._initialSize=d,this._ctor)for(let y=0;y<d;y++)this._pool[y]=new this._ctor;this.allocationSize=Math.max(u,1)}destroy(){this.prune(0)}acquire(...t){let i;if(pv.test.disabled)i=new this._ctor;else{if(this._pool.length===0){const s=this.allocationSize;for(let u=0;u<s;u++)this._pool[u]=new this._ctor}i=this._pool.pop()}return this._acquireFunction?this._acquireFunction(i,...t):pj(i)&&i.acquire(...t),i}release(t){t&&!pv.test.disabled&&(this._releaseFunction?this._releaseFunction(t):cj(t)&&t.release(),this._pool.push(t))}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let i=t;i<this._pool.length;++i){const s=this._pool[i];this._dispose(s)}this._pool.length=t}}_dispose(t){t.dispose&&typeof t.dispose=="function"&&t.dispose()}};Tu.test={disabled:!1};var oo;(function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CONSTRUCTING=1]="CONSTRUCTING",e[e.CONSTRUCTED=2]="CONSTRUCTED"})(oo||(oo={}));let dj=class{constructor(t,i){this._observers=t,this._observer=i}remove(){qC(this._observers,this._observer)}},LS=class{constructor(){this._observers=null,this.destroyed=!1}observe(t){if(this.destroyed||t.destroyed)return fj;this._observers==null&&(this._observers=[]);const i=this._observers;let s=!1,u=!1;const d=i.length;for(let y=0;y<d;++y){const v=i[y];if(v.destroyed)u=!0;else if(v===t){s=!0;break}}return s||(i.push(t),u&&this._removeDestroyedObservers()),new dj(i,t)}_removeDestroyedObservers(){const t=this._observers;if(!t||t.length===0)return;const i=t.length;let s=0;for(let u=0;u<i;++u){for(;u+s<i&&t[u+s].destroyed;)++s;if(s>0){if(!(u+s<i))break;t[u]=t[u+s]}}t.length=i-s}destroy(){if(this.destroyed)return;this.destroyed=!0;const t=this._observers;if(t!=null){for(const i of t)i.onCommitted();this._observers=null}}};const fj=Et();var Xe;(function(e){e[e.DEFAULTS=0]="DEFAULTS",e[e.COMPUTED=1]="COMPUTED",e[e.SERVICE=2]="SERVICE",e[e.PORTAL_ITEM=3]="PORTAL_ITEM",e[e.WEB_SCENE=4]="WEB_SCENE",e[e.WEB_MAP=5]="WEB_MAP",e[e.LINK_CHART=6]="LINK_CHART",e[e.USER=7]="USER"})(Xe||(Xe={}));const dv=Xe.USER+1;function pa(e){switch(e){case"defaults":return Xe.DEFAULTS;case"service":return Xe.SERVICE;case"portal-item":return Xe.PORTAL_ITEM;case"web-scene":return Xe.WEB_SCENE;case"web-map":return Xe.WEB_MAP;case"link-chart":return Xe.LINK_CHART;case"user":return Xe.USER;default:return null}}function W1(e){switch(e){case Xe.DEFAULTS:return"defaults";case Xe.SERVICE:return"service";case Xe.PORTAL_ITEM:return"portal-item";case Xe.WEB_SCENE:return"web-scene";case Xe.WEB_MAP:return"web-map";case Xe.LINK_CHART:return"link-chart";case Xe.USER:return"user"}}function yj(e){return W1(e)}var yt;(function(e){e[e.Dirty=1]="Dirty",e[e.Overriden=2]="Overriden",e[e.Computing=4]="Computing",e[e.NonNullable=8]="NonNullable",e[e.HasDefaultValue=16]="HasDefaultValue",e[e.DepTrackingInitialized=32]="DepTrackingInitialized",e[e.AutoTracked=64]="AutoTracked",e[e.ExplicitlyTracking=128]="ExplicitlyTracking"})(yt||(yt={}));const J1={onObservableAccessed:()=>{},onTrackingEnd:()=>{}},t0=[];let X0=J1;function Pe(e){X0.onObservableAccessed(e)}let jf=!1,Nf=!1;function ho(e,t,i){if(jf)return N9(e,t,i);DS(e);const s=t.call(i);return FS(),s}function mj(e,t){return ho(J1,e,t)}function N9(e,t,i){const s=jf;jf=!0,DS(e);let u=null;try{u=t.call(i)}catch(d){Nf&&de.getLogger("esri.core.accessorSupport.tracking").error(d)}return FS(),jf=s,u}function DS(e){X0=e,t0.push(e)}function FS(){const e=t0.length;if(e>1){const t=t0.pop();X0=t0[e-2],t.onTrackingEnd()}else if(e===1){const t=t0.pop();X0=J1,t.onTrackingEnd()}else X0=J1}function zS(e,t){if(t.flags&yt.DepTrackingInitialized)return;const i=Nf;Nf=!1,t.flags&yt.AutoTracked?N9(t,t.metadata.get,e):VS(e,t),Nf=i}const gj=[];function VS(e,t){t.flags&yt.ExplicitlyTracking||(t.flags|=yt.ExplicitlyTracking,N9(t,()=>{const i=t.metadata.dependsOn||gj;for(const s of i)if(typeof s!="string"||s.includes(".")){const u=CS(s);for(let d=0,y=e;d<u.length&&y!=null&&typeof y=="object";++d)y=m6(y,u[d],d!==u.length-1)}else m6(e,s,!1)}),t.flags&=~yt.ExplicitlyTracking)}function m6(e,t,i){const s=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const d=parseInt(s,10);if(!isNaN(d))return Array.isArray(e)?e[d]:e.at(d)}const u=sr(e);if(u){const d=u.propertiesByName.get(s);d&&(Pe(d),zS(e,d))}return i?e[s]:void 0}let g6=class extends LS{constructor(t,i){super(),this.propertyName=t,this.metadata=i,this._accessed=null,this._handles=null,this.flags=0,this.flags=yt.Dirty|(i.nonNullable?yt.NonNullable:0)|(i.hasOwnProperty("value")?yt.HasDefaultValue:0)|(i.get===void 0?yt.DepTrackingInitialized:0)|(i.dependsOn===void 0?yt.AutoTracked:0)}destroy(){this.flags&yt.Dirty&&this.onCommitted(),super.destroy(),this._accessed=null,this._clearObservationHandles()}getComputed(t){Pe(this);const i=t.store,s=this.propertyName,u=this.flags,d=i.get(s);if(u&yt.Computing||~u&yt.Dirty&&i.has(s))return d;this.flags|=yt.Computing;const y=t.host;let v;u&yt.AutoTracked?v=ho(this,this.metadata.get,y):(VS(y,this),v=this.metadata.get.call(y)),i.set(s,v,Xe.COMPUTED);const _=i.get(s);return _===d?this.flags&=~yt.Dirty:mj(this.commit,this),this.flags&=~yt.Computing,_}onObservableAccessed(t){if(t===this)return;let i=this._accessed;if(i==null)i=[],this._accessed=i;else if(i.includes(t))return;i.push(t)}onTrackingEnd(){this._clearObservationHandles(),this.flags|=yt.DepTrackingInitialized;const t=this._accessed;if(t==null||t.length===0)return;let i=this._handles;i==null&&(i=[],this._handles=i);for(let s=0;s<t.length;++s)i.push(t[s].observe(this));t.length=0}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=~yt.Dirty,this.onCommitted()}_clearObservationHandles(){const t=this._handles;if(t!==null){for(let i=0;i<t.length;++i)t[i].remove();t.length=0}}onInvalidated(){~this.flags&yt.Overriden&&(this.flags|=yt.Dirty);const t=this._observers;if(t&&t.length>0)for(const i of t)i.onInvalidated()}onCommitted(){const t=this._observers;if(t&&t.length>0){const i=t.slice();for(const s of i)s.onCommitted()}}},vj=class GS{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const i=new GS;return this._values.forEach((s,u)=>{t&&t.has(u)||i.set(u,ie(s))}),i}get(t){return this._values.get(t)}originOf(){return Xe.USER}keys(){return[...this._values.keys()]}set(t,i){this._values.set(t,i)}delete(t){this._values.delete(t)}has(t){return this._values.has(t)}forEach(t){this._values.forEach(t)}};function Od(e,t,i){return e!==void 0}function v6(e,t,i,s){return e!==void 0&&(!(i==null&&e.flags&yt.NonNullable)||(s.lifecycle,oo.INITIALIZING,!1))}function wj(e){return e&&typeof e.destroy=="function"}de.getLogger("esri.core.accessorSupport.Properties");let bj=class{constructor(t){this.host=t,this.propertiesByName=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=oo.INITIALIZING,this.store=new vj,this._origin=Xe.USER;const i=this.host.constructor.__accessorMetadata__;for(const s in i){const u=new g6(s,i[s]);this.propertiesByName.set(s,u)}this.metadatas=i}initialize(){this.lifecycle=oo.CONSTRUCTING}constructed(){this.lifecycle=oo.CONSTRUCTED}destroy(){this.destroyed=!0;for(const[t,i]of this.propertiesByName){if(i.metadata.autoDestroy){const s=this.internalGet(t);s&&wj(s)&&(s.destroy(),~i.flags&yt.NonNullable&&this._internalSet(i,null))}i.destroy()}}get initialized(){return this.lifecycle!==oo.INITIALIZING}get(t){const i=this.propertiesByName.get(t);if(i.metadata.get)return i.getComputed(this);Pe(i);const s=this.store;return s.has(t)?s.get(t):i.metadata.value}originOf(t){const i=this.store.originOf(t);if(i===void 0){const s=this.propertiesByName.get(t);if(s!==void 0&&s.flags&yt.HasDefaultValue)return"defaults"}return W1(i)}has(t){return!!this.propertiesByName.has(t)&&this.store.has(t)}keys(){return[...this.propertiesByName.keys()]}internalGet(t){const i=this.propertiesByName.get(t);if(Od(i))return this.store.has(t)?this.store.get(t):i.metadata.value}internalSet(t,i){const s=this.propertiesByName.get(t);Od(s)&&this._internalSet(s,i)}getDependsInfo(t,i,s){const u=this.propertiesByName.get(i);if(!Od(u))return"";const d=new Set,y=ho({onObservableAccessed:_=>d.add(_),onTrackingEnd:()=>{}},()=>{var _;return(_=u.metadata.get)==null?void 0:_.call(t)});let v=`${s}${t.declaredClass.split(".").pop()}.${i}: ${y}
`;if(d.size===0)return v;s+="  ";for(const _ of d)_ instanceof g6&&(v+=`${s}${_.propertyName}: undefined
`);return v}setAtOrigin(t,i,s){const u=this.propertiesByName.get(t);if(Od(u))return this._setAtOrigin(u,i,s)}isOverridden(t){const i=this.propertiesByName.get(t);return i!==void 0&&!!(i.flags&yt.Overriden)}clearOverride(t){const i=this.propertiesByName.get(t);i&&i.flags&yt.Overriden&&(i.flags&=~yt.Overriden,i.notifyChange())}override(t,i){const s=this.propertiesByName.get(t);if(!v6(s,t,i,this))return;const u=s.metadata.cast;if(u){const d=this._cast(u,i),{valid:y,value:v}=d;if(Pg.release(d),!y)return;i=v}s.flags|=yt.Overriden,this._internalSet(s,i)}set(t,i){const s=this.propertiesByName.get(t);if(!v6(s,t,i,this))return;const u=s.metadata.cast;if(u){const y=this._cast(u,i),{valid:v,value:_}=y;if(Pg.release(y),!v)return;i=_}const d=s.metadata.set;d?d.call(this.host,i):this._internalSet(s,i)}setDefaultOrigin(t){this._origin=pa(t)}getDefaultOrigin(){return W1(this._origin)}notifyChange(t){const i=this.propertiesByName.get(t);i!==void 0&&i.notifyChange()}invalidate(t){const i=this.propertiesByName.get(t);i!==void 0&&i.invalidate()}commit(t){const i=this.propertiesByName.get(t);i!==void 0&&i.commit()}_internalSet(t,i){const s=this.lifecycle!==oo.INITIALIZING?this._origin:Xe.DEFAULTS;this._setAtOrigin(t,i,s)}_setAtOrigin(t,i,s){const u=this.store,d=t.propertyName;u.has(d,s)&&O9(i,u.get(d))&&~t.flags&yt.Overriden&&s===u.originOf(d)||(t.invalidate(),u.set(d,i,s),t.commit(),zS(this.host,t))}_cast(t,i){const s=Pg.acquire();return s.valid=!0,s.value=i,t&&(s.value=t.call(this.host,i,s)),s}},_j=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const Pg=new Tu(_j);function xj(e,t){return e.replaceAll(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,(i,s)=>s===""?"$":(Kp(s,t)??"").toString())}let qS=class{constructor(t,i,s){this.name=t,this.details=s,this.message=(i&&xj(i,s))??""}toString(){return"["+this.name+"]: "+this.message}},ae=class US extends qS{constructor(t,i,s){super(t,i,s)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(t,i)=>{if(i&&typeof i=="object"&&typeof i.toJSON=="function")return i;try{return ie(i)}catch{return"[object]"}}))}}catch(t){throw de.getLogger("esri.core.Error").error(t),t}return{name:this.name,message:this.message,details:this.details}}static fromJSON(t){return new US(t.name,t.message,t.details)}};ae.prototype.type="error";function K1(e,t,i){if(e&&t)if(typeof t=="object")for(const s of Object.getOwnPropertyNames(t))K1(e,s,t[s]);else{if(t.includes(".")){const u=t.split("."),d=u.splice(-1,1)[0];return void K1(Ns(e,u),d,i)}const s=e.__accessor__;s!=null&&Sj(t,s),e[t]=i}}function Sj(e,t){if(oe("esri-unknown-property-errors")&&!$j(e,t))throw new ae("set:unknown-property",Tj(e,t))}function $j(e,t){return t.metadatas[e]!=null}function Tj(e,t){return"setting unknown property '"+e+"' on instance of "+t.host.declaredClass}let Mj;function Ij(){return Mj}var w6;(function(e){e[e.Ignore=0]="Ignore",e[e.Destroy=1]="Destroy",e[e.ThrowError=2]="ThrowError"})(w6||(w6={}));function Ej(e){e.length=0}let tr=class{constructor(t=50,i=50){this._pool=new Tu(Array,void 0,Ej,i,t)}acquire(){return this._pool.acquire()}release(t){this._pool.release(t)}prune(){this._pool.prune(0)}static acquire(){return Cg.acquire()}static release(t){return Cg.release(t)}static prune(){Cg.prune()}};const Cg=new tr(100);let BS=class extends Tu{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...t){const i=super.acquire(...t);return this._set.delete(i),i}release(t){t&&!this._set.has(t)&&(super.release(t),this._set.add(t))}_dispose(t){this._set.delete(t),super._dispose(t)}};const Pd=[];function Z1(e){Pd.push(e),Pd.length===1&&queueMicrotask(()=>{const t=Pd.slice();Pd.length=0;for(const i of t)i()})}let HS=class{constructor(t,i=30){this.name=t,this._counter=0,this._samples=new Array(i)}record(t){t!=null&&(this._samples[++this._counter%this._samples.length]=t)}get median(){return this._samples.slice().sort((t,i)=>t-i)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((t,i)=>t+i,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var fv;(function(e){const t=(d,y,v,_)=>{let M=y,E=y;const O=v>>>1,C=d[M-1];for(;E<=O;){E=M<<1,E<v&&_(d[E-1],d[E])<0&&++E;const R=d[E-1];if(_(R,C)<=0)break;d[M-1]=R,M=E}d[M-1]=C},i=(d,y)=>d<y?-1:d>y?1:0;function s(d,y,v,_){y===void 0&&(y=0),v===void 0&&(v=d.length),_===void 0&&(_=i);for(let E=v>>>1;E>y;E--)t(d,E,v,_);const M=y+1;for(let E=v-1;E>y;E--){const O=d[y];d[y]=d[E],d[E]=O,t(d,M,E,_)}}function*u(d,y,v,_){y===void 0&&(y=0),v===void 0&&(v=d.length),_===void 0&&(_=i);for(let E=v>>>1;E>y;E--)t(d,E,v,_),yield;const M=y+1;for(let E=v-1;E>y;E--){const O=d[y];d[y]=d[E],d[E]=O,t(d,M,E,_),yield}}e.sort=s,e.iterableSort=u})(fv||(fv={}));const b6=fv,kj=1.5,Aj=1.1;let Y1=class{constructor(t){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new dS,t&&(t.initialSize&&(this.data=new Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),t.deallocator!==void 0&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=()=>_6(this)))}toArray(){return this.data.slice(0,this.length)}filter(t){const i=new Array;for(let s=0;s<this._length;s++){const u=this.data[s];t(u)&&i.push(u)}return i}at(t){if((t=Math.trunc(t)||0)<0&&(t+=this._length),!(t<0||t>=this._length))return this.data[t]}includes(t,i){const s=this.data.indexOf(t,i);return s!==-1&&s<this.length}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t}else{if(this._deallocator)for(let i=t;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=t,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(t){this.data[this._length++]=t}pushArray(t,i=t.length){for(let s=0;s<i;s++)this.data[this._length++]=t[s]}fill(t,i){for(let s=0;s<i;s++)this.data[this._length++]=t}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return++this._length,t}unshift(t){this.data.unshift(t),this._length++,_6(this)}pop(){if(this.length===0)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}remove(t){const i=lv(this.data,t,this.length,this._hint);if(i!==-1)return this.data.splice(i,1),this.length=this.length-1,t}removeUnordered(t){return this.removeUnorderedIndex(lv(this.data,t,this.length,this._hint))}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,i=t.length,s){this.length=GC(this.data,t,this.length,i,this._hint,s),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(t,i){if(t>=this.length||i>=this.length||t===i)return;const s=this.data[t];this.data[t]=this.data[i],this.data[i]=s}sort(t){b6.sort(this.data,0,this.length,t)}iterableSort(t){return b6.iterableSort(this.data,0,this.length,t)}some(t,i){for(let s=0;s<this.length;++s)if(t.call(i,this.data[s],s,this.data))return!0;return!1}find(t,i){for(let s=0;s<this.length;++s){const u=this.data[s];if(t.call(i,u,s))return u}}filterInPlace(t,i){let s=0;for(let u=0;u<this._length;++u){const d=this.data[u];t.call(i,d,u,this.data)&&(this.data[u]=this.data[s],this.data[s]=d,s++)}if(this._deallocator)for(let u=s;u<this._length;u++)this.data[u]=this._deallocator(this.data[u]);return this._length=s,this._shrink(),this}forAll(t,i){const s=this.length,u=this.data;for(let d=0;d<s;++d)t.call(i,u[d],d,u)}forEach(t,i){for(let s=0;s<this.length;++s)t.call(i,this.data[s],s,this.data)}map(t,i){const s=new Array(this.length);for(let u=0;u<this.length;++u)s[u]=t.call(i,this.data[u],u,this.data);return s}reduce(t,i){let s=i;for(let u=0;u<this.length;++u)s=t(s,this.data[u],u,this.data);return s}has(t){const i=this.length,s=this.data;for(let u=0;u<i;++u)if(s[u]===t)return!0;return!1}};function _6(e){e.data.length>kj*e.length&&(e.data.length=Math.floor(e.length*Aj))}function Oj(e){return{setTimeout:(t,i)=>{const s=e.setTimeout(t,i);return Et(()=>e.clearTimeout(s))}}}const mc=Oj(globalThis);function pm(e){return e&&(typeof e.on=="function"||typeof e.addEventListener=="function")}function Qp(e,t,i){if(!pm(e))throw new TypeError("target is not a Evented or EventTarget object");if("on"in e)return e.on(t,i);if(Array.isArray(t)){const s=t.slice();for(const u of s)e.addEventListener(u,i);return Et(()=>{for(const u of s)e.removeEventListener(u,i)})}return e.addEventListener(t,i),Et(()=>e.removeEventListener(t,i))}function WS(e,t,i){if(!pm(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,i);const s=Qp(e,t,u=>{s.remove(),i.call(e,u)});return s}const Pj={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function Cj({key:e}){return Pj[e]||e}function hi(e="Aborted"){return new ae("AbortError",e)}function Gt(e,t="Aborted"){if(co(e))throw hi(t)}function dm(e){return e!=null?"aborted"in e?e:e.signal:e}function co(e){const t=dm(e);return t!=null&&t.aborted}function yn(e){if(Rr(e))throw e}function x6(e){if(!Rr(e))throw e}function Rs(e,t){const i=dm(e);if(i!=null){if(!i.aborted)return WS(i,"abort",()=>t());t()}}function R9(e,t){const i=dm(e);if(i!=null)return Gt(i),WS(i,"abort",()=>t(hi()))}function jj(e,t){return dm(t)==null?e:new Promise((i,s)=>{let u=Rs(t,()=>s(hi()));const d=()=>{u=Kt(u)};e.then(d,d),e.then(i,s)})}function Rr(e){return(e==null?void 0:e.name)==="AbortError"}async function yv(e){try{return await e}catch(t){if(!Rr(t))throw t;return}}async function fm(e){if(!e)return;if(typeof e.forEach!="function"){const i=Object.keys(e),s=i.map(y=>e[y]),u=await fm(s),d={};return i.map((y,v)=>d[y]=u[v]),d}const t=e;return Promise.allSettled(t).then(i=>Array.from(t,(s,u)=>{const d=i[u];return d.status==="fulfilled"?{promise:s,value:d.value}:{promise:s,error:d.reason}}))}async function Nj(e){return(await fm(e)).filter(t=>!!t.value).map(t=>t.value)}async function Xae(e){return(await Promise.allSettled(e)).filter(t=>t.status==="fulfilled").map(t=>t.value)}async function Qae(e){return(await Promise.allSettled(e)).filter(t=>t.status==="rejected").map(t=>t.reason)}function JS(e,t=void 0,i){const s=new AbortController;return Rs(i,()=>s.abort()),new Promise((u,d)=>{let y=setTimeout(()=>{y=0,u(t)},e);Rs(s,()=>{y&&(clearTimeout(y),d(hi()))})})}function Oa(e){return e&&typeof e.then=="function"}function S6(e){return Oa(e)?e:Promise.resolve(e)}function L9(e,t=-1){let i,s,u,d,y=null;const v=(..._)=>{if(i){s=_,d&&d.reject(hi()),d=ts();const C=d.promise;if(y){const R=y;y=null,R.abort()}return C}if(u=d||ts(),d=null,t>0){const C=new AbortController;i=S6(e(..._,C.signal));const R=i;JS(t).then(()=>{i===R&&(d?C.abort():y=C)})}else i=1,i=S6(e(..._));const M=()=>{const C=s;s=u=i=y=null,C!=null&&v(...C)},E=i,O=u;return E.then(M,M),E.then(O.resolve,O.reject),O.promise};return v}function ts(){let e,t;const i=new Promise((u,d)=>{e=u,t=d}),s=u=>{e(u)};return s.resolve=u=>e(u),s.reject=u=>t(u),s.timeout=(u,d)=>mc.setTimeout(()=>s.reject(d),u),s.promise=i,s}async function $6(e){await Promise.resolve(),Gt(e)}function ele(e){return e}function tle(e){return 1e3*e}function ile(e){return e}let Rj=class{constructor(t){this.phases=t,this.paused=!1,this.ticks=-1,this.removed=!1}},Lj=class{constructor(t){this.callback=t,this.isActive=!0}remove(){this.isActive=!1}},mv=0;const Nc={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},gv=["prepare","preRender","render","postRender","update","finish"],vv=[],lu=new Y1;let Dj=class{constructor(t){this._task=t}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}};const X1={frameTasks:lu,willDispatch:!1,clearFrameTasks:Fj,dispatch:YS,executeFrameTasks:zj};function gc(e){const t=new Lj(e);return vv.push(t),X1.willDispatch||(X1.willDispatch=!0,Z1(YS)),t}function rc(e){const t=new Rj(e);return lu.push(t),Q1==null&&(mv=performance.now(),Q1=requestAnimationFrame(KS)),new Dj(t)}let Q1=null;function Fj(e=!1){lu.forAll(t=>{t.removed=!0}),e&&ZS()}function KS(){const e=performance.now();Q1=null,Q1=lu.length>0?requestAnimationFrame(KS):null,X1.executeFrameTasks(e)}function zj(e){const t=e-mv;mv=e;const i=1e3/60,s=Math.max(0,t-i);Nc.time=e,Nc.frameDuration=i-s;for(let u=0;u<gv.length;u++){const d=performance.now(),y=gv[u];lu.forAll(v=>{var _;v.paused||v.removed||(u===0&&v.ticks++,v.phases[y]&&(Nc.elapsedFrameTime=performance.now()-e,Nc.deltaTime=v.ticks===0?0:t,(_=v.phases[y])==null||_.call(v,Nc)))}),Vj[u].record(performance.now()-d)}ZS(),Gj.record(performance.now()-e)}const Cd=new Y1;function ZS(){lu.forAll(e=>{e.removed&&Cd.push(e)}),lu.removeUnorderedMany(Cd.data,Cd.length),Cd.clear()}function YS(){for(;vv.length;){const e=vv.shift();e.isActive&&e.callback()}X1.willDispatch=!1}function ole(e=1,t){const i=ts(),s=()=>{co(t)?i.reject(hi()):e===0?i():(--e,Z1(()=>s()))};return s(),i.promise}const Vj=gv.map(e=>new HS(e)),Gj=new HS("total");function qj(e,t){for(const i of e.entries())if(t(i[0]))return!0;return!1}function T6(e,t){if(!t)return e;for(const i of t)e.add(i);return e}function Uj(e,t){const i=new Set;return T6(i,e),T6(i,t),i}function ale(e,t){const i=new Set;for(const s of t)e.has(s)&&i.add(s);return i}function lle(e,t){if(!e||!t)return!1;if(e===t)return!0;for(const i of e)if(!t.has(i))return!1;return!0}function ule(e,t){if(e==null&&t==null)return!0;if(e==null||t==null||e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}function hle(e,t){const i=new Set(e);for(const s of t)i.delete(s);return i}let Bj=0;function Q0(){return++Bj}let ym=class{constructor(t){this._accessed=[],this._handles=[],this._observerObject=new Hj(t),M6.register(this,new WeakRef(this._observerObject),this)}destroy(){var t;M6.unregister(this._observerObject),this._accessed.length=0,(t=this._observerObject)==null||t.destroy(),this.clear()}onObservableAccessed(t){const i=this._accessed;i.includes(t)||i.push(t)}onTrackingEnd(){const t=this._handles,i=this._accessed,s=this._observerObject;for(let u=0;u<i.length;++u)t.push(i[u].observe(s));i.length=0}clear(){const t=this._handles;for(let i=0;i<t.length;++i)t[i].remove();t.length=0}},Hj=class{constructor(t){this._notify=t,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const t=this._invalidCount;if(t===1)return this._invalidCount=0,void this._notify();this._invalidCount=t>0?t-1:0}destroy(){this.destroyed=!0,this._notify=Wj}};const M6=new FinalizationRegistry(e=>{var t;(t=e.deref())==null||t.destroy()});function Wj(){}let Vh=!1;const ey=[];function XS(e,t){let i=new ym(d),s=null,u=!1;function d(){if(!i||u)return;if(Vh)return void t$(d);const v=s;i.clear(),Vh=!0,u=!0,s=ho(i,e),u=!1,Vh=!1,t(s,v),i$()}function y(){i&&(i.destroy(),i=null,s=null)}return u=!0,s=ho(i,e),u=!1,Et(y)}function QS(e,t){let i=new ym(u),s=null;function u(){t(s,y)}function d(){i&&(i.destroy(),i=null),s=null}function y(){return i?(i.clear(),s=ho(i,e),s):null}return y(),Et(d)}function e$(e){let t=new ym(s),i=!1;function s(){t&&!i&&(Vh?t$(s):(t.clear(),Vh=!0,i=!0,ho(t,e),i=!1,Vh=!1,i$()))}function u(){t&&(t.destroy(),t=null)}return i=!0,ho(t,e),i=!1,Et(u)}function t$(e){ey.includes(e)||ey.unshift(e)}function i$(){for(;ey.length;)ey.pop()()}var ep;(function(e){e[e.Untracked=0]="Untracked",e[e.Tracked=1]="Tracked"})(ep||(ep={}));let _p=class{constructor(){this.uid=Q0(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(t,i,s,u,d){return this.pool.acquire(ep.Untracked,t,i,s,u,d,O9)}static acquireTracked(t,i,s,u){return this.pool.acquire(ep.Tracked,t,i,s,null,null,u)}notify(t,i){this.type===ep.Untracked?this.callback.call(this.target,t,i,this.path,this.target):this.callback.call(null,t,i,void 0,void 0)}acquire(t,i,s,u,d,y,v){this.uid=Q0(),this.removed=!1,this.type=t,this.oldValue=i,this.callback=s,this.getValue=u,this.target=d,this.path=y,this.equals=v}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=Q0(),this.removed=!0}};_p.pool=new BS(_p);const Rf=new tr,ao=new Set;let ty;function iy(e){ao.delete(e),ao.add(e),ty||(ty=gc(Zj))}function Jj(e){if(e.removed)return;const t=e.oldValue,i=e.getValue();e.equals(t,i)||(e.oldValue=i,e.notify(i,t))}function Kj(e){for(const t of ao.values())t.target===e&&(t.removed=!0)}function Zj(){let e=10;for(;ty&&e--;){ty=null;const t=Yj(),i=Rf.acquire();for(const s of t){const u=s.uid;Jj(s),u===s.uid&&s.removed&&i.push(s)}for(const s of ao)s.removed&&(i.push(s),ao.delete(s));for(const s of i)_p.pool.release(s);Rf.release(i),Rf.release(t),wv.forEach(s=>s())}}function Yj(){const e=Rf.acquire();e.length=ao.size;let t=0;for(const i of ao)e[t]=i,++t;return ao.clear(),e}const wv=new Set;function Xj(e){return wv.add(e),Et(()=>wv.delete(e))}function Qj(e,t,i){let s=jS(e,t,i,(u,d,y)=>{let v,_,M=QS(()=>Yp(u,d),(E,O)=>{u.__accessor__.destroyed||v&&v.uid!==_?s.remove():(v||(v=_p.acquireUntracked(E,y,O,u,d),_=v.uid),iy(v))});return Et(()=>{M.remove(),v&&(v.uid!==_||v.removed||(v.removed=!0,iy(v)),v=null),s=M=null})});return s}function eN(e,t,i){const s=jS(e,t,i,(u,d,y)=>{let v=!1;return XS(()=>Yp(u,d),(_,M)=>{u.__accessor__.destroyed?s.remove():v||(v=!0,O9(M,_)||y.call(u,_,M,d,u),v=!1)})});return s}function tN(e,t,i,s=!1){return!e.__accessor__||e.__accessor__.destroyed?Et():s?eN(e,t,i):Qj(e,t,i)}function iN(e,t,i){let s,u,d=QS(e,(y,v)=>{s&&s.uid!==u?d.remove():(s||(s=_p.acquireTracked(y,t,v,i),u=s.uid),iy(s))});return Et(()=>{d.remove(),s&&(s.uid!==u||s.removed||(s.removed=!0,iy(s)),s=null),d=null})}function rN(e,t,i){let s=!1;return XS(e,(u,d)=>{s||(s=!0,i(d,u)||t(u,d),s=!1)})}function sN(e,t,i=!1,s=IS){return i?rN(e,t,s):iN(e,t,s)}function I6(e){return qj(ao,t=>t.oldValue===e)}function mm(e,t){for(const[i,s]of e)if(t(s,i))return!0;return!1}function r$(e,t,i){const s=e.get(t);if(s!==void 0)return s;const u=i();return e.set(t,u),u}const Gh=de.getLogger("esri.core.accessorSupport.ensureTypes");function nN(e){return e==null?e:new Date(e)}function oN(e){return e==null?e:!!e}function ed(e){return e==null?e:e.toString()}function Zr(e){return e==null?e:(e=parseFloat(e),isNaN(e)?0:e)}function D9(e){return e==null?e:Math.round(parseFloat(e))}function s$(e){return(e==null?void 0:e.constructor)&&e.constructor.__accessorMetadata__!==void 0}function ry(e,t){return t!=null&&e&&!(t instanceof e)}function n$(e){return e&&"isCollection"in e}function E6(e){return e!=null&&e.Type?typeof e.Type=="function"?e.Type:e.Type.base:null}function aN(e,t){if(!(t!=null&&t.constructor)||!n$(t.constructor))return bv(e,t)?t:new e(t);const i=E6(e.prototype.itemType),s=E6(t.constructor.prototype.itemType);return i?s?i===s?t:i.prototype.isPrototypeOf(s.prototype)?new e(t):(bv(e,t),t):new e(t):t}function bv(e,t){return!!s$(t)&&(Gh.error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+vm(e)+"'"),!0)}function gm(e,t){return t==null?t:n$(e)?aN(e,t):ry(e,t)?bv(e,t)?t:new e(t):t}function vm(e){var t;return((t=e==null?void 0:e.prototype)==null?void 0:t.declaredClass)||"unknown"}const lN=new WeakMap;function uN(e){switch(e){case Number:return Zr;case St:return D9;case Boolean:return oN;case String:return ed;case Date:return nN;default:return r$(lN,e,()=>gm.bind(null,e))}}function ei(e,t){const i=uN(e);return arguments.length===1?i:i(t)}function xp(e,t,i){return arguments.length===1?xp.bind(null,e):t&&(Array.isArray(t)?t.map(s=>e(s,i)):[e(t,i)])}function hN(e,t){return arguments.length===1?xp(i=>ei(e,i)):xp(i=>ei(e,i),t)}function o$(e,t,i){return t!==0&&Array.isArray(i)?i.map(s=>o$(e,t-1,s)):e(i)}function sy(e,t,i){if(arguments.length===2)return d=>sy(e,t,d);if(!i)return i;i=o$(e,t,i);let s=t,u=i;for(;s>0&&Array.isArray(u);)s--,u=u[0];if(u!==void 0)for(let d=0;d<s;d++)i=[i];return i}function cN(e,t,i){return arguments.length===2?sy(s=>ei(e,s),t):sy(s=>ei(e,s),t,i)}function a$(e){return!!Array.isArray(e)&&!e.some(t=>{const i=typeof t;return!(i==="string"||i==="number"||i==="function"&&e.length>1)})}function _v(e,t){if(arguments.length===2)return _v(e).call(null,t);const i=new Set,s=e.filter(v=>typeof v!="function"),u=e.filter(v=>typeof v=="function");for(const v of e)typeof v!="string"&&typeof v!="number"||i.add(v);let d=null,y=null;return(v,_)=>{if(v==null)return v;const M=typeof v,E=M==="string"||M==="number";return E&&(i.has(v)||u.some(O=>M==="string"&&O===String||M==="number"&&O===Number))||M==="object"&&u.some(O=>!ry(v,O))?v:(E&&s.length?(d||(d=s.map(O=>typeof O=="string"?`'${O}'`:`${O}`).join(", ")),Gh.error("Accessor#set",`'${v}' is not a valid value for this property, only the following values are valid: ${d}`)):typeof v=="object"&&u.length?(y||(y=u.map(O=>vm(O)).join(", ")),Gh.error("Accessor#set",`'${v}' is not a valid value for this property, value must be one of ${y}`)):Gh.error("Accessor#set",`'${v}' is not a valid value for this property`),_&&(_.valid=!1),null)}}function wn(e,t){if(arguments.length===2)return wn(e).call(null,t);const i={},s=[],u=[];for(const _ in e.typeMap){const M=e.typeMap[_];i[_]=ei(M),s.push(vm(M)),u.push(_)}const d=()=>`'${s.join("', '")}'`,y=()=>`'${u.join("', '")}'`,v=typeof e.key=="string"?_=>_[e.key]:e.key;return _=>{if(e.base&&!ry(e.base,_)||_==null)return _;const M=v(_)||e.defaultKeyValue,E=i[M];if(!E)return Gh.error("Accessor#set",`Invalid property value, value needs to be one of ${d()}, or a plain object that can autocast (having .type = ${y()})`),null;if(!ry(e.typeMap[M],_))return _;if(typeof e.key=="string"&&!s$(_)){const O={};for(const C in _)C!==e.key&&(O[C]=_[C]);return E(O)}return E(_)}}let St=class{};const yle={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function pN(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function l$(e){switch(e.type){case"native":return ei(e.value);case"array":return xp(l$(e.value));case"one-of":return dN(e);default:return null}}function dN(e){let t=null;return(i,s)=>Sv(i,e)?i:(t==null&&(t=xv(e)),Gh.error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),s&&(s.valid=!1),null)}function xv(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case St:return"integer";case Date:return"date";default:return vm(e.value)}case"array":return`array of ${xv(e.value)}`;case"one-of":{const t=e.values.map(i=>xv(i));return`one of ${t.slice(0,-1)} or ${t[t.length-1]}`}}return"unknown"}function Sv(e,t){if(e==null)return!0;switch(t.type){case"native":switch(t.value){case Number:case St:return typeof e=="number";case Boolean:return typeof e=="boolean";case String:return typeof e=="string"}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some(i=>!Sv(i,t.value));case"one-of":return t.values.some(i=>Sv(e,i))}}function S(e={}){return(t,i)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${i}. Accessor does not support static properties.`);const s=Object.getOwnPropertyDescriptor(t,i),u=cm(t,i);s&&(s.get||s.set?(u.get=s.get||u.get,u.set=s.set||u.set):"value"in s&&("value"in e&&de.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${t.constructor.name}" already defined in the metadata`,e),u.value=e.value=s.value)),e.readOnly!=null&&(u.readOnly=e.readOnly);const d=e.aliasOf;if(d){const _=typeof d=="string"?d:d.source,M=typeof d=="string"?null:d.overridable===!0;let E;u.dependsOn=[_],u.get=function(){let O=Ns(this,_);if(typeof O=="function"){E||(E=_.split(".").slice(0,-1).join("."));const C=Ns(this,E);C&&(O=O.bind(C))}return O},u.readOnly||(u.set=M?function(O){this._override(i,O)}:function(O){K1(this,_,O)})}const y=e.type,v=e.types;u.cast||(y?u.cast=fN(y):v&&(Array.isArray(v)?u.cast=xp(wn(v[0])):u.cast=wn(v))),lj(u,e),e.range&&(u.cast=yN(u.cast,e.range))}}function u$(e,t,i){const s=cm(e,i);s.json||(s.json={});let u=s.json;return t!==void 0&&(u.origins||(u.origins={}),u.origins[t]||(u.origins[t]={}),u=u.origins[t]),u}function fN(e){let t=0,i=e;if(pN(e))return l$(e);for(;Array.isArray(i)&&i.length===1&&typeof i[0]!="string"&&typeof i[0]!="number";)i=i[0],t++;const s=i;if(a$(s))return t===0?_v(s):sy(_v(s),t);if(t===1)return hN(s);if(t>1)return cN(s,t);const u=e;return u.from?u.from:ei(u)}function yN(e,t){return i=>{let s=+e(i);return t.step!=null&&(s=Math.round(s/t.step)*t.step),t.min!=null&&(s=Math.max(t.min,s)),t.max!=null&&(s=Math.min(t.max,s)),s}}function mN(e){if(e.json&&e.json.origins){const t=e.json.origins,i={"web-document":["web-scene","web-map"]};for(const s in i)if(t[s]){const u=t[s];i[s].forEach(d=>{t[d]=u}),delete t[s]}}}let is=class extends qS{constructor(t,i,s){super(t,i,s)}};is.prototype.type="warning";function h$(e){var t;return!!e&&((t=e.prototype)==null?void 0:t.declaredClass)&&e.prototype.declaredClass.indexOf("esri.core.Collection")===0}const $v=de.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function k6(e,t,i){var s,u;e&&(!i&&!t.read||(s=t.read)!=null&&s.reader||((u=t.read)==null?void 0:u.enabled)===!1||wN(e)&&Hi("read.reader",vc(e),t))}function vc(e){var i,s;const t=e.ndimArray??0;if(t>1)return vN(e);if(t===1)return A6(e);if("type"in e&&p$(e.type)){const u=(s=(i=e.type.prototype)==null?void 0:i.itemType)==null?void 0:s.Type,d=A6(typeof u=="function"?{type:u}:{types:u});return(y,v,_)=>{const M=d(y,v,_);return M&&new e.type(M)}}return F9(e)}function F9(e){return"type"in e?gN(e.type):bN(e.types)}function gN(e){return e.prototype.read?(t,i,s)=>{if(t==null)return t;const u=typeof t;if(u!=="object")return void $v.error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${u}'`);const d=new e;return d.read(t,s),d}:e.fromJSON}function c$(e,t,i,s){return s!==0&&Array.isArray(t)?t.map(u=>c$(e,u,i,s-1)):e(t,void 0,i)}function vN(e){const t=F9(e),i=c$.bind(null,t),s=e.ndimArray??0;return(u,d,y)=>{if(u==null)return u;u=i(u,y,s);let v=s,_=u;for(;v>0&&Array.isArray(_);)v--,_=_[0];if(_!==void 0)for(let M=0;M<v;M++)u=[u];return u}}function A6(e){const t=F9(e);return(i,s,u)=>{if(i==null)return i;if(Array.isArray(i)){const y=[];for(const v of i){const _=t(v,void 0,u);_!==void 0&&y.push(_)}return y}const d=t(i,void 0,u);return d!==void 0?[d]:void 0}}function p$(e){if(!h$(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&(typeof t.Type=="function"?z9(t.Type):d$(t.Type))}function wN(e){return"types"in e?d$(e.types):z9(e.type)}function z9(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||p$(e))}function d$(e){for(const t in e.typeMap)if(!z9(e.typeMap[t]))return!1;return!0}function bN(e){let t=null;const i=e.errorContext??"type",s=e.validate;return(u,d,y)=>{if(u==null)return u;const v=typeof u;if(v!=="object")return void $v.error(`Expected JSON value of type 'object' to deserialize, but got '${v}'`);t||(t=_N(e));const _=e.key;if(typeof _!="string")return;const M=u[_],E=M?t[M]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!E){const C=`Type '${M||"unknown"}' is not supported`;return y!=null&&y.messages&&u&&y.messages.push(new is(`${i}:unsupported`,C,{definition:u,context:y})),void $v.error(C)}const O=new E;return O.read(u,y),s?s(O):O}}function _N(e){var i,s;const t={};for(const u in e.typeMap){const d=e.typeMap[u],y=Xp(d.prototype);if(typeof e.key=="function")continue;const v=y[e.key];if(!v)continue;(i=v.json)!=null&&i.type&&Array.isArray(v.json.type)&&v.json.type.length===1&&typeof v.json.type[0]=="string"&&(t[v.json.type[0]]=d);const _=(s=v.json)==null?void 0:s.write;if(!(_!=null&&_.writer)){t[u]=d;continue}const M=_.target,E=typeof M=="string"?M:e.key,O={};_.writer(u,O,E),O[E]&&(t[O[E]]=d)}return t}function xN(e){if(e.json||(e.json={}),P6(e.json),C6(e.json),O6(e.json),e.json.origins)for(const t in e.json.origins)P6(e.json.origins[t]),C6(e.json.origins[t]),O6(e.json.origins[t]);return!0}function O6(e){e.name&&(e.read&&typeof e.read=="object"?e.read.source===void 0&&(e.read.source=e.name):e.read={source:e.name},e.write&&typeof e.write=="object"?e.write.target===void 0&&(e.write.target=e.name):e.write={target:e.name})}function P6(e){typeof e.read=="boolean"?e.read={enabled:e.read}:typeof e.read=="function"?e.read={enabled:!0,reader:e.read}:e.read&&typeof e.read=="object"&&e.read.enabled===void 0&&(e.read.enabled=!0)}function C6(e){typeof e.write=="boolean"?e.write={enabled:e.write}:typeof e.write=="function"?e.write={enabled:!0,writer:e.write}:e.write&&typeof e.write=="object"&&e.write.enabled===void 0&&(e.write.enabled=!0)}function j6(e,t){if(!t.write||t.write.writer||t.write.enabled===!1&&!t.write.overridePolicy)return;const i=(e==null?void 0:e.ndimArray)??0;e&&(i===1||"type"in e&&h$(e.type))?t.write.writer=TN:i>1?t.write.writer=MN(i):t.types?Array.isArray(t.types)?t.write.writer=$N(t.types[0]):t.write.writer=SN(t.types):t.write.writer=Sp}function SN(e){return(t,i,s,u)=>t?f$(t,e,u)?Sp(t,i,s,u):void 0:Sp(t,i,s,u)}function f$(e,t,i){for(const s in t.typeMap)if(e instanceof t.typeMap[s])return!0;if(i!=null&&i.messages){const s=t.errorContext??"type",u=`Values of type '${(typeof t.key!="function"?e[t.key]:e.declaredClass)??"Unknown"}' cannot be written`;i&&i.messages&&e&&i.messages.push(new ae(`${s}:unsupported`,u,{definition:e,context:i})),de.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(u)}return!1}function $N(e){return(t,i,s,u)=>!t||!Array.isArray(t)?Sp(t,i,s,u):Sp(t.filter(d=>f$(d,e,u)),i,s,u)}function Sp(e,t,i,s){Hi(i,ny(e,s),t)}function ny(e,t){return e&&typeof e.write=="function"?e.write({},t):e&&typeof e.toJSON=="function"?e.toJSON():typeof e=="number"?oy(e):e}function oy(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function TN(e,t,i,s){let u;e===null?u=null:e&&typeof e.map=="function"?(u=e.map(d=>ny(d,s)),typeof u.toArray=="function"&&(u=u.toArray())):u=[ny(e,s)],Hi(i,u,t)}function y$(e,t,i){return i!==0&&Array.isArray(e)?e.map(s=>y$(s,t,i-1)):ny(e,t)}function MN(e){return(t,i,s,u)=>{let d;if(t===null)d=null;else{d=y$(t,u,e);let y=e,v=d;for(;y>0&&Array.isArray(v);)y--,v=v[0];if(v!==void 0)for(let _=0;_<y;_++)d=[d]}Hi(s,d,i)}}function IN(e,t){return V9(e,"any",t==null?void 0:t.origin)}function Tv(e,t){return V9(e,"read",t==null?void 0:t.origin)}function m$(e,t){return V9(e,"write",t==null?void 0:t.origin)}function V9(e,t,i){let s=e==null?void 0:e.json;if(s!=null&&s.origins&&i){let u;u=i==="link-chart"?s.origins[i]&&(t==="any"||t in s.origins[i])?s.origins[i]:s.origins["web-map"]:s.origins[i],u&&(t==="any"||t in u)&&(s=u)}return s}function EN(e){const t=kN(e);if(e.json.origins)for(const i in e.json.origins){const s=e.json.origins[i],u=s.types?AN(s):t;k6(u,s,!1),s.types&&!s.write&&e.json.write&&e.json.write.enabled&&(s.write={...e.json.write}),j6(u,s)}k6(t,e.json,!0),j6(t,e.json)}function kN(e){return e.json.types?Mv(e.json):e.type?g$(e):Mv(e)}function AN(e){return e.type?g$(e):Mv(e)}function g$(e){if(!e.type)return;let t=0,i=e.type;for(;Array.isArray(i)&&!a$(i);)i=i[0],t++;return{type:i,ndimArray:t}}function Mv(e){if(!e.types)return;let t=0,i=e.types;for(;Array.isArray(i);)i=i[0],t++;return{types:i,ndimArray:t}}function ON(e){xN(e)&&(mN(e),EN(e))}const jg=new Set,Ng=new Set;function B(e){return t=>{e??(e="esri.core.Accessor"),t.prototype.declaredClass=e,CN(t);const i=[],s=[];let u=t.prototype;for(;u;)u.hasOwnProperty("initialize")&&!jg.has(u.initialize)&&(jg.add(u.initialize),i.push(u.initialize)),u.hasOwnProperty("destroy")&&!Ng.has(u.destroy)&&(Ng.add(u.destroy),s.push(u.destroy)),u=Object.getPrototypeOf(u);jg.clear(),Ng.clear();const d=class extends t{constructor(...v){if(super(...v),this.constructor===d&&typeof this.postscript=="function"){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let _=i.length-1;_>=0;_--)i[_].call(this)}}),s.length){let _=!1;const M=this[PS];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!_){_=!0,M.call(this);for(let E=0;E<s.length;E++)s[E].call(this)}}})}this.postscript(...v)}}};d.__accessorMetadata__=Xp(t.prototype),d.prototype.declaredClass=e;const y=(e||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(d,"name",{value:y,configurable:!0}),d}}function PN(e,t){return t.get==null?function(){const i=this.__accessor__,s=i.propertiesByName.get(e);if(s===void 0)return;Pe(s);const u=i.store;return u.has(e)?u.get(e):s.metadata.value}:function(){const i=this.__accessor__,s=i.propertiesByName.get(e);if(s!==void 0)return s.getComputed(i)}}function CN(e){const t=e.prototype,i=Xp(t),s={};for(const u of Object.getOwnPropertyNames(i)){const d=i[u];ON(d),s[u]={enumerable:!0,configurable:!0,get:PN(u,d),set(y){const v=this.__accessor__;if(v!==void 0){if(!Object.isFrozen(this)){if(v.initialized&&d.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${u}' of ${this.declaredClass}`);if(v.lifecycle===oo.CONSTRUCTED&&d.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${u}' of ${this.declaredClass}`);v.set(u,y)}}else Object.defineProperty(this,u,{enumerable:!0,configurable:!0,writable:!0,value:y})}}}Object.defineProperties(e.prototype,s)}var v$,w$;function jN(e){var t;if(e==null)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return(t=e.constructor)!=null&&t.__accessorMetadata__||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}const Oo=Symbol("Accessor-Handles"),Iv=Symbol("Accessor-Initialized");let Ne=class b${static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:i,declaredClass:s,constructor:u}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const d=this;class y extends d{constructor(..._){super(..._),this.inherited=null,u&&u.apply(this,_)}}Xp(y.prototype);for(const v in t){const _=t[v];y.prototype[v]=typeof _=="function"?function(...M){const E=this.inherited;let O;this.inherited=function(...C){if(d.prototype[v])return d.prototype[v].apply(this,C)};try{O=_.apply(this,M)}catch(C){throw this.inherited=E,C}return this.inherited=E,O}:t[v]}for(const v in i){const _=jN(i[v]);S(_)(y.prototype,v)}return B(s)(y)}constructor(...t){if(this[v$]=null,this[w$]=!1,this.constructor===b$)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const i=new bj(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:i}),t.length>0&&this.normalizeCtorArgs&&(i.ctorArgs=this.normalizeCtorArgs.apply(this,t))}postscript(t){const i=this.__accessor__,s=i.ctorArgs||t;i.initialize(),s&&(this.set(s),i.ctorArgs=null),i.constructed(),this.initialize(),this[Iv]=!0}initialize(){}[PS](){this[Oo]=Ot(this[Oo])}destroy(){var t;this.destroyed||(Kj(this),this.__accessor__.destroy(),(t=Ij())==null||t.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[Iv]}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}commitProperty(t){Ns(this,t)}get(t){return AS(de.getLogger(this),"`Accessor.get` is deprecated in favor of using optional chaining",{version:"4.28",see:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining"}),Ns(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,i){return K1(this,t,i),this}watch(t,i,s){return tN(this,t,i,s)}addHandles(t,i){if(this.destroyed){const u=Array.isArray(t)?t:[t];for(const d of u)d.remove();return}let s=this[Oo];s==null&&(s=this[Oo]=new C9),s.add(t,i)}removeHandles(t){const i=this[Oo];i!=null&&i.remove(t)}removeAllHandles(){const t=this[Oo];t!=null&&t.removeAll()}hasHandles(t){const i=this[Oo];return i!=null&&i.has(t)}_override(t,i){i===void 0?this.__accessor__.clearOverride(t):this.__accessor__.override(t,i)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_overrideIfSome(t,i){i==null?this.__accessor__.clearOverride(t):this.__accessor__.override(t,i)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.notifyChange(t)}_get(t){return this.__accessor__.internalGet(t)}_set(t,i){return this.__accessor__.internalSet(t,i),this}};v$=Oo,w$=Iv;const Mt=e=>{let t=class extends e{clone(){var _;const i=sr(this);OS(i,"unable to clone instance of non-accessor class");const s=i.metadatas,u=i.store,d={},y=new Map;for(const M in s){const E=s[M],O=u==null?void 0:u.originOf(M),C=E.clonable;if(E.readOnly||C===!1||O!==Xe.USER&&O!==Xe.DEFAULTS&&O!==Xe.WEB_MAP&&O!==Xe.WEB_SCENE)continue;const R=this[M];let L=null;L=typeof C=="function"?C(R):C==="reference"?R:uv(R),R!=null&&L==null||(O===Xe.DEFAULTS?y.set(M,L):d[M]=L)}const v=new(Object.getPrototypeOf(this)).constructor(d);if(y.size){const M=(_=sr(v))==null?void 0:_.store;if(M)for(const[E,O]of y)M.set(E,O,Xe.DEFAULTS)}return v}};return t=w([B("esri.core.Clonable")],t),t};let N6=class extends Mt(Ne){};N6=w([B("esri.core.Clonable")],N6);function Pa(){return[0,0,0]}function NN(e){return[e[0],e[1],e[2]]}function td(e,t,i){return[e,t,i]}function RN(e,t=Pa()){const i=Math.min(3,e.length);for(let s=0;s<i;++s)t[s]=e[s];return t}function LN(e,t){return new Float64Array(e,t,3)}function _$(){return Pa()}function x$(){return td(1,1,1)}function S$(){return td(1,0,0)}function $$(){return td(0,1,0)}function T$(){return td(0,0,1)}const DN=_$(),FN=x$(),zN=S$(),VN=$$(),GN=T$();Object.freeze(Object.defineProperty({__proto__:null,ONES:FN,UNIT_X:zN,UNIT_Y:VN,UNIT_Z:GN,ZEROS:DN,clone:NN,create:Pa,createView:LN,fromArray:RN,fromValues:td,ones:x$,unitX:S$,unitY:$$,unitZ:T$,zeros:_$},Symbol.toStringTag,{value:"Module"}));let G9=1e-6;function ss(){return G9}function qN(e){G9=e}const wm=Math.random,UN=Math.PI/180,BN=180/Math.PI;function q9(e){return e*UN}function HN(e){return e*BN}function WN(e,t){return Math.abs(e-t)<=G9*Math.max(1,Math.abs(e),Math.abs(t))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:wm,equals:WN,getEpsilon:ss,setEpsilon:qN,toDegree:HN,toRadian:q9},Symbol.toStringTag,{value:"Module"}));function U9(e){const t=e[0],i=e[1],s=e[2];return Math.sqrt(t*t+i*i+s*s)}function Ev(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function M$(e,t,i,s){return e[0]=t,e[1]=i,e[2]=s,e}function JN(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e}function I$(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e}function E$(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e}function k$(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e}function KN(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function ZN(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function YN(e,t){return e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e}function XN(e,t){return e[0]=Math.sign(t[0]),e[1]=Math.sign(t[1]),e[2]=Math.sign(t[2]),e}function QN(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e}function eR(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e}function tR(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function A$(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function iR(e,t,i,s){return e[0]=t[0]+i[0]*s,e[1]=t[1]+i[1]*s,e[2]=t[2]+i[2]*s,e}function O$(e,t){const i=t[0]-e[0],s=t[1]-e[1],u=t[2]-e[2];return Math.sqrt(i*i+s*s+u*u)}function P$(e,t){const i=t[0]-e[0],s=t[1]-e[1],u=t[2]-e[2];return i*i+s*s+u*u}function C$(e){const t=e[0],i=e[1],s=e[2];return t*t+i*i+s*s}function rR(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function sR(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function kv(e,t){const i=t[0],s=t[1],u=t[2];let d=i*i+s*s+u*u;return d>0&&(d=1/Math.sqrt(d),e[0]=t[0]*d,e[1]=t[1]*d,e[2]=t[2]*d),e}function j$(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function nR(e,t,i){const s=t[0],u=t[1],d=t[2],y=i[0],v=i[1],_=i[2];return e[0]=u*_-d*v,e[1]=d*y-s*_,e[2]=s*v-u*y,e}function oR(e,t,i,s){const u=t[0],d=t[1],y=t[2];return e[0]=u+s*(i[0]-u),e[1]=d+s*(i[1]-d),e[2]=y+s*(i[2]-y),e}function aR(e,t,i,s,u,d){const y=d*d,v=y*(2*d-3)+1,_=y*(d-2)+d,M=y*(d-1),E=y*(3-2*d);return e[0]=t[0]*v+i[0]*_+s[0]*M+u[0]*E,e[1]=t[1]*v+i[1]*_+s[1]*M+u[1]*E,e[2]=t[2]*v+i[2]*_+s[2]*M+u[2]*E,e}function lR(e,t,i,s,u,d){const y=1-d,v=y*y,_=d*d,M=v*y,E=3*d*v,O=3*_*y,C=_*d;return e[0]=t[0]*M+i[0]*E+s[0]*O+u[0]*C,e[1]=t[1]*M+i[1]*E+s[1]*O+u[1]*C,e[2]=t[2]*M+i[2]*E+s[2]*O+u[2]*C,e}function uR(e,t){t=t||1;const i=wm,s=2*i()*Math.PI,u=2*i()-1,d=Math.sqrt(1-u*u)*t;return e[0]=Math.cos(s)*d,e[1]=Math.sin(s)*d,e[2]=u*t,e}function hR(e,t,i){const s=t[0],u=t[1],d=t[2];return e[0]=i[0]*s+i[4]*u+i[8]*d+i[12],e[1]=i[1]*s+i[5]*u+i[9]*d+i[13],e[2]=i[2]*s+i[6]*u+i[10]*d+i[14],e}function cR(e,t,i){const s=t[0],u=t[1],d=t[2];return e[0]=s*i[0]+u*i[3]+d*i[6],e[1]=s*i[1]+u*i[4]+d*i[7],e[2]=s*i[2]+u*i[5]+d*i[8],e}function pR(e,t,i){const s=i[0],u=i[1],d=i[2],y=i[3],v=t[0],_=t[1],M=t[2];let E=u*M-d*_,O=d*v-s*M,C=s*_-u*v,R=u*C-d*O,L=d*E-s*C,G=s*O-u*E;const U=2*y;return E*=U,O*=U,C*=U,R*=2,L*=2,G*=2,e[0]=v+E+R,e[1]=_+O+L,e[2]=M+C+G,e}function dR(e,t,i,s){const u=[],d=[];return u[0]=t[0]-i[0],u[1]=t[1]-i[1],u[2]=t[2]-i[2],d[0]=u[0],d[1]=u[1]*Math.cos(s)-u[2]*Math.sin(s),d[2]=u[1]*Math.sin(s)+u[2]*Math.cos(s),e[0]=d[0]+i[0],e[1]=d[1]+i[1],e[2]=d[2]+i[2],e}function fR(e,t,i,s){const u=[],d=[];return u[0]=t[0]-i[0],u[1]=t[1]-i[1],u[2]=t[2]-i[2],d[0]=u[2]*Math.sin(s)+u[0]*Math.cos(s),d[1]=u[1],d[2]=u[2]*Math.cos(s)-u[0]*Math.sin(s),e[0]=d[0]+i[0],e[1]=d[1]+i[1],e[2]=d[2]+i[2],e}function yR(e,t,i,s){const u=[],d=[];return u[0]=t[0]-i[0],u[1]=t[1]-i[1],u[2]=t[2]-i[2],d[0]=u[0]*Math.cos(s)-u[1]*Math.sin(s),d[1]=u[0]*Math.sin(s)+u[1]*Math.cos(s),d[2]=u[2],e[0]=d[0]+i[0],e[1]=d[1]+i[1],e[2]=d[2]+i[2],e}function mR(e,t){Ev(jd,e),Ev(Nd,t),kv(jd,jd),kv(Nd,Nd);const i=j$(jd,Nd);return i>1?0:i<-1?Math.PI:Math.acos(i)}const jd=Pa(),Nd=Pa();function gR(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function vR(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function wR(e,t){if(e===t)return!0;const i=e[0],s=e[1],u=e[2],d=t[0],y=t[1],v=t[2],_=ss();return Math.abs(i-d)<=_*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(s-y)<=_*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(u-v)<=_*Math.max(1,Math.abs(u),Math.abs(v))}function bR(e,t,i){const s=i[0]-t[0],u=i[1]-t[1],d=i[2]-t[2];let y=s*s+u*u+d*d;return y>0?(y=1/Math.sqrt(y),e[0]=s*y,e[1]=u*y,e[2]=d*y,e):(e[0]=0,e[1]=0,e[2]=0,e)}const _R=I$,xR=E$,SR=k$,$R=O$,TR=P$,MR=U9,IR=C$;Object.freeze(Object.defineProperty({__proto__:null,abs:YN,add:JN,angle:mR,bezier:lR,ceil:KN,copy:Ev,cross:nR,direction:bR,dist:$R,distance:O$,div:SR,divide:k$,dot:j$,equals:wR,exactEquals:vR,floor:ZN,hermite:aR,inverse:sR,len:MR,length:U9,lerp:oR,max:eR,min:QN,mul:xR,multiply:E$,negate:rR,normalize:kv,random:uR,rotateX:dR,rotateY:fR,rotateZ:yR,round:tR,scale:A$,scaleAndAdd:iR,set:M$,sign:XN,sqrDist:TR,sqrLen:IR,squaredDistance:P$,squaredLength:C$,str:gR,sub:_R,subtract:I$,transformMat3:cR,transformMat4:hR,transformQuat:pR},Symbol.toStringTag,{value:"Module"}));function ER(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function kR(e,t,i,s,u){return e[0]=t,e[1]=i,e[2]=s,e[3]=u,e}function AR(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e}function N$(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e}function R$(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e[3]=t[3]*i[3],e}function L$(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e[3]=t[3]/i[3],e}function OR(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function PR(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function CR(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e[3]=Math.min(t[3],i[3]),e}function jR(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e[3]=Math.max(t[3],i[3]),e}function NR(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function RR(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e}function LR(e,t,i,s){return e[0]=t[0]+i[0]*s,e[1]=t[1]+i[1]*s,e[2]=t[2]+i[2]*s,e[3]=t[3]+i[3]*s,e}function D$(e,t){const i=t[0]-e[0],s=t[1]-e[1],u=t[2]-e[2],d=t[3]-e[3];return Math.sqrt(i*i+s*s+u*u+d*d)}function F$(e,t){const i=t[0]-e[0],s=t[1]-e[1],u=t[2]-e[2],d=t[3]-e[3];return i*i+s*s+u*u+d*d}function z$(e){const t=e[0],i=e[1],s=e[2],u=e[3];return Math.sqrt(t*t+i*i+s*s+u*u)}function V$(e){const t=e[0],i=e[1],s=e[2],u=e[3];return t*t+i*i+s*s+u*u}function DR(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function FR(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function zR(e,t){const i=t[0],s=t[1],u=t[2],d=t[3];let y=i*i+s*s+u*u+d*d;return y>0&&(y=1/Math.sqrt(y),e[0]=i*y,e[1]=s*y,e[2]=u*y,e[3]=d*y),e}function VR(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function G$(e,t,i,s){const u=t[0],d=t[1],y=t[2],v=t[3];return e[0]=u+s*(i[0]-u),e[1]=d+s*(i[1]-d),e[2]=y+s*(i[2]-y),e[3]=v+s*(i[3]-v),e}function GR(e,t){const i=wm;let s,u,d,y,v,_;t=t||1;do s=2*i()-1,u=2*i()-1,v=s*s+u*u;while(v>=1);do d=2*i()-1,y=2*i()-1,_=d*d+y*y;while(_>=1);const M=Math.sqrt((1-v)/_);return e[0]=t*s,e[1]=t*u,e[2]=t*d*M,e[3]=t*y*M,e}function qR(e,t,i){const s=t[0],u=t[1],d=t[2],y=t[3];return e[0]=i[0]*s+i[4]*u+i[8]*d+i[12]*y,e[1]=i[1]*s+i[5]*u+i[9]*d+i[13]*y,e[2]=i[2]*s+i[6]*u+i[10]*d+i[14]*y,e[3]=i[3]*s+i[7]*u+i[11]*d+i[15]*y,e}function UR(e,t,i){const s=t[0],u=t[1],d=t[2],y=i[0],v=i[1],_=i[2],M=i[3],E=M*s+v*d-_*u,O=M*u+_*s-y*d,C=M*d+y*u-v*s,R=-y*s-v*u-_*d;return e[0]=E*M+R*-y+O*-_-C*-v,e[1]=O*M+R*-v+C*-y-E*-_,e[2]=C*M+R*-_+E*-v-O*-y,e[3]=t[3],e}function BR(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function HR(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function WR(e,t){const i=e[0],s=e[1],u=e[2],d=e[3],y=t[0],v=t[1],_=t[2],M=t[3],E=ss();return Math.abs(i-y)<=E*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(s-v)<=E*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(u-_)<=E*Math.max(1,Math.abs(u),Math.abs(_))&&Math.abs(d-M)<=E*Math.max(1,Math.abs(d),Math.abs(M))}const JR=N$,KR=R$,ZR=L$,YR=D$,XR=F$,QR=z$,eL=V$;Object.freeze(Object.defineProperty({__proto__:null,add:AR,ceil:OR,copy:ER,dist:YR,distance:D$,div:ZR,divide:L$,dot:VR,equals:WR,exactEquals:HR,floor:PR,inverse:FR,len:QR,length:z$,lerp:G$,max:jR,min:CR,mul:KR,multiply:R$,negate:DR,normalize:zR,random:GR,round:NR,scale:RR,scaleAndAdd:LR,set:kR,sqrDist:XR,sqrLen:eL,squaredDistance:F$,squaredLength:V$,str:BR,sub:JR,subtract:N$,transformMat4:qR,transformQuat:UR},Symbol.toStringTag,{value:"Module"}));const R6=new Float32Array(1);function vle(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}function rs(e,t,i){return Math.min(Math.max(e,t),i)}function wle(e){return(e&e-1)==0}function ble(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function tL(e,t,i){return e+(t-e)*i}function _le(e,t,i,s,u){return tL(s,u,(e-t)/(i-t))}function iL(e){return e*Math.PI/180}function q$(e){return 180*e/Math.PI}function xle(e){return Math.acos(rs(e,-1,1))}function U$(e){return Math.asin(rs(e,-1,1))}function Rg(e,t,i=1e-6){return e===t?!0:!Number.isFinite(e)||!Number.isFinite(t)?!1:(e>t?e-t:t-e)<=i}const ay=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function rL(e){return ay.setFloat64(0,e),ay.getBigInt64(0)}function sL(e){return ay.setBigInt64(0,e),ay.getFloat64(0)}const Lg=BigInt("1000000");nL(1);function nL(e){const t=rL(e=Math.abs(e)),i=sL(t<=Lg?Lg:t-Lg);return Math.abs(e-i)}function Sle(e){return B$(Math.max(-L6,Math.min(e,L6)))}function B$(e){return R6[0]=e,R6[0]}function $le(e,t){const i=U9(e),s=U$(e[2]/i),u=Math.atan2(e[1]/i,e[0]/i);return M$(t,i,s,u),t}function Tle(e){const t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[3]*e[3]+e[4]*e[4]+e[5]*e[5],s=e[6]*e[6]+e[7]*e[7]+e[8]*e[8];return!(Rg(t,1)&&Rg(i,1)&&Rg(s,1))}const L6=B$(34028234663852886e22);let B9=class{constructor(t,i){this.min=t,this.max=i,this.range=i-t}ndiff(t,i=0){return Math.ceil((t-i)/this.range)*this.range+i}_normalize(t,i,s,u=0,d=!1){return(s-=u)<t?s+=this.ndiff(t-s):s>i&&(s-=this.ndiff(s-i)),d&&s===i&&(s=t),s+u}normalize(t,i=0,s=!1){return this._normalize(this.min,this.max,t,i,s)}clamp(t,i=0){return rs(t-i,this.min,this.max)+i}monotonic(t,i,s){return t<i?i:i+this.ndiff(t-i,s)}minimalMonotonic(t,i,s){return this._normalize(t,t+this.range,i,s)}center(t,i,s){return i=this.monotonic(t,i,s),this.normalize((t+i)/2,s)}diff(t,i,s){return this.monotonic(t,i,s)-t}shortestSignedDiff(t,i){t=this.normalize(t);const s=(i=this.normalize(i))-t,u=i<t?this.minimalMonotonic(t,i)-t:i-this.minimalMonotonic(i,t);return Math.abs(s)<Math.abs(u)?s:u}contains(t,i,s){return i=this.minimalMonotonic(t,i),(s=this.minimalMonotonic(t,s))>t&&s<i}};function H9(e){for(const t in e){const i=e[t];i instanceof Function&&(e[t]=i.bind(e))}return e}H9(new B9(0,2*Math.PI));H9(new B9(-Math.PI,Math.PI));const oL=H9(new B9(0,360));let aL=class H${constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const i=new H$;return this._values.forEach((s,u)=>{t&&t.has(u)||i.set(u,ie(s.value),s.origin)}),i}get(t,i){i=this._normalizeOrigin(i);const s=this._values.get(t);return i==null||(s==null?void 0:s.origin)===i?s==null?void 0:s.value:void 0}originOf(t){var i;return((i=this._values.get(t))==null?void 0:i.origin)??Xe.USER}keys(t){t=this._normalizeOrigin(t);const i=[...this._values.keys()];return t==null?i:i.filter(s=>{var u;return((u=this._values.get(s))==null?void 0:u.origin)===t})}set(t,i,s){if((s=this._normalizeOrigin(s))===Xe.DEFAULTS){const u=this._values.get(t);if((u==null?void 0:u.origin)!=null&&u.origin>s)return}this._values.set(t,new lL(i,s))}delete(t,i){var s;(i=this._normalizeOrigin(i))!=null&&((s=this._values.get(t))==null?void 0:s.origin)!==i||this._values.delete(t)}has(t,i){var s;return(i=this._normalizeOrigin(i))!=null?((s=this._values.get(t))==null?void 0:s.origin)===i:this._values.has(t)}forEach(t){this._values.forEach(({value:i},s)=>t(i,s))}_normalizeOrigin(t){if(t!=null)return t===Xe.DEFAULTS?t:Xe.USER}},lL=class{constructor(t,i){this.value=t,this.origin=i}};function W$(e,t,i){t.keys().forEach(u=>{i.set(u,t.get(u),Xe.DEFAULTS)});const s=e.metadatas;Object.keys(s).forEach(u=>{e.internalGet(u)&&i.set(u,e.internalGet(u),Xe.DEFAULTS)})}function uL(e,t,i){if(!(e!=null&&e.read)||e.read.enabled===!1||!e.read.source)return!1;const s=e.read.source;if(typeof s=="string"){if(s===t||s.includes(".")&&s.indexOf(t)===0&&y6(s,i))return!0}else for(const u of s)if(u===t||u.includes(".")&&u.indexOf(t)===0&&y6(u,i))return!0;return!1}function hL(e){return e&&(!e.read||e.read.enabled!==!1&&!e.read.source)}function cL(e,t,i,s,u){let d=Tv(t[i],u);hL(d)&&(e[i]=!0);for(const y of Object.getOwnPropertyNames(t))d=Tv(t[y],u),uL(d,i,s)&&(e[y]=!0)}function pL(e,t,i,s){const u=i.metadatas,d=IN(u[t],s),y=d==null?void 0:d.default;if(y===void 0)return;const v=typeof y=="function"?y.call(e,t,s):y;v!==void 0&&i.set(t,v)}const J$={origin:"service"};function K$(e,t,i=J$){if(!t||typeof t!="object")return;const s=sr(e),u=s.metadatas,d={};for(const y of Object.getOwnPropertyNames(t))cL(d,u,y,t,i);s.setDefaultOrigin(i.origin);for(const y of Object.getOwnPropertyNames(d)){const v=Tv(u[y],i).read,_=v==null?void 0:v.source;let M;M=_&&typeof _=="string"?Yp(t,_):t[y],v!=null&&v.reader&&(M=v.reader.call(e,M,t,i)),M!==void 0&&s.set(y,M)}if(!i||!i.ignoreDefaults){s.setDefaultOrigin("defaults");for(const y of Object.getOwnPropertyNames(u))d[y]||pL(e,y,s,i)}s.setDefaultOrigin("user")}function dL(e,t,i,s=J$){var d;const u={...s,messages:[]};i(u),(d=u.messages)==null||d.forEach(y=>{y.type!=="warning"||e.loaded?s!=null&&s.messages&&s.messages.push(y):e.loadWarnings.push(y)})}function fL(e,t,i,s,u){var y,v;const d={};return(v=(y=t.write)==null?void 0:y.writer)==null||v.call(e,s,d,i,u),d}function Z$(e,t,i,s,u,d){if(!(s!=null&&s.write))return!1;const y=Ns(e,i);if(!u&&s.write.overridePolicy){const v=s.write.overridePolicy.call(e,y,i,d??void 0);v!==void 0&&(u=v)}if(u||(u=s.write),!u||u.enabled===!1||u.layerContainerTypes&&(d!=null&&d.layerContainerType)&&!u.layerContainerTypes.includes(d.layerContainerType))return!1;if((y===null&&!u.allowNull&&!u.writerEnsuresNonNull||y===void 0)&&u.isRequired){const v=new ae("web-document-write:property-required",`Missing value for required property '${i}' on '${e.declaredClass}'`,{propertyName:i,target:e});return v&&(d!=null&&d.messages)?d.messages.push(v):v&&!d&&de.getLogger("esri.core.accessorSupport.write").error(v.name,v.message),!1}return!(y===void 0||y===null&&!u.allowNull&&!u.writerEnsuresNonNull||!u.alwaysWriteDefaults&&(!t.store.multipleOriginsSupported||t.store.originOf(i)===Xe.DEFAULTS)&&yL(e,i,d,s,y)||!u.ignoreOrigin&&(d!=null&&d.origin)&&t.store.multipleOriginsSupported&&t.store.originOf(i)<pa(d.origin))}function yL(e,t,i,s,u){const d=s.default;if(d===void 0)return!1;if(s.defaultEquals!=null)return s.defaultEquals(u);if(typeof d=="function"){if(Array.isArray(u)){const y=d.call(e,t,i??void 0);return am(y,u)}return!1}return d===u}function mL(e,t,i,s){const u=sr(e),d=u.metadatas,y=m$(d[t],s);return!!y&&Z$(e,u,t,y,i,s)}function Y$(e,t,i){var d,y;if(e&&typeof e.toJSON=="function"&&(!e.toJSON.isDefaultToJSON||!e.write))return Cf(t,e.toJSON(i));const s=sr(e),u=s.metadatas;for(const v in u){const _=m$(u[v],i);if(!Z$(e,s,v,_,void 0,i))continue;const M=Ns(e,v),E=fL(e,_,_.write&&typeof _.write.target=="string"?_.write.target:v,M,i);Object.keys(E).length>0&&(t=Cf(t,E),(y=(d=i==null?void 0:i.resources)==null?void 0:d.pendingOperations)!=null&&y.length&&i.resources.pendingOperations.push(Promise.all(i.resources.pendingOperations).then(()=>Cf(t,E,()=>"replace-arrays"))),i!=null&&i.writtenProperties&&i.writtenProperties.push({target:e,propName:v,oldOrigin:yj(s.store.originOf(v)),newOrigin:i.origin}))}return t}const id=e=>{let t=class extends e{constructor(...i){super(...i);const s=sr(this),u=s.store,d=new aL;s.store=d,W$(s,u,d)}read(i,s){K$(this,i,s)}write(i,s){return Y$(this,i??{},s)}toJSON(i){return this.write({},i)}static fromJSON(i,s){return gL.call(this,i,s)}};return t=w([B("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function gL(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(e,t),i}function ly(e){return e&&typeof e=="object"&&"toJSON"in e&&typeof e.toJSON=="function"}let pe=class extends id(Ne){};pe=w([B("esri.core.JSONSupport")],pe);const vL=Object.prototype.toString;function wL(e){const t="__accessorMetadata__"in e?ei(e):e;return function(...i){if(i.push(t),typeof i[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return bL.apply(this,i)}}function bL(e,t,i,s){cm(e,t).cast=s}function _L(e){return(t,i)=>{cm(t,e).cast=t[i]}}function mt(...e){if(e.length!==3||typeof e[1]!="string")return e.length===1&&vL.call(e[0])==="[object Function]"?wL(e[0]):e.length===1&&typeof e[0]=="string"?_L(e[0]):void 0}function me(e,t,i){let s,u;return t===void 0||Array.isArray(t)?(u=e,i=t,s=[void 0]):(u=t,s=Array.isArray(e)?e:[e]),(d,y)=>{const v=d.constructor.prototype;s.forEach(_=>{const M=u$(d,_,u);M.read&&typeof M.read=="object"||(M.read={}),M.read.reader=v[y],i&&(M.read.source=(M.read.source||[]).concat(i))})}}function _e(e,t,i){let s,u;return t===void 0?(u=e,s=[void 0]):typeof t!="string"?(u=e,s=[void 0],i=t):(u=t,s=Array.isArray(e)?e:[e]),(d,y)=>{const v=d.constructor.prototype;for(const _ of s){const M=u$(d,_,u);M.write&&typeof M.write=="object"||(M.write={}),i&&(M.write.target=i),M.write.writer=v[y]}}}let et=class{constructor(t,i={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=t,this._options=i,this.apiValues=[],this.jsonValues=[],this._apiToJSON=this._invertMap(t),this.apiValues=this._getKeysSorted(this._apiToJSON),this.jsonValues=this._getKeysSorted(this._jsonToAPI),this.read=s=>this.fromJSON(s),this.write=(s,u,d)=>{const y=this.toJSON(s);y!==void 0&&Hi(d,y,u)},this.write.isJSONMapWriter=!0}toJSON(t){if(t==null)return null;if(this._apiToJSON.hasOwnProperty(t)){const i=this._apiToJSON[t];return this._options.useNumericKeys?+i:i}return this._options.ignoreUnknown?void 0:t}fromJSON(t){return t!=null&&this._jsonToAPI.hasOwnProperty(t)?this._jsonToAPI[t]:this._options.ignoreUnknown?void 0:t}_invertMap(t){const i={};for(const s in t)i[t[s]]=s;return i}_getKeysSorted(t){const i=[];for(const s in t)i.push(s);return i.sort(),i}};function Ji(){return function(e,t){return new et(e,{ignoreUnknown:!0,...t})}}let W9=class{constructor(t,i,s,u){this.semiMajorAxis=t,this.flattening=i,this.outerAtmosphereRimWidth=s;const d=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*d,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=u||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const Pt=new W9(6378137,1/298.257223563,3e5,.006694379990137799),lo=new W9(3396190,1/169.8944472236118,23e4),xa=new W9(1737400,0,0),xL=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,SL={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function D6(e){const t=e==null?void 0:e.match(xL);if(!t)return null;const[,i,s,u]=t;if(!i)return null;let d=null,y=null,v=null;const{devext:_,qaext:M,www:E}=SL;if(s)if(d=i,u)switch(u.toLowerCase()){case"devext":({customBaseUrl:y,portalHostname:v}=_);break;case"qa":({customBaseUrl:y,portalHostname:v}=M);break;default:return null}else({customBaseUrl:y,portalHostname:v}=E);else switch(i.toLowerCase()){case"devext":({customBaseUrl:y,portalHostname:v}=_);break;case"qaext":({customBaseUrl:y,portalHostname:v}=M);break;case"www":({customBaseUrl:y,portalHostname:v}=E);break;default:return null}return{customBaseUrl:y,isPortal:!1,portalHostname:v,urlKey:d}}function $L(e){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(e)}function TL(e){const t=atob(e),i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i.buffer}function ML(e){const t=new Uint8Array(e);let i="";for(let s=0;s<t.length;s++)i+=String.fromCharCode(t[s]);return btoa(i)}const IL=de.getLogger("esri.core.urlUtils"),wc=at.request,F6="esri/config: esriConfig.request.proxyUrl is not set.",X$=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,Q$=/^\s*http:/i,EL=/^\s*https:/i,kL=/^\s*file:/i,AL=/:\d+$/,OL=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,PL=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),CL=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");let qh=class{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let i=this.uri.match(PL);this.scheme=i[2]||(i[1]?"":null),this.authority=i[4]||(i[3]?"":null),this.path=i[5],this.query=i[7]||(i[6]?"":null),this.fragment=i[9]||(i[8]?"":null),this.authority!=null&&(i=this.authority.match(CL),this.user=i[3]||null,this.password=i[4]||null,this.host=i[6]||i[7],this.port=i[9]||null)}toString(){return this.uri}};const Rd={},jL=new qh(at.applicationUrl);let Ui=jL;const NL=RL();let J9=NL;const K9=()=>Ui,Ple=()=>J9;function RL(){const e=Ui.path,t=e.substring(0,e.lastIndexOf(e.split("/")[e.split("/").length-1]));return`${`${Ui.scheme}://${Ui.host}${Ui.port!=null?`:${Ui.port}`:""}`}${t}`}function Ai(e){if(!e)return null;const t={path:null,query:null},i=new qh(e),s=e.indexOf("?");return i.query===null?t.path=e:(t.path=e.substring(0,s),t.query=Z9(i.query)),i.fragment&&(t.hash=i.fragment,i.query===null&&(t.path=t.path.substring(0,t.path.length-(i.fragment.length+1)))),t}function Z9(e){const t=e.split("&"),i={};for(const s of t){if(!s)continue;const u=s.indexOf("=");let d,y;u<0?(d=decodeURIComponent(s),y=""):(d=decodeURIComponent(s.slice(0,u)),y=decodeURIComponent(s.slice(u+1)));let v=i[d];typeof v=="string"&&(v=i[d]=[v]),Array.isArray(v)?v.push(y):i[d]=y}return i}function $p(e,t){return e?t&&typeof t=="function"?Object.keys(e).map(i=>encodeURIComponent(i)+"="+encodeURIComponent(t(i,e[i]))).join("&"):Object.keys(e).map(i=>{const s=e[i];if(s==null)return"";const u=encodeURIComponent(i)+"=",d=t==null?void 0:t[i];return d?u+encodeURIComponent(d(s)):Array.isArray(s)?s.map(y=>ly(y)?u+encodeURIComponent(JSON.stringify(y)):u+encodeURIComponent(y)).join("&"):ly(s)?u+encodeURIComponent(JSON.stringify(s)):u+encodeURIComponent(s)}).filter(i=>i).join("&"):""}function LL(e=!1){let t,i=wc.proxyUrl;if(typeof e=="string"){t=UL(e);const s=bm(e);s&&(i=s.proxyUrl)}else t=!!e;if(!i)throw IL.warn(F6),new ae("urlutils:proxy-not-set",F6);return t&&Av()&&(i=t5(i)),Ai(i)}function Cle(e){const t=bm(e);let i,s;if(t){const u=Y9(t.proxyUrl);i=u.path,s=u.query?Z9(u.query):null}if(i){const u=Ai(e);e=i+"?"+u.path;const d=$p({...s,...u.query});d&&(e=`${e}?${d}`)}return e}const Rc={path:"",query:""};function Y9(e){const t=e.indexOf("?");return t!==-1?(Rc.path=e.slice(0,t),Rc.query=e.slice(t+1)):(Rc.path=e,Rc.query=null),Rc}function eT(e){return e=(e=hy(e=ZL(e=Y9(e).path),!0)).toLowerCase()}function DL(e){const t={proxyUrl:e.proxyUrl,urlPrefix:eT(e.urlPrefix)},i=wc.proxyRules,s=t.urlPrefix;let u=i.length;for(let d=0;d<i.length;d++){const y=i[d].urlPrefix;if(s.indexOf(y)===0){if(s.length===y.length)return-1;u=d;break}y.indexOf(s)===0&&(u=d+1)}return i.splice(u,0,t),u}function bm(e){const t=wc.proxyRules,i=eT(e);for(let s=0;s<t.length;s++)if(i.indexOf(t[s].urlPrefix)===0)return t[s]}function FL(e,t){if(!e||!t)return!1;e=uy(e),t=uy(t);const i=D6(e),s=D6(t);return i!=null&&s!=null?i.portalHostname===s.portalHostname:i==null&&s==null&&sc(e,t,!0)}function tT(e,t){return e=uy(e),t=uy(t),hy(e)===hy(t)}function uy(e){const t=(e=Ls(e)).indexOf("/sharing");return t>0?e.substring(0,t):e.replace(/\/+$/,"")}function iT(e){const t=s=>s==null||s instanceof RegExp&&s.test(e)||typeof s=="string"&&e.startsWith(s),i=wc.interceptors;if(i){for(const s of i)if(Array.isArray(s.urls)){if(s.urls.some(t))return s}else if(t(s.urls))return s}return null}function sc(e,t,i=!1){if(!e||!t)return!1;const s=Pv(e),u=Pv(t);return!(!i&&s.scheme!==u.scheme)&&s.host!=null&&u.host!=null&&s.host.toLowerCase()===u.host.toLowerCase()&&s.port===u.port}function X9(e){if(typeof e=="string"){if(!Ar(e))return!0;e=Pv(e)}if(sc(e,Ui))return!0;const t=wc.trustedServers||[];for(let i=0;i<t.length;i++){const s=zL(t[i]);for(let u=0;u<s.length;u++)if(sc(e,s[u]))return!0}return!1}function zL(e){return Rd[e]||(e5(e)||bn(e)?Rd[e]=[new qh(Yr(e))]:Rd[e]=[new qh(`http://${e}`),new qh(`https://${e}`)]),Rd[e]}function Yr(e,t=J9,i){return bn(e)?i&&i.preserveProtocolRelative?e:Ui.scheme==="http"&&Ui.authority===Ds(e).slice(2)?`http:${e}`:`https:${e}`:e5(e)?e:nc(e[0]==="/"?JL(t):t,e)}function Q9(e,t=J9,i){if(e==null||!Ar(e))return e;const s=Ls(e),u=s.toLowerCase(),d=Ls(t).toLowerCase().replace(/\/+$/,""),y=i?Ls(i).toLowerCase().replace(/\/+$/,""):null;if(y&&d.indexOf(y)!==0)return e;const v=(O,C,R)=>(R=O.indexOf(C,R))===-1?O.length:R;let _=v(u,"/",u.indexOf("//")+2),M=-1;for(;u.slice(0,_+1)===d.slice(0,_)+"/"&&(M=_+1,_!==u.length);)_=v(u,"/",_+1);if(M===-1||y&&M<y.length)return e;e=s.slice(M);const E=d.slice(M-1).replaceAll(/[^/]+/g,"").length;if(E>0)for(let O=0;O<E;O++)e=`../${e}`;else e=`./${e}`;return e}function Ls(e){return e=QL(e=XL(e=YL(e=Yr(e=e.trim()))))}function nc(...e){const t=e.filter(tc);if(!(t!=null&&t.length))return;const i=[];if(Ar(t[0])){const u=t[0],d=u.indexOf("//");d!==-1&&(i.push(u.slice(0,d+1)),HL(t[0])&&(i[0]+="/"),t[0]=u.slice(d+2))}else t[0][0]==="/"&&i.push("");const s=t.reduce((u,d)=>d?u.concat(d.split("/")):u,[]);for(let u=0;u<s.length;u++){const d=s[u];d===".."&&i.length>0&&i[i.length-1]!==".."?i.pop():(!d&&u===s.length-1||d&&(d!=="."||i.length===0))&&i.push(d)}return i.join("/")}function Ds(e,t=!1){if(e==null||_m(e)||Mu(e))return null;let i=e.indexOf("://");if(i===-1&&bn(e))i=2;else{if(i===-1)return null;i+=3}const s=e.indexOf("/",i);return s!==-1&&(e=e.slice(0,s)),t&&(e=hy(e,!0)),e}function Ar(e){return bn(e)||e5(e)}function _m(e){return e!=null&&e.slice(0,5)==="blob:"}function Mu(e){return e!=null&&e.slice(0,5)==="data:"}function VL(e){const t=Tp(e);return t&&t.isBase64?TL(t.data):null}function jle(e){return ML(e).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const GL=/^data:(.*?)(;base64)?,(.*)$/;function Tp(e){const t=e.match(GL);if(!t)return null;const[,i,s,u]=t;return{mediaType:i,isBase64:!!s,data:u}}function rT(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}async function Nle(e){return(await fetch(e)).blob()}function Rle(e){const t=VL(e);if(!t)return null;const i=Tp(e);return new Blob([t],{type:i.mediaType})}function Lle(e,t){qL(e,t)}function qL(e,t){if(!e)return!1;const i=document.createElement("a");if(!("download"in i))return!1;const s=URL.createObjectURL(e);return i.download=t,i.href=s,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(s),!0}function bn(e){return e!=null&&e[0]==="/"&&e[1]==="/"}function e5(e){return e!=null&&X$.test(e)}function UL(e){return e!=null&&EL.test(e)||Ui.scheme==="https"&&bn(e)}function BL(e){return e!=null&&Q$.test(e)||Ui.scheme==="http"&&bn(e)}function HL(e){return e!=null&&kL.test(e)}function t5(e){return bn(e)?`https:${e}`:e.replace(Q$,"https:")}function WL(){return Ui.scheme==="http"}function Av(){return Ui.scheme==="https"}function hy(e,t=!1){return bn(e)?e.slice(2):(e=e.replace(X$,""),t&&e.length>1&&e[0]==="/"&&e[1]==="/"&&(e=e.slice(2)),e)}function JL(e){const t=e.indexOf("//"),i=e.indexOf("/",t+2);return i===-1?e:e.slice(0,i)}function KL(e){let t=0;if(Ar(e)){const s=e.indexOf("//");s!==-1&&(t=s+2)}const i=e.lastIndexOf("/");return i<t?e:e.slice(0,i+1)}function Dle(e,t){if(!e)return"";const i=Ai(e).path.replace(/\/+$/,""),s=i.substring(i.lastIndexOf("/")+1);if(!(t!=null&&t.length))return s;const u=new RegExp(`.(${t.join("|")})$`,"ig");return s.replace(u,"")}function ZL(e){return e.endsWith("/")?e:`${e}/`}function sT(e){return e.replace(/\/+$/,"")}function YL(e){if(/^https?:\/\//i.test(e)){const t=Y9(e);e=(e=t.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}function XL(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function QL(e){const t=wc.httpsDomains;if(!BL(e))return e;const i=e.indexOf("/",7);let s;if(s=i===-1?e:e.slice(0,i),s=s.toLowerCase().slice(7),AL.test(s)){if(!s.endsWith(":80"))return e;s=s.slice(0,-3),e=e.replace(":80","")}return WL()&&s===Ui.authority&&!OL.test(e)||(Av()&&s===Ui.authority||t&&t.some(u=>s===u||s.endsWith(`.${u}`))||Av()&&!bm(e))&&(e=t5(e)),e}function Ov(e,t,i){if(!(t&&i&&e&&Ar(e)))return e;const s=e.indexOf("//"),u=e.indexOf("/",s+2),d=e.indexOf(":",s+2),y=Math.min(u<0?e.length:u,d<0?e.length:d);return e.slice(s+2,y).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,s+2)}${i}${e.slice(y)}`}function Pv(e){return typeof e=="string"?new qh(Yr(e)):(e.scheme||(e.scheme=Ui.scheme),e)}function Fle(e){return eD.test(e)}function nT(e,t){const i=Ai(e),s=Object.keys(i.query||{});return s.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${s.join(", ")}.`),i.path}function oT(e,t,i){const s=Ai(e),u=s.query||{};return u[t]=String(i),`${s.path}?${$p(u)}`}function Dg(e,t){if(!t)return e;const i=Ai(e),s=i.query||{};for(const[d,y]of Object.entries(t))y!=null&&(s[d]=y);const u=$p(s);return u?`${i.path}?${u}`:i.path}function zle(e){if(e==null)return null;const t=e.match(aT);return t?t[2]:null}function z6(e){if(e==null)return null;const t=e.match(aT);return t?{path:t[1],extension:t[2]}:{path:e,extension:null}}async function Vle(e){return typeof e=="string"?Tp(e)??{data:e}:new Promise((t,i)=>{const s=new FileReader;s.readAsDataURL(e),s.onload=()=>t(Tp(s.result)),s.onerror=u=>i(u)})}const aT=/([^.]*)\.([^\/]*)$/,eD=/(^data:image\/svg|\.svg$)/i,lT="20231109",uT="bd3f0f31f667aa883ebe3002833f813cc4a75869";Symbol.dispose??(Symbol.dispose=Symbol("Symbol.dispose")),Symbol.asyncDispose??(Symbol.asyncDispose=Symbol("Symbol.asyncDispose"));const tD="4.28";let tt,i5=tD;i5="4.28.9";function Gle(e){tt=e}function qle(e){const t=tt==null?void 0:tt.findCredential(e);return t!=null&&t.token?oT(e,"token",t.token):e}oe("host-webworker");const iD=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function hT(e){const t=Ds(e,!0);return!!t&&t.endsWith(".arcgis.com")&&!iD.has(t)&&!e.endsWith("/sharing/rest/generateToken")}function rD(e,t,i=!1,s){return new Promise((u,d)=>{if(co(s))return void d(V6());let y=()=>{M(),d(new Error(`Unable to load ${t}`))},v=()=>{const E=e;M(),u(E)},_=()=>{if(!e)return;const E=e;M(),E.src="",d(V6())};const M=()=>{oe("esri-image-decode")||(e.removeEventListener("error",y),e.removeEventListener("load",v)),y=null,v=null,e=null,s!=null&&s.removeEventListener("abort",_),_=null,i&&URL.revokeObjectURL(t)};s!=null&&s.addEventListener("abort",_),oe("esri-image-decode")?e.decode().then(v,y):(e.addEventListener("error",y),e.addEventListener("load",v))})}function V6(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}const sD="Timeout exceeded";function nD(){return new Error(sD)}function oD(e){at.request.crossOriginNoCorsDomains||(at.request.crossOriginNoCorsDomains={});const t=at.request.crossOriginNoCorsDomains;for(let i of e)i=i.toLowerCase(),/^https?:\/\//.test(i)?t[Ds(i)??""]=0:(t[Ds("http://"+i)??""]=0,t[Ds("https://"+i)??""]=0)}function aD(e){const t=at.request.crossOriginNoCorsDomains;if(t){let i=Ds(e);if(i)return i=i.toLowerCase(),!sc(i,K9())&&t[i]<Date.now()-36e5}return!1}async function lD(e){var u;const t=at.request.crossOriginNoCorsDomains,i=Ds(e);t&&i&&(t[i.toLowerCase()]=Date.now());const s=Ai(e);e=s.path,((u=s.query)==null?void 0:u.f)==="json"&&(e+="?f=json");try{await fetch(e,{mode:"no-cors",credentials:"include"})}catch{}}async function Yt(e,t){var M;e instanceof URL&&(e=e.toString()),(t==null?void 0:t.query)instanceof URLSearchParams&&(t.query=Z9(t.query.toString().replaceAll("+"," ")));const i=Mu(e),s=_m(e);s||i||(e=Ls(e));const u={url:e,requestOptions:{...t}};let d=iT(e);if(d){const E=await mD(d,u);if(E!=null)return{data:E,getHeader:r5,httpStatus:200,requestOptions:u.requestOptions,url:u.url};d.after||d.error||(d=null)}if(e=u.url,(t=u.requestOptions).responseType==="image"&&(oe("host-webworker")||oe("host-node")))throw gn("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),u);if(t.method==="head"){if(t.body)throw gn("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),u);if(i||s)throw gn("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),u)}if(await dD(),cy)return cy.execute(e,t);const y=new AbortController;Rs(t,()=>y.abort());const v={controller:y,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:d,params:u,redoRequest:!1,useIdentity:Es.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},_=await vD(v);return(M=d==null?void 0:d.after)==null||M.call(d,_),_}let cy;const Es=at.request,cT="FormData"in globalThis,uD=new Set([499,498,403,401]),hD=new Set(["COM_0056","COM_0057","SB_0008"]),cD=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],r5=()=>null,py=Symbol();function pD(e){const t=Ds(e);t&&!Yt._corsServers.includes(t)&&Yt._corsServers.push(t)}function G6(e){const t=Ds(e);return!t||t.endsWith(".arcgis.com")||Yt._corsServers.includes(t)||X9(t)}function gn(e,t,i,s){let u="Error";const d={url:i.url,requestOptions:i.requestOptions,getHeader:r5,ssl:!1};if(t instanceof ae)return t.details?(t.details=ie(t.details),t.details.url=i.url,t.details.requestOptions=i.requestOptions):t.details=d,t;if(t){const y=s&&(M=>s.headers.get(M)),v=s==null?void 0:s.status,_=t.message;_&&(u=_),y&&(d.getHeader=y),d.httpStatus=(t.httpCode!=null?t.httpCode:t.code)||v||0,d.subCode=t.subcode,d.messageCode=t.messageCode,typeof t.details=="string"?d.messages=[t.details]:d.messages=t.details,d.raw=py in t?t[py]:t}return Rr(t)?hi():new ae(e,u,d)}async function dD(){oe("host-webworker")?cy||(cy=await Se(()=>import("./request-ea86ccf7.js"),[])):Yt._abortableFetch||(Yt._abortableFetch=globalThis.fetch.bind(globalThis))}async function Cv(){tt||await Se(()=>import("./IdentityManager-f4a0bbdf.js"),["assets/IdentityManager-f4a0bbdf.js","assets/widget-6e55f565.js"])}async function fD(e){var v;const t=e.params.url,i=e.params.requestOptions,s=e.controller.signal,u=i.body;let d=null,y=null;if(cT&&"HTMLFormElement"in globalThis&&(u instanceof FormData?d=u:u instanceof HTMLFormElement&&(d=new FormData(u))),typeof u=="string"&&(y=u),e.fetchOptions={cache:i.cacheBust&&!("polyfill"in Yt._abortableFetch)?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},method:i.method==="head"?"HEAD":"GET",mode:"cors",priority:Es.priority,redirect:"follow",signal:s},(d||y)&&(e.fetchOptions.body=d||y),i.authMode==="anonymous"&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||(v=i.query)!=null&&v.token||d!=null&&d.get("token")),!e.hasToken&&at.apiKey&&hT(t)&&(i.query||(i.query={}),i.query.token=at.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!pT(t)&&!co(s)){let _;i.authMode==="immediate"?(await Cv(),_=await tt.getCredential(t,{signal:s}),e.credential=_):i.authMode==="no-prompt"?(await Cv(),_=await tt.getCredential(t,{prompt:!1,signal:s}).catch(()=>{}),e.credential=_):tt&&(_=tt.findCredential(t)),_&&(e.credentialToken=_.token,e.useSSL=!!_.ssl)}}function pT(e){return cD.some(t=>t.test(e))}async function yD(e){let t=e.params.url;const i=e.params.requestOptions,s=e.fetchOptions??{},u=_m(t)||Mu(t),d=i.responseType||"json",y=u?0:i.timeout!=null?i.timeout:Es.timeout;let v=!1;if(!u){e.useSSL&&(t=t5(t)),i.cacheBust&&s.cache==="default"&&(t=oT(t,"request.preventCache",Date.now()));let C={...i.query};e.credentialToken&&(C.token=e.credentialToken);let R=$p(C);oe("esri-url-encodes-apostrophe")&&(R=R.replaceAll("'","%27"));const L=t.length+1+R.length;let G;v=i.method==="delete"||i.method==="post"||i.method==="put"||!!i.body||L>Es.maxUrlLength;const U=i.useProxy||!!bm(t);if(U){const K=LL(t);G=K.path,!v&&G.length+1+L>Es.maxUrlLength&&(v=!0),K.query&&(C={...K.query,...C})}if(s.method==="HEAD"&&(v||U)){if(v)throw L>Es.maxUrlLength?gn("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params):gn("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params);if(U)throw gn("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(v?(s.method=i.method==="delete"?"DELETE":i.method==="put"?"PUT":"POST",i.body?t=Dg(t,C):(s.body=$p(C),s.headers||(s.headers={}),s.headers["Content-Type"]="application/x-www-form-urlencoded")):t=Dg(t,C),U&&(e.useProxy=!0,t=`${G}?${t}`),C.token&&cT&&s.body instanceof FormData&&!$L(t)&&s.body.set("token",C.token),i.hasOwnProperty("withCredentials"))e.withCredentials=i.withCredentials;else if(!sc(t,K9())){if(X9(t))e.withCredentials=!0;else if(tt){const K=tt.findServerInfo(t);K!=null&&K.webTierAuth&&(e.withCredentials=!0)}}e.withCredentials&&(s.credentials="include",aD(t)&&await lD(v?Dg(t,C):t))}let _,M,E=0,O=!1;y>0&&(E=setTimeout(()=>{O=!0,e.controller.abort()},y));try{if(i.responseType==="native-request-init")M=s,M.url=t;else if(i.responseType!=="image"||s.cache!=="default"||s.method!=="GET"||v||gD(i.headers)||!u&&!e.useProxy&&Es.proxyUrl&&!G6(t)){if(_=await Yt._abortableFetch(t,s),e.useProxy||pD(t),i.responseType==="native")M=_;else if(s.method!=="HEAD")if(_.ok){switch(d){case"array-buffer":M=await _.arrayBuffer();break;case"blob":case"image":M=await _.blob();break;default:M=await _.text()}if(E&&(clearTimeout(E),E=0),d==="json"||d==="xml"||d==="document")if(M)switch(d){case"json":M=JSON.parse(M);break;case"xml":M=q6(M,"application/xml");break;case"document":M=q6(M,"text/html")}else M=null;if(M){if(d==="array-buffer"||d==="blob"){const C=_.headers.get("Content-Type");if(C&&/application\/json|text\/plain/i.test(C)&&M[d==="blob"?"size":"byteLength"]<=750)try{const R=await new Response(M).json();R.error&&(M=R)}catch{}}d==="image"&&M instanceof Blob&&(M=await U6(URL.createObjectURL(M),e,!0))}}else{M=await _.text();try{M=JSON.parse(M)}catch{}}}else M=await U6(t,e)}catch(C){if(C.name==="AbortError")throw O?nD():hi("Request canceled");if(!(!_&&C instanceof TypeError&&Es.proxyUrl)||i.body||i.method==="delete"||i.method==="head"||i.method==="post"||i.method==="put"||e.useProxy||G6(t))throw C;e.redoRequest=!0,DL({proxyUrl:Es.proxyUrl,urlPrefix:Ds(t)??""})}finally{E&&clearTimeout(E)}return[_,M]}async function mD(e,t){if(e.responseData!=null)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let i,s;try{s=await e.before(t)}catch(u){i=gn("request:interceptor",u,t)}if((s instanceof Error||s instanceof ae)&&(i=gn("request:interceptor",s,t)),i)throw e.error&&e.error(i),i;return s}}function gD(e){if(e){for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0}return!1}function q6(e,t){let i;try{i=new DOMParser().parseFromString(e,t)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}async function vD(e){var d,y;let t,i;await fD(e);try{do[t,i]=await yD(e);while(!await wD(e,t,i))}catch(v){const _=gn("request:server",v,e.params,t);throw _.details.ssl=e.useSSL,(d=e.interceptor)!=null&&d.error&&e.interceptor.error(_),_}const s=e.params.url;if(i&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(s)){if(!e.hasToken&&!e.credentialToken&&((y=i.user)!=null&&y.username)&&!X9(s)){const v=Ds(s,!0);v&&Es.trustedServers.push(v)}Array.isArray(i.authorizedCrossOriginNoCorsDomains)&&oD(i.authorizedCrossOriginNoCorsDomains)}const u=e.credential;if(u&&tt){const v=tt.findServerInfo(u.server);let _=v==null?void 0:v.owningSystemUrl;if(_){_=_.replace(/\/?$/,"/sharing");const M=tt.findCredential(_,u.userId);M&&tt._getIdenticalSvcIdx(_,M)===-1&&M.resources.unshift(_)}}return{data:i,getHeader:t?v=>t==null?void 0:t.headers.get(v):r5,httpStatus:(t==null?void 0:t.status)??200,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function wD(e,t,i){var M;if(e.redoRequest)return e.redoRequest=!1,!1;const s=e.params.requestOptions;if(!t||s.responseType==="native"||s.responseType==="native-request-init")return!0;let u,d;if(i&&(i.error?u=i.error:i.status==="error"&&Array.isArray(i.messages)&&(u={...i},u[py]=i,u.details=i.messages)),!u&&!t.ok)throw u=new Error(`Unable to load ${t.url} status: ${t.status}`),u[py]=i,u;let y,v=null;u&&(d=Number(u.code),v=u.hasOwnProperty("subcode")?Number(u.subcode):null,y=u.messageCode,y=y==null?void 0:y.toUpperCase());const _=s.authMode;if(d===403&&(v===4||(M=u.message)!=null&&M.toLowerCase().includes("ssl")&&!u.message.toLowerCase().includes("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&(_!=="no-prompt"||d===498)&&d!==void 0&&uD.has(d)&&!pT(e.params.url)&&(d!==403||(!y||!hD.has(y))&&(v==null||v===2&&e.credentialToken))){await Cv();try{const E=await tt.getCredential(e.params.url,{error:gn("request:server",u,e.params),prompt:_!=="no-prompt",signal:e.controller.signal,token:e.credentialToken});return e.credential=E,e.credentialToken=E.token,e.useSSL=e.useSSL||E.ssl,!1}catch(E){if(_==="no-prompt")return e.credential=void 0,e.credentialToken=void 0,!1;u=E}}if(u)throw u;return!0}function U6(e,t,i=!1){const s=t.controller.signal,u=new Image;return t.withCredentials?u.crossOrigin="use-credentials":u.crossOrigin="anonymous",u.alt="",u.fetchPriority=Es.priority,u.src=e,rD(u,e,i,s)}Yt._abortableFetch=null,Yt._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];const bD=de.getLogger("esri.assets");function xt(e){if(!at.assetsPath)throw bD.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new ae("assets:path-not-set","config.assetsPath is not set");return nc(at.assetsPath,e)}let Fg,te=null;function s5(){return!!te}function _D(){return!!oe("esri-wasm")}function dT(){return Fg||(Fg=Se(()=>import("./pe-wasm-cf902ec6.js"),[]).then(e=>e.p).then(({default:e})=>e({locateFile:t=>xt(`esri/geometry/support/${t}`)})).then(e=>{yT(e)}),Fg)}var jv,Rt,Nv;(function(e){function t(d,y,v){te.ensureCache.prepare();const _=jl(v),M=v===_,E=te.ensureFloat64(_),O=te._pe_geog_to_proj(te.getPointer(d),y,E);return O&&ua(v,y,E,M),O}function i(d,y,v,_){switch(_){case Rt.PE_TRANSFORM_P_TO_G:return s(d,y,v);case Rt.PE_TRANSFORM_G_TO_P:return t(d,y,v)}return 0}function s(d,y,v){return u(d,y,v,0)}function u(d,y,v,_){te.ensureCache.prepare();const M=jl(v),E=v===M,O=te.ensureFloat64(M),C=te._pe_proj_to_geog_center(te.getPointer(d),y,O,_);return C&&ua(v,y,O,E),C}e.geogToProj=t,e.projGeog=i,e.projToGeog=s,e.projToGeogCenter=u})(jv||(jv={})),function(e){function t(){e.PE_BUFFER_MAX=te.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=te.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=te.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=te.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=te.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=te.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=te.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=te.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=te.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=te.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=te.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=te.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=te.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=te.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=te.PeDefs.prototype.PE_TYPE_UNIT,e.PE_TYPE_LINUNIT=te.PeDefs.prototype.PE_TYPE_LINUNIT,e.PE_STR_OPTS_NONE=te.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=te.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=te.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=te.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_STR_FMT_WKT=te.PeDefs.prototype.PE_STR_FMT_WKT,e.PE_STR_FMT_WKT2=te.PeDefs.prototype.PE_STR_FMT_WKT2,e.PE_PARM_X0=te.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=te.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=te.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=te.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=te.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=te.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=te.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=te.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=te.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=te.PeDefs.prototype.PE_HORIZON_DELTA}e.init=t}(Rt||(Rt={})),function(e){const t={},i={},s=R=>{if(R){const L=R.getType();switch(L){case Rt.PE_TYPE_GEOGCS:R=te.castObject(R,te.PeGeogcs);break;case Rt.PE_TYPE_PROJCS:R=te.castObject(R,te.PeProjcs);break;case Rt.PE_TYPE_GEOGTRAN:R=te.castObject(R,te.PeGeogtran);break;default:L&Rt.PE_TYPE_UNIT&&(R=te.castObject(R,te.PeUnit))}}return R};function u(){te.PeFactory.prototype.initialize(null)}function d(R){return y(Rt.PE_TYPE_COORDSYS,R)}function y(R,L){let G=null,U=t[R];if(U||(U={},t[R]=U),U.hasOwnProperty(String(L)))G=U[L];else{const K=te.PeFactory.prototype.factoryByType(R,L);te.compare(K,te.NULL)||(G=K,U[L]=G)}return G=s(G),G}function v(R,L){let G=null,U=i[R];if(U||(U={},i[R]=U),U.hasOwnProperty(L))G=U[L];else{const K=te.PeFactory.prototype.fromString(R,L);te.compare(K,te.NULL)||(G=K,U[L]=G)}return G=s(G),G}function _(R){return y(Rt.PE_TYPE_GEOGCS,R)}function M(R){return y(Rt.PE_TYPE_GEOGTRAN,R)}function E(R){return te.PeFactory.prototype.getCode(R)}function O(R){return y(Rt.PE_TYPE_PROJCS,R)}function C(R){return y(Rt.PE_TYPE_UNIT,R)}e.initialize=u,e.coordsys=d,e.factoryByType=y,e.fromString=v,e.geogcs=_,e.geogtran=M,e.getCode=E,e.projcs=O,e.unit=C}(Nv||(Nv={}));let fT=null;var dy,Rv,Lv,Dv,fy,Fv,yy,my,zv;function yT(e){function t(d,y,v){d[y]=v(d[y])}te=e,Rt.init(),dy.init(),fy.init(),yy.init(),my.init(),fT=class extends te.PeGCSExtent{destroy(){te.destroy(this)}};const i=[te.PeDatum,te.PeGeogcs,te.PeGeogtran,te.PeObject,te.PeParameter,te.PePrimem,te.PeProjcs,te.PeSpheroid,te.PeUnit];for(const d of i)t(d.prototype,"getName",y=>function(){return y.call(this,new Array(Rt.PE_NAME_MAX))});for(const d of[te.PeGeogtran,te.PeProjcs])t(d.prototype,"getParameters",y=>function(){const v=new Array(Rt.PE_PARM_MAX);let _=y.call(this);for(let M=0;M<v.length;M++){const E=te.getValue(_,"*");v[M]=E?te.wrapPointer(E,te.PeParameter):null,_+=Int32Array.BYTES_PER_ELEMENT}return v});t(te.PeHorizon.prototype,"getCoord",d=>function(){const y=this.getSize();if(!y)return null;const v=[];return ua(v,y,d.call(this)),v}),t(te.PeGTlistExtendedEntry.prototype,"getEntries",d=>{const y=te._pe_getPeGTlistExtendedGTsSize();return function(){let v=null;const _=d.call(this);if(!te.compare(_,te.NULL)){v=[_];const M=this.getSteps();if(M>1){const E=te.getPointer(_);for(let O=1;O<M;O++)v.push(te.wrapPointer(E+y*O,te.PeGTlistExtendedGTs))}}return v}});const s=te._pe_getPeHorizonSize(),u=d=>function(){let y=this._cache;if(y||(y=new Map,this._cache=y),y.has(d))return y.get(d);let v=null;const _=d.call(this);if(!te.compare(_,te.NULL)){v=[_];const M=_.getNump();if(M>1){const E=te.getPointer(_);for(let O=1;O<M;O++)v.push(te.wrapPointer(E+s*O,te.PeHorizon))}}return y.set(d,v),v};t(te.PeProjcs.prototype,"horizonGcsGenerate",u),t(te.PeProjcs.prototype,"horizonPcsGenerate",u),te.PeObject.prototype.toString=function(d=Rt.PE_STR_OPTS_NONE){te.ensureCache.prepare();const y=te.getPointer(this),v=te.ensureInt8(new Array(Rt.PE_BUFFER_MAX));return te.UTF8ToString(te._pe_object_to_string_ext(y,d,v))}}function En(e){if(!e)return;const t=te.getClass(e);if(!t)return;const i=te.getCache(t);if(!i)return;const s=te.getPointer(e);s&&delete i[s]}function Ld(e,t){const i=[],s=new Array(t);for(let u=0;u<e;u++)i.push(te.ensureInt8(s));return i}function jl(e){let t;return Array.isArray(e[0])?(t=[],e.forEach(i=>{t.push(i[0],i[1])})):t=e,t}function ua(e,t,i,s=!1){if(s)for(let u=0;u<2*t;u++)e[u]=te.getValue(i+u*Float64Array.BYTES_PER_ELEMENT,"double");else{const u=e.length===0;for(let d=0;d<t;d++)u&&(e[d]=new Array(2)),e[d][0]=te.getValue(i,"double"),e[d][1]=te.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}(function(e){let t;function i(){e.PE_GTLIST_OPTS_COMMON=te.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=te._pe_getPeGTlistExtendedEntrySize()}function s(u,d,y,v,_,M){let E=null;const O=new te.PeInteger(M);try{const C=te.PeGTlistExtended.prototype.getGTlist(u,d,y,v,_,O);if((M=O.val)&&(E=[C],M>1)){const R=te.getPointer(C);for(let L=1;L<M;L++)E.push(te.wrapPointer(R+t*L,te.PeGTlistExtendedEntry))}}finally{te.destroy(O)}return E}e.init=i,e.getGTlist=s})(dy||(dy={})),function(e){function t(i){if(i!=null&&i.length){for(const s of i)En(s),s.getEntries().forEach(u=>{En(u);const d=u.getGeogtran();En(d),d.getParameters().forEach(En),[d.getGeogcs1(),d.getGeogcs2()].forEach(y=>{En(y);const v=y.getDatum();En(v),En(v.getSpheroid()),En(y.getPrimem()),En(y.getUnit())})});te.PeGTlistExtendedEntry.prototype.Delete(i[0])}}e.destroy=t}(Rv||(Rv={})),function(e){function t(i,s,u,d,y){te.ensureCache.prepare();const v=jl(u),_=u===v,M=te.ensureFloat64(v);let E=0;d&&(E=te.ensureFloat64(d));const O=te._pe_geog_to_geog(te.getPointer(i),s,M,E,y);return O&&ua(u,s,M,_),O}e.geogToGeog=t}(Lv||(Lv={})),function(e){const t=(M,E,O,C,R,L)=>{let G,U;switch(te.ensureCache.prepare(),M){case"dd":G=te._pe_geog_to_dd,U=Rt.PE_DD_MAX;break;case"ddm":G=te._pe_geog_to_ddm,U=Rt.PE_DDM_MAX;break;case"dms":G=te._pe_geog_to_dms,U=Rt.PE_DMS_MAX}let K=0;E&&(K=te.getPointer(E));const ee=jl(C),Q=te.ensureFloat64(ee),re=Ld(O,U),ne=G(K,O,Q,R,te.ensureInt32(re));if(ne)for(let le=0;le<O;le++)L[le]=te.UTF8ToString(re[le]);return ne},i=(M,E,O,C,R)=>{let L;switch(te.ensureCache.prepare(),M){case"dd":L=te._pe_dd_to_geog;break;case"ddm":L=te._pe_ddm_to_geog;break;case"dms":L=te._pe_dms_to_geog}let G=0;E&&(G=te.getPointer(E));const U=C.map(re=>te.ensureString(re)),K=te.ensureInt32(U),ee=te.ensureFloat64(new Array(2*O)),Q=L(G,O,K,ee);return Q&&ua(R,O,ee),Q};function s(M,E,O,C,R){return t("dms",M,E,O,C,R)}function u(M,E,O,C){return i("dms",M,E,O,C)}function d(M,E,O,C,R){return t("ddm",M,E,O,C,R)}function y(M,E,O,C){return i("ddm",M,E,O,C)}function v(M,E,O,C,R){return t("dd",M,E,O,C,R)}function _(M,E,O,C){return i("dd",M,E,O,C)}e.geogToDms=s,e.dmsToGeog=u,e.geogToDdm=d,e.ddmToGeog=y,e.geogToDd=v,e.ddToGeog=_}(Dv||(Dv={})),function(e){function t(){e.PE_MGRS_STYLE_NEW=te.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=te.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=te.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=te.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=te.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function i(u,d,y,v,_,M,E){te.ensureCache.prepare();let O=0;u&&(O=te.getPointer(u));const C=jl(y),R=te.ensureFloat64(C),L=Ld(d,Rt.PE_MGRS_MAX),G=te.ensureInt32(L),U=te._pe_geog_to_mgrs_extended(O,d,R,v,_,M,G);if(U)for(let K=0;K<d;K++)E[K]=te.UTF8ToString(L[K]);return U}function s(u,d,y,v,_){te.ensureCache.prepare();let M=0;u&&(M=te.getPointer(u));const E=y.map(L=>te.ensureString(L)),O=te.ensureInt32(E),C=te.ensureFloat64(new Array(2*d)),R=te._pe_mgrs_to_geog_extended(M,d,O,v,C);return R&&ua(_,d,C),R}e.init=t,e.geogToMgrsExtended=i,e.mgrsToGeogExtended=s}(fy||(fy={})),function(e){function t(s,u,d,y,v,_,M){te.ensureCache.prepare();let E=0;s&&(E=te.getPointer(s));const O=jl(d),C=te.ensureFloat64(O),R=Ld(u,Rt.PE_MGRS_MAX),L=te.ensureInt32(R),G=te._pe_geog_to_usng(E,u,C,y,v,_,L);if(G)for(let U=0;U<u;U++)M[U]=te.UTF8ToString(R[U]);return G}function i(s,u,d,y){te.ensureCache.prepare();let v=0;s&&(v=te.getPointer(s));const _=d.map(C=>te.ensureString(C)),M=te.ensureInt32(_),E=te.ensureFloat64(new Array(2*u)),O=te._pe_usng_to_geog(v,u,M,E);return O&&ua(y,u,E),O}e.geogToUsng=t,e.usngToGeog=i}(Fv||(Fv={})),function(e){function t(){e.PE_UTM_OPTS_NONE=te.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=te.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=te.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function i(u,d,y,v,_){te.ensureCache.prepare();let M=0;u&&(M=te.getPointer(u));const E=jl(y),O=te.ensureFloat64(E),C=Ld(d,Rt.PE_UTM_MAX),R=te.ensureInt32(C),L=te._pe_geog_to_utm(M,d,O,v,R);if(L)for(let G=0;G<d;G++)_[G]=te.UTF8ToString(C[G]);return L}function s(u,d,y,v,_){te.ensureCache.prepare();let M=0;u&&(M=te.getPointer(u));const E=y.map(L=>te.ensureString(L)),O=te.ensureInt32(E),C=te.ensureFloat64(new Array(2*d)),R=te._pe_utm_to_geog(M,d,O,v,C);return R&&ua(_,d,C),R}e.init=t,e.geogToUtm=i,e.utmToGeog=s}(yy||(yy={})),function(e){const t=new Map;function i(){e.PE_PCSINFO_OPTION_NONE=te.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=te.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=te.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=te.PePCSInfo.prototype.PE_POLE_POINT}function s(u,d=e.PE_PCSINFO_OPTION_DOMAIN){let y=null,v=null;return t.has(u)&&(v=t.get(u),v[d]&&(y=v[d])),y||(y=te.PePCSInfo.prototype.generate(u,d),v||(v=[],t.set(u,v)),v[d]=y),y}e.init=i,e.generate=s}(my||(my={})),function(e){function t(){return te.PeVersion.prototype.version_string()}e.versionString=t}(zv||(zv={}));const xD=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return jv},get PeDefs(){return Rt},get PeFactory(){return Nv},get PeGCSExtent(){return fT},get PeGTTransformations(){return Lv},get PeGTlistExtended(){return dy},get PeGTlistExtendedEntry(){return Rv},get PeNotationDms(){return Dv},get PeNotationMgrs(){return fy},get PeNotationUsng(){return Fv},get PeNotationUtm(){return yy},get PePCSInfo(){return my},get PeVersion(){return zv},_init:yT,get _pe(){return te},isLoaded:s5,isSupported:_D,load:dT},Symbol.toStringTag,{value:"Module"}));var uu;(function(e){e[e.CGCS2000=4490]="CGCS2000",e[e.GCSMARS2000=104971]="GCSMARS2000",e[e.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",e[e.GCSMOON2000=104903]="GCSMOON2000"})(uu||(uu={}));let $;const V={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1};for($=2e3;$<=2045;$++)V[$]=0;for($=2056;$<=2065;$++)V[$]=0;for($=2067;$<=2135;$++)V[$]=0;for($=2137;$<=2154;$++)V[$]=0;for($=2161;$<=2170;$++)V[$]=0;for($=2172;$<=2193;$++)V[$]=0;for($=2195;$<=2198;$++)V[$]=0;for($=2200;$<=2203;$++)V[$]=0;for($=2205;$<=2217;$++)V[$]=0;for($=2222;$<=2224;$++)V[$]=1;for($=2225;$<=2250;$++)V[$]=2;for($=2251;$<=2253;$++)V[$]=1;for($=2257;$<=2264;$++)V[$]=2;for($=2274;$<=2279;$++)V[$]=2;for($=2280;$<=2282;$++)V[$]=1;for($=2283;$<=2289;$++)V[$]=2;for($=2290;$<=2292;$++)V[$]=0;for($=2308;$<=2313;$++)V[$]=0;for($=2315;$<=2491;$++)V[$]=0;for($=2494;$<=2866;$++)V[$]=0;for($=2867;$<=2869;$++)V[$]=1;for($=2870;$<=2888;$++)V[$]=2;for($=2891;$<=2895;$++)V[$]=2;for($=2896;$<=2898;$++)V[$]=1;for($=2902;$<=2908;$++)V[$]=2;for($=2915;$<=2920;$++)V[$]=2;for($=2921;$<=2923;$++)V[$]=1;for($=2924;$<=2930;$++)V[$]=2;for($=2931;$<=2962;$++)V[$]=0;for($=2964;$<=2968;$++)V[$]=2;for($=2969;$<=2973;$++)V[$]=0;for($=2975;$<=2991;$++)V[$]=0;for($=2995;$<=3051;$++)V[$]=0;for($=3054;$<=3079;$++)V[$]=0;for($=3081;$<=3088;$++)V[$]=0;for($=3092;$<=3101;$++)V[$]=0;for($=3106;$<=3138;$++)V[$]=0;for($=3146;$<=3151;$++)V[$]=0;for($=3153;$<=3166;$++)V[$]=0;for($=3168;$<=3172;$++)V[$]=0;for($=3174;$<=3203;$++)V[$]=0;for($=3294;$<=3358;$++)V[$]=0;for($=3367;$<=3403;$++)V[$]=0;for($=3408;$<=3416;$++)V[$]=0;for($=3417;$<=3438;$++)V[$]=2;for($=3441;$<=3446;$++)V[$]=2;for($=3447;$<=3450;$++)V[$]=0;for($=3451;$<=3459;$++)V[$]=2;for($=3460;$<=3478;$++)V[$]=0;for($=3554;$<=3559;$++)V[$]=0;for($=3560;$<=3570;$++)V[$]=2;for($=3571;$<=3581;$++)V[$]=0;for($=3594;$<=3597;$++)V[$]=0;for($=3601;$<=3604;$++)V[$]=0;for($=3637;$<=3639;$++)V[$]=0;for($=3665;$<=3667;$++)V[$]=0;for($=3693;$<=3695;$++)V[$]=0;for($=3701;$<=3727;$++)V[$]=0;for($=3728;$<=3739;$++)V[$]=2;for($=3740;$<=3751;$++)V[$]=0;for($=3753;$<=3760;$++)V[$]=2;for($=3761;$<=3773;$++)V[$]=0;for($=3775;$<=3777;$++)V[$]=0;for($=3779;$<=3781;$++)V[$]=0;for($=3783;$<=3785;$++)V[$]=0;for($=3788;$<=3791;$++)V[$]=0;for($=3797;$<=3802;$++)V[$]=0;for($=3814;$<=3816;$++)V[$]=0;for($=3825;$<=3829;$++)V[$]=0;for($=3832;$<=3841;$++)V[$]=0;for($=3844;$<=3852;$++)V[$]=0;for($=3873;$<=3885;$++)V[$]=0;for($=3890;$<=3893;$++)V[$]=0;for($=3907;$<=3912;$++)V[$]=0;for($=3942;$<=3950;$++)V[$]=0;for($=3968;$<=3970;$++)V[$]=0;for($=3973;$<=3976;$++)V[$]=0;for($=3986;$<=3989;$++)V[$]=0;for($=3994;$<=3997;$++)V[$]=0;for($=4048;$<=4051;$++)V[$]=0;for($=4056;$<=4063;$++)V[$]=0;for($=4093;$<=4096;$++)V[$]=0;for($=4390;$<=4398;$++)V[$]=0;for($=4399;$<=4413;$++)V[$]=2;for($=4418;$<=4433;$++)V[$]=2;for($=4455;$<=4457;$++)V[$]=2;for($=4484;$<=4489;$++)V[$]=0;for($=4491;$<=4554;$++)V[$]=0;for($=4568;$<=4589;$++)V[$]=0;for($=4652;$<=4656;$++)V[$]=0;for($=4766;$<=4800;$++)V[$]=0;for($=5014;$<=5016;$++)V[$]=0;for($=5069;$<=5072;$++)V[$]=0;for($=5105;$<=5130;$++)V[$]=0;for($=5167;$<=5188;$++)V[$]=0;for($=5253;$<=5259;$++)V[$]=0;for($=5269;$<=5275;$++)V[$]=0;for($=5292;$<=5311;$++)V[$]=0;for($=5329;$<=5331;$++)V[$]=0;for($=5343;$<=5349;$++)V[$]=0;for($=5355;$<=5357;$++)V[$]=0;for($=5387;$<=5389;$++)V[$]=0;for($=5459;$<=5463;$++)V[$]=0;for($=5479;$<=5482;$++)V[$]=0;for($=5518;$<=5520;$++)V[$]=0;for($=5530;$<=5539;$++)V[$]=0;for($=5550;$<=5552;$++)V[$]=0;for($=5562;$<=5583;$++)V[$]=0;for($=5623;$<=5625;$++)V[$]=2;for($=5631;$<=5639;$++)V[$]=0;for($=5649;$<=5653;$++)V[$]=0;for($=5663;$<=5680;$++)V[$]=0;for($=5682;$<=5685;$++)V[$]=0;for($=5875;$<=5877;$++)V[$]=0;for($=5896;$<=5899;$++)V[$]=0;for($=5921;$<=5940;$++)V[$]=0;for($=6050;$<=6125;$++)V[$]=0;for($=6244;$<=6275;$++)V[$]=0;for($=6328;$<=6348;$++)V[$]=0;for($=6350;$<=6356;$++)V[$]=0;for($=6366;$<=6372;$++)V[$]=0;for($=6381;$<=6387;$++)V[$]=0;for($=6393;$<=6404;$++)V[$]=0;for($=6480;$<=6483;$++)V[$]=0;for($=6511;$<=6514;$++)V[$]=0;for($=6579;$<=6581;$++)V[$]=0;for($=6619;$<=6624;$++)V[$]=0;for($=6625;$<=6627;$++)V[$]=2;for($=6628;$<=6632;$++)V[$]=0;for($=6634;$<=6637;$++)V[$]=0;for($=6669;$<=6692;$++)V[$]=0;for($=6707;$<=6709;$++)V[$]=0;for($=6720;$<=6723;$++)V[$]=0;for($=6732;$<=6738;$++)V[$]=0;for($=6931;$<=6933;$++)V[$]=0;for($=6956;$<=6959;$++)V[$]=0;for($=7005;$<=7007;$++)V[$]=0;for($=7057;$<=7070;$++)V[$]=2;for($=7074;$<=7082;$++)V[$]=0;for($=7109;$<=7118;$++)V[$]=0;for($=7119;$<=7127;$++)V[$]=1;for($=7374;$<=7376;$++)V[$]=0;for($=7528;$<=7586;$++)V[$]=0;for($=7587;$<=7645;$++)V[$]=2;for($=7692;$<=7696;$++)V[$]=0;for($=7755;$<=7787;$++)V[$]=0;for($=7791;$<=7795;$++)V[$]=0;for($=7799;$<=7801;$++)V[$]=0;for($=7803;$<=7805;$++)V[$]=0;for($=7825;$<=7831;$++)V[$]=0;for($=7845;$<=7859;$++)V[$]=0;for($=8013;$<=8032;$++)V[$]=0;for($=8065;$<=8068;$++)V[$]=1;for($=8518;$<=8529;$++)V[$]=2;for($=8533;$<=8536;$++)V[$]=2;for($=8538;$<=8540;$++)V[$]=2;for($=8677;$<=8679;$++)V[$]=0;for($=8836;$<=8840;$++)V[$]=0;for($=8857;$<=8859;$++)V[$]=0;for($=8908;$<=8910;$++)V[$]=0;for($=9154;$<=9159;$++)V[$]=0;for($=9205;$<=9218;$++)V[$]=0;for($=9271;$<=9273;$++)V[$]=0;for($=9295;$<=9297;$++)V[$]=0;for($=9356;$<=9360;$++)V[$]=0;for($=9404;$<=9407;$++)V[$]=0;for($=9476;$<=9482;$++)V[$]=0;for($=9487;$<=9494;$++)V[$]=0;for($=9697;$<=9699;$++)V[$]=0;for($=9821;$<=9865;$++)V[$]=0;for($=10285;$<=10291;$++)V[$]=0;for($=10314;$<=10317;$++)V[$]=0;for($=10448;$<=10465;$++)V[$]=0;for($=11114;$<=11118;$++)V[$]=0;for($=20004;$<=20032;$++)V[$]=0;for($=20047;$<=20049;$++)V[$]=0;for($=20062;$<=20092;$++)V[$]=0;for($=20135;$<=20138;$++)V[$]=0;for($=20248;$<=20258;$++)V[$]=0;for($=20348;$<=20358;$++)V[$]=0;for($=20436;$<=20440;$++)V[$]=0;for($=20822;$<=20824;$++)V[$]=0;for($=20904;$<=20932;$++)V[$]=0;for($=20934;$<=20936;$++)V[$]=0;for($=21004;$<=21032;$++)V[$]=0;for($=21035;$<=21037;$++)V[$]=0;for($=21095;$<=21097;$++)V[$]=0;for($=21148;$<=21150;$++)V[$]=0;for($=21207;$<=21264;$++)V[$]=0;for($=21307;$<=21364;$++)V[$]=0;for($=21413;$<=21423;$++)V[$]=0;for($=21453;$<=21463;$++)V[$]=0;for($=21473;$<=21483;$++)V[$]=0;for($=21780;$<=21782;$++)V[$]=0;for($=21891;$<=21894;$++)V[$]=0;for($=21896;$<=21899;$++)V[$]=0;for($=22171;$<=22177;$++)V[$]=0;for($=22181;$<=22187;$++)V[$]=0;for($=22191;$<=22197;$++)V[$]=0;for($=22207;$<=22222;$++)V[$]=0;for($=22229;$<=22232;$++)V[$]=0;for($=22234;$<=22236;$++)V[$]=0;for($=22243;$<=22250;$++)V[$]=0;for($=22262;$<=22265;$++)V[$]=0;for($=22307;$<=22322;$++)V[$]=0;for($=22348;$<=22357;$++)V[$]=0;for($=22407;$<=22422;$++)V[$]=0;for($=22462;$<=22465;$++)V[$]=0;for($=22521;$<=22525;$++)V[$]=0;for($=22607;$<=22622;$++)V[$]=0;for($=22641;$<=22646;$++)V[$]=0;for($=22648;$<=22657;$++)V[$]=0;for($=22707;$<=22722;$++)V[$]=0;for($=22762;$<=22765;$++)V[$]=0;for($=22807;$<=22822;$++)V[$]=0;for($=22991;$<=22994;$++)V[$]=0;for($=23028;$<=23038;$++)V[$]=0;for($=23301;$<=23333;$++)V[$]=2;for($=23830;$<=23853;$++)V[$]=0;for($=23866;$<=23872;$++)V[$]=0;for($=23877;$<=23884;$++)V[$]=0;for($=23886;$<=23894;$++)V[$]=0;for($=23946;$<=23948;$++)V[$]=0;for($=24311;$<=24313;$++)V[$]=0;for($=24342;$<=24347;$++)V[$]=0;for($=24370;$<=24374;$++)V[$]=10;for($=24375;$<=24381;$++)V[$]=0;for($=24718;$<=24721;$++)V[$]=0;for($=24817;$<=24821;$++)V[$]=0;for($=24877;$<=24882;$++)V[$]=0;for($=24891;$<=24893;$++)V[$]=0;for($=25391;$<=25395;$++)V[$]=0;for($=25828;$<=25838;$++)V[$]=0;for($=26191;$<=26195;$++)V[$]=0;for($=26391;$<=26393;$++)V[$]=0;for($=26701;$<=26722;$++)V[$]=0;for($=26729;$<=26799;$++)V[$]=2;for($=26801;$<=26803;$++)V[$]=2;for($=26811;$<=26813;$++)V[$]=2;for($=26847;$<=26870;$++)V[$]=2;for($=26891;$<=26899;$++)V[$]=0;for($=26901;$<=26923;$++)V[$]=0;for($=26929;$<=26946;$++)V[$]=0;for($=26948;$<=26998;$++)V[$]=0;for($=27037;$<=27040;$++)V[$]=0;for($=27205;$<=27232;$++)V[$]=0;for($=27258;$<=27260;$++)V[$]=0;for($=27391;$<=27398;$++)V[$]=0;for($=27561;$<=27564;$++)V[$]=0;for($=27571;$<=27574;$++)V[$]=0;for($=27581;$<=27584;$++)V[$]=0;for($=27591;$<=27594;$++)V[$]=0;for($=28191;$<=28193;$++)V[$]=0;for($=28348;$<=28358;$++)V[$]=0;for($=28402;$<=28432;$++)V[$]=0;for($=28462;$<=28492;$++)V[$]=0;for($=29118;$<=29122;$++)V[$]=0;for($=29168;$<=29172;$++)V[$]=0;for($=29177;$<=29185;$++)V[$]=0;for($=29187;$<=29195;$++)V[$]=0;for($=29900;$<=29903;$++)V[$]=0;for($=30161;$<=30179;$++)V[$]=0;for($=30491;$<=30494;$++)V[$]=0;for($=30729;$<=30732;$++)V[$]=0;for($=31251;$<=31259;$++)V[$]=0;for($=31265;$<=31268;$++)V[$]=0;for($=31275;$<=31279;$++)V[$]=0;for($=31281;$<=31297;$++)V[$]=0;for($=31461;$<=31469;$++)V[$]=0;for($=31491;$<=31495;$++)V[$]=0;for($=31917;$<=31922;$++)V[$]=0;for($=31965;$<=32e3;$++)V[$]=0;for($=32001;$<=32003;$++)V[$]=2;for($=32005;$<=32031;$++)V[$]=2;for($=32033;$<=32060;$++)V[$]=2;for($=32064;$<=32067;$++)V[$]=2;for($=32074;$<=32077;$++)V[$]=2;for($=32081;$<=32086;$++)V[$]=0;for($=32107;$<=32130;$++)V[$]=0;for($=32133;$<=32159;$++)V[$]=0;for($=32164;$<=32167;$++)V[$]=2;for($=32180;$<=32199;$++)V[$]=0;for($=32201;$<=32260;$++)V[$]=0;for($=32301;$<=32360;$++)V[$]=0;for($=32401;$<=32460;$++)V[$]=0;for($=32501;$<=32560;$++)V[$]=0;for($=32601;$<=32662;$++)V[$]=0;for($=32664;$<=32667;$++)V[$]=2;for($=32701;$<=32761;$++)V[$]=0;for($=53001;$<=53004;$++)V[$]=0;for($=53008;$<=53019;$++)V[$]=0;for($=53021;$<=53032;$++)V[$]=0;for($=53034;$<=53037;$++)V[$]=0;for($=53042;$<=53046;$++)V[$]=0;for($=53074;$<=53080;$++)V[$]=0;for($=54001;$<=54004;$++)V[$]=0;for($=54008;$<=54019;$++)V[$]=0;for($=54021;$<=54032;$++)V[$]=0;for($=54034;$<=54037;$++)V[$]=0;for($=54042;$<=54046;$++)V[$]=0;for($=54048;$<=54053;$++)V[$]=0;for($=54074;$<=54080;$++)V[$]=0;for($=54098;$<=54101;$++)V[$]=0;for($=102001;$<=102040;$++)V[$]=0;for($=102042;$<=102063;$++)V[$]=0;for($=102065;$<=102067;$++)V[$]=0;for($=102070;$<=102117;$++)V[$]=0;for($=102122;$<=102216;$++)V[$]=0;for($=102221;$<=102377;$++)V[$]=0;for($=102382;$<=102388;$++)V[$]=0;for($=102389;$<=102398;$++)V[$]=2;for($=102399;$<=102444;$++)V[$]=0;for($=102445;$<=102447;$++)V[$]=2;for($=102448;$<=102458;$++)V[$]=0;for($=102459;$<=102468;$++)V[$]=2;for($=102469;$<=102499;$++)V[$]=0;for($=102500;$<=102519;$++)V[$]=1;for($=102520;$<=102524;$++)V[$]=0;for($=102525;$<=102529;$++)V[$]=2;for($=102530;$<=102588;$++)V[$]=0;for($=102590;$<=102598;$++)V[$]=0;for($=102601;$<=102603;$++)V[$]=0;for($=102605;$<=102628;$++)V[$]=0;for($=102629;$<=102646;$++)V[$]=2;for($=102648;$<=102700;$++)V[$]=2;for($=102701;$<=102703;$++)V[$]=0;for($=102707;$<=102730;$++)V[$]=2;for($=102733;$<=102758;$++)V[$]=2;for($=102767;$<=102900;$++)V[$]=0;for($=102901;$<=102933;$++)V[$]=2;for($=102934;$<=102950;$++)V[$]=13;for($=102951;$<=102955;$++)V[$]=0;for($=102961;$<=102963;$++)V[$]=0;for($=102965;$<=102969;$++)V[$]=0;for($=102971;$<=102973;$++)V[$]=0;for($=102975;$<=102989;$++)V[$]=0;for($=102990;$<=102992;$++)V[$]=1;for($=102997;$<=103002;$++)V[$]=0;for($=103003;$<=103008;$++)V[$]=2;for($=103009;$<=103011;$++)V[$]=0;for($=103012;$<=103014;$++)V[$]=2;for($=103019;$<=103021;$++)V[$]=0;for($=103022;$<=103024;$++)V[$]=2;for($=103029;$<=103031;$++)V[$]=0;for($=103032;$<=103034;$++)V[$]=2;for($=103065;$<=103068;$++)V[$]=0;for($=103074;$<=103076;$++)V[$]=0;for($=103077;$<=103079;$++)V[$]=1;for($=103080;$<=103082;$++)V[$]=0;for($=103083;$<=103085;$++)V[$]=2;for($=103090;$<=103093;$++)V[$]=0;for($=103097;$<=103099;$++)V[$]=0;for($=103100;$<=103102;$++)V[$]=2;for($=103107;$<=103109;$++)V[$]=0;for($=103110;$<=103112;$++)V[$]=2;for($=103113;$<=103116;$++)V[$]=0;for($=103117;$<=103120;$++)V[$]=2;for($=103153;$<=103157;$++)V[$]=0;for($=103158;$<=103162;$++)V[$]=2;for($=103163;$<=103165;$++)V[$]=0;for($=103166;$<=103168;$++)V[$]=1;for($=103169;$<=103171;$++)V[$]=2;for($=103186;$<=103188;$++)V[$]=0;for($=103189;$<=103191;$++)V[$]=2;for($=103192;$<=103195;$++)V[$]=0;for($=103196;$<=103199;$++)V[$]=2;for($=103200;$<=103224;$++)V[$]=0;for($=103225;$<=103227;$++)V[$]=1;for($=103232;$<=103237;$++)V[$]=0;for($=103238;$<=103243;$++)V[$]=2;for($=103244;$<=103246;$++)V[$]=0;for($=103247;$<=103249;$++)V[$]=2;for($=103254;$<=103256;$++)V[$]=0;for($=103257;$<=103259;$++)V[$]=2;for($=103264;$<=103266;$++)V[$]=0;for($=103267;$<=103269;$++)V[$]=2;for($=103300;$<=103375;$++)V[$]=0;for($=103381;$<=103383;$++)V[$]=0;for($=103384;$<=103386;$++)V[$]=1;for($=103387;$<=103389;$++)V[$]=0;for($=103390;$<=103392;$++)V[$]=2;for($=103397;$<=103399;$++)V[$]=0;for($=103400;$<=103471;$++)V[$]=2;for($=103476;$<=103478;$++)V[$]=0;for($=103479;$<=103481;$++)V[$]=2;for($=103486;$<=103488;$++)V[$]=0;for($=103489;$<=103491;$++)V[$]=2;for($=103492;$<=103495;$++)V[$]=0;for($=103496;$<=103499;$++)V[$]=2;for($=103528;$<=103543;$++)V[$]=0;for($=103544;$<=103548;$++)V[$]=2;for($=103549;$<=103551;$++)V[$]=0;for($=103552;$<=103554;$++)V[$]=1;for($=103555;$<=103557;$++)V[$]=2;for($=103558;$<=103560;$++)V[$]=0;for($=103571;$<=103573;$++)V[$]=0;for($=103574;$<=103576;$++)V[$]=2;for($=103577;$<=103580;$++)V[$]=0;for($=103581;$<=103583;$++)V[$]=2;for($=103595;$<=103694;$++)V[$]=0;for($=103696;$<=103699;$++)V[$]=0;for($=103700;$<=103793;$++)V[$]=2;for($=103794;$<=103890;$++)V[$]=0;for($=103891;$<=103896;$++)V[$]=2;for($=103900;$<=103971;$++)V[$]=2;for($=103972;$<=103977;$++)V[$]=0;for($=112e3;$<=112101;$++)V[$]=0;const SD={102113:!0,102100:!0,3857:!0,3785:!0},$D={4326:!0,3785:!0,3857:!0,102113:!0,102100:!0,104905:!0,104971:!0},B6='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',Dd=[-20037508342788905e-9,20037508342788905e-9],Fd=[-20037508342787e-6,20037508342787e-6],mT={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:Dd,origin:Fd,dx:1e-5},102100:{wkTemplate:B6,valid:Dd,origin:Fd,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:Dd,origin:Fd,dx:1e-5},3857:{wkTemplate:B6,valid:Dd,origin:Fd,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function Xt(e,t){if(e===t)return!0;if(e==null||t==null)return!1;if(e.wkid!=null||t.wkid!=null)return e.wkid===t.wkid||hu(e)&&hu(t)||t.latestWkid!=null&&e.wkid===t.latestWkid||e.latestWkid!=null&&t.wkid===e.latestWkid;const i=e.wkt2??e.wkt,s=t.wkt2??t.wkt;return!(!i||!s)&&i.toUpperCase()===s.toUpperCase()}function Or(e){return Si(e)&&e.wkid&&mT[e.wkid]||null}function gT(e){if(!e)return;if(e.wkid)return String(e.wkid);const t=e.wkt||e.wkt2;return JSON.stringify(t?{wkt:t}:{})}function n5(e){if(!Si(e))return!1;if(e.wkid)return V[e.wkid]==null;const t=e.wkt2||e.wkt;return!!t&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(t)}function TD(e){return!(a5(e)||u5(e))}function Mp(e){return Si(e)&&e.wkid===4326}function Ule(e){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(e)}function Ble(e){return Si(e)&&e.wkid===uu.CGCS2000}function hu(e){return Si(e)&&e.wkid!=null&&SD[e.wkid]===!0}function MD(e){return Si(e)&&e.wkid===32662}function o5(e){return e===uu.GCSMARS2000||e===uu.GCSMARS2000_SPHERE}function a5(e){return Si(e)&&e.wkid!=null&&o5(e.wkid)}function l5(e){return e===uu.GCSMOON2000}function u5(e){return Si(e)&&e.wkid!=null&&l5(e.wkid)}function ID(e){return Si(e)&&e.wkid!=null&&$D[e.wkid]===!0}function Si(e){return e!=null&&(e.wkid!=null&&e.wkid>=2e3||e.wkt2!=null||e.wkt!=null)}const ED={wkid:4326,wkt:hm(mT[4326].wkTemplate,{Central_Meridian:"0.0"})},kD={wkid:102100,latestWkid:3857},AD={wkid:32662};function h5(e){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${e.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const OD=h5(Pt),c5=h5(lo),p5=h5(xa),PD={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${Pt.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`};function CD(e){return e!=null&&(a5(e)||Xt(e,c5))?lo:e!=null&&(u5(e)||Xt(e,p5))?xa:Pt}function Hle(e){return o5(e)?lo:l5(e)?xa:Pt}function gy(e){return Xt(e,OD)}function Sa(e){return gy(e)||Xt(e,c5)||Xt(e,p5)}const Wle=39.37,jD=Pt.radius*Math.PI/200,vT=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,eu=V,wT=/UNIT\[([^\]]+)]/i,ND=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),RD=Ji()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),Bs=e=>e*e,bo=e=>e*e*e,Ip={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:Bs(.001)},"square-centimeters":{inBaseUnits:Bs(.01)},"square-decimeters":{inBaseUnits:Bs(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:Bs(1e3)},"square-inches":{inBaseUnits:Bs(.0254)},"square-feet":{inBaseUnits:Bs(.3048)},"square-yards":{inBaseUnits:Bs(.9144)},"square-miles":{inBaseUnits:Bs(1609.344)},"square-us-feet":{inBaseUnits:Bs(1200/3937)},acres:{inBaseUnits:.0015625*Bs(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*bo(.001)},"cubic-centimeters":{inBaseUnits:1e3*bo(.01)},"cubic-decimeters":{inBaseUnits:1e3*bo(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*bo(1e3)},"cubic-inches":{inBaseUnits:1e3*bo(.0254)},"cubic-feet":{inBaseUnits:1e3*bo(.3048)},"cubic-yards":{inBaseUnits:1e3*bo(.9144)},"cubic-miles":{inBaseUnits:1e3*bo(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},LD=(()=>{const e={};for(const t in Ip)for(const i in Ip[t].units)e[i]=t;return e})();function DD(e,t,i){return e*Ip[i].units[t].inBaseUnits}function FD(e,t,i){return e/Ip[i].units[t].inBaseUnits}function Vv(e){const t=LD[e];if(!t)throw new Error("unknown type");return t}function H6(e,t=null){return t=t||Vv(e),Ip[t].baseUnit===e}function zr(e,t,i){if(t===i)return e;const s=Vv(t);if(s!==Vv(i))throw new Error("incompatible units");const u=H6(t,s)?e:DD(e,t,s);return H6(i,s)?u:FD(u,i,s)}function zD(e,t,i){return zr(e,t,"meters")/(i*Math.PI/180)}function bT(e){return RD.fromJSON(e.toLowerCase())||null}function vy(e){if(e!=null&&!TD(e))return 1;const t=Iu(e);return t>1e5?1:t}function VD(e){return Iu(e)>=CD(e).metersPerDegree?"meters":xT(e)}function Iu(e,t=Pt.metersPerDegree){return GD(e,!0)??t}function GD(e,t=!1){const i=(e==null?void 0:e.wkid)??null,s=(e==null?void 0:e.wkt2)??(e==null?void 0:e.wkt)??null;let u=null;if(i){if(o5(i))return lo.metersPerDegree;if(l5(i))return xa.metersPerDegree;u=eu.values[eu[i]],!u&&t&&ND.has(i)&&(u=jD)}else s&&($T(s)?u=W6(vT.exec(s),u):ST(s)&&(u=W6(wT.exec(s),u)));return u}function Jle(e){return n5(e)?1:Iu(e)}function W6(e,t){return e!=null&&e[1]?_T(e[1]):t}function _T(e){return parseFloat(e.split(",")[1])}function xT(e){const t=(e==null?void 0:e.wkid)??null,i=(e==null?void 0:e.wkt2)??(e==null?void 0:e.wkt)??null;let s=null;if(t)s=eu.units[eu[t]];else if(i){const u=$T(i)?vT:ST(i)?wT:null;if(u){const d=u.exec(i);d!=null&&d[1]&&(s=UD(d[1]))}}return s!=null?bT(s):null}function ST(e){return/^GEOCCS/i.test(e)}function $T(e){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(e)}const qD=1e-7;function UD(e){const t=/[\\"']{1}([^\\"']+)/.exec(e);let i=t==null?void 0:t[1];if(!i||!eu.units.includes(i)){const s=_T(e);i=null;const u=eu.values;for(let d=0;d<u.length;++d)if(Math.abs(s-u[d])<qD){i=eu.units[d];break}}return i}const BD={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},HD={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},WD={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},JD=Ji()(BD),KD=Ji()(HD),Kle=Ji()(WD);var Js;let ht=Js=class extends pe{static fromJSON(e){if(!e)return null;if(e.wkid){if(e.wkid===102100)return Js.WebMercator;if(e.wkid===4326)return Js.WGS84}const t=new Js;return t.read(e),t}constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return Mp(this)}get isWebMercator(){return hu(this)}get isGeographic(){return n5(this)}get isWrappable(){return ID(this)}get metersPerUnit(){return Iu(this)}get unit(){return xT(this)||(this.isGeographic?"degrees":null)}writeWkt(e,t){this.wkid||(t.wkt=e)}clone(){if(this===Js.WGS84)return Js.WGS84;if(this===Js.WebMercator)return Js.WebMercator;const e=new Js;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):(this.wkt!=null&&(e.wkt=this.wkt),this.wkt2!=null&&(e.wkt2=this.wkt2)),this.imageCoordinateSystem&&(e.imageCoordinateSystem=ie(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:t,referenceServiceName:i}=e.imageCoordinateSystem,{geodataXform:s}=e.imageCoordinateSystem,u=this.imageCoordinateSystem;return t==null||s?JSON.stringify(u)===JSON.stringify(e.imageCoordinateSystem):i?u.id===t&&u.referenceServiceName===i:u.id===t}return Xt(this,e)}toJSON(e){return this.write(void 0,e)}};ht.GCS_NAD_1927=null,ht.WGS84=null,ht.WebMercator=null,ht.PlateCarree=null,w([S({readOnly:!0})],ht.prototype,"isWGS84",null),w([S({readOnly:!0})],ht.prototype,"isWebMercator",null),w([S({readOnly:!0})],ht.prototype,"isGeographic",null),w([S({readOnly:!0})],ht.prototype,"isWrappable",null),w([S({type:St,json:{write:!0}})],ht.prototype,"latestWkid",void 0),w([S({readOnly:!0})],ht.prototype,"metersPerUnit",null),w([S({readOnly:!0})],ht.prototype,"unit",null),w([S({type:St,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],ht.prototype,"wkid",void 0),w([S({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],ht.prototype,"wkt",void 0),w([_e("wkt"),_e("web-scene","wkt")],ht.prototype,"writeWkt",null),w([S({type:String,json:{write:!1}})],ht.prototype,"wkt2",void 0),w([S({type:St,json:{write:!0}})],ht.prototype,"vcsWkid",void 0),w([S({type:St,json:{write:!0}})],ht.prototype,"latestVcsWkid",void 0),w([S()],ht.prototype,"imageCoordinateSystem",void 0),ht=Js=w([B("esri.geometry.SpatialReference")],ht),ht.prototype.toJSON.isDefaultToJSON=!0,ht.GCS_NAD_1927=new ht({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),ht.WGS84=new ht(ED),ht.WebMercator=new ht(kD),ht.PlateCarree=new ht(AD),Object.freeze&&(Object.freeze(ht.GCS_NAD_1927),Object.freeze(ht.WGS84),Object.freeze(ht.WebMercator));const He=ht;let Ks=class extends pe{constructor(...t){super(...t),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=He.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(t,i){if(t instanceof He)return t;if(t!=null){const s=new He;return s.read(t,i),s}return t}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(t){return this.cache[t]}setCacheValue(t,i){this.cache[t]=i}};w([S()],Ks.prototype,"type",void 0),w([S({readOnly:!0})],Ks.prototype,"cache",null),w([S({readOnly:!0})],Ks.prototype,"extent",null),w([S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Ks.prototype,"hasM",void 0),w([S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Ks.prototype,"hasZ",void 0),w([S({type:He,json:{write:!0},value:He.WGS84})],Ks.prototype,"spatialReference",void 0),w([me("spatialReference")],Ks.prototype,"readSpatialReference",null),Ks=w([B("esri.geometry.Geometry")],Ks);const Ca=Ks;function ZD(e,t){const i=e.x-t.x,s=e.y-t.y,u=e.hasZ&&t.hasZ?e.z-t.z:0;return Math.sqrt(i*i+s*s+u*u)}const YD=57.29577951308232,XD=.017453292519943;function J6(e){return e*YD}function K6(e){return e*XD}function Yle(e){return Math.PI/2-2*Math.atan(Math.exp(-e/Pt.radius))}function Gv(e){return e.wkid!=null||e.wkt!=null}const zg=[0,0];function wy(e,t,i,s,u){const d=e,y=u;if(y.spatialReference=i,"x"in d&&"x"in y)[y.x,y.y]=t(d.x,d.y,zg,s);else if("xmin"in d&&"xmin"in y)[y.xmin,y.ymin]=t(d.xmin,d.ymin,zg,s),[y.xmax,y.ymax]=t(d.xmax,d.ymax,zg,s);else if("paths"in d&&"paths"in y||"rings"in d&&"rings"in y){const v="paths"in d?d.paths:d.rings,_=[];let M;for(let E=0;E<v.length;E++){const O=v[E];M=[],_.push(M);for(let C=0;C<O.length;C++)M.push(t(O[C][0],O[C][1],[0,0],s)),O[C].length>2&&M[C].push(O[C][2]),O[C].length>3&&M[C].push(O[C][3])}"paths"in y?y.paths=_:y.rings=_}else if("points"in d&&"points"in y){const v=d.points,_=[];for(let M=0;M<v.length;M++)_[M]=t(v[M][0],v[M][1],[0,0],s),v[M].length>2&&_[M].push(v[M][2]),v[M].length>3&&_[M].push(v[M][3]);y.points=_}return u}function Lf(e,t){const i=e&&(Gv(e)?e:e.spatialReference),s=t&&(Gv(t)?t:t.spatialReference);return!(e&&"type"in e&&e.type==="mesh"||t&&"type"in t&&t.type==="mesh"||!i||!s)&&(!!Xt(s,i)||hu(s)&&Mp(i)||hu(i)&&Mp(s))}function xm(e,t){if(e==null)return null;const i=e.spatialReference,s=t&&(Gv(t)?t:t.spatialReference);return Lf(i,s)?Xt(i,s)?ie(e):hu(s)?wy(e,Ph,He.WebMercator,!1,ie(e)):Mp(s)?wy(e,tp,He.WGS84,!1,ie(e)):null:null}function Ph(e,t,i=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const s=K6(t);return i[0]=K6(e)*Pt.radius,i[1]=Pt.halfSemiMajorAxis*Math.log((1+Math.sin(s))/(1-Math.sin(s))),i}function tp(e,t,i=[0,0],s=!1){const u=J6(e/Pt.radius);return i[0]=s?u:u-360*Math.floor((u+180)/360),i[1]=J6(Math.PI/2-2*Math.atan(Math.exp(-t/Pt.radius))),i}function tu(e,t=!1,i=ie(e)){return wy(e,Ph,He.WebMercator,t,i)}function Ch(e,t=!1,i=ie(e)){return wy(e,tp,He.WGS84,t,i)}var Df;const Lc=[0,0];function Z6(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let Zi=Df=class extends Ca{static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const i=e._get("spatialReference");t._set("spatialReference",Object.isFrozen(i)?i:i.clone())}constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(e,t,i,s,u){let d;if(Array.isArray(e))d=e,u=t,e=d[0],t=d[1],i=d[2],s=d[3];else if(e&&typeof e=="object"){if(d=e,e=d.x!=null?d.x:d.longitude,t=d.y!=null?d.y:d.latitude,i=d.z,s=d.m,(u=d.spatialReference)&&u.declaredClass!=="esri.geometry.SpatialReference"&&(u=new He(u)),d.longitude!=null||d.latitude!=null){if(d.longitude==null)de.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(d.latitude==null)de.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!d.declaredClass&&u&&u.isWebMercator){const v=Ph(d.longitude,d.latitude,Lc);e=v[0],t=v[1]}}}else Z6(i)?(u=i,i=null):Z6(s)&&(u=s,s=null);const y={x:e,y:t};return y.x==null&&y.y!=null?de.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):y.y==null&&y.x!=null&&de.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),u!=null&&(y.spatialReference=u),i!=null&&(y.z=i),s!=null&&(y.m=s),y}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(e){e!==(this._get("m")!==void 0)&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return this.z!==void 0}set hasZ(e){e!==(this._get("z")!==void 0)&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){const{spatialReference:e,x:t,y:i}=this;if(e){if(e.isWebMercator)return tp(t,i,Lc)[1];if(e.isGeographic)return i}return null}set latitude(e){const{spatialReference:t,x:i}=this;e!=null&&t&&(t.isWebMercator?this._set("y",Ph(i,e,Lc)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){const{x:e,y:t,spatialReference:i}=this;if(i){if(i.isWebMercator)return tp(e,t,Lc)[0];if(i.isGeographic)return e}return null}set longitude(e){const{y:t,spatialReference:i}=this;e!=null&&i&&(i.isWebMercator?this._set("x",Ph(e,t,Lc)[0]):i.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,t,i){t[i]=isNaN(e)?"NaN":e}readX(e){return typeof e=="string"?NaN:e}clone(){const e=new Df;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return Df.copy(e,this),this}equals(e){if(e==null)return!1;const{x:t,y:i,z:s,m:u,spatialReference:d}=this,{z:y,m:v}=e;let{x:_,y:M,spatialReference:E}=e;if(!d.equals(E))if(d.isWebMercator&&E.isWGS84)[_,M]=Ph(_,M),E=d;else{if(!d.isWGS84||!E.isWebMercator)return!1;[_,M]=tp(_,M),E=d}return t===_&&i===M&&s===y&&u===v&&d.wkid===E.wkid}offset(e,t,i){return this.x+=e,this.y+=t,i!=null&&(this.z=(this.z??0)+i),this}normalize(){if(!this.spatialReference)return this;const e=Or(this.spatialReference);if(!e)return this;let t=this.x;const[i,s]=e.valid,u=2*s;let d;return t>s?(d=Math.ceil(Math.abs(t-s)/u),t-=d*u):t<i&&(d=Math.ceil(Math.abs(t-i)/u),t+=d*u),this._set("x",t),this}distance(e){return ZD(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};w([S({readOnly:!0})],Zi.prototype,"cache",null),w([S({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Zi.prototype,"hasM",null),w([S({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Zi.prototype,"hasZ",null),w([S({type:Number})],Zi.prototype,"latitude",null),w([S({type:Number})],Zi.prototype,"longitude",null),w([S({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),mt(e=>isNaN(e)?e:Zr(e))],Zi.prototype,"x",void 0),w([_e("x")],Zi.prototype,"writeX",null),w([me("x")],Zi.prototype,"readX",null),w([S({type:Number,json:{write:!0}})],Zi.prototype,"y",void 0),w([S({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Zi.prototype,"z",void 0),w([S({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],Zi.prototype,"m",void 0),Zi=Df=w([B("esri.geometry.Point")],Zi),Zi.prototype.toJSON.isDefaultToJSON=!0;const Je=Zi;let Cn=class extends Mt(pe){constructor(...t){super(...t),this.position=new Je([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(t,i,s,u){if(t&&typeof t=="object"&&("x"in t||Array.isArray(t))){const d={position:t};return i!=null&&(d.heading=i),s!=null&&(d.tilt=s),u!=null&&(d.fov=u),d}return t}writePosition(t,i,s,u){const d=t.clone();d.x=Zr(t.x||0),d.y=Zr(t.y||0),d.z=t.hasZ?Zr(t.z||0):t.z,i[s]=d.write({},u)}readPosition(t,i){const s=new Je;return s.read(t,i),s.x=Zr(s.x||0),s.y=Zr(s.y||0),s.z=s.hasZ?Zr(s.z||0):s.z,s}equals(t){return t!=null&&this.tilt===t.tilt&&this.heading===t.heading&&this.fov===t.fov&&this.position.equals(t.position)}};w([S({type:Je,json:{write:{isRequired:!0}}})],Cn.prototype,"position",void 0),w([_e("position")],Cn.prototype,"writePosition",null),w([me("position")],Cn.prototype,"readPosition",null),w([S({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),mt(e=>oL.normalize(Zr(e)))],Cn.prototype,"heading",void 0),w([S({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),mt(e=>rs(Zr(e),-180,180))],Cn.prototype,"tilt",void 0),w([S({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Cn.prototype,"fov",void 0),Cn=w([B("esri.Camera")],Cn);const QD=Cn,Vg=[0,0];function Sm(e,t){return t!=null&&er(e,t.x,t.y,t.z)}function Qle(e,t){if(!t.points||t.points.length)return!1;for(const i of t.points)if(!oc(e,i))return!1;return!0}function eF(e,t){const{xmin:i,ymin:s,zmin:u,xmax:d,ymax:y,zmax:v}=t;return e.hasZ&&t.hasZ?er(e,i,s,u)&&er(e,i,y,u)&&er(e,d,y,u)&&er(e,d,s,u)&&er(e,i,s,v)&&er(e,i,y,v)&&er(e,d,y,v)&&er(e,d,s,v):er(e,i,s)&&er(e,i,y)&&er(e,d,y)&&er(e,d,s)}function oc(e,t){return er(e,t[0],t[1])}function tF(e,t){return er(e,t[0],t[1],t[2])}function er(e,t,i,s){return t>=e.xmin&&t<=e.xmax&&i>=e.ymin&&i<=e.ymax&&(s==null||!e.hasZ||s>=e.zmin&&s<=e.zmax)}function TT(e,t){return Vg[1]=t.y,Vg[0]=t.x,iF(e,Vg)}function iF(e,t){return MT(e.rings,t)}function MT(e,t){if(!e)return!1;if(rF(e))return Y6(!1,e,t);let i=!1;for(let s=0,u=e.length;s<u;s++)i=Y6(i,e[s],t);return i}function rF(e){return!Array.isArray(e[0][0])}function Y6(e,t,i){const[s,u]=i;let d=e,y=0;for(let v=0,_=t.length;v<_;v++){y++,y===_&&(y=0);const[M,E]=t[v],[O,C]=t[y];(E<u&&C>=u||C<u&&E>=u)&&M+(u-E)/(C-E)*(O-M)<s&&(d=!d)}return d}function sF(e,t){return Sm(e,t)}function nF(e,t){const i=e.hasZ&&t.hasZ;let s,u,d;if(e.xmin<=t.xmin){if(s=t.xmin,e.xmax<s)return!1}else if(s=e.xmin,t.xmax<s)return!1;if(e.ymin<=t.ymin){if(u=t.ymin,e.ymax<u)return!1}else if(u=e.ymin,t.ymax<u)return!1;if(i&&t.hasZ){if(e.zmin<=t.zmin){if(d=t.zmin,e.zmax<d)return!1}else if(d=e.zmin,t.zmax<d)return!1}return!0}function oF(e,t){const{points:i,hasZ:s}=t,u=s?tF:oc;for(const d of i)if(u(e,d))return!0;return!1}const cu=[0,0],pu=[0,0],du=[0,0],fu=[0,0],aF=[cu,pu,du,fu],IT=[[du,cu],[cu,pu],[pu,fu],[fu,du]];function lF(e,t){return uF(e,t.rings)}function uF(e,t){cu[0]=e.xmin,cu[1]=e.ymax,pu[0]=e.xmax,pu[1]=e.ymax,du[0]=e.xmin,du[1]=e.ymin,fu[0]=e.xmax,fu[1]=e.ymin;for(const i of aF)if(MT(t,i))return!0;for(const i of t){if(!i.length)continue;let s=i[0];if(oc(e,s))return!0;for(let u=1;u<i.length;u++){const d=i[u];if(oc(e,d)||ET(s,d,IT))return!0;s=d}}return!1}function hF(e,t){cu[0]=e.xmin,cu[1]=e.ymax,pu[0]=e.xmax,pu[1]=e.ymax,du[0]=e.xmin,du[1]=e.ymin,fu[0]=e.xmax,fu[1]=e.ymin;const i=t.paths;for(const s of i){if(!i.length)continue;let u=s[0];if(oc(e,u))return!0;for(let d=1;d<s.length;d++){const y=s[d];if(oc(e,y)||ET(u,y,IT))return!0;u=y}}return!1}const gi=[0,0];function cF(e){for(let t=0;t<e.length;t++){const i=e[t];for(let u=0;u<i.length-1;u++){const d=i[u],y=i[u+1];for(let v=t+1;v<e.length;v++)for(let _=0;_<e[v].length-1;_++){const M=e[v][_],E=e[v][_+1];if(qv(d,y,M,E,gi)&&!(gi[0]===d[0]&&gi[1]===d[1]||gi[0]===M[0]&&gi[1]===M[1]||gi[0]===y[0]&&gi[1]===y[1]||gi[0]===E[0]&&gi[1]===E[1]))return!0}}const s=i.length;if(!(s<=4))for(let u=0;u<s-3;u++){let d=s-1;u===0&&(d=s-2);const y=i[u],v=i[u+1];for(let _=u+2;_<d;_++){const M=i[_],E=i[_+1];if(qv(y,v,M,E,gi)&&!(gi[0]===y[0]&&gi[1]===y[1]||gi[0]===M[0]&&gi[1]===M[1]||gi[0]===v[0]&&gi[1]===v[1]||gi[0]===E[0]&&gi[1]===E[1]))return!0}}}return!1}function ET(e,t,i){for(let s=0;s<i.length;s++)if(qv(e,t,i[s][0],i[s][1]))return!0;return!1}function qv(e,t,i,s,u){const[d,y]=e,[v,_]=t,[M,E]=i,[O,C]=s,R=O-M,L=d-M,G=v-d,U=C-E,K=y-E,ee=_-y,Q=U*G-R*ee;if(Q===0)return!1;const re=(R*K-U*L)/Q,ne=(G*K-ee*L)/Q;return re>=0&&re<=1&&ne>=0&&ne<=1&&(u&&(u[0]=d+re*(v-d),u[1]=y+re*(_-y)),!0)}function pF(e){switch(e){case"esriGeometryEnvelope":case"extent":return nF;case"esriGeometryMultipoint":case"multipoint":return oF;case"esriGeometryPoint":case"point":return sF;case"esriGeometryPolygon":case"polygon":return lF;case"esriGeometryPolyline":case"polyline":return hF}}var Vr;function dF(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}function _o(e,t,i){return t==null?i:i==null?t:e(t,i)}let ci=Vr=class extends Ca{constructor(...e){super(...e),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,t,i,s,u){return dF(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:typeof e=="object"?(e.spatialReference=e.spatialReference==null?He.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:i,ymax:s,spatialReference:u??He.WGS84}}static fromBounds(e,t){return new Vr({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}static fromPoint(e){return new Vr({xmin:e.x,ymin:e.y,zmin:e.z,xmax:e.x,ymax:e.y,zmax:e.z,spatialReference:e.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const e=new Je({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){const t=this.center;return e.z!=null&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}clone(){const e=new Vr;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,this.zmin!=null&&(e.zmin=this.zmin,e.zmax=this.zmax),this.mmin!=null&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&Lf(t,i)&&(e=t.isWebMercator?tu(e):Ch(e,!0)),e.type==="point"?Sm(this,e):e.type==="extent"&&eF(this,e)}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&Lf(t,i)&&(e=t.isWebMercator?tu(e):Ch(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){const t=.5*(1-e),i=this.width*t,s=this.height*t;if(this.xmin+=i,this.ymin+=s,this.xmax-=i,this.ymax-=s,this.hasZ){const u=(this.zmax-this.zmin)*t;this.zmin+=u,this.zmax-=u}if(this.hasM){const u=(this.mmax-this.mmin)*t;this.mmin+=u,this.mmax-=u}return this}intersects(e){if(e==null)return!1;e.type==="mesh"&&(e=e.extent);const t=this.spatialReference,i=e.spatialReference;return t&&i&&!Xt(t,i)&&Lf(t,i)&&(e=t.isWebMercator?tu(e):Ch(e,!0)),pF(e.type)(this,e)}normalize(){const e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,t,i){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this===e||(this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=_o(Math.min,this.zmin,e.zmin),this.zmax=_o(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=_o(Math.min,this.mmin,e.mmin),this.mmax=_o(Math.max,this.mmax,e.mmax))),this}intersection(e){return this===e?this:e!=null&&this.intersects(e)?(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=_o(Math.max,this.zmin,e.zmin),this.zmax=_o(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=_o(Math.max,this.mmin,e.mmin),this.mmax=_o(Math.min,this.mmax,e.mmax)),this):null}toJSON(e){return this.write({},e)}_shiftCM(e=Or(this.spatialReference)){if(!e||!this.spatialReference)return this;const t=this.spatialReference,i=this._getCM(e);if(i){const s=t.isWebMercator?Ch(i):i;this.xmin-=i.x,this.xmax-=i.x,t.isWebMercator||(s.x=this._normalizeX(s.x,e).x),this.spatialReference=new He(hm((t.isWGS84?e.altTemplate:null)??e.wkTemplate,{Central_Meridian:s.x}))}return this}_getCM(e){let t=null;const[i,s]=e.valid,u=this.xmin,d=this.xmax;return u>=i&&u<=s&&d>=i&&d<=s||(t=this.center),t}_normalize(e,t,i){const s=this.spatialReference;if(!s)return this;const u=i??Or(s);if(u==null)return this;const d=this._getParts(u).map(_=>_.extent);if(d.length<2)return d[0]||this;if(d.length>2)return e?this._shiftCM(u):this.set({xmin:u.valid[0],xmax:u.valid[1]});if(e)return this._shiftCM(u);if(t)return d;let y=!0,v=!0;return d.forEach(_=>{_.hasZ||(y=!1),_.hasM||(v=!1)}),{rings:d.map(_=>{const M=[[_.xmin,_.ymin],[_.xmin,_.ymax],[_.xmax,_.ymax],[_.xmax,_.ymin],[_.xmin,_.ymin]];if(y){const E=(_.zmax-_.zmin)/2;for(let O=0;O<M.length;O++)M[O].push(E)}if(v){const E=(_.mmax-_.mmin)/2;for(let O=0;O<M.length;O++)M[O].push(E)}return M}),hasZ:y,hasM:v,spatialReference:s}}_getParts(e){let t=this.cache._parts;if(!t){t=[];const{ymin:u,ymax:d,spatialReference:y}=this,v=this.width,_=this.xmin,M=this.xmax;let E;e=e||Or(y);const[O,C]=e.valid;E=this._normalizeX(this.xmin,e);const R=E.x,L=E.frameId;E=this._normalizeX(this.xmax,e);const G=E.x,U=E.frameId,K=R===G&&v>0;if(v>2*C){const ee=new Vr(_<M?R:G,u,C,d,y),Q=new Vr(O,u,_<M?G:R,d,y),re=new Vr(0,u,C,d,y),ne=new Vr(O,u,0,d,y),le=[],ve=[];ee.contains(re)&&le.push(L),ee.contains(ne)&&ve.push(L),Q.contains(re)&&le.push(U),Q.contains(ne)&&ve.push(U);for(let we=L+1;we<U;we++)le.push(we),ve.push(we);t.push({extent:ee,frameIds:[L]},{extent:Q,frameIds:[U]},{extent:re,frameIds:le},{extent:ne,frameIds:ve})}else R>G||K?t.push({extent:new Vr(R,u,C,d,y),frameIds:[L]},{extent:new Vr(O,u,G,d,y),frameIds:[U]}):t.push({extent:new Vr(R,u,G,d,y),frameIds:[L]});this.cache._parts=t}const i=this.hasZ,s=this.hasM;if(i||s){const u={};i&&(u.zmin=this.zmin,u.zmax=this.zmax),s&&(u.mmin=this.mmin,u.mmax=this.mmax);for(let d=0;d<t.length;d++)t[d].extent.set(u)}return t}_normalizeX(e,t){const[i,s]=t.valid,u=2*s;let d,y=0;return e>s?(d=Math.ceil(Math.abs(e-s)/u),e-=d*u,y=d):e<i&&(d=Math.ceil(Math.abs(e-i)/u),e+=d*u,y=-d),{x:e,frameId:y}}};w([S({readOnly:!0})],ci.prototype,"cache",null),w([S({readOnly:!0})],ci.prototype,"center",null),w([S({readOnly:!0})],ci.prototype,"extent",null),w([S({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],ci.prototype,"hasM",null),w([S({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],ci.prototype,"hasZ",null),w([S({readOnly:!0})],ci.prototype,"height",null),w([S({readOnly:!0})],ci.prototype,"width",null),w([S({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],ci.prototype,"xmin",void 0),w([S({type:Number,json:{write:!0}})],ci.prototype,"ymin",void 0),w([S({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],ci.prototype,"mmin",void 0),w([S({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],ci.prototype,"zmin",void 0),w([S({type:Number,json:{write:!0}})],ci.prototype,"xmax",void 0),w([S({type:Number,json:{write:!0}})],ci.prototype,"ymax",void 0),w([S({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],ci.prototype,"mmax",void 0),w([S({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],ci.prototype,"zmax",void 0),ci=Vr=w([B("esri.geometry.Extent")],ci),ci.prototype.toJSON.isDefaultToJSON=!0;const Tt=ci;function ac(e,t,i=!1){let{hasM:s,hasZ:u}=e;Array.isArray(t)?t.length!==4||s||u?t.length===3&&i&&!s?(u=!0,s=!1):t.length===3&&s&&u&&(s=!1,u=!1):(s=!0,u=!0):(u=!u&&t.hasZ&&(!s||t.hasM),s=!s&&t.hasM&&(!u||t.hasZ)),e.hasZ=u,e.hasM=s}var Uv;function X6(e){return(t,i)=>t==null?i:i==null?t:e(t,i)}function fF(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let Po=Uv=class extends Ca{constructor(...e){super(...e),this.points=[],this.type="multipoint"}normalizeCtorArgs(e,t){var u;if(!e&&!t)return{};const i={};Array.isArray(e)?(i.points=e,i.spatialReference=t):fF(e)?i.spatialReference=e:(e.points&&(i.points=e.points),e.spatialReference&&(i.spatialReference=e.spatialReference),e.hasZ&&(i.hasZ=e.hasZ),e.hasM&&(i.hasM=e.hasM));const s=(u=i.points)==null?void 0:u[0];return s&&(i.hasZ===void 0&&i.hasM===void 0?(i.hasZ=s.length>2,i.hasM=!1):i.hasZ===void 0?i.hasZ=s.length>3:i.hasM===void 0&&(i.hasM=s.length>3)),i}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const e=this.points;if(!e.length)return null;const t=new Tt,i=this.hasZ,s=this.hasM,u=i?3:2,d=e[0],y=X6(Math.min),v=X6(Math.max);let _,M,E,O,[C,R]=d,[L,G]=d;for(let U=0,K=e.length;U<K;U++){const ee=e[U],[Q,re]=ee;if(C=y(C,Q),R=y(R,re),L=v(L,Q),G=v(G,re),i&&ee.length>2){const ne=ee[2];_=y(_,ne),E=v(E,ne)}if(s&&ee.length>u){const ne=ee[u];M=y(M,ne),O=v(O,ne)}}return t.xmin=C,t.ymin=R,t.xmax=L,t.ymax=G,t.spatialReference=this.spatialReference,i?(t.zmin=_,t.zmax=E):(t.zmin=void 0,t.zmax=void 0),s?(t.mmin=M,t.mmax=O):(t.mmin=void 0,t.mmax=void 0),t}writePoints(e,t){t.points=ie(this.points)}addPoint(e){return ac(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}clone(){const e={points:ie(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new Uv(e)}getPoint(e){if(!this._validateInputs(e))return null;const t=this.points[e],i={x:t[0],y:t[1],spatialReference:this.spatialReference};let s=2;return this.hasZ&&(i.z=t[2],s=3),this.hasM&&(i.m=t[s]),new Je(i)}removePoint(e){if(!this._validateInputs(e))return null;const t=new Je(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),t}setPoint(e,t){return this._validateInputs(e)?(ac(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange("points"),this):this}toJSON(e){return this.write({},e)}_validateInputs(e){return e!=null&&e>=0&&e<this.points.length}};w([S({readOnly:!0})],Po.prototype,"cache",null),w([S()],Po.prototype,"extent",null),w([S({type:[[Number]],json:{write:{isRequired:!0}}})],Po.prototype,"points",void 0),w([_e("points")],Po.prototype,"writePoints",null),Po=Uv=w([B("esri.geometry.Multipoint")],Po),Po.prototype.toJSON.isDefaultToJSON=!0;const $m=Po;function eue(e){const t=[];for(e.reset();e.nextPath();){const i=[];for(;e.nextPoint();)i.push([e.x,e.y]);t.push(i)}return e.reset(),t}function yF(e){const t=[];for(;e.nextPoint();)t.push([e.x,e.y]);return e.seekPathStart(),t}var by;(function(e){e[e.X=0]="X",e[e.Y=1]="Y",e[e.Z=2]="Z"})(by||(by={}));function kT(e,t){const i=t[0]-e[0],s=t[1]-e[1];if(e.length>2&&t.length>2){const u=e[2]-t[2];return Math.sqrt(i*i+s*s+u*u)}return Math.sqrt(i*i+s*s)}function mF(e,t,i){const s=e[0]+i*(t[0]-e[0]),u=e[1]+i*(t[1]-e[1]);return e.length>2&&t.length>2?[s,u,e[2]+i*(t[2]-e[2])]:[s,u]}function gF(e,t,i,s){return vF(e,t,i[s],i[s+1])}function vF(e,t,i,s){const[u,d]=t,[y,v]=i,[_,M]=s,E=_-y,O=M-v,C=E*E+O*O,R=(u-y)*E+(d-v)*O,L=Math.min(1,Math.max(0,R/C));return e[0]=y+E*L,e[1]=v+O*L,e}function AT(e,t){return mF(e,t,.5)}function OT(e,t=by.X,i=by.Y){let s=0;const u=e.length;let d=e[0];for(let y=0;y<u-1;y++){const v=e[y+1];s+=(v[t]-d[t])*(v[i]+d[i]),d=v}return s>=0}function wF(e){const t=e.length;return t>2&&am(e[0],e[t-1])}function tue(e){if("rings"in e&&(bF(e),e.rings.length>0&&!OT(e.rings[0])))for(const t of e.rings)t.reverse()}function bF(e){if("rings"in e)for(const t of e.rings)wF(t)||t.push(t[0].slice())}function iue(e){return e?e.hasZ?[e.xmax-e.xmin/2,e.ymax-e.ymin/2,e.zmax-e.zmin/2]:[e.xmax-e.xmin/2,e.ymax-e.ymin/2]:null}function _F(e){return e?xF(e.rings,e.hasZ??!1):null}function xF(e,t){if(!(e!=null&&e.length))return null;const i=[],s=[],u=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let d=0,y=e.length;d<y;d++){const v=PT(e[d],t,u);v&&s.push(v)}if(s.sort((d,y)=>{let v=d[2]-y[2];return v===0&&t&&(v=d[4]-y[4]),v}),s.length&&(i[0]=s[0][0],i[1]=s[0][1],t&&(i[2]=s[0][3]),(i[0]<u[0]||i[0]>u[1]||i[1]<u[2]||i[1]>u[3]||t&&(i[2]<u[4]||i[2]>u[5]))&&(i.length=0)),!i.length){const d=e[0]&&e[0].length?SF(e[0],t):null;if(!d)return null;i[0]=d[0],i[1]=d[1],t&&d.length>2&&(i[2]=d[2])}return i}function PT(e,t,i){let s=0,u=0,d=0,y=0,v=0;const _=e.length?e[0][0]:0,M=e.length?e[0][1]:0,E=e.length&&t?e[0][2]:0;for(let C=0;C<e.length;C++){const R=e[C],L=e[(C+1)%e.length],[G,U,K]=R,ee=G-_,Q=U-M,[re,ne,le]=L,ve=re-_,we=ne-M,Ee=ee*we-ve*Q;if(y+=Ee,s+=(ee+ve)*Ee,u+=(Q+we)*Ee,t&&R.length>2&&L.length>2){const Me=K-E,Le=le-E,Fe=ee*Le-ve*Me;d+=(Me+Le)*Fe,v+=Fe}G<i[0]&&(i[0]=G),G>i[1]&&(i[1]=G),U<i[2]&&(i[2]=U),U>i[3]&&(i[3]=U),t&&(K<i[4]&&(i[4]=K),K>i[5]&&(i[5]=K))}if(y>0&&(y*=-1),v>0&&(v*=-1),!y)return null;y*=.5,v*=.5;const O=[s/(6*y)+_,u/(6*y)+M,y];return t&&(i[4]===i[5]||v===0?(O[3]=(i[4]+i[5])/2,O[4]=0):(O[3]=d/(6*v)+E,O[4]=v)),O}function rue(e,t){let i=0,s=0,u=0;e.nextPoint();const d=e.pathSize?e.x:0,y=e.pathSize?e.y:0;for(let v=0;v<e.pathSize;v++){e.seekInPath(v);const _=[e.x,e.y];e.seekInPath((v+1)%e.pathSize);const M=[e.x,e.y],[E,O]=_,C=E-d,R=O-y,[L,G]=M,U=L-d,K=G-y,ee=C*K-U*R;u+=ee,i+=(C+U)*ee,s+=(R+K)*ee,E<t[0]&&(t[0]=E),E>t[1]&&(t[1]=E),O<t[2]&&(t[2]=O),O>t[3]&&(t[3]=O)}return u>0&&(u*=-1),u?(u*=.5,[i/(6*u)+d,s/(6*u)+y,u]):null}function SF(e,t){const i=t?[0,0,0]:[0,0],s=t?[0,0,0]:[0,0];let u=0,d=0,y=0,v=0;for(let _=0,M=e.length;_<M-1;_++){const E=e[_],O=e[_+1];if(E&&O){i[0]=E[0],i[1]=E[1],s[0]=O[0],s[1]=O[1],t&&E.length>2&&O.length>2&&(i[2]=E[2],s[2]=O[2]);const C=kT(i,s);if(C){u+=C;const R=AT(E,O);d+=C*R[0],y+=C*R[1],t&&R.length>2&&(v+=C*R[2])}}}return u>0?t?[d/u,y/u,v/u]:[d/u,y/u]:e.length?e[0]:null}function $F(e){const{hasZ:t,totalSize:i}=e;if(i===0)return null;const s=[],u=[],d=t?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(e.reset();e.nextPath();){const y=PT(yF(e),e.hasZ,d);y&&u.push(y)}if(u.sort((y,v)=>{let _=y[2]-v[2];return _===0&&t&&(_=y[4]-v[4]),_}),u.length&&(s[0]=u[0][0],s[1]=u[0][1],t&&(s[2]=u[0][3]),(s[0]<d[0]||s[0]>d[1]||s[1]<d[2]||s[1]>d[3]||t&&(s[2]<d[4]||s[2]>d[5]))&&(s.length=0)),!s.length){e.reset(),e.nextPath();const y=e.pathSize?TF(e):null;if(!y)return null;s[0]=y[0],s[1]=y[1],t&&y.length>2&&(s[2]=y[2])}return s}function TF(e){const{hasZ:t}=e,i=t?[0,0,0]:[0,0],s=t?[0,0,0]:[0,0];let u=0,d=0,y=0,v=0;if(e.nextPoint()){let _=e.x,M=e.y,E=e.z;for(;e.nextPoint();){const O=e.x,C=e.y,R=e.z;i[0]=_,i[1]=M,s[0]=O,s[1]=C,t&&(i[2]=E,s[2]=R);const L=kT(i,s);if(L){u+=L;const G=AT(i,s);d+=L*G[0],y+=L*G[1],t&&G.length>2&&(v+=L*G[2])}_=O,M=C,E=R}}return u>0?t?[d/u,y/u,v/u]:[d/u,y/u]:e.pathSize?(e.seekPathStart(),e.nextPoint(),[e.x,e.y]):null}const MF=1e-6;function sue(e){let t=0;for(e.reset();e.nextPath();)t+=e.getCurrentRingArea();if(t<MF){const u=$F(e);return u?[u[0],u[1]]:null}const i=[0,0];if(e.reset(),!e.nextPath()||!e.nextPoint())return null;const s=[e.x,e.y];for(e.reset();e.nextPath();)EF(i,s,e);return i[0]*=1/t,i[1]*=1/t,i[0]+=s[0],i[1]+=s[1],i}const IF=1/3;function EF(e,t,i){if(!e||!i||i.pathSize<3)return null;i.nextPoint();const s=i.x,u=i.y;i.nextPoint();let d,y=i.x-s,v=i.y-u,_=0,M=0;for(;i.nextPoint();)_=i.x-s,M=i.y-u,d=.5*IF*(_*v-M*y),e[0]+=d*(y+_),e[1]+=d*(v+M),y=_,v=M;const E=i.getCurrentRingArea(),O=[s,u];return O[0]-=t[0],O[1]-=t[1],O[0]*=E,O[1]*=E,e[0]+=O[0],e[1]+=O[1],e}function _n(e=PF){return[e[0],e[1],e[2],e[3]]}function nue(e){return[e[0],e[1],e[2],e[3]]}function CT(e,t){return e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),e}function oue(e,t,i,s,u=_n()){return u[0]=e,u[1]=t,u[2]=i,u[3]=s,u}function aue(e,t=_n()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function lue(e,t){return new Tt({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function uue(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function hue(e,t,i){if(t!=null)if("length"in t)Bv(t)?(i[0]=Math.min(e[0],t[0]),i[1]=Math.min(e[1],t[1]),i[2]=Math.max(e[2],t[2]),i[3]=Math.max(e[3],t[3])):t.length!==2&&t.length!==3||(i[0]=Math.min(e[0],t[0]),i[1]=Math.min(e[1],t[1]),i[2]=Math.max(e[2],t[0]),i[3]=Math.max(e[3],t[1]));else switch(t.type){case"extent":i[0]=Math.min(e[0],t.xmin),i[1]=Math.min(e[1],t.ymin),i[2]=Math.max(e[2],t.xmax),i[3]=Math.max(e[3],t.ymax);break;case"point":i[0]=Math.min(e[0],t.x),i[1]=Math.min(e[1],t.y),i[2]=Math.max(e[2],t.x),i[3]=Math.max(e[3],t.y)}else CT(i,e)}function kF(e){return e==null||e[0]>=e[2]?0:e[2]-e[0]}function AF(e){return e==null||e[1]>=e[3]?0:e[3]-e[1]}function cue(e){return kF(e)*AF(e)}function pue(e,t,i){return t>=e[0]&&i>=e[1]&&t<=e[2]&&i<=e[3]}function due(e,t,i){return t[0]>=e[0]-i&&t[1]>=e[1]-i&&t[0]<=e[2]+i&&t[1]<=e[3]+i}function fue(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function OF(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function yue(e){return e?CT(e,Q6):_n(Q6)}function Bv(e){return e!=null&&e.length===4}function mue(e,t){return Bv(e)&&Bv(t)?e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]:e===t}const Q6=[1/0,1/0,-1/0,-1/0],PF=[0,0,0,0];function jT(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function NT(e){return e.points!==void 0}function RT(e){return e.x!==void 0&&e.y!==void 0}function LT(e){return e.paths!==void 0}function DT(e){return e.rings!==void 0}function FT(e){function t(i,s){return i==null?s:s==null?i:e(i,s)}return t}const da=FT(Math.min),fa=FT(Math.max);function gue(e,t){return LT(t)?lc(e,t.paths,!1,!1):DT(t)?lc(e,t.rings,!1,!1):NT(t)?d5(e,t.points,!1,!1,!1,!1):jT(t)?zT(e,t):(RT(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)}function vue(e){let t,i,s,u;for(e.reset(),t=s=1/0,i=u=-1/0;e.nextPath();){const d=CF(e);t=Math.min(d[0],t),s=Math.min(d[1],s),i=Math.max(d[2],i),u=Math.max(d[3],u)}return _n([t,s,i,u])}function CF(e){let t,i,s,u;for(t=s=1/0,i=u=-1/0;e.nextPoint();)t=Math.min(e.x,t),s=Math.min(e.y,s),i=Math.max(e.x,i),u=Math.max(e.y,u);return _n([t,s,i,u])}function wue(e,t){return LT(t)?lc(e,t.paths,!0,!1):DT(t)?lc(e,t.rings,!0,!1):NT(t)?d5(e,t.points,!0,!1,!0,!1):jT(t)?zT(e,t,!0,!1,!0,!1):(RT(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)}function lc(e,t,i,s){const u=i?3:2;if(!t.length||!t[0].length)return null;let d,y,v,_,[M,E]=t[0][0],[O,C]=t[0][0];for(let R=0;R<t.length;R++){const L=t[R];for(let G=0;G<L.length;G++){const U=L[G],[K,ee]=U;if(M=da(M,K),E=da(E,ee),O=fa(O,K),C=fa(C,ee),i&&U.length>2){const Q=U[2];d=da(d,Q),y=fa(y,Q)}if(s&&U.length>u){const Q=U[u];v=da(d,Q),_=fa(y,Q)}}}return i?s?(e[0]=M,e[1]=E,e[2]=d,e[3]=v,e[4]=O,e[5]=C,e[6]=y,e[7]=_,e.length=8,e):(e[0]=M,e[1]=E,e[2]=d,e[3]=O,e[4]=C,e[5]=y,e.length=6,e):s?(e[0]=M,e[1]=E,e[2]=v,e[3]=O,e[4]=C,e[5]=_,e.length=6,e):(e[0]=M,e[1]=E,e[2]=O,e[3]=C,e.length=4,e)}function zT(e,t,i,s,u,d){const y=t.xmin,v=t.xmax,_=t.ymin,M=t.ymax;let E=t.zmin,O=t.zmax,C=t.mmin,R=t.mmax;return u?(E=E||0,O=O||0,d?(C=C||0,R=R||0,e[0]=y,e[1]=_,e[2]=E,e[3]=C,e[4]=v,e[5]=M,e[6]=O,e[7]=R,e):(e[0]=y,e[1]=_,e[2]=E,e[3]=v,e[4]=M,e[5]=O,e)):d?(C=C||0,R=R||0,e[0]=y,e[1]=_,e[2]=C,e[3]=v,e[4]=M,e[5]=R,e):(e[0]=y,e[1]=_,e[2]=v,e[3]=M,e)}function d5(e,t,i,s,u,d){const y=i?3:2,v=s&&d,_=i&&u;if(!t.length||!t[0].length)return null;let M,E,O,C,[R,L]=t[0],[G,U]=t[0];for(let K=0;K<t.length;K++){const ee=t[K],[Q,re]=ee;if(R=da(R,Q),L=da(L,re),G=fa(G,Q),U=fa(U,re),_&&ee.length>2){const ne=ee[2];M=da(M,ne),E=fa(E,ne)}if(v&&ee.length>y){const ne=ee[y];O=da(M,ne),C=fa(E,ne)}}return u?(M=M||0,E=E||0,d?(O=O||0,C=C||0,e[0]=R,e[1]=L,e[2]=M,e[3]=O,e[4]=G,e[5]=U,e[6]=E,e[7]=C,e):(e[0]=R,e[1]=L,e[2]=M,e[3]=G,e[4]=U,e[5]=E,e)):d?(O=O||0,C=C||0,e[0]=R,e[1]=L,e[2]=O,e[3]=G,e[4]=U,e[5]=C,e):(e[0]=R,e[1]=L,e[2]=G,e[3]=U,e)}function jF(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function NF(e){return e.points!==void 0}function RF(e){return e.x!==void 0&&e.y!==void 0}function LF(e){return e.paths!==void 0}function DF(e){return e.rings!==void 0}const f5=[];function VT(e,t,i,s){return{xmin:e,ymin:t,xmax:i,ymax:s}}function GT(e,t,i,s,u,d){return{xmin:e,ymin:t,zmin:i,xmax:s,ymax:u,zmax:d}}function qT(e,t,i,s,u,d){return{xmin:e,ymin:t,mmin:i,xmax:s,ymax:u,mmax:d}}function UT(e,t,i,s,u,d,y,v){return{xmin:e,ymin:t,zmin:i,mmin:s,xmax:u,ymax:d,zmax:y,mmax:v}}function y5(e,t=!1,i=!1){return t?i?UT(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):GT(e[0],e[1],e[2],e[3],e[4],e[5]):i?qT(e[0],e[1],e[2],e[3],e[4],e[5]):VT(e[0],e[1],e[2],e[3])}function bue(e){return e?jF(e)?e:RF(e)?zF(e):DF(e)?BT(e):LF(e)?HT(e):NF(e)?FF(e):null:null}function FF(e){const{hasZ:t,hasM:i,points:s}=e;return y5(d5(f5,s,t??!1,i??!1),t,i)}function zF(e){const{x:t,y:i,z:s,m:u}=e,d=u!=null;return s!=null?d?UT(t,i,s,u,t,i,s,u):GT(t,i,s,t,i,s):d?qT(t,i,u,t,i,u):VT(t,i,t,i)}function BT(e){const{hasZ:t,hasM:i,rings:s}=e,u=lc(f5,s,t??!1,i??!1);return u?y5(u,t,i):null}function HT(e){const{hasZ:t,hasM:i,paths:s}=e,u=lc(f5,s,t??!1,i??!1);return u?y5(u,t,i):null}var Ff;function e_(e){return!Array.isArray(e[0])}let Zs=Ff=class extends Ca{static fromExtent(e){const t=e.clone().normalize(),i=e.spatialReference;let s=!1,u=!1;for(const y of t)y.hasZ&&(s=!0),y.hasM&&(u=!0);const d={rings:t.map(y=>{const v=[[y.xmin,y.ymin],[y.xmin,y.ymax],[y.xmax,y.ymax],[y.xmax,y.ymin],[y.xmin,y.ymin]];if(s&&y.hasZ){const _=y.zmin+.5*(y.zmax-y.zmin);for(let M=0;M<v.length;M++)v[M].push(_)}if(u&&y.hasM){const _=y.mmin+.5*(y.mmax-y.mmin);for(let M=0;M<v.length;M++)v[M].push(_)}return v}),spatialReference:i};return s&&(d.hasZ=!0),u&&(d.hasM=!0),new Ff(d)}constructor(...e){super(...e),this.rings=[],this.type="polygon"}normalizeCtorArgs(e,t){var y,v;let i,s,u=null,d=null;return e&&!Array.isArray(e)?(u=e.rings??null,t||(e.spatialReference?t=e.spatialReference:e.rings||(t=e)),i=e.hasZ,s=e.hasM):u=e,u=u||[],t=t||He.WGS84,u.length&&((y=u[0])==null?void 0:y[0])!=null&&typeof u[0][0]=="number"&&(u=[u]),d=(v=u[0])==null?void 0:v[0],d&&(i===void 0&&s===void 0?(i=d.length>2,s=d.length>3):i===void 0?i=s?d.length>3:d.length>2:s===void 0&&(s=i?d.length>3:d.length>2)),{rings:u,spatialReference:t,hasZ:i,hasM:s}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const e=_F(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;const t=new Je;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t}get extent(){const{spatialReference:e}=this,t=BT(this);if(!t)return null;const i=new Tt(t);return i.spatialReference=e,i}get isSelfIntersecting(){return cF(this.rings)}writeRings(e,t){t.rings=ie(this.rings)}addRing(e){if(!e)return;const t=this.rings,i=t.length;if(e_(e)){const s=[];for(let u=0,d=e.length;u<d;u++)s[u]=e[u].toArray();t[i]=s}else t[i]=e.concat();return this.notifyChange("rings"),this}clone(){const e=new Ff;return e.spatialReference=this.spatialReference,e.rings=ie(this.rings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,i=e.spatialReference;if(t!=null!=(i!=null)||t!=null&&i!=null&&!t.equals(i)||this.rings.length!==e.rings.length)return!1;const s=([u,d,y,v],[_,M,E,O])=>u===_&&d===M&&(y==null&&E==null||y===E)&&(v==null&&O==null||v===O);for(let u=0;u<this.rings.length;u++){const d=this.rings[u],y=e.rings[u];if(!am(d,y,s))return!1}return!0}contains(e){if(!e)return!1;const t=xm(e,this.spatialReference);return TT(this,t??e)}isClockwise(e){let t;return t=e_(e)?e.map(i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y]):e,OT(t)}getPoint(e,t){if(!this._validateInputs(e,t))return null;const i=this.rings[e][t],s=this.hasZ,u=this.hasM;return s&&!u?new Je(i[0],i[1],i[2],void 0,this.spatialReference):u&&!s?new Je(i[0],i[1],void 0,i[2],this.spatialReference):s&&u?new Je(i[0],i[1],i[2],i[3],this.spatialReference):new Je(i[0],i[1],this.spatialReference)}insertPoint(e,t,i){return this._validateInputs(e,t,!0)?(ac(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[e].splice(t,0,i),this.notifyChange("rings"),this):this}removePoint(e,t){if(!this._validateInputs(e,t))return null;const i=new Je(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(e){if(!this._validateInputs(e,null))return null;const t=this.rings.splice(e,1)[0],i=this.spatialReference,s=t.map(u=>new Je(u,i));return this.notifyChange("rings"),s}setPoint(e,t,i){return this._validateInputs(e,t)?(ac(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[e][t]=i,this.notifyChange("rings"),this):this}_validateInputs(e,t,i=!1){if(e==null||e<0||e>=this.rings.length)return!1;if(t!=null){const s=this.rings[e];if(i&&(t<0||t>s.length)||!i&&(t<0||t>=s.length))return!1}return!0}toJSON(e){return this.write({},e)}};w([S({readOnly:!0})],Zs.prototype,"cache",null),w([S({readOnly:!0})],Zs.prototype,"centroid",null),w([S({readOnly:!0})],Zs.prototype,"extent",null),w([S({readOnly:!0})],Zs.prototype,"isSelfIntersecting",null),w([S({type:[[[Number]]],json:{write:{isRequired:!0}}})],Zs.prototype,"rings",void 0),w([_e("rings")],Zs.prototype,"writeRings",null),Zs=Ff=w([B("esri.geometry.Polygon")],Zs),Zs.prototype.toJSON.isDefaultToJSON=!0;const po=Zs;var Hv;function VF(e){return!Array.isArray(e[0])}let Co=Hv=class extends Ca{constructor(...e){super(...e),this.paths=[],this.type="polyline"}normalizeCtorArgs(e,t){var y,v;let i,s,u=null,d=null;return e&&!Array.isArray(e)?(u=e.paths??null,t||(e.spatialReference?t=e.spatialReference:e.paths||(t=e)),i=e.hasZ,s=e.hasM):u=e,u=u||[],t=t||He.WGS84,u.length&&((y=u[0])==null?void 0:y[0])!=null&&typeof u[0][0]=="number"&&(u=[u]),d=(v=u[0])==null?void 0:v[0],d&&(i===void 0&&s===void 0?(i=d.length>2,s=!1):i===void 0?i=!s&&d.length>3:s===void 0&&(s=!i&&d.length>3)),{paths:u,spatialReference:t,hasZ:i,hasM:s}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:e}=this,t=HT(this);if(!t)return null;const i=new Tt(t);return i.spatialReference=e,i}writePaths(e,t){t.paths=ie(this.paths)}addPath(e){if(!e)return;const t=this.paths,i=t.length;if(VF(e)){const s=[];for(let u=0,d=e.length;u<d;u++)s[u]=e[u].toArray();t[i]=s}else t[i]=e.concat();return this.notifyChange("paths"),this}clone(){const e=new Hv;return e.spatialReference=this.spatialReference,e.paths=ie(this.paths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}getPoint(e,t){if(!this._validateInputs(e,t))return null;const i=this.paths[e][t],s=this.hasZ,u=this.hasM;return s&&!u?new Je(i[0],i[1],i[2],void 0,this.spatialReference):u&&!s?new Je(i[0],i[1],void 0,i[2],this.spatialReference):s&&u?new Je(i[0],i[1],i[2],i[3],this.spatialReference):new Je(i[0],i[1],this.spatialReference)}insertPoint(e,t,i){return this._validateInputs(e,t,!0)?(ac(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[e].splice(t,0,i),this.notifyChange("paths"),this):this}removePath(e){if(!this._validateInputs(e,null))return null;const t=this.paths.splice(e,1)[0],i=this.spatialReference,s=t.map(u=>new Je(u,i));return this.notifyChange("paths"),s}removePoint(e,t){if(!this._validateInputs(e,t))return null;const i=new Je(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(e,t,i){return this._validateInputs(e,t)?(ac(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[e][t]=i,this.notifyChange("paths"),this):this}_validateInputs(e,t,i=!1){if(e==null||e<0||e>=this.paths.length)return!1;if(t!=null){const s=this.paths[e];if(i&&(t<0||t>s.length)||!i&&(t<0||t>=s.length))return!1}return!0}toJSON(e){return this.write({},e)}};w([S({readOnly:!0})],Co.prototype,"cache",null),w([S({readOnly:!0})],Co.prototype,"extent",null),w([S({type:[[[Number]]],json:{write:{isRequired:!0}}})],Co.prototype,"paths",void 0),w([_e("paths")],Co.prototype,"writePaths",null),Co=Hv=w([B("esri.geometry.Polyline")],Co),Co.prototype.toJSON.isDefaultToJSON=!0;const Cs=Co,GF=Ji()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),t_=Ji()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});function WT(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function JT(e){return e.points!==void 0}function KT(e){return e.x!==void 0&&e.y!==void 0}function ZT(e){return e.paths!==void 0}function Uh(e){return e.rings!==void 0}function $a(e){return e==null?null:e instanceof Ca?e:KT(e)?Je.fromJSON(e):ZT(e)?Cs.fromJSON(e):Uh(e)?po.fromJSON(e):JT(e)?$m.fromJSON(e):WT(e)?Tt.fromJSON(e):null}function m5(e){return e?KT(e)?"esriGeometryPoint":ZT(e)?"esriGeometryPolyline":Uh(e)?"esriGeometryPolygon":WT(e)?"esriGeometryEnvelope":JT(e)?"esriGeometryMultipoint":null:null}const qF={esriGeometryPoint:Je,esriGeometryPolyline:Cs,esriGeometryPolygon:po,esriGeometryEnvelope:Tt,esriGeometryMultipoint:$m};function UF(e){return e&&qF[e]||null}const Eu={base:Ca,key:"type",typeMap:{extent:Tt,multipoint:$m,point:Je,polyline:Cs,polygon:po}};wn(Eu);var Wv;let jo=Wv=class extends pe{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new Wv({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};function Gg(){return{enabled:!this.camera}}w([S({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:Gg}}}}})],jo.prototype,"rotation",void 0),w([mt("rotation")],jo.prototype,"castRotation",null),w([S({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:Gg}}}}})],jo.prototype,"scale",void 0),w([S({types:Eu,json:{read:$a,write:!0,origins:{"web-scene":{read:$a,write:{overridePolicy:Gg}}}}})],jo.prototype,"targetGeometry",void 0),w([S({type:QD,json:{write:!0}})],jo.prototype,"camera",void 0),jo=Wv=w([B("esri.Viewpoint")],jo);const vn=jo;let zf=class YT{constructor(){this._emitter=new YT.EventEmitter(this)}emit(t,i){return this._emitter.emit(t,i)}on(t,i){return this._emitter.on(t,i)}once(t,i){return this._emitter.once(t,i)}hasEventListener(t){return this._emitter.hasEventListener(t)}};(function(e){class t{constructor(u=null){this._target=u,this._listenersMap=null}clear(){var u;(u=this._listenersMap)==null||u.clear(),this._listenersMap=null}destroy(){this.clear()}emit(u,d){var M;let y=(M=this._listenersMap)==null?void 0:M.get(u);if(!y)return!1;const v=this._target||this;let _=!1;for(const E of y.slice()){const O="deref"in E?E.deref():E;O?O==null||O.call(v,d):_=!0}return _&&(y=y.filter(E=>!("deref"in E)||E.deref()!=null),this._listenersMap.set(u,y)),y.length>0}on(u,d){if(Array.isArray(u)){const v=u.map(_=>this.on(_,d));return Zp(v)}if(u.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??(this._listenersMap=new Map);const y=this._listenersMap.get(u)||[];return y.push(d),this._listenersMap.set(u,y),Et(()=>{var M;const v=(M=this._listenersMap)==null?void 0:M.get(u),_=(v==null?void 0:v.indexOf(d))??-1;_>=0&&v.splice(_,1)})}once(u,d){const y=this.on(u,v=>{y.remove();const _="deref"in d?d.deref():d;_==null||_.call(null,v)});return y}hasEventListener(u){var y;const d=(y=this._listenersMap)==null?void 0:y.get(u);return d!=null&&d.length>0}}e.EventEmitter=t,e.EventedMixin=s=>{let u=class extends s{constructor(){super(...arguments),this._emitter=new t}destroy(){this._emitter.clear()}emit(d,y){return this._emitter.emit(d,y)}on(d,y){return this._emitter.on(d,y)}once(d,y){return this._emitter.once(d,y)}hasEventListener(d){return this._emitter.hasEventListener(d)}};return u=w([B("esri.core.Evented")],u),u};let i=class extends Ne{constructor(){super(...arguments),this._emitter=new zf.EventEmitter(this)}destroy(){this._emitter.clear()}emit(s,u){return this._emitter.emit(s,u)}on(s,u){return this._emitter.on(s,u)}once(s,u){return this._emitter.once(s,u)}hasEventListener(s){return this._emitter.hasEventListener(s)}};i=w([B("esri.core.Evented")],i),e.EventedAccessor=i})(zf||(zf={}));const ja=zf;var dt;(function(e){e[e.ADD=1]="ADD",e[e.REMOVE=2]="REMOVE",e[e.MOVE=4]="MOVE"})(dt||(dt={}));function g5(e){return(t,i)=>{t[i]=e}}let rd=class extends LS{notify(){const t=this._observers;if(t&&t.length>0){const i=t.slice();for(const s of i)s.onInvalidated(),s.onCommitted()}}};var ro;let BF=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(t){this.defaultPrevented=!1,this.item=t}},HF=class{constructor(t,i,s,u,d){this.target=t,this.added=i,this.removed=s,this.start=u,this.deleteCount=d}};const Dr=new Tu(BF,void 0,e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1});function qg(e){return e?e instanceof Nl?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function Ug(e){if(e!=null&&e.length)return e[0]}function WF(e,t,i,s){const u=Math.min(e.length-i,t.length-s);let d=0;for(;d<u&&e[i+d]===t[s+d];)d++;return d}function XT(e,t,i,s){t&&t.forEach((u,d,y)=>{e.push(u),XT(e,i.call(s,u,d,y),i,s)})}const xo=new Set,So=new Set,$o=new Set,Bg=new Map;let JF=0,Nl=ro=class extends ja.EventedAccessor{static isCollection(e){return e!=null&&e instanceof ro}constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new rd,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:JF++})}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof ro?{items:e}:e:{}}destroy(){this._removeAllRaw()}*[Symbol.iterator](){yield*this.items}get items(){return Pe(this._observable),this._items}set items(e){this._emitBeforeChanges(dt.ADD)||(this._splice(0,this.length,qg(e)),this._emitAfterChanges(dt.ADD))}hasEventListener(e){return e==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(e)}on(e,t){if(e==="change"){const i=this._chgListeners,s={removed:!1,callback:t};return i.push(s),this._notifications&&this._notifications.push({listeners:i.slice(),items:this._items.slice(),changes:[]}),Et(()=>{s.removed=!0,i.splice(i.indexOf(s),1)})}return this._emitter.on(e,t)}once(e,t){const i="deref"in t?()=>t.deref():()=>t,s=this.on(e,u=>{var d;(d=i())==null||d.call(null,u),s.remove()});return s}add(e,t){if(Pe(this._observable),this._emitBeforeChanges(dt.ADD))return this;const i=this.getNextIndex(t??null);return this._splice(i,0,[e]),this._emitAfterChanges(dt.ADD),this}addMany(e,t=this._items.length){if(Pe(this._observable),!(e!=null&&e.length))return this;if(this._emitBeforeChanges(dt.ADD))return this;const i=this.getNextIndex(t);return this._splice(i,0,qg(e)),this._emitAfterChanges(dt.ADD),this}at(e){if(Pe(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(Pe(this._observable),!this.length||this._emitBeforeChanges(dt.REMOVE))return[];const e=this._removeAllRaw();return this._emitAfterChanges(dt.REMOVE),e}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return Pe(this._observable),this._createNewInstance({items:this._items.map(ie)})}concat(...e){Pe(this._observable);const t=e.map(qg);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(Pe(this._observable),!this.length||this._emitBeforeChanges(dt.REMOVE))return;const i=this._splice(0,this.length),s=i.length;for(let u=0;u<s;u++)e.call(t,i[u],u,i);this._emitAfterChanges(dt.REMOVE)}every(e,t){return Pe(this._observable),this._items.every(e,t)}filter(e,t){let i;return Pe(this._observable),i=arguments.length===2?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:i})}find(e,t){return Pe(this._observable),this._items.find(e,t)}findIndex(e,t){return Pe(this._observable),this._items.findIndex(e,t)}flatten(e,t){Pe(this._observable);const i=[];return XT(i,this,e,t),new ro(i)}forEach(e,t){return Pe(this._observable),this._items.forEach(e,t)}getItemAt(e){return Pe(this._observable),this._items[e]}getNextIndex(e){Pe(this._observable);const t=this.length;return(e=e??t)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return Pe(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return Pe(this._observable),this._items.indexOf(e,t)}join(e=","){return Pe(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return Pe(this._observable),this._items.lastIndexOf(e,t)}map(e,t){Pe(this._observable);const i=this._items.map(e,t);return new ro({items:i})}reorder(e,t=this.length-1){Pe(this._observable);const i=this.indexOf(e);if(i!==-1){if(t<0?t=0:t>=this.length&&(t=this.length-1),i!==t){if(this._emitBeforeChanges(dt.MOVE))return e;this._splice(i,1),this._splice(t,0,[e]),this._emitAfterChanges(dt.MOVE)}return e}}pop(){if(Pe(this._observable),!this.length||this._emitBeforeChanges(dt.REMOVE))return;const e=Ug(this._splice(this.length-1,1));return this._emitAfterChanges(dt.REMOVE),e}push(...e){return Pe(this._observable),this._emitBeforeChanges(dt.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges(dt.ADD)),this.length}reduce(e,t){Pe(this._observable);const i=this._items;return arguments.length===2?i.reduce(e,t):i.reduce(e)}reduceRight(e,t){Pe(this._observable);const i=this._items;return arguments.length===2?i.reduceRight(e,t):i.reduceRight(e)}remove(e){return Pe(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(Pe(this._observable),e<0||e>=this.length||this._emitBeforeChanges(dt.REMOVE))return;const t=Ug(this._splice(e,1));return this._emitAfterChanges(dt.REMOVE),t}removeMany(e){if(Pe(this._observable),!(e!=null&&e.length)||this._emitBeforeChanges(dt.REMOVE))return[];const t=e instanceof ro?e.toArray():e,i=this._items,s=[],u=t.length;for(let d=0;d<u;d++){const y=t[d],v=i.indexOf(y);if(v>-1){const _=1+WF(t,i,d+1,v+1),M=this._splice(v,_);M&&M.length>0&&s.push.apply(s,M),d+=_-1}}return this._emitAfterChanges(dt.REMOVE),s}reverse(){if(Pe(this._observable),this._emitBeforeChanges(dt.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(dt.MOVE),this}shift(){if(Pe(this._observable),!this.length||this._emitBeforeChanges(dt.REMOVE))return;const e=Ug(this._splice(0,1));return this._emitAfterChanges(dt.REMOVE),e}slice(e=0,t=this.length){return Pe(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return Pe(this._observable),this._items.some(e,t)}sort(e){if(Pe(this._observable),!this.length||this._emitBeforeChanges(dt.MOVE))return this;const t=this._splice(0,this.length);return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges(dt.MOVE),this}splice(e,t,...i){Pe(this._observable);const s=(t?dt.REMOVE:0)|(i.length?dt.ADD:0);if(this._emitBeforeChanges(s))return[];const u=this._splice(e,t,i)||[];return this._emitAfterChanges(s),u}toArray(){return Pe(this._observable),this._items.slice()}toJSON(){return Pe(this._observable),this.toArray()}toLocaleString(){return Pe(this._observable),this._items.toLocaleString()}toString(){return Pe(this._observable),this._items.toString()}unshift(...e){return Pe(this._observable),!e.length||this._emitBeforeChanges(dt.ADD)||(this._splice(0,0,e),this._emitAfterChanges(dt.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,i){const s=this._items,u=this.itemType;let d,y;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=gc(()=>this._dispatchChange())),e<0&&(e+=this.length),t){if(y=s.splice(e,t),this.hasEventListener("before-remove")){const v=Dr.acquire();v.target=this,v.cancellable=!0;for(let _=0,M=y.length;_<M;_++)d=y[_],v.reset(d),this.emit("before-remove",v),v.defaultPrevented&&(y.splice(_,1),s.splice(e,0,d),e+=1,_-=1,M-=1);Dr.release(v)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const v=Dr.acquire();v.target=this,v.cancellable=!1;const _=y.length;for(let M=0;M<_;M++)v.reset(y[M]),this.emit("after-remove",v);Dr.release(v)}}if(i!=null&&i.length){if(u){const E=[];for(const O of i){const C=u.ensureType(O);C==null&&O!=null||E.push(C)}i=E}const v=this.hasEventListener("before-add"),_=this.hasEventListener("after-add"),M=e===this.length;if(v||_){const E=Dr.acquire();E.target=this,E.cancellable=!0;const O=Dr.acquire();O.target=this,O.cancellable=!1;for(const C of i)v?(E.reset(C),this.emit("before-add",E),E.defaultPrevented||(M?s.push(C):s.splice(e++,0,C),this._set("length",s.length),_&&(O.reset(C),this.emit("after-add",O)))):(M?s.push(C):s.splice(e++,0,C),this._set("length",s.length),O.reset(C),this.emit("after-add",O));Dr.release(O),Dr.release(E)}else{if(M)for(const E of i)s.push(E);else s.splice(e,0,...i);this._set("length",s.length)}}if((i!=null&&i.length||y!=null&&y.length)&&this._notifyChangeEvent(i,y),this.hasEventListener("after-splice")){const v=new HF(this,i,y,e,t);this.emit("after-splice",v)}return y}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const i=Dr.acquire();i.target=this,i.cancellable=!0,i.type=e,this.emit("before-changes",i),t=i.defaultPrevented,Dr.release(i)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=Dr.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),Dr.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const i=t.changes;xo.clear(),So.clear(),$o.clear();for(const{added:_,removed:M}of i){if(_)if($o.size===0&&So.size===0)for(const E of _)xo.add(E);else for(const E of _)So.has(E)?($o.add(E),So.delete(E)):$o.has(E)||xo.add(E);if(M)if($o.size===0&&xo.size===0)for(const E of M)So.add(E);else for(const E of M)xo.has(E)?xo.delete(E):($o.delete(E),So.add(E))}const s=tr.acquire();xo.forEach(_=>{s.push(_)});const u=tr.acquire();So.forEach(_=>{u.push(_)});const d=this._items,y=t.items,v=tr.acquire();if($o.forEach(_=>{y.indexOf(_)!==d.indexOf(_)&&v.push(_)}),t.listeners&&(s.length||u.length||v.length)){const _={target:this,added:s,removed:u,moved:v},M=t.listeners.length;for(let E=0;E<M;E++){const O=t.listeners[E];O.removed||O.callback.call(this,_)}}tr.release(s),tr.release(u),tr.release(v)}xo.clear(),So.clear(),$o.clear()}};Nl.ofType=e=>{if(!e)return ro;if(Bg.has(e))return Bg.get(e);let t=null;if(typeof e=="function")t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(const s in e.typeMap){const u=e.typeMap[s].prototype.declaredClass;t?t+=` | ${u}`:t=u}let i=class extends ro{};return w([g5({Type:e,ensureType:typeof e=="function"?ei(e):wn(e)})],i.prototype,"itemType",void 0),i=w([B(`esri.core.Collection<${t}>`)],i),Bg.set(e,i),i},w([S()],Nl.prototype,"length",void 0),w([S()],Nl.prototype,"items",null),Nl=ro=w([B("esri.core.Collection")],Nl);const Oe=Nl;function $ue(e,t,i){return fm(e.map((s,u)=>t.apply(i,[s,u])))}async function KF(e,t,i){return(await fm(e.map((s,u)=>t.apply(i,[s,u])))).map(s=>s.value)}function v5(e){return{ok:!0,value:e}}function w5(e){return{ok:!1,error:e}}function ZF(e){return e!=null&&e.ok===!0?e.value:null}function YF(e){return e!=null&&e.ok===!1?e.error:null}async function Tm(e){if(e==null)return{ok:!1,error:new Error("no promise provided")};try{return v5(await e)}catch(t){return w5(t)}}async function XF(e){try{return v5(await e)}catch(t){return yn(t),w5(t)}}function b5(e,t){return new No(e,t)}let No=class extends Ne{get value(){return ZF(this._result)}get error(){return YF(this._result)}get finished(){return this._result!=null}constructor(t,i){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=bp(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:s}=this._abortController;this.promise=t(s),this.promise.then(u=>{this._result=v5(u),this._cleanup()},u=>{this._result=w5(u),this._cleanup()}),this._abortHandle=Rs(i,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=Kt(this._abortHandle),this._abortController=null}};w([S()],No.prototype,"value",null),w([S()],No.prototype,"error",null),w([S()],No.prototype,"finished",null),w([S()],No.prototype,"promise",void 0),w([S()],No.prototype,"_result",void 0),No=w([B("esri.core.asyncUtils.ReactiveTask")],No);let Yu=class extends Oe{constructor(t){super(t),this.getCollections=null}initialize(){this.addHandles(e$(()=>this._refresh()))}destroy(){this.getCollections=null}_refresh(){const t=this.getCollections!=null?this.getCollections():null;if(t==null)return void this.removeAll();let i=0;for(const s of t)s!=null&&(i=this._processCollection(i,s));this.splice(i,this.length)}_createNewInstance(t){return new Oe(t)}_processCollection(t,i){if(!i)return t;const s=this.itemFilterFunction??(u=>!!u);for(const u of i)if(u){if(s(u)){const d=this.indexOf(u,t);d>=0?d!==t&&this.reorder(u,t):this.add(u,t),++t}if(this.getChildrenFunction){const d=this.getChildrenFunction(u);if(Array.isArray(d))for(const y of d)t=this._processCollection(t,y);else t=this._processCollection(t,d)}}return t}};w([S()],Yu.prototype,"getCollections",void 0),w([S()],Yu.prototype,"getChildrenFunction",void 0),w([S()],Yu.prototype,"itemFilterFunction",void 0),Yu=w([B("esri.core.CollectionFlattener")],Yu);const Ep=Yu;function Ge(e,t,i={}){return _5(e,t,i,QT)}function yu(e,t,i={}){return _5(e,t,i,eM)}function _5(e,t,i={},s){let u=null;const d=i.once?(y,v)=>{s(y)&&(Kt(u),t(y,v))}:(y,v)=>{s(y)&&t(y,v)};if(u=sN(e,d,i.sync,i.equals),i.initial){const y=e();d(y,y)}return u}function uc(e,t,i,s={}){let u=null,d=null,y=null;function v(){var E;u&&d&&(d.remove(),(E=s.onListenerRemove)==null||E.call(s,u),u=null,d=null)}function _(E){s.once&&s.once&&Kt(y),i(E)}const M=Ge(e,(E,O)=>{var C;v(),pm(E)&&(u=E,d=Qp(E,t,_),(C=s.onListenerAdd)==null||C.call(s,E))},{sync:s.sync,initial:!0});return y=Et(()=>{M.remove(),v()}),y}function Mm(e,t){return QF(e,eM,t)}function QF(e,t,i){if(co(i))return Promise.reject(hi());const s=e();if(t!=null&&t(s))return Promise.resolve(s);let u=null;function d(){u=Kt(u)}return new Promise((y,v)=>{u=Zp([Rs(i,()=>{d(),v(hi())}),_5(e,_=>{d(),y(_)},{sync:!1,once:!0},t??QT)])})}function QT(e){return!0}function eM(e){return!!e}const ku={sync:!0},rr={initial:!0},so={sync:!0,initial:!0};let _y=class{constructor(t=i=>i.values().next().value){this._peeker=t,this._observable=new rd,this._items=new Set}get length(){return Pe(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let t;for(t of this._items);return t}peek(){if(this.length!==0)return this._peeker(this._items)}push(t){this.contains(t)||(this._items.add(t),this._observable.notify())}contains(t){return Pe(this._observable),this._items.has(t)}pop(){if(this.length===0)return;const t=this.peek();return this._items.delete(t),this._observable.notify(),t}popLast(){if(this.length===0)return;const t=this.last();return this._items.delete(t),this._observable.notify(),t}remove(t){this.contains(t)&&(this._items.delete(t),this._observable.notify())}filter(t){const i=this.length;return this._items.forEach(s=>{t(s)||this._items.delete(s)}),i!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){Pe(this._observable),yield*this._items}};const tM=new FinalizationRegistry(e=>{e.close()});function ez(e,t){tM.register(e,t,t)}function tz(e){tM.unregister(e)}const iz={statsWorker:()=>Se(()=>import("./statsWorker-fc631955.js"),["assets/statsWorker-fc631955.js","assets/utils-a0232a33.js","assets/quantizationUtils-b480e172.js","assets/utils-2840c54d.js","assets/generateRendererUtils-a6d51092.js"]),geometryEngineWorker:()=>Se(()=>import("./geometryEngineWorker-92991272.js"),["assets/geometryEngineWorker-92991272.js","assets/geometryEngineJSON-d813aee6.js","assets/json-48e3ea08.js"]),CSVSourceWorker:()=>Se(()=>import("./CSVSourceWorker-f306840b.js"),["assets/CSVSourceWorker-f306840b.js","assets/date-294ce3fb.js","assets/json-48e3ea08.js","assets/OptimizedGeometry-d94e541f.js","assets/FeatureStore-88bcfa4e.js","assets/featureConversionUtils-317e3645.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/BoundsStore-f83876c2.js","assets/PooledRBush-8bf2d479.js","assets/timeSupport-05eb4812.js","assets/projectionSupport-276693a5.js","assets/QueryEngine-bc896278.js","assets/WhereClause-f930ce8b.js","assets/TimeOnly-c5d299c6.js","assets/QueryEngineCapabilities-85c4f1d0.js","assets/quantizationUtils-b480e172.js","assets/utils-a0232a33.js","assets/utils-2840c54d.js","assets/generateRendererUtils-a6d51092.js","assets/RenderState-1d6218ee.js","assets/number-c93cfa6d.js","assets/clientSideDefaults-220b65f4.js"]),EdgeProcessingWorker:()=>Se(()=>import("./EdgeProcessingWorker-df285cfc.js"),["assets/EdgeProcessingWorker-df285cfc.js","assets/InterleavedLayout-e64b6166.js","assets/BufferView-1e3d3831.js","assets/types-1305598a.js","assets/Indices-f4d804b8.js","assets/edgeProcessing-593a0552.js","assets/deduplicate-08a835da.js","assets/VertexAttribute-0e674613.js","assets/enums-bdecffa2.js","assets/VertexElementDescriptor-2925c6af.js"]),ElevationSamplerWorker:()=>Se(()=>import("./ElevationSamplerWorker-2c2d0a85.js"),["assets/ElevationSamplerWorker-2c2d0a85.js","assets/PooledRBush-8bf2d479.js","assets/georeference-a35e298b.js","assets/mat3f64-221ce671.js","assets/mat4f64-1413b4a7.js","assets/spatialReferenceEllipsoidUtils-93490a1b.js","assets/MeshLocalVertexSpace-2db0f4a4.js","assets/MeshGeoreferencedRelativeVertexSpace-b82a6496.js","assets/quat-6f95b589.js","assets/quatf64-3363c48e.js","assets/vec32-78fb89cb.js","assets/BufferView-1e3d3831.js"]),FeatureServiceSnappingSourceWorker:()=>Se(()=>import("./FeatureServiceSnappingSourceWorker-e9bf40bb.js"),["assets/FeatureServiceSnappingSourceWorker-e9bf40bb.js","assets/FeatureStore-88bcfa4e.js","assets/featureConversionUtils-317e3645.js","assets/OptimizedGeometry-d94e541f.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/BoundsStore-f83876c2.js","assets/PooledRBush-8bf2d479.js","assets/timeSupport-05eb4812.js","assets/projectionSupport-276693a5.js","assets/json-48e3ea08.js","assets/QueryEngine-bc896278.js","assets/WhereClause-f930ce8b.js","assets/TimeOnly-c5d299c6.js","assets/QueryEngineCapabilities-85c4f1d0.js","assets/quantizationUtils-b480e172.js","assets/utils-a0232a33.js","assets/utils-2840c54d.js","assets/generateRendererUtils-a6d51092.js","assets/RenderState-1d6218ee.js","assets/pbfQueryUtils-17afc2b2.js","assets/pbf-280c2fba.js","assets/query-e1f4c37d.js","assets/ByteSizeUnit-d4757d40.js"]),GeoJSONSourceWorker:()=>Se(()=>import("./GeoJSONSourceWorker-96e8fe5d.js"),["assets/GeoJSONSourceWorker-96e8fe5d.js","assets/featureConversionUtils-317e3645.js","assets/OptimizedGeometry-d94e541f.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/FeatureStore-88bcfa4e.js","assets/BoundsStore-f83876c2.js","assets/PooledRBush-8bf2d479.js","assets/timeSupport-05eb4812.js","assets/projectionSupport-276693a5.js","assets/json-48e3ea08.js","assets/QueryEngine-bc896278.js","assets/WhereClause-f930ce8b.js","assets/TimeOnly-c5d299c6.js","assets/QueryEngineCapabilities-85c4f1d0.js","assets/quantizationUtils-b480e172.js","assets/utils-a0232a33.js","assets/utils-2840c54d.js","assets/generateRendererUtils-a6d51092.js","assets/RenderState-1d6218ee.js","assets/geojson-206532f5.js","assets/date-294ce3fb.js","assets/clientSideDefaults-220b65f4.js","assets/sourceUtils-8d1b4237.js"]),LercWorker:()=>Se(()=>import("./LercWorker-e0810257.js"),[]),MemorySourceWorker:()=>Se(()=>import("./MemorySourceWorker-7f86c26d.js"),["assets/MemorySourceWorker-7f86c26d.js","assets/featureConversionUtils-317e3645.js","assets/OptimizedGeometry-d94e541f.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/objectIdUtils-789e911a.js","assets/FeatureStore-88bcfa4e.js","assets/BoundsStore-f83876c2.js","assets/PooledRBush-8bf2d479.js","assets/timeSupport-05eb4812.js","assets/projectionSupport-276693a5.js","assets/json-48e3ea08.js","assets/QueryEngine-bc896278.js","assets/WhereClause-f930ce8b.js","assets/TimeOnly-c5d299c6.js","assets/QueryEngineCapabilities-85c4f1d0.js","assets/quantizationUtils-b480e172.js","assets/utils-a0232a33.js","assets/utils-2840c54d.js","assets/generateRendererUtils-a6d51092.js","assets/RenderState-1d6218ee.js","assets/clientSideDefaults-220b65f4.js","assets/sourceUtils-8d1b4237.js","assets/date-294ce3fb.js"]),PBFDecoderWorker:()=>Se(()=>import("./PBFDecoderWorker-c6d58ebf.js"),["assets/PBFDecoderWorker-c6d58ebf.js","assets/featureConversionUtils-317e3645.js","assets/OptimizedGeometry-d94e541f.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/pbfQueryUtils-17afc2b2.js","assets/pbf-280c2fba.js"]),Pipeline:()=>Se(()=>import("./Pipeline-68bb38d1.js"),["assets/Pipeline-68bb38d1.js","assets/featureConversionUtils-317e3645.js","assets/OptimizedGeometry-d94e541f.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/QueryEngine-bc896278.js","assets/WhereClause-f930ce8b.js","assets/TimeOnly-c5d299c6.js","assets/timeSupport-05eb4812.js","assets/projectionSupport-276693a5.js","assets/json-48e3ea08.js","assets/QueryEngineCapabilities-85c4f1d0.js","assets/quantizationUtils-b480e172.js","assets/utils-a0232a33.js","assets/utils-2840c54d.js","assets/generateRendererUtils-a6d51092.js","assets/RenderState-1d6218ee.js","assets/FeatureStore2D-06713483.js","assets/CircularArray-ef508845.js","assets/ComputedAttributeStorage-82dd5a77.js","assets/visualVariablesUtils-1ef3f471.js","assets/color-ebf39a9d.js","assets/enums-f1a6a48a.js","assets/enums-bdecffa2.js","assets/VertexElementDescriptor-2925c6af.js","assets/definitions-328d54fa.js","assets/ogcFeatureUtils-23f9c41c.js","assets/geojson-206532f5.js","assets/date-294ce3fb.js","assets/clientSideDefaults-220b65f4.js","assets/query-e1f4c37d.js","assets/pbfQueryUtils-17afc2b2.js","assets/pbf-280c2fba.js","assets/createConnection-e45e2283.js","assets/geohashUtils-77d8429b.js"]),PointCloudWorker:()=>Se(()=>import("./PointCloudWorker-41b06c6c.js"),["assets/PointCloudWorker-41b06c6c.js","assets/quat-6f95b589.js","assets/mat3f64-221ce671.js","assets/quatf64-3363c48e.js","assets/vec3f32-2da9db36.js","assets/PointCloudUniqueValueRenderer-b266d0d6.js","assets/I3SBinaryReader-58038a7e.js","assets/VertexAttribute-0e674613.js"]),RasterWorker:()=>Se(()=>import("./RasterWorker-53c67dbc.js"),["assets/RasterWorker-53c67dbc.js","assets/dataUtils-458fb6ae.js","assets/RasterSymbolizer-7432f63d.js","assets/colorUtils-cffa7faa.js","assets/utils-f6ba8f7c.js","assets/rasterProjectionHelper-ae5b1ef9.js"]),SceneLayerSnappingSourceWorker:()=>Se(()=>import("./SceneLayerSnappingSourceWorker-36141704.js"),["assets/SceneLayerSnappingSourceWorker-36141704.js","assets/lineSegment-b7fff97c.js","assets/sphere-cc89639f.js","assets/ByteSizeUnit-d4757d40.js","assets/mat3f64-221ce671.js","assets/mat4f64-1413b4a7.js","assets/quatf64-3363c48e.js","assets/plane-5737c8fb.js","assets/Indices-f4d804b8.js","assets/edgeProcessing-593a0552.js","assets/deduplicate-08a835da.js","assets/InterleavedLayout-e64b6166.js","assets/BufferView-1e3d3831.js","assets/types-1305598a.js","assets/VertexAttribute-0e674613.js","assets/enums-bdecffa2.js","assets/VertexElementDescriptor-2925c6af.js"]),SceneLayerWorker:()=>Se(()=>import("./SceneLayerWorker-26038ed9.js"),["assets/SceneLayerWorker-26038ed9.js","assets/MeshLocalVertexSpace-2db0f4a4.js","assets/MeshGeoreferencedRelativeVertexSpace-b82a6496.js","assets/vec32-78fb89cb.js","assets/sphere-cc89639f.js","assets/ByteSizeUnit-d4757d40.js","assets/mat3f64-221ce671.js","assets/mat4f64-1413b4a7.js","assets/quatf64-3363c48e.js"]),WFSSourceWorker:()=>Se(()=>import("./WFSSourceWorker-718cf270.js"),["assets/WFSSourceWorker-718cf270.js","assets/featureConversionUtils-317e3645.js","assets/OptimizedGeometry-d94e541f.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/FeatureStore-88bcfa4e.js","assets/BoundsStore-f83876c2.js","assets/PooledRBush-8bf2d479.js","assets/timeSupport-05eb4812.js","assets/projectionSupport-276693a5.js","assets/json-48e3ea08.js","assets/QueryEngine-bc896278.js","assets/WhereClause-f930ce8b.js","assets/TimeOnly-c5d299c6.js","assets/QueryEngineCapabilities-85c4f1d0.js","assets/quantizationUtils-b480e172.js","assets/utils-a0232a33.js","assets/utils-2840c54d.js","assets/generateRendererUtils-a6d51092.js","assets/RenderState-1d6218ee.js","assets/geojson-206532f5.js","assets/date-294ce3fb.js","assets/sourceUtils-8d1b4237.js","assets/wfsUtils-f374e441.js","assets/xmlUtils-444cb4c0.js"]),WorkerTileHandler:()=>Se(()=>import("./WorkerTileHandler-25c25df9.js"),["assets/WorkerTileHandler-25c25df9.js","assets/enums-fb086c25.js","assets/GeometryUtils-984e8446.js","assets/Rect-ea14f53a.js","assets/config-1337d16e.js","assets/StyleDefinition-29c49b98.js","assets/enums-f1a6a48a.js","assets/pbf-280c2fba.js","assets/TurboLine-0f11baf4.js","assets/definitions-328d54fa.js","assets/StyleRepository-b048a078.js","assets/enums-bdecffa2.js","assets/VertexElementDescriptor-2925c6af.js","assets/colorUtils-cffa7faa.js","assets/earcut-f0ab7973.js","assets/BidiEngine-9a40f2f4.js"])};var xi;(function(e){e[e.HANDSHAKE=0]="HANDSHAKE",e[e.OPEN=1]="OPEN",e[e.OPENED=2]="OPENED",e[e.RESPONSE=3]="RESPONSE",e[e.INVOKE=4]="INVOKE",e[e.ABORT=5]="ABORT",e[e.CLOSE=6]="CLOSE",e[e.OPEN_PORT=7]="OPEN_PORT",e[e.ON=8]="ON"})(xi||(xi={}));let rz=0;function iM(){return rz++}function sz(e){return e&&typeof e=="object"&&("result"in e||"transferList"in e)}function kp(e){return e?typeof e=="string"?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function x5(e,t,i,s){if(t.type===xi.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==xi.INVOKE&&t.type!==xi.RESPONSE)return void e.postMessage(t);let u;if(sz(i)?(u=i_(i.transferList),t.data=i.result):(u=i_(s),t.data=i),u){if(oe("ff")){for(const d of u)if("byteLength"in d&&d.byteLength>267386880){const y="Worker call with large ArrayBuffer would crash Firefox";switch(t.type){case xi.INVOKE:throw y;case xi.RESPONSE:return void x5(e,{type:xi.RESPONSE,jobId:t.jobId,error:kp(y)})}}}e.postMessage(t,u)}else e.postMessage(t)}function Ap(e){if(!e)return null;const t=e.data;return t?typeof t=="string"?JSON.parse(t):t:null}function i_(e){if(!(e!=null&&e.length))return null;if(oe("esri-workers-arraybuffer-transfer"))return e;const t=e.filter(i=>!nz(i));return t.length?t:null}function nz(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="ArrayBuffer"}const{CLOSE:r_,ABORT:s_,INVOKE:n_,RESPONSE:Dc,OPEN_PORT:o_,ON:oz}=xi,az=2;let lz=class{constructor(t){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=t,this._timer=null,this._process=this._process.bind(this)}push(t){t.type===xi.ABORT?this._cancelledJobIds.add(t.jobId):(this._invokeMessages.push(t),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const t of this._invokeMessages)this._cancelledJobIds.has(t.jobId)||this._invoke(t);this._cancelledJobIds.clear(),this._invokeMessages.length=0}},Ta=class Xu{static connect(t){const i=new MessageChannel;let s;s=typeof t=="function"?new t:"default"in t&&typeof t.default=="function"?new t.default:t;const u=new Xu(i.port1,{channel:i,client:s});return typeof s=="object"&&"remoteClient"in s&&(s.remoteClient=u),Xu.clients.set(u,s),i.port2}static loadWorker(t){const i=iz[t];return i?i():Promise.resolve(null)}constructor(t,i,s){this._port=t,this._jobQueue=s,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new lz(u=>this._onInvokeMessage(u)),this._client=i.client,this._onMessage=this._onMessage.bind(this),this._channel=i.channel,this._schedule=i.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:r_}),this._close()}isBusy(){return this._outJobs.size>0}invoke(t,i,s){const u=s==null?void 0:s.signal,d=s==null?void 0:s.transferList;if(!this._port)return Promise.reject(new ae("worker:port-closed",`Cannot call invoke('${t}'), port is closed`,{methodName:t,data:i}));const y=iM();return new Promise((v,_)=>{if(co(u))return this._processWork(),void _(hi());const M=Rs(u,()=>{const O=this._outJobs.get(y);O&&(this._outJobs.delete(y),this._processWork(),Kt(O.abortHandle),this._post({type:s_,jobId:y}),_(hi()))}),E={resolve:v,reject:_,abortHandle:M,debugInfo:t};this._outJobs.set(y,E),this._post({type:n_,jobId:y,methodName:t,abortable:u!=null},i,d)})}on(t,i){const s=new MessageChannel;function u(d){i(d.data)}return this._port.postMessage({type:xi.ON,eventType:t,port:s.port2},[s.port2]),s.port1.addEventListener("message",u),s.port1.start(),Et(()=>{s.port1.postMessage({type:xi.CLOSE}),s.port1.close(),s.port1.removeEventListener("message",u)})}jobAdded(){this._processWork()}openPort(){const t=new MessageChannel;return this._post({type:o_,port:t.port2}),t.port1}_processWork(){var y;if(this._outJobs.size>=az)return;const t=(y=this._jobQueue)==null?void 0:y.pop();if(!t)return;const{methodName:i,data:s,invokeOptions:u,resolver:d}=t;this.invoke(i,s,u).then(v=>d.resolve(v)).catch(v=>d.reject(v))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(t=>{Kt(t.abortHandle),t.reject(hi(`Worker closing, aborting job calling '${t.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null}_onMessage(t){this._schedule!=null?this._schedule(()=>this._processMessage(t)):this._processMessage(t)}_processMessage(t){const i=Ap(t);if(i)switch(i.type){case Dc:this._onResponseMessage(i);break;case n_:this._invokeQueue.push(i);break;case s_:this._onAbortMessage(i);break;case r_:this._onCloseMessage();break;case o_:this._onOpenPortMessage(i);break;case oz:this._onOnMessage(i)}}_onAbortMessage(t){const i=this._inJobs,s=t.jobId,u=i.get(s);this._invokeQueue.push(t),u&&(u.controller&&u.controller.abort(),i.delete(s))}_onCloseMessage(){const t=this._client;this._close(),t&&"destroy"in t&&Xu.clients.get(this)===t&&t.destroy(),Xu.clients.delete(this),t!=null&&t.remoteClient&&(t.remoteClient=null)}_onInvokeMessage(t){const{methodName:i,jobId:s,data:u,abortable:d}=t,y=d?new AbortController:null,v=this._inJobs;let _,M=this._client,E=M[i];try{if(!E&&i&&i.includes(".")){const O=i.split(".");for(let C=0;C<O.length-1;C++)M=M[O[C]],E=M[O[C+1]]}if(typeof E!="function")throw new TypeError(`${i} is not a function`);_=E.call(M,u,{client:this,signal:y?y.signal:null})}catch(O){return void this._post({type:Dc,jobId:s,error:kp(O)})}Oa(_)?(v.set(s,{controller:y,promise:_}),_.then(O=>{v.has(s)&&(v.delete(s),this._post({type:Dc,jobId:s},O))},O=>{v.has(s)&&(v.delete(s),Rr(O)||this._post({type:Dc,jobId:s,error:kp(O||{message:`Error encountered at method ${i}`})}))})):this._post({type:Dc,jobId:s},_)}_onOpenPortMessage(t){new Xu(t.port,{client:this._client})}_onOnMessage(t){const{port:i}=t,s=this._client.on(t.eventType,d=>{i.postMessage(d)}),u=Qp(t.port,"message",d=>{const y=Ap(d);(y==null?void 0:y.type)===xi.CLOSE&&(u.remove(),s.remove(),i.close())})}_onResponseMessage(t){const{jobId:i,error:s,data:u}=t,d=this._outJobs;if(!d.has(i))return;const y=d.get(i);d.delete(i),this._processWork(),Kt(y.abortHandle),s?y.reject(ae.fromJSON(JSON.parse(s))):y.resolve(u)}_post(t,i,s){return x5(this._port,t,i,s)}};Ta.kernelInfo={buildDate:lT,fullVersion:i5,revision:uT},Ta.clients=new Map;let uz=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new _y}destroy(){this.close()}get closed(){var t;return!((t=this._clients)!=null&&t.length)}open(t,i){return new Promise((s,u)=>{let d=!0;const y=v=>{Gt(i.signal),d&&(d=!1,v())};this._clients.length=t.length,this._clientPromises.length=t.length,this._inUseClients.length=t.length;for(let v=0;v<t.length;++v){const _=t[v];Oa(_)?this._clientPromises[v]=_.then(M=>(this._clients[v]=new Ta(M,i,this._ongoingJobsQueue),y(s),this._clients[v]),()=>(y(u),null)):(this._clients[v]=new Ta(_,i,this._ongoingJobsQueue),this._clientPromises[v]=Promise.resolve(this._clients[v]),y(s))}})}broadcast(t,i,s){const u=new Array(this._clientPromises.length);for(let d=0;d<this._clientPromises.length;++d){const y=this._clientPromises[d];u[d]=y.then(v=>v==null?void 0:v.invoke(t,i,s))}return u}close(){let t;for(;t=this._ongoingJobsQueue.pop();)t.resolver.reject(hi(`Worker closing, aborting job calling '${t.methodName}'`));for(const i of this._clientPromises)i.then(s=>s==null?void 0:s.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,tz(this)}invoke(t,i,s){let u;Array.isArray(s)?(de.getLogger("esri.core.workers.Connection").warn("invoke()","The transferList parameter is deprecated, use the options object instead"),u={transferList:s}):u=s;const d=ts();this._ongoingJobsQueue.push({methodName:t,data:i,invokeOptions:u,resolver:d});for(let y=0;y<this._clientPromises.length;y++){const v=this._clients[y];v?v.jobAdded():this._clientPromises[y].then(_=>_==null?void 0:_.jobAdded())}return d.promise}on(t,i){return Promise.all(this._clientPromises).then(()=>Zp(this._clients.map(s=>s.on(t,i))))}openPorts(){return new Promise(t=>{const i=new Array(this._clientPromises.length);let s=i.length;for(let u=0;u<this._clientPromises.length;++u)this._clientPromises[u].then(d=>{d&&(i[u]=d.openPort()),--s==0&&t(i)})})}get test(){return{numClients:this._clients.length}}};const hz={async request(e,t){var y,v;const i=e.options,s=i.responseType;i.signal=t==null?void 0:t.signal,i.responseType=s==="native"||s==="native-request-init"?"native-request-init":s&&["blob","json","text"].includes(s)&&((y=iT(e.url))!=null&&y.after)?s:"array-buffer";const u=await Yt(e.url,i),d={data:u.data,httpStatus:u.httpStatus,ssl:u.ssl};switch((v=u.requestOptions)==null?void 0:v.responseType){case"native-request-init":return delete d.data.signal,d;case"blob":d.data=await d.data.arrayBuffer();break;case"json":d.data=new TextEncoder().encode(JSON.stringify(d.data)).buffer;break;case"text":d.data=new TextEncoder().encode(d.data).buffer}return{result:d,transferList:[d.data]}}};let ip;var aS,lS;const cz=((aS=globalThis.esriConfig)==null?void 0:aS.locale)??((lS=globalThis.dojoConfig)==null?void 0:lS.locale);function rM(){var e;return cz??((e=globalThis.navigator)==null?void 0:e.language)??"en"}function Pr(){return ip===void 0&&(ip=rM()),ip}function pz(e=Pr()){const t=/^([a-zA-Z]{2,3})(?:[_\-]\w+)*$/.exec(e);return t==null?void 0:t[1].toLowerCase()}const rp=[];function S5(e){return rp.push(e),Et(()=>rp.splice(rp.indexOf(e),1))}const Jv=[];function $5(e){return Jv.push(e),Et(()=>rp.splice(Jv.indexOf(e),1))}function dz(){const e=rM();ip!==e&&(ip=e,[...Jv].forEach(t=>{t.call(null,e)}),[...rp].forEach(t=>{t.call(null,e)}))}var uS;(uS=globalThis.addEventListener)==null||uS.call(globalThis,"languagechange",dz);const a_=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Almaty"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);class Au extends Error{}class fz extends Au{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class yz extends Au{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class mz extends Au{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class jh extends Au{}class sM extends Au{constructor(t){super(`Invalid unit ${t}`)}}class fr extends Au{}class To extends Au{constructor(){super("Zone is an abstract class")}}const Te="numeric",Vs="short",Cr="long",xy={year:Te,month:Te,day:Te},nM={year:Te,month:Vs,day:Te},gz={year:Te,month:Vs,day:Te,weekday:Vs},oM={year:Te,month:Cr,day:Te},aM={year:Te,month:Cr,day:Te,weekday:Cr},lM={hour:Te,minute:Te},uM={hour:Te,minute:Te,second:Te},hM={hour:Te,minute:Te,second:Te,timeZoneName:Vs},cM={hour:Te,minute:Te,second:Te,timeZoneName:Cr},pM={hour:Te,minute:Te,hourCycle:"h23"},dM={hour:Te,minute:Te,second:Te,hourCycle:"h23"},fM={hour:Te,minute:Te,second:Te,hourCycle:"h23",timeZoneName:Vs},yM={hour:Te,minute:Te,second:Te,hourCycle:"h23",timeZoneName:Cr},mM={year:Te,month:Te,day:Te,hour:Te,minute:Te},gM={year:Te,month:Te,day:Te,hour:Te,minute:Te,second:Te},vM={year:Te,month:Vs,day:Te,hour:Te,minute:Te},wM={year:Te,month:Vs,day:Te,hour:Te,minute:Te,second:Te},vz={year:Te,month:Vs,day:Te,weekday:Vs,hour:Te,minute:Te},bM={year:Te,month:Cr,day:Te,hour:Te,minute:Te,timeZoneName:Vs},_M={year:Te,month:Cr,day:Te,hour:Te,minute:Te,second:Te,timeZoneName:Vs},xM={year:Te,month:Cr,day:Te,weekday:Cr,hour:Te,minute:Te,timeZoneName:Cr},SM={year:Te,month:Cr,day:Te,weekday:Cr,hour:Te,minute:Te,second:Te,timeZoneName:Cr};class bc{get type(){throw new To}get name(){throw new To}get ianaName(){return this.name}get isUniversal(){throw new To}offsetName(t,i){throw new To}formatOffset(t,i){throw new To}offset(t){throw new To}equals(t){throw new To}get isValid(){throw new To}}let Hg=null;class Im extends bc{static get instance(){return Hg===null&&(Hg=new Im),Hg}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:i,locale:s}){return PM(t,i,s)}formatOffset(t,i){return sp(this.offset(t),i)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}let Vf={};function wz(e){return Vf[e]||(Vf[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),Vf[e]}const bz={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function _z(e,t){const i=e.format(t).replace(/\u200E/g,""),s=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,u,d,y,v,_,M,E]=s;return[y,u,d,v,_,M,E]}function xz(e,t){const i=e.formatToParts(t),s=[];for(let u=0;u<i.length;u++){const{type:d,value:y}=i[u],v=bz[d];d==="era"?s[v]=y:Ke(v)||(s[v]=parseInt(y,10))}return s}let zd={};class Nr extends bc{static create(t){return zd[t]||(zd[t]=new Nr(t)),zd[t]}static resetCache(){zd={},Vf={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=Nr.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:i,locale:s}){return PM(t,i,s,this.name)}formatOffset(t,i){return sp(this.offset(t),i)}offset(t){const i=new Date(t);if(isNaN(i))return NaN;const s=wz(this.name);let[u,d,y,v,_,M,E]=s.formatToParts?xz(s,i):_z(s,i);v==="BC"&&(u=-Math.abs(u)+1);const C=km({year:u,month:d,day:y,hour:_===24?0:_,minute:M,second:E,millisecond:0});let R=+i;const L=R%1e3;return R-=L>=0?L:1e3+L,(C-R)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let l_={};function Sz(e,t={}){const i=JSON.stringify([e,t]);let s=l_[i];return s||(s=new Intl.ListFormat(e,t),l_[i]=s),s}let Kv={};function Zv(e,t={}){const i=JSON.stringify([e,t]);let s=Kv[i];return s||(s=new Intl.DateTimeFormat(e,t),Kv[i]=s),s}let Yv={};function $z(e,t={}){const i=JSON.stringify([e,t]);let s=Yv[i];return s||(s=new Intl.NumberFormat(e,t),Yv[i]=s),s}let Xv={};function Tz(e,t={}){const{base:i,...s}=t,u=JSON.stringify([e,s]);let d=Xv[u];return d||(d=new Intl.RelativeTimeFormat(e,t),Xv[u]=d),d}let i0=null;function Mz(){return i0||(i0=new Intl.DateTimeFormat().resolvedOptions().locale,i0)}let u_={};function Iz(e){let t=u_[e];if(!t){const i=new Intl.Locale(e);t="getWeekInfo"in i?i.getWeekInfo():i.weekInfo,u_[e]=t}return t}function Ez(e){const t=e.indexOf("-x-");t!==-1&&(e=e.substring(0,t));const i=e.indexOf("-u-");if(i===-1)return[e];{let s,u;try{s=Zv(e).resolvedOptions(),u=e}catch{const _=e.substring(0,i);s=Zv(_).resolvedOptions(),u=_}const{numberingSystem:d,calendar:y}=s;return[u,d,y]}}function kz(e,t,i){return(i||t)&&(e.includes("-u-")||(e+="-u"),i&&(e+=`-ca-${i}`),t&&(e+=`-nu-${t}`)),e}function Az(e){const t=[];for(let i=1;i<=12;i++){const s=Ue.utc(2009,i,1);t.push(e(s))}return t}function Oz(e){const t=[];for(let i=1;i<=7;i++){const s=Ue.utc(2016,11,13+i);t.push(e(s))}return t}function Vd(e,t,i,s){const u=e.listingMode();return u==="error"?null:u==="en"?i(t):s(t)}function Pz(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem==="latn"}class Cz{constructor(t,i,s){this.padTo=s.padTo||0,this.floor=s.floor||!1;const{padTo:u,floor:d,...y}=s;if(!i||Object.keys(y).length>0){const v={useGrouping:!1,...s};s.padTo>0&&(v.minimumIntegerDigits=s.padTo),this.inf=$z(t,v)}}format(t){if(this.inf){const i=this.floor?Math.floor(t):t;return this.inf.format(i)}else{const i=this.floor?Math.floor(t):E5(t,3);return li(i,this.padTo)}}}class jz{constructor(t,i,s){this.opts=s,this.originalZone=void 0;let u;if(this.opts.timeZone)this.dt=t;else if(t.zone.type==="fixed"){const y=-1*(t.offset/60),v=y>=0?`Etc/GMT+${y}`:`Etc/GMT${y}`;t.offset!==0&&Nr.create(v).valid?(u=v,this.dt=t):(u="UTC",this.dt=t.offset===0?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else t.zone.type==="system"?this.dt=t:t.zone.type==="iana"?(this.dt=t,u=t.zone.name):(u="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);const d={...this.opts};d.timeZone=d.timeZone||u,this.dtf=Zv(i,d)}format(){return this.originalZone?this.formatToParts().map(({value:t})=>t).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map(i=>{if(i.type==="timeZoneName"){const s=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...i,value:s}}else return i}):t}resolvedOptions(){return this.dtf.resolvedOptions()}}class Nz{constructor(t,i,s){this.opts={style:"long",...s},!i&&AM()&&(this.rtf=Tz(t,s))}format(t,i){return this.rtf?this.rtf.format(t,i):tV(i,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,i){return this.rtf?this.rtf.formatToParts(t,i):[]}}const Rz={firstDay:1,minimalDays:4,weekend:[6,7]};class $t{static fromOpts(t){return $t.create(t.locale,t.numberingSystem,t.outputCalendar,t.weekSettings,t.defaultToEN)}static create(t,i,s,u,d=!1){const y=t||Qt.defaultLocale,v=y||(d?"en-US":Mz()),_=i||Qt.defaultNumberingSystem,M=s||Qt.defaultOutputCalendar,E=Qv(u)||Qt.defaultWeekSettings;return new $t(v,_,M,E,y)}static resetCache(){i0=null,Kv={},Yv={},Xv={}}static fromObject({locale:t,numberingSystem:i,outputCalendar:s,weekSettings:u}={}){return $t.create(t,i,s,u)}constructor(t,i,s,u,d){const[y,v,_]=Ez(t);this.locale=y,this.numberingSystem=i||v||null,this.outputCalendar=s||_||null,this.weekSettings=u,this.intl=kz(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=d,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=Pz(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&i?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:$t.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,Qv(t.weekSettings)||this.weekSettings,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,i=!1){return Vd(this,t,NM,()=>{const s=i?{month:t,day:"numeric"}:{month:t},u=i?"format":"standalone";return this.monthsCache[u][t]||(this.monthsCache[u][t]=Az(d=>this.extract(d,s,"month"))),this.monthsCache[u][t]})}weekdays(t,i=!1){return Vd(this,t,DM,()=>{const s=i?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},u=i?"format":"standalone";return this.weekdaysCache[u][t]||(this.weekdaysCache[u][t]=Oz(d=>this.extract(d,s,"weekday"))),this.weekdaysCache[u][t]})}meridiems(){return Vd(this,void 0,()=>FM,()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Ue.utc(2016,11,13,9),Ue.utc(2016,11,13,19)].map(i=>this.extract(i,t,"dayperiod"))}return this.meridiemCache})}eras(t){return Vd(this,t,zM,()=>{const i={era:t};return this.eraCache[t]||(this.eraCache[t]=[Ue.utc(-40,1,1),Ue.utc(2017,1,1)].map(s=>this.extract(s,i,"era"))),this.eraCache[t]})}extract(t,i,s){const u=this.dtFormatter(t,i),d=u.formatToParts(),y=d.find(v=>v.type.toLowerCase()===s);return y?y.value:null}numberFormatter(t={}){return new Cz(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,i={}){return new jz(t,this.intl,i)}relFormatter(t={}){return new Nz(this.intl,this.isEnglish(),t)}listFormatter(t={}){return Sz(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:OM()?Iz(this.locale):Rz}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}}let Wg=null;class ki extends bc{static get utcInstance(){return Wg===null&&(Wg=new ki(0)),Wg}static instance(t){return t===0?ki.utcInstance:new ki(t)}static parseSpecifier(t){if(t){const i=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new ki(Am(i[1],i[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${sp(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${sp(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,i){return sp(this.fixed,i)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class Lz extends bc{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function ha(e,t){if(Ke(e)||e===null)return t;if(e instanceof bc)return e;if(zz(e)){const i=e.toLowerCase();return i==="default"?t:i==="local"||i==="system"?Im.instance:i==="utc"||i==="gmt"?ki.utcInstance:ki.parseSpecifier(i)||Nr.create(e)}else return iu(e)?ki.instance(e):typeof e=="object"&&"offset"in e&&typeof e.offset=="function"?e:new Lz(e)}let h_=()=>Date.now(),c_="system",p_=null,d_=null,f_=null,y_=60,m_,g_=null;class Qt{static get now(){return h_}static set now(t){h_=t}static set defaultZone(t){c_=t}static get defaultZone(){return ha(c_,Im.instance)}static get defaultLocale(){return p_}static set defaultLocale(t){p_=t}static get defaultNumberingSystem(){return d_}static set defaultNumberingSystem(t){d_=t}static get defaultOutputCalendar(){return f_}static set defaultOutputCalendar(t){f_=t}static get defaultWeekSettings(){return g_}static set defaultWeekSettings(t){g_=Qv(t)}static get twoDigitCutoffYear(){return y_}static set twoDigitCutoffYear(t){y_=t%100}static get throwOnInvalid(){return m_}static set throwOnInvalid(t){m_=t}static resetCaches(){$t.resetCache(),Nr.resetCache()}}class js{constructor(t,i){this.reason=t,this.explanation=i}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const $M=[0,31,59,90,120,151,181,212,243,273,304,334],TM=[0,31,60,91,121,152,182,213,244,274,305,335];function Xr(e,t){return new js("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function T5(e,t,i){const s=new Date(Date.UTC(e,t-1,i));e<100&&e>=0&&s.setUTCFullYear(s.getUTCFullYear()-1900);const u=s.getUTCDay();return u===0?7:u}function MM(e,t,i){return i+(sd(e)?TM:$M)[t-1]}function IM(e,t){const i=sd(e)?TM:$M,s=i.findIndex(d=>d<t),u=t-i[s];return{month:s+1,day:u}}function M5(e,t){return(e-t+7)%7+1}function Sy(e,t=4,i=1){const{year:s,month:u,day:d}=e,y=MM(s,u,d),v=M5(T5(s,u,d),i);let _=Math.floor((y-v+14-t)/7),M;return _<1?(M=s-1,_=Op(M,t,i)):_>Op(s,t,i)?(M=s+1,_=1):M=s,{weekYear:M,weekNumber:_,weekday:v,...Om(e)}}function v_(e,t=4,i=1){const{weekYear:s,weekNumber:u,weekday:d}=e,y=M5(T5(s,1,t),i),v=Bh(s);let _=u*7+d-y-7+t,M;_<1?(M=s-1,_+=Bh(M)):_>v?(M=s+1,_-=Bh(s)):M=s;const{month:E,day:O}=IM(M,_);return{year:M,month:E,day:O,...Om(e)}}function Jg(e){const{year:t,month:i,day:s}=e,u=MM(t,i,s);return{year:t,ordinal:u,...Om(e)}}function w_(e){const{year:t,ordinal:i}=e,{month:s,day:u}=IM(t,i);return{year:t,month:s,day:u,...Om(e)}}function b_(e,t){if(!Ke(e.localWeekday)||!Ke(e.localWeekNumber)||!Ke(e.localWeekYear)){if(!Ke(e.weekday)||!Ke(e.weekNumber)||!Ke(e.weekYear))throw new jh("Cannot mix locale-based week fields with ISO-based week fields");return Ke(e.localWeekday)||(e.weekday=e.localWeekday),Ke(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),Ke(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function Dz(e,t=4,i=1){const s=Em(e.weekYear),u=Qr(e.weekNumber,1,Op(e.weekYear,t,i)),d=Qr(e.weekday,1,7);return s?u?d?!1:Xr("weekday",e.weekday):Xr("week",e.weekNumber):Xr("weekYear",e.weekYear)}function Fz(e){const t=Em(e.year),i=Qr(e.ordinal,1,Bh(e.year));return t?i?!1:Xr("ordinal",e.ordinal):Xr("year",e.year)}function EM(e){const t=Em(e.year),i=Qr(e.month,1,12),s=Qr(e.day,1,$y(e.year,e.month));return t?i?s?!1:Xr("day",e.day):Xr("month",e.month):Xr("year",e.year)}function kM(e){const{hour:t,minute:i,second:s,millisecond:u}=e,d=Qr(t,0,23)||t===24&&i===0&&s===0&&u===0,y=Qr(i,0,59),v=Qr(s,0,59),_=Qr(u,0,999);return d?y?v?_?!1:Xr("millisecond",u):Xr("second",s):Xr("minute",i):Xr("hour",t)}function Ke(e){return typeof e>"u"}function iu(e){return typeof e=="number"}function Em(e){return typeof e=="number"&&e%1===0}function zz(e){return typeof e=="string"}function Vz(e){return Object.prototype.toString.call(e)==="[object Date]"}function AM(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function OM(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function Gz(e){return Array.isArray(e)?e:[e]}function __(e,t,i){if(e.length!==0)return e.reduce((s,u)=>{const d=[t(u),u];return s&&i(s[0],d[0])===s[0]?s:d},null)[1]}function qz(e,t){return t.reduce((i,s)=>(i[s]=e[s],i),{})}function hc(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Qv(e){if(e==null)return null;if(typeof e!="object")throw new fr("Week settings must be an object");if(!Qr(e.firstDay,1,7)||!Qr(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some(t=>!Qr(t,1,7)))throw new fr("Invalid week settings");return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}function Qr(e,t,i){return Em(e)&&e>=t&&e<=i}function Uz(e,t){return e-t*Math.floor(e/t)}function li(e,t=2){const i=e<0;let s;return i?s="-"+(""+-e).padStart(t,"0"):s=(""+e).padStart(t,"0"),s}function ia(e){if(!(Ke(e)||e===null||e===""))return parseInt(e,10)}function Ga(e){if(!(Ke(e)||e===null||e===""))return parseFloat(e)}function I5(e){if(!(Ke(e)||e===null||e==="")){const t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function E5(e,t,i=!1){const s=10**t;return(i?Math.trunc:Math.round)(e*s)/s}function sd(e){return e%4===0&&(e%100!==0||e%400===0)}function Bh(e){return sd(e)?366:365}function $y(e,t){const i=Uz(t-1,12)+1,s=e+(t-i)/12;return i===2?sd(s)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function km(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function x_(e,t,i){return-M5(T5(e,1,t),i)+t-1}function Op(e,t=4,i=1){const s=x_(e,t,i),u=x_(e+1,t,i);return(Bh(e)-s+u)/7}function ew(e){return e>99?e:e>Qt.twoDigitCutoffYear?1900+e:2e3+e}function PM(e,t,i,s=null){const u=new Date(e),d={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};s&&(d.timeZone=s);const y={timeZoneName:t,...d},v=new Intl.DateTimeFormat(i,y).formatToParts(u).find(_=>_.type.toLowerCase()==="timezonename");return v?v.value:null}function Am(e,t){let i=parseInt(e,10);Number.isNaN(i)&&(i=0);const s=parseInt(t,10)||0,u=i<0||Object.is(i,-0)?-s:s;return i*60+u}function CM(e){const t=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(t))throw new fr(`Invalid unit value ${e}`);return t}function Ty(e,t){const i={};for(const s in e)if(hc(e,s)){const u=e[s];if(u==null)continue;i[t(s)]=CM(u)}return i}function sp(e,t){const i=Math.trunc(Math.abs(e/60)),s=Math.trunc(Math.abs(e%60)),u=e>=0?"+":"-";switch(t){case"short":return`${u}${li(i,2)}:${li(s,2)}`;case"narrow":return`${u}${i}${s>0?`:${s}`:""}`;case"techie":return`${u}${li(i,2)}${li(s,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function Om(e){return qz(e,["hour","minute","second","millisecond"])}const Bz=["January","February","March","April","May","June","July","August","September","October","November","December"],jM=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Hz=["J","F","M","A","M","J","J","A","S","O","N","D"];function NM(e){switch(e){case"narrow":return[...Hz];case"short":return[...jM];case"long":return[...Bz];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const RM=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],LM=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Wz=["M","T","W","T","F","S","S"];function DM(e){switch(e){case"narrow":return[...Wz];case"short":return[...LM];case"long":return[...RM];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const FM=["AM","PM"],Jz=["Before Christ","Anno Domini"],Kz=["BC","AD"],Zz=["B","A"];function zM(e){switch(e){case"narrow":return[...Zz];case"short":return[...Kz];case"long":return[...Jz];default:return null}}function Yz(e){return FM[e.hour<12?0:1]}function Xz(e,t){return DM(t)[e.weekday-1]}function Qz(e,t){return NM(t)[e.month-1]}function eV(e,t){return zM(t)[e.year<0?0:1]}function tV(e,t,i="always",s=!1){const u={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},d=["hours","minutes","seconds"].indexOf(e)===-1;if(i==="auto"&&d){const O=e==="days";switch(t){case 1:return O?"tomorrow":`next ${u[e][0]}`;case-1:return O?"yesterday":`last ${u[e][0]}`;case 0:return O?"today":`this ${u[e][0]}`}}const y=Object.is(t,-0)||t<0,v=Math.abs(t),_=v===1,M=u[e],E=s?_?M[1]:M[2]||M[1]:_?u[e][0]:e;return y?`${v} ${E} ago`:`in ${v} ${E}`}function S_(e,t){let i="";for(const s of e)s.literal?i+=s.val:i+=t(s.val);return i}const iV={D:xy,DD:nM,DDD:oM,DDDD:aM,t:lM,tt:uM,ttt:hM,tttt:cM,T:pM,TT:dM,TTT:fM,TTTT:yM,f:mM,ff:vM,fff:bM,ffff:xM,F:gM,FF:wM,FFF:_M,FFFF:SM};class Bi{static create(t,i={}){return new Bi(t,i)}static parseFormat(t){let i=null,s="",u=!1;const d=[];for(let y=0;y<t.length;y++){const v=t.charAt(y);v==="'"?(s.length>0&&d.push({literal:u||/^\s+$/.test(s),val:s}),i=null,s="",u=!u):u||v===i?s+=v:(s.length>0&&d.push({literal:/^\s+$/.test(s),val:s}),s=v,i=v)}return s.length>0&&d.push({literal:u||/^\s+$/.test(s),val:s}),d}static macroTokenToFormatOpts(t){return iV[t]}constructor(t,i){this.opts=i,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,i){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...i}).format()}dtFormatter(t,i={}){return this.loc.dtFormatter(t,{...this.opts,...i})}formatDateTime(t,i){return this.dtFormatter(t,i).format()}formatDateTimeParts(t,i){return this.dtFormatter(t,i).formatToParts()}formatInterval(t,i){return this.dtFormatter(t.start,i).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,i){return this.dtFormatter(t,i).resolvedOptions()}num(t,i=0){if(this.opts.forceSimple)return li(t,i);const s={...this.opts};return i>0&&(s.padTo=i),this.loc.numberFormatter(s).format(t)}formatDateTimeFromString(t,i){const s=this.loc.listingMode()==="en",u=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",d=(R,L)=>this.loc.extract(t,R,L),y=R=>t.isOffsetFixed&&t.offset===0&&R.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,R.format):"",v=()=>s?Yz(t):d({hour:"numeric",hourCycle:"h12"},"dayperiod"),_=(R,L)=>s?Qz(t,R):d(L?{month:R}:{month:R,day:"numeric"},"month"),M=(R,L)=>s?Xz(t,R):d(L?{weekday:R}:{weekday:R,month:"long",day:"numeric"},"weekday"),E=R=>{const L=Bi.macroTokenToFormatOpts(R);return L?this.formatWithSystemDefault(t,L):R},O=R=>s?eV(t,R):d({era:R},"era"),C=R=>{switch(R){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return y({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return y({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return y({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return v();case"d":return u?d({day:"numeric"},"day"):this.num(t.day);case"dd":return u?d({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return M("short",!0);case"cccc":return M("long",!0);case"ccccc":return M("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return M("short",!1);case"EEEE":return M("long",!1);case"EEEEE":return M("narrow",!1);case"L":return u?d({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return u?d({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return _("short",!0);case"LLLL":return _("long",!0);case"LLLLL":return _("narrow",!0);case"M":return u?d({month:"numeric"},"month"):this.num(t.month);case"MM":return u?d({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return _("short",!1);case"MMMM":return _("long",!1);case"MMMMM":return _("narrow",!1);case"y":return u?d({year:"numeric"},"year"):this.num(t.year);case"yy":return u?d({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return u?d({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return u?d({year:"numeric"},"year"):this.num(t.year,6);case"G":return O("short");case"GG":return O("long");case"GGGGG":return O("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"n":return this.num(t.localWeekNumber);case"nn":return this.num(t.localWeekNumber,2);case"ii":return this.num(t.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(t.localWeekYear,4);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return E(R)}};return S_(Bi.parseFormat(i),C)}formatDurationFromString(t,i){const s=_=>{switch(_[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},u=_=>M=>{const E=s(M);return E?this.num(_.get(E),M.length):M},d=Bi.parseFormat(i),y=d.reduce((_,{literal:M,val:E})=>M?_:_.concat(E),[]),v=t.shiftTo(...y.map(s).filter(_=>_));return S_(d,u(v))}}const VM=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function _c(...e){const t=e.reduce((i,s)=>i+s.source,"");return RegExp(`^${t}$`)}function xc(...e){return t=>e.reduce(([i,s,u],d)=>{const[y,v,_]=d(t,u);return[{...i,...y},v||s,_]},[{},null,1]).slice(0,2)}function Sc(e,...t){if(e==null)return[null,null];for(const[i,s]of t){const u=i.exec(e);if(u)return s(u)}return[null,null]}function GM(...e){return(t,i)=>{const s={};let u;for(u=0;u<e.length;u++)s[e[u]]=ia(t[i+u]);return[s,null,i+u]}}const qM=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,rV=`(?:${qM.source}?(?:\\[(${VM.source})\\])?)?`,k5=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,UM=RegExp(`${k5.source}${rV}`),A5=RegExp(`(?:T${UM.source})?`),sV=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,nV=/(\d{4})-?W(\d\d)(?:-?(\d))?/,oV=/(\d{4})-?(\d{3})/,aV=GM("weekYear","weekNumber","weekDay"),lV=GM("year","ordinal"),uV=/(\d{4})-(\d\d)-(\d\d)/,BM=RegExp(`${k5.source} ?(?:${qM.source}|(${VM.source}))?`),hV=RegExp(`(?: ${BM.source})?`);function Hh(e,t,i){const s=e[t];return Ke(s)?i:ia(s)}function cV(e,t){return[{year:Hh(e,t),month:Hh(e,t+1,1),day:Hh(e,t+2,1)},null,t+3]}function $c(e,t){return[{hours:Hh(e,t,0),minutes:Hh(e,t+1,0),seconds:Hh(e,t+2,0),milliseconds:I5(e[t+3])},null,t+4]}function nd(e,t){const i=!e[t]&&!e[t+1],s=Am(e[t+1],e[t+2]),u=i?null:ki.instance(s);return[{},u,t+3]}function od(e,t){const i=e[t]?Nr.create(e[t]):null;return[{},i,t+1]}const pV=RegExp(`^T?${k5.source}$`),dV=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function fV(e){const[t,i,s,u,d,y,v,_,M]=e,E=t[0]==="-",O=_&&_[0]==="-",C=(R,L=!1)=>R!==void 0&&(L||R&&E)?-R:R;return[{years:C(Ga(i)),months:C(Ga(s)),weeks:C(Ga(u)),days:C(Ga(d)),hours:C(Ga(y)),minutes:C(Ga(v)),seconds:C(Ga(_),_==="-0"),milliseconds:C(I5(M),O)}]}const yV={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function O5(e,t,i,s,u,d,y){const v={year:t.length===2?ew(ia(t)):ia(t),month:jM.indexOf(i)+1,day:ia(s),hour:ia(u),minute:ia(d)};return y&&(v.second=ia(y)),e&&(v.weekday=e.length>3?RM.indexOf(e)+1:LM.indexOf(e)+1),v}const mV=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function gV(e){const[,t,i,s,u,d,y,v,_,M,E,O]=e,C=O5(t,u,s,i,d,y,v);let R;return _?R=yV[_]:M?R=0:R=Am(E,O),[C,new ki(R)]}function vV(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const wV=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,bV=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,_V=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function $_(e){const[,t,i,s,u,d,y,v]=e;return[O5(t,u,s,i,d,y,v),ki.utcInstance]}function xV(e){const[,t,i,s,u,d,y,v]=e;return[O5(t,v,i,s,u,d,y),ki.utcInstance]}const SV=_c(sV,A5),$V=_c(nV,A5),TV=_c(oV,A5),MV=_c(UM),HM=xc(cV,$c,nd,od),IV=xc(aV,$c,nd,od),EV=xc(lV,$c,nd,od),kV=xc($c,nd,od);function AV(e){return Sc(e,[SV,HM],[$V,IV],[TV,EV],[MV,kV])}function OV(e){return Sc(vV(e),[mV,gV])}function PV(e){return Sc(e,[wV,$_],[bV,$_],[_V,xV])}function CV(e){return Sc(e,[dV,fV])}const jV=xc($c);function NV(e){return Sc(e,[pV,jV])}const RV=_c(uV,hV),LV=_c(BM),DV=xc($c,nd,od);function FV(e){return Sc(e,[RV,HM],[LV,DV])}const T_="Invalid Duration",WM={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},zV={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...WM},Fr=146097/400,zu=146097/4800,VV={years:{quarters:4,months:12,weeks:Fr/7,days:Fr,hours:Fr*24,minutes:Fr*24*60,seconds:Fr*24*60*60,milliseconds:Fr*24*60*60*1e3},quarters:{months:3,weeks:Fr/28,days:Fr/4,hours:Fr*24/4,minutes:Fr*24*60/4,seconds:Fr*24*60*60/4,milliseconds:Fr*24*60*60*1e3/4},months:{weeks:zu/7,days:zu,hours:zu*24,minutes:zu*24*60,seconds:zu*24*60*60,milliseconds:zu*24*60*60*1e3},...WM},Gl=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],GV=Gl.slice(0).reverse();function Mo(e,t,i=!1){const s={values:i?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new pt(s)}function JM(e,t){let i=t.milliseconds??0;for(const s of GV.slice(1))t[s]&&(i+=t[s]*e[s].milliseconds);return i}function M_(e,t){const i=JM(e,t)<0?-1:1;Gl.reduceRight((s,u)=>{if(Ke(t[u]))return s;if(s){const d=t[s]*i,y=e[u][s],v=Math.floor(d/y);t[u]+=v*i,t[s]-=v*y*i}return u},null),Gl.reduce((s,u)=>{if(Ke(t[u]))return s;if(s){const d=t[s]%1;t[s]-=d,t[u]+=d*e[s][u]}return u},null)}function qV(e){const t={};for(const[i,s]of Object.entries(e))s!==0&&(t[i]=s);return t}class pt{constructor(t){const i=t.conversionAccuracy==="longterm"||!1;let s=i?VV:zV;t.matrix&&(s=t.matrix),this.values=t.values,this.loc=t.loc||$t.create(),this.conversionAccuracy=i?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=s,this.isLuxonDuration=!0}static fromMillis(t,i){return pt.fromObject({milliseconds:t},i)}static fromObject(t,i={}){if(t==null||typeof t!="object")throw new fr(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new pt({values:Ty(t,pt.normalizeUnit),loc:$t.fromObject(i),conversionAccuracy:i.conversionAccuracy,matrix:i.matrix})}static fromDurationLike(t){if(iu(t))return pt.fromMillis(t);if(pt.isDuration(t))return t;if(typeof t=="object")return pt.fromObject(t);throw new fr(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,i){const[s]=CV(t);return s?pt.fromObject(s,i):pt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,i){const[s]=NV(t);return s?pt.fromObject(s,i):pt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,i=null){if(!t)throw new fr("need to specify a reason the Duration is invalid");const s=t instanceof js?t:new js(t,i);if(Qt.throwOnInvalid)throw new mz(s);return new pt({invalid:s})}static normalizeUnit(t){const i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!i)throw new sM(t);return i}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,i={}){const s={...i,floor:i.round!==!1&&i.floor!==!1};return this.isValid?Bi.create(this.loc,s).formatDurationFromString(this,t):T_}toHuman(t={}){if(!this.isValid)return T_;const i=Gl.map(s=>{const u=this.values[s];return Ke(u)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:s.slice(0,-1)}).format(u)}).filter(s=>s);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(i)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=E5(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const i=this.toMillis();return i<0||i>=864e5?null:(t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t,includeOffset:!1},Ue.fromMillis(i,{zone:"UTC"}).toISOTime(t))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?JM(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const i=pt.fromDurationLike(t),s={};for(const u of Gl)(hc(i.values,u)||hc(this.values,u))&&(s[u]=i.get(u)+this.get(u));return Mo(this,{values:s},!0)}minus(t){if(!this.isValid)return this;const i=pt.fromDurationLike(t);return this.plus(i.negate())}mapUnits(t){if(!this.isValid)return this;const i={};for(const s of Object.keys(this.values))i[s]=CM(t(this.values[s],s));return Mo(this,{values:i},!0)}get(t){return this[pt.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const i={...this.values,...Ty(t,pt.normalizeUnit)};return Mo(this,{values:i})}reconfigure({locale:t,numberingSystem:i,conversionAccuracy:s,matrix:u}={}){const y={loc:this.loc.clone({locale:t,numberingSystem:i}),matrix:u,conversionAccuracy:s};return Mo(this,y)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return M_(this.matrix,t),Mo(this,{values:t},!0)}rescale(){if(!this.isValid)return this;const t=qV(this.normalize().shiftToAll().toObject());return Mo(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(y=>pt.normalizeUnit(y));const i={},s={},u=this.toObject();let d;for(const y of Gl)if(t.indexOf(y)>=0){d=y;let v=0;for(const M in s)v+=this.matrix[M][y]*s[M],s[M]=0;iu(u[y])&&(v+=u[y]);const _=Math.trunc(v);i[y]=_,s[y]=(v*1e3-_*1e3)/1e3}else iu(u[y])&&(s[y]=u[y]);for(const y in s)s[y]!==0&&(i[d]+=y===d?s[y]:s[y]/this.matrix[d][y]);return M_(this.matrix,i),Mo(this,{values:i},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const i of Object.keys(this.values))t[i]=this.values[i]===0?0:-this.values[i];return Mo(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function i(s,u){return s===void 0||s===0?u===void 0||u===0:s===u}for(const s of Gl)if(!i(this.values[s],t.values[s]))return!1;return!0}}const Vu="Invalid Interval";function UV(e,t){return!e||!e.isValid?Jt.invalid("missing or invalid start"):!t||!t.isValid?Jt.invalid("missing or invalid end"):t<e?Jt.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}class Jt{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,i=null){if(!t)throw new fr("need to specify a reason the Interval is invalid");const s=t instanceof js?t:new js(t,i);if(Qt.throwOnInvalid)throw new yz(s);return new Jt({invalid:s})}static fromDateTimes(t,i){const s=zc(t),u=zc(i),d=UV(s,u);return d??new Jt({start:s,end:u})}static after(t,i){const s=pt.fromDurationLike(i),u=zc(t);return Jt.fromDateTimes(u,u.plus(s))}static before(t,i){const s=pt.fromDurationLike(i),u=zc(t);return Jt.fromDateTimes(u.minus(s),u)}static fromISO(t,i){const[s,u]=(t||"").split("/",2);if(s&&u){let d,y;try{d=Ue.fromISO(s,i),y=d.isValid}catch{y=!1}let v,_;try{v=Ue.fromISO(u,i),_=v.isValid}catch{_=!1}if(y&&_)return Jt.fromDateTimes(d,v);if(y){const M=pt.fromISO(u,i);if(M.isValid)return Jt.after(d,M)}else if(_){const M=pt.fromISO(s,i);if(M.isValid)return Jt.before(v,M)}}return Jt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds",i){if(!this.isValid)return NaN;const s=this.start.startOf(t,i);let u;return i!=null&&i.useLocaleWeeks?u=this.end.reconfigure({locale:s.locale}):u=this.end,u=u.startOf(t,i),Math.floor(u.diff(s,t).get(t))+(u.valueOf()!==this.end.valueOf())}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:i}={}){return this.isValid?Jt.fromDateTimes(t||this.s,i||this.e):this}splitAt(...t){if(!this.isValid)return[];const i=t.map(zc).filter(y=>this.contains(y)).sort((y,v)=>y.toMillis()-v.toMillis()),s=[];let{s:u}=this,d=0;for(;u<this.e;){const y=i[d]||this.e,v=+y>+this.e?this.e:y;s.push(Jt.fromDateTimes(u,v)),u=v,d+=1}return s}splitBy(t){const i=pt.fromDurationLike(t);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];let{s}=this,u=1,d;const y=[];for(;s<this.e;){const v=this.start.plus(i.mapUnits(_=>_*u));d=+v>+this.e?this.e:v,y.push(Jt.fromDateTimes(s,d)),s=d,u+=1}return y}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const i=this.s>t.s?this.s:t.s,s=this.e<t.e?this.e:t.e;return i>=s?null:Jt.fromDateTimes(i,s)}union(t){if(!this.isValid)return this;const i=this.s<t.s?this.s:t.s,s=this.e>t.e?this.e:t.e;return Jt.fromDateTimes(i,s)}static merge(t){const[i,s]=t.sort((u,d)=>u.s-d.s).reduce(([u,d],y)=>d?d.overlaps(y)||d.abutsStart(y)?[u,d.union(y)]:[u.concat([d]),y]:[u,y],[[],null]);return s&&i.push(s),i}static xor(t){let i=null,s=0;const u=[],d=t.map(_=>[{time:_.s,type:"s"},{time:_.e,type:"e"}]),y=Array.prototype.concat(...d),v=y.sort((_,M)=>_.time-M.time);for(const _ of v)s+=_.type==="s"?1:-1,s===1?i=_.time:(i&&+i!=+_.time&&u.push(Jt.fromDateTimes(i,_.time)),i=null);return Jt.merge(u)}difference(...t){return Jt.xor([this].concat(t)).map(i=>this.intersection(i)).filter(i=>i&&!i.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:Vu}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(t=xy,i={}){return this.isValid?Bi.create(this.s.loc.clone(i),t).formatInterval(this):Vu}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:Vu}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Vu}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:Vu}toFormat(t,{separator:i=" – "}={}){return this.isValid?`${this.s.toFormat(t)}${i}${this.e.toFormat(t)}`:Vu}toDuration(t,i){return this.isValid?this.e.diff(this.s,t,i):pt.invalid(this.invalidReason)}mapEndpoints(t){return Jt.fromDateTimes(t(this.s),t(this.e))}}class Gd{static hasDST(t=Qt.defaultZone){const i=Ue.now().setZone(t).set({month:12});return!t.isUniversal&&i.offset!==i.set({month:6}).offset}static isValidIANAZone(t){return Nr.isValidZone(t)}static normalizeZone(t){return ha(t,Qt.defaultZone)}static getStartOfWeek({locale:t=null,locObj:i=null}={}){return(i||$t.create(t)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:t=null,locObj:i=null}={}){return(i||$t.create(t)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:t=null,locObj:i=null}={}){return(i||$t.create(t)).getWeekendDays().slice()}static months(t="long",{locale:i=null,numberingSystem:s=null,locObj:u=null,outputCalendar:d="gregory"}={}){return(u||$t.create(i,s,d)).months(t)}static monthsFormat(t="long",{locale:i=null,numberingSystem:s=null,locObj:u=null,outputCalendar:d="gregory"}={}){return(u||$t.create(i,s,d)).months(t,!0)}static weekdays(t="long",{locale:i=null,numberingSystem:s=null,locObj:u=null}={}){return(u||$t.create(i,s,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:i=null,numberingSystem:s=null,locObj:u=null}={}){return(u||$t.create(i,s,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return $t.create(t).meridiems()}static eras(t="short",{locale:i=null}={}){return $t.create(i,null,"gregory").eras(t)}static features(){return{relative:AM(),localeWeek:OM()}}}function I_(e,t){const i=u=>u.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),s=i(t)-i(e);return Math.floor(pt.fromMillis(s).as("days"))}function BV(e,t,i){const s=[["years",(_,M)=>M.year-_.year],["quarters",(_,M)=>M.quarter-_.quarter+(M.year-_.year)*4],["months",(_,M)=>M.month-_.month+(M.year-_.year)*12],["weeks",(_,M)=>{const E=I_(_,M);return(E-E%7)/7}],["days",I_]],u={},d=e;let y,v;for(const[_,M]of s)i.indexOf(_)>=0&&(y=_,u[_]=M(e,t),v=d.plus(u),v>t?(u[_]--,e=d.plus(u),e>t&&(v=e,u[_]--,e=d.plus(u))):e=v);return[e,u,v,y]}function HV(e,t,i,s){let[u,d,y,v]=BV(e,t,i);const _=t-u,M=i.filter(O=>["hours","minutes","seconds","milliseconds"].indexOf(O)>=0);M.length===0&&(y<t&&(y=u.plus({[v]:1})),y!==u&&(d[v]=(d[v]||0)+_/(y-u)));const E=pt.fromObject(d,s);return M.length>0?pt.fromMillis(_,s).shiftTo(...M).plus(E):E}const P5={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},E_={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},WV=P5.hanidec.replace(/[\[|\]]/g,"").split("");function JV(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let i=0;i<e.length;i++){const s=e.charCodeAt(i);if(e[i].search(P5.hanidec)!==-1)t+=WV.indexOf(e[i]);else for(const u in E_){const[d,y]=E_[u];s>=d&&s<=y&&(t+=s-d)}}return parseInt(t,10)}else return t}function hs({numberingSystem:e},t=""){return new RegExp(`${P5[e||"latn"]}${t}`)}const KV="missing Intl.DateTimeFormat.formatToParts support";function ft(e,t=i=>i){return{regex:e,deser:([i])=>t(JV(i))}}const ZV=String.fromCharCode(160),KM=`[ ${ZV}]`,ZM=new RegExp(KM,"g");function YV(e){return e.replace(/\./g,"\\.?").replace(ZM,KM)}function k_(e){return e.replace(/\./g,"").replace(ZM," ").toLowerCase()}function cs(e,t){return e===null?null:{regex:RegExp(e.map(YV).join("|")),deser:([i])=>e.findIndex(s=>k_(i)===k_(s))+t}}function A_(e,t){return{regex:e,deser:([,i,s])=>Am(i,s),groups:t}}function qd(e){return{regex:e,deser:([t])=>t}}function XV(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function QV(e,t){const i=hs(t),s=hs(t,"{2}"),u=hs(t,"{3}"),d=hs(t,"{4}"),y=hs(t,"{6}"),v=hs(t,"{1,2}"),_=hs(t,"{1,3}"),M=hs(t,"{1,6}"),E=hs(t,"{1,9}"),O=hs(t,"{2,4}"),C=hs(t,"{4,6}"),R=U=>({regex:RegExp(XV(U.val)),deser:([K])=>K,literal:!0}),G=(U=>{if(e.literal)return R(U);switch(U.val){case"G":return cs(t.eras("short"),0);case"GG":return cs(t.eras("long"),0);case"y":return ft(M);case"yy":return ft(O,ew);case"yyyy":return ft(d);case"yyyyy":return ft(C);case"yyyyyy":return ft(y);case"M":return ft(v);case"MM":return ft(s);case"MMM":return cs(t.months("short",!0),1);case"MMMM":return cs(t.months("long",!0),1);case"L":return ft(v);case"LL":return ft(s);case"LLL":return cs(t.months("short",!1),1);case"LLLL":return cs(t.months("long",!1),1);case"d":return ft(v);case"dd":return ft(s);case"o":return ft(_);case"ooo":return ft(u);case"HH":return ft(s);case"H":return ft(v);case"hh":return ft(s);case"h":return ft(v);case"mm":return ft(s);case"m":return ft(v);case"q":return ft(v);case"qq":return ft(s);case"s":return ft(v);case"ss":return ft(s);case"S":return ft(_);case"SSS":return ft(u);case"u":return qd(E);case"uu":return qd(v);case"uuu":return ft(i);case"a":return cs(t.meridiems(),0);case"kkkk":return ft(d);case"kk":return ft(O,ew);case"W":return ft(v);case"WW":return ft(s);case"E":case"c":return ft(i);case"EEE":return cs(t.weekdays("short",!1),1);case"EEEE":return cs(t.weekdays("long",!1),1);case"ccc":return cs(t.weekdays("short",!0),1);case"cccc":return cs(t.weekdays("long",!0),1);case"Z":case"ZZ":return A_(new RegExp(`([+-]${v.source})(?::(${s.source}))?`),2);case"ZZZ":return A_(new RegExp(`([+-]${v.source})(${s.source})?`),2);case"z":return qd(/[a-z_+-/]{1,256}?/i);case" ":return qd(/[^\S\n\r]/);default:return R(U)}})(e)||{invalidReason:KV};return G.token=e,G}const eG={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function tG(e,t,i){const{type:s,value:u}=e;if(s==="literal"){const _=/^\s+$/.test(u);return{literal:!_,val:_?" ":u}}const d=t[s];let y=s;s==="hour"&&(t.hour12!=null?y=t.hour12?"hour12":"hour24":t.hourCycle!=null?t.hourCycle==="h11"||t.hourCycle==="h12"?y="hour12":y="hour24":y=i.hour12?"hour12":"hour24");let v=eG[y];if(typeof v=="object"&&(v=v[d]),v)return{literal:!1,val:v}}function iG(e){return[`^${e.map(i=>i.regex).reduce((i,s)=>`${i}(${s.source})`,"")}$`,e]}function rG(e,t,i){const s=e.match(t);if(s){const u={};let d=1;for(const y in i)if(hc(i,y)){const v=i[y],_=v.groups?v.groups+1:1;!v.literal&&v.token&&(u[v.token.val[0]]=v.deser(s.slice(d,d+_))),d+=_}return[s,u]}else return[s,{}]}function sG(e){const t=d=>{switch(d){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let i=null,s;return Ke(e.z)||(i=Nr.create(e.z)),Ke(e.Z)||(i||(i=new ki(e.Z)),s=e.Z),Ke(e.q)||(e.M=(e.q-1)*3+1),Ke(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),Ke(e.u)||(e.S=I5(e.u)),[Object.keys(e).reduce((d,y)=>{const v=t(y);return v&&(d[v]=e[y]),d},{}),i,s]}let Kg=null;function nG(){return Kg||(Kg=Ue.fromMillis(1555555555555)),Kg}function oG(e,t){if(e.literal)return e;const i=Bi.macroTokenToFormatOpts(e.val),s=QM(i,t);return s==null||s.includes(void 0)?e:s}function YM(e,t){return Array.prototype.concat(...e.map(i=>oG(i,t)))}function XM(e,t,i){const s=YM(Bi.parseFormat(i),e),u=s.map(y=>QV(y,e)),d=u.find(y=>y.invalidReason);if(d)return{input:t,tokens:s,invalidReason:d.invalidReason};{const[y,v]=iG(u),_=RegExp(y,"i"),[M,E]=rG(t,_,v),[O,C,R]=E?sG(E):[null,null,void 0];if(hc(E,"a")&&hc(E,"H"))throw new jh("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:s,regex:_,rawMatches:M,matches:E,result:O,zone:C,specificOffset:R}}}function aG(e,t,i){const{result:s,zone:u,specificOffset:d,invalidReason:y}=XM(e,t,i);return[s,u,d,y]}function QM(e,t){if(!e)return null;const s=Bi.create(t,e).dtFormatter(nG()),u=s.formatToParts(),d=s.resolvedOptions();return u.map(y=>tG(y,e,d))}const Zg="Invalid DateTime",O_=864e13;function Ud(e){return new js("unsupported zone",`the zone "${e.name}" is not supported`)}function Yg(e){return e.weekData===null&&(e.weekData=Sy(e.c)),e.weekData}function Xg(e){return e.localWeekData===null&&(e.localWeekData=Sy(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function qa(e,t){const i={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new Ue({...i,...t,old:i})}function eI(e,t,i){let s=e-t*60*1e3;const u=i.offset(s);if(t===u)return[s,t];s-=(u-t)*60*1e3;const d=i.offset(s);return u===d?[s,u]:[e-Math.min(u,d)*60*1e3,Math.max(u,d)]}function Bd(e,t){e+=t*60*1e3;const i=new Date(e);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function Gf(e,t,i){return eI(km(e),t,i)}function P_(e,t){const i=e.o,s=e.c.year+Math.trunc(t.years),u=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,d={...e.c,year:s,month:u,day:Math.min(e.c.day,$y(s,u))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},y=pt.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),v=km(d);let[_,M]=eI(v,i,e.zone);return y!==0&&(_+=y,M=e.zone.offset(_)),{ts:_,o:M}}function Fc(e,t,i,s,u,d){const{setZone:y,zone:v}=i;if(e&&Object.keys(e).length!==0||t){const _=t||v,M=Ue.fromObject(e,{...i,zone:_,specificOffset:d});return y?M:M.setZone(v)}else return Ue.invalid(new js("unparsable",`the input "${u}" can't be parsed as ${s}`))}function Hd(e,t,i=!0){return e.isValid?Bi.create($t.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(e,t):null}function Qg(e,t){const i=e.c.year>9999||e.c.year<0;let s="";return i&&e.c.year>=0&&(s+="+"),s+=li(e.c.year,i?6:4),t?(s+="-",s+=li(e.c.month),s+="-",s+=li(e.c.day)):(s+=li(e.c.month),s+=li(e.c.day)),s}function C_(e,t,i,s,u,d){let y=li(e.c.hour);return t?(y+=":",y+=li(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!i)&&(y+=":")):y+=li(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!i)&&(y+=li(e.c.second),(e.c.millisecond!==0||!s)&&(y+=".",y+=li(e.c.millisecond,3))),u&&(e.isOffsetFixed&&e.offset===0&&!d?y+="Z":e.o<0?(y+="-",y+=li(Math.trunc(-e.o/60)),y+=":",y+=li(Math.trunc(-e.o%60))):(y+="+",y+=li(Math.trunc(e.o/60)),y+=":",y+=li(Math.trunc(e.o%60)))),d&&(y+="["+e.zone.ianaName+"]"),y}const tI={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},lG={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},uG={ordinal:1,hour:0,minute:0,second:0,millisecond:0},iI=["year","month","day","hour","minute","second","millisecond"],hG=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],cG=["year","ordinal","hour","minute","second","millisecond"];function pG(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new sM(e);return t}function j_(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return pG(e)}}function N_(e,t){const i=ha(t.zone,Qt.defaultZone),s=$t.fromObject(t),u=Qt.now();let d,y;if(Ke(e.year))d=u;else{for(const M of iI)Ke(e[M])&&(e[M]=tI[M]);const v=EM(e)||kM(e);if(v)return Ue.invalid(v);const _=i.offset(u);[d,y]=Gf(e,_,i)}return new Ue({ts:d,zone:i,loc:s,o:y})}function R_(e,t,i){const s=Ke(i.round)?!0:i.round,u=(y,v)=>(y=E5(y,s||i.calendary?0:2,!0),t.loc.clone(i).relFormatter(i).format(y,v)),d=y=>i.calendary?t.hasSame(e,y)?0:t.startOf(y).diff(e.startOf(y),y).get(y):t.diff(e,y).get(y);if(i.unit)return u(d(i.unit),i.unit);for(const y of i.units){const v=d(y);if(Math.abs(v)>=1)return u(v,y)}return u(e>t?-0:0,i.units[i.units.length-1])}function L_(e){let t={},i;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],i=Array.from(e).slice(0,e.length-1)):i=Array.from(e),[t,i]}class Ue{constructor(t){const i=t.zone||Qt.defaultZone;let s=t.invalid||(Number.isNaN(t.ts)?new js("invalid input"):null)||(i.isValid?null:Ud(i));this.ts=Ke(t.ts)?Qt.now():t.ts;let u=null,d=null;if(!s)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(i))[u,d]=[t.old.c,t.old.o];else{const v=i.offset(this.ts);u=Bd(this.ts,v),s=Number.isNaN(u.year)?new js("invalid input"):null,u=s?null:u,d=s?null:v}this._zone=i,this.loc=t.loc||$t.create(),this.invalid=s,this.weekData=null,this.localWeekData=null,this.c=u,this.o=d,this.isLuxonDateTime=!0}static now(){return new Ue({})}static local(){const[t,i]=L_(arguments),[s,u,d,y,v,_,M]=i;return N_({year:s,month:u,day:d,hour:y,minute:v,second:_,millisecond:M},t)}static utc(){const[t,i]=L_(arguments),[s,u,d,y,v,_,M]=i;return t.zone=ki.utcInstance,N_({year:s,month:u,day:d,hour:y,minute:v,second:_,millisecond:M},t)}static fromJSDate(t,i={}){const s=Vz(t)?t.valueOf():NaN;if(Number.isNaN(s))return Ue.invalid("invalid input");const u=ha(i.zone,Qt.defaultZone);return u.isValid?new Ue({ts:s,zone:u,loc:$t.fromObject(i)}):Ue.invalid(Ud(u))}static fromMillis(t,i={}){if(iu(t))return t<-O_||t>O_?Ue.invalid("Timestamp out of range"):new Ue({ts:t,zone:ha(i.zone,Qt.defaultZone),loc:$t.fromObject(i)});throw new fr(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,i={}){if(iu(t))return new Ue({ts:t*1e3,zone:ha(i.zone,Qt.defaultZone),loc:$t.fromObject(i)});throw new fr("fromSeconds requires a numerical input")}static fromObject(t,i={}){t=t||{};const s=ha(i.zone,Qt.defaultZone);if(!s.isValid)return Ue.invalid(Ud(s));const u=$t.fromObject(i),d=Ty(t,j_),{minDaysInFirstWeek:y,startOfWeek:v}=b_(d,u),_=Qt.now(),M=Ke(i.specificOffset)?s.offset(_):i.specificOffset,E=!Ke(d.ordinal),O=!Ke(d.year),C=!Ke(d.month)||!Ke(d.day),R=O||C,L=d.weekYear||d.weekNumber;if((R||E)&&L)throw new jh("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(C&&E)throw new jh("Can't mix ordinal dates with month/day");const G=L||d.weekday&&!R;let U,K,ee=Bd(_,M);G?(U=hG,K=lG,ee=Sy(ee,y,v)):E?(U=cG,K=uG,ee=Jg(ee)):(U=iI,K=tI);let Q=!1;for(const Me of U){const Le=d[Me];Ke(Le)?Q?d[Me]=K[Me]:d[Me]=ee[Me]:Q=!0}const re=G?Dz(d,y,v):E?Fz(d):EM(d),ne=re||kM(d);if(ne)return Ue.invalid(ne);const le=G?v_(d,y,v):E?w_(d):d,[ve,we]=Gf(le,M,s),Ee=new Ue({ts:ve,zone:s,o:we,loc:u});return d.weekday&&R&&t.weekday!==Ee.weekday?Ue.invalid("mismatched weekday",`you can't specify both a weekday of ${d.weekday} and a date of ${Ee.toISO()}`):Ee}static fromISO(t,i={}){const[s,u]=AV(t);return Fc(s,u,i,"ISO 8601",t)}static fromRFC2822(t,i={}){const[s,u]=OV(t);return Fc(s,u,i,"RFC 2822",t)}static fromHTTP(t,i={}){const[s,u]=PV(t);return Fc(s,u,i,"HTTP",i)}static fromFormat(t,i,s={}){if(Ke(t)||Ke(i))throw new fr("fromFormat requires an input string and a format");const{locale:u=null,numberingSystem:d=null}=s,y=$t.fromOpts({locale:u,numberingSystem:d,defaultToEN:!0}),[v,_,M,E]=aG(y,t,i);return E?Ue.invalid(E):Fc(v,_,s,`format ${i}`,t,M)}static fromString(t,i,s={}){return Ue.fromFormat(t,i,s)}static fromSQL(t,i={}){const[s,u]=FV(t);return Fc(s,u,i,"SQL",t)}static invalid(t,i=null){if(!t)throw new fr("need to specify a reason the DateTime is invalid");const s=t instanceof js?t:new js(t,i);if(Qt.throwOnInvalid)throw new fz(s);return new Ue({invalid:s})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,i={}){const s=QM(t,$t.fromObject(i));return s?s.map(u=>u?u.val:null).join(""):null}static expandFormat(t,i={}){return YM(Bi.parseFormat(t),$t.fromObject(i)).map(u=>u.val).join("")}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Yg(this).weekYear:NaN}get weekNumber(){return this.isValid?Yg(this).weekNumber:NaN}get weekday(){return this.isValid?Yg(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?Xg(this).weekday:NaN}get localWeekNumber(){return this.isValid?Xg(this).weekNumber:NaN}get localWeekYear(){return this.isValid?Xg(this).weekYear:NaN}get ordinal(){return this.isValid?Jg(this.c).ordinal:NaN}get monthShort(){return this.isValid?Gd.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Gd.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Gd.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Gd.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const t=864e5,i=6e4,s=km(this.c),u=this.zone.offset(s-t),d=this.zone.offset(s+t),y=this.zone.offset(s-u*i),v=this.zone.offset(s-d*i);if(y===v)return[this];const _=s-y*i,M=s-v*i,E=Bd(_,y),O=Bd(M,v);return E.hour===O.hour&&E.minute===O.minute&&E.second===O.second&&E.millisecond===O.millisecond?[qa(this,{ts:_}),qa(this,{ts:M})]:[this]}get isInLeapYear(){return sd(this.year)}get daysInMonth(){return $y(this.year,this.month)}get daysInYear(){return this.isValid?Bh(this.year):NaN}get weeksInWeekYear(){return this.isValid?Op(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?Op(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(t={}){const{locale:i,numberingSystem:s,calendar:u}=Bi.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:i,numberingSystem:s,outputCalendar:u}}toUTC(t=0,i={}){return this.setZone(ki.instance(t),i)}toLocal(){return this.setZone(Qt.defaultZone)}setZone(t,{keepLocalTime:i=!1,keepCalendarTime:s=!1}={}){if(t=ha(t,Qt.defaultZone),t.equals(this.zone))return this;if(t.isValid){let u=this.ts;if(i||s){const d=t.offset(this.ts),y=this.toObject();[u]=Gf(y,d,t)}return qa(this,{ts:u,zone:t})}else return Ue.invalid(Ud(t))}reconfigure({locale:t,numberingSystem:i,outputCalendar:s}={}){const u=this.loc.clone({locale:t,numberingSystem:i,outputCalendar:s});return qa(this,{loc:u})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const i=Ty(t,j_),{minDaysInFirstWeek:s,startOfWeek:u}=b_(i,this.loc),d=!Ke(i.weekYear)||!Ke(i.weekNumber)||!Ke(i.weekday),y=!Ke(i.ordinal),v=!Ke(i.year),_=!Ke(i.month)||!Ke(i.day),M=v||_,E=i.weekYear||i.weekNumber;if((M||y)&&E)throw new jh("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(_&&y)throw new jh("Can't mix ordinal dates with month/day");let O;d?O=v_({...Sy(this.c,s,u),...i},s,u):Ke(i.ordinal)?(O={...this.toObject(),...i},Ke(i.day)&&(O.day=Math.min($y(O.year,O.month),O.day))):O=w_({...Jg(this.c),...i});const[C,R]=Gf(O,this.o,this.zone);return qa(this,{ts:C,o:R})}plus(t){if(!this.isValid)return this;const i=pt.fromDurationLike(t);return qa(this,P_(this,i))}minus(t){if(!this.isValid)return this;const i=pt.fromDurationLike(t).negate();return qa(this,P_(this,i))}startOf(t,{useLocaleWeeks:i=!1}={}){if(!this.isValid)return this;const s={},u=pt.normalizeUnit(t);switch(u){case"years":s.month=1;case"quarters":case"months":s.day=1;case"weeks":case"days":s.hour=0;case"hours":s.minute=0;case"minutes":s.second=0;case"seconds":s.millisecond=0;break}if(u==="weeks")if(i){const d=this.loc.getStartOfWeek(),{weekday:y}=this;y<d&&(s.weekNumber=this.weekNumber-1),s.weekday=d}else s.weekday=1;if(u==="quarters"){const d=Math.ceil(this.month/3);s.month=(d-1)*3+1}return this.set(s)}endOf(t,i){return this.isValid?this.plus({[t]:1}).startOf(t,i).minus(1):this}toFormat(t,i={}){return this.isValid?Bi.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,t):Zg}toLocaleString(t=xy,i={}){return this.isValid?Bi.create(this.loc.clone(i),t).formatDateTime(this):Zg}toLocaleParts(t={}){return this.isValid?Bi.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:i=!1,suppressMilliseconds:s=!1,includeOffset:u=!0,extendedZone:d=!1}={}){if(!this.isValid)return null;const y=t==="extended";let v=Qg(this,y);return v+="T",v+=C_(this,y,i,s,u,d),v}toISODate({format:t="extended"}={}){return this.isValid?Qg(this,t==="extended"):null}toISOWeekDate(){return Hd(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:i=!1,includeOffset:s=!0,includePrefix:u=!1,extendedZone:d=!1,format:y="extended"}={}){return this.isValid?(u?"T":"")+C_(this,y==="extended",i,t,s,d):null}toRFC2822(){return Hd(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Hd(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Qg(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:i=!1,includeOffsetSpace:s=!0}={}){let u="HH:mm:ss.SSS";return(i||t)&&(s&&(u+=" "),i?u+="z":t&&(u+="ZZ")),Hd(this,u,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():Zg}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const i={...this.c};return t.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,i="milliseconds",s={}){if(!this.isValid||!t.isValid)return pt.invalid("created by diffing an invalid DateTime");const u={locale:this.locale,numberingSystem:this.numberingSystem,...s},d=Gz(i).map(pt.normalizeUnit),y=t.valueOf()>this.valueOf(),v=y?this:t,_=y?t:this,M=HV(v,_,d,u);return y?M.negate():M}diffNow(t="milliseconds",i={}){return this.diff(Ue.now(),t,i)}until(t){return this.isValid?Jt.fromDateTimes(this,t):this}hasSame(t,i,s){if(!this.isValid)return!1;const u=t.valueOf(),d=this.setZone(t.zone,{keepLocalTime:!0});return d.startOf(i,s)<=u&&u<=d.endOf(i,s)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const i=t.base||Ue.fromObject({},{zone:this.zone}),s=t.padding?this<i?-t.padding:t.padding:0;let u=["years","months","days","hours","minutes","seconds"],d=t.unit;return Array.isArray(t.unit)&&(u=t.unit,d=void 0),R_(i,this.plus(s),{...t,numeric:"always",units:u,unit:d})}toRelativeCalendar(t={}){return this.isValid?R_(t.base||Ue.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(Ue.isDateTime))throw new fr("min requires all arguments be DateTimes");return __(t,i=>i.valueOf(),Math.min)}static max(...t){if(!t.every(Ue.isDateTime))throw new fr("max requires all arguments be DateTimes");return __(t,i=>i.valueOf(),Math.max)}static fromFormatExplain(t,i,s={}){const{locale:u=null,numberingSystem:d=null}=s,y=$t.fromOpts({locale:u,numberingSystem:d,defaultToEN:!0});return XM(y,t,i)}static fromStringExplain(t,i,s={}){return Ue.fromFormatExplain(t,i,s)}static get DATE_SHORT(){return xy}static get DATE_MED(){return nM}static get DATE_MED_WITH_WEEKDAY(){return gz}static get DATE_FULL(){return oM}static get DATE_HUGE(){return aM}static get TIME_SIMPLE(){return lM}static get TIME_WITH_SECONDS(){return uM}static get TIME_WITH_SHORT_OFFSET(){return hM}static get TIME_WITH_LONG_OFFSET(){return cM}static get TIME_24_SIMPLE(){return pM}static get TIME_24_WITH_SECONDS(){return dM}static get TIME_24_WITH_SHORT_OFFSET(){return fM}static get TIME_24_WITH_LONG_OFFSET(){return yM}static get DATETIME_SHORT(){return mM}static get DATETIME_SHORT_WITH_SECONDS(){return gM}static get DATETIME_MED(){return vM}static get DATETIME_MED_WITH_SECONDS(){return wM}static get DATETIME_MED_WITH_WEEKDAY(){return vz}static get DATETIME_FULL(){return bM}static get DATETIME_FULL_WITH_SECONDS(){return _M}static get DATETIME_HUGE(){return xM}static get DATETIME_HUGE_WITH_SECONDS(){return SM}}function zc(e){if(Ue.isDateTime(e))return e;if(e&&e.valueOf&&iu(e.valueOf()))return Ue.fromJSDate(e);if(e&&typeof e=="object")return Ue.fromObject(e);throw new fr(`Unknown datetime argument: ${e}, of type ${typeof e}`)}const xn="system",mu="unknown",Ma="UTC",dG=Intl.DateTimeFormat().resolvedOptions().timeZone,fG="shortOffset";function yG(e){return"timeZoneIANA"in e}function mG(e){return e.startsWith("UTC")}function My(e,t=!1){return{json:{read:{source:e,reader:(i,s)=>s[e]?qf(s[e]):null},write:!!t&&{allowNull:!0,writer(i,s){s[e]=i?gG(i):null}}}}}function qf(e,t=xn){return e?yG(e)?e.timeZoneIANA:vG(e,t):t}function gG(e){return{timeZoneIANA:e}}function vG(e,t=xn){if(!e||!a_.has(e.timeZone))return t;const i=a_.get(e.timeZone);return mG(e.timeZone)||e.respectsDaylightSaving?i:wG(i)}function wG(e){const t=Ue.local().setZone(e),i=Math.min(t.set({month:1,day:1}).offset,t.set({month:5}).offset);return i===0?"Etc/UTC":`Etc/GMT${ki.instance(-i).formatOffset(0,"narrow")}`}function Aue(e,t,i,s,u){if(t&&u==="date")return{timeZone:Ma,timeZoneName:void 0};const d=s.timeStyle||s.hour,y=i===mu;return{timeZone:y?u==="timestamp-offset"?void 0:e??Ma:i,timeZoneName:y&&d?fG:void 0}}const bG={year:void 0,month:void 0,day:void 0,weekday:void 0},_G={hour:void 0,minute:void 0,second:void 0},rI={timeZone:Ma},Hs={year:"numeric",month:"numeric",day:"numeric"},Vc={year:"numeric",month:"long",day:"numeric"},Gc={year:"numeric",month:"short",day:"numeric"},qc={year:"numeric",month:"long",weekday:"long",day:"numeric"},ra={hour:"numeric",minute:"numeric"},Xa={...ra,second:"numeric"},sI={hourCycle:"h23"},Uc={...ra,...sI},Bc={...Xa,...sI},nI={"short-date":Hs,"short-date-short-time":{...Hs,...ra},"short-date-short-time-24":{...Hs,...Uc},"short-date-long-time":{...Hs,...Xa},"short-date-long-time-24":{...Hs,...Bc},"short-date-le":Hs,"short-date-le-short-time":{...Hs,...ra},"short-date-le-short-time-24":{...Hs,...Uc},"short-date-le-long-time":{...Hs,...Xa},"short-date-le-long-time-24":{...Hs,...Bc},"long-month-day-year":Vc,"long-month-day-year-short-time":{...Vc,...ra},"long-month-day-year-short-time-24":{...Vc,...Uc},"long-month-day-year-long-time":{...Vc,...Xa},"long-month-day-year-long-time-24":{...Vc,...Bc},"day-short-month-year":Gc,"day-short-month-year-short-time":{...Gc,...ra},"day-short-month-year-short-time-24":{...Gc,...Uc},"day-short-month-year-long-time":{...Gc,...Xa},"day-short-month-year-long-time-24":{...Gc,...Bc},"long-date":qc,"long-date-short-time":{...qc,...ra},"long-date-short-time-24":{...qc,...Uc},"long-date-long-time":{...qc,...Xa},"long-date-long-time-24":{...qc,...Bc},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":ra,"long-time":Xa},xG=Ji()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),oI={ar:"ar-u-nu-latn-ca-gregory"};let tw=new WeakMap;const Pm=nI["short-date-short-time"];function SG(e){let t=tw.get(e);if(!t){const i=Pr(),s=oI[i]||i,u=C5(e.timeZone??xn),d={...e,timeZone:u};t=new Intl.DateTimeFormat(s,d),tw.set(e,t)}return t}function Oue(e){return nI[e]}function gu(e,t=Pm){return SG(t).format(e)}function Pue(e,t=Pm){return gu(new Date(e),{...t,...rI,..._G})}function Cue(e,t=Pm){return gu(new Date(`1970-01-01T${e}Z`),{...t,...rI,...bG})}function jue(e,t=Pm){if(t.timeZone)return gu(new Date(e),t);const i=Ue.fromISO(e,{setZone:!0}),s=Pr(),u=oI[s]??s,d=i.offset===0?Ma:t.timeZone,y={...t,timeZone:d};return i.toLocaleString(y,{locale:u})}function C5(e){switch(e){case xn:return dG;case mu:return Ma;default:return e}}$5(()=>{tw=new WeakMap});const $G={ar:"ar-u-nu-latn"};let Uf=new WeakMap,aI={};function TG(e){const t=e||aI;if(!Uf.has(t)){const i=Pr(),s=$G[Pr()]||i;Uf.set(t,new Intl.NumberFormat(s,e))}return Uf.get(t)}function Nue(e={}){const t={};return e.digitSeparator!=null&&(t.useGrouping=e.digitSeparator),e.places!=null&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function Iy(e,t){return Object.is(e,-0)&&(e=0),TG(t).format(e)}$5(()=>{Uf=new WeakMap,aI={}});const lI=de.getLogger("esri.intl.substitute");function Rue(e,t,i={}){const{format:s={}}=i;return hm(e,u=>MG(u,t,s))}function MG(e,t,i){let s,u;const d=e.indexOf(":");if(d===-1?s=e.trim():(s=e.slice(0,d).trim(),u=e.slice(d+1).trim()),!s)return"";const y=Kp(s,t);if(y==null)return"";const v=(u?i==null?void 0:i[u]:null)??(i==null?void 0:i[s]);return v?IG(y,v):u?EG(y,u):j5(y)}function IG(e,t){switch(t.type){case"date":return gu(e,t.intlOptions);case"number":return Iy(e,t.intlOptions);default:return lI.warn("missing format descriptor for key {key}"),j5(e)}}function EG(e,t){switch(t.toLowerCase()){case"dateformat":return gu(e);case"numberformat":return Iy(e);default:return lI.warn(`inline format is unsupported since 4.12: ${t}`),/^(dateformat|datestring)/i.test(t)?gu(e):/^numberformat/i.test(t)?Iy(e):j5(e)}}function j5(e){switch(typeof e){case"string":return e;case"number":return Iy(e);case"boolean":return""+e;default:return e instanceof Date?gu(e):""}}const D_=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,kG={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function F_(e){return e in kG}const r0=[],Wh=new Map;function z_(e){for(const t of Wh.keys())uI(e.pattern,t)&&Wh.delete(t)}function AG(e){return r0.includes(e)||(z_(e),r0.unshift(e)),Et(()=>{const t=r0.indexOf(e);t>-1&&(r0.splice(t,1),z_(e))})}async function N5(e){const t=Pr();Wh.has(e)||Wh.set(e,PG(e,t));const i=Wh.get(e);return i&&await CG.add(i),i}function OG(e){if(!D_.test(e))return null;const t=D_.exec(e);if(t===null)return null;const[,i,s]=t,u=i+(s?"-"+s.toUpperCase():"");return F_(u)?u:F_(i)?i:null}async function PG(e,t){const i=[];for(const s of r0)if(uI(s.pattern,e))try{return await s.fetchMessageBundle(e,t)}catch(u){i.push(u)}throw i.length?new ae("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:i}):new ae("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}function uI(e,t){return typeof e=="string"?t.startsWith(e):e.test(t)}$5(()=>{Wh.clear()});const CG=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=ts())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function jG(e,t,i,s){const u=t.exec(i);if(!u)throw new ae("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${t}"`);const d=u[1]?`${u[1]}/`:"",y=u[2],v=OG(s),_=`${d}${y}.json`,M=v?`${d}${y}_${v}.json`:_;let E;try{E=await V_(e(M))}catch(O){if(M===_)throw new ae("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:O});try{E=await V_(e(_))}catch(C){throw new ae("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:C})}}return E}async function V_(e){if(G_.fetchBundleAsset!=null)return G_.fetchBundleAsset(e);const t=await Yt(e,{responseType:"text"});return JSON.parse(t.data)}let NG=class{constructor({base:t="",pattern:i,location:s=new URL(window.location.href)}){let u;u=typeof s=="string"?d=>new URL(d,new URL(s,window.location.href)).href:s instanceof URL?d=>new URL(d,s).href:s,this.pattern=typeof i=="string"?new RegExp(`^${i}`):i,this.getAssetUrl=u,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)/)?(.*)$`)}fetchMessageBundle(t,i){return jG(this.getAssetUrl,this.matcher,t,i)}};function RG(e){return new NG(e)}const G_={};AG(RG({pattern:"esri/",location:xt}));const LG={};function DG(e){var i;const t={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:{...e.has},map:{...e.map},packages:((i=e.packages)==null?void 0:i.concat())||[],paths:{...e.paths}};return e.hasOwnProperty("async")||(t.async=!0),e.hasOwnProperty("isDebug")||(t.isDebug=!1),e.baseUrl||(t.baseUrl=LG.baseUrl),t}let FG=class{constructor(){const t=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(i=>{this[i]=(...s)=>t[i](...s)})}},Bf=class{constructor(){this._dispatcher=new FG,this._workerPostMessage({type:xi.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(t){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=t,t&&this.addEventListener("message",t)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(t){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=t,t&&this.addEventListener("messageerror",t)}get onerror(){return this._onerrorHandler}set onerror(t){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=t,t&&this.addEventListener("error",t)}postMessage(t){Z1(()=>{this._workerMessageHandler(new MessageEvent("message",{data:t}))})}dispatchEvent(t){return this._dispatcher.dispatchEvent(t)}addEventListener(t,i,s){this._dispatcher.addEventListener(t,i,s)}removeEventListener(t,i,s){this._dispatcher.removeEventListener(t,i,s)}_workerPostMessage(t){Z1(()=>{this.dispatchEvent(new MessageEvent("message",{data:t}))})}async _workerMessageHandler(t){const i=Ap(t);if(i&&i.type===xi.OPEN){const{modulePath:s,jobId:u}=i;let d=await Ta.loadWorker(s);d||(d=await Se(()=>import(s),[]));const y=Ta.connect(d);this._workerPostMessage({type:xi.OPENED,jobId:u,data:y})}}};const iw=de.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:zG}=xi,VG='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,s)=>{if(t){if(t.aborted)return s(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:ABORT,jobId:n}),s(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:s}),self.postMessage({type:INVOKE,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\\nModules version: ${r}\\nAssets version: ${n??s}\\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case OPEN:let n;function t(e){const o=n.connect(e);self.postMessage({type:OPENED,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case RESPONSE:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let Wd,Jd;const q_="Failed to create Worker. Fallback to execute module in main thread";async function GG(){if(!oe("esri-workers"))return U_(new Bf);if(!Wd&&!Jd)try{const t=VG.split('"{CONFIGURATION}"').join(`'${qG()}'`);Wd=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}catch(t){Jd=t||{}}let e;if(Wd)try{e=new Worker(Wd,{name:"esri-worker-"+UG++})}catch{iw.warn(q_,Jd),e=new Bf}else iw.warn(q_,Jd),e=new Bf;return U_(e)}async function U_(e){return new Promise(t=>{function i(u){const d=Ap(u);d&&d.type===zG&&(e.removeEventListener("message",i),e.removeEventListener("error",s),t(e))}function s(u){u.preventDefault(),e.removeEventListener("message",i),e.removeEventListener("error",s),iw.warn("Failed to create Worker. Fallback to execute module in main thread",u),(e=new Bf).addEventListener("message",i),e.addEventListener("error",s)}e.addEventListener("message",i),e.addEventListener("error",s)})}function qG(){let e;if(at.default!=null){const u={...at};delete u.default,e=JSON.parse(JSON.stringify(u))}else e=JSON.parse(JSON.stringify(at));e.assetsPath=Yr(e.assetsPath),e.defaultAssetsPath=e.defaultAssetsPath?Yr(e.defaultAssetsPath):void 0,e.request.interceptors=[],e.log.interceptors=[],e.locale=Pr(),e.has={"esri-csp-restrictions":oe("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":oe("esri-2d-update-debug"),"esri-2d-log-updating":oe("esri-2d-log-updating"),"featurelayer-pbf":oe("featurelayer-pbf"),"featurelayer-simplify-thresholds":oe("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":oe("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":oe("featurelayer-simplify-mobile-factor"),"esri-atomics":oe("esri-atomics"),"esri-shared-array-buffer":oe("esri-shared-array-buffer"),"esri-tiles-debug":oe("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":oe("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":oe("feature-polyline-generalization-factor"),"host-webworker":1},e.workers.loaderUrl&&(e.workers.loaderUrl=Yr(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=Yr(e.workers.workerPath):e.workers.workerPath=Yr(xt("esri/core/workers/RemoteClient.js")),e.workers.useDynamicImport=!1;const t=at.workers.loaderConfig,i=DG({baseUrl:t==null?void 0:t.baseUrl,locale:Pr(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...t==null?void 0:t.has},map:{...t==null?void 0:t.map},paths:{...t==null?void 0:t.paths},packages:(t==null?void 0:t.packages)||[]});return JSON.stringify({esriConfig:e,loaderConfig:i,kernelInfo:{buildDate:lT,fullVersion:i5,revision:uT}})}let UG=0;const{ABORT:B_,INVOKE:BG,OPEN:HG,OPENED:WG,RESPONSE:Hc}=xi;let JG=class hI{static async create(t){const i=await GG();return new hI(i,t)}constructor(t,i){this._outJobs=new Map,this._inJobs=new Map,this.worker=t,this.id=i,t.addEventListener("message",this._onMessage.bind(this)),t.addEventListener("error",s=>{s.preventDefault(),de.getLogger("esri.core.workers.WorkerOwner").error(s)})}terminate(){this.worker.terminate()}async open(t,i={}){const{signal:s}=i,u=iM();return new Promise((d,y)=>{const v={resolve:d,reject:y,abortHandle:R9(s,()=>{this._outJobs.delete(u),this._post({type:B_,jobId:u})})};this._outJobs.set(u,v),this._post({type:HG,jobId:u,modulePath:t})})}_onMessage(t){const i=Ap(t);if(i)switch(i.type){case WG:this._onOpenedMessage(i);break;case Hc:this._onResponseMessage(i);break;case B_:this._onAbortMessage(i);break;case BG:this._onInvokeMessage(i)}}_onAbortMessage(t){const i=this._inJobs,s=t.jobId,u=i.get(s);u&&(u.controller&&u.controller.abort(),i.delete(s))}_onInvokeMessage(t){const{methodName:i,jobId:s,data:u,abortable:d}=t,y=d?new AbortController:null,v=this._inJobs,_=hz[i];let M;try{if(typeof _!="function")throw new TypeError(`${i} is not a function`);M=_.call(null,u,{signal:y?y.signal:null})}catch(E){return void this._post({type:Hc,jobId:s,error:kp(E)})}Oa(M)?(v.set(s,{controller:y,promise:M}),M.then(E=>{v.has(s)&&(v.delete(s),this._post({type:Hc,jobId:s},E))},E=>{v.has(s)&&(v.delete(s),E||(E={message:"Error encountered at method"+i}),Rr(E)||this._post({type:Hc,jobId:s,error:kp(E||{message:`Error encountered at method ${i}`})}))})):this._post({type:Hc,jobId:s},M)}_onOpenedMessage(t){const{jobId:i,data:s}=t,u=this._outJobs.get(i);u&&(this._outJobs.delete(i),Kt(u.abortHandle),u.resolve(s))}_onResponseMessage(t){const{jobId:i,error:s,data:u}=t,d=this._outJobs.get(i);d&&(this._outJobs.delete(i),Kt(d.abortHandle),s?d.reject(ae.fromJSON(JSON.parse(s))):d.resolve(u))}_post(t,i,s){return x5(this.worker,t,i,s)}};const H_=oe("host-browser")?Math.min(navigator.hardwareConcurrency-1,oe("workers-pool-size")):0;let ql=oe("esri-mobile")?Math.min(H_,3):H_;ql||(ql=oe("safari")&&oe("mac")?7:2);let W_=0;const Hf=[];function KG(){cI()}async function Kd(e,t){const i=new uz,{registryTarget:s,...u}=t;return await i.open(e,u),s&&ez(s,i),i}async function ZG(e,t={}){if(typeof e!="string")throw new ae("workers:undefined-module","modulePath is missing");let i=t.strategy||"distributed";if(oe("host-webworker")&&!oe("esri-workers")&&(i="local"),i==="local"){let s=await Ta.loadWorker(e);s||(s=await Se(()=>import(e),[])),Gt(t.signal);const u=t.client||s;return Kd([Ta.connect(s)],{...t,client:u})}if(await cI(),Gt(t.signal),i==="dedicated"){const s=W_++%ql;return Kd([await Hf[s].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const s=Math.min(t.maxNumWorkers,ql);if(s<ql){const u=new Array(s);for(let d=0;d<s;++d){const y=W_++%ql;u[d]=Hf[y].open(e,t)}return Kd(u,t)}}return Kd(Hf.map(s=>s.open(e,t)),t)}let Zd=null;async function cI(){if(Zd)return Zd;new AbortController;const e=[];for(let t=0;t<ql;t++){const i=JG.create(t).then(s=>(Hf[t]=s,s));e.push(i)}return Zd=Promise.all(e),Zd}const Io=Pt.radius,ps=Pt.eccentricitySquared,YG={a1:Io*ps,a2:Io*ps*Io*ps,a3:Io*ps*ps/2,a4:Io*ps*Io*ps*2.5,a5:Io*ps+Io*ps*ps/2,a6:1-ps};1/294.9786982,1/298.257222101,Pt.radius,Pt.flattening,xa.radius,xa.flattening,1/192.0430107526882,lo.radius,lo.flattening,1/10.2079945799458,1/43.61604095563141,lo.radius;var X;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",e[e.WGS84=2]="WGS84",e[e.WEB_MERCATOR=3]="WEB_MERCATOR",e[e.WGS84_ECEF=4]="WGS84_ECEF",e[e.CGCS2000=5]="CGCS2000",e[e.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT",e[e.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF",e[e.GCSMARS2000=8]="GCSMARS2000",e[e.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF",e[e.GCSMOON2000=10]="GCSMOON2000",e[e.LON_LAT=11]="LON_LAT",e[e.PLATE_CARREE=12]="PLATE_CARREE"})(X||(X={}));const pI={[X.WGS84]:{[X.CGCS2000]:null,[X.GCSMARS2000]:null,[X.GCSMOON2000]:null,[X.LON_LAT]:_t,[X.WGS84_COMPARABLE_LON_LAT]:_t,[X.SPHERICAL_ECEF]:Hl,[X.SPHERICAL_MARS_PCPF]:null,[X.SPHERICAL_MOON_PCPF]:null,[X.UNKNOWN]:null,[X.WEB_MERCATOR]:Pp,[X.PLATE_CARREE]:Ul,[X.WGS84]:_t,[X.WGS84_ECEF]:Jl},[X.CGCS2000]:{[X.CGCS2000]:_t,[X.GCSMARS2000]:null,[X.GCSMOON2000]:null,[X.LON_LAT]:_t,[X.WGS84_COMPARABLE_LON_LAT]:_t,[X.SPHERICAL_ECEF]:Hl,[X.SPHERICAL_MARS_PCPF]:null,[X.SPHERICAL_MOON_PCPF]:null,[X.UNKNOWN]:null,[X.WEB_MERCATOR]:null,[X.PLATE_CARREE]:Ul,[X.WGS84]:null,[X.WGS84_ECEF]:Jl},[X.GCSMARS2000]:{[X.CGCS2000]:null,[X.GCSMARS2000]:_t,[X.GCSMOON2000]:null,[X.LON_LAT]:_t,[X.WGS84_COMPARABLE_LON_LAT]:null,[X.SPHERICAL_ECEF]:null,[X.SPHERICAL_MARS_PCPF]:Y_,[X.SPHERICAL_MOON_PCPF]:null,[X.UNKNOWN]:null,[X.WEB_MERCATOR]:null,[X.PLATE_CARREE]:null,[X.WGS84]:null,[X.WGS84_ECEF]:null},[X.GCSMOON2000]:{[X.CGCS2000]:null,[X.GCSMARS2000]:null,[X.GCSMOON2000]:_t,[X.LON_LAT]:_t,[X.WGS84_COMPARABLE_LON_LAT]:null,[X.SPHERICAL_ECEF]:null,[X.SPHERICAL_MARS_PCPF]:null,[X.SPHERICAL_MOON_PCPF]:Z_,[X.UNKNOWN]:null,[X.WEB_MERCATOR]:null,[X.PLATE_CARREE]:null,[X.WGS84]:null,[X.WGS84_ECEF]:null},[X.WEB_MERCATOR]:{[X.CGCS2000]:null,[X.GCSMARS2000]:null,[X.GCSMOON2000]:null,[X.LON_LAT]:Jh,[X.WGS84_COMPARABLE_LON_LAT]:Jh,[X.SPHERICAL_ECEF]:QG,[X.SPHERICAL_MARS_PCPF]:null,[X.SPHERICAL_MOON_PCPF]:null,[X.UNKNOWN]:null,[X.WEB_MERCATOR]:_t,[X.PLATE_CARREE]:iq,[X.WGS84]:Jh,[X.WGS84_ECEF]:eq},[X.WGS84_ECEF]:{[X.CGCS2000]:Kl,[X.GCSMARS2000]:null,[X.GCSMOON2000]:null,[X.LON_LAT]:Kl,[X.WGS84_COMPARABLE_LON_LAT]:Kl,[X.SPHERICAL_ECEF]:cq,[X.SPHERICAL_MARS_PCPF]:null,[X.SPHERICAL_MOON_PCPF]:null,[X.UNKNOWN]:null,[X.WEB_MERCATOR]:pq,[X.PLATE_CARREE]:rq,[X.WGS84]:Kl,[X.WGS84_ECEF]:_t},[X.SPHERICAL_ECEF]:{[X.CGCS2000]:Wl,[X.GCSMARS2000]:null,[X.GCSMOON2000]:null,[X.LON_LAT]:Wl,[X.WGS84_COMPARABLE_LON_LAT]:Wl,[X.SPHERICAL_ECEF]:_t,[X.SPHERICAL_MARS_PCPF]:null,[X.SPHERICAL_MOON_PCPF]:null,[X.UNKNOWN]:null,[X.WEB_MERCATOR]:lq,[X.PLATE_CARREE]:sq,[X.WGS84]:Wl,[X.WGS84_ECEF]:uq},[X.SPHERICAL_MARS_PCPF]:{[X.CGCS2000]:null,[X.GCSMARS2000]:Q_,[X.GCSMOON2000]:null,[X.LON_LAT]:Q_,[X.WGS84_COMPARABLE_LON_LAT]:null,[X.SPHERICAL_ECEF]:null,[X.SPHERICAL_MARS_PCPF]:_t,[X.SPHERICAL_MOON_PCPF]:null,[X.UNKNOWN]:null,[X.WEB_MERCATOR]:null,[X.PLATE_CARREE]:null,[X.WGS84]:null,[X.WGS84_ECEF]:null},[X.SPHERICAL_MOON_PCPF]:{[X.CGCS2000]:null,[X.GCSMARS2000]:null,[X.GCSMOON2000]:X_,[X.LON_LAT]:X_,[X.WGS84_COMPARABLE_LON_LAT]:null,[X.SPHERICAL_ECEF]:null,[X.SPHERICAL_MARS_PCPF]:null,[X.SPHERICAL_MOON_PCPF]:_t,[X.UNKNOWN]:null,[X.WEB_MERCATOR]:null,[X.PLATE_CARREE]:null,[X.WGS84]:null,[X.WGS84_ECEF]:null},[X.UNKNOWN]:{[X.CGCS2000]:null,[X.GCSMARS2000]:null,[X.GCSMOON2000]:null,[X.LON_LAT]:null,[X.WGS84_COMPARABLE_LON_LAT]:null,[X.SPHERICAL_ECEF]:null,[X.SPHERICAL_MARS_PCPF]:null,[X.SPHERICAL_MOON_PCPF]:null,[X.UNKNOWN]:_t,[X.WEB_MERCATOR]:null,[X.PLATE_CARREE]:null,[X.WGS84]:null,[X.WGS84_ECEF]:null},[X.LON_LAT]:{[X.CGCS2000]:_t,[X.GCSMARS2000]:_t,[X.GCSMOON2000]:_t,[X.LON_LAT]:_t,[X.WGS84_COMPARABLE_LON_LAT]:_t,[X.SPHERICAL_ECEF]:Hl,[X.SPHERICAL_MARS_PCPF]:Y_,[X.SPHERICAL_MOON_PCPF]:Z_,[X.UNKNOWN]:null,[X.WEB_MERCATOR]:Pp,[X.PLATE_CARREE]:Ul,[X.WGS84]:_t,[X.WGS84_ECEF]:Jl},[X.WGS84_COMPARABLE_LON_LAT]:{[X.CGCS2000]:null,[X.GCSMARS2000]:null,[X.GCSMOON2000]:null,[X.LON_LAT]:_t,[X.WGS84_COMPARABLE_LON_LAT]:_t,[X.SPHERICAL_ECEF]:Hl,[X.SPHERICAL_MARS_PCPF]:null,[X.SPHERICAL_MOON_PCPF]:null,[X.UNKNOWN]:null,[X.WEB_MERCATOR]:null,[X.PLATE_CARREE]:Ul,[X.WGS84]:_t,[X.WGS84_ECEF]:Jl},[X.PLATE_CARREE]:{[X.CGCS2000]:Bl,[X.GCSMARS2000]:null,[X.GCSMOON2000]:null,[X.LON_LAT]:Bl,[X.WGS84_COMPARABLE_LON_LAT]:Bl,[X.SPHERICAL_ECEF]:nq,[X.SPHERICAL_MARS_PCPF]:null,[X.SPHERICAL_MOON_PCPF]:null,[X.UNKNOWN]:null,[X.WEB_MERCATOR]:oq,[X.PLATE_CARREE]:_t,[X.WGS84]:Bl,[X.WGS84_ECEF]:aq}};function XG(e){const t=rw(e,fq);return pI[t][X.WGS84_COMPARABLE_LON_LAT]}function dI(e,t,i=fI()){return e==null||t==null?null:dq(e,t,i).projector}function rw(e,t){return e?t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=Iu(e,1)),gy(e)?t.spatialReferenceId=X.SPHERICAL_ECEF:Mp(e)?t.spatialReferenceId=X.WGS84:hu(e)?t.spatialReferenceId=X.WEB_MERCATOR:MD(e)?t.spatialReferenceId=X.PLATE_CARREE:e.wkt===PD.wkt?t.spatialReferenceId=X.WGS84_ECEF:e.wkid===uu.CGCS2000?t.spatialReferenceId=X.CGCS2000:e.wkt===c5.wkt?t.spatialReferenceId=X.SPHERICAL_MARS_PCPF:e.wkt===p5.wkt?t.spatialReferenceId=X.SPHERICAL_MOON_PCPF:a5(e)?t.spatialReferenceId=X.GCSMARS2000:u5(e)?t.spatialReferenceId=X.GCSMOON2000:t.spatialReferenceId=X.UNKNOWN):X.UNKNOWN}function _t(e,t,i,s){e!==i&&(i[s++]=e[t++],i[s++]=e[t++],i[s]=e[t])}function Jh(e,t,i,s){i[s++]=pc*(e[t++]/Pt.radius),i[s++]=pc*(Math.PI/2-2*Math.atan(Math.exp(-e[t++]/Pt.radius))),i[s]=e[t]}function QG(e,t,i,s){Jh(e,t,i,s),Hl(i,s,i,s)}function eq(e,t,i,s){Jh(e,t,i,s),Jl(i,s,i,s)}function tq(e,t,i,s,u){const d=.4999999*Math.PI,y=rs(cc*e[t+1],-d,d),v=Math.sin(y);i[s++]=cc*e[t]*u.radius,i[s++]=u.halfSemiMajorAxis*Math.log((1+v)/(1-v)),i[s]=e[t+2]}function Pp(e,t,i,s){tq(e,t,i,s,Pt)}const J_=Pt.radius*Math.PI/180,K_=180/(Pt.radius*Math.PI);function Ul(e,t,i,s){i[s]=e[t]*J_,i[s+1]=e[t+1]*J_,i[s+2]=e[t+2]}function Bl(e,t,i,s){i[s]=e[t]*K_,i[s+1]=e[t+1]*K_,i[s+2]=e[t+2]}function iq(e,t,i,s){Jh(e,t,i,s),Ul(i,s,i,s)}function rq(e,t,i,s){Kl(e,t,i,s),Ul(i,s,i,s)}function sq(e,t,i,s){Wl(e,t,i,s),Ul(i,s,i,s)}function nq(e,t,i,s){Bl(e,t,i,s),Hl(i,s,i,s)}function oq(e,t,i,s){Bl(e,t,i,s),Pp(i,s,i,s)}function aq(e,t,i,s){Bl(e,t,i,s),Jl(i,s,i,s)}function R5(e,t,i,s,u){const d=u+e[t+2],y=cc*e[t+1],v=cc*e[t],_=Math.cos(y);i[s++]=Math.cos(v)*_*d,i[s++]=Math.sin(v)*_*d,i[s]=Math.sin(y)*d}function Z_(e,t,i,s){R5(e,t,i,s,xa.radius)}function Y_(e,t,i,s){R5(e,t,i,s,lo.radius)}function Hl(e,t,i,s){R5(e,t,i,s,Pt.radius)}function L5(e,t,i,s,u){const d=e[t],y=e[t+1],v=e[t+2],_=Math.sqrt(d*d+y*y+v*v),M=U$(v/(_===0?1:_)),E=Math.atan2(y,d);i[s++]=pc*E,i[s++]=pc*M,i[s]=_-u}function X_(e,t,i,s){L5(e,t,i,s,xa.radius)}function Q_(e,t,i,s){L5(e,t,i,s,lo.radius)}function Wl(e,t,i,s){L5(e,t,i,s,Pt.radius)}function lq(e,t,i,s){Wl(e,t,i,s),Pp(i,s,i,s)}function uq(e,t,i,s){Wl(e,t,i,s),Jl(i,s,i,s)}function hq(e,t,i,s,u){const d=cc*e[t],y=cc*e[t+1],v=e[t+2],_=Math.sin(y),M=Math.cos(y),E=u.radius/Math.sqrt(1-u.eccentricitySquared*_*_);i[s++]=(E+v)*M*Math.cos(d),i[s++]=(E+v)*M*Math.sin(d),i[s++]=(E*(1-u.eccentricitySquared)+v)*_}function Jl(e,t,i,s){hq(e,t,i,s,Pt)}function Kl(e,t,i,s){const u=YG,d=e[t],y=e[t+1],v=e[t+2];let _,M,E,O,C,R,L,G,U,K,ee,Q,re,ne,le,ve,we,Ee,Me,Le,Fe;_=Math.abs(v),M=d*d+y*y,E=Math.sqrt(M),O=M+v*v,C=Math.sqrt(O),Le=Math.atan2(y,d),R=v*v/O,L=M/O,ne=u.a2/C,le=u.a3-u.a4/C,L>.3?(G=_/C*(1+L*(u.a1+ne+R*le)/C),Me=Math.asin(G),K=G*G,U=Math.sqrt(1-K)):(U=E/C*(1-R*(u.a5-ne-L*le)/C),Me=Math.acos(U),K=1-U*U,G=Math.sqrt(K)),ee=1-Pt.eccentricitySquared*K,Q=Pt.radius/Math.sqrt(ee),re=u.a6*Q,ne=E-Q*U,le=_-re*G,we=U*ne+G*le,ve=U*le-G*ne,Ee=ve/(re/ee+we),Me+=Ee,Fe=we+ve*Ee/2,v<0&&(Me=-Me),i[s++]=pc*Le,i[s++]=pc*Me,i[s]=Fe}function cq(e,t,i,s){Kl(e,t,i,s),Hl(i,s,i,s)}function pq(e,t,i,s){Kl(e,t,i,s),Pp(i,s,i,s)}function dq(e,t,i){if(e==null||t==null||i.source.spatialReference===e&&i.dest.spatialReference===t)return i;const s=rw(e,i.source),u=rw(t,i.dest);return s===X.UNKNOWN&&u===X.UNKNOWN?Xt(e,t)?i.projector=_t:i.projector=null:i.projector=pI[s][u],i}function fI(){return{source:{spatialReference:null,spatialReferenceId:X.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:X.UNKNOWN,metersPerUnit:1},projector:_t}}const fq={spatialReference:null,spatialReferenceId:X.UNKNOWN},zue={spatialReference:null,spatialReferenceId:X.UNKNOWN},yI=fI(),cc=iL(1),pc=q$(1);function ad(e,t,i,s,u,d,y=1){const v=dI(t,u,yI);if(v==null)return!1;if(v===_t){if(e===s&&i===d)return!0;const M=i+3*y;for(let E=i,O=d;E<M;E++,O++)s[O]=e[E];return!0}const _=i+3*y;for(let M=i,E=d;M<_;M+=3,E+=3)v(e,M,s,E);return!0}const Vue=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:ad},Symbol.toStringTag,{value:"Module"}));function e7(e,t,i,s,u,d){return Yd[0]=e,Yd[1]=t,Yd[2]=i,ad(Yd,s,0,u,d,0,1)}const Yd=Pa();let Xd=0,e2=class sw{static fromGE(t){const i=new sw;return i._wkt=t.wkt,i._wkid=t.wkid,i._isInverse=t.isInverse,i}constructor(t){this.uid=Xd++,t?(this._wkt=t.wkt!=null?t.wkt:null,this._wkid=t.wkid!=null?t.wkid:-1,this._isInverse=t.isInverse!=null&&t.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(t){this._wkt=t,this.uid=Xd++}get wkid(){return this._wkid}set wkid(t){this._wkid=t,this.uid=Xd++}get isInverse(){return this._isInverse}set isInverse(t){this._isInverse=t,this.uid=Xd++}getInverse(){const t=new sw;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t}},Ey=class s0{static cacheKey(t,i){var s,u,d,y,v,_;return[((s=t.wkid)==null?void 0:s.toString())??"-1",((u=t.wkt)==null?void 0:u.toString())??"",((d=t.wkt2)==null?void 0:d.toString())??"",((y=i.wkid)==null?void 0:y.toString())??"-1",((v=i.wkt)==null?void 0:v.toString())??"",((_=i.wkt2)==null?void 0:_.toString())??""].join()}static fromGE(t){const i=new s0;let s="";for(const u of t.steps){const d=e2.fromGE(u);i.steps.push(d),s+=d.uid.toString()+","}return i._cachedProjection={},i._gtlistentry=null,i._chain=s,i}constructor(t){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,t==null?void 0:t.steps)for(const i of t.steps)i instanceof e2?this.steps.push(i):this.steps.push(new e2({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}getInverse(){const t=new s0;t.steps=[];for(let i=this.steps.length-1;i>=0;i--){const s=this.steps[i];t.steps.push(s.getInverse())}return t}getGTListEntry(){let t="";for(const i of this.steps)t+=i.uid.toString()+",";return t!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=t),this._gtlistentry}assignCachedGe(t,i,s){this._cachedProjection[s0.cacheKey(t,i)]=s}getCachedGeTransformation(t,i){let s="";for(const d of this.steps)s+=d.uid.toString()+",";s!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=s);const u=this._cachedProjection[s0.cacheKey(t,i)];return u===void 0?null:u}};function mI(e,t,i){if(t==null||i==null||i.vcsWkid||Xt(t,i)||Sa(t)||Sa(i))return null;const s=vy(t)/vy(i);if(s===1)return null;switch(e){case"point":case"esriGeometryPoint":return u=>yq(u,s);case"polyline":case"esriGeometryPolyline":return u=>gq(u,s);case"polygon":case"esriGeometryPolygon":return u=>mq(u,s);case"multipoint":case"esriGeometryMultipoint":return u=>vq(u,s);case"extent":case"esriGeometryEnvelope":return u=>wq(u,s);default:return null}}function yq(e,t){(e==null?void 0:e.z)!=null&&(e.z*=t)}function mq(e,t){if(e)for(const i of e.rings)for(const s of i)s.length>2&&(s[2]*=t)}function gq(e,t){if(e)for(const i of e.paths)for(const s of i)s.length>2&&(s[2]*=t)}function vq(e,t){if(e)for(const i of e.points)i.length>2&&(i[2]*=t)}function wq(e,t){e&&e.zmin!=null&&e.zmax!=null&&(e.zmin*=t,e.zmax*=t)}let Fs=null,Ia=null,np=null,Wf={};const D5=new rd;function Ou(){return!!Fs&&s5()}function gI(){return!!Ou()||(Pe(D5),Ea(),!1)}function Ea(e){return np==null&&(np=Promise.all([dT(),Se(()=>Promise.resolve().then(()=>yae),void 0).then(t=>t.g),Se(()=>import("./hydrated-06b257c1.js"),[])])),np.then(([,t,{hydratedAdapter:i}])=>{Gt(e),Ia=i,Fs=t.default,Fs._enableProjection(xD),D5.notify()})}function Na(e,t,i=null,s=null){return Array.isArray(e)?e.length===0?[]:nw(Ia,e,e[0].spatialReference,t,i,s):nw(Ia,[e],e.spatialReference,t,i,s)[0]}function nw(e,t,i,s,u=null,d=null){if(i==null||s==null)return t;if(fo(i,s,u))return t.map(y=>Jf(y,i,s));if(u==null&&gy(i))return t.map(y=>Jf(y,i,He.WGS84)).map(y=>Cp(y,s));if(u==null&&gy(s))return t.map(y=>Cp(y,He.WGS84)).map(y=>Jf(y,He.WGS84,s));if(u==null){const y=Ey.cacheKey(i,s);Wf[y]!==void 0?u=Wf[y]:((u=wI(i,s,void 0))==null&&(u=new Ey),Wf[y]=u)}if(Fs==null||e==null)throw new Cm;return d!=null?Fs._project(e,t,i,s,u,d):Fs._project(e,t,i,s,u)}function bq(e,t){const i=vI([e],t);return i.pending!=null?{pending:i.pending,geometry:null}:i.geometries!=null?{pending:null,geometry:i.geometries[0]}:{pending:null,geometry:null}}function vI(e,t){if(!Ou()){for(const i of e)if(i!=null&&!Xt(i.spatialReference,t)&&Si(i.spatialReference)&&Si(t)&&!fo(i.spatialReference,t))return Pe(D5),{pending:Ea(),geometries:null}}return{pending:null,geometries:e.map(i=>i==null?null:Xt(i.spatialReference,t)?i:Si(i.spatialReference)&&Si(t)?Cp(i,t):null)}}function wI(e,t,i=null){if(e==null||t==null)return null;if(Fs==null||Ia==null)throw new Cm;const s=Fs._getTransformation(Ia,e,t,i,i==null?void 0:i.spatialReference);return s!==null?Ey.fromGE(s):null}function _q(e,t,i=null){if(Fs==null||Ia==null)throw new Cm;const s=Fs._getTransformationBySuitability(Ia,e,t,i,i==null?void 0:i.spatialReference);if(s!==null){const u=[];for(const d of s)u.push(Ey.fromGE(d));return u}return[]}let Cm=class extends ae{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function xq(){Fs=null,Ia=null,np=null,Wf={}}const Sq={get loadPromise(){return np}};function Cp(e,t){try{const i=Na(e,t);if(i==null)return null;"xmin"in e&&"xmin"in i&&(i.zmin=e.zmin,i.zmax=e.zmax);const s=mI(i.type,e.spatialReference,t);return s!=null&&s(i),i}catch(i){if(!(i instanceof Cm))throw i;return null}}async function $q(e,t,i){const s=e.spatialReference;return s!=null&&t!=null&&await F5(s,t,null,i),Cp(e,t)}function fo(e,t,i){return!i&&(!!Xt(e,t)||Si(e)&&Si(t)&&!!dI(e,t,yI))}async function F5(e,t,i,s){if(Ou())return $6(s);if(Array.isArray(e)){for(const{source:u,dest:d,geographicTransformation:y}of e)if(!fo(u,d,y))return Ea(s)}else if(!fo(e,t,i))return Ea(s);return $6(s)}function Jf(e,t,i){return e?"x"in e?bI(e,t,new Je,i,0):"xmin"in e?$I(e,t,new Tt,i,0):"rings"in e?SI(e,t,new po,i,0):"paths"in e?xI(e,t,new Cs,i,0):"points"in e?_I(e,t,new $m,i,0):null:null}function Tq(e,t,i=t.spatialReference,s=0){return i!=null&&e.spatialReference!=null&&bI(e,e.spatialReference,t,i,s)!=null}function bI(e,t,i,s,u){qi[0]=e.x,qi[1]=e.y;const d=e.z;return qi[2]=d!==void 0?d:u,ad(qi,t,0,qi,s,0,1)?(i.x=qi[0],i.y=qi[1],i.spatialReference=s,d!==void 0||Sa(s)?(i.z=qi[2],i.hasZ=!0):(i.z=void 0,i.hasZ=!1),e.m===void 0?(i.m=void 0,i.hasM=!1):(i.m=e.m,i.hasM=!0),i):null}function Mq(e,t,i=t.spatialReference,s=0){return e.spatialReference!=null&&i!=null&&_I(e,e.spatialReference,t,i,s)!=null}function _I(e,t,i,s,u){const{points:d,hasZ:y,hasM:v}=e,_=[],M=d.length,E=[];for(const C of d)E.push(C[0],C[1],y?C[2]:u);if(!ad(E,t,0,E,s,0,M))return null;const O=y||Sa(s);for(let C=0;C<M;++C){const R=3*C,L=E[R],G=E[R+1];O&&v?_.push([L,G,E[R+2],d[C][3]]):O?_.push([L,G,E[R+2]]):v?_.push([L,G,d[C][2]]):_.push([L,G])}return i.points=_,i.spatialReference=s,i.hasZ=y,i.hasM=v,i}function Iq(e,t,i=t.spatialReference,s=0){return e.spatialReference!=null&&i!=null&&xI(e,e.spatialReference,t,i,s)!=null}function xI(e,t,i,s,u){const{paths:d,hasZ:y,hasM:v}=e,_=[];if(!TI(d,y??!1,v??!1,t,_,s,u))return null;const M=y||Sa(s);return i.paths=_,i.spatialReference=s,i.hasZ=M,i.hasM=v,i}function Eq(e,t,i=t.spatialReference,s=0){return e.spatialReference!=null&&i!=null&&SI(e,e.spatialReference,t,i,s)!=null}function SI(e,t,i,s,u){const{rings:d,hasZ:y,hasM:v}=e,_=[];if(!TI(d,y??!1,v??!1,t,_,s,u))return null;const M=y||Sa(s);return i.rings=_,i.spatialReference=s,i.hasZ=M,i.hasM=v,i}function kq(e,t,i=t.spatialReference,s=0){return e.spatialReference!=null&&i!=null&&$I(e,e.spatialReference,t,i,s)!=null}function $I(e,t,i,s,u){const{xmin:d,ymin:y,xmax:v,ymax:_,hasZ:M,hasM:E}=e,O=M?e.zmin:u;if(!e7(d,y,O,t,qi,s))return null;const C=M||Sa(s);i.xmin=qi[0],i.ymin=qi[1],C&&(i.zmin=qi[2]);const R=M?e.zmax:u;return e7(v,_,R,t,qi,s)?(i.xmax=qi[0],i.ymax=qi[1],C&&(i.zmax=qi[2]),E&&(i.mmin=e.mmin,i.mmax=e.mmax),i.spatialReference=s,i):null}function TI(e,t,i,s,u,d,y=0){const v=new Array;for(const E of e)for(const O of E)v.push(O[0],O[1],t?O[2]:y);if(!ad(v,s,0,v,d,0,v.length/3))return!1;let _=0;u.length=0;const M=t||Sa(d);for(const E of e){const O=new Array;for(const C of E)M&&i?O.push([v[_++],v[_++],v[_++],C[3]]):M?O.push([v[_++],v[_++],v[_++]]):i?(O.push([v[_++],v[_++],C[2]]),_++):(O.push([v[_++],v[_++]]),_++);u.push(O)}return!0}function Aq(e){return e!=null&&XG(e)!=null}const qi=Pa(),que=Object.freeze(Object.defineProperty({__proto__:null,canProjectToWGS84ComparableLonLat:Aq,canProjectWithoutEngine:fo,getTransformation:wI,getTransformations:_q,initializeProjection:F5,isLoaded:Ou,isLoadedOrLoad:gI,load:Ea,project:Na,projectExtent:kq,projectMany:nw,projectMultipoint:Mq,projectOrLoad:bq,projectOrLoadMany:vI,projectPoint:Tq,projectPolygon:Eq,projectPolyline:Iq,projectWithZConversion:$q,projectWithoutEngine:Jf,test:Sq,tryProjectWithZConversion:Cp,unload:xq},Symbol.toStringTag,{value:"Module"}));var ow;let Ys=ow=class extends pe{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new ow({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};w([S({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Ys.prototype,"cols",void 0),w([S({type:St,json:{write:!0}})],Ys.prototype,"level",void 0),w([S({type:String,json:{write:!0}})],Ys.prototype,"levelValue",void 0),w([S({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Ys.prototype,"origin",void 0),w([S({type:Number,json:{write:!0}})],Ys.prototype,"resolution",void 0),w([S({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Ys.prototype,"rows",void 0),w([S({type:Number,json:{write:!0}})],Ys.prototype,"scale",void 0),Ys=ow=w([B("esri.layers.support.LOD")],Ys);const sa=Ys;let Oq=class{constructor(t,i,s,u,d=void 0){this.id=t,this.level=i,this.row=s,this.col=u,this.extent=d}};var Ro;const t7=new et({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let Mi=Ro=class extends pe{static create(e={}){const{resolutionFactor:t=1,scales:i,size:s=256,spatialReference:u=He.WebMercator,numLODs:d=24}=e;if(!Si(u)){const O=[];if(i)for(let C=0;C<i.length;C++){const R=i[C];O.push(new sa({level:C,scale:R,resolution:R}))}else{let C=5e-4;for(let R=d-1;R>=0;R--)O.unshift(new sa({level:R,scale:C,resolution:C})),C*=2}return new Ro({dpi:96,lods:O,origin:new Je(0,0,u),size:[s,s],spatialReference:u})}const y=Or(u),v=e.origin?new Je({x:e.origin.x,y:e.origin.y,spatialReference:u}):new Je(y?{x:y.origin[0],y:y.origin[1],spatialReference:u}:{x:0,y:0,spatialReference:u}),_=96,M=1/(Iu(u)*39.37*_),E=[];if(i)for(let O=0;O<i.length;O++){const C=i[O],R=C*M;E.push(new sa({level:O,scale:C,resolution:R}))}else{let O=n5(u)?512/s*5916575275917094e-7:256/s*591657527591555e-6;const C=Math.ceil(d/t);E.push(new sa({level:0,scale:O,resolution:O*M}));for(let R=1;R<C;R++){const L=O/2**t,G=L*M;E.push(new sa({level:R,scale:L,resolution:G})),O=L}}return new Ro({dpi:_,lods:E,origin:v,size:[s,s],spatialReference:u})}constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const i=Or(e);return e.isWrappable&&!!i&&Math.abs(i.origin[0]-t.x)<=i.dx}return!1}readOrigin(e,t){return Je.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,i=0;const s=[],u=this._levelToLOD={};e&&(t=-1/0,i=1/0,e.forEach(d=>{s.push(d.scale),t=d.scale>t?d.scale:t,i=d.scale<i?d.scale:i,u[d.level]=d})),this._set("scales",s),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[1]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];const i=Math.floor(e),s=i+1;return t[i]/(t[i]/t[s])**(e-i)}scaleToZoom(e){const t=this.scales,i=t.length-1;let s=0;for(;s<i;s++){const u=t[s],d=t[s+1];if(u<=e)return s;if(d===e)return s+1;if(u>e&&d<e)return s+Math.log(u/e)/Math.log(u/d)}return s}snapScale(e,t=.95){const i=this.scaleToZoom(e);return i%Math.floor(i)>=t?this.zoomToScale(Math.ceil(i)):this.zoomToScale(Math.floor(i))}tileAt(e,t,i,s){const u=this.lodAt(e);if(!u)return null;let d,y;if(typeof t=="number")d=t,y=i;else if(Xt(t.spatialReference,this.spatialReference))d=t.x,y=t.y,s=i;else{const M=xm(t,this.spatialReference);if(M==null)return null;d=M.x,y=M.y,s=i}const v=u.resolution*this.size[0],_=u.resolution*this.size[1];return s||(s=new Oq(null,0,0,0,_n())),s.level=e,s.row=Math.floor((this.origin.y-y)/_+.001),s.col=Math.floor((d-this.origin.x)/v+.001),this.updateTileInfo(s),s}updateTileInfo(e,t=Ro.ExtrapolateOptions.NONE){let i=this.lodAt(e.level);if(!i&&t===Ro.ExtrapolateOptions.POWER_OF_TWO){const y=this.lods[this.lods.length-1];y.level<e.level&&(i=y)}if(!i)return;const s=e.level-i.level,u=i.resolution*this.size[0]/2**s,d=i.resolution*this.size[1]/2**s;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=_n()),e.extent[0]=this.origin.x+e.col*u,e.extent[1]=this.origin.y-(e.row+1)*d,e.extent[2]=e.extent[0]+u,e.extent[3]=e.extent[1]+d}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||t.parentLevel===-1)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const i=this.lodAt(t.level);if(i==null)return null;const{resolution:s}=i,u=s*this.size[0],d=s*this.size[1];return e[0]=this.origin.x+t.col*u,e[1]=this.origin.y-(t.row+1)*d,e[2]=e[0]+u,e[3]=e[1]+d,e}lodAt(e){var t;return((t=this._levelToLOD)==null?void 0:t[e])??null}clone(){return Ro.fromJSON(this.write({}))}getOrCreateCompatible(e,t){if(this.size[0]===256&&this.size[1]===256)return e===256?this:null;const i=[],s=this.lods.length;for(let u=0;u<s;u++){const d=this.lods[u],y=d.resolution*t;i.push(new sa({level:d.level,scale:d.scale,resolution:y}))}return new Ro({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:i})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let i=0;i<e.length;i++){const s=e[i];this._upsampleLevels[s.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/s.resolution:0},t=s}}};w([S({type:Number,json:{write:!0}})],Mi.prototype,"compressionQuality",void 0),w([S({type:Number,json:{write:!0}})],Mi.prototype,"dpi",void 0),w([S({type:String,json:{read:t7.read,write:t7.write,origins:{"web-scene":{read:!1,write:!1}}}})],Mi.prototype,"format",void 0),w([S({readOnly:!0})],Mi.prototype,"isWrappable",null),w([S({type:Je,json:{write:!0}})],Mi.prototype,"origin",void 0),w([me("origin")],Mi.prototype,"readOrigin",null),w([S({type:[sa],value:null,json:{write:!0}})],Mi.prototype,"lods",null),w([S({readOnly:!0})],Mi.prototype,"scales",void 0),w([S({cast:e=>Array.isArray(e)?e:typeof e=="number"?[e,e]:[256,256]})],Mi.prototype,"size",void 0),w([me("size",["rows","cols"])],Mi.prototype,"readSize",null),w([_e("size",{cols:{type:St},rows:{type:St}})],Mi.prototype,"writeSize",null),w([S({type:He,json:{write:!0}})],Mi.prototype,"spatialReference",void 0),Mi=Ro=w([B("esri.layers.support.TileInfo")],Mi),function(e){var t;(t=e.ExtrapolateOptions||(e.ExtrapolateOptions={}))[t.NONE=0]="NONE",t[t.POWER_OF_TWO=1]="POWER_OF_TWO"}(Mi||(Mi={}));const Pq=Mi,Kf={widthBreakpoint:{getValue(e){const t=e.viewSize[0],i=e.breakpoints,s=this.values;return t<=i.xsmall?s.xsmall:t<=i.small?s.small:t<=i.medium?s.medium:t<=i.large?s.large:s.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){const t=e.viewSize[1],i=e.breakpoints,s=this.values;return t<=i.xsmall?s.xsmall:t<=i.small?s.small:t<=i.medium?s.medium:t<=i.large?s.large:s.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){const t=e.viewSize,i=t[0],s=t[1],u=this.values;return s>=i?u.portrait:u.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},t2={xsmall:544,small:768,medium:992,large:1200};function Cq(e){const t=e;return t&&t.xsmall<t.small&&t.small<t.medium&&t.medium<t.large}function i2(e,t){return t?Kf[e].valueToClassName[t].split(" "):[]}const jq=e=>{let t=class extends e{constructor(...i){super(...i),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=t2}initialize(){this.addHandles(Ge(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),rr))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(i){if(i===this._get("breakpoints"))return;const s=Cq(i);if(!s){const u=JSON.stringify(t2,null,2);console.warn("provided breakpoints are not valid, using defaults:"+u)}i=s?i:t2,this._set("breakpoints",{...i})}_updateClassNames(){if(!this.container)return;const i=tr.acquire(),s=tr.acquire();let u,d=!1;for(u in Kf){const y=this[u],v=Kf[u].getValue({viewSize:this.size,breakpoints:this.breakpoints});y!==v&&(d=!0,this[u]=v,i2(u,y).forEach(_=>s.push(_)),i2(u,v).forEach(_=>i.push(_)))}d&&(this._applyClassNameChanges(i,s),tr.release(i),tr.release(s))}_applyClassNameChanges(i,s){const u=this.container;u&&(s.forEach(d=>u.classList.remove(d)),i.forEach(d=>u.classList.add(d)))}_removeActiveClassNames(){const i=this.container;if(!i)return;let s;for(s in Kf)i2(s,this[s]).forEach(u=>i.classList.remove(u))}};return w([S()],t.prototype,"breakpoints",null),w([S()],t.prototype,"orientation",void 0),w([S()],t.prototype,"widthBreakpoint",void 0),w([S()],t.prototype,"heightBreakpoint",void 0),t=w([B("esri.views.BreakpointsOwner")],t),t};function z5(e){return typeof e=="string"?document.getElementById(e):e??null}function MI(e){for(;e.hasChildNodes();)e.removeChild(e.firstChild)}function i7(e,t){const i=t.parentNode;i&&i.insertBefore(e,t)}function r7(e,t){for(;;){const i=e.firstChild;if(!i)break;t.appendChild(i)}}let ru=class extends Ne{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(t,i,s={}){return this._installWatch(t,i,s,Ge)}addWhen(t,i,s={}){return this._installWatch(t,i,s,yu)}addOnCollectionChange(t,i,{initial:s=!1,final:u=!1}={}){const d=++this._handleId;return this.addHandles([uc(t,"after-changes",this._createSyncUpdatingCallback(),ku),uc(t,"change",i,{onListenerAdd:s?y=>i({added:y.toArray(),removed:[]}):void 0,onListenerRemove:u?y=>i({added:[],removed:y.toArray()}):void 0})],d),Et(()=>this.removeHandles(d))}addPromise(t){if(t==null)return t;const i=++this._handleId;this.addHandles(Et(()=>{this._pendingPromises.delete(t)&&(this._pendingPromises.size!==0||this.hasHandles(Qd)||this._set("updating",!1))}),i),this._pendingPromises.add(t),this._set("updating",!0);const s=()=>this.removeHandles(i);return t.then(s,s),t}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(t,i,s={},u){const d=++this._handleId;s.sync||this._installSyncUpdatingWatch(t,d);const y=u(t,i,s);return this.addHandles(y,d),Et(()=>this.removeHandles(d))}_installSyncUpdatingWatch(t,i){const s=this._createSyncUpdatingCallback(),u=Ge(t,s,{sync:!0,equals:()=>!1});return this.addHandles(u,i),u}_createSyncUpdatingCallback(){return()=>{this.removeHandles(Qd),++this._scheduleHandleId;const t=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles(gc(()=>{t===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(Qd))}),Qd)}}};w([S({readOnly:!0})],ru.prototype,"updating",void 0),ru=w([B("esri.core.support.UpdatingHandles")],ru);const Qd=-42;/*!
 * @esri/arcgis-html-sanitizer - v3.0.1 - Tue Nov 15 2022 09:46:54 GMT-0800 (Pacific Standard Time)
 * Copyright (c) 2022 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei(雷宗民) <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 */var Nq=function(e){if(typeof e!="object"||e===null||Object.prototype.toString.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},Rl={exports:{}},qt={},jp={exports:{}},Pu={};function II(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function Rq(e,t,i){}function Lq(e,t,i){}var Dq=/javascript\s*\:/img;function Fq(e,t){return Dq.test(t)?"":t}Pu.whiteList=II();Pu.getDefaultWhiteList=II;Pu.onAttr=Rq;Pu.onIgnoreAttr=Lq;Pu.safeAttrValue=Fq;var zq={indexOf:function(e,t){var i,s;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,s=e.length;i<s;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var s,u;if(Array.prototype.forEach)return e.forEach(t,i);for(s=0,u=e.length;s<u;s++)t.call(i,e[s],s,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},Wc=zq;function Vq(e,t){e=Wc.trimRight(e),e[e.length-1]!==";"&&(e+=";");var i=e.length,s=!1,u=0,d=0,y="";function v(){if(!s){var E=Wc.trim(e.slice(u,d)),O=E.indexOf(":");if(O!==-1){var C=Wc.trim(E.slice(0,O)),R=Wc.trim(E.slice(O+1));if(C){var L=t(u,y.length,C,R,E);L&&(y+=L+"; ")}}}u=d+1}for(;d<i;d++){var _=e[d];if(_==="/"&&e[d+1]==="*"){var M=e.indexOf("*/",d+2);if(M===-1)break;d=M+1,u=d+1,s=!1}else _==="("?s=!0:_===")"?s=!1:_===";"?s||v():_===`
`&&v()}return Wc.trim(y)}var Gq=Vq,ef=Pu,qq=Gq;function s7(e){return e==null}function Uq(e){var t={};for(var i in e)t[i]=e[i];return t}function EI(e){e=Uq(e||{}),e.whiteList=e.whiteList||ef.whiteList,e.onAttr=e.onAttr||ef.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||ef.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||ef.safeAttrValue,this.options=e}EI.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,i=t.options,s=i.whiteList,u=i.onAttr,d=i.onIgnoreAttr,y=i.safeAttrValue,v=qq(e,function(_,M,E,O,C){var R=s[E],L=!1;if(R===!0?L=R:typeof R=="function"?L=R(O):R instanceof RegExp&&(L=R.test(O)),L!==!0&&(L=!1),O=y(E,O),!!O){var G={position:M,sourcePosition:_,source:C,isWhite:L};if(L){var U=u(E,O,G);return s7(U)?E+":"+O:U}else{var U=d(E,O,G);if(!s7(U))return U}}});return v};var Bq=EI;(function(e,t){var i=Pu,s=Bq;function u(y,v){var _=new s(v);return _.process(y)}t=e.exports=u,t.FilterCSS=s;for(var d in i)t[d]=i[d]})(jp,jp.exports);var V5={indexOf:function(e,t){var i,s;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,s=e.length;i<s;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var s,u;if(Array.prototype.forEach)return e.forEach(t,i);for(s=0,u=e.length;s<u;s++)t.call(i,e[s],s,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,i=t.exec(e);return i?i.index:-1}},Hq=jp.exports.FilterCSS,Wq=jp.exports.getDefaultWhiteList,ky=V5;function kI(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var AI=new Hq;function Jq(e,t,i){}function Kq(e,t,i){}function Zq(e,t,i){}function Yq(e,t,i){}function OI(e){return e.replace(Qq,"&lt;").replace(eU,"&gt;")}function Xq(e,t,i,s){if(i=LI(i),t==="href"||t==="src"){if(i=ky.trim(i),i==="#")return"#";if(!(i.substr(0,7)==="http://"||i.substr(0,8)==="https://"||i.substr(0,7)==="mailto:"||i.substr(0,4)==="tel:"||i.substr(0,11)==="data:image/"||i.substr(0,6)==="ftp://"||i.substr(0,2)==="./"||i.substr(0,3)==="../"||i[0]==="#"||i[0]==="/"))return""}else if(t==="background"){if(tf.lastIndex=0,tf.test(i))return""}else if(t==="style"){if(n7.lastIndex=0,n7.test(i)||(o7.lastIndex=0,o7.test(i)&&(tf.lastIndex=0,tf.test(i))))return"";s!==!1&&(s=s||AI,i=s.process(i))}return i=DI(i),i}var Qq=/</g,eU=/>/g,tU=/"/g,iU=/&quot;/g,rU=/&#([a-zA-Z0-9]*);?/gim,sU=/&colon;?/gim,nU=/&newline;?/gim,tf=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,n7=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,o7=/u\s*r\s*l\s*\(.*/gi;function PI(e){return e.replace(tU,"&quot;")}function CI(e){return e.replace(iU,'"')}function jI(e){return e.replace(rU,function(i,s){return s[0]==="x"||s[0]==="X"?String.fromCharCode(parseInt(s.substr(1),16)):String.fromCharCode(parseInt(s,10))})}function NI(e){return e.replace(sU,":").replace(nU," ")}function RI(e){for(var t="",i=0,s=e.length;i<s;i++)t+=e.charCodeAt(i)<32?" ":e.charAt(i);return ky.trim(t)}function LI(e){return e=CI(e),e=jI(e),e=NI(e),e=RI(e),e}function DI(e){return e=PI(e),e=OI(e),e}function oU(){return""}function aU(e,t){typeof t!="function"&&(t=function(){});var i=!Array.isArray(e);function s(y){return i?!0:ky.indexOf(e,y)!==-1}var u=[],d=!1;return{onIgnoreTag:function(y,v,_){if(s(y))if(_.isClosing){var M="[/removed]",E=_.position+M.length;return u.push([d!==!1?d:_.position,E]),d=!1,M}else return d||(d=_.position),"[removed]";else return t(y,v,_)},remove:function(y){var v="",_=0;return ky.forEach(u,function(M){v+=y.slice(_,M[0]),_=M[1]}),v+=y.slice(_),v}}}function lU(e){for(var t="",i=0;i<e.length;){var s=e.indexOf("<!--",i);if(s===-1){t+=e.slice(i);break}t+=e.slice(i,s);var u=e.indexOf("-->",s);if(u===-1)break;i=u+3}return t}function uU(e){var t=e.split("");return t=t.filter(function(i){var s=i.charCodeAt(0);return s===127?!1:s<=31?s===10||s===13:!0}),t.join("")}qt.whiteList=kI();qt.getDefaultWhiteList=kI;qt.onTag=Jq;qt.onIgnoreTag=Kq;qt.onTagAttr=Zq;qt.onIgnoreTagAttr=Yq;qt.safeAttrValue=Xq;qt.escapeHtml=OI;qt.escapeQuote=PI;qt.unescapeQuote=CI;qt.escapeHtmlEntities=jI;qt.escapeDangerHtml5Entities=NI;qt.clearNonPrintableCharacter=RI;qt.friendlyAttrValue=LI;qt.escapeAttrValue=DI;qt.onIgnoreTagStripAll=oU;qt.StripTagBody=aU;qt.stripCommentTag=lU;qt.stripBlankChar=uU;qt.cssFilter=AI;qt.getDefaultCSSWhiteList=Wq;var jm={},na=V5;function hU(e){var t=na.spaceIndex(e),i;return t===-1?i=e.slice(1,-1):i=e.slice(1,t+1),i=na.trim(i).toLowerCase(),i.slice(0,1)==="/"&&(i=i.slice(1)),i.slice(-1)==="/"&&(i=i.slice(0,-1)),i}function cU(e){return e.slice(0,2)==="</"}function pU(e,t,i){var s="",u=0,d=!1,y=!1,v=0,_=e.length,M="",E="";e:for(v=0;v<_;v++){var O=e.charAt(v);if(d===!1){if(O==="<"){d=v;continue}}else if(y===!1){if(O==="<"){s+=i(e.slice(u,v)),d=v,u=v;continue}if(O===">"){s+=i(e.slice(u,d)),E=e.slice(d,v+1),M=hU(E),s+=t(d,s.length,M,E,cU(E)),u=v+1,d=!1;continue}if(O==='"'||O==="'")for(var C=1,R=e.charAt(v-C);R.trim()===""||R==="=";){if(R==="="){y=O;continue e}R=e.charAt(v-++C)}}else if(O===y){y=!1;continue}}return u<e.length&&(s+=i(e.substr(u))),s}var dU=/[^a-zA-Z0-9\\_:.-]/gim;function fU(e,t){var i=0,s=0,u=[],d=!1,y=e.length;function v(C,R){if(C=na.trim(C),C=C.replace(dU,"").toLowerCase(),!(C.length<1)){var L=t(C,R||"");L&&u.push(L)}}for(var _=0;_<y;_++){var M=e.charAt(_),E,O;if(d===!1&&M==="="){d=e.slice(i,_),i=_+1,s=e.charAt(i)==='"'||e.charAt(i)==="'"?i:mU(e,_+1);continue}if(d!==!1&&_===s){if(O=e.indexOf(M,_+1),O===-1)break;E=na.trim(e.slice(s+1,O)),v(d,E),d=!1,_=O,i=_+1;continue}if(/\s|\n|\t/.test(M))if(e=e.replace(/\s|\n|\t/g," "),d===!1)if(O=yU(e,_),O===-1){E=na.trim(e.slice(i,_)),v(E),d=!1,i=_+1;continue}else{_=O-1;continue}else if(O=gU(e,_-1),O===-1){E=na.trim(e.slice(i,_)),E=a7(E),v(d,E),d=!1,i=_+1;continue}else continue}return i<e.length&&(d===!1?v(e.slice(i)):v(d,a7(na.trim(e.slice(i))))),na.trim(u.join(" "))}function yU(e,t){for(;t<e.length;t++){var i=e[t];if(i!==" ")return i==="="?t:-1}}function mU(e,t){for(;t<e.length;t++){var i=e[t];if(i!==" ")return i==="'"||i==='"'?t:-1}}function gU(e,t){for(;t>0;t--){var i=e[t];if(i!==" ")return i==="="?t:-1}}function vU(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function a7(e){return vU(e)?e.substr(1,e.length-2):e}jm.parseTag=pU;jm.parseAttr=fU;var wU=jp.exports.FilterCSS,Is=qt,FI=jm,bU=FI.parseTag,_U=FI.parseAttr,Zf=V5;function rf(e){return e==null}function xU(e){var t=Zf.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=Zf.trim(e.slice(t+1,-1));var i=e[e.length-1]==="/";return i&&(e=Zf.trim(e.slice(0,-1))),{html:e,closing:i}}function SU(e){var t={};for(var i in e)t[i]=e[i];return t}function $U(e){var t={};for(var i in e)Array.isArray(e[i])?t[i.toLowerCase()]=e[i].map(function(s){return s.toLowerCase()}):t[i.toLowerCase()]=e[i];return t}function zI(e){e=SU(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=Is.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=$U(e.whiteList||e.allowList):e.whiteList=Is.whiteList,e.onTag=e.onTag||Is.onTag,e.onTagAttr=e.onTagAttr||Is.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||Is.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||Is.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||Is.safeAttrValue,e.escapeHtml=e.escapeHtml||Is.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new wU(e.css))}zI.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,i=t.options,s=i.whiteList,u=i.onTag,d=i.onIgnoreTag,y=i.onTagAttr,v=i.onIgnoreTagAttr,_=i.safeAttrValue,M=i.escapeHtml,E=t.cssFilter;i.stripBlankChar&&(e=Is.stripBlankChar(e)),i.allowCommentTag||(e=Is.stripCommentTag(e));var O=!1;i.stripIgnoreTagBody&&(O=Is.StripTagBody(i.stripIgnoreTagBody,d),d=O.onIgnoreTag);var C=bU(e,function(R,L,G,U,K){var ee={sourcePosition:R,position:L,isClosing:K,isWhite:Object.prototype.hasOwnProperty.call(s,G)},Q=u(G,U,ee);if(!rf(Q))return Q;if(ee.isWhite){if(ee.isClosing)return"</"+G+">";var re=xU(U),ne=s[G],le=_U(re.html,function(ve,we){var Ee=Zf.indexOf(ne,ve)!==-1,Me=y(G,ve,we,Ee);return rf(Me)?Ee?(we=_(G,ve,we,E),we?ve+'="'+we+'"':ve):(Me=v(G,ve,we,Ee),rf(Me)?void 0:Me):Me});return U="<"+G,le&&(U+=" "+le),re.closing&&(U+=" /"),U+=">",U}else return Q=d(G,U,ee),rf(Q)?M(U):Q},M);return O&&(C=O.remove(C)),C};var TU=zI;(function(e,t){var i=qt,s=jm,u=TU;function d(v,_){var M=new u(_);return M.process(v)}t=e.exports=d,t.filterXSS=d,t.FilterXSS=u,function(){for(var v in i)t[v]=i[v];for(var _ in s)t[_]=s[_]}();function y(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}y()&&(self.filterXSS=e.exports)})(Rl,Rl.exports);var MU=function(){function e(t,i){var s=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted","preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(d,y,v,_){return d==="a"&&y==="href"||(d==="img"||d==="source")&&y==="src"?s.sanitizeUrl(v):Rl.exports.safeAttrValue(d,y,v,_)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var u;t&&!i?u=t:t&&i?(u=Object.create(this.arcgisFilterOptions),Object.keys(t).forEach(function(d){d==="whiteList"?u.whiteList=s._extendObjectOfArrays([s.arcgisWhiteList,t.whiteList||{}]):u[d]=t[d]})):(u=Object.create(this.arcgisFilterOptions),u.whiteList=this.arcgisWhiteList),this.xssFilterOptions=u,this._xssFilter=new Rl.exports.FilterXSS(u)}return e.prototype.sanitize=function(t,i){switch(i===void 0&&(i={}),typeof t){case"number":return isNaN(t)||!isFinite(t)?null:t;case"boolean":return t;case"string":return this._xssFilter.process(t);case"object":return this._iterateOverObject(t,i);default:return i.allowUndefined&&typeof t>"u"?void 0:null}},e.prototype.sanitizeUrl=function(t,i){var s=(i??{}).isProtocolRequired,u=s===void 0?!0:s,d=this._trim(t.substring(0,t.indexOf(":"))),y=t==="/",v=/^#/.test(t),_=d&&this.allowedProtocols.indexOf(d.toLowerCase())>-1;return y||v||_?Rl.exports.escapeAttrValue(t):!d&&!u?Rl.exports.escapeAttrValue("https://".concat(t)):""},e.prototype.sanitizeHTMLAttribute=function(t,i,s,u){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(t,i,s,u):Rl.exports.safeAttrValue(t,i,s,u)},e.prototype.validate=function(t,i){i===void 0&&(i={});var s=this.sanitize(t,i);return{isValid:t===s,sanitized:s}},e.prototype.encodeHTML=function(t){var i=this;return String(t).replace(/[&<>"'\/]/g,function(s){return i._entityMap[s]})},e.prototype.encodeAttrValue=function(t){var i=/^[a-zA-Z0-9]$/;return String(t).replace(/[\x00-\xFF]/g,function(s,u){return i.test(s)?s:"&#x".concat(Number(t.charCodeAt(u)).toString(16),";")})},e.prototype._extendObjectOfArrays=function(t){var i={};return t.forEach(function(s){Object.keys(s).forEach(function(u){Array.isArray(s[u])&&Array.isArray(i[u])?i[u]=i[u].concat(s[u]):i[u]=s[u]})}),i},e.prototype._iterateOverObject=function(t,i){var s=this;i===void 0&&(i={});try{var u=!1,d=void 0;if(Array.isArray(t))d=t.reduce(function(v,_){var M=s.validate(_,i);return M.isValid?v.concat([_]):(u=!0,v.concat([M.sanitized]))},[]);else if(Nq(t)){var y=Object.keys(t);d=y.reduce(function(v,_){var M=t[_],E=s.validate(M,i);return E.isValid?v[_]=M:(u=!0,v[_]=E.sanitized),v},{})}else return i.allowUndefined&&typeof t>"u"?void 0:null;return u?d:t}catch{return null}},e.prototype._trim=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},e}();const Nm=new Map;function VI(){Nm.clear()}function IU(e){return Nm.get(e)}function EU(e,t){Nm.set(e,t)}function r2(e){Nm.delete(e)}const kU=de.getLogger("esri.widgets.support.widgetUtils");function AU(e){const t=tr.acquire();for(let s=0;s<arguments.length;s++){const u=arguments[s],d=typeof u;if(d==="string")t.push(u);else if(Array.isArray(u))t.push.apply(t,u);else if(d==="object")for(const y in u)u[y]&&t.push(y)}const i=t.join(" ");return tr.release(t),i}(()=>{const e=new Map,t=new ResizeObserver(s=>{var u;VI();for(const d of s)(u=e.get(d.target))==null||u(d)}),i=(s,u,d)=>(e.has(s)&&kU.error("Already observing element",s),e.set(s,u),t.observe(s,d),Et(()=>{t.unobserve(s),e.delete(s)}));return(s,u,d)=>{let y=null;return Zp([Ge(()=>typeof s=="function"?s():s,v=>{y==null||y.remove(),v&&(y=i(v,u,d))},so),Et(()=>y==null?void 0:y.remove())])}})();function OU(e){const t=e==null?void 0:e.closest("[dir]");return t!==null&&t instanceof HTMLElement&&t.dir==="rtl"||document.dir==="rtl"}function Hue(e){const t="data-node-ref";this[e.getAttribute(t)]=null}function Wue(e){const t="data-node-ref";this[e.getAttribute(t)]=e}const PU=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],CU=PU.reduce((e,t)=>(e[t]=[],e),{}),jU=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],GI=new MU({whiteList:CU,onTagAttr:(e,t,i)=>{const s=`${t}="${i}"`;if(jU.includes(t))return s},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function NU(e){return e==="Enter"||e===" "}const qI="http://www.w3.org/",Rm=`${qI}2000/svg`,UI=`${qI}1999/xlink`;let l7=[],G5=(e,t)=>{let i={};return Object.keys(e).forEach(s=>{i[s]=e[s]}),t&&Object.keys(t).forEach(s=>{i[s]=t[s]}),i},q5=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),BI=e=>{if(typeof e!="string")throw new Error("Style values must be strings")},RU=(e,t,i)=>{if(t.vnodeSelector!==""){for(let s=i;s<e.length;s++)if(q5(e[s],t))return s}return-1},s2=(e,t,i,s)=>{let u=e[t];if(u.vnodeSelector==="")return;let d=u.properties;if(!(d&&(d.key===void 0?d.bind:d.key))){for(let y=0;y<e.length;y++)if(y!==t){let v=e[y];if(q5(v,u))throw new Error(`${i.vnodeSelector} had a ${u.vnodeSelector} child ${s==="added"?s:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},LU=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},aw=[],lw=!1,HI=e=>{(e.children||[]).forEach(HI),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},u7=()=>{lw=!1,aw.forEach(HI),aw.length=0},h7=e=>{aw.push(e),lw||(lw=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(u7,{timeout:16}):setTimeout(u7,16))},c7=e=>{let t=e.domNode;if(e.properties){let i=e.properties.exitAnimation;if(i)return t.style.pointerEvents="none",void i(t,()=>{t.parentNode&&(t.parentNode.removeChild(t),h7(e))},e.properties)}t.parentNode&&(t.parentNode.removeChild(t),h7(e))},DU=(e,t,i)=>{if(!t)return;let s=i.eventHandlerInterceptor,u=Object.keys(t),d=u.length;for(let y=0;y<d;y++){let v=u[y],_=t[v];if(v==="className")throw new Error('Property "className" is not supported, use "class".');if(v==="class")hw(e,_,!0);else if(v==="classes"){let M=Object.keys(_),E=M.length;for(let O=0;O<E;O++){let C=M[O];_[C]&&e.classList.add(C)}}else if(v==="styles"){let M=Object.keys(_),E=M.length;for(let O=0;O<E;O++){let C=M[O],R=_[C];R&&(BI(R),i.styleApplyer(e,C,R))}}else if(v!=="key"&&_!=null){let M=typeof _;M==="function"?(v.lastIndexOf("on",0)===0&&(s&&(_=s(v,_,e,t)),v==="oninput"&&function(){let E=_;_=function(O){E.apply(this,[O]),O.target["oninput-value"]=O.target.value}}()),e[v]=_):i.namespace===Rm?v==="href"?e.setAttributeNS(UI,v,_):e.setAttribute(v,_):M==="string"&&v!=="value"?v==="innerHTML"?e[v]=GI.sanitize(_):uw(e)&&v in e?e[v]=_:e.setAttribute(v,_):e[v]=_}}};function uw(e){if(!(e instanceof Element&&e.tagName.includes("-")))return!1;const t=window.customElements.get(e.tagName.toLowerCase());return!!t&&e instanceof t}let Ay,FU=(e,t,i)=>{if(t)for(let s of t)Nh(s,e,void 0,i)},WI=(e,t,i)=>{FU(e,t.children,i),t.text&&(e.textContent=t.text),DU(e,t.properties,i),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,i,t.vnodeSelector,t.properties,t.children])},Nh=(e,t,i,s)=>{let u,d=0,y=e.vnodeSelector,v=t.ownerDocument;if(y==="")u=e.domNode=v.createTextNode(e.text),i!==void 0?t.insertBefore(u,i):t.appendChild(u);else{for(let _=0;_<=y.length;++_){let M=y.charAt(_);if(_===y.length||M==="."||M==="#"){let E=y.charAt(d-1),O=y.slice(d,_);E==="."?u.classList.add(O):E==="#"?u.id=O:(O==="svg"&&(s=G5(s,{namespace:Rm})),s.namespace!==void 0?u=e.domNode=v.createElementNS(s.namespace,O):(u=e.domNode=e.domNode||v.createElement(O),O==="input"&&e.properties&&e.properties.type!==void 0&&u.setAttribute("type",e.properties.type)),i!==void 0?t.insertBefore(u,i):u.parentNode!==t&&t.appendChild(u)),d=_+1}}WI(u,e,s)}},hw=(e,t,i)=>{t&&t.split(" ").forEach(s=>{s&&e.classList.toggle(s,i)})},zU=(e,t,i,s)=>{if(!i)return;let u=!1,d=Object.keys(i),y=d.length;for(let v=0;v<y;v++){let _=d[v],M=i[_],E=t[_];if(_==="class")E!==M&&(hw(e,E,!1),hw(e,M,!0));else if(_==="classes"){let O=e.classList,C=Object.keys(M),R=C.length;for(let L=0;L<R;L++){let G=C[L],U=!!M[G];U!==!!E[G]&&(u=!0,U?O.add(G):O.remove(G))}}else if(_==="styles"){let O=Object.keys(M),C=O.length;for(let R=0;R<C;R++){let L=O[R],G=M[L];G!==E[L]&&(u=!0,G?(BI(G),s.styleApplyer(e,L,G)):s.styleApplyer(e,L,""))}}else if(M||typeof E!="string"||(M=""),_!=="value"||uw(e)){if(M!==E){let O=typeof M;O==="function"&&s.eventHandlerInterceptor||(s.namespace===Rm?_==="href"?e.setAttributeNS(UI,_,M):e.setAttribute(_,M):O==="string"?_==="innerHTML"?e[_]=GI.sanitize(M):_==="role"&&M===""?e.removeAttribute(_):uw(e)&&_ in e?e[_]=M:e.setAttribute(_,M):e[_]!==M&&(e[_]=M),u=!0)}}else{let O=e[_];O!==M&&(e["oninput-value"]?O===e["oninput-value"]:M!==E)&&(e[_]=M,e["oninput-value"]=void 0),M!==E&&(u=!0)}}return u},VU=(e,t,i,s,u)=>{if(i===s)return!1;s=s||l7;let d,y=(i=i||l7).length,v=s.length,_=0,M=0,E=!1;for(;M<v;){let O=_<y?i[_]:void 0,C=s[M];if(O!==void 0&&q5(O,C))E=Ay(O,C,u)||E,_++;else{let R=RU(i,C,_+1);if(R>=0){for(d=_;d<R;d++)c7(i[d]),s2(i,d,e,"removed");E=Ay(i[R],C,u)||E,_=R+1}else Nh(C,t,_<y?i[_].domNode:void 0,u),LU(C),s2(s,M,e,"added")}M++}if(y>_)for(d=_;d<y;d++)c7(i[d]),s2(i,d,e,"removed");return E};Ay=(e,t,i)=>{let s=e.domNode,u=!1;if(e===t)return!1;let d=!1;if(t.vnodeSelector===""){if(t.text!==e.text){let y=s.ownerDocument.createTextNode(t.text);return s.parentNode.replaceChild(y,s),t.domNode=y,u=!0,u}t.domNode=s}else t.vnodeSelector.lastIndexOf("svg",0)===0&&(i=G5(i,{namespace:Rm})),e.text!==t.text&&(d=!0,t.text===void 0?s.removeChild(s.firstChild):s.textContent=t.text),t.domNode=s,d=VU(t,s,e.children,t.children,i)||d,d=zU(s,e.properties,t.properties,i)||d,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[s,i,t.vnodeSelector,t.properties,t.children]);return d&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(s,t.properties,e.properties),u};let Jc=(e,t)=>({getLastRender:()=>e,update:i=>{if(e.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let s=e;e=i,Ay(s,i,t)},domNode:e.domNode});const GU={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,i)=>{t.charAt(0)==="-"?e.style.setProperty(t,i):e.style[t]=i}};let Qu=e=>G5(GU,e),ya={create:(e,t)=>(t=Qu(t),Nh(e,document.createElement("div"),void 0,t),Jc(e,t)),append:(e,t,i)=>(i=Qu(i),Nh(t,e,void 0,i),Jc(t,i)),insertBefore:(e,t,i)=>(i=Qu(i),Nh(t,e.parentNode,e,i),Jc(t,i)),merge:(e,t,i)=>(i=Qu(i),t.domNode=e,WI(e,t,i),Jc(t,i)),replace:(e,t,i)=>(i=Qu(i),Nh(t,e.parentNode,e,i),e.parentNode.removeChild(e),Jc(t,i))},JI,qU=(e,t)=>{let i=[];for(;e&&e!==t;)i.push(e),e=e.parentNode;return i};JI=Array.prototype.find?(e,t)=>e.find(t):(e,t)=>e.filter(t)[0];let UU=(e,t)=>{let i=e;return t.forEach(s=>{i=i&&i.children?JI(i.children,u=>u.domNode===s):void 0}),i},BU=(e,t,i)=>{let s=function(u){i("domEvent",u);let d=t(),y=qU(u.currentTarget,d.domNode);y.reverse();let v,_=UU(d.getLastRender(),y);return e.scheduleRender(),_&&(v=_.properties[`on${u.type}`].apply(_.properties.bind||this,arguments)),i("domEventProcessed",u),v};return(u,d,y,v)=>s},p7=e=>{let t,i,s=Qu(e),u=s.performanceLogger,d=!0,y=!1,v=[],_=[],M=(O,C,R)=>{let L,G=()=>L;s.eventHandlerInterceptor=BU(t,G,u),L=O(C,R(),s),v.push(L),_.push(R)},E=()=>{if(i=void 0,d){d=!1,u("renderStart",void 0);for(let O=0;O<v.length;O++){let C=_[O]();u("rendered",void 0),v[O].update(C),u("patched",void 0)}u("renderDone",void 0),d=!0}};return t={renderNow:E,scheduleRender:()=>{i||y||(i=requestAnimationFrame(E))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),y=!0},resume:()=>{y=!1,d=!0,t.scheduleRender()},append:(O,C)=>{M(ya.append,O,C)},insertBefore:(O,C)=>{M(ya.insertBefore,O,C)},merge:(O,C)=>{M(ya.merge,O,C)},replace:(O,C)=>{M(ya.replace,O,C)},detach:O=>{for(let C=0;C<_.length;C++)if(_[C]===O)return _.splice(C,1),v.splice(C,1)[0];throw new Error("renderFunction was not found")}},t},Lo=class extends Ne{constructor(){super(...arguments),this.items=new Oe,this._watchUpdatingTracking=new ru,this._callbacks=new Map,this._projector=p7(),this._hiddenProjector=p7()}get needsRender(){return this.items.length>0}get updating(){var t;return((t=this._watchUpdatingTracking)==null?void 0:t.updating)??!1}initialize(){const t=document.createElement("div");t.className="esri-overlay-surface",this._set("surface",t),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),t.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,i=>{for(const s of i.added){const u=()=>s.render();this._callbacks.set(s,u),this._projector.append(this.surface,u)}for(const s of i.removed){const u=this._projector.detach(this._callbacks.get(s));this.surface.removeChild(u.domNode),this._callbacks.delete(s)}})}addItem(t){this.items.add(t)}removeItem(t){this.items.remove(t)}destroy(){this.items.removeAll(),this._callbacks.forEach(t=>this._projector.detach(t)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(t){const i=this._hiddenSurface,s=this._hiddenProjector;let u;const d=()=>(u=t.render(),u);s.append(i,d),s.renderNow();const y={left:0,top:0,right:0,bottom:0};if(u!=null&&u.domNode){const v=u.domNode.getBoundingClientRect();y.left=v.left,y.top=v.top,y.right=v.right,y.bottom=v.bottom}for(s.detach(d);i.firstChild;)i.removeChild(i.firstChild);return y}overlaps(t,i){const s=this.computeBoundingRect(t),u=this.computeBoundingRect(i);return Math.max(s.left,u.left)<=Math.min(s.right,u.right)&&Math.max(s.top,u.top)<=Math.min(s.bottom,u.bottom)}get hasVisibleItems(){return this.items.some(t=>t.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(t,i){const s=!!(i!=null&&i.disableDecorations);if(!this.items.some(d=>d.visible&&!(s&&d.isDecoration)))return;const u=t.getContext("2d");u.save(),u.font=this._fontString(),this.items.forEach(d=>{s&&d.isDecoration||(u.save(),d.renderCanvas(u),u.restore())}),u.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};w([S({readOnly:!0})],Lo.prototype,"surface",void 0),w([S({readOnly:!0})],Lo.prototype,"items",void 0),w([S({readOnly:!0})],Lo.prototype,"needsRender",null),w([S({readOnly:!0})],Lo.prototype,"_watchUpdatingTracking",void 0),w([S({readOnly:!0})],Lo.prototype,"updating",null),Lo=w([B("esri.views.overlay.ViewOverlay")],Lo);const d7=Lo,n2=[0,0];function HU(e){const t=(e.ownerDocument||window.document).defaultView,i=e.getBoundingClientRect();return n2[0]=i.left+((t==null?void 0:t.pageXOffset)??0),n2[1]=i.top+((t==null?void 0:t.pageYOffset)??0),n2}function f7(e){e&&(MI(e),e.parentNode&&e.parentNode.removeChild(e))}function WU(e){const t=document.createElement("div");return e.appendChild(t),t}const Kc=16,sf=750,JU=512,KU=2,ZU=e=>{let t=class extends e{constructor(...i){super(...i),this._freqInfo={freq:Kc,time:sf},this._overlayRenderTaskHandle=null,this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([Ge(()=>this.cursor,s=>{const{surface:u}=this;u&&u.setAttribute("data-cursor",s)}),Ge(()=>this.navigating,s=>{const{surface:u}=this;u&&u.setAttribute("data-navigating",s.toString())})])}initialize(){const i=oe("mac"),s=async()=>{i&&(await Mm(()=>this.ready),this.messagesCommon=await N5("esri/t9n/common").catch(()=>{}))};s(),this.addHandles([Ge(()=>this.ui,(u,d)=>this._handleUIChange(u,d),rr),this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused")),S5(s)])}destroy(){this.destroyed||(this.ui=Ot(this.ui),this.container=null)}get container(){return this._get("container")??null}set container(i){const s=this._get("container"),u=z5(i);if(u||typeof i!="string"||de.getLogger(this).error("#container",`element with id '${i}' not found`),s===u)return;if(this._stopMeasuring(),s&&(s.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(f7(this.root),this._set("root",null)),this.userContent&&(r7(this.userContent,s),f7(this.userContent),this._set("userContent",null))),!u)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);u.classList.add("esri-view");const d=document.createElement("div");d.className="esri-view-user-storage",r7(u,d),u.appendChild(d),this._set("userContent",d);const y=document.createElement("div");y.className="esri-view-root",u.insertBefore(y,u.firstChild),this._set("root",y);const v=document.createElement("div");v.className="esri-view-surface",v.setAttribute("role","application"),v.tabIndex=0,y.appendChild(v),this._set("surface",v);const _=new d7;y.appendChild(_.surface),this._set("overlay",_),this.addHandles(Ge(()=>_.needsRender,M=>{M&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=rc({render:()=>{var E;return(E=this.overlay)==null?void 0:E.render()}}):this._overlayRenderTaskHandle=Kt(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",u),this._startMeasuring()}get focused(){const i=document.activeElement===this.surface;return document.hasFocus()&&i}get size(){return[this.width,this.height]}blur(){var i;(i=this.surface)==null||i.blur()}focus(){var i;(i=this.surface)==null||i.focus()}pageToContainer(i,s,u){const d=this.position;return i-=d?d[0]:0,s-=d?d[1]:0,u?(u[0]=i,u[1]=s):u=[i,s],u}containerToPage(i,s,u){const d=this.position;return i+=d?d[0]:0,s+=d?d[1]:0,u?(u[0]=i,u[1]=s):u=[i,s],u}_handleUIChange(i,s){this.removeHandles("ui"),s&&s!==i&&s.destroy(),i&&(i.view=this,this.addHandles(Ge(()=>this.root,u=>{i.container=u?WU(u):null},rr),"ui")),this._set("ui",i)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const i=this._freqInfo;i.freq=Kc,i.time=sf,this.addHandles([Qp(window,"resize",()=>{i.freq=Kc,i.time=sf}),rc({prepare:s=>{const u=this._measure(),d=this._freqInfo;if(d.time+=s.deltaTime,u&&(d.freq=Kc,this._get("resizing")||this._set("resizing",!0)),d.time<d.freq)return;d.time=0;const y=this._position();d.freq=y||u?Kc:Math.min(sf,d.freq*KU),!u&&d.freq>=JU&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const i=this.container,s=i?i.clientWidth:0,u=i?i.clientHeight:0;if(s===0||u===0)return this.suspended||this._set("suspended",!0),!1;const d=this.width,y=this.height;return s===d&&u===y?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",s),this._set("height",u),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:d,oldHeight:y,width:s,height:u}),!0)}_position(){const i=this.container,s=this.position,u=i&&HU(i);return!!u&&(!s||u[0]!==s[0]||u[1]!==s[1])&&(this._set("position",[u[0],u[1]]),!0)}forceDOMReadyCycle(){}};return w([S()],t.prototype,"container",null),w([S({readOnly:!0})],t.prototype,"focused",null),w([S({readOnly:!0})],t.prototype,"height",void 0),w([S()],t.prototype,"messagesCommon",void 0),w([S({type:d7})],t.prototype,"overlay",void 0),w([S({readOnly:!0})],t.prototype,"position",void 0),w([S({readOnly:!0})],t.prototype,"resizing",void 0),w([S({readOnly:!0})],t.prototype,"root",void 0),w([S({value:null,readOnly:!0})],t.prototype,"size",null),w([S({readOnly:!0})],t.prototype,"surface",void 0),w([S({readOnly:!0})],t.prototype,"suspended",void 0),w([S()],t.prototype,"ui",void 0),w([S({readOnly:!0})],t.prototype,"userContent",void 0),w([S({readOnly:!0})],t.prototype,"width",void 0),w([S()],t.prototype,"widthBreakpoint",void 0),t=w([B("esri.views.DOMContainer")],t),t};let YU=class{constructor(t,i){this._owner=i,this._properties={},this._afterDispatchHandle=null;for(const s in t){const u=t[s],d=new BS(u,void 0,void 0,2,2);this._properties[s]={pool:d,acquired:[]}}this._afterDispatchHandle=Xj(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const t in this._properties){const i=this._properties[t];for(const s of i.acquired)I6(s)||i.pool.release(s);i.pool.destroy(),i.pool=null,i.acquired=null}this._properties=null,this._owner=null}get(t){const i=this._owner._get(t),s=this._properties[t];let u=s.pool.acquire();for(s.acquired.push(u);u===i;)s.acquired.push(u),u=s.pool.acquire();return u}_release(){for(const t in this._properties){const i=this._properties[t];let s=0;for(const u of i.acquired)I6(u)?i.acquired[s++]=u:i.pool.release(u);i.acquired.length=s}}};const XU=oe("mac")?"Meta":"Ctrl",Lm={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(let e=48;e<58;e++)Lm[e]=String.fromCharCode(e);for(let e=1;e<25;e++)Lm[111+e]=`F${e}`;for(let e=65;e<91;e++)Lm[e]=[String.fromCharCode(e+32),String.fromCharCode(e)];function QU(e){if(e.key!==void 0)return Cj(e);const t=Lm[e.keyCode];return Array.isArray(t)?e.shiftKey?t[1]:t[0]:t}function eB(e){switch(e){case"Ctrl":case"Alt":case"Shift":case"Meta":case"Primary":return!0}return!1}let tB=class{constructor(t,i=[]){this.eventType=t,this.keyModifiers=i}matches(t){if(t.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const i=t.modifiers;for(const s of this.keyModifiers)if(!i.has(s))return!1;return!0}};const y7=de.getLogger("esri.views.input.InputHandler");let mi=class{constructor(t){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=t}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const t in this._incoming){const i=this._incoming[t];for(const s of i)this._incomingEventMatches.push(s.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(t=>t.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(t){this._manager?y7.error("This InputHandler has already been registered with an InputManager"):(t.setEventCallback(i=>this._handleEvent(i)),t.setUninstallCallback(()=>this._onUninstall()),this._manager=t)}onUninstall(){}registerIncoming(t,i,s){let u;typeof i=="function"?(s=i,u=[]):u=i||[];const d=typeof t=="string"?new tB(t,u):t,y=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},v=E=>{const O=this._incoming[E.match.eventType];if(O){const C=O.indexOf(E);O.splice(C,1),y(),this._manager&&this._manager.updateDependencies()}},_=new iB(d,s,{onPause:v,onRemove:v,onResume:E=>{const O=this._incoming[E.match.eventType];O&&!O.includes(E)&&(O.push(E),y(),this._manager&&this._manager.updateDependencies())}});let M=this._incoming[d.eventType];return M||(M=[],this._incoming[d.eventType]=M),M.push(_),y(),this._manager&&this._manager.updateDependencies(),_}registerOutgoing(t){if(this._outgoing[t])throw new Error("There is already a callback registered for this outgoing InputEvent: "+t);const i=new rB(t,{onEmit:(s,u,d,y)=>{var v;(v=this._manager)==null||v.emit(s.eventType,u,d,y)},onRemove:s=>{var u;delete this._outgoing[s.eventType],(u=this._manager)==null||u.updateDependencies()}});return this._outgoing[t]=i,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),i}startCapturingPointer(t){var i;(i=this._manager)==null||i.setPointerCapture(t,!0)}stopCapturingPointer(t){var i;(i=this._manager)==null||i.setPointerCapture(t,!1)}refreshHasPendingInputs(){var t;(t=this._manager)==null||t.refreshHasPendingInputs()}_onUninstall(){this._manager?(this.onUninstall(),this._manager=null):y7.error("This InputHandler is not registered with an InputManager")}_handleEvent(t){var s;const i=this._incoming[t.type];if(i){for(const u of i)if(u.match.matches(t)&&((s=u.callback)==null||s.call(u,t),t.shouldStopPropagation()))break}}},iB=class{constructor(t,i,s){this.match=t,this._callback=i,this._handler=s}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},rB=class{constructor(t,i){this.eventType=t,this._removed=!1,this._handler=i}emit(t,i,s){this._removed||this._handler.onEmit(this,t,i,s)}remove(){this._removed=!0,this._handler.onRemove(this)}},sB=class extends mi{constructor(t){super(!0),this._onChange=t,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",i=>{this._update(i.data)})}_update(t){const i=t.native.pointerType==="touch"?"touch":"mouse",{x:s,y:u}=t;i===this._value&&this._x===s&&this._y===u||(this._value=i,this._x=s,this._y=u,this._onChange(i,s,u))}},nB=class{constructor(t,i){this._observable=new rd,this._value=t,this._equalityFunction=i}get value(){return Pe(this._observable),this._value}set value(t){this._equalityFunction(t,this._value)||(this._value=t,this._observable.notify())}mutate(t){t(this._value),this._observable.notify()}};function KI(e,t=IS){return new nB(e,t)}let oB=class extends mi{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=KI(!1),this._onPointerAdd=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.add(t.native.pointerId),this._update())},this._onPointerRemove=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.delete(t.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},Gr=class extends Ne{constructor(t){super(t),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=XU,this._latestPointerType="mouse",this._propertiesPool=new YU({latestPointerLocation:uB},this),this.latestPointerLocation=null,this._paused=!1,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const t=Object.keys(this._nameToGroup);for(const i of t)this.uninstallHandlers(i);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(t=>t.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get updating(){return this.hasPendingInputs||this._paused}installHandlers(t,i,s=wa.INTERNAL){if(this._nameToGroup[t])return void de.getLogger(this).error("There is already an InputHandler group registered under the name `"+t+"`");if(i.length===0)return void de.getLogger(this).error("Can't register a group of zero handlers");const u={name:t,handlers:i.map(d=>({handler:d,active:!0,removed:!1,priorityIndex:0,groupPriority:s,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[t]=u;for(let d=u.handlers.length-1;d>=0;d--){const y=u.handlers[d];this._handlers.push(y),y.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(v,_,M,E,O)=>{this._emitInputEvent(y.priorityIndex+1,v,_,M,O,E)},setPointerCapture:(v,_)=>{this._setPointerCapture(u,y,v,_)},setEventCallback:v=>{y.eventCallback=v},setUninstallCallback:v=>{y.uninstallCallback=v},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(t){const i=this._nameToGroup[t];i?(i.handlers.forEach(s=>{var u;s.removed=!0,(u=s.uninstallCallback)==null||u.call(s)}),delete this._nameToGroup[t],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):de.getLogger(this).error("There is no InputHandler group registered under the name `"+t+"`")}hasHandlers(t){return this._nameToGroup[t]!==void 0}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const t=new Set,i=new Set;this._handlersPriority=[];for(let s=this._handlers.length-1;s>=0;s--){const u=this._handlers[s];u.priorityIndex=s,this._handlersPriority.push(u)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let s=this._handlersPriority.length-1;s>=0;s--){const u=this._handlersPriority[s];u.priorityIndex=s;let d=u.handler.hasSideEffects;if(!d){for(const y of u.handler.outgoingEventTypes)if(t.has(y)){d=!0;break}}if(d)for(const y of u.handler.incomingEventMatches){t.add(y.eventType);for(const v of y.keyModifiers)eB(v)||i.add(v)}u.active=d}this._sourceEvents=t,this._keyModifiers=i,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(t,i,s){this._latestPointerType=t;const u=this._get("latestPointerLocation");if(u==null||u.x!==i||u.y!==s){const d=this._propertiesPool.get("latestPointerLocation");d.x=i,d.y=s,this._set("latestPointerLocation",d)}}_onEventReceived(t,i){if(t==="pointer-capture-lost"){const d=i;this._pointerCaptures.delete(d.native.pointerId)}this._updateKeyModifiers(t,i);const s=this.test.timestamp!=null?this.test.timestamp:i.native?i.native.timestamp:void 0,u=i.native?i.native.cancelable:void 0;this._emitInputEventFromSource(t,i,s,u)}_updateKeyModifiers(t,i){if(!i)return;let s=!1;const u=()=>{if(!s){const v=new Set;this._activeKeyModifiers.forEach(_=>{v.add(_)}),this._activeKeyModifiers=v,s=!0}},d=(v,_)=>{_&&!this._activeKeyModifiers.has(v)?(u(),this._activeKeyModifiers.add(v)):!_&&this._activeKeyModifiers.has(v)&&(u(),this._activeKeyModifiers.delete(v))};if(t==="key-down"||t==="key-up"){const v=i.key;this._keyModifiers.has(v)&&d(v,t==="key-down")}const y=i.native;d("Alt",!(!y||!y.altKey)),d("Ctrl",!(!y||!y.ctrlKey)),d("Shift",!(!y||!y.shiftKey)),d("Meta",!(!y||!y.metaKey)),d("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new sB((t,i,s)=>this._setLatestPointer(t,i,s)),this._multiTouchHandler=new oB,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],wa.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,wa.INTERNAL)}_setPointerCapture(t,i,s,u){const d=t.name+"-"+i.priorityIndex,y=this._pointerCaptures.get(s.pointerId)||new Set;this._pointerCaptures.set(s.pointerId,y),u?(y.add(d),y.size===1&&this.eventSource&&this.eventSource.setPointerCapture(s,!0)):y.has(d)&&(y.delete(d),y.size===0&&(this._pointerCaptures.delete(s.pointerId),this.eventSource&&this.eventSource.setPointerCapture(s,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(t=>!t.removed),this.updateDependencies()}_emitInputEventFromSource(t,i,s,u){this._emitInputEvent(0,t,i,s,u)}_emitInputEvent(t,i,s,u,d,y){const v=u!==void 0?u:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),_=d!==void 0&&d,M={event:new aB(i,s,v,y||this._activeKeyModifiers,_),priorityIndex:t};this._currentPropagation?this._currentPropagation.events.push(M):this._doNewPropagation(M)}_doNewPropagation(t){this._currentPropagation={events:new _y,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:t.event.timestamp},this._currentPropagation.events.push(t),this._continuePropagation()}_continuePropagation(){var i,s,u;this._paused=!1;const t=this._currentPropagation;if(t){for(;t.events.length>0;){const{event:d,priorityIndex:y}=t.events.pop(),v=(i=d.data)==null?void 0:i.eventId;if(!(v!=null&&this._stoppedPropagationEventIds.has(v)))for(t.currentHandler=this._handlersPriority[y];t.currentHandler;){if(t.currentHandler.removed)t.needsHandlerGarbageCollect=!0;else{if(t.currentHandler.active&&!d.shouldStopPropagation()&&((u=(s=t.currentHandler).eventCallback)==null||u.call(s,d)),d.shouldStopPropagation()){v!=null&&this._stoppedPropagationEventIds.add(v);break}if(d.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:d,priorityIndex:t.currentHandler.priorityIndex+1})}t.currentHandler=this._handlersPriority[t.currentHandler.priorityIndex+1]}}t.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(t){const i=new _y;i.push(t);const s=this._currentPropagation;if(s){for(;s.events.length;)i.push(s.events.pop());s.events=i,s.currentHandler=null,this._paused=!0}}_compareHandlerPriority(t,i){if(t.handler.hasSideEffects!==i.handler.hasSideEffects)return t.handler.hasSideEffects?1:-1;if(t.groupPriority!==i.groupPriority)return t.groupPriority>i.groupPriority?-1:1;for(const s of t.handler.incomingEventMatches)for(const u of i.handler.incomingEventMatches){if(s.eventType!==u.eventType)continue;const d=s.keyModifiers.filter(y=>u.keyModifiers.includes(y));if(d.length===s.keyModifiers.length!=(d.length===u.keyModifiers.length))return s.keyModifiers.length>u.keyModifiers.length?-1:1}return t.priorityIndex>i.priorityIndex?-1:1}_sortHandlersPriority(t){const i=[];for(const s of t){let u=0;for(;u<i.length&&this._compareHandlerPriority(s,i[u])>=0;)u++;i.splice(u,0,s)}return i}get debug(){const t=i=>{const s=this._setPointerCapture;this._setPointerCapture=()=>{},i(),this._setPointerCapture=s};return{injectEvent:(i,s)=>{t(()=>{this._onEventReceived(i,s)})},disablePointerCapture:t}}};w([S({readOnly:!0})],Gr.prototype,"hasPendingInputs",null),w([S({constructOnly:!0})],Gr.prototype,"eventSource",void 0),w([S({constructOnly:!0})],Gr.prototype,"recognizers",void 0),w([S()],Gr.prototype,"_latestPointerType",void 0),w([S()],Gr.prototype,"latestPointerType",null),w([S()],Gr.prototype,"multiTouchActive",null),w([S({readOnly:!0})],Gr.prototype,"latestPointerLocation",void 0),w([S()],Gr.prototype,"_paused",void 0),w([S({readOnly:!0})],Gr.prototype,"updating",null),Gr=w([B("esri.views.input.InputManager")],Gr);let aB=class{constructor(t,i,s,u,d){this.type=t,this.data=i,this.timestamp=s,this.modifiers=u,this.cancelable=d,this._propagationState=oa.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=oa.STOPPED}shouldStopPropagation(){return(this._propagationState&oa.STOPPED)!=0}async(t){this._propagationState|=oa.PAUSED;const i=(s,u)=>{this._propagationState&=~oa.PAUSED;const d=this._resumeCallback;if(this._resumeCallback=null,d&&d(),u)throw s;return s};return(typeof t=="function"?t():t).then(s=>i(s,!1),s=>i(s,!0))}shouldPausePropagation(t){return!!(this._propagationState&oa.PAUSED)&&(this._resumeCallback=t,!0)}preventDefault(){this.data.native.preventDefault()}};var oa;(function(e){e[e.NONE=0]="NONE",e[e.STOPPED=1]="STOPPED",e[e.PAUSED=2]="PAUSED"})(oa||(oa={}));const wa={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let lB=class{};const uB=lB;function Ws(e){return e!=null&&"open"in e&&"declaredClass"in e}function m7(e){return e!=null&&"declaredClass"in e&&"dockOptions"in e}const hB=e=>{let t=class extends e{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([Ge(()=>[this.ui,this.popup],([i,s],u)=>{const d="popup",y="manual";if(u){const[v,_]=u;v&&Ws(_)&&(_.view=null,m7(_)&&v.remove(_,d))}i&&Ws(s)&&(s.view=this,m7(s)&&i.add(s,{key:d,position:y,internal:!0}))},rr),this.on("click",i=>{this.popup&&this.popupEnabled&&(i.pointerType!=="mouse"||i.button===0)&&(!Ws(this.popup)&&"autoOpenEnabled"in this.popup&&this.popup.autoOpenEnabled===!1||(Ws(this.popup)?this.popup.viewModel.handleViewClick(i):i.async(async()=>{await this.setupPopup(),Ws(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(i)})))},wa.WIDGET)]),Mm(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>{Se(()=>import("./Popup-f21e53fb.js"),["assets/Popup-f21e53fb.js","assets/throttle-7bf02de9.js","assets/ByteSizeUnit-d4757d40.js","assets/AttachmentInfo-35e2d136.js","assets/utils-2840c54d.js","assets/widget-6e55f565.js","assets/utils-3d7178ce.js","assets/utils-214f8e9b.js","assets/executeQueryJSON-a0d4cd8b.js","assets/query-e1f4c37d.js","assets/pbfQueryUtils-17afc2b2.js","assets/pbf-280c2fba.js","assets/OptimizedGeometry-d94e541f.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/featureConversionUtils-317e3645.js","assets/colorUtils-cffa7faa.js"])})}destroy(){this.destroyed||this.closePopup()}async openPopup(i){if(Ws(this.popup))return this.popup.open(i);try{if(await this.setupPopup(),!this.popup)return void de.getLogger(this).error(new ae("view:null-popup","Popup is null and can't be opened"));this.popup.open(i)}catch{}}closePopup(){var i;(i=this._popupSetupTask)==null||i.abort(),Ws(this.popup)&&this.popup.close()}async fetchPopupFeatures(i,s){await this.when();const{location:u,queryArea:d,layerViewsAndGraphics:y,clientOnlyGraphics:v}=await this._prepareFetchPopupFeatures(i,s),_=Promise.resolve(v),M=this._queryLayerPopupFeatures(d,y,s),E=M.map(O=>O.promise);return{location:u,clientOnlyGraphics:v,allGraphicsPromise:Nj([_,...E]).then(O=>Array.from(new Set(O.flat()))),promisesPerLayerView:M}}async setupPopup(){var i;if((i=this._popupSetupTask)==null||i.abort(),this.popup&&!Ws(this.popup))return this._popupSetupTask=b5(async s=>{const{default:u}=await Se(()=>import("./Popup-f21e53fb.js"),["assets/Popup-f21e53fb.js","assets/throttle-7bf02de9.js","assets/ByteSizeUnit-d4757d40.js","assets/AttachmentInfo-35e2d136.js","assets/utils-2840c54d.js","assets/widget-6e55f565.js","assets/utils-3d7178ce.js","assets/utils-214f8e9b.js","assets/executeQueryJSON-a0d4cd8b.js","assets/query-e1f4c37d.js","assets/pbfQueryUtils-17afc2b2.js","assets/pbf-280c2fba.js","assets/OptimizedGeometry-d94e541f.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/featureConversionUtils-317e3645.js","assets/colorUtils-cffa7faa.js"]);if(Gt(s),!this.popup||Ws(this.popup))return;const d=this.popup;delete d.open,delete d.close,this.popup=new u(d)}),this._popupSetupTask.promise}_queryLayerPopupFeatures(i,s,u){return s.map(({layerView:d,graphics:y})=>{const v={clientGraphics:y,event:u!=null?u.event:void 0,signal:u!=null?u.signal:void 0,defaultPopupTemplateEnabled:u!=null&&!!u.defaultPopupTemplateEnabled},_=d.fetchPopupFeatures(i,v);return{layerView:d,promise:_}})}_isValidPopupGraphic(i,s){return i&&!!i.getEffectivePopupTemplate(s!=null&&s.defaultPopupTemplateEnabled)}async _prepareFetchPopupFeatures(i,s){const{clientGraphics:u,queryArea:d,location:y}=await this._popupHitTestGraphics(i,s),v=this._getFetchPopupLayerViews(),{layerViewsAndGraphics:_,clientOnlyGraphics:M}=this._graphicsPerFetchPopupLayerView(u,v);return{clientOnlyGraphics:M,layerViewsAndGraphics:_,queryArea:d,location:y}}async _popupHitTestGraphics(i,s){const u=await this.popupHitTest(i),d=u.results,y=u.mapPoint,v=d.filter(M=>M.type==="graphic"&&this._isValidPopupGraphic(M.graphic,s)),_=v.length?v[0].mapPoint:null;return{clientGraphics:v.map(M=>M.graphic),queryArea:y,location:y||_}}_getFetchPopupLayerViews(){const i=[];return this.allLayerViews.forEach(s=>{this._isValidPopupLayerView(s)&&i.push(s)}),this.graphicsView!=null&&this._isValidPopupLayerView(this.graphicsView)&&i.push(this.graphicsView),i.reverse()}_isValidPopupLayerView(i){return i!=null&&(!("layer"in i)||!i.suspended)&&"fetchPopupFeatures"in i}_graphicsPerFetchPopupLayerView(i,s){const u=[],d=new Map,y=s.map(v=>{const _=[];return"layer"in v?d.set(v.layer,_):d.set(v.graphics,_),{layerView:v,graphics:_}});for(const v of i){const _=d.get(v.layer)||d.get(v.sourceLayer)||null;_?_.push(v):u.push(v)}return{layerViewsAndGraphics:y,clientOnlyGraphics:u}}};return w([S({cast(i){return!i||Ws(i)||typeof i=="object"&&(i.open=s=>(ic(de.getLogger(this),"view.popup is no longer created by default. view.popup.open() will stop working when the popup isn't created",{replacement:"Use view.openPopup() instead.",version:"4.27"}),this.openPopup(s)),i.close=()=>(ic(de.getLogger(this),"view.popup is no longer created by default. view.popup.close() will stop working when the popup isn't created",{replacement:"Use view.closePopup() instead.",version:"4.27"}),this.closePopup())),i}})],t.prototype,"popup",void 0),w([S()],t.prototype,"popupEnabled",void 0),t=w([B("esri.views.PopupView")],t),t};function vu(e,t,i=Oe){return t||(t=new i),t===e||(t.removeAll(),cB(e)?t.addMany(e):e&&t.add(e)),t}function ZI(e){return e}function cB(e){return e&&(Array.isArray(e)||"items"in e&&Array.isArray(e.items))}var aa;(function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"})(aa||(aa={}));let pB=class{constructor(){this._resolver=ts(),this._status=aa.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=aa.RESOLVED,this._cleanUp()},()=>{this._status=aa.REJECTED,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(t){this._resolvingPromises.push(t),this._tryResolve()}isResolved(){return this._status===aa.RESOLVED}isRejected(){return this._status===aa.REJECTED}isFulfilled(){return this._status!==aa.PENDING}abort(){this._resolver.reject(hi())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const t=ts(),i=[...this._resolvingPromises,t.promise],s=this._allPromise=Promise.all(i);s.then(()=>{this.isFulfilled()||this._allPromise!==s||this._resolver.resolve()},u=>{this.isFulfilled()||this._allPromise!==s||Rr(u)||this._resolver.reject(u)}),t.resolve()}};const Dm=e=>{let t=class extends e{constructor(...i){super(...i),this._promiseProps=new pB,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(i,s){return this._promiseProps.promise.then(()=>this).then(i,s)}catch(i){return this.when(null,i)}addResolvingPromise(i){i&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in i?i.when():i)}};return t=w([B("esri.core.Promise")],t),t};let Oy=class extends Dm(Ne){};Oy=w([B("esri.core.Promise")],Oy);const dB="not-loaded",fB="loading",yB="failed",g7="loaded",YI=e=>{let t=class extends e{constructor(...i){super(...i),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(s=>{const u=this.load.bind(this);this.load=d=>{const y=new Promise((v,_)=>{const M=R9(d,_);this.destroyed&&_(new ae("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(v,_).finally(()=>{M&&M.remove()})});if(this.loadStatus===dB){this._set("loadStatus",fB);const v=this._loadController=new AbortController;u({signal:v.signal})}return s(),y}})),this.when(()=>{this._set("loadStatus",g7),this._loadController=null},s=>{this._set("loadStatus",yB),this._set("loadError",s),this._loadController=null})}destroy(){this._loadController&&(this._loadController=bp(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===g7}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var i;return this.isFulfilled()||(this._set("loadError",new ae("load:cancelled","Cancelled")),(i=this._loadController)==null||i.abort(),this._promiseProps.abort()),this}};return w([S({readOnly:!0})],t.prototype,"loaded",null),w([S({readOnly:!0})],t.prototype,"loadError",void 0),w([S({clonable:!1})],t.prototype,"loadStatus",void 0),w([S({type:[is],readOnly:!0})],t.prototype,"loadWarnings",null),t=w([B("esri.core.Loadable")],t),t};let n0=class extends YI(Oy){};n0=w([B("esri.core.Loadable")],n0),function(e){function t(i){return!(!i||!i.load)}e.LoadableMixin=YI,e.isLoadable=t}(n0||(n0={}));const yo=n0;async function XI(e,t){return await e.load(),mB(e,t)}async function mB(e,t){const i=[],s=(...d)=>{for(const y of d)y!=null&&(Array.isArray(y)?s(...y):Oe.isCollection(y)?y.forEach(v=>s(v)):yo.isLoadable(y)&&i.push(y))};t(s);let u=null;if(await KF(i,async d=>{const y=await Tm(gB(d)?d.loadAll():d.load());y.ok!==!1||u||(u=y)}),u)throw u.error;return e}function gB(e){return"loadAll"in e&&typeof e.loadAll=="function"}let nf;function vB(e){return nf&&!nf.destroyed||(nf=e()),nf}var cw;const wB=new et({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let qr=cw=class extends Ne{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(e){e!=="asc"&&e!=="desc"||this._set("sortOrder",e)}clone(){return new cw({categories:this.categories?ie(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,t){let i=[];this.categories&&(i=this.categories.map(y=>Array.isArray(y)?JSON.stringify(y):y));let s="";if(this.extent){const y=xm(this.extent,He.WGS84);y!=null&&(s=`${y.xmin},${y.ymin},${y.xmax},${y.ymax}`)}let u=this.query;!this.disableExtraQuery&&e.extraQuery&&(u="("+u+")"+e.extraQuery);const d={categories:i,bbox:s,q:u,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(d.sortField=this.sortField.split(",").map(y=>wB.toJSON(y.trim())).join(","),d.sortOrder=this.sortOrder),{query:{...t,...d}}}};w([S()],qr.prototype,"categories",void 0),w([S()],qr.prototype,"disableExtraQuery",void 0),w([S({type:Tt})],qr.prototype,"extent",void 0),w([S()],qr.prototype,"filter",void 0),w([S()],qr.prototype,"num",void 0),w([S()],qr.prototype,"query",void 0),w([S()],qr.prototype,"sortField",void 0),w([S()],qr.prototype,"sortOrder",null),w([S()],qr.prototype,"start",void 0),qr=cw=w([B("esri.portal.PortalQueryParams")],qr);const mn=qr;var pw;let ri=pw=class extends pe{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){var i;const e=this.url,t=this.thumbnail;return e&&t&&this.portal?(i=this.portal)==null?void 0:i.normalizeUrl(`${e}/info/${t}?f=json`):null}get url(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return this.portal.request(this.url+"/categorySchema",e).then(t=>{const i=t.categorySchema||[];return i.some(s=>s.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",e):i})}fetchMembers(e){return this.portal.request(this.url+"/users",e)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}toJSON(){throw new ae("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new pw;return t.sourceJSON=e,t.read(e),t}queryItems(e,t){let i=ei(mn,e);const s=this.portal;return parseFloat(s.currentVersion)>5?(i=i||new mn,s.queryPortal(`/content/groups/${this.id}/search`,i,"PortalItem",t)):(i=i?i.clone():new mn,i.query="group:"+this.id+(i.query?" "+i.query:""),s.queryItems(i,t))}_fetchCategorySchemaSet(e,t){const i=this.portal;return i.fetchSelf(i.authMode,!0,t).then(s=>{const u=s.contentCategorySetsGroupQuery;if(u){const d=new mn;return d.disableExtraQuery=!0,d.num=1,d.query=u,i.queryGroups(d,t)}throw new ae("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(s=>{if(s.total){const u=s.results[0],d=new mn;return d.num=1,d.query=`typekeywords:"${e}"`,u.queryItems(d,t)}throw new ae("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(s=>s.total?s.results[0].fetchData("json",t).then(u=>{const d=u==null?void 0:u.categorySchema;return d!=null&&d.length?d:[]}):[])}};w([S()],ri.prototype,"access",void 0),w([S({type:Date})],ri.prototype,"created",void 0),w([S()],ri.prototype,"description",void 0),w([S()],ri.prototype,"id",void 0),w([S()],ri.prototype,"isInvitationOnly",void 0),w([S({type:Date})],ri.prototype,"modified",void 0),w([S()],ri.prototype,"owner",void 0),w([S()],ri.prototype,"portal",void 0),w([S()],ri.prototype,"snippet",void 0),w([S()],ri.prototype,"sortField",void 0),w([S()],ri.prototype,"sortOrder",void 0),w([S()],ri.prototype,"sourceJSON",void 0),w([S()],ri.prototype,"tags",void 0),w([S()],ri.prototype,"thumbnail",void 0),w([S({readOnly:!0})],ri.prototype,"thumbnailUrl",null),w([S()],ri.prototype,"title",void 0),w([S({readOnly:!0})],ri.prototype,"url",null),ri=pw=w([B("esri.portal.PortalGroup")],ri);const dw=ri;let Qa=class extends Ne{constructor(t){super(t),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};w([S()],Qa.prototype,"nextQueryParams",void 0),w([S()],Qa.prototype,"queryParams",void 0),w([S()],Qa.prototype,"results",void 0),w([S()],Qa.prototype,"total",void 0),Qa=w([B("esri.portal.PortalQueryResult")],Qa);const bB=Qa;let jn=class extends pe{constructor(t){super(t),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){var i;const t=(i=this.portal)==null?void 0:i.restUrl;return t?`${t}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new ae("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};w([S({type:Date})],jn.prototype,"created",void 0),w([S()],jn.prototype,"id",void 0),w([S()],jn.prototype,"portal",void 0),w([S()],jn.prototype,"title",void 0),w([S({readOnly:!0})],jn.prototype,"url",null),w([S()],jn.prototype,"username",void 0),jn=w([B("esri.portal.PortalFolder")],jn);const _B=jn;var fw;let kt=fw=class extends pe{constructor(...e){super(...e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userType=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal.normalizeUrl(`${e}/info/${t}?f=json`):null}get userContentUrl(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?`${e}/content/users/${this.username}`:null}get url(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?`${e}/community/users/${this.username}`:null}addItem(e){const t=e&&e.item,i=e==null?void 0:e.data,s=e==null?void 0:e.folder,u={method:"post"};t&&(u.query=t.createPostQuery(),i!=null&&(typeof i=="string"?u.query.text=i:typeof i=="object"&&(u.query.text=JSON.stringify(i))));let d=this.userContentUrl;return s&&(d+="/"+(typeof s=="string"?s:s.id)),this.portal.request(d+"/addItem",u).then(y=>(t.id=y.id,t.portal=this.portal,t.loaded?t.reload():t.load()))}deleteItem(e){let t=this.userContentUrl;return e.ownerFolder&&(t+="/"+e.ownerFolder),this.portal.request(t+`/items/${e.id}/delete`,{method:"post"}).then(()=>{e.id=null,e.portal=null})}deleteItems(e){const t=this.userContentUrl+"/deleteItems",i=e.map(s=>s.id);if(i.length){const s={method:"post",query:{items:i.join(",")}};return this.portal.request(t,s).then(()=>{e.forEach(u=>{u.id=null,u.portal=null})})}return Promise.resolve(void 0)}fetchFolders(){const e={query:{num:1}};return this.portal.request(this.userContentUrl??"",e).then(t=>{let i;return i=t&&t.folders?t.folders.map(s=>{const u=_B.fromJSON(s);return u.portal=this.portal,u}):[],i})}fetchGroups(){return this.portal.request(this.url??"").then(e=>{let t;return t=e&&e.groups?e.groups.map(i=>{const s=dw.fromJSON(i);return s.portal=this.portal,s}):[],t})}fetchItems(e){const t=e??{};let i,s=this.userContentUrl??"";return t.folder&&(s+="/"+t.folder.id),Se(()=>Promise.resolve().then(()=>QI),void 0).then(({default:u})=>{i=u;const d={folders:!1,num:t.num||10,start:t.start||1,sortField:t.sortField||"created",sortOrder:t.sortOrder||"asc"};return this.portal.request(s,{query:d})}).then(u=>{let d;return u!=null&&u.items?(d=u.items.map(y=>{const v=i.fromJSON(y);return v.portal=this.portal,v}),Promise.all(d.map(y=>y.load())).catch(y=>y).then(()=>({items:d,nextStart:u.nextStart,total:u.total}))):{items:[],nextStart:-1,total:0}})}fetchTags(){return this.portal.request(this.url+"/tags").then(e=>e.tags)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}queryFavorites(e){return this.favGroupId?(this._favGroup||(this._favGroup=new dw({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new ae("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new ae("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new fw;return t.sourceJSON=e,t.read(e),t}};w([S()],kt.prototype,"access",void 0),w([S({type:Date})],kt.prototype,"created",void 0),w([S()],kt.prototype,"culture",void 0),w([S()],kt.prototype,"description",void 0),w([S()],kt.prototype,"email",void 0),w([S()],kt.prototype,"favGroupId",void 0),w([S()],kt.prototype,"fullName",void 0),w([S({type:Date})],kt.prototype,"modified",void 0),w([S()],kt.prototype,"orgId",void 0),w([S()],kt.prototype,"portal",void 0),w([S()],kt.prototype,"preferredView",void 0),w([S()],kt.prototype,"privileges",void 0),w([S()],kt.prototype,"region",void 0),w([S()],kt.prototype,"role",void 0),w([S()],kt.prototype,"roleId",void 0),w([S()],kt.prototype,"sourceJSON",void 0),w([S()],kt.prototype,"thumbnail",void 0),w([S({readOnly:!0})],kt.prototype,"thumbnailUrl",null),w([S()],kt.prototype,"units",void 0),w([S({readOnly:!0})],kt.prototype,"userContentUrl",null),w([S({readOnly:!0})],kt.prototype,"url",null),w([S()],kt.prototype,"username",void 0),w([S()],kt.prototype,"userType",void 0),kt=fw=w([B("esri.portal.PortalUser")],kt);const U5=kt;var Nn;let of;const v7={PortalGroup:()=>Promise.resolve({default:dw}),PortalItem:()=>Se(()=>Promise.resolve().then(()=>QI),void 0),PortalUser:()=>Promise.resolve({default:U5})};let be=Nn=class extends id(yo){constructor(e){super(e),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=at.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){w7.unregister(this),this.defaultBasemap=Ot(this.defaultBasemap),this.defaultDevBasemap=Ot(this.defaultDevBasemap),this.defaultVectorBasemap=Ot(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=Kt(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(e){if(e)for(const t of e)at.request.trustedServers.includes(t)||at.request.trustedServers.push(t);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){var i;const e=(i=this.user)==null?void 0:i.orgId,t=!e||this.canSearchPublic;return this.id&&!t?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let e=this.url;if(e){const t=e.indexOf("/sharing");e=t>0?e.substring(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let t=null;return e&&(t=U5.fromJSON(e),t.portal=this),t}load(e){const t=Se(()=>Promise.resolve().then(()=>qB),void 0).then(({default:i})=>{Gt(e),of=i}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,e)).then(i=>{var s;if(tt){const u=tt;this.credential=u.findCredential(this.restUrl),this.credential||this.authMode!==Nn.AUTH_MODE_AUTO||((s=this._esriIdCredentialCreateHandle)==null||s.remove(),this._esriIdCredentialCreateHandle=u.on("credential-create",xB(new WeakRef(this))),w7.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(t),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),t=(await Se(()=>import("./ElevationLayer-10d02ae4.js"),["assets/ElevationLayer-10d02ae4.js","assets/ArcGISCachedService-8a5200d2.js","assets/TileInfoTilemapCache-8eb5fd59.js","assets/TilemapCache-f9de8170.js","assets/ByteSizeUnit-d4757d40.js"])).default;return e?e.map(i=>new t({id:i.id,url:i.url})):[]}async fetchBasemaps(e,t){const i=await this._fetchBasemaps(e,t);if((t==null?void 0:t.include3d)===!0&&this.use3dBasemaps!==!1){const s=await this._fetchBasemaps3D(e,t);i.unshift(...s)}return i}fetchCategorySchema(e){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",e).then(t=>t.categorySchema):co(e)?Promise.reject(hi()):Promise.resolve([])}fetchFeaturedGroups(e){const t=this.featuredGroups,i=new mn;if(i.num=100,i.sortField="title",t&&t.length){const s=[];for(const u of t)s.push(`(title:"${u.title}" AND owner:${u.owner})`);return i.query=s.join(" OR "),this.queryGroups(i,e).then(u=>u.results)}return co(e)?Promise.reject(hi()):Promise.resolve([])}fetchRegions(e){var i;const t=((i=this.user)==null?void 0:i.culture)||this.culture||Pr();return this.request(this.restUrl+"/portals/regions",{...e,query:{culture:t}})}fetchSettings(e){var i;const t=((i=this.user)==null?void 0:i.culture)||this.culture||Pr();return this.request(this.restUrl+"/portals/self/settings",{...e,query:{culture:t}})}static getDefault(){return vB(()=>new Nn)}queryGroups(e,t){return this.queryPortal("/community/groups",e,"PortalGroup",t)}queryItems(e,t){return this.queryPortal("/search",e,"PortalItem",t)}queryUsers(e,t){return e.sortField||(e.sortField="username"),this.queryPortal("/community/users",e,"PortalUser",t)}fetchSelf(e=this.authMode,t=!1,i){const s=this.restUrl+"/portals/self",u={authMode:e,query:{culture:Pr().toLowerCase()},...i};return u.authMode==="auto"&&(u.authMode="no-prompt"),t&&(u.query.default=!0),this.request(s,u)}queryPortal(e,t,i,s){const u=ei(mn,t),d=y=>this.request(this.restUrl+e,{...u.toRequestOptions(this),...s}).then(v=>{const _=u.clone();return _.start=v.nextStart,new bB({nextQueryParams:_,queryParams:u,total:v.total,results:Nn._resultsToTypedArray(y,{portal:this},v,s)})}).then(v=>Promise.all(v.results.map(_=>typeof _.when=="function"?_.when():v)).then(()=>v,_=>(yn(_),v)));return i&&v7[i]?v7[i]().then(({default:y})=>(Gt(s),d(y))):d()}signIn(){if(this.authMode===Nn.AUTH_MODE_ANONYMOUS)return Promise.reject(new ae("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=t=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(t||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=t,this.fetchSelf("immediate"))):this.user&&this.credential===t?null:(this.credential=t,this.fetchSelf("immediate"))).then(i=>{i&&(this.sourceJSON=i,this.read(i))});return tt?tt.getCredential(this.restUrl).then(t=>e(t)):e(this.credential)}normalizeUrl(e){var i;const t=(i=this.credential)==null?void 0:i.token;return this._normalizeSSL(t?e+(e.includes("?")?"&":"?")+"token="+t:e)}requestToTypedArray(e,t,i){return this.request(e,t).then(s=>{const u=Nn._resultsToTypedArray(i,{portal:this},s);return Promise.all(u.map(d=>typeof d.when=="function"?d.when():s)).then(()=>u,()=>u)})}request(e,t={}){const i={f:"json",...t.query},{authMode:s=this.authMode===Nn.AUTH_MODE_ANONYMOUS?"anonymous":"auto",body:u=null,cacheBust:d=!1,method:y="auto",responseType:v="json",signal:_}=t,M={authMode:s,body:u,cacheBust:d,method:y,query:i,responseType:v,timeout:0,signal:_};return Yt(this._normalizeSSL(e),M).then(E=>E.data)}toJSON(){throw new ae("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new Nn({sourceJSON:e})}_getHelperService(e){const t=this.helperServices&&this.helperServices[e];if(!t)throw new ae("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return t}async _fetchBasemaps(e,t){const i=new mn;i.query=e||(at.apiKey&&hT(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),i.disableExtraQuery=!0;const s=await this.queryGroups(i,t);if(!s.total)return[];const u=s.results[0];i.num=100,i.query='type:"Web Map" -type:"Web Application"',i.sortField=u.sortField||"name",i.sortOrder=u.sortOrder||"desc";const d=await u.queryItems(i,t);return d.total?d.results.filter(y=>y.type==="Web Map").map(y=>new of({portalItem:y})):[]}async _fetchBasemaps3D(e,t){const i=e||this.basemapGalleryGroupQuery3D;if(!i)return[];const s=new mn({query:i,disableExtraQuery:!0}),u=await this.queryGroups(s,t);if(!u.total)return[];const d=u.results[0];s.num=100,s.query='type:"Web Scene"',s.sortField=d.sortField||"name",s.sortOrder=d.sortOrder||"desc";const y=await d.queryItems(s,t);return y.total?y.results.filter(v=>v.type==="Web Scene").map(v=>new of({portalItem:v})):[]}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(e){if(e){const t=of.fromJSON(e);return t.portalItem={portal:this},t}return null}static _resultsToTypedArray(e,t,i,s){let u=[];if(i){const d=s!=null?s.signal:null;u=i.listings||i.notifications||i.userInvitations||i.tags||i.items||i.groups||i.comments||i.provisions||i.results||i.relatedItems||i,(e||t)&&(u=u.map(y=>{const v=Object.assign(e?e.fromJSON(y):y,t);return typeof v.load=="function"&&v.load(d),v}))}else u=[];return u}};be.AUTH_MODE_ANONYMOUS="anonymous",be.AUTH_MODE_AUTO="auto",be.AUTH_MODE_IMMEDIATE="immediate",w([S()],be.prototype,"access",void 0),w([S()],be.prototype,"allSSL",void 0),w([S()],be.prototype,"authMode",void 0),w([S()],be.prototype,"authorizedCrossOriginDomains",void 0),w([me("authorizedCrossOriginDomains")],be.prototype,"readAuthorizedCrossOriginDomains",null),w([S()],be.prototype,"basemapGalleryGroupQuery",void 0),w([S({json:{name:"3DBasemapGalleryGroupQuery"}})],be.prototype,"basemapGalleryGroupQuery3D",void 0),w([S()],be.prototype,"bingKey",void 0),w([S()],be.prototype,"canListApps",void 0),w([S()],be.prototype,"canListData",void 0),w([S()],be.prototype,"canListPreProvisionedItems",void 0),w([S()],be.prototype,"canProvisionDirectPurchase",void 0),w([S()],be.prototype,"canSearchPublic",void 0),w([S()],be.prototype,"canShareBingPublic",void 0),w([S()],be.prototype,"canSharePublic",void 0),w([S()],be.prototype,"canSignInArcGIS",void 0),w([S()],be.prototype,"canSignInIDP",void 0),w([S()],be.prototype,"colorSetsGroupQuery",void 0),w([S()],be.prototype,"commentsEnabled",void 0),w([S({type:Date})],be.prototype,"created",void 0),w([S()],be.prototype,"credential",void 0),w([S()],be.prototype,"culture",void 0),w([S()],be.prototype,"currentVersion",void 0),w([S()],be.prototype,"customBaseUrl",void 0),w([S()],be.prototype,"defaultBasemap",void 0),w([me("defaultBasemap")],be.prototype,"readDefaultBasemap",null),w([S()],be.prototype,"defaultDevBasemap",void 0),w([me("defaultDevBasemap")],be.prototype,"readDefaultDevBasemap",null),w([S({type:Tt})],be.prototype,"defaultExtent",void 0),w([S()],be.prototype,"defaultVectorBasemap",void 0),w([me("defaultVectorBasemap")],be.prototype,"readDefaultVectorBasemap",null),w([S()],be.prototype,"description",void 0),w([S()],be.prototype,"devBasemapGalleryGroupQuery",void 0),w([S()],be.prototype,"eueiEnabled",void 0),w([S({readOnly:!0})],be.prototype,"extraQuery",null),w([S()],be.prototype,"featuredGroups",void 0),w([S()],be.prototype,"featuredItemsGroupQuery",void 0),w([S()],be.prototype,"galleryTemplatesGroupQuery",void 0),w([S()],be.prototype,"livingAtlasGroupQuery",void 0),w([S()],be.prototype,"hasCategorySchema",void 0),w([S()],be.prototype,"helpBase",void 0),w([S()],be.prototype,"helperServices",void 0),w([S()],be.prototype,"helpMap",void 0),w([S()],be.prototype,"homePageFeaturedContent",void 0),w([S()],be.prototype,"homePageFeaturedContentCount",void 0),w([S()],be.prototype,"httpPort",void 0),w([S()],be.prototype,"httpsPort",void 0),w([S()],be.prototype,"id",void 0),w([S()],be.prototype,"ipCntryCode",void 0),w([S({readOnly:!0})],be.prototype,"isOrganization",null),w([S()],be.prototype,"isPortal",void 0),w([S()],be.prototype,"isReadOnly",void 0),w([S({readOnly:!0})],be.prototype,"itemPageUrl",null),w([S()],be.prototype,"layerTemplatesGroupQuery",void 0),w([S()],be.prototype,"maxTokenExpirationMinutes",void 0),w([S({type:Date})],be.prototype,"modified",void 0),w([S()],be.prototype,"name",void 0),w([S()],be.prototype,"portalHostname",void 0),w([S()],be.prototype,"portalMode",void 0),w([S()],be.prototype,"portalProperties",void 0),w([S()],be.prototype,"region",void 0),w([S({readOnly:!0})],be.prototype,"restUrl",null),w([S()],be.prototype,"rotatorPanels",void 0),w([S()],be.prototype,"showHomePageDescription",void 0),w([S()],be.prototype,"sourceJSON",void 0),w([S()],be.prototype,"staticImagesUrl",void 0),w([S({json:{name:"2DStylesGroupQuery"}})],be.prototype,"stylesGroupQuery2d",void 0),w([S({json:{name:"stylesGroupQuery"}})],be.prototype,"stylesGroupQuery3d",void 0),w([S()],be.prototype,"supportsHostedServices",void 0),w([S()],be.prototype,"symbolSetsGroupQuery",void 0),w([S()],be.prototype,"templatesGroupQuery",void 0),w([S()],be.prototype,"thumbnail",void 0),w([S({readOnly:!0})],be.prototype,"thumbnailUrl",null),w([S()],be.prototype,"units",void 0),w([S()],be.prototype,"url",void 0),w([S()],be.prototype,"urlKey",void 0),w([me("urlKey")],be.prototype,"readUrlKey",null),w([S()],be.prototype,"user",void 0),w([me("user")],be.prototype,"readUser",null),w([S()],be.prototype,"use3dBasemaps",void 0),w([S()],be.prototype,"useStandardizedQuery",void 0),w([S()],be.prototype,"useVectorBasemaps",void 0),w([S()],be.prototype,"vectorBasemapGalleryGroupQuery",void 0),be=Nn=w([B("esri.portal.Portal")],be);const mr=be,w7=new FinalizationRegistry(e=>{e.remove()});function xB(e){const t=tt;return()=>{const i=e.deref();i&&t.findCredential(i.restUrl)&&i.signIn().catch(()=>{})}}let Rn=class extends Ne{constructor(t){super(t),this.portalItem=null}normalizeCtorArgs(t){return t!=null&&t.portalItem&&t.path?{...t,path:this._normalizePath(t.path,t.portalItem)}:t}set path(t){t!=null&&Ar(t)?de.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",t)}_castPath(t){return this._normalizePath(t,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(t="json",i){const s=this.cdnUrl;if(s==null)throw new ae("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(s,{responseType:t,query:{token:this.portalItem.apiKey},signal:i==null?void 0:i.signal})}async update(t,i){const{addOrUpdateResource:s}=await Se(()=>import("./resourceUtils-12f96d5e.js"),[]);return s(this,"update",t,i)}hasPath(){return this.path!=null}_normalizePath(t,i){return t==null?t:(t=t.replace(/^\/+/,""),i!=null&&Ar(t)&&(t=Q9(t,i.itemUrl)),t==null?void 0:t.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};w([S()],Rn.prototype,"portalItem",void 0),w([S({type:String,value:null})],Rn.prototype,"path",null),w([mt("path")],Rn.prototype,"_castPath",null),w([S({type:String,readOnly:!0})],Rn.prototype,"url",null),w([S({type:String,readOnly:!0})],Rn.prototype,"cdnUrl",null),w([S({type:String,readOnly:!0})],Rn.prototype,"itemRelativeUrl",null),Rn=w([B("esri.portal.PortalItemResource")],Rn);const SB=Rn;let o0=class extends Ne{constructor(t){super(t),this.created=null,this.rating=null}};w([S()],o0.prototype,"created",void 0),w([S()],o0.prototype,"rating",void 0),o0=w([B("esri.portal.PortalRating")],o0);const o2=o0;var el;const $B=new Set(["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","GeoJson","CSV","KML","WFS","WMTS","WMS","Feed"]),TB=new Set(["KML","GeoJson","CSV"]);let Be=el=class extends id(yo){static from(e){return gm(el,e)}constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let i=e;return e==="Feature Service"||e==="Feature Collection"?i=t.includes("Table")?"Table":t.includes("Route Layer")?"Route Layer":t.includes("Markup")?"Markup":"Feature Layer":e==="Image Service"?i=t.includes("Elevation 3D Layer")?"Elevation Layer":t.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":e==="Scene Service"?i="Scene Layer":e==="Video Service"?i="Video Layer":e==="Scene Package"?i="Scene Layer Package":e==="Stream Service"?i="Feature Layer":e==="Geoprocessing Service"?i=t.includes("Web Tool")?"Tool":"Geoprocessing Service":e==="Geocoding Service"?i="Locator":e==="Geoenrichment Service"?i="GeoEnrichment Service":e==="Microsoft Powerpoint"?i="Microsoft PowerPoint":e==="GeoJson"?i="GeoJSON":e==="Globe Service"?i="Globe Layer":e==="Vector Tile Service"?i="Tile Layer":e==="netCDF"?i="NetCDF":e==="Map Service"?i=t.includes("Spatiotemporal")||!t.includes("Hosted Service")&&!t.includes("Tiled")||t.includes("Relational")?"Map Image Layer":"Tile Layer":e&&e.toLowerCase().includes("add in")?i=e.replaceAll(/(add in)/gi,"Add-In"):e==="datastore catalog service"?i="Big Data File Share":e==="Compact Tile Package"?i="Tile Package (tpkx)":e==="OGCFeatureServer"?i="OGC Feature Layer":e==="web mapping application"&&t.includes("configurableApp")?i="Instant App":e==="Insights Page"?i="Insights Report":e==="Excalibur Imagery Project"&&(i="Excalibur Project"),i}readExtent(e){return e&&e.length?new Tt(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){var C;const e=((C=this.type)==null?void 0:C.toLowerCase())||"",t=this.typeKeywords||[],i="esri/images/portal/",s="16";let u,d=!1,y=!1,v=!1,_=!1,M=!1,E=!1,O=!1;return e.indexOf("service")>0||e==="feature collection"||e==="kml"||e==="wms"||e==="wmts"||e==="wfs"?(d=t.includes("Hosted Service"),e==="feature service"||e==="feature collection"||e==="kml"||e==="wfs"?(y=t.includes("Table"),v=t.includes("Route Layer"),_=t.includes("Markup"),M=t.includes("Spatiotemporal"),E=t.includes("UtilityNetwork"),u=M&&y?"spatiotemporaltable":y?"table":v?"routelayer":_?"markup":M?"spatiotemporal":d?"featureshosted":E?"utilitynetwork":"features"):u=e==="map service"||e==="wms"||e==="wmts"?d||t.includes("Tiled")||e==="wmts"?"maptiles":"mapimages":e==="scene service"?t.includes("Line")?"sceneweblayerline":t.includes("3DObject")?"sceneweblayermultipatch":t.includes("Point")?"sceneweblayerpoint":t.includes("IntegratedMesh")?"sceneweblayermesh":t.includes("PointCloud")?"sceneweblayerpointcloud":t.includes("Polygon")?"sceneweblayerpolygon":t.includes("Building")?"sceneweblayerbuilding":t.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":e==="image service"?t.includes("Elevation 3D Layer")?"elevationlayer":t.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":e==="stream service"?"streamlayer":e==="video service"?t.includes("Live Stream")?"livestreamvideolayer":"videolayer":e==="vector tile service"?"vectortile":e==="datastore catalog service"?"datastorecollection":e==="geocoding service"?"geocodeservice":e==="geoprocessing service"?t.includes("Web Tool")?"tool":"layers":e==="geodata service"?"geodataservice":e==="3dtiles service"?"3dtileslayer":"layers"):e==="web map"||e==="cityengine web scene"?u="maps":e==="web scene"?u=t.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":e==="web mapping application"&&t.includes("configurableApp")?u="instantapps":e==="web mapping application"||e==="mobile application"||e==="application"||e==="operation view"||e==="desktop application"?u="apps":e==="map document"||e==="map package"||e==="published map"||e==="scene document"||e==="globe document"||e==="basemap package"||e==="mobile basemap package"||e==="mobile map package"||e==="project package"||e==="project template"||e==="pro map"||e==="layout"||e==="layer"&&t.includes("ArcGIS Pro")||e==="explorer map"&&t.indexOf("Explorer Document")?u="mapsgray":e==="service definition"||e==="csv"||e==="shapefile"||e==="cad drawing"||e==="geojson"||e==="netcdf"||e==="administrative report"?u="datafiles":e==="explorer add in"||e==="desktop add in"||e==="windows viewer add in"||e==="windows viewer configuration"?u="appsgray":e==="360 vr experience"?u="360vr":e==="arcgis pro add in"||e==="arcgis pro configuration"?u="addindesktop":e==="rule package"||e==="file geodatabase"||e==="sqlite geodatabase"||e==="csv collection"||e==="kml collection"||e==="windows mobile package"||e==="map template"||e==="desktop application template"||e==="gml"||e==="arcpad package"||e==="code sample"||e==="document link"||e==="earth configuration"||e==="operations dashboard add in"||e==="rules package"||e==="image"||e==="workflow manager package"||e==="explorer map"&&t.includes("Explorer Mapping Application")||t.includes("Document")?u="datafilesgray":e==="network analysis service"||e==="geoprocessing service"||e==="geodata service"||e==="geometry service"||e==="geoprocessing package"||e==="locator package"||e==="geoprocessing sample"||e==="workflow manager service"?u="toolsgray":e==="layer"||e==="layer package"||e==="explorer layer"?u="layersgray":e==="scene package"?u="scenepackage":e==="3dtiles package"?u="3dtileslayerpackage":e==="mobile scene package"?u="mobilescenepackage":e==="tile package"||e==="compact tile package"?u="tilepackage":e==="task file"?u="taskfile":e==="report template"?u="report-template":e==="statistical data collection"?u="statisticaldatacollection":e==="insights workbook"?u="workbook":e==="insights model"?u="insightsmodel":e==="insights page"?u="insightspage":e==="insights theme"?u="insightstheme":e==="hub initiative"?u="hubinitiative":e==="hubpage"?u="hubpage":e==="hub event"?u="hubevent":e==="hub site application"?u="hubsite":e==="hub project"?u="hubproject":e==="relational database connection"?u="relationaldatabaseconnection":e==="big data file share"?u="datastorecollection":e==="image collection"?u="imagecollection":e==="style"?u="style":e==="desktop style"?u="desktopstyle":e==="dashboard"?u="dashboard":e==="raster function template"?u="rasterprocessingtemplate":e==="vector tile package"?u="vectortilepackage":e==="ortho mapping project"?u="orthomappingproject":e==="ortho mapping template"?u="orthomappingtemplate":e==="solution"?u="solutions":e==="geopackage"?u="geopackage":e==="deep learning package"?u="deeplearningpackage":e==="real time analytic"?u="realtimeanalytics":e==="big data analytic"?u="bigdataanalytics":e==="feed"?u="feed":e==="excalibur imagery project"?u="excaliburimageryproject":e==="notebook"?u="notebook":e==="storymap"?u="storymap":e==="survey123 add in"?u="survey123addin":e==="mission"?u="mission":e==="mission report"?u="missionreport":e==="mission template"?u="missiontemplate":e==="quickcapture project"?u="quickcaptureproject":e==="pro report"?u="proreport":e==="pro report template"?u="proreporttemplate":e==="urban model"?u="urbanmodel":e==="web experience"?u="experiencebuilder":e==="web experience template"?u="webexperiencetemplate":e==="experience builder widget"?u="experiencebuilderwidget":e==="experience builder widget package"?u="experiencebuilderwidgetpackage":e==="workflow"?u="workflow":e==="insights script"?u="insightsscript":e==="kernel gateway connection"?u="kernelgatewayconnection":e==="hub initiative template"?u="hubinitiativetemplate":e==="storymap theme"?u="storymaptheme":e==="knowledge graph"?u="knowledgegraph":e==="knowledge studio project"?u="knowledgestudio":e==="native application"?u="nativeapp":e==="native application installer"?u="nativeappinstaller":e==="link chart"?u="linkchart":e==="investigation"?u="investigation":e==="ogcfeatureserver"?u="features":e==="pro project"?u="proproject":e==="insights workbook package"?u="insightsworkbookpackage":e==="apache parquet"?u="apacheparquet":e==="notebook code snippets"||e==="notebook code snippet library"?u="notebookcodesnippets":e==="suitability model"?u="suitabilitymodel":e==="esri classifier definition"?u="classifierdefinition":e==="esri classification schema"?u="classificationschema":e==="insights data engineering workbook"?u="dataengineeringworkbook":e==="insights data engineering model"?u="dataengineeringmodel":e==="deep learning studio project"?u="deeplearningproject":e==="discussion"?u="discussion":e==="allsource project"?u="allsourceproject":e==="api key"?u="apikey":e==="data pipeline"?u="datapipelines":e==="group layer"?(O=t.includes("Map"),u=O?"layergroup2d":"layergroup"):u=e==="media layer"?"onlinemedialayer":e==="form"?t.includes("Survey123")?"survey":"datafilesgray":"maps",u?xt(i+u+s+".png"):null}get isLayer(){return this.type!=null&&$B.has(this.type)}get itemCdnUrl(){let e=this.itemUrl;return e&&tt&&!tt.findCredential(e)&&(e=tt._normalizeAGOLorgDomain(e),e=e.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),e=e.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),e=e.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),e}get itemPageUrl(){var t;const e=(t=this.portal)==null?void 0:t.itemPageUrl;return e&&this.id?`${e}?id=${this.id}`:null}get itemUrl(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e&&this.id?`${e}/content/items/${this.id}`:null}get thumbnailUrl(){var i;const e=this.itemUrl,t=this.thumbnail;return e&&t?((i=this.portal)==null?void 0:i.normalizeUrl(`${e}/info/${t}?f=json`))??null:null}get userItemUrl(){var i,s,u;const e=(i=this.portal)==null?void 0:i.restUrl;if(!e)return null;const t=this.owner||((u=(s=this.portal)==null?void 0:s.user)==null?void 0:u.username);return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){const t=this.portal??(this.portal=mr.getDefault()),i=t.load(e).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?t.request(this.itemUrl,{signal:e!=null?e.signal:null,query:{token:this.apiKey}}):{}).then(s=>{this.sourceJSON=s,this.read(s)});return this.addResolvingPromise(i),Promise.resolve(this)}async addRating(e){const t={method:"post",query:{}};return e instanceof o2&&(e=e.rating),e==null||isNaN(e)||typeof e!="number"||(t.query.rating=e),this.portal?(await this.portal.request(this.itemUrl+"/addRating",t),new o2({rating:e,created:new Date})):null}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:ie(this.applicationProxies),avgRating:this.avgRating,categories:ie(this.categories),created:ie(this.created),culture:this.culture,description:this.description,extent:ie(this.extent),groupCategories:ie(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:ie(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:ie(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:ie(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:ie(this.typeKeywords),url:this.url};this.loaded&&(e.loadStatus="loaded");const t=new el({sourceJSON:this.sourceJSON}).set(e);return t._set("isOrgItem",this.isOrgItem),t}createPostQuery(){var i;const e=this.toJSON();for(const s of["tags","typeKeywords","categories"])e[s]=(i=e[s])==null?void 0:i.join(", ");const{extent:t}=e;return t&&(e.extent=JSON.stringify(t)),e}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(e="json",t){return this.portal.request(this.itemUrl+"/data",{responseType:e,...t,query:{token:this.apiKey}})}async fetchRating(e){const t=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e});return t.rating!=null?(t.created=new Date(t.created),new o2(t)):null}fetchRelatedItems(e,t){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...t},el)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(e=>(this.sourceJSON=e,this.read(e),this))}update(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const t=e==null?void 0:e.data,i={method:"post"};i.query=this.createPostQuery();for(const s in i.query)i.query[s]===null&&(i.query[s]="");return i.query.clearEmptyFields=!0,t!=null&&(typeof t=="string"?i.query.text=t:typeof t=="object"&&(i.query.text=JSON.stringify(t))),this.portal.request(`${this.userItemUrl}/update`,i).then(()=>this.reload())}):Promise.reject(new ae("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(e){if(!this.id)throw new ae("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:t,itemUrl:i}=this;await t.signIn();const{copyResources:s,folder:u,tags:d,title:y}=e||{},v={method:"post",query:{copyPrivateResources:s==="all",folder:typeof u=="string"?u:u==null?void 0:u.id,includeResources:!!s,tags:d==null?void 0:d.join(","),title:y}},{itemId:_}=await t.request(`${i}/copy`,v);return new el({id:_,portal:t})}updateThumbnail(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const t=e.thumbnail,i=e.filename,s={method:"post"};if(typeof t=="string")Mu(t)?s.query={data:t}:s.query={url:Yr(t)},i!=null&&(s.query.filename=i);else{const u=new FormData;i!=null?u.append("file",t,i):u.append("file",t),s.body=u}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,s).then(()=>this.reload())}):Promise.reject(new ae("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){const{fetchResources:i}=await Se(()=>import("./resourceUtils-12f96d5e.js"),[]);return i(this,e,t)}async addResource(e,t,i){const{addOrUpdateResource:s}=await Se(()=>import("./resourceUtils-12f96d5e.js"),[]);return e.portalItem=this,s(e,"add",t,i)}async removeResource(e,t){const{removeResource:i}=await Se(()=>import("./resourceUtils-12f96d5e.js"),[]);if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new ae("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i(this,e,t)}async removeAllResources(e){const{removeAllResources:t}=await Se(()=>import("./resourceUtils-12f96d5e.js"),[]);return t(this,e)}resourceFromPath(e){return new SB({portalItem:this,path:e})}toJSON(){var i,s;const e=this.extent,t={accessInformation:this.accessInformation,categories:ie(this.categories),created:(i=this.created)==null?void 0:i.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:(s=this.modified)==null?void 0:s.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:ie(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:ie(this.typeKeywords),url:this.url};return SS(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new el({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)t==="tags"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="typeKeywords"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="extent"&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};w([S({type:["private","shared","org","public"]})],Be.prototype,"access",void 0),w([S()],Be.prototype,"accessInformation",void 0),w([S({type:String})],Be.prototype,"apiKey",void 0),w([S({json:{read:{source:"appProxies"}}})],Be.prototype,"applicationProxies",void 0),w([S()],Be.prototype,"avgRating",void 0),w([S()],Be.prototype,"categories",void 0),w([S({type:Date})],Be.prototype,"created",void 0),w([S()],Be.prototype,"culture",void 0),w([S()],Be.prototype,"description",void 0),w([S({readOnly:!0})],Be.prototype,"displayName",null),w([S({type:Tt})],Be.prototype,"extent",void 0),w([me("extent")],Be.prototype,"readExtent",null),w([S()],Be.prototype,"groupCategories",void 0),w([S({readOnly:!0})],Be.prototype,"iconUrl",null),w([S()],Be.prototype,"id",void 0),w([S({readOnly:!0})],Be.prototype,"isLayer",null),w([S({type:Boolean,readOnly:!0})],Be.prototype,"isOrgItem",void 0),w([S()],Be.prototype,"itemControl",void 0),w([S({readOnly:!0})],Be.prototype,"itemPageUrl",null),w([S({readOnly:!0})],Be.prototype,"itemUrl",null),w([S()],Be.prototype,"licenseInfo",void 0),w([S({type:Date})],Be.prototype,"modified",void 0),w([S()],Be.prototype,"name",void 0),w([S()],Be.prototype,"numComments",void 0),w([S()],Be.prototype,"numRatings",void 0),w([S()],Be.prototype,"numViews",void 0),w([S()],Be.prototype,"owner",void 0),w([S()],Be.prototype,"ownerFolder",void 0),w([S({type:mr})],Be.prototype,"portal",void 0),w([S()],Be.prototype,"screenshots",void 0),w([S()],Be.prototype,"size",void 0),w([S()],Be.prototype,"snippet",void 0),w([S()],Be.prototype,"sourceJSON",void 0),w([S({type:String})],Be.prototype,"sourceUrl",void 0),w([S({type:String})],Be.prototype,"spatialReference",void 0),w([S()],Be.prototype,"tags",void 0),w([S()],Be.prototype,"thumbnail",void 0),w([S({readOnly:!0})],Be.prototype,"thumbnailUrl",null),w([S()],Be.prototype,"title",void 0),w([S()],Be.prototype,"type",void 0),w([S()],Be.prototype,"typeKeywords",void 0),w([S({type:String,json:{read(e,t){var i;if(TB.has(t.type)){const s=(i=this.portal)==null?void 0:i.restUrl;e||(e=s&&this.id?`${s}/content/items/${this.id}/data`:null)}return e}}})],Be.prototype,"url",void 0),w([S({readOnly:!0})],Be.prototype,"userItemUrl",null),Be=el=w([B("esri.portal.PortalItem")],Be);const op=Be,QI=Object.freeze(Object.defineProperty({__proto__:null,default:op},Symbol.toStringTag,{value:"Module"}));async function MB(e){if(!e)return;const t=e.includes("-vector")?e.slice(0,e.indexOf("-vector")):e.includes("-3d")?e.slice(0,e.indexOf("-3d")):e,i=await N5("esri/t9n/basemaps");return i[e]||i[t]}const yw={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return xt("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return xt("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return xt("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return xt("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return xt("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return xt("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return xt("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return xt("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return xt("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return xt("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return xt("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return xt("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return xt("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return xt("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"arcgis-imagery":{get thumbnailUrl(){return xt("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return xt("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return xt("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return xt("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return xt("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return xt("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return xt("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return xt("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return xt("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return xt("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]},"arcgis-human-geography":{title:"Human Geography",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Base",title:"Human Geography Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Detail",title:"Human Geography Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Label",title:"Human Geography Label",isReference:!0}]},"arcgis-human-geography-dark":{title:"Human Geography (Dark)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Base",title:"Human Geography Dark Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Detail",title:"Human Geography Dark Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Label",title:"Human Geography Dark Label",isReference:!0}]}},IB=new Set(["ar","bs","ca","hr","cs","da","nl","en","et","fi","fr","de","el","he","hu","id","it","ja","ko","lv","lt","nb","pl","ro","ru","sr","es","sv","th","tr","uk","vi"]);let eh=class extends Ne{constructor(t){super(t),this.id=null,this.language=null,this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/webmaps"}getLanguageParamValue(){if(this.language)return this.language;const t=Pr().toLowerCase();switch(t){case"pt-br":return"pt-BR";case"pt-pt":return"pt-PT";case"zh-cn":return"zh-CN";case"zh-hk":return"zh-HK";case"zh-tw":return"zh-TW"}const i=pz(t);return i==="pt"?"pt-BR":i&&IB.has(i)?i:"global"}};w([S()],eh.prototype,"id",void 0),w([S()],eh.prototype,"language",void 0),w([S()],eh.prototype,"serviceUrl",void 0),eh=w([B("esri.support.BasemapStyle")],eh);const EB=eh,fhe={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function eE(e){const t=e==null?void 0:e.type;return t==="building-scene"||t==="integrated-mesh"||t==="point-cloud"||t==="scene"}function Fm(e){var t;return(e==null?void 0:e.type)==="feature"&&!e.url&&((t=e.source)==null?void 0:t.type)==="memory"}function yhe(e){var t;return((e==null?void 0:e.type)==="feature"||(e==null?void 0:e.type)==="subtype-group")&&((t=e.source)==null?void 0:t.type)==="feature-layer"}async function tE(e,t){const i=tt==null?void 0:tt.findServerInfo(e);if((i==null?void 0:i.currentVersion)!=null)return i.owningSystemUrl||null;const s=e.toLowerCase().indexOf("/rest/services");if(s===-1)return null;const u=`${e.substring(0,s)}/rest/info`,d=t!=null?t.signal:null,{data:y}=await Yt(u,{query:{f:"json"},responseType:"json",signal:d});return(y==null?void 0:y.owningSystemUrl)||null}function kB(e){if(!("capabilities"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function AB(e){return kB(e)?"effectiveCapabilities"in e?e.effectiveCapabilities:e.capabilities:null}function OB(e){if(!("editingEnabled"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function PB(e){return!!OB(e)&&("effectiveEditingEnabled"in e?e.effectiveEditingEnabled:e.editingEnabled)}const CB=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),jB=new Set(["csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","map-image","map-notes","media","ogc-feature","oriented-imagery","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function NB(e){return e.layerContainerType==="basemap"?CB:e.layerContainerType==="operational-layers"?jB:null}function RB(e,t){if(t.restrictedWebMapWriting){const i=NB(t);return i==null||i.has(e.type)&&!Fm(e)}return!0}function LB(e,t){var i;if(t)if(Fm(e)){const s=Kp("featureCollection.layers",t),u=(i=s==null?void 0:s[0])==null?void 0:i.layerDefinition;u&&b7(e,u)}else e.type!=="group"&&b7(e,t)}function b7(e,t){"maxScale"in e&&(t.maxScale=oy(e.maxScale)??void 0),"minScale"in e&&(t.minScale=oy(e.minScale)??void 0)}function DB(e,t){if(LB(e,t),t&&(t.id=e.id,"blendMode"in e&&(t.blendMode=e.blendMode,t.blendMode==="normal"&&delete t.blendMode),t.opacity=oy(e.opacity)??void 0,t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&e.type!=="wmts"))if(Fm(e)){const i=t.featureCollection;i&&(i.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function _7(e,t,i){if(!e.persistenceEnabled)return null;if(!("write"in e)||!e.write)return i!=null&&i.messages&&i.messages.push(new ae("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted`,{layer:e})),null;if(Fm(e)&&!e.isTable)t=e.resourceInfo;else if(RB(e,i)){const s={};return e.write(s,i)?s:null}return t!=null&&DB(e,t=ie(t)),t}var a0;let FB=0;const zB="esri.Basemap";let xr=a0=class extends id(yo){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.style=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+FB++,this.baseLayers=new Oe,this.referenceLayers=new Oe;const t=s=>{s.parent&&s.parent!==this&&"remove"in s.parent&&s.parent.remove(s),s.parent=this,s.type==="elevation"&&de.getLogger(this).error(`Layer '${s.title}, id:${s.id}' of type '${s.type}' is not supported as a basemap layer and will therefore be ignored.`)},i=s=>{s.parent=null};this.addHandles([this.baseLayers.on("after-add",s=>t(s.item)),this.referenceLayers.on("after-add",s=>t(s.item)),this.baseLayers.on("after-remove",s=>i(s.item)),this.referenceLayers.on("after-remove",s=>i(s.item))])}initialize(){this.when().catch(e=>{de.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.baseLayers.toArray();for(const i of e)i.destroy();const t=this.referenceLayers.toArray();for(const i of t)i.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),this.portalItem=Ot(this.portalItem)}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",vu(e,this._get("baseLayers")))}_writeBaseLayers(e,t,i){const s=[];e&&(i={...i,layerContainerType:"basemap"},this.baseLayers.forEach(u=>{const d=_7(u,i.webmap?i.webmap.getLayerJSONFromResourceInfo(u):null,i);d!=null&&s.push(d)}),this.referenceLayers.forEach(u=>{const d=_7(u,i.webmap?i.webmap.getLayerJSONFromResourceInfo(u):null,i);d!=null&&(u.type!=="scene"&&(d.isReference=!0),s.push(d))})),t.baseMapLayers=s}set referenceLayers(e){this._set("referenceLayers",vu(e,this._get("referenceLayers")))}writeTitle(e,t){t.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return XI(this,e=>{e(this.baseLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(t=>U1(t)?t.clone():t),referenceLayers:this.referenceLayers.map(t=>U1(t)?t.clone():t)};return this.loaded&&(e.loadStatus="loaded"),new a0({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}write(e,t){var i;return e=e||{},t!=null&&t.origin||(t={origin:"web-map",...t}),super.write(e,t),!this.loaded&&((i=this.resourceInfo)!=null&&i.data.baseMapLayers)&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(s=>{const u=ie(s);return u.url&&bn(u.url)&&(u.url=`https:${u.url}`),u.templateUrl&&bn(u.templateUrl)&&(u.templateUrl=`https:${u.templateUrl}`),u})),e}async _loadFromSource(e){const{resourceInfo:t,portalItem:i,style:s}=this;Gt(e);const u=[];if(t){const d=t.context?t.context.url:null;if(u.push(this._loadLayersFromJSON(t.data,d,e)),t.data.id&&!t.data.title){const y=t.data.id;u.push(MB(y).then(v=>{v&&this.read({title:v},t.context)}))}}else i?u.push(this._loadFromItem(i,e)):s&&u.push(this._loadFromStylesService(s,e));await Promise.all(u)}async _loadLayersFromJSON(e,t,i){var _,M;const s=(_=this.resourceInfo)==null?void 0:_.context,u=((M=this.portalItem)==null?void 0:M.portal)||(s==null?void 0:s.portal)||null,d=GB[(s==null?void 0:s.origin)||""]??"web-map",{populateOperationalLayers:y}=await Se(()=>import("./layersCreator-18752ae6.js"),["assets/layersCreator-18752ae6.js","assets/portalLayers-baa684b9.js","assets/associatedFeatureServiceUtils-98a4e095.js","assets/lazyLayerLoader-a873d88c.js"]),v=[];if(Gt(i),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const E={context:{...s,origin:d,url:t,portal:u,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},O=L=>d==="web-scene"&&L.layerType==="ArcGISSceneServiceLayer"||L.isReference,C=y(this.baseLayers,e.baseMapLayers.filter(L=>!O(L)),E);v.push(C);const R=y(this.referenceLayers,e.baseMapLayers.filter(O),E);v.push(R)}await Promise.allSettled(v)}async _loadFromItem(e,t){const i=await e.load(t),s=await i.fetchData("json",t),u=Ai(e.itemUrl??"");return this._set("resourceInfo",{data:s.baseMap??{},context:{origin:VB[e.type||""]??"web-map",portal:e.portal||mr.getDefault(),url:u}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:s.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||mr.getDefault(),url:u}),this._loadLayersFromJSON(this.resourceInfo.data,u,t)}async _loadFromStylesService(e,t){var d;const i=`${e.serviceUrl}/${e.id}`,s=(await Yt(i,{query:{language:e.getLanguageParamValue()},signal:t==null?void 0:t.signal})).data;if(s.baseMap&&Array.isArray(s.baseMap.baseMapLayers)){for(const y of s.baseMap.baseMapLayers)if(!y.customParameters&&((d=y.styleUrl)!=null&&d.includes("?"))){const v=Ai(y.styleUrl);v.query&&(y.styleUrl=v.path,y.customParameters=v.query)}}const u=Ai(i);return this._set("resourceInfo",{data:s.baseMap??{},context:{origin:"web-map",url:u}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:s.spatialReference},this.resourceInfo.context),this._loadLayersFromJSON(this.resourceInfo.data,u,t)}static fromId(e){const t=yw[e];return t?t.itemId?new a0({portalItem:{id:t.itemId,portal:{url:"https://www.arcgis.com"}}}):a0.fromJSON(t,{origin:t.is3d?"web-scene":"web-map"}):null}};w([S({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,t,i,s){this._writeBaseLayers(e,t,s)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:Oe}},writer(e,t,i,s){this._writeBaseLayers(e,t,s)}}}}}})],xr.prototype,"baseLayers",null),w([S({type:String,json:{origins:{"web-scene":{write:!0}}}})],xr.prototype,"id",void 0),w([S({type:op})],xr.prototype,"portalItem",void 0),w([S()],xr.prototype,"referenceLayers",null),w([S({readOnly:!0})],xr.prototype,"resourceInfo",void 0),w([S({type:He})],xr.prototype,"spatialReference",void 0),w([S({type:EB})],xr.prototype,"style",void 0),w([S()],xr.prototype,"thumbnailUrl",void 0),w([S({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],xr.prototype,"title",void 0),w([_e("title")],xr.prototype,"writeTitle",null),xr=a0=w([B(zB)],xr);const VB={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},GB={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},ap=xr,qB=Object.freeze(Object.defineProperty({__proto__:null,default:ap},Symbol.toStringTag,{value:"Module"})),Py={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function iE(e){return!!Py[e]||!!Py[e.toLowerCase()]}function B5(e){return Py[e]??Py[e.toLowerCase()]}function UB(e){return[...B5(e)]}function a2(e,t,i){i<0&&++i,i>1&&--i;const s=6*i;return s<1?e+(t-e)*s:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}function rE(e,t,i,s=1){const u=(e%360+360)%360/360,d=i<=.5?i*(t+1):i+t-i*t,y=2*i-d;return[Math.round(255*a2(y,d,u+1/3)),Math.round(255*a2(y,d,u)),Math.round(255*a2(y,d,u-1/3)),s]}function BB(e){const t=e.length>5,i=t?8:4,s=(1<<i)-1,u=t?1:17,d=t?e.length===9:e.length===5;let y=+("0x"+e.substr(1));if(isNaN(y))return null;const v=[0,0,0,1];let _;return d&&(_=y&s,y>>=i,v[3]=u*_/255),_=y&s,y>>=i,v[2]=u*_,_=y&s,y>>=i,v[1]=u*_,_=y&s,y>>=i,v[0]=u*_,v}function af(e){return rs(D9(e),0,255)}function lf(e,t,i){return e=Number(e),isNaN(e)?i:e<t?t:e>i?i:e}function uf(e,t){const i=e.toString(16).padStart(2,"0");return t?i.substring(0,1):i}let Yf=class pi{static blendColors(t,i,s,u=new pi){return u.r=Math.round(t.r+(i.r-t.r)*s),u.g=Math.round(t.g+(i.g-t.g)*s),u.b=Math.round(t.b+(i.b-t.b)*s),u.a=t.a+(i.a-t.a)*s,u._sanitize()}static fromRgb(t,i){const s=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(s){const u=s[2].split(/\s*,\s*/),d=s[1];if(d==="rgb"&&u.length===3||d==="rgba"&&u.length===4){const y=u[0];if(y.charAt(y.length-1)==="%"){const v=u.map(_=>2.56*parseFloat(_));return u.length===4&&(v[3]=parseFloat(u[3])),pi.fromArray(v,i)}return pi.fromArray(u.map(v=>parseFloat(v)),i)}if(d==="hsl"&&u.length===3||d==="hsla"&&u.length===4)return pi.fromArray(rE(parseFloat(u[0]),parseFloat(u[1])/100,parseFloat(u[2])/100,parseFloat(u[3])),i)}return null}static fromHex(t,i=new pi){if(t[0]!=="#"||isNaN(+`0x${t.substring(1)}`))return null;switch(t.length){case 4:case 5:{const s=parseInt(t.substring(1,2),16),u=parseInt(t.substring(2,3),16),d=parseInt(t.substring(3,4),16),y=t.length===5?15:parseInt(t.substring(4),16);return pi.fromArray([s+16*s,u+16*u,d+16*d,(y+16*y)/255],i)}case 7:case 9:{const s=parseInt(t.substring(1,3),16),u=parseInt(t.substring(3,5),16),d=parseInt(t.substring(5,7),16),y=t.length===7?255:parseInt(t.substring(7),16);return pi.fromArray([s,u,d,y/255],i)}default:return null}}static fromArray(t,i=new pi){return i._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(i.a)&&(i.a=1),i._sanitize()}static fromString(t,i){const s=iE(t)?B5(t):null;return s&&pi.fromArray(s,i)||pi.fromRgb(t,i)||pi.fromHex(t,i)}static fromJSON(t){return t!=null?new pi([t[0],t[1],t[2],(t[3]??255)/255]):void 0}static toUnitRGB(t){return t!=null?[t.r/255,t.g/255,t.b/255]:null}static toUnitRGBA(t){return t!=null?[t.r/255,t.g/255,t.b/255,t.a!=null?t.a:1]:null}constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(t){return typeof t=="string"?pi.fromString(t,this):Array.isArray(t)?pi.fromArray(t,this):(this._set(t.r??0,t.g??0,t.b??0,t.a??1),t instanceof pi||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(t){const i=(t==null?void 0:t.capitalize)??!1,s=(t==null?void 0:t.digits)??6,u=s===3||s===4,d=s===4||s===8,y=`#${uf(this.r,u)}${uf(this.g,u)}${uf(this.b,u)}${d?uf(Math.round(255*this.a),u):""}`;return i?y.toUpperCase():y}toCss(t=!1){const i=this.r+", "+this.g+", "+this.b;return t?`rgba(${i}, ${this.a})`:`rgb(${i})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=pi.AlphaMode.ALWAYS){const i=af(this.r),s=af(this.g),u=af(this.b);return t===pi.AlphaMode.ALWAYS||this.a!==1?[i,s,u,af(255*this.a)]:[i,s,u]}clone(){return new pi(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(t){return t!=null&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a}_sanitize(){return this.r=Math.round(lf(this.r,0,255)),this.g=Math.round(lf(this.g,0,255)),this.b=Math.round(lf(this.b,0,255)),this.a=lf(this.a,0,1),this}_set(t,i,s,u){this.r=t,this.g=i,this.b=s,this.a=u}};Yf.prototype.declaredClass="esri.Color",function(e){var t;(t=e.AlphaMode||(e.AlphaMode={}))[t.ALWAYS=0]="ALWAYS",t[t.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(Yf||(Yf={}));const Ve=Yf;function mhe(e){}function HB(e){return()=>e}function Ae(e,t={}){const i=e instanceof et?e:new et(e,t),s={type:(t==null?void 0:t.ignoreUnknown)??1?i.apiValues:String,json:{type:i.jsonValues,read:!(t!=null&&t.readOnly)&&{reader:i.read},write:{writer:i.write}}};return(t==null?void 0:t.readOnly)!==void 0&&(s.readOnly=!!t.readOnly),(t==null?void 0:t.default)!==void 0&&(s.json.default=t.default),(t==null?void 0:t.name)!==void 0&&(s.json.name=t.name),(t==null?void 0:t.nonNullable)!==void 0&&(s.nonNullable=t.nonNullable),S(s)}var mw;let Xf=mw=class extends pe{constructor(e){super(e),this.type="none"}clone(){return new mw({type:this.type})}};w([Ae({none:"none",stayAbove:"stay-above"})],Xf.prototype,"type",void 0),Xf=mw=w([B("esri.ground.NavigationConstraint")],Xf);function zm(e){const t=D9(100*(1-e));return Math.max(0,Math.min(t,100))}function Np(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}var gw;let Ln=gw=class extends id(yo){constructor(e){super(e),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new Oe;const t=s=>{s.parent&&s.parent!==this&&"remove"in s.parent&&s.parent.remove(s),s.parent=this,s.type!=="elevation"&&s.type!=="base-elevation"&&de.getLogger(this).error(`Layer '${s.title}, id:${s.id}' of type '${s.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},i=s=>{s.parent=null};this.addHandles([this.layers.on("after-add",s=>t(s.item)),this.layers.on("after-remove",s=>i(s.item))])}initialize(){this.when().catch(e=>{Rr(e)||de.getLogger(this).error("#load()","Failed to load ground",e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)Ot(t);this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set layers(e){this._set("layers",vu(e,this._get("layers")))}writeLayers(e,t,i,s){const u=[];e&&(s={...s,layerContainerType:"ground"},e.forEach(d=>{if("write"in d){const y={};HB(d)().write(y,s)&&u.push(y)}else s!=null&&s.messages&&s.messages.push(new ae("layer:unsupported",`Layers (${d.title}, ${d.id}) of type '${d.declaredClass}' cannot be persisted in the ground`,{layer:d}))})),t.layers=u}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return XI(this,e=>{e(this.layers)})}async queryElevation(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:i}=await Se(()=>import("./ElevationQuery-03882da6.js"),[]);Gt(t);const s=new i,u=this.layers.filter(x7).toArray();return s.queryAll(u,e,t)}async createElevationSampler(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:i}=await Se(()=>import("./ElevationQuery-03882da6.js"),[]);Gt(t);const s=new i,u=this.layers.filter(x7).toArray();return s.createSamplerAll(u,e,t)}clone(){const e={opacity:this.opacity,surfaceColor:ie(this.surfaceColor),navigationConstraint:ie(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new gw({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve()}async _loadLayersFromJSON(e,t,i){const s=(t==null?void 0:t.origin)||"web-scene",u=(t==null?void 0:t.portal)||null,d=(t==null?void 0:t.url)||null,{populateOperationalLayers:y}=await Se(()=>import("./layersCreator-18752ae6.js"),["assets/layersCreator-18752ae6.js","assets/portalLayers-baa684b9.js","assets/associatedFeatureServiceUtils-98a4e095.js","assets/lazyLayerLoader-a873d88c.js"]);Gt(i);const v=[];if(e.layers&&Array.isArray(e.layers)){const _={context:{origin:s,url:d,portal:u,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};v.push(y(this.layers,e.layers,_))}await Promise.allSettled(v)}};function WB(e){return e&&"createElevationSampler"in e}function x7(e){return e.type==="elevation"||WB(e)}w([S({json:{read:!1}})],Ln.prototype,"layers",null),w([_e("layers")],Ln.prototype,"writeLayers",null),w([S({readOnly:!0})],Ln.prototype,"resourceInfo",void 0),w([S({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:St,read:{reader:Np,source:"transparency"},write:{writer:(e,t)=>{t.transparency=zm(e)},target:"transparency"}}})],Ln.prototype,"opacity",void 0),w([S({type:Ve,json:{type:[St],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],Ln.prototype,"surfaceColor",void 0),w([S({type:Xf,json:{write:!0}})],Ln.prototype,"navigationConstraint",void 0),Ln=gw=w([B("esri.Ground")],Ln);const Cy=Ln,JB=[["binary","application/octet-stream","bin",""]];function ghe(e,t){return oE(t.name,(e==null?void 0:e.supportedFormats)??[])!=null}function vhe(e,t){if(!e)return!1;const i=KB(t,e.supportedFormats??[]);return i!=null&&e.editFormats.includes(i)}function sE(e,t){return W5(YB(e,t))}function nE(e,t){return W5(oE(e,t))}function whe(e,t){return aE(ZB(e,t))}function KB(e,t){return nE(e.name,t)??sE(e.type,t)}function H5(e){return[...JB,...e]}function ZB(e,t){return H5(t).find(i=>W5(i)===e)}function YB(e,t){const i=e.toLowerCase();return H5(t).find(s=>aE(s)===i)}function oE(e,t){const i=e.toLowerCase();return H5(t).find(s=>XB(s).some(u=>i.endsWith(u)))}function W5(e){return e==null?void 0:e[0]}function aE(e){return e==null?void 0:e[1].toLowerCase()}function XB(e){return(e==null?void 0:e[2].split(",").map(t=>t.toLowerCase()))??[]}function bhe(e){var t;return(t=e.tables)==null?void 0:t.find(i=>i.role==="assetMaps")}function QB(e){var t,i;return!(!(e&&typeof e=="object"&&"loaded"in e&&e.loaded&&((i=(t=AB(e))==null?void 0:t.operations)!=null&&i.supportsEditing)&&"type"in e)||"editingEnabled"in e&&!PB(e)||e.type==="scene"&&!eH(e))}function eH(e){const{associatedLayer:t}=e,i=t==null?void 0:t.infoFor3D;if(!i)return!0;const{supportedFormats:s,queryFormats:u}=i,d=sE("model/gltf-binary",s)??nE("glb",s);if(!(d!=null&&u.includes(d)))return de.getLogger("esri.layers.support.editableLayers").warnOnce(`SceneLayer (${e.title??"Untitled layer"}, ${e.id}) is not editable because it does not support GLB queries.`),!1;const y=e.spatialReference,v=t.spatialReference;if(!Xt(y,v))return de.getLogger("esri.layers.support.editableLayers").warnOnce(`SceneLayer (${e.title??"Untitled layer"}, ${e.id}) is not editable because its spatial reference (wkid:${y.wkid}) is different from its associated FeatureLayer's spatial reference (wkid:${v.wkid}).`),!1;const _=t.sourceJSON.sourceSpatialReference;return!(_!=null&&!Xt(_,v))||(de.getLogger("esri.layers.support.editableLayers").warnOnce(`SceneLayer (${e.title??"Untitled layer"}, ${e.id}) is not editable because the spatial reference of its associated FeatureLayer's service (wkid:${v.wkid}) is different from its source spatial reference (wkid:${_.wkid}).`),!1)}const tH=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,iH="screenUtils.toPt: input not recognized!",lE=96;function uE(e){return e?e/72*lE:0}function mo(e){return e?72*e/lE:0}function ot(e){if(typeof e=="string"){const t=e.match(tH);if(t){const i=Number(t[1]),s=t[3]&&t[3].toLowerCase(),u=e.charAt(0)==="-",d=s==="px"?mo(i):i;return u?-d:d}return console.warn(iH),null}return e}function ir(e=0,t=0){return{x:e,y:t}}function _he(e=0,t=0){return[e,t]}function Vm(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function rH(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function sH(e,t,i,s,u,d,y,v,_,M,E,O,C,R,L,G){const U=new Float32Array(16);return U[0]=e,U[1]=t,U[2]=i,U[3]=s,U[4]=u,U[5]=d,U[6]=y,U[7]=v,U[8]=_,U[9]=M,U[10]=E,U[11]=O,U[12]=C,U[13]=R,U[14]=L,U[15]=G,U}function nH(e,t){return new Float32Array(e,t,16)}const oH=Vm();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:oH,clone:rH,create:Vm,createView:nH,fromValues:sH},Symbol.toStringTag,{value:"Module"}));function aH(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Ra(e,t,i,s,u,d,y,v,_,M,E,O,C,R,L,G,U){return e[0]=t,e[1]=i,e[2]=s,e[3]=u,e[4]=d,e[5]=y,e[6]=v,e[7]=_,e[8]=M,e[9]=E,e[10]=O,e[11]=C,e[12]=R,e[13]=L,e[14]=G,e[15]=U,e}function Gm(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function La(e,t){if(e===t){const i=t[1],s=t[2],u=t[3],d=t[6],y=t[7],v=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=i,e[6]=t[9],e[7]=t[13],e[8]=s,e[9]=d,e[11]=t[14],e[12]=u,e[13]=y,e[14]=v}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function lH(e,t){return hE(e,t)||Gm(e),e}function hE(e,t){const i=t[0],s=t[1],u=t[2],d=t[3],y=t[4],v=t[5],_=t[6],M=t[7],E=t[8],O=t[9],C=t[10],R=t[11],L=t[12],G=t[13],U=t[14],K=t[15],ee=i*v-s*y,Q=i*_-u*y,re=i*M-d*y,ne=s*_-u*v,le=s*M-d*v,ve=u*M-d*_,we=E*G-O*L,Ee=E*U-C*L,Me=E*K-R*L,Le=O*U-C*G,Fe=O*K-R*G,it=C*K-R*U;let Ce=ee*it-Q*Fe+re*Le+ne*Me-le*Ee+ve*we;return Ce?(Ce=1/Ce,e[0]=(v*it-_*Fe+M*Le)*Ce,e[1]=(u*Fe-s*it-d*Le)*Ce,e[2]=(G*ve-U*le+K*ne)*Ce,e[3]=(C*le-O*ve-R*ne)*Ce,e[4]=(_*Me-y*it-M*Ee)*Ce,e[5]=(i*it-u*Me+d*Ee)*Ce,e[6]=(U*re-L*ve-K*Q)*Ce,e[7]=(E*ve-C*re+R*Q)*Ce,e[8]=(y*Fe-v*Me+M*we)*Ce,e[9]=(s*Me-i*Fe-d*we)*Ce,e[10]=(L*le-G*re+K*ee)*Ce,e[11]=(O*re-E*le-R*ee)*Ce,e[12]=(v*Ee-y*Le-_*we)*Ce,e[13]=(i*Le-s*Ee+u*we)*Ce,e[14]=(G*Q-L*ne-U*ee)*Ce,e[15]=(E*ne-O*Q+C*ee)*Ce,e):null}function uH(e,t){const i=t[0],s=t[1],u=t[2],d=t[3],y=t[4],v=t[5],_=t[6],M=t[7],E=t[8],O=t[9],C=t[10],R=t[11],L=t[12],G=t[13],U=t[14],K=t[15];return e[0]=v*(C*K-R*U)-O*(_*K-M*U)+G*(_*R-M*C),e[1]=-(s*(C*K-R*U)-O*(u*K-d*U)+G*(u*R-d*C)),e[2]=s*(_*K-M*U)-v*(u*K-d*U)+G*(u*M-d*_),e[3]=-(s*(_*R-M*C)-v*(u*R-d*C)+O*(u*M-d*_)),e[4]=-(y*(C*K-R*U)-E*(_*K-M*U)+L*(_*R-M*C)),e[5]=i*(C*K-R*U)-E*(u*K-d*U)+L*(u*R-d*C),e[6]=-(i*(_*K-M*U)-y*(u*K-d*U)+L*(u*M-d*_)),e[7]=i*(_*R-M*C)-y*(u*R-d*C)+E*(u*M-d*_),e[8]=y*(O*K-R*G)-E*(v*K-M*G)+L*(v*R-M*O),e[9]=-(i*(O*K-R*G)-E*(s*K-d*G)+L*(s*R-d*O)),e[10]=i*(v*K-M*G)-y*(s*K-d*G)+L*(s*M-d*v),e[11]=-(i*(v*R-M*O)-y*(s*R-d*O)+E*(s*M-d*v)),e[12]=-(y*(O*U-C*G)-E*(v*U-_*G)+L*(v*C-_*O)),e[13]=i*(O*U-C*G)-E*(s*U-u*G)+L*(s*C-u*O),e[14]=-(i*(v*U-_*G)-y*(s*U-u*G)+L*(s*_-u*v)),e[15]=i*(v*C-_*O)-y*(s*C-u*O)+E*(s*_-u*v),e}function hH(e){const t=e[0],i=e[1],s=e[2],u=e[3],d=e[4],y=e[5],v=e[6],_=e[7],M=e[8],E=e[9],O=e[10],C=e[11],R=e[12],L=e[13],G=e[14],U=e[15];return(t*y-i*d)*(O*U-C*G)-(t*v-s*d)*(E*U-C*L)+(t*_-u*d)*(E*G-O*L)+(i*v-s*y)*(M*U-C*R)-(i*_-u*y)*(M*G-O*R)+(s*_-u*v)*(M*L-E*R)}function cE(e,t,i){const s=t[0],u=t[1],d=t[2],y=t[3],v=t[4],_=t[5],M=t[6],E=t[7],O=t[8],C=t[9],R=t[10],L=t[11],G=t[12],U=t[13],K=t[14],ee=t[15];let Q=i[0],re=i[1],ne=i[2],le=i[3];return e[0]=Q*s+re*v+ne*O+le*G,e[1]=Q*u+re*_+ne*C+le*U,e[2]=Q*d+re*M+ne*R+le*K,e[3]=Q*y+re*E+ne*L+le*ee,Q=i[4],re=i[5],ne=i[6],le=i[7],e[4]=Q*s+re*v+ne*O+le*G,e[5]=Q*u+re*_+ne*C+le*U,e[6]=Q*d+re*M+ne*R+le*K,e[7]=Q*y+re*E+ne*L+le*ee,Q=i[8],re=i[9],ne=i[10],le=i[11],e[8]=Q*s+re*v+ne*O+le*G,e[9]=Q*u+re*_+ne*C+le*U,e[10]=Q*d+re*M+ne*R+le*K,e[11]=Q*y+re*E+ne*L+le*ee,Q=i[12],re=i[13],ne=i[14],le=i[15],e[12]=Q*s+re*v+ne*O+le*G,e[13]=Q*u+re*_+ne*C+le*U,e[14]=Q*d+re*M+ne*R+le*K,e[15]=Q*y+re*E+ne*L+le*ee,e}function cH(e,t,i){const s=i[0],u=i[1],d=i[2];if(t===e)e[12]=t[0]*s+t[4]*u+t[8]*d+t[12],e[13]=t[1]*s+t[5]*u+t[9]*d+t[13],e[14]=t[2]*s+t[6]*u+t[10]*d+t[14],e[15]=t[3]*s+t[7]*u+t[11]*d+t[15];else{const y=t[0],v=t[1],_=t[2],M=t[3],E=t[4],O=t[5],C=t[6],R=t[7],L=t[8],G=t[9],U=t[10],K=t[11];e[0]=y,e[1]=v,e[2]=_,e[3]=M,e[4]=E,e[5]=O,e[6]=C,e[7]=R,e[8]=L,e[9]=G,e[10]=U,e[11]=K,e[12]=y*s+E*u+L*d+t[12],e[13]=v*s+O*u+G*d+t[13],e[14]=_*s+C*u+U*d+t[14],e[15]=M*s+R*u+K*d+t[15]}return e}function pH(e,t,i){const s=i[0],u=i[1],d=i[2];return e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e[3]=t[3]*s,e[4]=t[4]*u,e[5]=t[5]*u,e[6]=t[6]*u,e[7]=t[7]*u,e[8]=t[8]*d,e[9]=t[9]*d,e[10]=t[10]*d,e[11]=t[11]*d,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function dH(e,t,i,s){let u,d,y,v,_,M,E,O,C,R,L,G,U,K,ee,Q,re,ne,le,ve,we,Ee,Me,Le,Fe=s[0],it=s[1],Ce=s[2],Ut=Math.sqrt(Fe*Fe+it*it+Ce*Ce);return Ut<ss()?null:(Ut=1/Ut,Fe*=Ut,it*=Ut,Ce*=Ut,u=Math.sin(i),d=Math.cos(i),y=1-d,v=t[0],_=t[1],M=t[2],E=t[3],O=t[4],C=t[5],R=t[6],L=t[7],G=t[8],U=t[9],K=t[10],ee=t[11],Q=Fe*Fe*y+d,re=it*Fe*y+Ce*u,ne=Ce*Fe*y-it*u,le=Fe*it*y-Ce*u,ve=it*it*y+d,we=Ce*it*y+Fe*u,Ee=Fe*Ce*y+it*u,Me=it*Ce*y-Fe*u,Le=Ce*Ce*y+d,e[0]=v*Q+O*re+G*ne,e[1]=_*Q+C*re+U*ne,e[2]=M*Q+R*re+K*ne,e[3]=E*Q+L*re+ee*ne,e[4]=v*le+O*ve+G*we,e[5]=_*le+C*ve+U*we,e[6]=M*le+R*ve+K*we,e[7]=E*le+L*ve+ee*we,e[8]=v*Ee+O*Me+G*Le,e[9]=_*Ee+C*Me+U*Le,e[10]=M*Ee+R*Me+K*Le,e[11]=E*Ee+L*Me+ee*Le,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function fH(e,t,i){const s=Math.sin(i),u=Math.cos(i),d=t[4],y=t[5],v=t[6],_=t[7],M=t[8],E=t[9],O=t[10],C=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=d*u+M*s,e[5]=y*u+E*s,e[6]=v*u+O*s,e[7]=_*u+C*s,e[8]=M*u-d*s,e[9]=E*u-y*s,e[10]=O*u-v*s,e[11]=C*u-_*s,e}function yH(e,t,i){const s=Math.sin(i),u=Math.cos(i),d=t[0],y=t[1],v=t[2],_=t[3],M=t[8],E=t[9],O=t[10],C=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=d*u-M*s,e[1]=y*u-E*s,e[2]=v*u-O*s,e[3]=_*u-C*s,e[8]=d*s+M*u,e[9]=y*s+E*u,e[10]=v*s+O*u,e[11]=_*s+C*u,e}function mH(e,t,i){const s=Math.sin(i),u=Math.cos(i),d=t[0],y=t[1],v=t[2],_=t[3],M=t[4],E=t[5],O=t[6],C=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=d*u+M*s,e[1]=y*u+E*s,e[2]=v*u+O*s,e[3]=_*u+C*s,e[4]=M*u-d*s,e[5]=E*u-y*s,e[6]=O*u-v*s,e[7]=C*u-_*s,e}function gH(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function vH(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function wH(e,t,i){if(t===0)return Gm(e);let s,u,d,y=i[0],v=i[1],_=i[2],M=Math.sqrt(y*y+v*v+_*_);return M<ss()?null:(M=1/M,y*=M,v*=M,_*=M,s=Math.sin(t),u=Math.cos(t),d=1-u,e[0]=y*y*d+u,e[1]=v*y*d+_*s,e[2]=_*y*d-v*s,e[3]=0,e[4]=y*v*d-_*s,e[5]=v*v*d+u,e[6]=_*v*d+y*s,e[7]=0,e[8]=y*_*d+v*s,e[9]=v*_*d-y*s,e[10]=_*_*d+u,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function bH(e,t){const i=Math.sin(t),s=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=i,e[7]=0,e[8]=0,e[9]=-i,e[10]=s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function _H(e,t){const i=Math.sin(t),s=Math.cos(t);return e[0]=s,e[1]=0,e[2]=-i,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=i,e[9]=0,e[10]=s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function xH(e,t){const i=Math.sin(t),s=Math.cos(t);return e[0]=s,e[1]=i,e[2]=0,e[3]=0,e[4]=-i,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function pE(e,t,i){const s=t[0],u=t[1],d=t[2],y=t[3],v=s+s,_=u+u,M=d+d,E=s*v,O=s*_,C=s*M,R=u*_,L=u*M,G=d*M,U=y*v,K=y*_,ee=y*M;return e[0]=1-(R+G),e[1]=O+ee,e[2]=C-K,e[3]=0,e[4]=O-ee,e[5]=1-(E+G),e[6]=L+U,e[7]=0,e[8]=C+K,e[9]=L-U,e[10]=1-(E+R),e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function SH(e,t){const i=$H,s=-t[0],u=-t[1],d=-t[2],y=t[3],v=t[4],_=t[5],M=t[6],E=t[7],O=s*s+u*u+d*d+y*y;return O>0?(i[0]=2*(v*y+E*s+_*d-M*u)/O,i[1]=2*(_*y+E*u+M*s-v*d)/O,i[2]=2*(M*y+E*d+v*u-_*s)/O):(i[0]=2*(v*y+E*s+_*d-M*u),i[1]=2*(_*y+E*u+M*s-v*d),i[2]=2*(M*y+E*d+v*u-_*s)),pE(e,t,i),e}const $H=Pa();function TH(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function MH(e,t){const i=t[0],s=t[1],u=t[2],d=t[4],y=t[5],v=t[6],_=t[8],M=t[9],E=t[10];return e[0]=Math.sqrt(i*i+s*s+u*u),e[1]=Math.sqrt(d*d+y*y+v*v),e[2]=Math.sqrt(_*_+M*M+E*E),e}function IH(e,t){const i=t[0]+t[5]+t[10];let s=0;return i>0?(s=2*Math.sqrt(i+1),e[3]=.25*s,e[0]=(t[6]-t[9])/s,e[1]=(t[8]-t[2])/s,e[2]=(t[1]-t[4])/s):t[0]>t[5]&&t[0]>t[10]?(s=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/s,e[0]=.25*s,e[1]=(t[1]+t[4])/s,e[2]=(t[8]+t[2])/s):t[5]>t[10]?(s=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/s,e[0]=(t[1]+t[4])/s,e[1]=.25*s,e[2]=(t[6]+t[9])/s):(s=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/s,e[0]=(t[8]+t[2])/s,e[1]=(t[6]+t[9])/s,e[2]=.25*s),e}function EH(e,t,i,s){const u=t[0],d=t[1],y=t[2],v=t[3],_=u+u,M=d+d,E=y+y,O=u*_,C=u*M,R=u*E,L=d*M,G=d*E,U=y*E,K=v*_,ee=v*M,Q=v*E,re=s[0],ne=s[1],le=s[2];return e[0]=(1-(L+U))*re,e[1]=(C+Q)*re,e[2]=(R-ee)*re,e[3]=0,e[4]=(C-Q)*ne,e[5]=(1-(O+U))*ne,e[6]=(G+K)*ne,e[7]=0,e[8]=(R+ee)*le,e[9]=(G-K)*le,e[10]=(1-(O+L))*le,e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function kH(e,t,i,s,u){const d=t[0],y=t[1],v=t[2],_=t[3],M=d+d,E=y+y,O=v+v,C=d*M,R=d*E,L=d*O,G=y*E,U=y*O,K=v*O,ee=_*M,Q=_*E,re=_*O,ne=s[0],le=s[1],ve=s[2],we=u[0],Ee=u[1],Me=u[2],Le=(1-(G+K))*ne,Fe=(R+re)*ne,it=(L-Q)*ne,Ce=(R-re)*le,Ut=(1-(C+K))*le,vr=(U+ee)*le,Dt=(L+Q)*ve,lt=(U-ee)*ve,wr=(1-(C+G))*ve;return e[0]=Le,e[1]=Fe,e[2]=it,e[3]=0,e[4]=Ce,e[5]=Ut,e[6]=vr,e[7]=0,e[8]=Dt,e[9]=lt,e[10]=wr,e[11]=0,e[12]=i[0]+we-(Le*we+Ce*Ee+Dt*Me),e[13]=i[1]+Ee-(Fe*we+Ut*Ee+lt*Me),e[14]=i[2]+Me-(it*we+vr*Ee+wr*Me),e[15]=1,e}function AH(e,t){const i=t[0],s=t[1],u=t[2],d=t[3],y=i+i,v=s+s,_=u+u,M=i*y,E=s*y,O=s*v,C=u*y,R=u*v,L=u*_,G=d*y,U=d*v,K=d*_;return e[0]=1-O-L,e[1]=E+K,e[2]=C-U,e[3]=0,e[4]=E-K,e[5]=1-M-L,e[6]=R+G,e[7]=0,e[8]=C+U,e[9]=R-G,e[10]=1-M-O,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function OH(e,t,i,s,u,d,y){const v=1/(i-t),_=1/(u-s),M=1/(d-y);return e[0]=2*d*v,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*d*_,e[6]=0,e[7]=0,e[8]=(i+t)*v,e[9]=(u+s)*_,e[10]=(y+d)*M,e[11]=-1,e[12]=0,e[13]=0,e[14]=y*d*2*M,e[15]=0,e}function PH(e,t,i,s,u){const d=1/Math.tan(t/2);let y;return e[0]=d/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=d,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,u!=null&&u!==1/0?(y=1/(s-u),e[10]=(u+s)*y,e[14]=2*u*s*y):(e[10]=-1,e[14]=-2*s),e}function CH(e,t,i,s){const u=Math.tan(t.upDegrees*Math.PI/180),d=Math.tan(t.downDegrees*Math.PI/180),y=Math.tan(t.leftDegrees*Math.PI/180),v=Math.tan(t.rightDegrees*Math.PI/180),_=2/(y+v),M=2/(u+d);return e[0]=_,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=M,e[6]=0,e[7]=0,e[8]=-(y-v)*_*.5,e[9]=(u-d)*M*.5,e[10]=s/(i-s),e[11]=-1,e[12]=0,e[13]=0,e[14]=s*i/(i-s),e[15]=0,e}function jH(e,t,i,s,u,d,y){const v=1/(t-i),_=1/(s-u),M=1/(d-y);return e[0]=-2*v,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*_,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*M,e[11]=0,e[12]=(t+i)*v,e[13]=(u+s)*_,e[14]=(y+d)*M,e[15]=1,e}function NH(e,t,i,s){const u=t[0],d=t[1],y=t[2];let v=u-i[0],_=d-i[1],M=y-i[2];const E=ss();if(Math.abs(v)<E&&Math.abs(_)<E&&Math.abs(M)<E)return void Gm(e);let O=1/Math.sqrt(v*v+_*_+M*M);v*=O,_*=O,M*=O;const C=s[0],R=s[1],L=s[2];let G=R*M-L*_,U=L*v-C*M,K=C*_-R*v;O=Math.sqrt(G*G+U*U+K*K),O?(O=1/O,G*=O,U*=O,K*=O):(G=0,U=0,K=0);let ee=_*K-M*U,Q=M*G-v*K,re=v*U-_*G;O=Math.sqrt(ee*ee+Q*Q+re*re),O?(O=1/O,ee*=O,Q*=O,re*=O):(ee=0,Q=0,re=0),e[0]=G,e[1]=ee,e[2]=v,e[3]=0,e[4]=U,e[5]=Q,e[6]=_,e[7]=0,e[8]=K,e[9]=re,e[10]=M,e[11]=0,e[12]=-(G*u+U*d+K*y),e[13]=-(ee*u+Q*d+re*y),e[14]=-(v*u+_*d+M*y),e[15]=1}function RH(e,t,i,s){const u=t[0],d=t[1],y=t[2],v=s[0],_=s[1],M=s[2];let E=u-i[0],O=d-i[1],C=y-i[2],R=E*E+O*O+C*C;R>0&&(R=1/Math.sqrt(R),E*=R,O*=R,C*=R);let L=_*C-M*O,G=M*E-v*C,U=v*O-_*E;return R=L*L+G*G+U*U,R>0&&(R=1/Math.sqrt(R),L*=R,G*=R,U*=R),e[0]=L,e[1]=G,e[2]=U,e[3]=0,e[4]=O*U-C*G,e[5]=C*L-E*U,e[6]=E*G-O*L,e[7]=0,e[8]=E,e[9]=O,e[10]=C,e[11]=0,e[12]=u,e[13]=d,e[14]=y,e[15]=1,e}function LH(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function DH(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)}function FH(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e[9]=t[9]+i[9],e[10]=t[10]+i[10],e[11]=t[11]+i[11],e[12]=t[12]+i[12],e[13]=t[13]+i[13],e[14]=t[14]+i[14],e[15]=t[15]+i[15],e}function dE(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e[9]=t[9]-i[9],e[10]=t[10]-i[10],e[11]=t[11]-i[11],e[12]=t[12]-i[12],e[13]=t[13]-i[13],e[14]=t[14]-i[14],e[15]=t[15]-i[15],e}function zH(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12]*i,e[13]=t[13]*i,e[14]=t[14]*i,e[15]=t[15]*i,e}function VH(e,t,i,s){return e[0]=t[0]+i[0]*s,e[1]=t[1]+i[1]*s,e[2]=t[2]+i[2]*s,e[3]=t[3]+i[3]*s,e[4]=t[4]+i[4]*s,e[5]=t[5]+i[5]*s,e[6]=t[6]+i[6]*s,e[7]=t[7]+i[7]*s,e[8]=t[8]+i[8]*s,e[9]=t[9]+i[9]*s,e[10]=t[10]+i[10]*s,e[11]=t[11]+i[11]*s,e[12]=t[12]+i[12]*s,e[13]=t[13]+i[13]*s,e[14]=t[14]+i[14]*s,e[15]=t[15]+i[15]*s,e}function GH(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function qH(e,t){if(e===t)return!0;const i=e[0],s=e[1],u=e[2],d=e[3],y=e[4],v=e[5],_=e[6],M=e[7],E=e[8],O=e[9],C=e[10],R=e[11],L=e[12],G=e[13],U=e[14],K=e[15],ee=t[0],Q=t[1],re=t[2],ne=t[3],le=t[4],ve=t[5],we=t[6],Ee=t[7],Me=t[8],Le=t[9],Fe=t[10],it=t[11],Ce=t[12],Ut=t[13],vr=t[14],Dt=t[15],lt=ss();return Math.abs(i-ee)<=lt*Math.max(1,Math.abs(i),Math.abs(ee))&&Math.abs(s-Q)<=lt*Math.max(1,Math.abs(s),Math.abs(Q))&&Math.abs(u-re)<=lt*Math.max(1,Math.abs(u),Math.abs(re))&&Math.abs(d-ne)<=lt*Math.max(1,Math.abs(d),Math.abs(ne))&&Math.abs(y-le)<=lt*Math.max(1,Math.abs(y),Math.abs(le))&&Math.abs(v-ve)<=lt*Math.max(1,Math.abs(v),Math.abs(ve))&&Math.abs(_-we)<=lt*Math.max(1,Math.abs(_),Math.abs(we))&&Math.abs(M-Ee)<=lt*Math.max(1,Math.abs(M),Math.abs(Ee))&&Math.abs(E-Me)<=lt*Math.max(1,Math.abs(E),Math.abs(Me))&&Math.abs(O-Le)<=lt*Math.max(1,Math.abs(O),Math.abs(Le))&&Math.abs(C-Fe)<=lt*Math.max(1,Math.abs(C),Math.abs(Fe))&&Math.abs(R-it)<=lt*Math.max(1,Math.abs(R),Math.abs(it))&&Math.abs(L-Ce)<=lt*Math.max(1,Math.abs(L),Math.abs(Ce))&&Math.abs(G-Ut)<=lt*Math.max(1,Math.abs(G),Math.abs(Ut))&&Math.abs(U-vr)<=lt*Math.max(1,Math.abs(U),Math.abs(vr))&&Math.abs(K-Dt)<=lt*Math.max(1,Math.abs(K),Math.abs(Dt))}function UH(e){const t=ss(),i=e[0],s=e[1],u=e[2],d=e[4],y=e[5],v=e[6],_=e[8],M=e[9],E=e[10];return Math.abs(1-(i*i+d*d+_*_))<=t&&Math.abs(1-(s*s+y*y+M*M))<=t&&Math.abs(1-(u*u+v*v+E*E))<=t}function BH(e){return e[0]===1&&e[1]===0&&e[2]===0&&e[4]===0&&e[5]===1&&e[6]===0&&e[8]===0&&e[9]===0&&e[10]===1}const HH=cE,WH=dE;Object.freeze(Object.defineProperty({__proto__:null,add:FH,adjoint:uH,copy:aH,determinant:hH,equals:qH,exactEquals:GH,frob:DH,fromQuat:AH,fromQuat2:SH,fromRotation:wH,fromRotationTranslation:pE,fromRotationTranslationScale:EH,fromRotationTranslationScaleOrigin:kH,fromScaling:vH,fromTranslation:gH,fromXRotation:bH,fromYRotation:_H,fromZRotation:xH,frustum:OH,getRotation:IH,getScaling:MH,getTranslation:TH,hasIdentityRotation:BH,identity:Gm,invert:hE,invertOrIdentity:lH,isOrthoNormal:UH,lookAt:NH,mul:HH,multiply:cE,multiplyScalar:zH,multiplyScalarAndAdd:VH,ortho:jH,perspective:PH,perspectiveFromFieldOfView:CH,rotate:dH,rotateX:fH,rotateY:yH,rotateZ:mH,scale:pH,set:Ra,str:LH,sub:WH,subtract:dE,targetTo:RH,translate:cH,transpose:La},Symbol.toStringTag,{value:"Module"}));const JH=(e,t)=>{const i=Ra(e,t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return La(i,i)},KH=(e,t)=>{const i=Ra(e,t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return La(i,i)},ZH=(e,t)=>{const i=1-t,s=Ra(e,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return La(s,s)},YH=(e,t)=>{const i=Math.sin(t*Math.PI/180),s=Math.cos(t*Math.PI/180),u=Ra(e,.213+.787*s-.213*i,.715-.715*s-.715*i,.072-.072*s+.928*i,0,.213-.213*s+.143*i,.715+.285*s+.14*i,.072-.072*s-.283*i,0,.213-.213*s-.787*i,.715-.715*s+.715*i,.072+.928*s+.072*i,0,0,0,0,1);return La(u,u)},XH=(e,t)=>{const i=1-2*t,s=Ra(e,i,0,0,t,0,i,0,t,0,0,i,t,0,0,0,1);return La(s,s)},QH=(e,t)=>{const i=Ra(e,.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return La(i,i)},eW=(e,t)=>{const i=1-t,s=Ra(e,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return La(s,s)};let fE=class yE{constructor(t,i,s){this.strength=t,this.radius=i,this.threshold=s,this.type="bloom"}interpolate(t,i,s){this.strength=dr(t.strength,i.strength,s),this.radius=dr(t.radius,i.radius,s),this.threshold=dr(t.threshold,i.threshold,s)}clone(){return new yE(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:lp(this.radius),strength:this.strength,threshold:this.threshold}}},mE=class gE{constructor(t){this.radius=t,this.type="blur"}interpolate(t,i,s){this.radius=Math.round(dr(t.radius,i.radius,s))}clone(){return new gE(this.radius)}toJSON(){return{type:"blur",radius:lp(this.radius)}}},vw=class vE{constructor(t,i){this.type=t,this.amount=i,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,i,s){this.amount=dr(t.amount,i.amount,s),this._updateMatrix()}clone(){return new vE(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||Vm();switch(this.type){case"brightness":this._colorMatrix=JH(t,this.amount);break;case"contrast":this._colorMatrix=KH(t,this.amount);break;case"grayscale":this._colorMatrix=ZH(t,this.amount);break;case"invert":this._colorMatrix=XH(t,this.amount);break;case"saturate":this._colorMatrix=QH(t,this.amount);break;case"sepia":this._colorMatrix=eW(t,this.amount)}}},wE=class bE{constructor(t,i,s,u){this.offsetX=t,this.offsetY=i,this.blurRadius=s,this.color=u,this.type="drop-shadow"}interpolate(t,i,s){this.offsetX=dr(t.offsetX,i.offsetX,s),this.offsetY=dr(t.offsetY,i.offsetY,s),this.blurRadius=dr(t.blurRadius,i.blurRadius,s),this.color[0]=Math.round(dr(t.color[0],i.color[0],s)),this.color[1]=Math.round(dr(t.color[1],i.color[1],s)),this.color[2]=Math.round(dr(t.color[2],i.color[2],s)),this.color[3]=dr(t.color[3],i.color[3],s)}clone(){return new bE(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];return t[3]*=255,{type:"drop-shadow",xoffset:lp(this.offsetX),yoffset:lp(this.offsetY),blurRadius:lp(this.blurRadius),color:t}}},_E=class xE{constructor(t){this.angle=t,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,i,s){this.angle=dr(t.angle,i.angle,s),this._updateMatrix()}clone(){return new xE(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||Vm();this._colorMatrix=YH(t,this.angle)}},SE=class $E{constructor(t){this.amount=t,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(t,i,s){this.amount=dr(t.amount,i.amount,s)}clone(){return new $E(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function dr(e,t,i){return e+(t-e)*i}function lp(e){return Math.round(1e3*mo(e))/1e3}function tW(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new vw(e.type,0);case"saturate":case"brightness":case"contrast":return new vw(e.type,1);case"opacity":return new SE(1);case"hue-rotate":return new _E(0);case"blur":return new mE(0);case"drop-shadow":return new wE(0,0,0,[...B5("transparent")]);case"bloom":return new fE(0,0,1)}}function iW(e,t){const i=e.length>t.length?e:t;return(e.length>t.length?t:e).every((s,u)=>s.type===i[u].type)}function rW(e,t){const i=e.length>t.length?e:t,s=e.length>t.length?t:e;for(let u=s.length;u<i.length;u++)s.push(tW(i[u]))}function sW(e){const t=e[0];return!!t&&"type"in t}const S7=de.getLogger("esri.support.basemapUtils");function nW(){return{}}function oW(e){for(const t in e){const i=e[t];Ot(i),delete e[t]}}function aW(e,t){let i;if(typeof e=="string"){const s=e in yw,u=!s&&e.includes("/");if(!s&&!u){const d=Object.entries(yw).filter(([y,v])=>at.apiKey&&!v.classic||!at.apiKey&&(v.classic||v.is3d)).map(([y])=>`"${y}"`).sort().join(", ");return S7.warn(`Unable to find basemap definition for: ${e}. Try one of these: ${d}`),null}t&&(i=t[e]),i||(i=s?ap.fromId(e):new ap({style:{id:e}}),t&&(t[e]=i))}else i=ei(ap,e);return i!=null&&i.destroyed&&(S7.warn("The provided basemap is already destroyed",{basemap:i}),i=null),i}function lW(e){return new Ep({getCollections:()=>[e.tables,e.layers],getChildrenFunction:t=>{const i=[];return"tables"in t&&i.push(t.tables),"layers"in t&&i.push(t.layers),i},itemFilterFunction:t=>{const i=t.parent;return!!i&&"tables"in i&&i.tables.includes(t)}})}function l2(e){for(const t of e.values())t==null||t.destroy();e.clear()}const $7={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function uW(e){let t=null;if(typeof e=="string")if(e in $7){const i=$7[e];t=new Cy({resourceInfo:{data:{layers:[i]}}})}else de.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`);else t=ei(Cy,e);return t}let TE=0;const J5=e=>{let t=class extends e{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+TE++})}};return t=w([B("esri.core.Identifiable")],t),t},K5=e=>{let t=class extends e{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:TE++})}};return t=w([B("esri.core.NumericIdentifiable")],t),t};let T7=class extends J5(class{}){};T7=w([B("esri.core.Identifiable")],T7);async function hW(e){const t="portalItem"in e?e:{portalItem:e},{fromItem:i}=await Se(()=>import("./portalLayers-baa684b9.js").then(s=>s.p),["assets/portalLayers-baa684b9.js","assets/associatedFeatureServiceUtils-98a4e095.js","assets/lazyLayerLoader-a873d88c.js"]);try{return await i(t)}catch(s){const u=t&&t.portalItem,d=(u==null?void 0:u.id)||"unset",y=u&&u.portal&&u.portal.url||at.portalUrl;throw de.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+y+"', id: '"+d+"')",s),s}}let cW=0,si=class extends ja.EventedMixin(J5(yo)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new Tt(-180,-90,180,90,He.WGS84),this.id=Date.now().toString(16)+"-layer-"+cW++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=He.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(t){const i=typeof t=="string"?{url:t}:t;return(await Se(()=>import("./arcgisLayers-3af1b56b.js"),["assets/arcgisLayers-3af1b56b.js","assets/associatedFeatureServiceUtils-98a4e095.js","assets/fetchService-db08c7e2.js","assets/lazyLayerLoader-a873d88c.js"])).fromUrl(i)}static fromPortalItem(t){return hW(t)}initialize(){this.when().catch(t=>{Rr(t)||de.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:t})})}destroy(){const t=this.parent;if(t){const i=this;"layers"in t&&t.layers.includes(i)?t.layers.remove(i):"tables"in t&&t.tables.includes(i)?t.tables.remove(i):"baseLayers"in t&&t.baseLayers.includes(i)?t.baseLayers.remove(i):"referenceLayers"in t&&t.referenceLayers.includes(i)&&t.referenceLayers.remove(i),this._set("parent",null)}}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return Ai(this.url)}async fetchAttributionData(){const t=this.attributionDataUrl;if(this.hasAttributionData&&t)return(await Yt(t,{query:{f:"json"},responseType:"json"})).data;throw new ae("layer:no-attribution-data","Layer does not have attribution data")}};w([S({type:String})],si.prototype,"attributionDataUrl",void 0),w([S({type:Tt})],si.prototype,"fullExtent",void 0),w([S({readOnly:!0})],si.prototype,"hasAttributionData",null),w([S({type:String,clonable:!1})],si.prototype,"id",void 0),w([S({type:Boolean,nonNullable:!0})],si.prototype,"legendEnabled",void 0),w([S({type:["show","hide","hide-children"]})],si.prototype,"listMode",void 0),w([S({type:Number,range:{min:0,max:1},nonNullable:!0})],si.prototype,"opacity",void 0),w([S({clonable:!1})],si.prototype,"parent",void 0),w([S({readOnly:!0})],si.prototype,"parsedUrl",null),w([S({type:Boolean,readOnly:!0})],si.prototype,"persistenceEnabled",void 0),w([S({type:Boolean})],si.prototype,"popupEnabled",void 0),w([S({type:Boolean})],si.prototype,"attributionVisible",void 0),w([S({type:He})],si.prototype,"spatialReference",void 0),w([S({type:String})],si.prototype,"title",void 0),w([S({readOnly:!0,json:{read:!1}})],si.prototype,"type",void 0),w([S()],si.prototype,"url",void 0),w([S({type:Boolean,nonNullable:!0})],si.prototype,"visible",void 0),si=w([B("esri.layers.Layer")],si);const Z5=si;function ww(e,t,i){let s,u;if(e)for(let d=0,y=e.length;d<y;d++){if(s=e.at(d),(s==null?void 0:s[t])===i)return s;if((s==null?void 0:s.type)==="group"&&(u=ww(s.layers,t,i),u))return u}}const pW=e=>{let t=class extends e{constructor(...i){super(...i),this.layers=new Oe;const s=y=>{y.parent&&"remove"in y.parent&&y.parent.remove(y)},u=y=>{y.parent=this,this.layerAdded(y),y.type!=="elevation"&&y.type!=="base-elevation"||de.getLogger(this).error(`Layer 'title:${y.title}, id:${y.id}' of type '${y.type}' is not supported as an operational layer and will therefore be ignored.`)},d=y=>{y.parent=null,this.layerRemoved(y)};this.addHandles([this.layers.on("before-add",y=>s(y.item)),this.layers.on("after-add",y=>u(y.item)),this.layers.on("after-remove",y=>d(y.item))])}destroy(){const i=this.layers.toArray();for(const s of i)s.destroy();this.layers.destroy()}set layers(i){this._set("layers",vu(i,this._get("layers")))}add(i,s){const u=this.layers;if(s=u.getNextIndex(s),i instanceof Z5){const d=i;d.parent===this?this.reorder(d,s):u.add(d,s)}else Oa(i)?i.then(d=>{this.destroyed||this.add(d,s)}):de.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(i,s){const u=this.layers;let d=u.getNextIndex(s);i.slice().forEach(y=>{y.parent!==this?(u.add(y,d),d+=1):this.reorder(y,d)})}findLayerById(i){return ww(this.layers,"id",i)}findLayerByUid(i){return ww(this.layers,"uid",i)}remove(i){return this.layers.remove(i)}removeMany(i){return this.layers.removeMany(i)}removeAll(){return this.layers.removeAll()}reorder(i,s){return this.layers.reorder(i,s)}layerAdded(i){}layerRemoved(i){}};return w([S()],t.prototype,"layers",null),t=w([B("esri.support.LayersMixin")],t),t};function bw(e,t,i){if(e)for(let s=0,u=e.length;s<u;s++){const d=e.at(s);if(d[t]===i)return d;if((d==null?void 0:d.type)==="group"){const y=bw(d.tables,t,i);if(y)return y}}}const dW=e=>{let t=class extends e{constructor(...i){super(...i),this.tables=new Oe,this.addHandles([this.tables.on("after-add",s=>{const u=s.item;u.parent&&u.parent!==this&&"tables"in u.parent&&u.parent.tables.remove(u),u.parent=this,u.type!=="feature"&&de.getLogger(this).error(`Layer 'title:${u.title}, id:${u.id}' of type '${u.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",s=>{s.item.parent=null})])}destroy(){const i=this.tables.toArray();for(const s of i)s.destroy();this.tables.destroy()}set tables(i){this._set("tables",vu(i,this._get("tables")))}findTableById(i){return bw(this.tables,"id",i)}findTableByUid(i){return bw(this.tables,"uid",i)}};return w([S()],t.prototype,"tables",null),t=w([B("esri.support.TablesMixin")],t),t};let Xs=class extends dW(pW(ja.EventedMixin(Ne))){constructor(t){super(t),this.allLayers=new Ep({getCollections:()=>{var i,s,u;return[(i=this.basemap)==null?void 0:i.baseLayers,(s=this.ground)==null?void 0:s.layers,this.layers,(u=this.basemap)==null?void 0:u.referenceLayers]},getChildrenFunction:i=>"layers"in i?i.layers:null}),this.allTables=lW(this),this.basemap=null,this.editableLayers=new Ep({getCollections:()=>[this.allLayers],itemFilterFunction:QB}),this.ground=new Cy,this._basemapCache=nW()}destroy(){oW(this._basemapCache),this._basemapCache=null,this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=Ot(this.basemap),Ot(this.ground),this._set("ground",null)}castBasemap(t){return aW(t,this._basemapCache)}castGround(t){return uW(t)??this._get("ground")}findLayerById(t){return this.allLayers.find(i=>i.id===t)}findTableById(t){return this.allTables.find(i=>i.id===t)}};w([S({readOnly:!0,dependsOn:[]})],Xs.prototype,"allLayers",void 0),w([S({readOnly:!0})],Xs.prototype,"allTables",void 0),w([S({type:ap,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],Xs.prototype,"basemap",void 0),w([mt("basemap")],Xs.prototype,"castBasemap",null),w([S({readOnly:!0})],Xs.prototype,"editableLayers",void 0),w([S({type:Cy,nonNullable:!0})],Xs.prototype,"ground",void 0),w([mt("ground")],Xs.prototype,"castGround",null),Xs=w([B("esri.Map")],Xs);const ME=Xs,M7={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function su(e,t,i,s=xn){const u=new Nr(C5(s)),d=Ue.fromJSDate(e,{zone:u}),y=i==="decades"||i==="centuries"?"year":IE(i);return i==="decades"&&(t*=10),i==="centuries"&&(t*=100),d.plus({[y]:t}).toJSDate()}function I7(e,t,i=xn){const s=new Nr(C5(i)),u=Ue.fromJSDate(e,{zone:s});if(t==="decades"||t==="centuries"){const y=u.startOf("year"),{year:v}=y,_=v-v%(t==="decades"?10:100);return y.set({year:_}).toJSDate()}const d=IE(t);return u.startOf(d).toJSDate()}function fW(e,t,i){return e===0?0:e*M7[t]/M7[i]}function IE(e){switch(e){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var ys;let Ir=ys=class extends pe{static get allTime(){return E7}static get empty(){return yW}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,t){return t.end!=null?new Date(t.end):null}writeEnd(e,t){t.end=(e==null?void 0:e.getTime())??null}get isAllTime(){return this.equals(ys.allTime)}get isEmpty(){return this.equals(ys.empty)}readStart(e,t){return t.start!=null?new Date(t.start):null}writeStart(e,t){t.start=(e==null?void 0:e.getTime())??null}clone(){return new ys({end:this.end,start:this.start})}equals(e){var d,y,v,_;if(!e)return!1;const t=((d=this.start)==null?void 0:d.getTime())??this.start,i=((y=this.end)==null?void 0:y.getTime())??this.end,s=((v=e.start)==null?void 0:v.getTime())??e.start,u=((_=e.end)==null?void 0:_.getTime())??e.end;return t===s&&i===u}expandTo(e,t=xn){if(this.isEmpty||this.isAllTime)return this.clone();let i=this.start;i&&(i=I7(i,e,t));let s=this.end;if(s){const u=I7(s,e,t);s=s.getTime()===u.getTime()?u:su(u,1,e,t)}return new ys({start:i,end:s})}intersection(e){var v,_,M,E;if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return ys.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=((v=this.start)==null?void 0:v.getTime())??-1/0,i=((_=this.end)==null?void 0:_.getTime())??1/0,s=((M=e.start)==null?void 0:M.getTime())??-1/0,u=((E=e.end)==null?void 0:E.getTime())??1/0;let d,y;if(s>=t&&s<=i?d=s:t>=s&&t<=u&&(d=t),i>=s&&i<=u?y=i:u>=t&&u<=i&&(y=u),d!=null&&y!=null&&!isNaN(d)&&!isNaN(y)){const O=new ys;return O.start=d===-1/0?null:new Date(d),O.end=y===1/0?null:new Date(y),O}return ys.empty}offset(e,t,i=xn){if(this.isEmpty||this.isAllTime)return this.clone();const s=new ys,{start:u,end:d}=this;return u!=null&&(s.start=su(u,e,t,i)),d!=null&&(s.end=su(d,e,t,i)),s}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return E7.clone();const t=this.start!=null&&e.start!=null?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,i=this.end!=null&&e.end!=null?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new ys({start:t,end:i})}};w([S({type:Date,json:{write:{allowNull:!0}}})],Ir.prototype,"end",void 0),w([me("end")],Ir.prototype,"readEnd",null),w([_e("end")],Ir.prototype,"writeEnd",null),w([S({readOnly:!0,json:{read:!1}})],Ir.prototype,"isAllTime",null),w([S({readOnly:!0,json:{read:!1}})],Ir.prototype,"isEmpty",null),w([S({type:Date,json:{write:{allowNull:!0}}})],Ir.prototype,"start",void 0),w([me("start")],Ir.prototype,"readStart",null),w([_e("start")],Ir.prototype,"writeStart",null),Ir=ys=w([B("esri.TimeExtent")],Ir);const E7=new Ir,yW=new Ir({start:void 0,end:void 0}),Tn=Ir;let up=class extends Oe{constructor(t){super(t),this.addHandles([this.on("before-add",i=>{i.item==null&&i.preventDefault()}),this.on("after-add",i=>this._own(i.item)),this.on("after-remove",i=>this._release(i.item))])}get owner(){return this._get("owner")}set owner(t){t!==this._get("owner")&&(this._releaseAll(),this._set("owner",t),this._ownAll())}_ownAll(){for(const t of this.items)this._own(t)}_releaseAll(){for(const t of this.items)this._release(t)}_createNewInstance(t){return this.itemType?new(Oe.ofType(this.itemType.Type))(t):new Oe(t)}};function _w(e,t){return{type:e,cast:ZI,set(i){const s=vu(i,this._get(t),e);s.owner=this,this._set(t,s)}}}w([S()],up.prototype,"owner",null),up=w([B("esri.core.support.OwningCollection")],up);var l0;const jy=Ji()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),EE=jy.jsonValues.slice();VC(EE,"orthometric");const hp=Ji()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let ms=l0=class extends pe{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,i){return jy.write(e,t,i)}readHeightModel(e,t,i){return jy.read(e)||(i!=null&&i.messages&&i.messages.push(mW(e,{context:i})),null)}readHeightUnit(e,t,i){return hp.read(e)||(i!=null&&i.messages&&i.messages.push(k7(e,{context:i})),null)}readHeightUnitService(e,t,i){return bT(e)||hp.read(e)||(i!=null&&i.messages&&i.messages.push(k7(e,{context:i})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new l0({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const i=VD(t);return new l0({heightModel:e.heightModel,heightUnit:i,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new l0;return t.read(e,{origin:"web-scene"}),t}};function k7(e,t){return new is("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}function mW(e,t){return new is("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}w([S({type:jy.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:EE,default:"ellipsoidal"}}}})],ms.prototype,"heightModel",void 0),w([_e("web-scene","heightModel")],ms.prototype,"writeHeightModel",null),w([me(["web-scene","service"],"heightModel")],ms.prototype,"readHeightModel",null),w([S({type:hp.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:hp.jsonValues,write:hp.write}}}})],ms.prototype,"heightUnit",void 0),w([me("web-scene","heightUnit")],ms.prototype,"readHeightUnit",null),w([me("service","heightUnit")],ms.prototype,"readHeightUnitService",null),w([S({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],ms.prototype,"vertCRS",void 0),w([me("service","vertCRS",["vertCRS","ellipsoid","geoid"])],ms.prototype,"readVertCRS",null),ms=l0=w([B("esri.geometry.HeightModelInfo")],ms);const qm=ms;let Ny=class extends up{constructor(t){super(t),this.addHandles(this.on("before-add",i=>{i.item!=null&&i.item.parent===this.owner&&(de.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),i.preventDefault())}))}_own(t){t.parent=this.owner}_release(t){t.parent=null}};Ny=w([B("esri.support.AnalysesCollection")],Ny);async function kE(e,t){const{WhereClause:i}=await Se(()=>import("./WhereClause-f930ce8b.js").then(s=>s.W),["assets/WhereClause-f930ce8b.js","assets/TimeOnly-c5d299c6.js"]);return i.create(e,t)}function gW(e,t){return e!=null?t!=null?`(${e}) AND (${t})`:e:t}function Gu(e){return typeof e=="string"||e instanceof String}const vW="yyyy-MM-dd",wW="TT";var cp;(function(e){e.HM="HH:mm",e.HMS="HH:mm:ss",e.HMS_MS="HH:mm:ss.SSS"})(cp||(cp={}));const bW=[cp.HMS_MS,cp.HMS,cp.HM,wW];function A7(e){return Ue.fromFormat(e,vW)}function O7(e){let t=null;return bW.find(i=>(t=Ue.fromFormat(e,i),t.isValid)),t}function P7(e){return Ue.fromISO(e)}var dc;(function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(dc||(dc={}));const _W=new Set(["integer","small-integer","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"]);function xW(e){return e!=null&&_W.has(e.type)}function AE(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function OE(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function PE(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}function SW(e,t){const i=e==null?void 0:e.domain;if(!i)return null;switch(i.type){case"range":{const{min:s,max:u}=$W(e);if(s!=null&&+t<s||u!=null&&+t>u)return dc.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(i.codedValues==null||i.codedValues.every(s=>s==null||s.code!==t))return dc.INVALID_CODED_VALUE}return null}function $W(e,t){const i=t??(e==null?void 0:e.domain);if(!i||i.type!=="range")return;const s="range"in i?i.range[0]:i.minValue,u="range"in i?i.range[1]:i.maxValue,d=xW(e);return AE(e)||PE(e)||OE(e)?{...TW(e,u,s),isInteger:d}:{min:s!=null&&typeof s=="number"?s:null,max:u!=null&&typeof u=="number"?u:null,rawMin:s,rawMax:u,isInteger:d}}function TW(e,t,i){return AE(e)?{min:i!=null&&Gu(i)?A7(i).toMillis():null,max:t!=null&&Gu(t)?A7(t).toMillis():null,rawMin:i,rawMax:t}:PE(e)?{min:i!=null&&Gu(i)?O7(i).toMillis():null,max:t!=null&&Gu(t)?O7(t).toMillis():null,rawMin:i,rawMax:t}:OE(e)?{min:i!=null&&Gu(i)?P7(i).toMillis():null,max:t!=null&&Gu(t)?P7(t).toMillis():null,rawMin:i,rawMax:t}:{max:null,min:null}}const MW=de.getLogger("esri.support.arcadeOnDemand");let u2;function wu(){return u2||(u2=(async()=>{const e=await Se(()=>import("./arcadeUtils-104a1098.js").then(t=>t.aD),["assets/arcadeUtils-104a1098.js","assets/TimeOnly-c5d299c6.js","assets/number-c93cfa6d.js","assets/featureConversionUtils-317e3645.js","assets/OptimizedGeometry-d94e541f.js","assets/OptimizedFeatureSet-1d1ac4b9.js"]);return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),u2}const Ihe=(e,t,i)=>Y5.create(e,t,i,null,["$feature","$view"],[]),Ehe=(e,t,i)=>Y5.create(e,t,i,null,["$feature","$view"],[]),IW=(e,t,i,s)=>Y5.create(e,t,i,s,["$feature","$view"],[]);let Y5=class CE{constructor(t,i,s,u,d,y,v){this.services=null,this.script=t,this.evaluate=u;const _=Array.isArray(y)?y:y.fields;this.fields=_,this._syntaxTree=s,this._arcade=i,this._arcadeFeature=d,this._spatialReference=v,this._referencesGeometry=i.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(t,i,s,u,d,y){const{arcade:v,Feature:_,Dictionary:M}=await wu(),E=He.fromJSON(i);let O;try{O=v.parseScript(t,y)}catch(we){return MW.error(new ae("arcade-bad-expression","Failed to parse arcade script",{script:t,error:we})),null}const C=d.reduce((we,Ee)=>({...we,[Ee]:null}),{});let R=null;u!=null&&(R=new M(u),R.immutable=!0,C.$config=null);const L=v.scriptUsesGeometryEngine(O),G=L&&v.enableGeometrySupport(),U=v.scriptUsesFeatureSet(O)&&v.enableFeatureSetSupport(),K=v.scriptIsAsync(O),ee=K&&v.enableAsyncSupport(),Q={vars:C,spatialReference:E,useAsync:!!ee};await Promise.all([G,U,ee]);const re=new Set;await v.loadDependentModules(re,O,null,K,L);const ne=new M;ne.immutable=!1,ne.setField("scale",0);const le=v.compileScript(O,Q),ve=(we,Ee)=>{var Le;const Me=(Le=we.$view)==null?void 0:Le.timeZone;return"$view"in we&&we.$view&&(ne.setField("scale",typeof we.$view=="object"&&"scale"in we.$view?we.$view.scale:void 0),we.$view=ne),R&&(we.$config=R),le({vars:we,spatialReference:E,services:Ee,timeZone:Me})};return new CE(t,v,O,ve,new _,s,E)}repurposeFeature(t){return t.geometry&&!t.geometry.spatialReference&&(t.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(t.geometry,t.attributes,{fields:this.fields}),this._arcadeFeature}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}};const EW=/^([0-9_])/,kW=/[^a-z0-9_\u0080-\uffff]+/gi;function AW(e){return e==null?null:e.trim().replaceAll(kW,"_").replace(EW,"F$1")||null}const OW=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],PW=["field","normalizationField"];function C7(e,t){if(e!=null&&t!=null){for(const i of Array.isArray(e)?e:[e])if(j7(OW,i,t),"visualVariables"in i&&i.visualVariables)for(const s of i.visualVariables)j7(PW,s,t)}}function j7(e,t,i){if(e)for(const s of e){const u=Kp(s,t),d=u&&typeof u!="function"&&i.get(u);d&&Hi(s,d.name,t)}}function jE(e,t){var i;if(e!=null&&((i=t==null?void 0:t.fields)!=null&&i.length))if("startField"in e){const s=t.get(e.startField),u=t.get(e.endField);e.startField=(s==null?void 0:s.name)??null,e.endField=(u==null?void 0:u.name)??null}else{const s=t.get(e.startTimeField),u=t.get(e.endTimeField);e.startTimeField=(s==null?void 0:s.name)??null,e.endTimeField=(u==null?void 0:u.name)??null}}const h2=new Set;function X5(e,t){return e&&t?(h2.clear(),Rp(h2,e,t),Array.from(h2).sort()):[]}function Rp(e,t,i){var s;if(i)if((s=t==null?void 0:t.fields)!=null&&s.length)if(i.includes("*"))for(const{name:u}of t.fields)e.add(u);else for(const u of i)jr(e,t,u);else{if(i.includes("*"))return e.clear(),void e.add("*");for(const u of i)u!=null&&e.add(u)}}function jr(e,t,i){if(typeof i=="string")if(t){const s=t.get(i);s&&e.add(s.name)}else e.add(i)}function khe(e,t){return t==null||e==null?[]:t.includes("*")?(e.fields??[]).map(i=>i.name):t}async function nr(e,t,i){var d;if(!i)return;const{arcadeUtils:s}=await wu(),u=s.extractFieldNames(i,(d=t==null?void 0:t.fields)==null?void 0:d.map(y=>y.name));for(const y of u)jr(e,t,y)}async function NE(e,t,i){if(i&&i!=="1=1"){const s=await kE(i,t);if(!s.isStandardized)throw new ae("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});Rp(e,t,s.fieldNames)}}function CW({displayField:e,fields:t}){return e||(t!=null&&t.length?c2(t,"name-or-title")||c2(t,"unique-identifier")||c2(t,"type-or-category")||jW(t):null)}function jW(e){for(const t of e){if(!(t!=null&&t.name))continue;const i=t.name.toLowerCase();if(i.includes("name")||i.includes("title"))return t.name}return null}function c2(e,t){for(const i of e)if(i!=null&&i.valueType&&i.valueType===t)return i.name;return null}async function Ahe(e,t){var s;if(!t)return;const i=(s=t.elevationInfo)==null?void 0:s.featureExpressionInfo;return i?i.collectRequiredFields(e,t.fieldsIndex):void 0}function NW(e,t,i){i.onStatisticExpression?nr(e,t,i.onStatisticExpression.expression):e.add(i.onStatisticField)}async function Ohe(e,t,i){if(!t||!i||!("fields"in i))return;const s=[],u=i.popupTemplate;s.push(RW(e,t,u)),i.fields&&s.push(...i.fields.map(async d=>NW(e,t.fieldsIndex,d))),await Promise.all(s)}async function RW(e,t,i){const s=[];i!=null&&i.expressionInfos&&s.push(...i.expressionInfos.map(d=>nr(e,t.fieldsIndex,d.expression)));const u=i==null?void 0:i.content;if(Array.isArray(u))for(const d of u)d.type==="expression"&&d.expressionInfo&&s.push(nr(e,t.fieldsIndex,d.expressionInfo.expression));await Promise.all(s)}async function Phe(e,t,i){t&&(t.timeInfo&&(i!=null&&i.timeExtent)&&Rp(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&Rp(e,t.fieldsIndex,[t.floorInfo.floorField]),(i==null?void 0:i.where)!=null&&await NE(e,t.fieldsIndex,i.where))}async function Che(e,t,i){t&&i&&await Promise.all(i.map(s=>LW(e,t,s)))}async function LW(e,t,i){t&&i&&(i.valueExpression?await nr(e,t.fieldsIndex,i.valueExpression):i.field&&jr(e,t.fieldsIndex,i.field))}function jhe(e){return e?X5(e.fieldsIndex,RE(e)):[]}function DW(e){if(!e)return[];const t=e.geometryFieldsInfo;return t?X5(e.fieldsIndex,[t.shapeAreaField,t.shapeLengthField]):[]}const FW=new Set(["oid","global-id","guid"]),zW=new Set(["oid","global-id"]),VW=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i];function GW(e){const t=new Set;LE(e).forEach(s=>t.add(s)),DW(e).forEach(s=>t.add(s.toLowerCase()));const i=e&&"infoFor3D"in e?e.infoFor3D:void 0;return i&&(Object.values(i.assetMapFieldRoles).forEach(s=>t.add(s.toLowerCase())),Object.values(i.transformFieldRoles).forEach(s=>t.add(s.toLowerCase()))),Array.from(t)}function RE(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;if(!t)return[];const{creationDateField:i,creatorField:s,editDateField:u,editorField:d}=t;return[i,s,u,d].filter(Boolean)}function LE(e){return RE(e).map(t=>t.toLowerCase())}function qW(e,t){var i;return e.editable&&!FW.has(e.type)&&!LE(t).includes(((i=e.name)==null?void 0:i.toLowerCase())??"")}function UW(e,t){var s;const i=((s=e.name)==null?void 0:s.toLowerCase())??"";return!((t==null?void 0:t.objectIdField)!=null&&i===t.objectIdField.toLowerCase()||(t==null?void 0:t.globalIdField)!=null&&i===t.globalIdField.toLowerCase()||GW(t).includes(i)||zW.has(e.type)||VW.some(u=>u.test(i)))}async function Nhe(e,t){const{labelingInfo:i,fieldsIndex:s}=t;i!=null&&i.length&&await Promise.all(i.map(u=>BW(e,s,u)))}async function BW(e,t,i){if(!i)return;const s=i.getLabelExpression(),u=i.where;if(s.type==="arcade")await nr(e,t,s.expression);else{const d=s.expression.match(/{[^}]*}/g);d&&d.forEach(y=>{jr(e,t,y.slice(1,-1))})}await NE(e,t,u)}function HW(e){const t=e.defaultValue;return t!==void 0&&zE(e,t)?t:e.nullable?null:void 0}function Rhe(e){const t=typeof e=="string"?{type:e}:e;return sJ(t)?255:t.type==="esriFieldTypeDate"||t.type==="date"?8:void 0}function DE(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function WW(e){return e===null||DE(e)}function JW(e){return e===null||Number.isInteger(e)}function FE(e){return e!=null&&typeof e=="string"}function KW(e){return e===null||FE(e)}function ZW(){return!0}function zE(e,t){let i;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":i=e.nullable?JW:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=e.nullable?WW:DE;break;case"string":case"esriFieldTypeString":i=e.nullable?KW:FE;break;default:i=ZW}return arguments.length===1?i:i(t)}const YW=["integer","small-integer","big-integer"],XW=["single","double"],QW=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"],eJ=["esriFieldTypeSingle","esriFieldTypeDouble"],tJ=new Set([...YW,...QW]),iJ=new Set([...XW,...eJ]),rJ=Uj(tJ,iJ);function VE(e){return e!=null&&rJ.has(e.type)}function sJ(e){return e!=null&&(e.type==="string"||e.type==="esriFieldTypeString")}function nJ(e){return e!=null&&(e.type==="date"||e.type==="esriFieldTypeDate")}function Lhe(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function Dhe(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function oJ(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}function N7(e){return e!=null&&(e.type==="oid"||e.type==="esriFieldTypeOID")}function R7(e){return e!=null&&(e.type==="global-id"||e.type==="esriFieldTypeGlobalID")}function Fhe(e,t){return aJ(e,t)===null}var Ry,Ly;function zhe(e){return e==null||typeof e=="number"&&isNaN(e)?null:e}function aJ(e,t){return e==null||e.nullable&&t===null?null:VE(e)&&!lJ(e.type,Number(t))?Ry.OUT_OF_RANGE:zE(e,t)?e.domain?SW(e,t):null:Ly.INVALID_TYPE}function lJ(e,t){const i=typeof e=="string"?GE(e):e;if(!i)return!1;const s=i.min,u=i.max;return i.isInteger?Number.isInteger(t)&&t>=s&&t<=u:t>=s&&t<=u}function GE(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return uJ;case"esriFieldTypeInteger":case"integer":return hJ;case"esriFieldTypeBigInteger":case"big-integer":return cJ;case"esriFieldTypeSingle":case"single":return pJ;case"esriFieldTypeDouble":case"double":return dJ}}(function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(Ry||(Ry={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(Ly||(Ly={}));const uJ={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},hJ={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},cJ={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},pJ={min:-34e37,max:12e37,isInteger:!1,rawMin:-34e37,rawMax:12e37},dJ={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function Vhe(e,t,i){switch(e){case dc.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case dc.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case Ly.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case Ry.OUT_OF_RANGE:{const{min:s,max:u}=GE(t.type);return`Value ${i} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${s} to ${u}`}}}function Ghe(e,t){return!fJ(e,t,null)}function fJ(e,t,i){if(!(t!=null&&t.attributes)||!e){if(i!=null)for(const d of e??[])i.add(d);return!0}const s=new Set(Object.keys(t.attributes));let u=!1;for(const d of e)if(!s.has(d)){if(u=!0,i==null)break;i.add(d)}return u}function yJ(e){return!!e&&["raster.itempixelvalue","raster.servicepixelvalue"].some(t=>e.toLowerCase().startsWith(t))}let Qf=class extends pe{constructor(t){super(t),this.type=null}};w([S({type:["attachments","custom","fields","media","text","expression","relationship"],readOnly:!0,json:{read:!1,write:!0}})],Qf.prototype,"type",void 0),Qf=w([B("esri.popup.content.Content")],Qf);const Da=Qf;var xw;let tl=xw=class extends Da{constructor(e){super(e),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new xw({description:this.description,displayType:this.displayType,title:this.title})}};w([S({type:String,json:{write:!0}})],tl.prototype,"description",void 0),w([S({type:["auto","preview","list"],json:{write:!0}})],tl.prototype,"displayType",void 0),w([S({type:String,json:{write:!0}})],tl.prototype,"title",void 0),w([S({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],tl.prototype,"type",void 0),tl=xw=w([B("esri.popup.content.AttachmentsContent")],tl);const Lp=tl;var Sw;let il=Sw=class extends Da{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new Sw({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?ie(this.outFields):null})}};w([S()],il.prototype,"creator",void 0),w([S()],il.prototype,"destroyer",void 0),w([S()],il.prototype,"outFields",void 0),w([S({type:["custom"],readOnly:!0})],il.prototype,"type",void 0),il=Sw=w([B("esri.popup.content.CustomContent")],il);const mJ=il;var $w;let th=$w=class extends pe{constructor(e){super(e),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new $w({title:this.title,expression:this.expression})}};w([S({type:String,json:{write:!0}})],th.prototype,"title",void 0),w([S({type:String,json:{write:!0}})],th.prototype,"expression",void 0),w([S({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],th.prototype,"returnType",void 0),th=$w=w([B("esri.popup.ElementExpressionInfo")],th);const gJ=th;var Tw;let u0=Tw=class extends Da{constructor(e){super(e),this.expressionInfo=null,this.type="expression"}clone(){var e;return new Tw({expressionInfo:(e=this.expressionInfo)==null?void 0:e.clone()})}};w([S({type:gJ,json:{write:!0}})],u0.prototype,"expressionInfo",void 0),w([S({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],u0.prototype,"type",void 0),u0=Tw=w([B("esri.popup.content.ExpressionContent")],u0);const Q5=u0;let ih=class extends Mt(pe){constructor(t){super(t),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};w([Ae(xG)],ih.prototype,"dateFormat",void 0),w([S({type:Boolean,json:{write:!0}})],ih.prototype,"digitSeparator",void 0),w([S({type:St,json:{write:!0}})],ih.prototype,"places",void 0),ih=w([B("esri.popup.support.FieldInfoFormat")],ih);const e1=ih;var Mw;let gs=Mw=class extends pe{constructor(e){super(e),this.fieldName=null,this.format=null,this.isEditable=!0,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new Mw({fieldName:this.fieldName,format:this.format?ie(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};w([S({type:String,json:{write:!0}})],gs.prototype,"fieldName",void 0),w([S({type:e1,json:{write:!0}})],gs.prototype,"format",void 0),w([S({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],gs.prototype,"isEditable",void 0),w([S({type:String,json:{write:!0}})],gs.prototype,"label",void 0),w([Ae(new et({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],gs.prototype,"stringFieldOption",void 0),w([S({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],gs.prototype,"statisticType",void 0),w([S({type:String,json:{write:!0}})],gs.prototype,"tooltip",void 0),w([S({type:Boolean,json:{write:!0}})],gs.prototype,"visible",void 0),gs=Mw=w([B("esri.popup.FieldInfo")],gs);const e4=gs;var Iw;let Dn=Iw=class extends Da{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(e,t){t.fieldInfos=e&&e.map(i=>i.toJSON())}clone(){return new Iw(ie({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};w([S({type:Object,json:{write:!0}})],Dn.prototype,"attributes",void 0),w([S({type:String,json:{write:!0}})],Dn.prototype,"description",void 0),w([S({type:[e4]})],Dn.prototype,"fieldInfos",void 0),w([_e("fieldInfos")],Dn.prototype,"writeFieldInfos",null),w([S({type:String,json:{write:!0}})],Dn.prototype,"title",void 0),w([S({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],Dn.prototype,"type",void 0),Dn=Iw=w([B("esri.popup.content.FieldsContent")],Dn);const Dp=Dn;let rl=class extends pe{constructor(t){super(t),this.altText=null,this.caption="",this.title="",this.type=null}};w([S({type:String,json:{write:!0}})],rl.prototype,"altText",void 0),w([S({type:String,json:{write:!0}})],rl.prototype,"caption",void 0),w([S({type:String,json:{write:!0}})],rl.prototype,"title",void 0),w([S({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],rl.prototype,"type",void 0),rl=w([B("esri.popup.content.mixins.MediaInfo")],rl);const t4=rl;var Ew;let sl=Ew=class extends Ne{constructor(e){super(e),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new Ew({fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};w([S()],sl.prototype,"color",void 0),w([S()],sl.prototype,"fieldName",void 0),w([S()],sl.prototype,"tooltip",void 0),w([S()],sl.prototype,"value",void 0),sl=Ew=w([B("esri.popup.content.support.ChartMediaInfoValueSeries")],sl);const vJ=sl;var kw;let Do=kw=class extends pe{constructor(e){super(e),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new kw({colors:ie(this.colors),fields:ie(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})}};w([S({type:[Ve],json:{type:[[St]],write:!0}})],Do.prototype,"colors",void 0),w([S({type:[String],json:{write:!0}})],Do.prototype,"fields",void 0),w([S({type:String,json:{write:!0}})],Do.prototype,"normalizeField",void 0),w([S({type:[vJ],json:{read:!1}})],Do.prototype,"series",void 0),w([S({type:String,json:{write:!0}})],Do.prototype,"tooltipField",void 0),Do=kw=w([B("esri.popup.content.support.ChartMediaInfoValue")],Do);const wJ=Do;let h0=class extends t4{constructor(t){super(t),this.type=null,this.value=null}};w([S({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],h0.prototype,"type",void 0),w([S({type:wJ,json:{write:!0}})],h0.prototype,"value",void 0),h0=w([B("esri.popup.content.mixins.ChartMediaInfo")],h0);const Um=h0,Bm=Ji()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var Aw;let t1=Aw=class extends Um{constructor(e){super(e),this.type="bar-chart"}clone(){return new Aw({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};w([S({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:Bm.write}})],t1.prototype,"type",void 0),t1=Aw=w([B("esri.popup.content.BarChartMediaInfo")],t1);const qE=t1;var Ow;let i1=Ow=class extends Um{constructor(e){super(e),this.type="column-chart"}clone(){return new Ow({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};w([S({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:Bm.write}})],i1.prototype,"type",void 0),i1=Ow=w([B("esri.popup.content.ColumnChartMediaInfo")],i1);const UE=i1;var Pw;let c0=Pw=class extends pe{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new Pw({linkURL:this.linkURL,sourceURL:this.sourceURL})}};w([S({type:String,json:{write:!0}})],c0.prototype,"linkURL",void 0),w([S({type:String,json:{write:!0}})],c0.prototype,"sourceURL",void 0),c0=Pw=w([B("esri.popup.content.support.ImageMediaInfoValue")],c0);const bJ=c0;var Cw;let rh=Cw=class extends t4{constructor(e){super(e),this.refreshInterval=null,this.type="image",this.value=null}clone(){return new Cw({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})}};w([S({type:Number,json:{write:!0}})],rh.prototype,"refreshInterval",void 0),w([S({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],rh.prototype,"type",void 0),w([S({type:bJ,json:{write:!0}})],rh.prototype,"value",void 0),rh=Cw=w([B("esri.popup.content.ImageMediaInfo")],rh);const BE=rh;var jw;let r1=jw=class extends Um{constructor(e){super(e),this.type="line-chart"}clone(){return new jw({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};w([S({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:Bm.write}})],r1.prototype,"type",void 0),r1=jw=w([B("esri.popup.content.LineChartMediaInfo")],r1);const HE=r1;var Nw;let s1=Nw=class extends Um{constructor(e){super(e),this.type="pie-chart"}clone(){return new Nw({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};w([S({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:Bm.write}})],s1.prototype,"type",void 0),s1=Nw=w([B("esri.popup.content.PieChartMediaInfo")],s1);const WE=s1,JE={base:t4,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":qE,"column-chart":UE,"line-chart":HE,"pie-chart":WE,image:BE}};var Rw;let vs=Rw=class extends Da{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map(t=>t.type==="image"?BE.fromJSON(t):t.type==="barchart"?qE.fromJSON(t):t.type==="columnchart"?UE.fromJSON(t):t.type==="linechart"?HE.fromJSON(t):t.type==="piechart"?WE.fromJSON(t):void 0).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map(i=>i.toJSON())}clone(){return new Rw(ie({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};w([S()],vs.prototype,"activeMediaInfoIndex",void 0),w([S({type:Object,json:{write:!0}})],vs.prototype,"attributes",void 0),w([S({type:String,json:{write:!0}})],vs.prototype,"description",void 0),w([S({types:[JE]})],vs.prototype,"mediaInfos",void 0),w([me("mediaInfos")],vs.prototype,"readMediaInfos",null),w([_e("mediaInfos")],vs.prototype,"writeMediaInfos",null),w([S({type:String,json:{write:!0}})],vs.prototype,"title",void 0),w([S({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],vs.prototype,"type",void 0),vs=Rw=w([B("esri.popup.content.MediaContent")],vs);const Dy=vs;var Lw;let p0=Lw=class extends pe{constructor(e){super(e),this.field=null,this.order=null}clone(){return new Lw({field:this.field,order:this.order})}};w([S({type:String,json:{write:!0}})],p0.prototype,"field",void 0),w([S({type:["asc","desc"],json:{write:!0}})],p0.prototype,"order",void 0),p0=Lw=w([B("esri.popup.support.RelatedRecordsInfoFieldOrder")],p0);const i4=p0;let Qs=class extends Mt(Da){constructor(t){super(t),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};w([S({type:String,json:{write:!0}})],Qs.prototype,"description",void 0),w([S({type:Number,json:{type:St,write:!0}})],Qs.prototype,"displayCount",void 0),w([S({type:["list"],json:{write:!0}})],Qs.prototype,"displayType",void 0),w([S({type:[i4],json:{write:!0}})],Qs.prototype,"orderByFields",void 0),w([S({type:Number,json:{type:St,write:!0}})],Qs.prototype,"relationshipId",void 0),w([S({type:String,json:{write:!0}})],Qs.prototype,"title",void 0),w([S({type:["relationship"],readOnly:!0,json:{read:!1,write:!0}})],Qs.prototype,"type",void 0),Qs=w([B("esri.popup.content.RelationshipContent")],Qs);const Fy=Qs;var Dw;let d0=Dw=class extends Da{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new Dw({text:this.text})}};w([S({type:String,json:{write:!0}})],d0.prototype,"text",void 0),w([S({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],d0.prototype,"type",void 0),d0=Dw=w([B("esri.popup.content.TextContent")],d0);const zy=d0,_J={base:null,key:"type",typeMap:{attachment:Lp,media:Dy,text:zy,expression:Q5,field:Dp,relationship:Fy}};var Fw;let nl=Fw=class extends pe{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new Fw({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};w([S({type:String,json:{write:!0}})],nl.prototype,"name",void 0),w([S({type:String,json:{write:!0}})],nl.prototype,"title",void 0),w([S({type:String,json:{write:!0}})],nl.prototype,"expression",void 0),w([S({type:["string","number"],json:{write:!0}})],nl.prototype,"returnType",void 0),nl=Fw=w([B("esri.popup.ExpressionInfo")],nl);const xJ=nl;var zw;let f0=zw=class extends pe{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new zw({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};w([S({type:Boolean,json:{write:!0}})],f0.prototype,"returnTopmostRaster",void 0),w([S({type:Boolean,json:{write:!0}})],f0.prototype,"showNoDataRecords",void 0),f0=zw=w([B("esri.popup.LayerOptions")],f0);const SJ=f0;var Vw;let y0=Vw=class extends pe{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new Vw({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?ie(this.orderByFields):null})}};w([S({type:Boolean,json:{write:!0}})],y0.prototype,"showRelatedRecords",void 0),w([S({type:[i4],json:{write:!0}})],y0.prototype,"orderByFields",void 0),y0=Vw=w([B("esri.popup.RelatedRecordsInfo")],y0);const $J=y0;var Gw;let Ur=Gw=class extends J5(Ne){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new Gw({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};w([S()],Ur.prototype,"active",void 0),w([S()],Ur.prototype,"className",void 0),w([S()],Ur.prototype,"disabled",void 0),w([S()],Ur.prototype,"icon",void 0),w([S()],Ur.prototype,"id",void 0),w([S()],Ur.prototype,"indicator",void 0),w([S()],Ur.prototype,"title",void 0),w([S()],Ur.prototype,"type",void 0),w([S()],Ur.prototype,"visible",void 0),Ur=Gw=w([B("esri.support.actions.ActionBase")],Ur);const r4=Ur;var qw;let n1=qw=class extends r4{constructor(e){super(e),this.image=null,this.type="button"}clone(){return new qw({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};w([S()],n1.prototype,"image",void 0),n1=qw=w([B("esri.support.Action.ActionButton")],n1);const TJ=n1;var Uw;let m0=Uw=class extends r4{constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new Uw({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};w([S()],m0.prototype,"image",void 0),w([S()],m0.prototype,"value",void 0),m0=Uw=w([B("esri.support.Action.ActionToggle")],m0);const MJ=m0,IJ="esri.PopupTemplate",EJ=de.getLogger(IJ),Zc="relationships/",L7="expression/",kJ=Oe.ofType({key:"type",defaultKeyValue:"button",base:r4,typeMap:{button:TJ,toggle:MJ}}),AJ={base:Da,key:"type",typeMap:{media:Dy,custom:mJ,text:zy,attachments:Lp,fields:Dp,expression:Q5,relationship:Fy}},OJ=new Set(["attachments","fields","media","text","expression","relationship"]);let di=class extends Mt(pe){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(t){return Array.isArray(t)?t.map(i=>wn(AJ,i)):typeof t=="string"||typeof t=="function"||t instanceof HTMLElement||Oa(t)?t:(EJ.error("content error","unsupported content value",{value:t}),null)}readContent(t,i){const{popupElements:s}=i;return Array.isArray(s)&&s.length>0?this._readPopupInfoElements(i.description,i.mediaInfos,s):this._readPopupInfo(i)}writeContent(t,i,s,u){typeof t!="string"?Array.isArray(t)&&(i.popupElements=t.filter(d=>OJ.has(d.type)).map(d=>d==null?void 0:d.toJSON(u)),i.popupElements.forEach(d=>{d.type==="attachments"?this._writeAttachmentContent(i):d.type==="media"?this._writeMediaContent(d,i):d.type==="text"?this._writeTextContent(d,i):d.type==="relationship"&&this._writeRelationshipContent(d,i)})):i.description=t}writeFieldInfos(t,i,s,u){const{content:d}=this,y=Array.isArray(d)?d:null;if(t){const v=y?y.filter(M=>M.type==="fields"):[],_=v.length&&v.every(M=>{var E;return(E=M.fieldInfos)==null?void 0:E.length});i.fieldInfos=t.filter(Boolean).map(M=>{const E=M.toJSON(u);return _&&(E.visible=!1),E})}if(y)for(const v of y)v.type==="fields"&&this._writeFieldsContent(v,i)}writeLayerOptions(t,i,s,u){i[s]=!t||t.showNoDataRecords===null&&t.returnTopmostRaster===null?null:t.toJSON(u)}writeTitle(t,i){i.title=t||""}async collectRequiredFields(t,i){const s=this.expressionInfos||[];await this._collectExpressionInfoFields(t,i,[...s,...this._getContentExpressionInfos(this.content,s)]),Rp(t,i,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(t){const i=new Set;return await this.collectRequiredFields(i,t),[...i].sort()}_writeFieldsContent(t,i){if(!Array.isArray(t.fieldInfos)||!t.fieldInfos.length)return;const s=ie(t.fieldInfos);Array.isArray(i.fieldInfos)?s.forEach(u=>{const d=i.fieldInfos.find(y=>y.fieldName.toLowerCase()===u.fieldName.toLowerCase());d?d.visible=!0:i.fieldInfos.push(u)}):i.fieldInfos=s}_writeAttachmentContent(t){t.showAttachments||(t.showAttachments=!0)}_writeRelationshipContent(t,i){var d,y;const s=((d=t.orderByFields)==null?void 0:d.map(v=>this._toFieldOrderJSON(v,t.relationshipId)))||[],u=[...((y=i.relatedRecordsInfo)==null?void 0:y.orderByFields)||[],...s];i.relatedRecordsInfo={showRelatedRecords:!0,...(u==null?void 0:u.length)&&{orderByFields:u}}}_writeTextContent(t,i){!i.description&&t.text&&(i.description=t.text)}_writeMediaContent(t,i){if(!Array.isArray(t.mediaInfos)||!t.mediaInfos.length)return;const s=ie(t.mediaInfos);Array.isArray(i.mediaInfos)?i.mediaInfos=[...i.mediaInfos,...s]:i.mediaInfos=s}_readPopupInfoElements(t,i,s){const u={description:!1,mediaInfos:!1};return s.map(d=>d.type==="media"?(d.mediaInfos||!i||u.mediaInfos||(d.mediaInfos=i,u.mediaInfos=!0),Dy.fromJSON(d)):d.type==="text"?(d.text||!t||u.description||(d.text=t,u.description=!0),zy.fromJSON(d)):d.type==="attachments"?Lp.fromJSON(d):d.type==="fields"?Dp.fromJSON(d):d.type==="expression"?Q5.fromJSON(d):d.type==="relationship"?Fy.fromJSON(d):void 0).filter(Boolean)}_toRelationshipContent(t){const{field:i,order:s}=t;if(!(i!=null&&i.startsWith(Zc)))return null;const u=i.replace(Zc,"").split("/");if(u.length!==2)return null;const d=parseInt(u[0],10),y=u[1];return typeof d=="number"&&y?Fy.fromJSON({relationshipId:d,orderByFields:[{field:y,order:s}]}):null}_toFieldOrderJSON(t,i){const{order:s,field:u}=t;return{field:`${Zc}${i}/${u}`,order:s}}_readPopupInfo({description:t,mediaInfos:i,showAttachments:s,relatedRecordsInfo:u={showRelatedRecords:!1}}){const d=[];t?d.push(new zy({text:t})):d.push(new Dp),Array.isArray(i)&&i.length&&d.push(Dy.fromJSON({mediaInfos:i})),s&&d.push(Lp.fromJSON({displayType:"auto"}));const{showRelatedRecords:y,orderByFields:v}=u;return y&&(v!=null&&v.length)&&v.forEach(_=>{const M=this._toRelationshipContent(_);M&&d.push(M)}),d.length?d:t}_getContentElementFields(t){const i=t==null?void 0:t.type;if(i==="attachments")return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description)];if(i==="custom")return t.outFields||[];if(i==="fields")return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...this._getFieldInfoFields(t.fieldInfos??this.fieldInfos)];if(i==="media"){const s=t.mediaInfos||[];return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...s.reduce((u,d)=>[...u,...this._getMediaInfoFields(d)],[])]}return i==="text"?this._extractFieldNames(t.text):[]}_getMediaInfoFields(t){const{caption:i,title:s,value:u}=t,d=u||{},{fields:y,normalizeField:v,tooltipField:_,sourceURL:M,linkURL:E}=d,O=[...this._extractFieldNames(s),...this._extractFieldNames(i),...this._extractFieldNames(M),...this._extractFieldNames(E),...y??[]];return v&&O.push(v),_&&O.push(_),O}_getContentExpressionInfos(t,i){return Array.isArray(t)?t.reduce((s,u)=>[...s,...u.type==="expression"&&u.expressionInfo?[u.expressionInfo]:[]],i):[]}_getContentFields(t){return typeof t=="string"?this._extractFieldNames(t):Array.isArray(t)?t.reduce((i,s)=>[...i,...this._getContentElementFields(s)],[]):[]}async _collectExpressionInfoFields(t,i,s){s&&await Promise.all(s.map(u=>nr(t,i,u.expression)))}_getFieldInfoFields(t){return t?t.filter(i=>i.visible===void 0||!!i.visible).map(i=>i.fieldName).filter(i=>!i.startsWith(Zc)&&!i.startsWith(L7)):[]}_getActionsFields(t){return t?t.toArray().reduce((i,s)=>[...i,...this._getActionFields(s)],[]):[]}_getActionFields(t){const{className:i,title:s,type:u}=t,d=u==="button"||u==="toggle"?t.image:"";return[...this._extractFieldNames(s),...this._extractFieldNames(i),...this._extractFieldNames(d)]}_getTitleFields(t){return typeof t=="string"?this._extractFieldNames(t):[]}_extractFieldNames(t){if(!t||typeof t!="string")return[];const i=/{[^}]*}/g,s=t.match(i);if(!s)return[];const u=/\{(\w+):.+\}/,d=s.filter(y=>!(y.indexOf(`{${Zc}`)===0||y.indexOf(`{${L7}`)===0)).map(y=>y.replace(u,"{$1}"));return d?d.map(y=>y.slice(1,-1)):[]}};w([S({type:kJ})],di.prototype,"actions",void 0),w([S()],di.prototype,"content",void 0),w([mt("content")],di.prototype,"castContent",null),w([me("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],di.prototype,"readContent",null),w([_e("content",{popupElements:{type:Oe.ofType(_J)},showAttachments:{type:Boolean},mediaInfos:{type:Oe.ofType(JE)},description:{type:String},relatedRecordsInfo:{type:$J}})],di.prototype,"writeContent",null),w([S({type:[xJ],json:{write:!0}})],di.prototype,"expressionInfos",void 0),w([S({type:[e4]})],di.prototype,"fieldInfos",void 0),w([_e("fieldInfos")],di.prototype,"writeFieldInfos",null),w([S({type:SJ})],di.prototype,"layerOptions",void 0),w([_e("layerOptions")],di.prototype,"writeLayerOptions",null),w([S({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],di.prototype,"lastEditInfoEnabled",void 0),w([S()],di.prototype,"outFields",void 0),w([S()],di.prototype,"overwriteActions",void 0),w([S()],di.prototype,"returnGeometry",void 0),w([S({json:{type:String}})],di.prototype,"title",void 0),w([_e("title")],di.prototype,"writeTitle",null),di=w([B("esri.PopupTemplate")],di);const ld=di,D7=new et({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let PJ=0,sh=class extends pe{constructor(t){super(t),this.id="sym"+PJ++,this.type=null,this.color=new Ve([0,0,0,1])}readColor(t){return(t==null?void 0:t[0])!=null?[t[0],t[1],t[2],t[3]/255]:t}async collectRequiredFields(t,i){}hash(){return JSON.stringify(this.toJSON())}clone(){}};w([S({type:D7.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:D7.write}}})],sh.prototype,"type",void 0),w([S({type:Ve,json:{write:{allowNull:!0}}})],sh.prototype,"color",void 0),w([me("color")],sh.prototype,"readColor",null),sh=w([B("esri.symbols.Symbol")],sh);const gr=sh;var Bw;let Fo=Bw=class extends gr{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,t){return t}writeData(e,t){Object.assign(t,e)}async collectRequiredFields(e,t){var i;if(((i=this.data)==null?void 0:i.type)==="CIMSymbolReference"){const s=this.data.primitiveOverrides;if(s){const u=s.map(d=>{const y=d.valueExpressionInfo;return nr(e,t,y.expression)});await Promise.all(u)}}}clone(){return new Bw({data:ie(this.data)})}hash(){return j9(JSON.stringify(this.data)).toString()}};w([S({json:{write:!1}})],Fo.prototype,"color",void 0),w([S({json:{write:!0}})],Fo.prototype,"data",void 0),w([me("data",["symbol"])],Fo.prototype,"readData",null),w([_e("data",{})],Fo.prototype,"writeData",null),w([Ae({CIMSymbolReference:"cim"},{readOnly:!0})],Fo.prototype,"type",void 0),Fo=Bw=w([B("esri.symbols.CIMSymbol")],Fo);const ud=Fo;let nh=class extends pe{constructor(t){super(t),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(t,i,s){t||(i[s]=t)}};w([S({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],nh.prototype,"enabled",void 0),w([_e("enabled")],nh.prototype,"writeEnabled",null),w([S({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],nh.prototype,"type",void 0),nh=w([B("esri.symbols.Symbol3DLayer")],nh);const Mn=nh;function CJ(e,t){const i=t.transparency!=null?Np(t.transparency):1,s=t.color;return s&&Array.isArray(s)?new Ve([s[0]||0,s[1]||0,s[2]||0,i]):null}function jJ(e,t){t.color=e.toJSON().slice(0,3);const i=zm(e.a);i!==0&&(t.transparency=i)}const Fa={type:Ve,json:{type:[St],default:null,read:{source:["color","transparency"],reader:CJ},write:{target:{color:{type:[St]},transparency:{type:St}},writer:jJ}}},Sn={type:Number,cast:ot,json:{write:!0}};let ol=class extends pe{constructor(t){super(t),this.color=new Ve([0,0,0,1]),this.extensionLength=0,this.size=mo(1)}clone(){}cloneProperties(){return{color:ie(this.color),size:this.size,extensionLength:this.extensionLength}}};w([S({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],ol.prototype,"type",void 0),w([S(Fa)],ol.prototype,"color",void 0),w([S({...Sn,json:{write:{overridePolicy:e=>({enabled:!!e})}}})],ol.prototype,"extensionLength",void 0),w([S(Sn)],ol.prototype,"size",void 0),ol=w([B("esri.symbols.edges.Edges3D")],ol);const s4=ol;var Hw;let o1=Hw=class extends s4{constructor(e){super(e),this.type="sketch"}clone(){return new Hw(this.cloneProperties())}};w([Ae({sketch:"sketch"},{readOnly:!0})],o1.prototype,"type",void 0),o1=Hw=w([B("esri.symbols.edges.SketchEdges3D")],o1);const NJ=o1;var Ww;let a1=Ww=class extends s4{constructor(e){super(e),this.type="solid"}clone(){return new Ww(this.cloneProperties())}};w([Ae({solid:"solid"},{readOnly:!0})],a1.prototype,"type",void 0),a1=Ww=w([B("esri.symbols.support.SolidEdges3D")],a1);const RJ=a1,KE={types:{key:"type",base:s4,typeMap:{solid:RJ,sketch:NJ}},json:{write:!0}};var Jw;let es=Jw=class extends pe{constructor(e){super(e),this.color=null}clone(){const e={color:this.color!=null?this.color.clone():null};return new Jw(e)}};w([S(Fa)],es.prototype,"color",void 0),es=Jw=w([B("esri.symbols.support.Symbol3DMaterial")],es);var Kw;let zo=Kw=class extends Mn{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new Kw({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,size:this.size})}};w([Ae({Extrude:"extrude"},{readOnly:!0})],zo.prototype,"type",void 0),w([S({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],zo.prototype,"size",void 0),w([S({type:es,json:{write:!0}})],zo.prototype,"material",void 0),w([S({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],zo.prototype,"castShadows",void 0),w([S(KE)],zo.prototype,"edges",void 0),zo=Kw=w([B("esri.symbols.ExtrudeSymbol3DLayer")],zo);const ZE=zo;let g0=class extends gr{constructor(t){super(t),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};w([Ae({esriSLS:"simple-line"},{readOnly:!0})],g0.prototype,"type",void 0),w([S({type:Number,cast:ot,json:{write:!0}})],g0.prototype,"width",void 0),g0=w([B("esri.symbols.LineSymbol")],g0);const LJ=g0,DJ=["begin","end","begin-end"],YE=["arrow","circle","square","diamond","cross","x"];var Zw;let en=Zw=class extends pe{constructor(e){super(e),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(e,t,i,s){t[i]=(s==null?void 0:s.origin)==="web-map"?"arrow":e}set color(e){this._set("color",e)}readColor(e){return(e==null?void 0:e[0])!=null?[e[0],e[1],e[2],e[3]/255]:e}writeColor(e,t,i,s){(s==null?void 0:s.origin)==="web-map"||(t[i]=e)}clone(){return new Zw({color:ie(this.color),placement:this.placement,style:this.style})}hash(){var e;return`${this.placement}.${(e=this.color)==null?void 0:e.hash()}.${this.style}`}};w([S({type:["begin","end","begin-end"],json:{write:!0}})],en.prototype,"placement",void 0),w([Ae({"line-marker":"line-marker"},{readOnly:!0}),S({json:{origins:{"web-map":{write:!1}}}})],en.prototype,"type",void 0),w([S({type:YE})],en.prototype,"style",void 0),w([_e("style")],en.prototype,"writeStyle",null),w([S({type:Ve,value:null,json:{write:{allowNull:!0}}})],en.prototype,"color",null),w([me("color")],en.prototype,"readColor",null),w([_e("color")],en.prototype,"writeColor",null),en=Zw=w([B("esri.symbols.LineSymbolMarker")],en);const FJ=en;var Yw;const p2=new et({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let Fn=Yw=class extends LJ{constructor(...e){super(...e),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(e,t,i,s,u,d){if(e&&typeof e!="string")return e;const y={};return e!=null&&(y.style=e),t!=null&&(y.color=t),i!=null&&(y.width=ot(i)),s!=null&&(y.cap=s),u!=null&&(y.join=u),d!=null&&(y.miterLimit=ot(d)),y}clone(){var e;return new Yw({color:ie(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(e=this.marker)==null?void 0:e.clone()})}hash(){var e,t;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(t=this.marker)==null?void 0:t.hash()}`}};w([Ae({esriSLS:"simple-line"},{readOnly:!0})],Fn.prototype,"type",void 0),w([S({type:p2.apiValues,json:{read:p2.read,write:p2.write}})],Fn.prototype,"style",void 0),w([S({type:["butt","round","square"],json:{write:{overridePolicy:(e,t,i)=>({enabled:e!=="round"&&(i==null?void 0:i.origin)==null})}}})],Fn.prototype,"cap",void 0),w([S({type:["miter","round","bevel"],json:{write:{overridePolicy:(e,t,i)=>({enabled:e!=="round"&&(i==null?void 0:i.origin)==null})}}})],Fn.prototype,"join",void 0),w([S({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":FJ}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],Fn.prototype,"marker",void 0),w([S({type:Number,json:{read:!1,write:!1}})],Fn.prototype,"miterLimit",void 0),Fn=Yw=w([B("esri.symbols.SimpleLineSymbol")],Fn);const ns=Fn;let v0=class extends gr{constructor(t){super(t),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline&&this.outline.hash()}`}};w([S({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":ns}},json:{default:null,write:!0}})],v0.prototype,"outline",void 0),w([S({type:["simple-fill","picture-fill"],readOnly:!0})],v0.prototype,"type",void 0),v0=w([B("esri.symbols.FillSymbol")],v0);const XE=v0;let l1=class extends pe{constructor(t){super(t)}clone(){}};w([S({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],l1.prototype,"type",void 0),l1=w([B("esri.symbols.patterns.LinePattern3D")],l1);const QE=l1,zJ=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var Xw;const VJ=Ji()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let w0=Xw=class extends QE{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new Xw(e)}};w([S({type:["style"]})],w0.prototype,"type",void 0),w([Ae(VJ),S({type:zJ})],w0.prototype,"style",void 0),w0=Xw=w([B("esri.symbols.patterns.LineStylePattern3D")],w0);const n4=w0;let u1=class extends pe{constructor(t){super(t)}clone(){}};w([S({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],u1.prototype,"type",void 0),u1=w([B("esri.symbols.patterns.Pattern3D")],u1);const ek=u1,GJ=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var Qw;let b0=Qw=class extends ek{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new Qw(e)}};w([S({type:["style"]})],b0.prototype,"type",void 0),w([S({type:GJ,json:{read:!0,write:!0}})],b0.prototype,"style",void 0),b0=Qw=w([B("esri.symbols.patterns.StylePattern3D")],b0);const tk=b0,qJ={types:{key:"type",base:ek,typeMap:{style:tk}},json:{write:!0}},ik={types:{key:"type",base:QE,typeMap:{style:n4}},json:{write:!0}},pp=new Ve("white");new Ve("black");const UJ=new Ve([255,255,255,0]);function BJ(e){return e.r===0&&e.g===0&&e.b===0}var e3;let dp=e3=class extends es{constructor(e){super(e),this.colorMixMode=null}clone(){const e={color:this.color!=null?this.color.clone():null,colorMixMode:this.colorMixMode};return new e3(e)}};w([Ae({multiply:"multiply",replace:"replace",tint:"tint"})],dp.prototype,"colorMixMode",void 0),dp=e3=w([B("esri.symbols.support.Symbol3DFillMaterial")],dp);function o4(e=ZJ){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function a4(e,t,i,s,u,d,y=o4()){return y[0]=e,y[1]=t,y[2]=i,y[3]=s,y[4]=u,y[5]=d,y}function ice(e,t){const i=isFinite(e[2])||isFinite(e[5]);return new Tt(i?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})}function rce(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function sce(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function HJ(e){return e[0]>=e[3]?0:e[3]-e[0]}function WJ(e){return e[1]>=e[4]?0:e[4]-e[1]}function JJ(e){return e[2]>=e[5]?0:e[5]-e[2]}function nce(e,t=[0,0,0]){return t[0]=HJ(e),t[1]=WJ(e),t[2]=JJ(e),t}function oce(e,t,i=e){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i!==e&&(i[3]=e[3],i[4]=e[4],i[5]=e[5]),i}function ace(e,t,i=e){return i[3]=t[0],i[4]=t[1],i[5]=t[2],i!==e&&(i[0]=e[0],i[1]=e[1],i[2]=e[2]),e}function KJ(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function lce(e){return e?KJ(e,z7):o4(z7)}function uce(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function hce(e,t,i,s,u){return e[0]=t,e[1]=i,e[2]=Number.NEGATIVE_INFINITY,e[3]=s,e[4]=u,e[5]=Number.POSITIVE_INFINITY,e}function F7(e){return e.length===6}function cce(e,t,i){if(e==null||t==null)return e===t;if(!F7(e)||!F7(t))return!1;if(i){for(let s=0;s<e.length;s++)if(!i(e[s],t[s]))return!1}else for(let s=0;s<e.length;s++)if(e[s]!==t[s])return!1;return!0}const z7=[1/0,1/0,1/0,-1/0,-1/0,-1/0],ZJ=[0,0,0,0,0,0];o4();const YJ=a4(-.5,-.5,-.5,.5,.5,.5),XJ=a4(-.5,-.5,0,.5,.5,1),QJ=a4(-.5,-.5,0,.5,.5,.5);function pce(e){switch(e){case"sphere":case"cube":case"diamond":return YJ;case"cylinder":case"cone":case"inverted-cone":return XJ;case"tetrahedron":return QJ;default:return}}const l4=["butt","square","round"],eK=[...l4,"none"],rk=["miter","bevel","round"];var t3;let al=t3=class extends pe{constructor(e){super(e),this.color=new Ve([0,0,0,1]),this.size=mo(1),this.pattern=null,this.patternCap="butt"}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new t3(e)}};w([S(Fa)],al.prototype,"color",void 0),w([S(Sn)],al.prototype,"size",void 0),w([S(ik)],al.prototype,"pattern",void 0),w([S({type:l4,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],al.prototype,"patternCap",void 0),al=t3=w([B("esri.symbols.support.Symbol3DOutline")],al);var h1;let zn=h1=class extends Mn{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new h1(e)}static fromSimpleFillSymbol(e){var s,u,d;const t=e.outline&&e.outline.style&&e.outline.style!=="inside-frame"&&e.outline.style!=="solid"?new n4({style:e.outline.style}):null,i={size:((s=e.outline)==null?void 0:s.width)??0,color:(((u=e.outline)==null?void 0:u.color)??pp).clone(),pattern:t};return t&&((d=e.outline)!=null&&d.cap)&&(i.patternCap=e.outline.cap),new h1({material:new dp({color:(e.color??UJ).clone()}),pattern:e.style&&e.style!=="solid"?new tk({style:e.style}):null,outline:i})}};w([Ae({Fill:"fill"},{readOnly:!0})],zn.prototype,"type",void 0),w([S({type:dp,json:{write:!0}})],zn.prototype,"material",void 0),w([S(qJ)],zn.prototype,"pattern",void 0),w([S({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],zn.prototype,"castShadows",void 0),w([S({type:al,json:{write:!0}})],zn.prototype,"outline",void 0),w([S(KE)],zn.prototype,"edges",void 0),zn=h1=w([B("esri.symbols.FillSymbol3DLayer")],zn);const hd=zn,tK=["none","underline","line-through"],iK=["normal","italic","oblique"],rK=["normal","lighter","bold","bolder"],sk={type:Number,cast:e=>{const t=Zr(e);return t===0?1:rs(t,.1,4)},nonNullable:!0},sK=["left","right","center"],nK=["baseline","top","middle","bottom"],nk={type:sK,nonNullable:!0},ok={type:nK,nonNullable:!0},dce=8;var i3;let Vn=i3=class extends pe{constructor(e){super(e),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(e){return ot(e)}clone(){return new i3({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};w([S({type:tK,json:{default:"none",write:!0}})],Vn.prototype,"decoration",void 0),w([S({type:String,json:{write:!0}})],Vn.prototype,"family",void 0),w([S({type:Number,json:{write:{overridePolicy:(e,t,i)=>({enabled:!i||!i.textSymbol3D})}}})],Vn.prototype,"size",void 0),w([mt("size")],Vn.prototype,"castSize",null),w([S({type:iK,json:{default:"normal",write:!0}})],Vn.prototype,"style",void 0),w([S({type:rK,json:{default:"normal",write:!0}})],Vn.prototype,"weight",void 0),Vn=i3=w([B("esri.symbols.Font")],Vn);const Hm=Vn;function Tc(e,t){var s;const i=(s=t==null?void 0:t.url)==null?void 0:s.path;if(e&&i&&(e=Yr(e,i,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const u=Q9(e,t.portalItem.itemUrl);u!=null&&oK.test(u)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(u).path)}return r3(e,t==null?void 0:t.portal)}function cd(e,t,i=Fp.YES){var u,d;if(e==null)return e;!Ar(e)&&(t!=null&&t.blockedRelativeUrls)&&t.blockedRelativeUrls.push(e);let s=Yr(e);if(t){const y=((u=t.verifyItemRelativeUrls)==null?void 0:u.rootPath)||((d=t.url)==null?void 0:d.path);if(y){const v=r3(y,t.portal),_=r3(s,t.portal);s=Q9(_,v,v),s!=null&&s!==_&&s!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(s)}}return s=lk(s,t==null?void 0:t.portal),Ar(s)&&(s=Ls(s)),t!=null&&t.resources&&(t!=null&&t.portalItem)&&!Ar(s)&&!Mu(s)&&i===Fp.YES&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(s),compress:!1}),s}function u4(e,t,i){return Tc(e,i)}function bu(e,t,i,s){const u=cd(e,s);u!==void 0&&(t[i]=u)}const ak=/\/items\/([^\/]+)\/resources\/(.*)/,oK=/^\.\/resources\//;function aK(e){const t=(e==null?void 0:e.match(ak))??null;return(t==null?void 0:t[1])??null}function lK(e){const t=(e==null?void 0:e.match(ak))??null;if(t==null)return null;const i=t[2],s=i.lastIndexOf("/");if(s===-1){const{path:y,extension:v}=z6(i);return{prefix:null,filename:y,extension:v}}const{path:u,extension:d}=z6(i.slice(s+1));return{prefix:i.slice(0,s),filename:u,extension:d}}function lk(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?Ov(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function r3(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const i=`${t.urlKey}.${t.customBaseUrl}`,s=K9();return sc(s,`${s.scheme}://${i}`)?Ov(e,t.portalHostname,i):Ov(e,i,t.portalHostname)}var Fp;(function(e){e[e.YES=0]="YES",e[e.NO=1]="NO"})(Fp||(Fp={}));const fce=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return Fp},ensureMainOnlineDomain:lk,fromJSON:Tc,itemIdFromResourceUrl:aK,prefixAndFilenameFromResourceUrl:lK,read:u4,toJSON:cd,write:bu},Symbol.toStringTag,{value:"Module"}));var s3;const uK=Ji()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let ll=s3=class extends pe{constructor(e){super(e)}readHref(e,t,i){return e?Tc(e,i):t.dataURI}writeHref(e,t,i,s){e&&(Mu(e)?t.dataURI=e:(t.href=cd(e,s),Ar(t.href)&&(t.href=Ls(t.href))))}clone(){return new s3({href:this.href,primitive:this.primitive})}};w([S({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],ll.prototype,"href",void 0),w([me("href")],ll.prototype,"readHref",null),w([_e("href",{href:{type:String},dataURI:{type:String}})],ll.prototype,"writeHref",null),w([Ae(uK)],ll.prototype,"primitive",void 0),ll=s3=w([B("esri.symbols.support.IconSymbol3DLayerResource")],ll);var n3;let Rh=n3=class extends Ne{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new n3({x:this.x,y:this.y})}};w([S({type:Number})],Rh.prototype,"x",void 0),w([S({type:Number})],Rh.prototype,"y",void 0),Rh=n3=w([B("esri.symbols.support.Symbol3DAnchorPosition2D")],Rh);var o3;let _0=o3=class extends pe{constructor(e){super(e),this.color=new Ve([0,0,0,1]),this.size=mo(1)}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size};return new o3(e)}};w([S(Fa)],_0.prototype,"color",void 0),w([S(Sn)],_0.prototype,"size",void 0),_0=o3=w([B("esri.symbols.support.Symbol3DIconOutline")],_0);var oh;const uk="esri.symbols.IconSymbol3DLayer";let tn=oh=class extends Mn{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null}clone(){return new oh({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:this.material!=null?this.material.clone():null,outline:this.outline!=null?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})}static fromSimpleMarkerSymbol(e){const t=e.color||pp,i=V7(e),s=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||pp).clone()}:null;return new oh({size:e.size,resource:{primitive:cK(e.style)},material:{color:t},outline:s,anchor:i?"relative":void 0,anchorPosition:i})}static fromPictureMarkerSymbol(e){const t=!e.color||BJ(e.color)?pp:e.color,i=V7(e);return new oh({size:e.width<=e.height?e.height:e.width,resource:{href:e.url},material:{color:t.clone()},anchor:i?"relative":void 0,anchorPosition:i})}static fromCIMSymbol(e){return new oh({resource:{href:rT({mediaType:"application/json",data:JSON.stringify(e.data)})}})}};function V7(e){const t="width"in e?e.width:e.size,i="height"in e?e.height:e.size,s=G7(e.xoffset),u=G7(e.yoffset);return(s||u)&&t&&i?{x:-s/t,y:u/i}:null}function G7(e){return isFinite(e)?e:0}w([S({type:es,json:{write:!0}})],tn.prototype,"material",void 0),w([S({type:ll,json:{write:!0}})],tn.prototype,"resource",void 0),w([Ae({Icon:"icon"},{readOnly:!0})],tn.prototype,"type",void 0),w([S(Sn)],tn.prototype,"size",void 0),w([Ae({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),S({json:{default:"center"}})],tn.prototype,"anchor",void 0),w([S({type:Rh,json:{type:[Number],read:{reader:e=>new Rh({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],tn.prototype,"anchorPosition",void 0),w([S({type:_0,json:{write:!0}})],tn.prototype,"outline",void 0),tn=oh=w([B(uk)],tn);const hK={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function cK(e){return hK[e]||(de.getLogger(uk).warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const Zl=tn;let ul=class extends Mt(pe){constructor(t){super(t),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(t){return t!=null&&t.placement===this.placement&&t.style===this.style&&(this.color==null&&t.color==null||this.color!=null&&t.color!=null&&this.color.toJSON()===t.color.toJSON())}};w([S({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],ul.prototype,"type",void 0),w([S({type:DJ,json:{default:"begin-end",write:!0}})],ul.prototype,"placement",void 0),w([S({type:YE,json:{default:"arrow",write:!0}})],ul.prototype,"style",void 0),w([S({type:Ve,json:{type:[St],default:null,write:!0}})],ul.prototype,"color",void 0),ul=w([B("esri.symbols.LineStyleMarker3D")],ul);const a3=ul;var c1;let rn=c1=class extends Mn{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=mo(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new c1(e)}static fromSimpleLineSymbol(e){var i;const t={enabled:!0,size:e.width??mo(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style&&e.style!=="inside-frame"?new n4({style:e.style}):null,material:new es({color:(e.color||pp).clone()}),marker:e.marker?new a3({placement:e.marker.placement,style:e.marker.style,color:((i=e.marker.color)==null?void 0:i.clone())??null}):null};return new c1(t)}};w([S({type:es,json:{write:!0}})],rn.prototype,"material",void 0),w([Ae({Line:"line"},{readOnly:!0})],rn.prototype,"type",void 0),w([S({type:rk,json:{write:!0,default:"miter"}})],rn.prototype,"join",void 0),w([S({type:l4,json:{write:!0,default:"butt"}})],rn.prototype,"cap",void 0),w([S(Sn)],rn.prototype,"size",void 0),w([S(ik)],rn.prototype,"pattern",void 0),w([S({types:{key:"type",base:a3,typeMap:{style:a3}},json:{write:!0}})],rn.prototype,"marker",void 0),rn=c1=w([B("esri.symbols.LineSymbol3DLayer")],rn);const pd=rn;var l3;const pK=Ji()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let x0=l3=class extends pe{clone(){return new l3({href:this.href,primitive:this.primitive})}};w([S({type:String,json:{read:u4,write:bu}})],x0.prototype,"href",void 0),w([Ae(pK)],x0.prototype,"primitive",void 0),x0=l3=w([B("esri.symbols.support.ObjectSymbol3DLayerResource")],x0);var u3;let Ll=u3=class extends Ne{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new u3({x:this.x,y:this.y,z:this.z})}};w([S({type:Number})],Ll.prototype,"x",void 0),w([S({type:Number})],Ll.prototype,"y",void 0),w([S({type:Number})],Ll.prototype,"z",void 0),Ll=u3=w([B("esri.symbols.support.Symbol3DAnchorPosition3D")],Ll);var h3;let Fi=h3=class extends Mn{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){var e,t,i;return new h3({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:(e=this.anchorPosition)==null?void 0:e.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:((t=this.material)==null?void 0:t.clone())??null,castShadows:this.castShadows,resource:(i=this.resource)==null?void 0:i.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};w([S({type:es,json:{write:!0}})],Fi.prototype,"material",void 0),w([S({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Fi.prototype,"castShadows",void 0),w([S({type:x0,json:{write:!0}})],Fi.prototype,"resource",void 0),w([Ae({Object:"object"},{readOnly:!0})],Fi.prototype,"type",void 0),w([S({type:Number,json:{write:!0}})],Fi.prototype,"width",void 0),w([S({type:Number,json:{write:!0}})],Fi.prototype,"height",void 0),w([S({type:Number,json:{write:!0}})],Fi.prototype,"depth",void 0),w([Ae({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),S({json:{default:"origin"}})],Fi.prototype,"anchor",void 0),w([S({type:Ll,json:{type:[Number],read:{reader:e=>new Ll({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Fi.prototype,"anchorPosition",void 0),w([S({type:Number,json:{write:!0}})],Fi.prototype,"heading",void 0),w([S({type:Number,json:{write:!0}})],Fi.prototype,"tilt",void 0),w([S({type:Number,json:{write:!0}})],Fi.prototype,"roll",void 0),w([S({readOnly:!0})],Fi.prototype,"isPrimitive",null),Fi=h3=w([B("esri.symbols.ObjectSymbol3DLayer")],Fi);const h4=Fi;var c3;let Yi=c3=class extends Mn{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,t){return e??(t.height==null&&t.size!=null?t.size:void 0)}readHeight(e,t){return e??(t.width==null&&t.size!=null?t.size:void 0)}clone(){return new c3({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};w([S({type:es,json:{write:!0}})],Yi.prototype,"material",void 0),w([S({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Yi.prototype,"castShadows",void 0),w([Ae({Path:"path"},{readOnly:!0})],Yi.prototype,"type",void 0),w([S({type:["circle","quad"],json:{write:!0,default:"circle"}})],Yi.prototype,"profile",void 0),w([S({type:rk,json:{write:!0,default:"miter"}})],Yi.prototype,"join",void 0),w([S({type:eK,json:{write:!0,default:"butt"}})],Yi.prototype,"cap",void 0),w([S({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],Yi.prototype,"width",void 0),w([me("width",["width","size","height"])],Yi.prototype,"readWidth",null),w([S({type:Number,json:{write:!0}})],Yi.prototype,"height",void 0),w([me("height",["height","size","width"])],Yi.prototype,"readHeight",null),w([S({type:["center","bottom","top"],json:{write:!0,default:"center"}})],Yi.prototype,"anchor",void 0),w([S({type:["heading","all"],json:{write:!0,default:"all"}})],Yi.prototype,"profileRotation",void 0),Yi=c3=w([B("esri.symbols.PathSymbol3DLayer")],Yi);const c4=Yi;var p3;let Lh=p3=class extends pe{constructor(){super(...arguments),this.color=new Ve([0,0,0,1]),this.size=0}clone(){const e={color:ie(this.color),size:this.size};return new p3(e)}};w([S(Fa)],Lh.prototype,"color",void 0),w([S(Sn)],Lh.prototype,"size",void 0),Lh=p3=w([B("esri.symbols.support.Symbol3DHalo")],Lh);let fp=class extends Mt(pe){constructor(t){super(t),this.color=null}};w([S(Fa)],fp.prototype,"color",void 0),fp=w([B("esri.symbols.support.Symbol3DTextBackground")],fp);var p1;let ar=p1=class extends Mn{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){e!=null&&this._userSize!=null&&(e.size=this._userSize),this._set("font",e)}writeFont(e,t,i,s){const u={...s,textSymbol3D:!0};t.font=e.write({},u),delete t.font.size}get size(){var e;return this._userSize!=null?this._userSize:((e=this.font)==null?void 0:e.size)!=null?this.font.size:9}set size(e){this._userSize=e,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new p1({enabled:this.enabled,font:this.font&&ie(this.font),halo:this.halo&&ie(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:ie(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new p1({font:e.font!=null?e.font.clone():new Hm,halo:dK(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new es({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new fp({color:e.backgroundColor.clone()}):null})}};function dK(e,t){return e&&t!=null&&t>0?new Lh({color:ie(e),size:t}):null}w([S({type:Hm,json:{write:!0}})],ar.prototype,"font",null),w([_e("font")],ar.prototype,"writeFont",null),w([S({type:Lh,json:{write:!0}})],ar.prototype,"halo",void 0),w([S({...nk,json:{default:"center",write:!0}})],ar.prototype,"horizontalAlignment",void 0),w([S({...sk,json:{default:1,write:!0}})],ar.prototype,"lineHeight",void 0),w([S({type:es,json:{write:!0}})],ar.prototype,"material",void 0),w([S({type:fp,json:{write:!0}})],ar.prototype,"background",void 0),w([S(Sn)],ar.prototype,"size",null),w([S({type:String,json:{write:!0}})],ar.prototype,"text",void 0),w([Ae({Text:"text"},{readOnly:!0})],ar.prototype,"type",void 0),w([S({...ok,json:{default:"baseline",write:!0}})],ar.prototype,"verticalAlignment",void 0),ar=p1=w([B("esri.symbols.TextSymbol3DLayer")],ar);const Mc=ar;var d3;let Vo=d3=class extends Mn{constructor(e){super(e),this.color=f3.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new d3({color:ie(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};w([S({type:Ve,nonNullable:!0,json:{type:[St],write:(e,t,i)=>t[i]=e.toArray(Ve.AlphaMode.UNLESS_OPAQUE),default:()=>f3.clone(),defaultEquals:e=>e.toCss(!0)===f3.toCss(!0)}})],Vo.prototype,"color",void 0),w([Ae({Water:"water"},{readOnly:!0})],Vo.prototype,"type",void 0),w([S({type:["small","medium","large"],json:{write:!0,default:"medium"}})],Vo.prototype,"waterbodySize",void 0),w([S({type:Number,json:{write:!0,default:null}})],Vo.prototype,"waveDirection",void 0),w([S({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],Vo.prototype,"waveStrength",void 0),Vo=d3=w([B("esri.symbols.WaterSymbol3DLayer")],Vo);const f3=new Ve([0,119,190]),hk=Vo;var y3;let hl=y3=class extends Ne{constructor(e){super(e),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new y3({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};w([S({type:String})],hl.prototype,"name",void 0),w([S({type:String})],hl.prototype,"styleUrl",void 0),w([S({type:String})],hl.prototype,"styleName",void 0),w([S({type:mr})],hl.prototype,"portal",void 0),hl=y3=w([B("esri.symbols.support.StyleOrigin")],hl);const m3=hl;var g3;let yp=g3=class extends Ne{constructor(){super(...arguments),this.url=""}clone(){return new g3({url:this.url})}};w([S({type:String})],yp.prototype,"url",void 0),yp=g3=w([B("esri.symbols.support.Thumbnail")],yp);const ck={icon:Zl,object:h4,line:pd,path:c4,fill:hd,extrude:ZE,text:Mc,water:hk},fK=Oe.ofType({base:Mn,key:"type",typeMap:ck,errorContext:"symbol-layer"});let sn=class extends gr{constructor(t){super(t),this.styleOrigin=null,this.thumbnail=null,this.type=null;const i=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers,s=i==null?void 0:i.type,u=s||Oe;this._set("symbolLayers",new u)}get color(){return null}set color(t){this.constructed&&de.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(t){vu(t,this._get("symbolLayers"))}readStyleOrigin(t,i,s){if(t.styleUrl&&t.name){const u=Tc(t.styleUrl,s);return new m3({styleUrl:u,name:t.name})}if(t.styleName&&t.name)return new m3({portal:(s==null?void 0:s.portal)||mr.getDefault(),styleName:t.styleName,name:t.name});s!=null&&s.messages&&s.messages.push(new is("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:s,definition:t}))}writeStyleOrigin(t,i,s,u){if(t.styleUrl&&t.name){let d=cd(t.styleUrl,u);Ar(d)&&(d=Ls(d)),i.styleOrigin={styleUrl:d,name:t.name}}else t.styleName&&t.name&&(t.portal&&(u!=null&&u.portal)&&!tT(t.portal.restUrl,u.portal.restUrl)?u!=null&&u.messages&&u.messages.push(new is("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):i.styleOrigin={styleName:t.styleName,name:t.name})}normalizeCtorArgs(t){return t instanceof Mn||t&&ck[t.type]?{symbolLayers:[t]}:Array.isArray(t)?{symbolLayers:t}:t}};w([S({json:{read:!1,write:!1}})],sn.prototype,"color",null),w([S({type:fK,nonNullable:!0,json:{write:!0}}),mt(ZI)],sn.prototype,"symbolLayers",null),w([S({type:m3})],sn.prototype,"styleOrigin",void 0),w([me("styleOrigin")],sn.prototype,"readStyleOrigin",null),w([_e("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],sn.prototype,"writeStyleOrigin",null),w([S({type:yp,json:{read:!1}})],sn.prototype,"thumbnail",void 0),w([S({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],sn.prototype,"type",void 0),sn=w([B("esri.symbols.Symbol3D")],sn);const Ic=sn;let S0=class extends pe{constructor(t){super(t),this.visible=!0}clone(){}};w([S({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],S0.prototype,"type",void 0),w([S({readOnly:!0})],S0.prototype,"visible",void 0),S0=w([B("esri.symbols.callouts.Callout3D")],S0);const pk=S0;var v3;let d1=v3=class extends pe{constructor(e){super(e),this.color=new Ve("white")}clone(){return new v3({color:ie(this.color)})}};w([S(Fa)],d1.prototype,"color",void 0),d1=v3=w([B("esri.symbols.callouts.LineCallout3DBorder")],d1);const yK=d1;var w3;let Go=w3=class extends pk{constructor(e){super(e),this.type="line",this.color=new Ve([0,0,0,1]),this.size=mo(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new w3({color:ie(this.color),size:this.size,border:ie(this.border)})}};w([Ae({line:"line"})],Go.prototype,"type",void 0),w([S(Fa)],Go.prototype,"color",void 0),w([S(Sn)],Go.prototype,"size",void 0),w([S({type:yK,json:{write:!0}})],Go.prototype,"border",void 0),w([S({readOnly:!0})],Go.prototype,"visible",null),Go=w3=w([B("esri.symbols.callouts.LineCallout3D")],Go);const dk=Go;function p4(e){if(!e)return!1;const t=e.verticalOffset;return!!t&&!(t.screenLength<=0||t.maxWorldLength!=null&&t.maxWorldLength<=0)}function fk(e){if(!e||!e.supportsCallout||!e.supportsCallout())return!1;const t=e.callout;return!!t&&!!t.visible&&!!p4(e)}const yk={types:{key:"type",base:pk,typeMap:{line:dk}},json:{write:!0}};var b3;let ah=b3=class extends pe{constructor(e){super(e),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new b3({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};w([S(Sn)],ah.prototype,"screenLength",void 0),w([S({type:Number,nonNullable:!0,json:{write:!0,default:0}})],ah.prototype,"minWorldLength",void 0),w([S({type:Number,json:{write:!0}})],ah.prototype,"maxWorldLength",void 0),ah=b3=w([B("esri.symbols.support.Symbol3DVerticalOffset")],ah);const d4=ah;var f1;const mk=Oe.ofType({base:null,key:"type",typeMap:{text:Mc}});let qo=f1=class extends Ic{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new mk,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return fk(this)}hasVisibleVerticalOffset(){return p4(this)}clone(){return new f1({styleOrigin:ie(this.styleOrigin),symbolLayers:ie(this.symbolLayers),thumbnail:ie(this.thumbnail),callout:ie(this.callout),verticalOffset:ie(this.verticalOffset)})}static fromTextSymbol(e){return new f1({symbolLayers:new Oe([Mc.fromTextSymbol(e)])})}};w([S({type:d4,json:{write:!0}})],qo.prototype,"verticalOffset",void 0),w([S(yk)],qo.prototype,"callout",void 0),w([S({json:{read:!1,write:!1}})],qo.prototype,"styleOrigin",void 0),w([S({type:mk})],qo.prototype,"symbolLayers",void 0),w([Ae({LabelSymbol3D:"label-3d"},{readOnly:!0})],qo.prototype,"type",void 0),qo=f1=w([B("esri.symbols.LabelSymbol3D")],qo);const Wm=qo;var y1;const gk=Oe.ofType({base:null,key:"type",typeMap:{line:pd,path:c4}}),mK=Oe.ofType({base:null,key:"type",typeMap:{line:pd,path:c4}});let $0=y1=class extends Ic{constructor(e){super(e),this.symbolLayers=new gk,this.type="line-3d"}clone(){return new y1({styleOrigin:ie(this.styleOrigin),symbolLayers:ie(this.symbolLayers),thumbnail:ie(this.thumbnail)})}static fromSimpleLineSymbol(e){return new y1({symbolLayers:new Oe([pd.fromSimpleLineSymbol(e)])})}};w([S({type:gk,json:{type:mK}})],$0.prototype,"symbolLayers",void 0),w([Ae({LineSymbol3D:"line-3d"},{readOnly:!0})],$0.prototype,"type",void 0),$0=y1=w([B("esri.symbols.LineSymbol3D")],$0);const Jm=$0;let Uo=class extends gr{constructor(t){super(t),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};w([S({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],Uo.prototype,"angle",void 0),w([S({type:["simple-marker","picture-marker"],readOnly:!0})],Uo.prototype,"type",void 0),w([S({type:Number,cast:ot,json:{write:!0}})],Uo.prototype,"xoffset",void 0),w([S({type:Number,cast:ot,json:{write:!0}})],Uo.prototype,"yoffset",void 0),w([S({type:Number,cast:e=>e==="auto"?e:ot(e),json:{write:!0}})],Uo.prototype,"size",void 0),Uo=w([B("esri.symbols.MarkerSymbol")],Uo);const vk=Uo;var m1;const wk=Oe.ofType({base:null,key:"type",typeMap:{fill:hd}});let T0=m1=class extends Ic{constructor(e){super(e),this.symbolLayers=new wk,this.type="mesh-3d"}clone(){return new m1({styleOrigin:ie(this.styleOrigin),symbolLayers:ie(this.symbolLayers),thumbnail:ie(this.thumbnail)})}static fromSimpleFillSymbol(e){return new m1({symbolLayers:new Oe([hd.fromSimpleFillSymbol(e)])})}};w([S({type:wk})],T0.prototype,"symbolLayers",void 0),w([Ae({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],T0.prototype,"type",void 0),T0=m1=w([B("esri.symbols.MeshSymbol3D")],T0);const Km=T0;function gK(e,t,i){return t.imageData?rT({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):bk(t.url,i)}function bk(e,t){var i;return wK(t)&&!Ar(e)&&((i=t==null?void 0:t.layer)!=null&&i.parsedUrl)?nc(t.layer.parsedUrl.path,"images",e):Tc(e,t)}function vK(e,t,i,s){if(Mu(e)){const u=Tp(e);if(!u)return;t.contentType=u.mediaType,t.imageData=u.data,i&&i.imageData===t.imageData&&i.url&&bu(i.url,t,"url",s)}else bu(e,t,"url",s)}const _k={json:{read:{source:["imageData","url"],reader:gK},write:{writer(e,t,i,s){vK(e,t,this.source,s)}}}},xk={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,i){const s={};return t.imageData&&(s.imageData=t.imageData),t.contentType&&(s.contentType=t.contentType),t.url&&(s.url=bk(t.url,i)),s}}}};function wK(e){var t,i;return!(e==null||e.origin!=="service"&&e.origin!=="portal-item"||((t=e.layer)==null?void 0:t.type)!=="feature"&&((i=e.layer)==null?void 0:i.type)!=="stream")}var _3;let Br=_3=class extends XE{constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,t,i,s){if(e&&typeof e!="string"&&e.imageData==null)return e;const u={};return e&&(u.url=e),t&&(u.outline=t),i!=null&&(u.width=ot(i)),s!=null&&(u.height=ot(s)),u}clone(){const e=new _3({color:ie(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",ie(this.source)),e}hash(){var e;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};w([Ae({esriPFS:"picture-fill"},{readOnly:!0})],Br.prototype,"type",void 0),w([S(_k)],Br.prototype,"url",void 0),w([S({type:Number,json:{write:!0}})],Br.prototype,"xscale",void 0),w([S({type:Number,json:{write:!0}})],Br.prototype,"yscale",void 0),w([S({type:Number,cast:ot,json:{write:!0}})],Br.prototype,"width",void 0),w([S({type:Number,cast:ot,json:{write:!0}})],Br.prototype,"height",void 0),w([S({type:Number,cast:ot,json:{write:!0}})],Br.prototype,"xoffset",void 0),w([S({type:Number,cast:ot,json:{write:!0}})],Br.prototype,"yoffset",void 0),w([S(xk)],Br.prototype,"source",void 0),Br=_3=w([B("esri.symbols.PictureFillSymbol")],Br);const Sk=Br;var x3;let ws=x3=class extends vk{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string"&&e.imageData==null)return e;const s={};return e&&(s.url=e),t!=null&&(s.width=ot(t)),i!=null&&(s.height=ot(i)),s}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new x3({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",ie(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};w([S({json:{write:!1}})],ws.prototype,"color",void 0),w([Ae({esriPMS:"picture-marker"},{readOnly:!0})],ws.prototype,"type",void 0),w([S(_k)],ws.prototype,"url",void 0),w([S(xk)],ws.prototype,"source",void 0),w([S({type:Number,cast:ot,json:{write:!0}})],ws.prototype,"height",void 0),w([me("height",["height","size"])],ws.prototype,"readHeight",null),w([S({type:Number,cast:ot,json:{write:!0}})],ws.prototype,"width",void 0),w([S({json:{write:!1}})],ws.prototype,"size",void 0),ws=x3=w([B("esri.symbols.PictureMarkerSymbol")],ws);const Zm=ws;var cl;const $k=Oe.ofType({base:null,key:"type",typeMap:{icon:Zl,object:h4,text:Mc}});let pl=cl=class extends Ic{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new $k,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return fk(this)}hasVisibleVerticalOffset(){return p4(this)}clone(){return new cl({verticalOffset:ie(this.verticalOffset),callout:ie(this.callout),styleOrigin:ie(this.styleOrigin),symbolLayers:ie(this.symbolLayers),thumbnail:ie(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new cl({symbolLayers:new Oe([Zl.fromSimpleMarkerSymbol(e)])})}static fromPictureMarkerSymbol(e){return new cl({symbolLayers:new Oe([Zl.fromPictureMarkerSymbol(e)])})}static fromCIMSymbol(e){var s,u;if(((u=(s=e.data)==null?void 0:s.symbol)==null?void 0:u.type)!=="CIMPointSymbol")return null;const i=e.data.symbol;return new cl(i!=null&&i.callout?{symbolLayers:new Oe([Zl.fromCIMSymbol(e)]),callout:new dk({size:.5,color:new Ve([0,0,0])}),verticalOffset:new d4({screenLength:40})}:{symbolLayers:new Oe([Zl.fromCIMSymbol(e)])})}static fromTextSymbol(e){return new cl({symbolLayers:new Oe([Mc.fromTextSymbol(e)])})}};w([S({type:d4,json:{write:!0}})],pl.prototype,"verticalOffset",void 0),w([S(yk)],pl.prototype,"callout",void 0),w([S({type:$k,json:{origins:{"web-scene":{write:!0}}}})],pl.prototype,"symbolLayers",void 0),w([Ae({PointSymbol3D:"point-3d"},{readOnly:!0})],pl.prototype,"type",void 0),pl=cl=w([B("esri.symbols.PointSymbol3D")],pl);const Yl=pl;var M0;const Tk=Oe.ofType({base:null,key:"type",typeMap:{extrude:ZE,fill:hd,icon:Zl,line:pd,object:h4,text:Mc,water:hk}});let I0=M0=class extends Ic{constructor(e){super(e),this.symbolLayers=new Tk,this.type="polygon-3d"}initialize(){const e=t=>{t.type==="line"&&ic(de.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),t.type==="text"&&ic(de.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const t of this.symbolLayers)e(t);this.addHandles(uc(()=>this.symbolLayers,"after-add",({item:t})=>e(t),ku))}clone(){return new M0({styleOrigin:ie(this.styleOrigin),symbolLayers:ie(this.symbolLayers),thumbnail:ie(this.thumbnail)})}static fromJSON(e){var i;const t=new M0;if(t.read(e),t.symbolLayers.length===2&&t.symbolLayers.at(0).type==="fill"&&t.symbolLayers.at(1).type==="line"){const s=t.symbolLayers.at(0),u=t.symbolLayers.at(1);!u.enabled||(i=e.symbolLayers)!=null&&i[1]&&e.symbolLayers[1].enable===!1||(s.outline={size:u.size,color:u.material!=null?u.material.color:null}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new M0({symbolLayers:new Oe([hd.fromSimpleFillSymbol(e)])})}};w([S({type:Tk,json:{write:!0}})],I0.prototype,"symbolLayers",void 0),w([Ae({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],I0.prototype,"type",void 0),I0=M0=w([B("esri.symbols.PolygonSymbol3D")],I0);const dd=I0;var S3;const d2=new et({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let dl=S3=class extends XE{constructor(...e){super(...e),this.color=new Ve([0,0,0,.25]),this.outline=new ns,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string")return e;const s={};return e&&(s.style=e),t&&(s.outline=t),i&&(s.color=i),s}clone(){return new S3({color:ie(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};w([S()],dl.prototype,"color",void 0),w([S()],dl.prototype,"outline",void 0),w([Ae({esriSFS:"simple-fill"},{readOnly:!0})],dl.prototype,"type",void 0),w([S({type:d2.apiValues,json:{read:d2.read,write:d2.write}})],dl.prototype,"style",void 0),dl=S3=w([B("esri.symbols.SimpleFillSymbol")],dl);const Cu=dl;var $3;const f2=new et({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let nn=$3=class extends vk{constructor(...e){super(...e),this.color=new Ve([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new ns}normalizeCtorArgs(e,t,i,s){if(e&&typeof e!="string")return e;const u={};return e&&(u.style=e),t!=null&&(u.size=ot(t)),i&&(u.outline=i),s&&(u.color=s),u}writeColor(e,t){e&&this.style!=="x"&&this.style!=="cross"&&(t.color=e.toJSON()),e===null&&(t.color=null)}set path(e){this.style="path",this._set("path",e)}clone(){return new $3({angle:this.angle,color:ie(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(e=this.outline)==null?void 0:e.hash()}`}};w([S()],nn.prototype,"color",void 0),w([_e("color")],nn.prototype,"writeColor",null),w([Ae({esriSMS:"simple-marker"},{readOnly:!0})],nn.prototype,"type",void 0),w([S()],nn.prototype,"size",void 0),w([S({type:f2.apiValues,json:{read:f2.read,write:f2.write}})],nn.prototype,"style",void 0),w([S({type:String,json:{write:!0}})],nn.prototype,"path",null),w([S({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":ns}},json:{default:null,write:!0}})],nn.prototype,"outline",void 0),nn=$3=w([B("esri.symbols.SimpleMarkerSymbol")],nn);const za=nn;var T3;let jt=T3=class extends gr{constructor(...e){super(...e),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new Hm,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string")return e;const s={};return e&&(s.text=e),t&&(s.font=t),i&&(s.color=i),s}writeLineWidth(e,t,i,s){s&&typeof s!="string"?s.origin:t[i]=e}castLineWidth(e){return ot(e)}writeLineHeight(e,t,i,s){s&&typeof s!="string"?s.origin:t[i]=e}clone(){return new T3({angle:this.angle,backgroundColor:ie(this.backgroundColor),borderLineColor:ie(this.borderLineColor),borderLineSize:this.borderLineSize,color:ie(this.color),font:this.font&&this.font.clone(),haloColor:ie(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e,t,i;return`${(e=this.backgroundColor)==null?void 0:e.hash()}.${this.borderLineColor}.${this.borderLineSize}.${(t=this.color)==null?void 0:t.hash()}.${this.font&&this.font.hash()}.${(i=this.haloColor)==null?void 0:i.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};w([S({type:Ve,json:{write:!0}})],jt.prototype,"backgroundColor",void 0),w([S({type:Ve,json:{write:!0}})],jt.prototype,"borderLineColor",void 0),w([S({type:Number,json:{write:!0},cast:ot})],jt.prototype,"borderLineSize",void 0),w([S({type:Hm,json:{write:!0}})],jt.prototype,"font",void 0),w([S({...nk,json:{write:!0}})],jt.prototype,"horizontalAlignment",void 0),w([S({type:Boolean,json:{write:!0}})],jt.prototype,"kerning",void 0),w([S({type:Ve,json:{write:!0}})],jt.prototype,"haloColor",void 0),w([S({type:Number,cast:ot,json:{write:!0}})],jt.prototype,"haloSize",void 0),w([S({type:Boolean,json:{write:!0}})],jt.prototype,"rightToLeft",void 0),w([S({type:Boolean,json:{write:!0}})],jt.prototype,"rotated",void 0),w([S({type:String,json:{write:!0}})],jt.prototype,"text",void 0),w([Ae({esriTS:"text"},{readOnly:!0})],jt.prototype,"type",void 0),w([S({...ok,json:{write:!0}})],jt.prototype,"verticalAlignment",void 0),w([S({type:Number,cast:ot,json:{write:!0}})],jt.prototype,"xoffset",void 0),w([S({type:Number,cast:ot,json:{write:!0}})],jt.prototype,"yoffset",void 0),w([S({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],jt.prototype,"angle",void 0),w([S({type:Number,json:{write:!0}})],jt.prototype,"width",void 0),w([S({type:Number})],jt.prototype,"lineWidth",void 0),w([_e("lineWidth")],jt.prototype,"writeLineWidth",null),w([mt("lineWidth")],jt.prototype,"castLineWidth",null),w([S(sk)],jt.prototype,"lineHeight",void 0),w([_e("lineHeight")],jt.prototype,"writeLineHeight",null),jt=T3=w([B("esri.symbols.TextSymbol")],jt);const Ec=jt;var M3;let bs=M3=class extends gr{constructor(e){super(e),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const e=this.portal!=null?this.portal:mr.getDefault(),t=e.user?e.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${t}:${e.url}`}read(e,t){this.portal=t==null?void 0:t.portal,super.read(e,t)}clone(){return new M3({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){return this._fetchSymbol("webRef",e)}fetchCIMSymbol(e){return this._fetchSymbol("cimRef",e)}async _fetchSymbol(e,t){const i=t!=null?t.cache:null,s=i?this._fetchCacheKey:null;if(i!=null){const v=s&&i.get(s);if(v)return v.clone()}const{resolveWebStyleSymbol:u}=await Se(()=>import("./webStyleSymbolUtils-90837905.js"),["assets/webStyleSymbolUtils-90837905.js","assets/devEnvironmentUtils-4eab2a99.js"]);Gt(t);const d=u(this,{portal:this.portal},e,t);d.catch(v=>{de.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",v)});const y=await d;return e==="webRef"&&y.type==="point-3d"||e==="cimRef"&&y.type==="cim"?(i!=null&&i.set(s,y.clone()),y):null}};w([S({json:{write:!1}})],bs.prototype,"color",void 0),w([S({type:String,json:{write:!0}})],bs.prototype,"styleName",void 0),w([S({type:mr,json:{write:!1}})],bs.prototype,"portal",void 0),w([S({type:String,json:{read:u4,write:bu}})],bs.prototype,"styleUrl",void 0),w([S({type:yp,json:{read:!1}})],bs.prototype,"thumbnail",void 0),w([S({type:String,json:{write:!0}})],bs.prototype,"name",void 0),w([Ae({styleSymbolReference:"web-style"},{readOnly:!0})],bs.prototype,"type",void 0),w([S()],bs.prototype,"_fetchCacheKey",null),bs=M3=w([B("esri.symbols.WebStyleSymbol")],bs);const ju=bs;function bce(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function q7(e){if(!e)return!1;switch(e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const nu={base:gr,key:"type",typeMap:{"simple-fill":Cu,"picture-fill":Sk,"picture-marker":Zm,"simple-line":ns,"simple-marker":za,text:Ec,"label-3d":Wm,"line-3d":Jm,"mesh-3d":Km,"point-3d":Yl,"polygon-3d":dd,"web-style":ju,cim:ud},errorContext:"symbol"},bK={base:gr,key:"type",typeMap:{"picture-marker":Zm,"simple-marker":za,text:Ec,"web-style":ju,cim:ud},errorContext:"symbol"},_K=vc({types:nu}),Mk={base:gr,key:"type",typeMap:{"simple-fill":Cu,"picture-fill":Sk,"picture-marker":Zm,"simple-line":ns,"simple-marker":za,text:Ec,"line-3d":Jm,"mesh-3d":Km,"point-3d":Yl,"polygon-3d":dd,"web-style":ju,cim:ud},errorContext:"symbol"},xK={base:gr,key:"type",typeMap:{text:Ec,"label-3d":Wm},errorContext:"symbol"},U7={base:gr,key:"type",typeMap:{"line-3d":Jm,"mesh-3d":Km,"point-3d":Yl,"polygon-3d":dd,"web-style":ju,cim:ud},errorContext:"symbol"},SK={base:gr,key:"type",typeMap:{"label-3d":Wm},errorContext:"symbol"},Ik=wn(nu);var I3;function $K(e){if(!e)return null;const t={};for(const i in e){const s=$a(e[i]);s&&(t[i]=s)}return Object.keys(t).length!==0?t:null}function TK(e){if(e==null)return null;const t={};for(const i in e){const s=e[i];s&&(t[i]=s.toJSON())}return Object.keys(t).length!==0?t:null}let lr=I3=class extends Mt(pe){constructor(...e){super(...e),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:Q0(),configurable:!0})}normalizeCtorArgs(e,t,i,s){return e&&!e.declaredClass?e:{geometry:e,symbol:t,attributes:i,popupTemplate:s}}set aggregateGeometries(e){const t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),this._notifyLayer("geometry",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}cloneShallow(){return new I3({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible})}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;for(const t of[this.sourceLayer,this.layer])if(t){if("popupTemplate"in t&&t.popupTemplate)return t.popupTemplate;if(e&&"defaultPopupTemplate"in t&&t.defaultPopupTemplate!=null)return t.defaultPopupTemplate}return null}getAttribute(e){var t;return(t=this.attributes)==null?void 0:t[e]}setAttribute(e,t){if(this.attributes){const i=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",i,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){var e;return{aggregateGeometries:TK(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:ly(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:((e=this.popupTemplate)==null?void 0:e.toJSON())??null}}notifyGeometryChanged(){this._notifyLayer("geometry",this.geometry,this.geometry)}notifyMeshTransformChanged(e={}){const{geometry:t}=this;if((t==null?void 0:t.type)==="mesh"){const i={origin:t.origin,transform:t.transform};this._notifyLayer("origin-transform",i,i,e.action)}}_notifyLayer(e,t,i,s){if(!this.layer||!("graphicChanged"in this.layer))return;const u={graphic:this,property:e,oldValue:t,newValue:i};e==="origin-transform"&&(u.action=s),e==="attributes"&&(u.attributeName=s),this.layer.graphicChanged(u)}};w([S({value:null,json:{read:$K}})],lr.prototype,"aggregateGeometries",null),w([S({value:null})],lr.prototype,"attributes",null),w([S({value:null,types:Eu,json:{read:$a}})],lr.prototype,"geometry",null),w([S({type:Boolean})],lr.prototype,"isAggregate",void 0),w([S({clonable:"reference"})],lr.prototype,"layer",void 0),w([S({type:ld})],lr.prototype,"popupTemplate",void 0),w([S({clonable:"reference"})],lr.prototype,"sourceLayer",void 0),w([S({value:null,types:nu})],lr.prototype,"symbol",null),w([S({type:Boolean,value:!0})],lr.prototype,"visible",null),lr=I3=w([B("esri.Graphic")],lr),function(e){e.generateUID=Q0}(lr||(lr={}));const ka=lr;let ou=class extends up{_own(t){t.layer&&"remove"in t.layer&&t.layer!==this.owner&&t.layer.remove(t),t.layer=this.owner}_release(t){t.layer===this.owner&&(t.layer=null)}};w([g5({Type:ka,ensureType:ei(ka)})],ou.prototype,"itemType",void 0),ou=w([B("esri.support.GraphicsCollection")],ou);let Bo=class extends Ne{constructor(t){super(t),this.view=null,this.baseLayerViews=new Oe,this.referenceLayerViews=new Oe,this._loadingHandle=Ge(()=>{var i,s;return(s=(i=this.view)==null?void 0:i.map)==null?void 0:s.basemap},i=>{i&&i.load().catch(()=>{})},rr)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(const t of this.baseLayerViews)t.destroy();this.baseLayerViews.length=0;for(const t of this.referenceLayerViews)t.destroy();this.referenceLayerViews.length=0}get suspended(){return!this.view||this.view.suspended}get updating(){var i,s;if(this.view&&this.view.suspended)return!1;const t=(s=(i=this.view)==null?void 0:i.map)==null?void 0:s.basemap;return!!t&&!!t.loaded&&(this.baseLayerViews.some(u=>u.updating)||this.referenceLayerViews.some(u=>u.updating))}};w([S({constructOnly:!0})],Bo.prototype,"view",void 0),w([S({readOnly:!0})],Bo.prototype,"baseLayerViews",void 0),w([S({readOnly:!0})],Bo.prototype,"referenceLayerViews",void 0),w([S({readOnly:!0})],Bo.prototype,"suspended",null),w([S({type:Boolean,readOnly:!0})],Bo.prototype,"updating",null),Bo=w([B("esri.views.BasemapView")],Bo);function MK(e){return"tryRecycleWith"in e}let IK=class{constructor(t,i,s){this.layer=t,this.view=i,this.layerViewImporter=s,this._controller=new AbortController,this._deferred=ts(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,Rs(this._controller.signal,()=>{const u=new ae("cancelled:layerview-create","layerview creation cancelled",{layer:t});this._deferred.reject(u)})}tryRecycle(t){if(!this.done||!this.layerView||!MK(this.layerView))return null;const i=this.layer.type,s=this._controller.signal;for(let u=0;u<t.length;u++){const d=t[u];if(d.type!==i)continue;const y=this.layerView.tryRecycleWith(d,{signal:s});if(y){t.splice(u,1),this.layer=d;const v=this.layerView,_=v.view;return this.promise=Promise.race([y.then(()=>(Gt(this._controller.signal),d.emit("layerview-destroy",{view:_,layerView:v}),_.emit("layerview-destroy",{view:_,layerView:v}),d.emit("layerview-create",{view:_,layerView:v}),_.emit("layerview-create",{view:_,layerView:v}),v)),new Promise((M,E)=>Rs(this._controller.signal,()=>E(hi())))]),this.promise}}return null}destroy(){this._controller.abort();const{layerView:t}=this;if(t){const{layer:i,view:s}=this;i.emit("layerview-destroy",{view:s,layerView:t}),s.emit("layerview-destroy",{layer:i,layerView:t})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null}async start(){var u,d;if(this._started)return;this._started=!0;const{_controller:{signal:t},layer:i,view:s}=this;this._map=s.map;try{let y,v;if(await i.load({signal:t}),i.prefetchResources&&await i.prefetchResources({signal:t}),kK(i))y=await i.createLayerView(s,{signal:t});else{if(!this.layerViewImporter.hasLayerViewModule(i))throw new ae("layer:view-not-supported","No layerview implementation was found");const E=await this.layerViewImporter.importLayerView(i);Gt(t),y="default"in E?new E.default({layer:i,view:s}):new E({layer:i,view:s})}const _=()=>{v=Kt(v),y.destroyed||y.destroy(),y.layer=null,y.parent=null,y.view=null,this.done=!0};v=Rs(t,_),Gt(t);try{await y.when()}catch(E){throw _(),E}if(!((d=(u=this._map)==null?void 0:u.allLayers)==null?void 0:d.includes(i)))return _(),void this._deferred.reject(new ae("view:no-layerview-for-layer","The layer has been removed from the map",{layer:i}));this.layerView=y,i.emit("layerview-create",{view:s,layerView:y}),s.emit("layerview-create",{layer:i,layerView:y}),this.done=!0,this._deferred.resolve(y)}catch(y){i.emit("layerview-create-error",{view:s,error:y}),s.emit("layerview-create-error",{layer:i,error:y}),this.done=!0,this._deferred.reject(new ae("layerview:create-error","layerview creation failed",{layer:i,error:y}))}}},Hr=class extends Ne{constructor(t){super(t),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new ru,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var s;const i=(s=this.view.map)==null?void 0:s.allLayers;if(i)for(const u of i)this.layerViewImporter.hasLayerViewModule(u)&&this.layerViewImporter.importLayerView(u)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=ts(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(gc(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var _,M,E;if(this.destroyed)return;const i=this.view.map;if(this._map!==i&&(this.clear(),this._map=i),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const s=new Set,u=[],d=this.view.ready,y=O=>{if(O!=null){for(const C of O)if(C){s.add(C);const R=this._layerLayerViewInfoMap.get(C);R&&d?R.start():R||this._recyclingInfoMap.has(C)||u.push(C),"layers"in C&&C.layers&&y(C.layers)}}};for(const O of this._rootCollectionNames)y(Ns(this,O));for(const[O,C]of this._layerLayerViewInfoMap)if(!s.has(O)){this._layerLayerViewInfoMap.delete(C.layer);const R=C.tryRecycle(u);R?(this.notifyChange("updating"),this._recyclingInfoMap.set(C.layer,C),R.then(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(C.layer),this._layerLayerViewInfoMap.set(C.layer,C),this._reschedule()}).catch(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(C.layer),C.destroy(),this._reschedule()})):C.destroy()}for(const[O,C]of this._recyclingInfoMap)s.has(O)||(this.notifyChange("updating"),this._recyclingInfoMap.delete(C.layer),C.destroy());for(const O of u)this._createLayerView(O);this._refreshCollections();const v=[(_=i==null?void 0:i.ground)==null?void 0:_.layers,(M=i==null?void 0:i.basemap)==null?void 0:M.baseLayers,(E=i==null?void 0:i.basemap)==null?void 0:E.referenceLayers,i==null?void 0:i.layers].filter(O=>!!O);s.forEach(O=>"layers"in O&&v.push(O.layers)),this.addHandles(v.map(O=>this._watchUpdatingTracking.addOnCollectionChange(()=>O,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.addHandles([uc(()=>{var t,i;return(i=(t=this.view)==null?void 0:t.map)==null?void 0:i.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),Ge(()=>{const t=this.view,i=t==null?void 0:t.map;return[i==null?void 0:i.basemap,i==null?void 0:i.ground,i==null?void 0:i.layers,t==null?void 0:t.ready]},()=>this._reschedule(),so)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),l2(this._recyclingInfoMap),l2(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(hi()),this._workPromise=null)}get _layersToLayerViews(){const t=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&t.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(t)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||mm(this._layerLayerViewInfoMap,t=>!t.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let t=0;for(const i of this._layerLayerViewInfoMap.values())i.done||++t;return t}clear(){this.destroyed||(l2(this._layerLayerViewInfoMap),this._refreshCollections())}async whenLayerView(t){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(t)){if(this._recyclingInfoMap.has(t))return this._recyclingInfoMap.get(t).promise;throw new ae("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:t})}return this._layerLayerViewInfoMap.get(t).promise}_refreshCollections(){for(const[t,i]of this._layersToLayerViews)this._populateLayerViewsOwners(Ns(this,t),Ns(this,i),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(t,i,s){if(!t||!i)return void(i&&i.removeAll());let u=0;for(const d of t){const y=this._layerLayerViewInfoMap.get(d);if(!(y!=null&&y.layerView))continue;const v=y.layerView;v.layer=d,v.parent=s,i.at(u)!==v&&i.splice(u,0,v),d.layers&&this._populateLayerViewsOwners(d.layers,v.layerViews,v),u+=1}u<i.length&&i.splice(u,i.length)}_createLayerView(t){t.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(t)&&this.layerViewImporter.importLayerView(t);const i=new IK(t,this.view,this.layerViewImporter);i.promise.then(()=>this._refreshCollections(),s=>{s&&(Rr(s)||s.name==="cancelled:layerview-create")||de.getLogger(this).error(`Failed to create layerview for layer title:'${t.title??"no title"}', id:'${t.id??"no id"}' of type '${t.type}'.`,{layer:t,error:s}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(t,i),this.view.ready&&i.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};w([S()],Hr.prototype,"_workPromise",void 0),w([S({readOnly:!0})],Hr.prototype,"_watchUpdatingTracking",void 0),w([S({readOnly:!0})],Hr.prototype,"_layersToLayerViews",null),w([S({readOnly:!0})],Hr.prototype,"_rootCollectionNames",null),w([S()],Hr.prototype,"layerViewImporter",void 0),w([S()],Hr.prototype,"supportsGround",void 0),w([S({readOnly:!0})],Hr.prototype,"updating",null),w([S({readOnly:!0})],Hr.prototype,"updatingRemaining",null),w([S({constructOnly:!0})],Hr.prototype,"view",void 0),Hr=w([B("esri.views.LayerViewManager")],Hr);const EK=Hr;function kK(e){return"createLayerView"in e&&e.createLayerView!=null}let Sr=class extends Ne{constructor(t){super(t),this.factor=1.5,this.offset=ir(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};w([S({type:Number})],Sr.prototype,"factor",void 0),w([S({nonNullable:!0})],Sr.prototype,"offset",void 0),w([S()],Sr.prototype,"position",void 0),w([S({type:Number,range:{min:0}})],Sr.prototype,"size",void 0),w([S()],Sr.prototype,"maskUrl",void 0),w([S()],Sr.prototype,"maskEnabled",void 0),w([S()],Sr.prototype,"overlayUrl",void 0),w([S()],Sr.prototype,"overlayEnabled",void 0),w([S({readOnly:!0})],Sr.prototype,"version",null),w([S({type:Boolean})],Sr.prototype,"visible",void 0),Sr=w([B("esri.views.Magnifier")],Sr);const Ek=Sr;let E0=class extends Mt(Ne){constructor(t){super(t),this.accentColor=new Ve([255,127,0]),this.textColor=new Ve([255,255,255])}};w([S({type:Ve,nonNullable:!0})],E0.prototype,"accentColor",void 0),w([S({type:Ve,nonNullable:!0})],E0.prototype,"textColor",void 0),E0=w([B("esri.views.Theme")],E0);const E3=E0;var B7;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right"})(B7||(B7={}));const kk=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],Ak={};function Ok(e){return!!Ak[e]}function AK(e){for(const t of e)if(!Ok(t))return!1;return!0}kk.forEach(e=>{Ak[e]=!0});let OK=class{constructor(t){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=t,this.inputManager=null}connect(t){t&&this.disconnect(),this.inputManager=t,this._handlers.forEach(({handler:i,priority:s},u)=>{var d;return(d=this.inputManager)==null?void 0:d.installHandlers(u,[i],s)})}disconnect(){this.inputManager&&this._handlers.forEach((t,i)=>{var s;return(s=this.inputManager)==null?void 0:s.uninstallHandlers(i)}),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(t,i,s,u){const d=Array.isArray(t)?t:t.split(",");if(!AK(d))return d.some(Ok)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let y,v;Array.isArray(i)?v=i:(y=i,v=[]),typeof s=="function"?y=s:u=s,u=u??wa.DEFAULT;const _=this._createUniqueGroupName(),M=new PK(this.view,d,v,y);this._handlers.set(_,{handler:M,priority:u});for(const E of d){const O=this._handlerCounts.get(E)||0;this._handlerCounts.set(E,O+1)}return this.inputManager&&this.inputManager.installHandlers(_,[M],u),Et(()=>this._removeHandler(_,d))}hasHandler(t){return!!this._handlerCounts.get(t)}_removeHandler(t,i){if(this._handlers.has(t)){this._handlers.delete(t);for(const s of i){const u=this._handlerCounts.get(s);u===void 0?console.error("Trying to remove handler for event that has no handlers registered: ",s):u===1?this._handlerCounts.delete(s):this._handlerCounts.set(s,u-1)}}this.inputManager&&this.inputManager.uninstallHandlers(t)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},PK=class extends mi{constructor(t,i,s,u){super(!0),this._latestDragStart=void 0,this.view=t;for(const d of i)switch(d){case"click":this.registerIncoming("click",s,y=>u(this._wrapClick(y)));break;case"double-click":this.registerIncoming("double-click",s,y=>u(this._wrapDoubleClick(y)));break;case"immediate-click":this.registerIncoming("immediate-click",s,y=>u(this._wrapImmediateClick(y)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",s,y=>u(this._wrapImmediateDoubleClick(y)));break;case"hold":this.registerIncoming("hold",s,y=>u(this._wrapHold(y)));break;case"drag":this.registerIncoming("drag",s,y=>{const v=this._wrapDrag(y);v&&u(v)});break;case"key-down":this.registerIncoming("key-down",s,y=>u(this._wrapKeyDown(y)));break;case"key-up":this.registerIncoming("key-up",s,y=>u(this._wrapKeyUp(y)));break;case"pointer-down":this.registerIncoming("pointer-down",s,y=>u(this._wrapPointer(y,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",s,y=>u(this._wrapPointer(y,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",s,y=>u(this._wrapPointer(y,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",s,y=>u(this._wrapPointerDrag(y)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",s,y=>u(this._wrapMouseWheel(y)));break;case"pointer-enter":this.registerIncoming("pointer-enter",s,y=>u(this._wrapPointer(y,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",s,y=>u(this._wrapPointer(y,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",s,y=>{u(this._wrapGamepad(y))});break;case"focus":this.registerIncoming("focus",s,y=>{u(this._wrapFocus(y))});break;case"blur":this.registerIncoming("blur",s,y=>{u(this._wrapBlur(y))})}}_wrapFocus(t){return{type:"focus",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:i=>t.async(i),preventDefault:()=>t.preventDefault()}}_wrapBlur(t){return{type:"blur",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:i=>t.async(i),preventDefault:()=>t.preventDefault()}}_wrapClick(t){const{pointerType:i,button:s,buttons:u,x:d,y,native:v,eventId:_}=t.data,{cancelable:M,timestamp:E}=t;return{type:"click",pointerType:i,button:s,buttons:u,x:d,y,native:v,timestamp:E,screenPoint:ir(d,y),mapPoint:this._getMapPoint(d,y),eventId:_,cancelable:M,stopPropagation:()=>t.stopPropagation(),async:O=>t.async(O),preventDefault:()=>t.preventDefault()}}_wrapDoubleClick(t){const{pointerType:i,button:s,buttons:u,x:d,y,native:v,eventId:_}=t.data,{cancelable:M,timestamp:E}=t;return{type:"double-click",pointerType:i,button:s,buttons:u,x:d,y,native:v,timestamp:E,mapPoint:this._getMapPoint(d,y),eventId:_,cancelable:M,stopPropagation:()=>t.stopPropagation(),async:O=>t.async(O),preventDefault:()=>t.preventDefault()}}_wrapImmediateClick(t){const{pointerType:i,button:s,buttons:u,x:d,y,native:v,eventId:_}=t.data,M=v.pointerId,{cancelable:E,timestamp:O}=t;return{type:"immediate-click",pointerId:M,pointerType:i,button:s,buttons:u,x:d,y,native:v,timestamp:O,mapPoint:this._getMapPoint(d,y),eventId:_,cancelable:E,stopPropagation:()=>t.stopPropagation(),async:C=>t.async(C),preventDefault:()=>t.preventDefault()}}_wrapImmediateDoubleClick(t){const{pointerType:i,button:s,buttons:u,x:d,y,native:v,eventId:_}=t.data,M=v.pointerId,{cancelable:E,timestamp:O}=t;return{type:"immediate-double-click",pointerId:M,pointerType:i,button:s,buttons:u,x:d,y,native:v,timestamp:O,mapPoint:this._getMapPoint(d,y),eventId:_,cancelable:E,stopPropagation:()=>t.stopPropagation(),async:C=>t.async(C),preventDefault:()=>t.preventDefault()}}_wrapHold(t){const{pointerType:i,button:s,buttons:u,x:d,y,native:v}=t.data,{cancelable:_,timestamp:M}=t;return{type:"hold",pointerType:i,button:s,buttons:u,x:d,y,native:v,timestamp:M,mapPoint:this._getMapPoint(d,y),cancelable:_,stopPropagation:()=>t.stopPropagation(),async:E=>t.async(E),preventDefault:()=>t.preventDefault()}}_getMapPoint(t,i){return this.view.toMap(ir(t,i),{exclude:[]})}_wrapDrag(t){const i=t.data,{x:s,y:u}=i.center,{action:d,pointerType:y,button:v}=i;if(d==="start"&&(this._latestDragStart=i),!this._latestDragStart)return;const _=i.pointer.native,M=i.buttons,{cancelable:E,timestamp:O}=t,C={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return d==="end"&&(this._latestDragStart=void 0),{type:"drag",action:d,x:s,y:u,origin:C,pointerType:y,button:v,buttons:M,radius:i.radius,angle:q$(i.angle),native:_,timestamp:O,cancelable:E,stopPropagation:()=>t.stopPropagation(),async:R=>t.async(R),preventDefault:()=>t.preventDefault()}}_wrapKeyDown(t){const{key:i,repeat:s,native:u}=t.data,{cancelable:d,timestamp:y}=t;return{type:"key-down",key:i,repeat:s,native:u,timestamp:y,cancelable:d,stopPropagation:()=>t.stopPropagation(),async:v=>t.async(v),preventDefault:()=>t.preventDefault()}}_wrapKeyUp(t){const{key:i,native:s}=t.data,{cancelable:u,timestamp:d}=t;return{type:"key-up",key:i,native:s,timestamp:d,cancelable:u,stopPropagation:()=>t.stopPropagation(),async:y=>t.async(y),preventDefault:()=>t.preventDefault()}}_wrapPointer(t,i){const{x:s,y:u,button:d,buttons:y,native:v,eventId:_}=t.data,M=v.pointerId,E=v.pointerType,{cancelable:O,timestamp:C}=t;return{type:i,x:s,y:u,pointerId:M,pointerType:E,button:d,buttons:y,native:v,timestamp:C,eventId:_,cancelable:O,stopPropagation:()=>t.stopPropagation(),async:R=>t.async(R),preventDefault:()=>t.preventDefault()}}_wrapPointerDrag(t){const{x:i,y:s,buttons:u,native:d,eventId:y}=t.data.currentEvent,{button:v}=t.data.startEvent,_=t.data.startEvent.native.pointerId,M=t.data.startEvent.native.pointerType,E=t.data.action,O={x:t.data.startEvent.x,y:t.data.startEvent.y},{cancelable:C,timestamp:R}=t;return{type:"pointer-drag",x:i,y:s,pointerId:_,pointerType:M,button:v,buttons:u,action:E,origin:O,native:d,timestamp:R,eventId:y,cancelable:C,stopPropagation:()=>t.stopPropagation(),async:L=>t.async(L),preventDefault:()=>t.preventDefault()}}_wrapMouseWheel(t){const{cancelable:i,data:s,timestamp:u}=t,{x:d,y,deltaY:v,native:_}=s;return{type:"mouse-wheel",x:d,y,deltaY:v,native:_,timestamp:u,cancelable:i,stopPropagation:()=>t.stopPropagation(),async:M=>t.async(M),preventDefault:()=>t.preventDefault()}}_wrapGamepad(t){const{action:i,state:s,device:u}=t.data,{cancelable:d,timestamp:y}=t,{buttons:v,axes:_}=s;return{type:"gamepad",device:u,timestamp:y,action:i,buttons:v,axes:_,cancelable:d,stopPropagation:()=>t.stopPropagation(),async:M=>t.async(M),preventDefault:()=>t.preventDefault()}}};var zp,H7,W7;(function(e){e[e.USER=0]="USER",e[e.MANAGER=1]="MANAGER"})(zp||(zp={})),function(e){e[e.None=0]="None",e[e.Unfocused=1]="Unfocused",e[e.Focused=2]="Focused",e[e.Unselected=4]="Unselected",e[e.Selected=8]="Selected",e[e.All=15]="All"}(H7||(H7={})),function(e){e[e.None=0]="None",e[e.Custom1=16]="Custom1",e[e.Custom2=32]="Custom2",e[e.Custom3=64]="Custom3",e[e.Custom4=128]="Custom4",e[e.Custom5=256]="Custom5",e[e.Custom6=512]="Custom6",e[e.Custom7=1024]="Custom7",e[e.Custom8=2048]="Custom8",e[e.Custom9=4096]="Custom9",e[e.Custom10=8192]="Custom10",e[e.Custom11=16384]="Custom11",e[e.Custom12=32768]="Custom12",e[e.All=65520]="All"}(W7||(W7={}));function CK(e){return[e.on("before-add",t=>{const i=t.item;if(i==null||e.includes(i))return de.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void t.preventDefault();i.onAdd()}),e.on("after-remove",t=>{const i=t.item;i.active&&(i.view.activeTool=null),i.destroy()})]}function k3(e){return e.visible&&e.getEditableFlag!=null&&e.getEditableFlag(zp.USER)&&e.getEditableFlag(zp.MANAGER)}function on(e){return ir(e.x,e.y)}function Pk(e,t){var s;const i=(s=e instanceof HTMLElement?e:e.surface)==null?void 0:s.getBoundingClientRect();return i?ir(t.clientX-i.left,t.clientY-i.top):ir(0,0)}function Ck(e,t){return t instanceof Event?Pk(e,t):on(t)}function jk(e){if(e instanceof Event)return!0;if(typeof e=="object"&&"type"in e)switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let jK=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(t,i){const s=()=>t.stopPropagation();switch(t.type){case"pointer-move":J7(t.pointerType)&&this._pointerLocations.set(t.pointerId,{x:t.x,y:t.y,pointerType:t.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(s(),t.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!K7(t))break;const u=on(t),d=this._intersect(u,t.pointerType,i.forEachTool);if(d==null)break;const y=d.manipulator,v=d.tool;y==null||v==null||!y.interactive||y.grabbable&&y.grabbableForEvent(t)||!y.grabbing||y.dragging||this._ungrabManipulatorBeforeDragging(y,t,i),y!=null&&v!=null&&y.interactive&&y.grabbable&&y.grabbableForEvent(t)&&!y.grabbing&&(this._grabbedManipulators.set(t.pointerId,{manipulator:y,tool:v,start:u,pointerType:t.pointerType}),this._grabbedManipulators.size===1&&i.activeTool==null&&(this._revertToNullActiveTool=!0,i.setActiveTool(d.tool)),y.grabbing=!0,y.events.emit("grab-changed",{action:"start",pointerType:t.pointerType,screenPoint:u}),s());break}case"pointer-up":this._draggedManipulators.has(t.pointerId)||this._handlePointerEnd(t,i);break;case"pointer-drag":{if(!K7(t))break;const u=this._grabbedManipulators.get(t.pointerId),d=u==null?void 0:u.manipulator,y=u==null?void 0:u.tool;if(d==null||y==null)break;const v=on(t);v.x=rs(v.x,0,i.view.width),v.y=rs(v.y,0,i.view.height);const _=u.start,M=this._draggedManipulators.get(t.pointerId);switch(t.action){case"start":case"update":t.action!=="update"&&this._grabbedManipulators.size!==1||(d.dragging=!0,M?d.events.emit("drag",{action:"update",start:_,screenPoint:v}):d.events.emit("drag",{action:"start",start:_,screenPoint:v,pointerType:t.pointerType}),this._draggedManipulators.set(t.pointerId,{tool:y,manipulator:d,start:_}));break;case"end":d.dragging=!1,M&&d.events.emit("drag",{action:"end",start:_,screenPoint:v}),this._draggedManipulators.delete(t.pointerId),this._handlePointerEnd(t,i)}s();break}case"immediate-click":{const u=on(t),d=this._intersect(u,t.pointerType,i.forEachTool);if(NK(t)||i.forEachTool(M=>{if((d==null||d.tool!==M||M.automaticManipulatorSelection)&&M.manipulators){let E=!1;M.manipulators.forEach(({manipulator:O})=>{O.selected&&(O.selected=!1,E=!0)}),E&&M.onManipulatorSelectionChanged&&M.onManipulatorSelectionChanged()}}),d==null)break;const{manipulator:y,tool:v}=d;if(!y.interactive)break;y.selectable&&v.automaticManipulatorSelection&&(y.selected=!y.selected,v.onManipulatorSelectionChanged&&v.onManipulatorSelectionChanged());const _=t.native.shiftKey;y.events.emit("immediate-click",{screenPoint:u,button:t.button,pointerType:t.pointerType,shiftKey:_,stopPropagation:s}),y2(y,s);break}case"click":{const u=on(t),d=this._intersect(u,t.pointerType,i.forEachTool),y=d==null?void 0:d.manipulator;if(y==null||!y.interactive)break;const v=t.native.shiftKey;y.events.emit(t.type,{screenPoint:u,button:t.button,pointerType:t.pointerType,shiftKey:v}),s();break}case"double-click":{const u=on(t),d=this._intersect(u,t.pointerType,i.forEachTool),y=d!=null?d.manipulator:null;if(y==null||!y.interactive)break;const v=t.native.shiftKey;y.events.emit("double-click",{screenPoint:u,button:t.button,pointerType:t.pointerType,shiftKey:v,stopPropagation:s}),y2(y,s);break}case"immediate-double-click":{const u=on(t),d=this._intersect(u,t.pointerType,i.forEachTool),y=d!=null?d.manipulator:null;if(y==null||!y.interactive)break;const v=t.native.shiftKey;y.events.emit("immediate-double-click",{screenPoint:u,button:t.button,pointerType:t.pointerType,shiftKey:v,stopPropagation:s}),y2(y,s);break}}this._onFocusChange(i.forEachTool)}_ungrabManipulatorBeforeDragging(t,i,s){t.grabbing=!1,t.events.emit("grab-changed",{action:"end",pointerType:i.pointerType,screenPoint:on(i)}),this._grabbedManipulators.forEach(({manipulator:u},d)=>{u===t&&this._grabbedManipulators.delete(d)}),this._afterManipulatorUngrab(s.setActiveTool)}_handlePointerEnd(t,i){var u;const s=(u=this._grabbedManipulators.get(t.pointerId))==null?void 0:u.manipulator;s!=null&&s.grabbing&&(s.grabbing=!1,s.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:on(t)}),this._grabbedManipulators.delete(t.pointerId),this._afterManipulatorUngrab(i.setActiveTool))}_cursorFromMap(t){let i=null;return mm(t,({manipulator:s})=>!(s==null||!s.interactive)&&(s.grabbing&&s.grabCursor?(i=s.grabCursor,!0):!!s.cursor&&(i=s.cursor,!0))),i}_onFocusChange(t){this._updateCursor(),this._updateFocusedManipulatorTools(t)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=this._cursorFromMap(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=this._cursorFromMap(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(t){const i=new Set,s=new Set;this._grabbedManipulators.forEach(({tool:u})=>{i.add(u)}),this._hoveredManipulators.forEach(({tool:u})=>{s.add(u)}),t(u=>{u.hasGrabbedManipulators=i.has(u),u.hasHoveredManipulators=s.has(u);const d=this._grabbedManipulators.values(),y=tj(d,({tool:v})=>v===u);u.firstGrabbedManipulator=y!=null?y.manipulator:null})}clearPointers(t,{forEachTool:i,setActiveTool:s},u=!0,d){const y=(v,_)=>v===t&&(d==null||d===_);this._grabbedManipulators.forEach(({tool:v,manipulator:_,pointerType:M},E)=>{y(v,_)&&(this._grabbedManipulators.delete(E),_.grabbing=!1,_.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:M}))}),this._draggedManipulators.forEach(({tool:v,manipulator:_},M)=>{y(v,_)&&(this._draggedManipulators.delete(M),_.dragging=!1,_.events.emit("drag",{action:"cancel"}))}),u&&this._hoveredManipulators.forEach(({tool:v,manipulator:_},M)=>{y(v,_)&&(this._hoveredManipulators.delete(M),_.hovering=!1)}),this._afterManipulatorUngrab(s),this._onFocusChange(i)}_intersect(t,i,s){let u=null;return s(d=>{if(d.manipulators==null||!k3(d))return!1;const y=d.manipulators.intersect(t,i);return y!=null&&(u={tool:d,manipulator:y},!0)}),u}updateHoveredStateFromKnownPointers(t){this._pointerLocations.forEach((i,s)=>{this._updateHoveredStateForPointerAtScreenPosition(ir(i.x,i.y),s,i.pointerType,t)})}handleHoverEvent(t,i){t.type!=="pointer-up"&&t.type!=="immediate-click"&&t.type!=="pointer-move"||!J7(t.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(on(t),t.pointerId,t.pointerType,i)}_updateHoveredStateForPointerAtScreenPosition(t,i,s,u){var v;let d=this._intersect(t,s,u);const y=(v=this._hoveredManipulators.get(i))==null?void 0:v.manipulator;d==null||d.manipulator.interactive||(d=null),d!=null&&y===d.manipulator||(y!=null&&(y.hovering=!1),d!=null?(d.manipulator.hovering=!0,this._hoveredManipulators.set(i,d)):this._hoveredManipulators.delete(i),this._onFocusChange(u))}_afterManipulatorUngrab(t){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(t(null),this._revertToNullActiveTool=!1)}};function J7(e){return e==="mouse"}function K7(e){return e.pointerType!=="mouse"||e.button===0}function NK(e){return!!e.native.shiftKey}function y2(e,t){e!=null&&e.consumesClicks&&t()}const Z7="attached",m2="tools",Y7=1e3;let an=class extends Ne{constructor(t){super(t),this._updatingHandles=new ru,this._clock=mc,this._manipulatorState=new jK,this.tools=new Oe,this.cursor=null,this._interacting=!1,this._interactingTimeout=Y7,this._interactingTimeoutHandle=null,this._forEachTool=i=>{for(const s of this.tools.items)if(i(s))return}}initialize(){this.addHandles([this.view.on(kk,t=>{this._handleInputEvent(t)},wa.TOOL),...CK(this.tools),this.tools.on("before-add",({item:t})=>{this._updateToolEditableFlag(t)}),this.tools.on("before-remove",({item:t})=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.activeTool=null,this.tools.drain(t=>t.destroy()),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:t=>{this.activeTool=t},view:this.view}}set activeTool(t){if(t!=null&&!this.view.ready)return void de.getLogger(this).error("Cannot set active tool while view is not ready.");if(t===this.activeTool)return;const i=this.activeTool;this._set("activeTool",t),i!=null&&i.deactivate(),t!=null&&t.activate(),this._removeIncompleteTools(t);for(const s of this.tools){this._updateToolEditableFlag(s);const u=k3(s);this.activeTool!=null&&u||this._manipulatorState.clearPointers(s,this._manipulatorStateEventArgs,!u)}this._updateCursor()}get updating(){return this._updatingHandles.updating||this.tools.some(t=>t.updating)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=Kt(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout(()=>this._interacting=!1,this._interactingTimeout)}attach(){var t;this.view.type==="3d"?this.addHandles([Ge(()=>{const{state:i}=this.view;return"camera"in i&&i.camera},()=>this._forEachManipulator(i=>i.onViewChange())),(t=this.view.elevationProvider)==null?void 0:t.on("elevation-change",i=>this._forEachManipulator(s=>s.onElevationChange(i)))],Z7):this.addHandles(Ge(()=>this.view.extent,()=>this._forEachManipulator(i=>i.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(Z7),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(t){this._forEachTool(i=>{i.manipulators&&i.manipulators.forEach(({manipulator:s})=>t(s,i))})}_handleInputEvent(t){let i=!1;const s={...t,stopPropagation:()=>{i=!0,t.stopPropagation()}};this.activeTool!=null?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(s):this._forEachTool(u=>{!i&&u.visible&&u.handleInputEvent(s)}),!i&&t.type==="key-down"&&t.key==="Escape"&&this.activeTool&&(t.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(s,this._manipulatorStateEventArgs),i||this.activeTool==null||this.activeTool.handleInputEventAfter(s),this._manipulatorState.handleHoverEvent(s,this._forEachTool),this._updateCursor(),t.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators()||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(m2),this._forEachTool(t=>{if(t instanceof Ne){const i=Ge(()=>[t.cursor,t.visible,t.editable],()=>{k3(t)||this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()});this.addHandles(i,m2)}t.manipulators&&this.addHandles([t.manipulators.on("after-remove",i=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs,!0,i.item.manipulator)}),t.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],m2)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(t){var i;(i=t.setEditableFlag)==null||i.call(t,zp.MANAGER,this.activeTool==null||t===this.activeTool)}_updateCursor(){let t=this._manipulatorState.cursor;t==null&&this._forEachTool(i=>!(i.cursor==null||!i.visible)&&(t=i.cursor,!0)),this._get("cursor")!==t&&this._set("cursor",t)}_removeIncompleteTools(t){this.tools.filter(i=>(t==null||i!==t)&&!i.created&&i.removeIncompleteOnCancel).forEach(i=>{this.tools.remove(i)})}get test(){const t=this;return{setClock:i=>this._clock=i,set interactingTimeoutEnabled(i){t._interactingTimeout=i?Y7:0},get interactingTimeoutEnabled(){return t._interactingTimeout!==0}}}};w([S({constructOnly:!0,nonNullable:!0})],an.prototype,"view",void 0),w([S({value:null})],an.prototype,"activeTool",null),w([S({readOnly:!0,type:Oe})],an.prototype,"tools",void 0),w([S({readOnly:!0})],an.prototype,"cursor",void 0),w([S({readOnly:!0})],an.prototype,"updating",null),w([S()],an.prototype,"_interacting",void 0),w([S({readOnly:!0})],an.prototype,"interacting",null),an=w([B("esri.views.ToolViewManager")],an);let lh=class extends Ne{constructor(t){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",t.mapping==="standard"?this._detectedDeviceType="standard":RK.test(t.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=t.index}get native(){const t=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<t.length?t[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return LK[this.deviceType]}};w([S({nonNullable:!0,readOnly:!0})],lh.prototype,"nativeIndex",void 0),w([S({type:String,readOnly:!0})],lh.prototype,"deviceType",null),w([S({type:Number,readOnly:!0})],lh.prototype,"axisThreshold",null),lh=w([B("esri.views.input.gamepad.GamepadInputDevice")],lh);const RK=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),LK={standard:.15,spacemouse:.025,unknown:0},f4=lh;let k0=class extends Ne{constructor(...t){super(...t),this.devices=new Oe,this.enabledFocusMode="document"}};w([S({type:Oe.ofType(f4),readOnly:!0})],k0.prototype,"devices",void 0),w([S({type:["document","view","none"]})],k0.prototype,"enabledFocusMode",void 0),k0=w([B("esri.views.input.gamepad.GamepadSettings")],k0);const DK=k0;let g1=class extends Ne{constructor(){super(...arguments),this.gamepad=new DK}};w([S({readOnly:!0})],g1.prototype,"gamepad",void 0),g1=w([B("esri.views.input.Input")],g1);const FK=g1;let Ho=class extends Ne{constructor(t){super(t),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};w([S({type:Boolean,nonNullable:!0})],Ho.prototype,"enabled",void 0),w([S({type:f4})],Ho.prototype,"device",void 0),w([S({type:["pan","zoom"],nonNullable:!0})],Ho.prototype,"mode",void 0),w([S({type:["forward-down","forward-up"],nonNullable:!0})],Ho.prototype,"tiltDirection",void 0),w([S({type:Number,nonNullable:!0})],Ho.prototype,"velocityFactor",void 0),Ho=w([B("esri.views.navigation.gamepad.GamepadSettings")],Ho);const Nk=Ho;let fl=class extends Ne{constructor(t){super(t),this.browserTouchPanEnabled=!0,this.gamepad=new Nk,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}};w([S({type:Boolean})],fl.prototype,"browserTouchPanEnabled",void 0),w([S({type:Nk,nonNullable:!0})],fl.prototype,"gamepad",void 0),w([S({type:Boolean})],fl.prototype,"momentumEnabled",void 0),w([S({type:Boolean})],fl.prototype,"mouseWheelZoomEnabled",void 0),fl=w([B("esri.views.navigation.Navigation")],fl);const Rk=fl,Lk={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},Dk=Object.values(Lk),Fk=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${Dk.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),zK=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${Dk.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),VK=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function Rce(e){return!!Fk.test(e)}function kc(e){if(e==null)return null;const t=Ai(e),i=(t==null?void 0:t.path.match(Fk))||(t==null?void 0:t.path.match(zK));if(!i)return null;const[,s,u,d,y]=i,v=u.indexOf("/");return{title:y4(v!==-1?u.slice(v+1):u),serverType:Lk[d.toLowerCase()],sublayer:y!=null&&y!==""?parseInt(y,10):null,url:{path:s}}}function GK(e){const t=Ai(e).path.match(VK);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function y4(e){return(e=e.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function qK(e,t){const i=[];if(e){const s=kc(e);s!=null&&s.title&&i.push(s.title)}if(t){const s=y4(t);i.push(s)}if(i.length===2){if(i[0].toLowerCase().includes(i[1].toLowerCase()))return i[0];if(i[1].toLowerCase().includes(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function zk(e){if(!e)return!1;const t=".arcgis.com/",i="//services",s="//tiles",u="//features",d=(e=e.toLowerCase()).includes(t),y=e.includes(i)||e.includes(s)||e.includes(u);return d&&y}function UK(e,t){return e&&sT(nT(e,t))}function BK(e){let{url:t}=e;if(!t)return{url:t};t=nT(t,e.logger);const i=Ai(t),s=kc(i.path);let u;if(s!=null)s.sublayer!=null&&e.layer.layerId==null&&(u=s.sublayer),t=s.url.path;else if(e.nonStandardUrlAllowed){const d=GK(i.path);d!=null&&(t=d.serviceUrl,u=d.sublayerId)}return{url:sT(t),layerId:u}}function HK(e,t,i,s,u){bu(t,s,"url",u),s.url&&e.layerId!=null&&(s.url=nc(s.url,i,e.layerId.toString()))}function Lce(e){if(!e)return!1;const t=e.toLowerCase(),i=t.includes("/services/"),s=t.includes("/mapserver/wmsserver"),u=t.includes("/imageserver/wmsserver"),d=t.includes("/wmsserver");return i&&(s||u||d)}var X7;function WK(e){var s;const t=e.url?kc(e.url):void 0;return!(((s=e.spatialReference)==null?void 0:s.vcsWkid)==null&&t!=null&&t.serverType==="ImageServer")&&Vk(e)&&e.heightModelInfo?e.heightModelInfo:JK(e)?qm.deriveUnitFromSR(ZK,e.spatialReference):null}function Vk(e){return"heightModelInfo"in e}function Gk(e){if(e.type==="unknown"||!("capabilities"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function JK(e){return Gk(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):qk(e)}function KK(e){return e.layers!=null||qk(e)||Gk(e)||Vk(e)}function qk(e){switch(e.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(e){e[e.Ok=0]="Ok",e[e.Units=1]="Units",e[e.HeightModel=2]="HeightModel",e[e.CRS=3]="CRS",e[e.Unsupported=4]="Unsupported"})(X7||(X7={}));const ZK=new qm({heightModel:"gravity-related-height"});var Vy;(function(e){e[e.Global=1]="Global",e[e.Local=2]="Local"})(Vy||(Vy={}));let A3,g2=null;async function YK(e){g2||(g2=Se(()=>import("./geometryServiceUtils-f0944a4b.js"),[]).then(t=>A3=t)),await g2,Gt(e)}async function Uk(e,t,i,s){if(!e)return null;const u=e.spatialReference;return Ou()||fo(u,t)?Na(e,t):A3?A3.projectGeometry(e,t,i,s):(await Promise.race([YK(s),Ea(s)]),Uk(e,t,i,s))}let bt=class extends Ne{constructor(t){super(t),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=bp(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference!=null?this.userSpatialReference:this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var s,u,d,y;const t=(s=this.map)==null?void 0:s.call(this),i=[];return this.priorityCollection!=null&&i.push(this.priorityCollection),i.push({parent:t==null?void 0:t.basemap,layers:(u=t==null?void 0:t.basemap)==null?void 0:u.baseLayers},{layers:t==null?void 0:t.layers},{parent:t==null?void 0:t.ground,layers:(d=t==null?void 0:t.ground)==null?void 0:d.layers},{parent:t==null?void 0:t.basemap,layers:(y=t==null?void 0:t.basemap)==null?void 0:y.referenceLayers}),i}get _allLayers(){return this._collectLayers(this.mapCollections)}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};const{layers:t,updating:i}=this._allLayers;let s=null;for(const d of t){const y=this._getSupportedSpatialReferences(d);if(y.length>0){const v=this._narrowDownSpatialReferenceCandidates(s,y);v!=null&&(s=v)}if(s!=null&&s.length===1)break}if(i&&(s==null||s.length!==1))return{updating:!0};const u=this._pickSpatialReferenceCandidate(s);return{spatialReference:u!=null?u.spatialReference:null,viewingMode:u!=null?u.viewingMode:null,updating:!1}}get _tileInfoTask(){var s,u,d,y,v,_,M;if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{layers:t,updating:i}=this._collectLayers([{parent:(u=(s=this.map)==null?void 0:s.call(this))==null?void 0:u.basemap,layers:(v=(y=(d=this.map)==null?void 0:d.call(this))==null?void 0:y.basemap)==null?void 0:v.baseLayers},{layers:(M=(_=this.map)==null?void 0:_.call(this))==null?void 0:M.layers}]);if(t&&t.length>0&&"tileInfo"in t[0]){const E=t[0].tileInfo;return{tileInfo:E&&E.spatialReference.equals(this.spatialReference)?E:null,updating:!1}}return{updating:i}}get _heightModelInfoTask(){var s,u,d;if(!this.required.heightModelInfo||this.suspended&&((s=this._get("_heightModelInfoTask"))!=null&&s.heightModelInfo))return this._get("_heightModelInfoTask")??{updating:!1};const{layers:t,updating:i}=this._allLayers;for(const y of t)if(KK(y)){const v=WK(y);if(v)return{heightModelInfo:v,vcsWkid:(u=y.spatialReference)==null?void 0:u.vcsWkid,latestVcsWkid:(d=y.spatialReference)==null?void 0:d.latestVcsWkid,updating:!1}}return{updating:i}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const t=this._allLayers,i=t.updating,s=[];for(const u of t.layers){const d="fullExtents"in u&&u.fullExtents||(u.fullExtent!=null?[u.fullExtent]:[]),y=this.requiresExtentInSpatialReference?null:d[0],v=d.find(_=>_.spatialReference.equals(this.spatialReference))??y;if(v)return{candidates:[{extent:v,layer:u}],updating:!1};if(this._getSupportedSpatialReferences(u).length>0)for(const _ of d)s.push({extent:_,layer:u})}return{candidates:s,updating:i}}get _extentTask(){const{candidates:t,updating:i}=this._extentCandidatesTask;if(i)return{updating:i};if(t==null||t.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const s=this._pickExtentCandidate(t),u=this.spatialReference;return s.extent.equals(this._projectExtentTask.input)&&u.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=bp(this._projectExtentTask.task)),this._projectExtentTask={input:s.extent.clone(),output:null,spatialReference:u.clone(),task:b5(async d=>{try{const y=await Uk(s.extent,u,"portalItem"in s.layer?s.layer.portalItem:void 0,d);this._projectExtentTask={...this._projectExtentTask,task:null,output:y}}catch{if(co(d))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(t,i){if(t==null)return i;const s=[],u=(d,y)=>d!=null?y!=null?d===y&&d:d:y;for(const d of t)for(const y of i){if(!d.spatialReference.equals(y.spatialReference))continue;const v=u(d.viewingMode,y.viewingMode);if(v!==!1){s.push({spatialReference:d.spatialReference,viewingMode:v});break}}return s.length>0?s:null}_pickSpatialReferenceCandidate(t){const i=this.defaultSpatialReference;return t==null||t.length<1?i!=null?{spatialReference:i,viewingMode:null}:null:(i!=null&&t.length>1&&t.some(({spatialReference:s})=>s.equals(i))&&(t=t.filter(({spatialReference:s})=>s.equals(i))),t.length>1&&t.some(({viewingMode:s})=>s!==Vy.Local)&&(t=t.filter(({viewingMode:s})=>s!==Vy.Local)),t[0])}_getSupportedSpatialReferences(t){const i="supportedSpatialReferences"in t&&t.supportedSpatialReferences||(t.spatialReference?[t.spatialReference]:[]);if(i.length===0)return[];const s=[];for(const u of i){const d=this.getSpatialReferenceSupport({spatialReference:u,layer:t});if(d!=null){const y=d.constraints!=null?d.constraints:[{spatialReference:u,viewingMode:null}];for(const{spatialReference:v,viewingMode:_}of y)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!v.equals(this.userSpatialReference)||s.push({spatialReference:v,viewingMode:_})}}return s}_pickExtentCandidate(t){const i=this.spatialReference;return t.find(({extent:s})=>i.equals(s.spatialReference))||t[0]}_collectLayers(t){var s;if(this._loadMaybe((s=this.map)==null?void 0:s.call(this))!=="loaded")return{layers:[],updating:!0};const i=new XK;for(const u of t)if(this._collectCollection(u,i),i.preloading===this.sourcePreloadCount)break;return{layers:i.layers,updating:i.updating}}_collectCollection(t,i){if(t.layers){switch(this._loadMaybe(t.parent)){case"loading":return i.updating=!0,void++i.preloading;case"failed":return}for(const s of t.layers){switch(this._loadMaybe(s)){case"failed":continue;case"loading":i.updating=!0,++i.preloading;break;case"loaded":i.updating||i.layers.push(s),"layers"in s&&this._collectCollection({layers:s.layers},i)}if(i.preloading===this.sourcePreloadCount)break}}}_loadMaybe(t){return t&&"loadStatus"in t&&t.loadStatus!=null?t.loadStatus==="not-loaded"?(t.load().catch(i=>{Rr(i)||console.log(i)}),"loading"):t.loadStatus:"loaded"}};w([S()],bt.prototype,"required",void 0),w([S({constructOnly:!0})],bt.prototype,"map",void 0),w([S({constructOnly:!0})],bt.prototype,"getSpatialReferenceSupport",void 0),w([S()],bt.prototype,"defaultSpatialReference",void 0),w([S()],bt.prototype,"userSpatialReference",void 0),w([S()],bt.prototype,"sourcePreloadCount",void 0),w([S()],bt.prototype,"priorityCollection",void 0),w([S()],bt.prototype,"requiresExtentInSpatialReference",void 0),w([S()],bt.prototype,"suspended",void 0),w([S({readOnly:!0})],bt.prototype,"ready",null),w([S({readOnly:!0})],bt.prototype,"heightModelInfoReady",null),w([S({readOnly:!0})],bt.prototype,"spatialReference",null),w([S({readOnly:!0})],bt.prototype,"extent",null),w([S({readOnly:!0})],bt.prototype,"heightModelInfo",null),w([S({readOnly:!0})],bt.prototype,"vcsWkid",null),w([S({readOnly:!0})],bt.prototype,"latestVcsWkid",null),w([S({readOnly:!0})],bt.prototype,"viewingMode",null),w([S({readOnly:!0})],bt.prototype,"tileInfo",null),w([S({readOnly:!0})],bt.prototype,"mapCollections",null),w([S({readOnly:!0})],bt.prototype,"_allLayers",null),w([S({readOnly:!0})],bt.prototype,"_spatialReferenceTask",null),w([S({readOnly:!0})],bt.prototype,"_tileInfoTask",null),w([S({readOnly:!0})],bt.prototype,"_heightModelInfoTask",null),w([S({readOnly:!0})],bt.prototype,"_extentCandidatesTask",null),w([S()],bt.prototype,"_extentTask",null),w([S()],bt.prototype,"_projectExtentTask",void 0),bt=w([B("esri.views.support.DefaultsFromMap")],bt);let XK=class{constructor(){this.layers=new Array,this.preloading=-1,this.updating=!1}};var A0;let ke=A0=class extends ja.EventedMixin(Dm(Ne)){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.handles=new C9,this.updatingHandles=new ru,this.allLayerViews=new Ep({getCollections:()=>{var t,i,s;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,(i=this.groundView)==null?void 0:i.layerViews,this.layerViews,(s=this.basemapView)==null?void 0:s.referenceLayerViews]},getChildrenFunction:eZ}),this.groundView=null,this.basemapView=null,this.fatalError=null,this.graphics=new ou,this.analyses=new Ny,this.typeSpecificPreconditionsReady=!0,this.layerViews=new Oe,this.magnifier=new Ek,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new FK,this.navigation=new Rk,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new OK(this),this.persistableViewModels=new Oe,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this.theme=null,this.handles.add(Ge(()=>this.preconditionsReady,t=>{var i,s;t?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,A0.views.add(this)):(this._lockedSpatialReference=null,A0.views.remove(this)),this.notifyChange("spatialReference"),!t&&this.ready?((i=this.toolViewManager)==null||i.detach(),this.analysisViewManager!=null&&this.analysisViewManager.detach(),(s=this.layerViewManager)==null||s.clear(),this._teardown()):t&&!this.ready&&(this._startup(),this.analysisViewManager!=null&&this.analysisViewManager.attach(),this.toolViewManager.attach())},ku))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this.validate()]).then(()=>(this._isValid=!0,Mm(()=>this.ready)))),this.basemapView=new Bo({view:this}),this.layerViewManager=new EK({view:this,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new an({view:this}),this._setupSpatialReferenceLogger(),this.addHandles([Ge(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e},{sync:!0,initial:!0}),Ge(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},{sync:!0}),Ge(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},{sync:!0,initial:!0})])}_setupSpatialReferenceLogger(){let e=null;this.addHandles([Ge(()=>{var t;return(t=this.defaultsFromMap)==null?void 0:t.ready},t=>{var s;const i=((s=this.map)==null?void 0:s.allLayers.length)>0;if(t&&!this.spatialReference&&i){if(e!=null)return;const u=Et(()=>e=bp(e));e=b5(async d=>{try{await JS(this.spatialReferenceWarningDelay,null,d)}catch{return}finally{e=null}de.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),this.addHandles(u,"spatial-reference-logger-task")}else this.removeHandles("spatial-reference-logger-task")},{sync:!0})])}destroy(){var e,t;this.destroyed||(A0.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=Ot(this.graphics),this.analyses=Ot(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),Ot(this.analysisViewManager),this.toolViewManager=Ot(this.toolViewManager),this.layerViewManager=Ot(this.layerViewManager),this.basemapView=Ot(this.basemapView),(e=this.groundView)==null||e.destroy(),(t=this.layerViews)==null||t.forEach(i=>i.destroy()),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.destroy(),this.map=Ot(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return de.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){var e;return(e=this.toolViewManager)==null?void 0:e.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get center(){return null}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new bt({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:e=>this.getSpatialReferenceSupport(e),...this._defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){var e;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||yo.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!((e=this.defaultsFromMap)!=null&&e.ready)||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){e!==this._get("map")&&(e!=null&&e.destroyed&&(de.getLogger(this).warn("#map","The provided map is already destroyed",{map:e}),e=null),yo.isLoadable(e)&&e.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",e))}get spatialReference(){var t,i;let e=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;return e&&((i=(t=this.defaultsFromMap)==null?void 0:t.required)!=null&&i.heightModelInfo)&&(e=e.clone(),e.vcsWkid=this.defaultsFromMap.vcsWkid,e.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),e}set spatialReference(e){const t=!Xt(e,this._get("spatialReference"));this._set("_userSpatialReference",e),t&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??xn}set timeZone(e){const t=new Set(["etc/utc","etc/gmt","gmt"]),i=new Set(Intl.supportedValuesOf("timeZone").map(s=>s.toLowerCase()));this._userTimeZone=e,e===xn||e===mu||t.has(e.toLowerCase())||i.has(e.toLowerCase())||de.getLogger(this).warn("#timeZone",`the parsed value '${e}' may not be a valid IANA time zone`)}get tools(){var e;return(e=this.toolViewManager)==null?void 0:e.tools}get initialExtent(){var e;return(e=this.defaultsFromMap)==null?void 0:e.extent}get cursor(){var e;return((e=this.toolViewManager)==null?void 0:e.cursor)??this._cursor??"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new E3}whenLayerView(e){var t;return((t=this.layerViewManager)==null?void 0:t.whenLayerView(e))??Promise.reject()}getDefaultSpatialReference(){var e;return(e=this.defaultsFromMap)==null?void 0:e.spatialReference}getDefaultHeightModelInfo(){var e;return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??((e=this.defaultsFromMap)==null?void 0:e.heightModelInfo)??null}getDefaultTimeZone(){return null}importLayerView(e){throw new ae("importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}async loadAsyncDependencies(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return this.getSpatialReferenceSupport({spatialReference:e})!=null}when(e,t){return this.isResolved()&&!this.ready&&de.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,t)}forceReadyCycle(){this.ready&&(yu(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}};ke.views=new Oe,w([S()],ke.prototype,"_userSpatialReference",void 0),w([S()],ke.prototype,"activeTool",null),w([S({readOnly:!0})],ke.prototype,"allLayerViews",void 0),w([S()],ke.prototype,"groundView",void 0),w([S()],ke.prototype,"animation",null),w([S()],ke.prototype,"basemapView",void 0),w([S()],ke.prototype,"center",null),w([S({readOnly:!0})],ke.prototype,"_defaultsFromMapSettings",null),w([S()],ke.prototype,"defaultsFromMap",null),w([S()],ke.prototype,"fatalError",void 0),w([S({type:Tt})],ke.prototype,"extent",null),w([S(_w(ou,"graphics"))],ke.prototype,"graphics",void 0),w([S(_w(Ny,"analyses"))],ke.prototype,"analyses",void 0),w([S({readOnly:!0,type:qm})],ke.prototype,"heightModelInfo",null),w([S({readOnly:!0})],ke.prototype,"interacting",null),w([S({readOnly:!0})],ke.prototype,"navigating",null),w([S({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],ke.prototype,"preconditionsReady",null),w([S({readOnly:!0})],ke.prototype,"typeSpecificPreconditionsReady",void 0),w([S({type:Oe,readOnly:!0})],ke.prototype,"layerViews",void 0),w([S()],ke.prototype,"resolution",null),w([S({type:Ek})],ke.prototype,"magnifier",void 0),w([S({value:null,type:ME})],ke.prototype,"map",null),w([S()],ke.prototype,"padding",void 0),w([S({readOnly:!0})],ke.prototype,"ready",void 0),w([S({type:He})],ke.prototype,"spatialReference",null),w([S()],ke.prototype,"spatialReferenceWarningDelay",void 0),w([S()],ke.prototype,"stationary",null),w([S({readOnly:!0})],ke.prototype,"supportsGround",void 0),w([S({type:Tn})],ke.prototype,"timeExtent",void 0),w([S({type:String,nonNullable:!0})],ke.prototype,"timeZone",null),w([S()],ke.prototype,"tools",null),w([S()],ke.prototype,"toolViewManager",void 0),w([S({readOnly:!0})],ke.prototype,"type",void 0),w([S({type:Number})],ke.prototype,"scale",void 0),w([S({readOnly:!0})],ke.prototype,"updating",void 0),w([S({readOnly:!0})],ke.prototype,"initialExtentRequired",void 0),w([S({readOnly:!0})],ke.prototype,"initialExtent",null),w([S()],ke.prototype,"cursor",null),w([S({readOnly:!0})],ke.prototype,"input",void 0),w([S({type:Rk,nonNullable:!0})],ke.prototype,"navigation",void 0),w([S()],ke.prototype,"layerViewManager",void 0),w([S()],ke.prototype,"analysisViewManager",void 0),w([S()],ke.prototype,"width",void 0),w([S()],ke.prototype,"height",void 0),w([S({readOnly:!0})],ke.prototype,"resizing",void 0),w([S({value:null,readOnly:!0})],ke.prototype,"size",null),w([S({readOnly:!0})],ke.prototype,"suspended",void 0),w([S({readOnly:!0})],ke.prototype,"viewEvents",void 0),w([S({readOnly:!0})],ke.prototype,"persistableViewModels",void 0),w([S()],ke.prototype,"_isValid",void 0),w([S()],ke.prototype,"_readyCycleForced",void 0),w([S()],ke.prototype,"_lockedSpatialReference",void 0),w([S()],ke.prototype,"_userTimeZone",void 0),w([S()],ke.prototype,"_lockedTimeZone",void 0),w([S({type:E3})],ke.prototype,"theme",void 0),w([S({readOnly:!0,type:E3})],ke.prototype,"effectiveTheme",null),ke=A0=w([B("esri.views.View")],ke);const QK=ke;function eZ(e){return e.layerViews}let Wo=class extends Oy{constructor(t){super(t),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=ts(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){var t;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),(t=this._resolver)==null||t.reject(new ae("ViewAnimation stopped")))}finish(){var t;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),(t=this._resolver)==null||t.resolve())}update(t,i){i||(i=Oa(t)?"waiting-for-target":"running"),this._set("target",t),this._set("state",i)}};w([S({readOnly:!0})],Wo.prototype,"done",null),w([S({readOnly:!0,type:String})],Wo.prototype,"state",void 0),w([S()],Wo.prototype,"target",void 0),Wo=w([B("esri.views.ViewAnimation")],Wo),function(e){e.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(Wo||(Wo={}));const O3=Wo;function Dl(e,t,i,s){const u=3*e,d=3*(i-e)-u,y=1-u-d,v=3*t,_=3*(s-t)-v,M=1-v-_;function E(L){return((y*L+d)*L+u)*L}function O(L){return((M*L+_)*L+v)*L}function C(L){return(3*y*L+2*d)*L+u}function R(L,G){let U,K,ee,Q,re,ne;for(ee=L,ne=0;ne<8;ne++){if(Q=E(ee)-L,Math.abs(Q)<G)return ee;if(re=C(ee),Math.abs(re)<1e-6)break;ee-=Q/re}if(U=0,K=1,ee=L,ee<U)return U;if(ee>K)return K;for(;U<K;){if(Q=E(ee),Math.abs(Q-L)<G)return ee;L>Q?U=ee:K=ee,ee=.5*(K-U)+U}return ee}return function(L,G=1e-6){return O(R(L,G))}}const tZ=/^cubic-bezier\((.*)\)/,Kr={};function iZ(e){let t=Kr[e]||null;if(!t){const i=tZ.exec(e);if(i){const s=i[1].split(",").map(u=>parseFloat(u.trim()));s.length!==4||s.some(u=>isNaN(u))||(t=Dl.apply(Dl,s))}}return t}Kr.ease=Dl(.25,.1,.25,1),Kr.linear=Dl(0,0,1,1),Kr.easeIn=Kr["ease-in"]=Dl(.42,0,1,1),Kr.easeOut=Kr["ease-out"]=Dl(0,0,.58,1),Kr.easeInOut=Kr["ease-in-out"]=Dl(.42,0,.58,1);function rZ(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function sZ(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function nZ(e,t,i,s,u,d,y){return e[0]=t,e[1]=i,e[2]=s,e[3]=u,e[4]=d,e[5]=y,e}function m4(e,t){const i=t[0],s=t[1],u=t[2],d=t[3],y=t[4],v=t[5];let _=i*d-s*u;return _?(_=1/_,e[0]=d*_,e[1]=-s*_,e[2]=-u*_,e[3]=i*_,e[4]=(u*v-d*y)*_,e[5]=(s*y-i*v)*_,e):null}function oZ(e){return e[0]*e[3]-e[1]*e[2]}function Bk(e,t,i){const s=t[0],u=t[1],d=t[2],y=t[3],v=t[4],_=t[5],M=i[0],E=i[1],O=i[2],C=i[3],R=i[4],L=i[5];return e[0]=s*M+d*E,e[1]=u*M+y*E,e[2]=s*O+d*C,e[3]=u*O+y*C,e[4]=s*R+d*L+v,e[5]=u*R+y*L+_,e}function Ym(e,t,i){const s=t[0],u=t[1],d=t[2],y=t[3],v=t[4],_=t[5],M=Math.sin(i),E=Math.cos(i);return e[0]=s*E+d*M,e[1]=u*E+y*M,e[2]=s*-M+d*E,e[3]=u*-M+y*E,e[4]=v,e[5]=_,e}function g4(e,t,i){const s=t[0],u=t[1],d=t[2],y=t[3],v=t[4],_=t[5],M=i[0],E=i[1];return e[0]=s*M,e[1]=u*M,e[2]=d*E,e[3]=y*E,e[4]=v,e[5]=_,e}function Vp(e,t,i){const s=t[0],u=t[1],d=t[2],y=t[3],v=t[4],_=t[5],M=i[0],E=i[1];return e[0]=s,e[1]=u,e[2]=d,e[3]=y,e[4]=s*M+d*E+v,e[5]=u*M+y*E+_,e}function Hk(e,t){const i=Math.sin(t),s=Math.cos(t);return e[0]=s,e[1]=i,e[2]=-i,e[3]=s,e[4]=0,e[5]=0,e}function Wk(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function v4(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function aZ(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function lZ(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+1)}function uZ(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e}function Jk(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e}function hZ(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e}function cZ(e,t,i,s){return e[0]=t[0]+i[0]*s,e[1]=t[1]+i[1]*s,e[2]=t[2]+i[2]*s,e[3]=t[3]+i[3]*s,e[4]=t[4]+i[4]*s,e[5]=t[5]+i[5]*s,e}function pZ(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function dZ(e,t){const i=e[0],s=e[1],u=e[2],d=e[3],y=e[4],v=e[5],_=t[0],M=t[1],E=t[2],O=t[3],C=t[4],R=t[5],L=ss();return Math.abs(i-_)<=L*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(s-M)<=L*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(u-E)<=L*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(d-O)<=L*Math.max(1,Math.abs(d),Math.abs(O))&&Math.abs(y-C)<=L*Math.max(1,Math.abs(y),Math.abs(C))&&Math.abs(v-R)<=L*Math.max(1,Math.abs(v),Math.abs(R))}const fZ=Bk,yZ=Jk;Object.freeze(Object.defineProperty({__proto__:null,add:uZ,copy:rZ,determinant:oZ,equals:dZ,exactEquals:pZ,frob:lZ,fromRotation:Hk,fromScaling:Wk,fromTranslation:v4,identity:sZ,invert:m4,mul:fZ,multiply:Bk,multiplyScalar:hZ,multiplyScalarAndAdd:cZ,rotate:Ym,scale:g4,set:nZ,str:aZ,sub:yZ,subtract:Jk,translate:Vp},Symbol.toStringTag,{value:"Module"}));function ba(){return[1,0,0,1,0,0]}function mZ(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function gZ(e,t,i,s,u,d){return[e,t,i,s,u,d]}function vZ(e,t){return new Float64Array(e,t,6)}Object.freeze(Object.defineProperty({__proto__:null,clone:mZ,create:ba,createView:vZ,fromValues:gZ},Symbol.toStringTag,{value:"Module"}));function Gp(e,t){return e[0]=t[0],e[1]=t[1],e}function _i(e,t,i){return e[0]=t,e[1]=i,e}function Kk(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e}function qp(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e}function Zk(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e}function Yk(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e}function wZ(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function bZ(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function _Z(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e}function xZ(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e}function SZ(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function fd(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e}function $Z(e,t,i,s){return e[0]=t[0]+i[0]*s,e[1]=t[1]+i[1]*s,e}function Xm(e,t){const i=t[0]-e[0],s=t[1]-e[1];return Math.sqrt(i*i+s*s)}function Gy(e,t){const i=t[0]-e[0],s=t[1]-e[1];return i*i+s*s}function qy(e){const t=e[0],i=e[1];return Math.sqrt(t*t+i*i)}function Xk(e){const t=e[0],i=e[1];return t*t+i*i}function Qk(e,t){return e[0]=-t[0],e[1]=-t[1],e}function TZ(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function P3(e,t){const i=t[0],s=t[1];let u=i*i+s*s;return u>0&&(u=1/Math.sqrt(u),e[0]=t[0]*u,e[1]=t[1]*u),e}function eA(e,t){return e[0]*t[0]+e[1]*t[1]}function tA(e,t,i){const s=t[0]*i[1]-t[1]*i[0];return e[0]=e[1]=0,e[2]=s,e}function MZ(e,t,i,s){const u=t[0],d=t[1];return e[0]=u+s*(i[0]-u),e[1]=d+s*(i[1]-d),e}function IZ(e,t){t=t||1;const i=2*wm()*Math.PI;return e[0]=Math.cos(i)*t,e[1]=Math.sin(i)*t,e}function EZ(e,t,i){const s=t[0],u=t[1];return e[0]=i[0]*s+i[2]*u,e[1]=i[1]*s+i[3]*u,e}function ks(e,t,i){const s=t[0],u=t[1];return e[0]=i[0]*s+i[2]*u+i[4],e[1]=i[1]*s+i[3]*u+i[5],e}function kZ(e,t,i){const s=t[0],u=t[1];return e[0]=i[0]*s+i[3]*u+i[6],e[1]=i[1]*s+i[4]*u+i[7],e}function AZ(e,t,i){const s=t[0],u=t[1];return e[0]=i[0]*s+i[4]*u+i[12],e[1]=i[1]*s+i[5]*u+i[13],e}function OZ(e,t,i,s){const u=t[0]-i[0],d=t[1]-i[1],y=Math.sin(s),v=Math.cos(s);return e[0]=u*v-d*y+i[0],e[1]=u*y+d*v+i[1],e}function PZ(e,t){const i=e[0],s=e[1],u=t[0],d=t[1];let y=i*i+s*s;y>0&&(y=1/Math.sqrt(y));let v=u*u+d*d;v>0&&(v=1/Math.sqrt(v));const _=(i*u+s*d)*y*v;return _>1?0:_<-1?Math.PI:Math.acos(_)}function CZ(e){return"vec2("+e[0]+", "+e[1]+")"}function jZ(e,t){return e[0]===t[0]&&e[1]===t[1]}function NZ(e,t){const i=e[0],s=e[1],u=t[0],d=t[1],y=ss();return Math.abs(i-u)<=y*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(s-d)<=y*Math.max(1,Math.abs(s),Math.abs(d))}function RZ(e,t,i,s,u){let d=t[0]-i[0],y=t[1]-i[1];const v=(s[0]*d+s[1]*y)*(u-1);return d=s[0]*v,y=s[1]*v,e[0]=t[0]+d,e[1]=t[1]+y,e}const LZ=qy,w4=qp,DZ=Zk,FZ=Yk,zZ=Xm,VZ=Gy,GZ=Xk;Object.freeze(Object.defineProperty({__proto__:null,add:Kk,angle:PZ,ceil:wZ,copy:Gp,cross:tA,dist:zZ,distance:Xm,div:FZ,divide:Yk,dot:eA,equals:NZ,exactEquals:jZ,floor:bZ,inverse:TZ,len:LZ,length:qy,lerp:MZ,max:xZ,min:_Z,mul:DZ,multiply:Zk,negate:Qk,normalize:P3,projectAndScale:RZ,random:IZ,rotate:OZ,round:SZ,scale:fd,scaleAndAdd:$Z,set:_i,sqrDist:VZ,sqrLen:GZ,squaredDistance:Gy,squaredLength:Xk,str:CZ,sub:w4,subtract:qp,transformMat2:EZ,transformMat2d:ks,transformMat3:kZ,transformMat4:AZ},Symbol.toStringTag,{value:"Module"}));function Zt(){return[0,0]}function qZ(e){return[e[0],e[1]]}function yd(e,t){return[e,t]}function UZ(e,t=Zt()){const i=Math.min(2,e.length);for(let s=0;s<i;++s)t[s]=e[s];return t}function BZ(e,t){return new Float64Array(e,t,2)}function iA(){return Zt()}function rA(){return yd(1,1)}function sA(){return yd(1,0)}function nA(){return yd(0,1)}const HZ=iA(),WZ=rA(),JZ=sA(),KZ=nA();Object.freeze(Object.defineProperty({__proto__:null,ONES:WZ,UNIT_X:JZ,UNIT_Y:KZ,ZEROS:HZ,clone:qZ,create:Zt,createView:BZ,fromArray:UZ,fromValues:yd,ones:rA,unitX:sA,unitY:nA,zeros:iA},Symbol.toStringTag,{value:"Module"}));const hf={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new Cs({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:He.WebMercator}),minus180Line:new Cs({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:He.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new Cs({paths:[[[180,-180],[180,180]]],spatialReference:He.WGS84}),minus180Line:new Cs({paths:[[[-180,-180],[-180,180]]],spatialReference:He.WGS84})}};function Xl(e,t){return Math.ceil((e-t)/(2*t))}function oA(e,t){const i=mp(e);for(const s of i)for(const u of s)u[0]+=t;return e}function mp(e){return Uh(e)?e.rings:e.paths}function Vce(e,t){return t?{...t,query:{...e??{},...t.query}}:{query:e}}function ZZ(e){return typeof e=="string"?Ai(e):ie(e)}function YZ(e,t,i){const s={};for(const u in e){if(u==="declaredClass")continue;const d=e[u];if(d!=null&&typeof d!="function")if(Array.isArray(d)){s[u]=[];for(let y=0;y<d.length;y++)s[u][y]=YZ(d[y])}else if(typeof d=="object")if(d.toJSON){const y=d.toJSON(i==null?void 0:i[u]);s[u]=t?y:JSON.stringify(y)}else s[u]=t?d:JSON.stringify(d);else s[u]=d}return s}async function XZ(e,t,i,s){const u=ZZ(e),d=t[0].spatialReference,y={...s,responseType:"json",query:{...u.query,f:"json",sr:gT(d),target:JSON.stringify({geometryType:m5(t[0]),geometries:t}),cutter:JSON.stringify(i)}},v=await Yt(u.path+"/cut",y),{cutIndexes:_,geometries:M=[]}=v.data;return{cutIndexes:_,geometries:M.map(E=>{const O=$a(E);return O.spatialReference=d,O})}}function QZ(e){return{geometryType:m5(e[0]),geometries:e.map(t=>t.toJSON())}}function eY(e,t,i){const s=UF(t);return e.map(u=>{const d=s.fromJSON(u);return d.spatialReference=i,d})}async function tY(e,t,i){const s=typeof e=="string"?Ai(e):e,u=t[0].spatialReference,d=m5(t[0]),y={...i,query:{...s.query,f:"json",sr:gT(u),geometries:JSON.stringify(QZ(t))}},{data:v}=await Yt(s.path+"/simplify",y);return eY(v.geometries,d,u)}const aA=de.getLogger("esri.geometry.support.normalizeUtils");function iY(e){return e.type==="polygon"}function rY(e){return e[0].type==="polygon"}function sY(e){return e[0].type==="polyline"}function Q7(e){const t=[];let i=0,s=0;for(let u=0;u<e.length;u++){const d=e[u];let y=null;for(let v=0;v<d.length;v++)y=d[v],t.push(y),v===0?(i=y[0],s=i):(i=Math.min(i,y[0]),s=Math.max(s,y[0]));y&&t.push([(i+s)/2,0])}return t}function nY(e,t){if(!(e instanceof Cs||e instanceof po)){const u="straightLineDensify: the input geometry is neither polyline nor polygon";throw aA.error(u),new ae(u)}const i=mp(e),s=[];for(const u of i){const d=[];s.push(d),d.push([u[0][0],u[0][1]]);for(let y=0;y<u.length-1;y++){const v=u[y][0],_=u[y][1],M=u[y+1][0],E=u[y+1][1],O=Math.sqrt((M-v)*(M-v)+(E-_)*(E-_)),C=(E-_)/O,R=(M-v)/O,L=O/t;if(L>1){for(let ee=1;ee<=L-1;ee++){const Q=ee*t,re=R*Q+v,ne=C*Q+_;d.push([re,ne])}const G=(O+Math.floor(L-1)*t)/2,U=R*G+v,K=C*G+_;d.push([U,K])}d.push([M,E])}}return iY(e)?new po({rings:s,spatialReference:e.spatialReference}):new Cs({paths:s,spatialReference:e.spatialReference})}function ex(e,t,i){if(t){const s=nY(e,1e6);e=Ch(s,!0)}return i&&(e=oA(e,i)),e}function tx(e,t,i){if(Array.isArray(e)){const s=e[0];if(s>t){const u=Xl(s,t);e[0]=s+u*(-2*t)}else if(s<i){const u=Xl(s,i);e[0]=s+u*(-2*i)}}else{const s=e.x;if(s>t){const u=Xl(s,t);e=e.clone().offset(u*(-2*t),0)}else if(s<i){const u=Xl(s,i);e=e.clone().offset(u*(-2*i),0)}}return e}function oY(e,t){let i=-1;for(let s=0;s<t.cutIndexes.length;s++){const u=t.cutIndexes[s],d=t.geometries[s],y=mp(d);for(let v=0;v<y.length;v++){const _=y[v];_.some(M=>{if(M[0]<180)return!0;{let E=0;for(let C=0;C<_.length;C++){const R=_[C][0];E=R>E?R:E}E=Number(E.toFixed(9));const O=-360*Xl(E,180);for(let C=0;C<_.length;C++){const R=d.getPoint(v,C);d.setPoint(v,C,R.clone().offset(O,0))}return!0}})}if(u===i){if(rY(e))for(const v of mp(d))e[u]=e[u].addRing(v);else if(sY(e))for(const v of mp(d))e[u]=e[u].addPath(v)}else i=u,e[u]=d}return e}async function aY(e,t,i){if(!Array.isArray(e))return aY([e],t);t&&typeof t!="string"&&aA.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const s=typeof t=="string"?t:(t==null?void 0:t.url)??at.geometryServiceUrl;let u,d,y,v,_,M,E,O,C=0;const R=[],L=[];for(const re of e)if(re!=null)if(u||(u=re.spatialReference,d=Or(u),y=u.isWebMercator,M=y?102100:4326,v=hf[M].maxX,_=hf[M].minX,E=hf[M].plus180Line,O=hf[M].minus180Line),d)if(re.type==="mesh")L.push(re);else if(re.type==="point")L.push(tx(re.clone(),v,_));else if(re.type==="multipoint"){const ne=re.clone();ne.points=ne.points.map(le=>tx(le,v,_)),L.push(ne)}else if(re.type==="extent"){const ne=re.clone()._normalize(!1,!1,d);L.push(ne.rings?new po(ne):ne)}else if(re.extent){const ne=re.extent,le=Xl(ne.xmin,_)*(2*v);let ve=le===0?re.clone():oA(re.clone(),le);ne.offset(le,0),ne.intersects(E)&&ne.xmax!==v?(C=ne.xmax>C?ne.xmax:C,ve=ex(ve,y),R.push(ve),L.push("cut")):ne.intersects(O)&&ne.xmin!==_?(C=ne.xmax*(2*v)>C?ne.xmax*(2*v):C,ve=ex(ve,y,360),R.push(ve),L.push("cut")):L.push(ve)}else L.push(re.clone());else L.push(re);else L.push(re);let G=Xl(C,v),U=-90;const K=G,ee=new Cs;for(;G>0;){const re=360*G-180;ee.addPath([[re,U],[re,-1*U]]),U*=-1,G--}if(R.length>0&&K>0){const re=oY(R,await XZ(s,R,ee,i)),ne=[],le=[];for(let Ee=0;Ee<L.length;Ee++){const Me=L[Ee];if(Me!=="cut")le.push(Me);else{const Le=re.shift(),Fe=e[Ee];Fe!=null&&Fe.type==="polygon"&&Fe.rings&&Fe.rings.length>1&&Le.rings.length>=Fe.rings.length?(ne.push(Le),le.push("simplify")):le.push(y?tu(Le):Le)}}if(!ne.length)return le;const ve=await tY(s,ne,i),we=[];for(let Ee=0;Ee<le.length;Ee++){const Me=le[Ee];Me!=="simplify"?we.push(Me):we.push(y?tu(ve.shift()):ve.shift())}return we}const Q=[];for(let re=0;re<L.length;re++){const ne=L[re];if(ne!=="cut")Q.push(ne);else{const le=R.shift();Q.push(y===!0?tu(le):le)}}return Q}function lY(e){if(!e)return null;const t=e.extent;if(!t)return null;const i=e.spatialReference&&Or(e.spatialReference);if(!i)return t;const[s,u]=i.valid,d=2*u,{width:y}=t;let v,{xmin:_,xmax:M}=t;if([_,M]=[M,_],e.type==="extent"||y===0||y<=u||y>d||_<s||M>u)return t;switch(e.type){case"polygon":if(!(e.rings.length>1))return t;v=Q7(e.rings);break;case"polyline":if(!(e.paths.length>1))return t;v=Q7(e.paths);break;case"multipoint":v=e.points}const E=t.clone();for(let O=0;O<v.length;O++){let C=v[O][0];C<0?(C+=u,M=Math.max(C,M)):(C-=u,_=Math.min(C,_))}return E.xmin=_,E.xmax=M,E.width<y?(E.xmin-=u,E.xmax-=u,E):t}function lA(e,t,i){const s=Or(i);if(s==null)return e;const[u,d]=s.valid,y=2*d;let v=0,_=0;t>d?v=Math.ceil(Math.abs(t-d)/y):t<u&&(v=-Math.ceil(Math.abs(t-u)/y)),e>d?_=Math.ceil(Math.abs(e-d)/y):e<u&&(_=-Math.ceil(Math.abs(e-u)/y));let M=e+(v-_)*y;const E=M-t;return E>d?M-=y:E<u&&(M+=y),M}function Gce(e,t){const i=Or(t);if(i){const[s,u]=i.valid,d=u-s;if(e<s)for(;e<s;)e+=d;if(e>u)for(;e>u;)e-=d}return e}const uA=96,hA=39.37,uY=180/Math.PI;function cA(e){return e.wkid?e:e.spatialReference||He.WGS84}function b4(e,t){return t.type?_i(e,t.x,t.y):Gp(e,t)}function pA(e){return Iu(e)}function Kh(e,t){const i=Math.max(1,t[0]),s=Math.max(1,t[1]);return Math.max(e.width/i,e.height/s)*vY(e.spatialReference)}async function O0(e,t,i,s){var v,_;let u,d;if(!e||Array.isArray(e)&&!e.length)return null;if(Oe.isCollection(e)&&(e=e.toArray()),Array.isArray(e)&&e.length&&typeof e[0]=="object"){const M=e.every(C=>"attributes"in C),E=e.some(C=>!C.geometry);let O=e;if(M&&E&&t&&t.allLayerViews){const C=new Map;for(const U of e){const K=U.layer,ee=C.get(K)||[],Q=U.attributes[K.objectIdField];Q!=null&&ee.push(Q),C.set(K,ee)}const R=[];C.forEach((U,K)=>{const ee=t.allLayerViews.find(Q=>Q.layer.id===K.id);if(ee&&"queryFeatures"in ee){const Q=K.createQuery();Q.objectIds=U,Q.returnGeometry=!0,R.push(ee.queryFeatures(Q))}});const L=await Promise.all(R),G=[];for(const U of L)if(U&&U.features&&U.features.length)for(const K of U.features)K.geometry!=null&&G.push(K.geometry);O=G}for(const C of O)s=await O0(C,t,i,s);return s}if(Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number")u=new Je(e);else if(e instanceof Ca)u=e;else if("geometry"in e){if(e.geometry)u=e.geometry;else if(e.layer){const M=e.layer,E=t.allLayerViews.find(O=>O.layer.id===M.id);if(E&&"queryFeatures"in E){const O=M.createQuery();O.objectIds=[e.attributes[M.objectIdField]],O.returnGeometry=!0;const C=await E.queryFeatures(O);u=(_=(v=C==null?void 0:C.features)==null?void 0:v[0])==null?void 0:_.geometry}}}if(u==null)return null;switch(u.type){case"point":d=new Tt({xmin:u.x,ymin:u.y,xmax:u.x,ymax:u.y,spatialReference:u.spatialReference});break;case"extent":case"multipoint":case"polygon":case"polyline":d=lY(u);break;default:d=u.extent}if(!d)return null;Ou()||fo(d.spatialReference,i)||await Ea();const y=Na(d,i);return y?s=s?s.union(y):y:null}function hY(e){var t;if(e&&(!Array.isArray(e)||typeof e[0]!="number")&&(typeof e=="object"||Array.isArray(e)&&typeof e[0]=="object")){if("layer"in e&&((t=e.layer)==null?void 0:t.minScale)!=null&&e.layer.maxScale!=null){const i=e.layer;return{min:i.minScale,max:i.maxScale}}if(Array.isArray(e)&&e.length&&e.every(i=>"layer"in i)){let i=0,s=0;for(const u of e){const d=u.layer;d!=null&&d.minScale&&d.maxScale&&(i=d.minScale<i?d.minScale:i,s=d.maxScale>s?d.maxScale:s)}return i&&s?{min:i,max:s}:null}}}function v2(e,t){return Xt(cA(e),t)?e:Na(e,t)}async function cY(e,t){var G;if(!e||!t)return new vn({targetGeometry:new Je,scale:0,rotation:0});let i=t.spatialReference;const{constraints:s,padding:u,viewpoint:d,size:y}=t,v=[u?y[0]-u.left-u.right:y[0],u?y[1]-u.top-u.bottom:y[1]];let _=null;e instanceof vn?_=e:e.viewpoint?_=e.viewpoint:e.target&&e.target.declaredClass==="esri.Viewpoint"&&(_=e.target);let M=null;_!=null&&_.targetGeometry?M=_.targetGeometry:e instanceof Tt?M=e:(e||e&&("center"in e||"extent"in e||"target"in e))&&(M=await O0(e.center,t,i)||await O0(e.extent,t,i)||await O0(e.target,t,i)||await O0(e,t,i)),!M&&(d!=null&&d.targetGeometry)?M=d.targetGeometry:!M&&t.extent&&(M=t.extent),i||(i=cA(t.spatialReference||t.extent||M)),Ou()||Xt(M.spatialReference,i)||fo(M.spatialReference,i)||await Ea();const E=v2("center"in M?M.center:M,i);t.pickClosestTarget!==!1&&E.type==="point"&&((G=d.targetGeometry)==null?void 0:G.type)==="point"&&(E.x=lA(E.x,d.targetGeometry.x,E.spatialReference));let O=0;if((_==null?void 0:_.targetGeometry)!=null&&_.targetGeometry.type==="point")O=_.scale;else if("scale"in e&&e.scale)O=e.scale;else if("zoom"in e&&e.zoom!==-1&&s&&s.effectiveLODs)O=s.zoomToScale(e.zoom);else if(Array.isArray(M)||M.type==="point"||M.type==="extent"&&M.width===0&&M.height===0){const U=v2(t.extent,i);O=U!=null?Kh(U,v):t.extent?Kh(t.extent,v):d.scale}else O=Kh(v2(M.extent,i),v);const C=hY(e.target??e);C&&(C.min&&C.min<O?O=C.min:C.max&&C.max>O&&(O=C.max));let R=0;_?R=_.rotation:e.hasOwnProperty("rotation")?R=e.rotation:d&&(R=d.rotation);let L=new vn({targetGeometry:E,scale:O,rotation:R});return s&&(L=s.fit(L),s.constrainByGeometry(L),s.rotationEnabled||(L.rotation=d.rotation)),L}function Gs(e,t){const i=e.targetGeometry,s=t.targetGeometry;return i.x=s.x,i.y=s.y,i.spatialReference=s.spatialReference,e.scale=t.scale,e.rotation=t.rotation,e}function pY(e,t,i){return i?_i(e,.5*(t[0]-i.right+i.left),.5*(t[1]-i.bottom+i.top)):fd(e,t,.5)}const dY=function(){const e=Zt();return function(t,i,s){const u=i.targetGeometry;b4(e,u);const d=.5*Ac(i);return t.xmin=e[0]-d*s[0],t.ymin=e[1]-d*s[1],t.xmax=e[0]+d*s[0],t.ymax=e[1]+d*s[1],t.spatialReference=u.spatialReference,t}}();function fY(e,t,i,s,u){var d;return C3(e,t,i.center),e.scale=Kh(i,s),(d=u==null?void 0:u.constraints)==null||d.constrain(e),e}function yY(e,t,i,s){return S4(e,t,i,s),m4(e,e)}const dA=function(){const e=Zt();return function(t,i,s){return w4(t,wY(t,i),pY(e,i,s))}}(),mY=function(){const e=ba(),t=Zt();return function(i,s,u,d){const y=Ac(s),v=_4(s);return _i(t,y,y),Wk(e,t),Ym(e,e,v),Vp(e,e,dA(t,u,d)),Vp(e,e,[0,d.top-d.bottom]),_i(i,e[4],e[5])}}();function Ac(e){return e.scale*gY(e.targetGeometry)}function gY(e){return e!=null&&Si(e.spatialReference)?1/(pA(e.spatialReference)*hA*uA):1}function _4(e){return q9(e.rotation)||0}function vY(e){return Si(e)?pA(e)*hA*uA:1}function wY(e,t){return fd(e,t,.5)}const x4=function(){const e=Zt(),t=Zt(),i=Zt();return function(s,u,d,y,v,_){return Qk(e,u),fd(t,d,.5*_),_i(i,1/y*_,-1/y*_),v4(s,t),v&&Ym(s,s,v),g4(s,s,i),Vp(s,s,e),s}}(),S4=function(){const e=Zt();return function(t,i,s,u){const d=Ac(i),y=_4(i);return b4(e,i.targetGeometry),x4(t,e,s,d,y,u)}}(),bY=function(){const e=Zt();return function(t,i,s,u){const d=Ac(i);return b4(e,i.targetGeometry),x4(t,e,s,d,0,u)}}();function _Y(e){const t=Or(e);return t?t.valid[1]-t.valid[0]:0}function xY(e,t){return Math.round(_Y(e)/t)}const SY=function(){const e=Zt(),t=Zt(),i=[0,0,0];return function(s,u,d){qp(e,s,u),P3(e,e),qp(t,s,d),P3(t,t),tA(i,e,t);let y=Math.acos(eA(e,t)/(qy(e)*qy(t)))*uY;return i[2]<0&&(y=-y),isNaN(y)&&(y=0),y}}(),$Y=function(){const e=Zt();return function(t,i,s,u){const d=t.targetGeometry;return Gs(t,i),mY(e,i,s,u),d.x+=e[0],d.y+=e[1],t}}(),C3=function(e,t,i){Gs(e,t);const s=e.targetGeometry;return s.x=i.x,s.y=i.y,s.spatialReference=i.spatialReference,e},TY=function(){const e=Zt();return function(t,i,s,u,d){d||(d="center"),w4(e,s,u),fd(e,e,.5);const y=e[0],v=e[1];switch(d){case"center":_i(e,0,0);break;case"left":_i(e,-y,0);break;case"top":_i(e,0,v);break;case"right":_i(e,y,0);break;case"bottom":_i(e,0,-v);break;case"top-left":_i(e,-y,v);break;case"bottom-left":_i(e,-y,-v);break;case"top-right":_i(e,y,v);break;case"bottom-right":_i(e,y,-v)}return Qm(t,i,e),t}}();function qce(e,t,i){return Gs(e,t),e.rotation+=i,e}function MY(e,t,i){return Gs(e,t),e.rotation=i,e}const IY=function(){const e=Zt();return function(t,i,s,u,d){return Gs(t,i),isNaN(s)||s===0||(yA(e,u,i,d),t.scale=i.scale*s,mA(e,e,t,d),Qm(t,t,_i(e,e[0]-u[0],u[1]-e[1]))),t}}();function ix(e,t,i){return Gs(e,t),e.scale=i,e}const fA=function(){const e=Zt();return function(t,i,s,u,d,y){return Gs(t,i),isNaN(s)||s===0||(yA(e,d,i,y),t.scale=i.scale*s,t.rotation+=u,mA(e,e,t,y),Qm(t,t,_i(e,e[0]-d[0],d[1]-e[1]))),t}}(),Uce=function(){const e=Zt(),t=Zt();return function(i,s,u,d,y,v,_){return dA(t,v,_),Kk(e,y,t),d?fA(i,s,u,d,e,v):IY(i,s,u,e,v)}}(),yA=function(){const e=ba();return function(t,i,s,u){return ks(t,i,yY(e,s,u,1))}}(),mA=function(){const e=ba();return function(t,i,s,u){return ks(t,i,S4(e,s,u,1))}}(),Qm=function(){const e=Zt(),t=ba();return function(i,s,u){Gs(i,s);const d=Ac(s),y=i.targetGeometry;return Hk(t,_4(s)),g4(t,t,yd(d,d)),ks(e,u,t),y.x+=e[0],y.y+=e[1],i}}();let EY=class{constructor(t,i,s,u){const d=t.targetGeometry,y=i.targetGeometry;u?typeof u=="string"&&(u=iZ(u)||Kr.ease):u=Kr.ease,this.easing=u,this.duration=s,this.sCenterX=d.x,this.sCenterY=d.y,this.sScale=t.scale,this.sRotation=t.rotation,this.tCenterX=y.x,this.tCenterY=y.y,this.tScale=i.scale,this.tRotation=i.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(t,i){const s=this.easing(i);let u,d,y,v;i>=1?(u=this.tCenterX,d=this.tCenterY,y=this.tRotation,v=this.tScale):(u=this.sCenterX+s*this.dCenterX,d=this.sCenterY+s*this.dCenterY,y=this.sRotation+s*this.dRotation,v=this.sScale+s*this.dScale),t.targetGeometry.x=u,t.targetGeometry.y=d,t.scale=v,t.rotation=y}},Gn=class extends Ne{constructor(t){super(t),this.updateFunction=null,this.animation=null,this.duration=200,this.transition=null,this.easing=Kr.ease,this.view=null,this.viewpoint=new vn({targetGeometry:new Je,scale:0,rotation:0}),this._updateTask=rc({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask=Kt(this._updateTask)}animate(t,i,s){this.stop();const u=this.viewpoint;Gs(u,i),this.transition=new EY(this.viewpoint,t.target,(s==null?void 0:s.duration)||this.duration,(s==null?void 0:s.easing)||this.easing);const d=()=>{var y,v;this.animation===t&&this._updateTask&&(t.state==="finished"&&((y=this.transition)==null||y.applyRatio(this.viewpoint,1),(v=this.view)!=null&&v.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return t.when(d,d),this._startTime=performance.now(),this._updateTask.resume(),this.animation=t,t}animateContinous(t,i){this.stop(),this.updateFunction=i,this.viewpoint=t;const s=new O3({target:t.clone()}),u=()=>{this.animation===s&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return s.when(u,u),this._startTime=performance.now(),this._updateTask.resume(),this.animation=s,s}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(t){var s,u;const i=this.animation;if(i&&i.state!==O3.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,t.deltaTime);else{const d=this.transition,y=(performance.now()-this._startTime)/d.duration,v=y>=1;d.applyRatio(this.viewpoint,y),v&&((s=this.animation)==null||s.finish())}(u=this.view)!=null&&u.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};w([S()],Gn.prototype,"animation",void 0),w([S()],Gn.prototype,"duration",void 0),w([S()],Gn.prototype,"transition",void 0),w([S()],Gn.prototype,"easing",void 0),w([S()],Gn.prototype,"view",void 0),w([S()],Gn.prototype,"viewpoint",void 0),Gn=w([B("esri.views.2d.AnimationManager")],Gn);const kY=Gn;let AY=class{constructor(t){this.view=t,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions)},this.update=()=>{var y,v;if(this._updateRequested=!1,(y=this.view)==null?void 0:y.destroyed)return;const{allLayerViews:i,graphicsView:s,labelManager:u,state:{id:d}}=this.view;i.forEach(this._updateLayerView,this),u!=null&&(u.lastUpdateId!==d&&(u.viewChange(),u.lastUpdateId=d),u.updateRequested&&u.processUpdate(this._updateParameters)),s!=null&&(s.lastUpdateId!==d&&(s.viewChange(),s.lastUpdateId=d),s.updateRequested&&s.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||((v=this._frameTaskHandle)==null||v.pause())}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;const t=this.view;this.stationary=t.stationary,this._updateParameters={state:t.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:t.renderingOptions},this._stationaryHandle=Ge(()=>t.stationary,i=>{this.stationary=i,this.requestFrame()}),this._frameTaskHandle=rc(this),this.requestUpdate()}stop(){var t;this._frameTaskHandle&&(this._updateRequested=!1,(t=this._stationaryHandle)==null||t.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(t){var u;if(!t.attached)return void this.requestUpdate();const i=this.view.state,s=t.lastUpdateId;s!=null&&(this.stationary||t.moving)||(t.moving=!0,t.moveStart()),s!==i.id&&t.viewChange(),this.stationary&&t.moving&&(t.moving=!1,t.moveEnd()),t.lastUpdateId=i.id,t.updateRequested&&t.processUpdate(this._updateParameters),"layerViews"in t&&((u=t.layerViews)==null||u.forEach(this._updateLayerView,this))}},v1=class extends Ne{constructor(t){super(t),this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(t,i){if(!t)return void de.getLogger(this).error("#goTo()","target cannot be null or undefined");this.view.animation&&(this.view.animation=null);const s=this._createAnimation();await Mm(()=>this.view.ready,i);const u={animate:!0,...i},{extent:d,spatialReference:y,size:v,viewpoint:_,constraints:M,padding:E,allLayerViews:O}=this.view,C=cY(t,{extent:d,spatialReference:y,size:v,viewpoint:_,constraints:M,padding:E,allLayerViews:O,pickClosestTarget:(i==null?void 0:i.pickClosestTarget)??!0});return s==null||s.update(C),this._gotoTask={},u.animate?this._gotoAnimated(C,u):this._gotoImmediate(C,u)}_gotoImmediate(t,i){const s=this._gotoTask,u=this.view.animation,d=t.then(y=>{if(Gt(i),s!==this._gotoTask)throw new ae("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=u.target=y,u.finish()});return this._cancellableGoTo(s,u,d)}_gotoAnimated(t,i){const s=this._gotoTask,u=this.view.animation;if(!u)return Promise.resolve();const d=t.then(y=>{if(Gt(i),s!==this._gotoTask)throw new ae("view:goto-interrupted","Goto was interrupted");return u.update(y),this.view.animationManager.animate(u,this.view.viewpoint,i),u.when().then(()=>{},()=>{})});return this._cancellableGoTo(s,u,d)}_createAnimation(){return this.view.animation&&!this.view.animation.done||(this.view.animation=new O3),this.view.animation}_cancellableGoTo(t,i,s){const u=()=>t===this._gotoTask;return s.finally(()=>{u()&&(i.done||i.stop(),this.view.animation=null)})}};w([S({constructOnly:!0})],v1.prototype,"view",void 0),v1=w([B("esri.views.2d.GoToManager")],v1);function Vt(){return Promise.all([Se(()=>import("./webglDeps-3f3a3d9f.js"),["assets/webglDeps-3f3a3d9f.js","assets/FramebufferObject-80159f0f.js","assets/Texture-d90263e2.js","assets/enums-bdecffa2.js","assets/ProgramTemplate-4339738f.js","assets/programUtils-bc6831b3.js","assets/NestedMap-1b5db22e.js"]),Se(()=>import("./mapViewDeps-4a36bfd0.js"),["assets/mapViewDeps-4a36bfd0.js","assets/ExpandedCIM-800e3b93.js","assets/BidiEngine-9a40f2f4.js","assets/visualVariablesUtils-1ef3f471.js","assets/OptimizedGeometry-d94e541f.js","assets/color-ebf39a9d.js","assets/enums-f1a6a48a.js","assets/enums-bdecffa2.js","assets/VertexElementDescriptor-2925c6af.js","assets/definitions-328d54fa.js","assets/GeometryUtils-984e8446.js","assets/utils-214f8e9b.js","assets/GeometryUtils-67cf8401.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-b480e172.js","assets/floatRGBA-028aa075.js","assets/imageUtils-8d55e5ea.js","assets/Container-85b121df.js","assets/Texture-d90263e2.js","assets/BufferPool-f5e44a0f.js","assets/AttributeStoreView-f57c4151.js","assets/TiledDisplayObject-2b64e00b.js","assets/WGLContainer-6804eac4.js","assets/FramebufferObject-80159f0f.js","assets/ProgramTemplate-4339738f.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/earcut-f0ab7973.js","assets/featureConversionUtils-317e3645.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/util-77b54e6c.js","assets/enums-fb086c25.js","assets/programUtils-bc6831b3.js","assets/NestedMap-1b5db22e.js","assets/MagnifierPrograms-42a17b79.js","assets/rasterizingUtils-87ec9425.js","assets/pbf-280c2fba.js","assets/imageutils-c778fbfd.js","assets/Matcher-1df389f9.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-0f11baf4.js","assets/CircularArray-ef508845.js","assets/testSVGPremultipliedAlpha-f1fece6b.js","assets/throttle-7bf02de9.js","assets/ComputedAttributeStorage-82dd5a77.js","assets/TimeOnly-c5d299c6.js","assets/RenderingContext-3b226226.js","assets/OrderIndependentTransparency-6ae10952.js","assets/basicInterfaces-11f56cb3.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/GraphicsView2D-4eff31d4.js","assets/normalizeUtilsSync-0dfcf0d7.js","assets/projectionSupport-276693a5.js","assets/json-48e3ea08.js","assets/GraphicContainer-8b76bd40.js","assets/BaseGraphicContainer-9f13a3fe.js","assets/FeatureContainer-369d9021.js","assets/TileContainer-9fad44e6.js","assets/vec3f32-2da9db36.js","assets/requestImageUtils-de23011a.js"])])}const Yc=()=>Vt().then(()=>Se(()=>import("./TileLayerView2D-2a6512fc.js"),["assets/TileLayerView2D-2a6512fc.js","assets/Container-85b121df.js","assets/definitions-328d54fa.js","assets/enums-bdecffa2.js","assets/Texture-d90263e2.js","assets/BufferPool-f5e44a0f.js","assets/AttributeStoreView-f57c4151.js","assets/TiledDisplayObject-2b64e00b.js","assets/color-ebf39a9d.js","assets/enums-f1a6a48a.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLContainer-6804eac4.js","assets/FramebufferObject-80159f0f.js","assets/ProgramTemplate-4339738f.js","assets/GeometryUtils-67cf8401.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/earcut-f0ab7973.js","assets/featureConversionUtils-317e3645.js","assets/OptimizedGeometry-d94e541f.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/visualVariablesUtils-1ef3f471.js","assets/ExpandedCIM-800e3b93.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-984e8446.js","assets/utils-214f8e9b.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-b480e172.js","assets/floatRGBA-028aa075.js","assets/util-77b54e6c.js","assets/enums-fb086c25.js","assets/MagnifierPrograms-42a17b79.js","assets/rasterizingUtils-87ec9425.js","assets/pbf-280c2fba.js","assets/imageutils-c778fbfd.js","assets/Matcher-1df389f9.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-0f11baf4.js","assets/CircularArray-ef508845.js","assets/testSVGPremultipliedAlpha-f1fece6b.js","assets/throttle-7bf02de9.js","assets/ComputedAttributeStorage-82dd5a77.js","assets/TimeOnly-c5d299c6.js","assets/OrderIndependentTransparency-6ae10952.js","assets/basicInterfaces-11f56cb3.js","assets/GraphicsView2D-4eff31d4.js","assets/normalizeUtilsSync-0dfcf0d7.js","assets/projectionSupport-276693a5.js","assets/json-48e3ea08.js","assets/vec3f32-2da9db36.js","assets/imageUtils-f8c3687c.js","assets/BitmapTileContainer-5f4783da.js","assets/Bitmap-2721d778.js","assets/TileContainer-9fad44e6.js","assets/LayerView-2663e6e1.js","assets/scaleUtils-5a9a93fd.js","assets/HighlightGraphicContainer-b98725d6.js","assets/BaseGraphicContainer-9f13a3fe.js","assets/FeatureContainer-369d9021.js","assets/RefreshableLayerView-a29c66c4.js","assets/drapedUtils-7ecbd4ea.js","assets/floorFilterUtils-080a7cd2.js","assets/sublayerUtils-bff2a338.js","assets/popupUtils-6d1fbc49.js"])),qu=()=>Vt().then(()=>Se(()=>import("./FeatureLayerView2D-8db8a0d1.js"),["assets/FeatureLayerView2D-8db8a0d1.js","assets/Container-85b121df.js","assets/definitions-328d54fa.js","assets/enums-bdecffa2.js","assets/Texture-d90263e2.js","assets/LayerView-2663e6e1.js","assets/scaleUtils-5a9a93fd.js","assets/AttributeStoreView-f57c4151.js","assets/TiledDisplayObject-2b64e00b.js","assets/color-ebf39a9d.js","assets/enums-f1a6a48a.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLContainer-6804eac4.js","assets/FramebufferObject-80159f0f.js","assets/ProgramTemplate-4339738f.js","assets/GeometryUtils-67cf8401.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/earcut-f0ab7973.js","assets/featureConversionUtils-317e3645.js","assets/OptimizedGeometry-d94e541f.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/visualVariablesUtils-1ef3f471.js","assets/ExpandedCIM-800e3b93.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-984e8446.js","assets/utils-214f8e9b.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-b480e172.js","assets/floatRGBA-028aa075.js","assets/util-77b54e6c.js","assets/BitmapTileContainer-5f4783da.js","assets/Bitmap-2721d778.js","assets/TileContainer-9fad44e6.js","assets/CircularArray-ef508845.js","assets/BufferPool-f5e44a0f.js","assets/FeatureContainer-369d9021.js","assets/floorFilterUtils-080a7cd2.js","assets/popupUtils-6d1fbc49.js","assets/RefreshableLayerView-a29c66c4.js"])),rx={"base-dynamic":()=>Vt().then(()=>Se(()=>import("./BaseDynamicLayerView2D-fa099018.js"),["assets/BaseDynamicLayerView2D-fa099018.js","assets/BitmapContainer-2220d647.js","assets/WGLContainer-6804eac4.js","assets/definitions-328d54fa.js","assets/FramebufferObject-80159f0f.js","assets/Texture-d90263e2.js","assets/enums-bdecffa2.js","assets/ProgramTemplate-4339738f.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-ebf39a9d.js","assets/enums-f1a6a48a.js","assets/GeometryUtils-67cf8401.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/Container-85b121df.js","assets/earcut-f0ab7973.js","assets/featureConversionUtils-317e3645.js","assets/OptimizedGeometry-d94e541f.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/LayerView-2663e6e1.js","assets/scaleUtils-5a9a93fd.js","assets/ExportStrategy-ea3038c3.js","assets/Bitmap-2721d778.js","assets/RefreshableLayerView-a29c66c4.js"])),"base-tile":Yc,"bing-maps":Yc,csv:qu,"geo-rss":()=>Vt().then(()=>Se(()=>import("./GeoRSSLayerView2D-ab545a41.js"),["assets/GeoRSSLayerView2D-ab545a41.js","assets/LayerView-2663e6e1.js","assets/scaleUtils-5a9a93fd.js","assets/Container-85b121df.js","assets/definitions-328d54fa.js","assets/enums-bdecffa2.js","assets/Texture-d90263e2.js","assets/GraphicContainer-8b76bd40.js","assets/color-ebf39a9d.js","assets/enums-f1a6a48a.js","assets/VertexElementDescriptor-2925c6af.js","assets/BaseGraphicContainer-9f13a3fe.js","assets/FeatureContainer-369d9021.js","assets/AttributeStoreView-f57c4151.js","assets/TiledDisplayObject-2b64e00b.js","assets/WGLContainer-6804eac4.js","assets/FramebufferObject-80159f0f.js","assets/ProgramTemplate-4339738f.js","assets/GeometryUtils-67cf8401.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/earcut-f0ab7973.js","assets/featureConversionUtils-317e3645.js","assets/OptimizedGeometry-d94e541f.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/visualVariablesUtils-1ef3f471.js","assets/ExpandedCIM-800e3b93.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-984e8446.js","assets/utils-214f8e9b.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-b480e172.js","assets/floatRGBA-028aa075.js","assets/util-77b54e6c.js","assets/TileContainer-9fad44e6.js","assets/vec3f32-2da9db36.js","assets/GraphicsView2D-4eff31d4.js","assets/normalizeUtilsSync-0dfcf0d7.js","assets/projectionSupport-276693a5.js","assets/json-48e3ea08.js","assets/Matcher-1df389f9.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-0f11baf4.js","assets/ComputedAttributeStorage-82dd5a77.js","assets/TimeOnly-c5d299c6.js"])),feature:qu,geojson:qu,graphics:()=>Vt().then(()=>Se(()=>import("./GraphicsLayerView2D-1fbebefc.js"),["assets/GraphicsLayerView2D-1fbebefc.js","assets/LayerView-2663e6e1.js","assets/scaleUtils-5a9a93fd.js","assets/Container-85b121df.js","assets/definitions-328d54fa.js","assets/enums-bdecffa2.js","assets/Texture-d90263e2.js","assets/GraphicContainer-8b76bd40.js","assets/color-ebf39a9d.js","assets/enums-f1a6a48a.js","assets/VertexElementDescriptor-2925c6af.js","assets/BaseGraphicContainer-9f13a3fe.js","assets/FeatureContainer-369d9021.js","assets/AttributeStoreView-f57c4151.js","assets/TiledDisplayObject-2b64e00b.js","assets/WGLContainer-6804eac4.js","assets/FramebufferObject-80159f0f.js","assets/ProgramTemplate-4339738f.js","assets/GeometryUtils-67cf8401.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/earcut-f0ab7973.js","assets/featureConversionUtils-317e3645.js","assets/OptimizedGeometry-d94e541f.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/visualVariablesUtils-1ef3f471.js","assets/ExpandedCIM-800e3b93.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-984e8446.js","assets/utils-214f8e9b.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-b480e172.js","assets/floatRGBA-028aa075.js","assets/util-77b54e6c.js","assets/TileContainer-9fad44e6.js","assets/vec3f32-2da9db36.js","assets/GraphicsView2D-4eff31d4.js","assets/normalizeUtilsSync-0dfcf0d7.js","assets/projectionSupport-276693a5.js","assets/json-48e3ea08.js","assets/Matcher-1df389f9.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-0f11baf4.js","assets/ComputedAttributeStorage-82dd5a77.js","assets/TimeOnly-c5d299c6.js"])),group:()=>Vt().then(()=>Se(()=>import("./GroupLayerView2D-6721fc7d.js"),["assets/GroupLayerView2D-6721fc7d.js","assets/LayerView-2663e6e1.js","assets/scaleUtils-5a9a93fd.js","assets/Container-85b121df.js","assets/definitions-328d54fa.js","assets/enums-bdecffa2.js","assets/Texture-d90263e2.js"])),imagery:()=>Vt().then(()=>Se(()=>import("./ImageryLayerView2D-afe281bd.js"),["assets/ImageryLayerView2D-afe281bd.js","assets/RasterVFDisplayObject-9cf40483.js","assets/FramebufferObject-80159f0f.js","assets/Texture-d90263e2.js","assets/enums-bdecffa2.js","assets/ProgramTemplate-4339738f.js","assets/VertexElementDescriptor-2925c6af.js","assets/dataUtils-458fb6ae.js","assets/WGLContainer-6804eac4.js","assets/definitions-328d54fa.js","assets/color-ebf39a9d.js","assets/enums-f1a6a48a.js","assets/GeometryUtils-67cf8401.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/Container-85b121df.js","assets/earcut-f0ab7973.js","assets/featureConversionUtils-317e3645.js","assets/OptimizedGeometry-d94e541f.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/LayerView-2663e6e1.js","assets/scaleUtils-5a9a93fd.js","assets/GraphicsView2D-4eff31d4.js","assets/ExpandedCIM-800e3b93.js","assets/BidiEngine-9a40f2f4.js","assets/visualVariablesUtils-1ef3f471.js","assets/GeometryUtils-984e8446.js","assets/utils-214f8e9b.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-b480e172.js","assets/floatRGBA-028aa075.js","assets/normalizeUtilsSync-0dfcf0d7.js","assets/projectionSupport-276693a5.js","assets/json-48e3ea08.js","assets/AttributeStoreView-f57c4151.js","assets/TiledDisplayObject-2b64e00b.js","assets/util-77b54e6c.js","assets/Matcher-1df389f9.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-0f11baf4.js","assets/ComputedAttributeStorage-82dd5a77.js","assets/TimeOnly-c5d299c6.js","assets/HighlightGraphicContainer-b98725d6.js","assets/BaseGraphicContainer-9f13a3fe.js","assets/FeatureContainer-369d9021.js","assets/TileContainer-9fad44e6.js","assets/vec3f32-2da9db36.js","assets/BitmapContainer-2220d647.js","assets/Bitmap-2721d778.js","assets/ExportStrategy-ea3038c3.js","assets/rasterProjectionHelper-ae5b1ef9.js","assets/popupUtils-6d1fbc49.js","assets/RefreshableLayerView-a29c66c4.js"])),"imagery-tile":()=>Vt().then(()=>Se(()=>import("./ImageryTileLayerView2D-05ee38a9.js"),["assets/ImageryTileLayerView2D-05ee38a9.js","assets/multidimensionalUtils-4d4e72d5.js","assets/RasterVFDisplayObject-9cf40483.js","assets/FramebufferObject-80159f0f.js","assets/Texture-d90263e2.js","assets/enums-bdecffa2.js","assets/ProgramTemplate-4339738f.js","assets/VertexElementDescriptor-2925c6af.js","assets/dataUtils-458fb6ae.js","assets/WGLContainer-6804eac4.js","assets/definitions-328d54fa.js","assets/color-ebf39a9d.js","assets/enums-f1a6a48a.js","assets/GeometryUtils-67cf8401.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/Container-85b121df.js","assets/earcut-f0ab7973.js","assets/featureConversionUtils-317e3645.js","assets/OptimizedGeometry-d94e541f.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/LayerView-2663e6e1.js","assets/scaleUtils-5a9a93fd.js","assets/rasterUtils-198b72cb.js","assets/TiledDisplayObject-2b64e00b.js","assets/TileContainer-9fad44e6.js","assets/RawBlockCache-7868afc1.js","assets/rasterProjectionHelper-ae5b1ef9.js","assets/util-77b54e6c.js","assets/popupUtils-6d1fbc49.js","assets/RefreshableLayerView-a29c66c4.js"])),kml:()=>Vt().then(()=>Se(()=>import("./KMLLayerView2D-97536265.js"),["assets/KMLLayerView2D-97536265.js","assets/kmlUtils-ddfd16ab.js","assets/Bitmap-2721d778.js","assets/Container-85b121df.js","assets/definitions-328d54fa.js","assets/enums-bdecffa2.js","assets/Texture-d90263e2.js","assets/BitmapContainer-2220d647.js","assets/WGLContainer-6804eac4.js","assets/FramebufferObject-80159f0f.js","assets/ProgramTemplate-4339738f.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-ebf39a9d.js","assets/enums-f1a6a48a.js","assets/GeometryUtils-67cf8401.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/earcut-f0ab7973.js","assets/featureConversionUtils-317e3645.js","assets/OptimizedGeometry-d94e541f.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/LayerView-2663e6e1.js","assets/scaleUtils-5a9a93fd.js","assets/GraphicContainer-8b76bd40.js","assets/BaseGraphicContainer-9f13a3fe.js","assets/FeatureContainer-369d9021.js","assets/AttributeStoreView-f57c4151.js","assets/TiledDisplayObject-2b64e00b.js","assets/visualVariablesUtils-1ef3f471.js","assets/ExpandedCIM-800e3b93.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-984e8446.js","assets/utils-214f8e9b.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-b480e172.js","assets/floatRGBA-028aa075.js","assets/util-77b54e6c.js","assets/TileContainer-9fad44e6.js","assets/vec3f32-2da9db36.js","assets/GraphicsView2D-4eff31d4.js","assets/normalizeUtilsSync-0dfcf0d7.js","assets/projectionSupport-276693a5.js","assets/json-48e3ea08.js","assets/Matcher-1df389f9.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-0f11baf4.js","assets/ComputedAttributeStorage-82dd5a77.js","assets/TimeOnly-c5d299c6.js","assets/rasterProjectionHelper-ae5b1ef9.js","assets/RenderingContext-3b226226.js","assets/programUtils-bc6831b3.js","assets/NestedMap-1b5db22e.js","assets/OrderIndependentTransparency-6ae10952.js","assets/basicInterfaces-11f56cb3.js","assets/testSVGPremultipliedAlpha-f1fece6b.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/rasterUtils-198b72cb.js"])),"knowledge-graph":()=>Vt().then(()=>Se(()=>import("./KnowledgeGraphLayerView2D-5a92a248.js"),["assets/KnowledgeGraphLayerView2D-5a92a248.js","assets/LayerView-2663e6e1.js","assets/scaleUtils-5a9a93fd.js","assets/Container-85b121df.js","assets/definitions-328d54fa.js","assets/enums-bdecffa2.js","assets/Texture-d90263e2.js"])),"link-chart":()=>Vt().then(()=>Se(()=>import("./KnowledgeGraphLayerView2D-5a92a248.js"),["assets/KnowledgeGraphLayerView2D-5a92a248.js","assets/LayerView-2663e6e1.js","assets/scaleUtils-5a9a93fd.js","assets/Container-85b121df.js","assets/definitions-328d54fa.js","assets/enums-bdecffa2.js","assets/Texture-d90263e2.js"])),"knowledge-graph-sublayer":qu,"map-image":()=>Vt().then(()=>Se(()=>import("./MapImageLayerView2D-bed3d231.js"),["assets/MapImageLayerView2D-bed3d231.js","assets/BitmapContainer-2220d647.js","assets/WGLContainer-6804eac4.js","assets/definitions-328d54fa.js","assets/FramebufferObject-80159f0f.js","assets/Texture-d90263e2.js","assets/enums-bdecffa2.js","assets/ProgramTemplate-4339738f.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-ebf39a9d.js","assets/enums-f1a6a48a.js","assets/GeometryUtils-67cf8401.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/Container-85b121df.js","assets/earcut-f0ab7973.js","assets/featureConversionUtils-317e3645.js","assets/OptimizedGeometry-d94e541f.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/LayerView-2663e6e1.js","assets/scaleUtils-5a9a93fd.js","assets/GraphicsView2D-4eff31d4.js","assets/ExpandedCIM-800e3b93.js","assets/BidiEngine-9a40f2f4.js","assets/visualVariablesUtils-1ef3f471.js","assets/GeometryUtils-984e8446.js","assets/utils-214f8e9b.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-b480e172.js","assets/floatRGBA-028aa075.js","assets/normalizeUtilsSync-0dfcf0d7.js","assets/projectionSupport-276693a5.js","assets/json-48e3ea08.js","assets/AttributeStoreView-f57c4151.js","assets/TiledDisplayObject-2b64e00b.js","assets/util-77b54e6c.js","assets/Matcher-1df389f9.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-0f11baf4.js","assets/ComputedAttributeStorage-82dd5a77.js","assets/TimeOnly-c5d299c6.js","assets/HighlightGraphicContainer-b98725d6.js","assets/BaseGraphicContainer-9f13a3fe.js","assets/FeatureContainer-369d9021.js","assets/TileContainer-9fad44e6.js","assets/vec3f32-2da9db36.js","assets/ExportStrategy-ea3038c3.js","assets/Bitmap-2721d778.js","assets/ExportImageParameters-948d0ffa.js","assets/floorFilterUtils-080a7cd2.js","assets/sublayerUtils-bff2a338.js","assets/RefreshableLayerView-a29c66c4.js","assets/drapedUtils-7ecbd4ea.js","assets/popupUtils-6d1fbc49.js"])),"map-notes":()=>Vt().then(()=>Se(()=>import("./MapNotesLayerView2D-db7bc9d1.js"),["assets/MapNotesLayerView2D-db7bc9d1.js","assets/LayerView-2663e6e1.js","assets/scaleUtils-5a9a93fd.js","assets/Container-85b121df.js","assets/definitions-328d54fa.js","assets/enums-bdecffa2.js","assets/Texture-d90263e2.js","assets/GraphicContainer-8b76bd40.js","assets/color-ebf39a9d.js","assets/enums-f1a6a48a.js","assets/VertexElementDescriptor-2925c6af.js","assets/BaseGraphicContainer-9f13a3fe.js","assets/FeatureContainer-369d9021.js","assets/AttributeStoreView-f57c4151.js","assets/TiledDisplayObject-2b64e00b.js","assets/WGLContainer-6804eac4.js","assets/FramebufferObject-80159f0f.js","assets/ProgramTemplate-4339738f.js","assets/GeometryUtils-67cf8401.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/earcut-f0ab7973.js","assets/featureConversionUtils-317e3645.js","assets/OptimizedGeometry-d94e541f.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/visualVariablesUtils-1ef3f471.js","assets/ExpandedCIM-800e3b93.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-984e8446.js","assets/utils-214f8e9b.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-b480e172.js","assets/floatRGBA-028aa075.js","assets/util-77b54e6c.js","assets/TileContainer-9fad44e6.js","assets/vec3f32-2da9db36.js","assets/GraphicsView2D-4eff31d4.js","assets/normalizeUtilsSync-0dfcf0d7.js","assets/projectionSupport-276693a5.js","assets/json-48e3ea08.js","assets/Matcher-1df389f9.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-0f11baf4.js","assets/ComputedAttributeStorage-82dd5a77.js","assets/TimeOnly-c5d299c6.js"])),media:()=>Vt().then(()=>Se(()=>import("./MediaLayerView2D-c1b42bd0.js"),["assets/MediaLayerView2D-c1b42bd0.js","assets/perspectiveUtils-f53f7b5c.js","assets/normalizeUtilsSync-0dfcf0d7.js","assets/mat3f64-221ce671.js","assets/Container-85b121df.js","assets/definitions-328d54fa.js","assets/enums-bdecffa2.js","assets/Texture-d90263e2.js","assets/BufferPool-f5e44a0f.js","assets/AttributeStoreView-f57c4151.js","assets/TiledDisplayObject-2b64e00b.js","assets/color-ebf39a9d.js","assets/enums-f1a6a48a.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLContainer-6804eac4.js","assets/FramebufferObject-80159f0f.js","assets/ProgramTemplate-4339738f.js","assets/GeometryUtils-67cf8401.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/earcut-f0ab7973.js","assets/featureConversionUtils-317e3645.js","assets/OptimizedGeometry-d94e541f.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/visualVariablesUtils-1ef3f471.js","assets/ExpandedCIM-800e3b93.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-984e8446.js","assets/utils-214f8e9b.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-b480e172.js","assets/floatRGBA-028aa075.js","assets/util-77b54e6c.js","assets/enums-fb086c25.js","assets/MagnifierPrograms-42a17b79.js","assets/rasterizingUtils-87ec9425.js","assets/pbf-280c2fba.js","assets/imageutils-c778fbfd.js","assets/Matcher-1df389f9.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-0f11baf4.js","assets/CircularArray-ef508845.js","assets/testSVGPremultipliedAlpha-f1fece6b.js","assets/throttle-7bf02de9.js","assets/ComputedAttributeStorage-82dd5a77.js","assets/TimeOnly-c5d299c6.js","assets/OrderIndependentTransparency-6ae10952.js","assets/basicInterfaces-11f56cb3.js","assets/GraphicsView2D-4eff31d4.js","assets/projectionSupport-276693a5.js","assets/json-48e3ea08.js","assets/vec3f32-2da9db36.js","assets/LayerView-2663e6e1.js","assets/scaleUtils-5a9a93fd.js"])),"ogc-feature":()=>Vt().then(()=>Se(()=>import("./OGCFeatureLayerView2D-05f83053.js"),["assets/OGCFeatureLayerView2D-05f83053.js","assets/FeatureLayerView2D-8db8a0d1.js","assets/Container-85b121df.js","assets/definitions-328d54fa.js","assets/enums-bdecffa2.js","assets/Texture-d90263e2.js","assets/LayerView-2663e6e1.js","assets/scaleUtils-5a9a93fd.js","assets/AttributeStoreView-f57c4151.js","assets/TiledDisplayObject-2b64e00b.js","assets/color-ebf39a9d.js","assets/enums-f1a6a48a.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLContainer-6804eac4.js","assets/FramebufferObject-80159f0f.js","assets/ProgramTemplate-4339738f.js","assets/GeometryUtils-67cf8401.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/earcut-f0ab7973.js","assets/featureConversionUtils-317e3645.js","assets/OptimizedGeometry-d94e541f.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/visualVariablesUtils-1ef3f471.js","assets/ExpandedCIM-800e3b93.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-984e8446.js","assets/utils-214f8e9b.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-b480e172.js","assets/floatRGBA-028aa075.js","assets/util-77b54e6c.js","assets/BitmapTileContainer-5f4783da.js","assets/Bitmap-2721d778.js","assets/TileContainer-9fad44e6.js","assets/CircularArray-ef508845.js","assets/BufferPool-f5e44a0f.js","assets/FeatureContainer-369d9021.js","assets/floorFilterUtils-080a7cd2.js","assets/popupUtils-6d1fbc49.js","assets/RefreshableLayerView-a29c66c4.js"])),"open-street-map":Yc,"oriented-imagery":qu,route:()=>Vt().then(()=>Se(()=>import("./RouteLayerView2D-b886dbd0.js"),["assets/RouteLayerView2D-b886dbd0.js","assets/Stop-b2d5c3ab.js","assets/LayerView-2663e6e1.js","assets/scaleUtils-5a9a93fd.js","assets/Container-85b121df.js","assets/definitions-328d54fa.js","assets/enums-bdecffa2.js","assets/Texture-d90263e2.js","assets/GraphicContainer-8b76bd40.js","assets/color-ebf39a9d.js","assets/enums-f1a6a48a.js","assets/VertexElementDescriptor-2925c6af.js","assets/BaseGraphicContainer-9f13a3fe.js","assets/FeatureContainer-369d9021.js","assets/AttributeStoreView-f57c4151.js","assets/TiledDisplayObject-2b64e00b.js","assets/WGLContainer-6804eac4.js","assets/FramebufferObject-80159f0f.js","assets/ProgramTemplate-4339738f.js","assets/GeometryUtils-67cf8401.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/earcut-f0ab7973.js","assets/featureConversionUtils-317e3645.js","assets/OptimizedGeometry-d94e541f.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/visualVariablesUtils-1ef3f471.js","assets/ExpandedCIM-800e3b93.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-984e8446.js","assets/utils-214f8e9b.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-b480e172.js","assets/floatRGBA-028aa075.js","assets/util-77b54e6c.js","assets/TileContainer-9fad44e6.js","assets/vec3f32-2da9db36.js","assets/GraphicsView2D-4eff31d4.js","assets/normalizeUtilsSync-0dfcf0d7.js","assets/projectionSupport-276693a5.js","assets/json-48e3ea08.js","assets/Matcher-1df389f9.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-0f11baf4.js","assets/ComputedAttributeStorage-82dd5a77.js","assets/TimeOnly-c5d299c6.js"])),stream:()=>Vt().then(()=>Se(()=>import("./StreamLayerView2D-1d63ab7b.js"),["assets/StreamLayerView2D-1d63ab7b.js","assets/FeatureLayerView2D-8db8a0d1.js","assets/Container-85b121df.js","assets/definitions-328d54fa.js","assets/enums-bdecffa2.js","assets/Texture-d90263e2.js","assets/LayerView-2663e6e1.js","assets/scaleUtils-5a9a93fd.js","assets/AttributeStoreView-f57c4151.js","assets/TiledDisplayObject-2b64e00b.js","assets/color-ebf39a9d.js","assets/enums-f1a6a48a.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLContainer-6804eac4.js","assets/FramebufferObject-80159f0f.js","assets/ProgramTemplate-4339738f.js","assets/GeometryUtils-67cf8401.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/earcut-f0ab7973.js","assets/featureConversionUtils-317e3645.js","assets/OptimizedGeometry-d94e541f.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/visualVariablesUtils-1ef3f471.js","assets/ExpandedCIM-800e3b93.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-984e8446.js","assets/utils-214f8e9b.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-b480e172.js","assets/floatRGBA-028aa075.js","assets/util-77b54e6c.js","assets/BitmapTileContainer-5f4783da.js","assets/Bitmap-2721d778.js","assets/TileContainer-9fad44e6.js","assets/CircularArray-ef508845.js","assets/BufferPool-f5e44a0f.js","assets/FeatureContainer-369d9021.js","assets/floorFilterUtils-080a7cd2.js","assets/popupUtils-6d1fbc49.js","assets/RefreshableLayerView-a29c66c4.js"])),"subtype-group":()=>Vt().then(()=>Se(()=>import("./SubtypeGroupLayerView2D-24e8ee2c.js"),["assets/SubtypeGroupLayerView2D-24e8ee2c.js","assets/FeatureLayerView2D-8db8a0d1.js","assets/Container-85b121df.js","assets/definitions-328d54fa.js","assets/enums-bdecffa2.js","assets/Texture-d90263e2.js","assets/LayerView-2663e6e1.js","assets/scaleUtils-5a9a93fd.js","assets/AttributeStoreView-f57c4151.js","assets/TiledDisplayObject-2b64e00b.js","assets/color-ebf39a9d.js","assets/enums-f1a6a48a.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLContainer-6804eac4.js","assets/FramebufferObject-80159f0f.js","assets/ProgramTemplate-4339738f.js","assets/GeometryUtils-67cf8401.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/earcut-f0ab7973.js","assets/featureConversionUtils-317e3645.js","assets/OptimizedGeometry-d94e541f.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/visualVariablesUtils-1ef3f471.js","assets/ExpandedCIM-800e3b93.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-984e8446.js","assets/utils-214f8e9b.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-b480e172.js","assets/floatRGBA-028aa075.js","assets/util-77b54e6c.js","assets/BitmapTileContainer-5f4783da.js","assets/Bitmap-2721d778.js","assets/TileContainer-9fad44e6.js","assets/CircularArray-ef508845.js","assets/BufferPool-f5e44a0f.js","assets/FeatureContainer-369d9021.js","assets/floorFilterUtils-080a7cd2.js","assets/popupUtils-6d1fbc49.js","assets/RefreshableLayerView-a29c66c4.js"])),tile:Yc,"vector-tile":()=>Vt().then(()=>Se(()=>import("./VectorTileLayerView2D-240f59e6.js"),["assets/VectorTileLayerView2D-240f59e6.js","assets/enums-fb086c25.js","assets/Rect-ea14f53a.js","assets/enums-bdecffa2.js","assets/Texture-d90263e2.js","assets/pbf-280c2fba.js","assets/rasterizingUtils-87ec9425.js","assets/floatRGBA-028aa075.js","assets/FramebufferObject-80159f0f.js","assets/ProgramTemplate-4339738f.js","assets/config-1337d16e.js","assets/TiledDisplayObject-2b64e00b.js","assets/Container-85b121df.js","assets/definitions-328d54fa.js","assets/StyleDefinition-29c49b98.js","assets/enums-f1a6a48a.js","assets/color-ebf39a9d.js","assets/VertexElementDescriptor-2925c6af.js","assets/TileContainer-9fad44e6.js","assets/WGLContainer-6804eac4.js","assets/GeometryUtils-67cf8401.js","assets/earcut-f0ab7973.js","assets/featureConversionUtils-317e3645.js","assets/OptimizedGeometry-d94e541f.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/StyleRepository-b048a078.js","assets/colorUtils-cffa7faa.js","assets/GeometryUtils-984e8446.js","assets/LayerView-2663e6e1.js","assets/scaleUtils-5a9a93fd.js"])),video:()=>Vt().then(()=>Se(()=>import("./VideoLayerView2D-3cea15c4.js"),["assets/VideoLayerView2D-3cea15c4.js","assets/LayerView-2663e6e1.js","assets/scaleUtils-5a9a93fd.js","assets/Container-85b121df.js","assets/definitions-328d54fa.js","assets/enums-bdecffa2.js","assets/Texture-d90263e2.js","assets/GraphicContainer-8b76bd40.js","assets/color-ebf39a9d.js","assets/enums-f1a6a48a.js","assets/VertexElementDescriptor-2925c6af.js","assets/BaseGraphicContainer-9f13a3fe.js","assets/FeatureContainer-369d9021.js","assets/AttributeStoreView-f57c4151.js","assets/TiledDisplayObject-2b64e00b.js","assets/WGLContainer-6804eac4.js","assets/FramebufferObject-80159f0f.js","assets/ProgramTemplate-4339738f.js","assets/GeometryUtils-67cf8401.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/earcut-f0ab7973.js","assets/featureConversionUtils-317e3645.js","assets/OptimizedGeometry-d94e541f.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/visualVariablesUtils-1ef3f471.js","assets/ExpandedCIM-800e3b93.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-984e8446.js","assets/utils-214f8e9b.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-b480e172.js","assets/floatRGBA-028aa075.js","assets/util-77b54e6c.js","assets/TileContainer-9fad44e6.js","assets/vec3f32-2da9db36.js","assets/GraphicsView2D-4eff31d4.js","assets/normalizeUtilsSync-0dfcf0d7.js","assets/projectionSupport-276693a5.js","assets/json-48e3ea08.js","assets/Matcher-1df389f9.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-0f11baf4.js","assets/ComputedAttributeStorage-82dd5a77.js","assets/TimeOnly-c5d299c6.js"])),wcs:()=>Vt().then(()=>Se(()=>import("./ImageryTileLayerView2D-05ee38a9.js"),["assets/ImageryTileLayerView2D-05ee38a9.js","assets/multidimensionalUtils-4d4e72d5.js","assets/RasterVFDisplayObject-9cf40483.js","assets/FramebufferObject-80159f0f.js","assets/Texture-d90263e2.js","assets/enums-bdecffa2.js","assets/ProgramTemplate-4339738f.js","assets/VertexElementDescriptor-2925c6af.js","assets/dataUtils-458fb6ae.js","assets/WGLContainer-6804eac4.js","assets/definitions-328d54fa.js","assets/color-ebf39a9d.js","assets/enums-f1a6a48a.js","assets/GeometryUtils-67cf8401.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/Container-85b121df.js","assets/earcut-f0ab7973.js","assets/featureConversionUtils-317e3645.js","assets/OptimizedGeometry-d94e541f.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/LayerView-2663e6e1.js","assets/scaleUtils-5a9a93fd.js","assets/rasterUtils-198b72cb.js","assets/TiledDisplayObject-2b64e00b.js","assets/TileContainer-9fad44e6.js","assets/RawBlockCache-7868afc1.js","assets/rasterProjectionHelper-ae5b1ef9.js","assets/util-77b54e6c.js","assets/popupUtils-6d1fbc49.js","assets/RefreshableLayerView-a29c66c4.js"])),"web-tile":Yc,wfs:qu,wms:()=>Vt().then(()=>Se(()=>import("./WMSLayerView2D-8a12c684.js"),["assets/WMSLayerView2D-8a12c684.js","assets/BitmapContainer-2220d647.js","assets/WGLContainer-6804eac4.js","assets/definitions-328d54fa.js","assets/FramebufferObject-80159f0f.js","assets/Texture-d90263e2.js","assets/enums-bdecffa2.js","assets/ProgramTemplate-4339738f.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-ebf39a9d.js","assets/enums-f1a6a48a.js","assets/GeometryUtils-67cf8401.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/Container-85b121df.js","assets/earcut-f0ab7973.js","assets/featureConversionUtils-317e3645.js","assets/OptimizedGeometry-d94e541f.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/LayerView-2663e6e1.js","assets/scaleUtils-5a9a93fd.js","assets/ExportStrategy-ea3038c3.js","assets/Bitmap-2721d778.js","assets/RefreshableLayerView-a29c66c4.js","assets/ExportWMSImageParameters-27891aae.js"])),wmts:()=>Vt().then(()=>Se(()=>import("./WMTSLayerView2D-56a5dfb9.js"),["assets/WMTSLayerView2D-56a5dfb9.js","assets/imageUtils-f8c3687c.js","assets/BitmapTileContainer-5f4783da.js","assets/Bitmap-2721d778.js","assets/Container-85b121df.js","assets/definitions-328d54fa.js","assets/enums-bdecffa2.js","assets/Texture-d90263e2.js","assets/TiledDisplayObject-2b64e00b.js","assets/WGLContainer-6804eac4.js","assets/FramebufferObject-80159f0f.js","assets/ProgramTemplate-4339738f.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-ebf39a9d.js","assets/enums-f1a6a48a.js","assets/GeometryUtils-67cf8401.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/earcut-f0ab7973.js","assets/featureConversionUtils-317e3645.js","assets/OptimizedGeometry-d94e541f.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/TileContainer-9fad44e6.js","assets/LayerView-2663e6e1.js","assets/scaleUtils-5a9a93fd.js","assets/RefreshableLayerView-a29c66c4.js"])),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function OY(e){const t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",i=t.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new ae(`${i}:view-not-supported`,`${t} is not supported in 2D`)}const sx={hasLayerViewModule:e=>rx[e.type]!=null,importLayerView:e=>{const t=rx[e.type];if(t==null)throw OY(e);return t(e)}};function PY(e,t){const{spatialReference:i}=t,s=[t.x,t.y];let u=Number.POSITIVE_INFINITY,d=0,y=0;const v=[0,0],_=e.type==="extent"?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:e.rings;for(const M of _)for(let E=0;E<M.length-1;E++){gF(v,s,M,E);const O=Xm(s,v);O<u&&(u=O,d=v[0],y=v[1])}return{coordinate:new Je({x:d,y,spatialReference:i}),distance:u}}var j3;let Fl=j3=class extends K5(Ne){constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Na(this.geometry,this.spatialReference)}catch(e){return de.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:e}),null}return this.geometry}constrain(e,t){if(this.normalizedGeometry==null)return e;const i=e.targetGeometry;if(this.normalizedGeometry.type==="extent"?Sm(this.normalizedGeometry,i):TT(this.normalizedGeometry,i))return e;const{coordinate:s}=PY(this.normalizedGeometry,i);return s&&(e.targetGeometry=s),e}clone(){var e,t;return new j3({geometry:(e=this.geometry)==null?void 0:e.clone(),spatialReference:(t=this.spatialReference)==null?void 0:t.clone()})}};w([S({constructOnly:!0})],Fl.prototype,"geometry",void 0),w([S({readOnly:!0})],Fl.prototype,"normalizedGeometry",null),w([S({constructOnly:!0})],Fl.prototype,"spatialReference",void 0),Fl=j3=w([B("esri.views.2d.constraints.GeometryConstraint")],Fl);var N3;let P0=N3=class extends K5(Ne){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t&&(this.rotationEnabled||(e.rotation=t.rotation)),e}clone(){return new N3({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};w([S()],P0.prototype,"enabled",void 0),w([S()],P0.prototype,"rotationEnabled",void 0),P0=N3=w([B("esri.views.2d.constraints.RotationConstraint")],P0);const gA=P0;var R3;let ur=R3=class extends K5(Ne){constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:i,maxScale:s,minZoom:u,maxZoom:d}=this,y=-1,v=-1,_=!1,M=!1;if(i!==0&&s!==0&&i<s&&([i,s]=[s,i]),!(t!=null&&t.length))return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",s);t=t.map(E=>E.clone()),t.sort((E,O)=>O.scale-E.scale),t.forEach((E,O)=>E.level=O);for(const E of t)!_&&i>0&&i>=E.scale&&(y=E.level,_=!0),!M&&s>0&&s>=E.scale&&(v=e?e.level:-1,M=!0),e=E;u===-1&&(u=i===0?0:y),d===-1&&(d=s===0?t.length-1:v),u=Math.max(u,0),u=Math.min(u,t.length-1),d=Math.max(d,0),d=Math.min(d,t.length-1),u>d&&([u,d]=[d,u]),i=t[u].scale,s=t[d].scale,t.splice(0,u),t.splice(d-u+1,t.length),t.forEach((E,O)=>{this._lodByScale[E.scale]=E,this._scales[O]=E.scale}),this._set("effectiveLODs",t),this._set("effectiveMinZoom",u),this._set("effectiveMaxZoom",d),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",s)}constrain(e,t){if(t&&e.scale===t.scale)return e;const i=this.effectiveMinScale,s=this.effectiveMaxScale,u=e.targetGeometry,d=t&&t.targetGeometry,y=s!==0&&e.scale<s,v=i!==0&&e.scale>i;if(y||v){const _=v?i:s;if(t&&d){const M=(_-t.scale)/(e.scale-t.scale);u.x=d.x+(u.x-d.x)*M,u.y=d.y+(u.y-d.y)*M}e.scale=_}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),i=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(i>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const i=Math.round(e-.5),s=Math.round(e);return t[s]+(s-e)*(t[i]-t[s])}scaleToZoom(e){if(!this.effectiveLODs)return-1;const t=this._scales;let i,s;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let u=0;u<t.length-1;u++){if(i=t[u],s=t[u+1],s===e)return u+this.effectiveMinZoom+1;if(i>e&&s<e)return u+this.effectiveMinZoom+1-(e-s)/(i-s)}return-1}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i-1)}clone(){return new R3({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce((t,i)=>Math.abs(i-e)<=Math.abs(t-e)?i:t,this._scales[0])),this._lodByScale[e].scale}};w([S({readOnly:!0})],ur.prototype,"effectiveLODs",void 0),w([S({readOnly:!0})],ur.prototype,"effectiveMinZoom",void 0),w([S({readOnly:!0})],ur.prototype,"effectiveMaxZoom",void 0),w([S({readOnly:!0})],ur.prototype,"effectiveMinScale",void 0),w([S({readOnly:!0})],ur.prototype,"effectiveMaxScale",void 0),w([S()],ur.prototype,"lods",void 0),w([S()],ur.prototype,"minZoom",void 0),w([S()],ur.prototype,"maxZoom",void 0),w([S()],ur.prototype,"minScale",void 0),w([S()],ur.prototype,"maxScale",void 0),w([S()],ur.prototype,"snapToZoom",void 0),ur=R3=w([B("esri.views.2d.constraints.ZoomConstraint")],ur);const vA=ur,CY={base:null,key:"type",typeMap:{extent:Tt,polygon:po}};let Ht=class extends Ne{constructor(t){super(t),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new Oe}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(t){t?this._set("geometry",t):this._set("geometry",null)}get version(){var t,i,s;return`${(t=this._zoom)==null?void 0:t.uid}/${(i=this._rotation)==null?void 0:i.uid}/${(s=this._geometry)==null?void 0:s.uid}`}get _geometry(){var i,s;const t=this._get("_geometry");return t&&this.geometry===t.geometry&&((i=this.view)==null?void 0:i.constraintsInfo.spatialReference)===t.spatialReference?t:new Fl({geometry:this.geometry,spatialReference:(s=this.view)==null?void 0:s.constraintsInfo.spatialReference})}get _rotation(){return new gA({rotationEnabled:this.rotationEnabled})}get _zoom(){var _;const t=this._get("_zoom"),i=this.lods||((_=this.view)==null?void 0:_.constraintsInfo.lods),s=this.minZoom,u=this.maxZoom,d=this.minScale,y=this.maxScale,v=this.snapToZoom;return t&&t.lods===i&&t.minZoom===s&&t.maxZoom===u&&t.minScale===d&&t.maxScale===y&&t.snapToZoom===v?t:new vA({lods:i,minZoom:s,maxZoom:u,minScale:d,maxScale:y,snapToZoom:v})}canZoomInTo(t){const i=this.effectiveMaxScale;return i===0||t>=i}canZoomOutTo(t){const i=this.effectiveMinScale;return i===0||t<=i}constrain(t,i){return this._zoom.constrain(t,i),this._rotation.constrain(t,i),this._geometry.constrain(t,i),this.customConstraints.forEach(s=>s.constrain(t,i)),t}constrainByGeometry(t){return this._geometry.constrain(t),this.customConstraints.forEach(i=>{var s;return(s=i.applyPanConstraint)==null?void 0:s.call(i,t)}),t}fit(t){return this._zoom.fit(t)}zoomToScale(t){return this._zoom.zoomToScale(t)}scaleToZoom(t){return this._zoom.scaleToZoom(t)}snapScale(t){return this._zoom.snapToClosestScale(t)}snapToNextScale(t){return this._zoom.snapToNextScale(t)}snapToPreviousScale(t){return this._zoom.snapToPreviousScale(t)}};w([S({readOnly:!0})],Ht.prototype,"effectiveLODs",null),w([S({readOnly:!0})],Ht.prototype,"effectiveMinScale",null),w([S({readOnly:!0})],Ht.prototype,"effectiveMaxScale",null),w([S({readOnly:!0})],Ht.prototype,"effectiveMinZoom",null),w([S({readOnly:!0})],Ht.prototype,"effectiveMaxZoom",null),w([S({types:CY,value:null})],Ht.prototype,"geometry",null),w([S({type:[sa]})],Ht.prototype,"lods",void 0),w([S()],Ht.prototype,"minScale",void 0),w([S()],Ht.prototype,"maxScale",void 0),w([S()],Ht.prototype,"minZoom",void 0),w([S()],Ht.prototype,"maxZoom",void 0),w([S()],Ht.prototype,"rotationEnabled",void 0),w([S()],Ht.prototype,"snapToZoom",void 0),w([S({type:Oe})],Ht.prototype,"customConstraints",void 0),w([S()],Ht.prototype,"view",void 0),w([S({readOnly:!0})],Ht.prototype,"version",null),w([S({type:Fl,readOnly:!0})],Ht.prototype,"_geometry",null),w([S({type:gA})],Ht.prototype,"_rotation",null),w([S({readOnly:!0,type:vA})],Ht.prototype,"_zoom",null),Ht=w([B("esri.views.2d.MapViewConstraints")],Ht);const wA=Ht;let _u=class yl{static getId(t,i,s,u){return typeof t=="object"?`${t.level}/${t.row}/${t.col}/${t.world}`:`${t}/${i}/${s}/${u}`}constructor(t,i,s,u){this.set(t,i,s,u)}get key(){return this}get id(){return this.toString()}set id(t){this.set(t)}get hash(){const t=4095&this.row,i=4095&this.col,s=63&this.level;return(3&this.world)<<30|i<<22|t<<8|s}acquire(t,i,s,u){this.set(t,i,s,u)}contains(t){const i=t.level-this.level;return i>=0&&this.row===t.row>>i&&this.col===t.col>>i&&this.world===t.world}equals(t){return this.level===t.level&&this.row===t.row&&this.col===t.col&&this.world===t.world}clone(){return new yl(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(t,i,s,u){if(t==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof t=="object")this.level=t.level||0,this.row=t.row||0,this.col=t.col||0,this.world=t.world||0;else if(typeof t=="string"){const[d,y,v,_]=t.split("/");this.level=parseFloat(d),this.row=parseFloat(y),this.col=parseFloat(v),this.world=parseFloat(_)}else this.level=+t,this.row=+i,this.col=+s,this.world=+u||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new yl(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){const t=this.level+1,i=this.row<<1,s=this.col<<1,u=this.world;return[new yl(t,i,s,u),new yl(t,i,s+1,u),new yl(t,i+1,s,u),new yl(t,i+1,s+1,u)]}compareRowMajor(t){return this.row<t.row?-1:this.row>t.row?1:this.col<t.col?-1:this.col>t.col?1:0}};_u.pool=new Tu(_u,null,null,25,50);function Eo(e,t){return[e,t]}function Ua(e,t,i){return e[0]=t,e[1]=i,e}function jY(e,t,i,s,u){return e[0]=t,e[1]=i,e[2]=s,e[3]=u,e}const ds=new _u("0/0/0/0");let NY=class bA{static create(t,i,s=null){const u=Or(t.spatialReference),d=i.origin||Eo(t.origin.x,t.origin.y),y=Eo(t.size[0]*i.resolution,t.size[1]*i.resolution),v=Eo(-1/0,-1/0),_=Eo(1/0,1/0),M=Eo(1/0,1/0);s!=null&&(Ua(v,Math.max(0,Math.floor((s.xmin-d[0])/y[0])),Math.max(0,Math.floor((d[1]-s.ymax)/y[1]))),Ua(_,Math.max(0,Math.floor((s.xmax-d[0])/y[0])),Math.max(0,Math.floor((d[1]-s.ymin)/y[1]))),Ua(M,_[0]-v[0]+1,_[1]-v[1]+1));const{cols:E,rows:O}=i;let C,R,L,G;return!s&&E&&O&&(Ua(v,E[0],O[0]),Ua(_,E[1],O[1]),Ua(M,E[1]-E[0]+1,O[1]-O[0]+1)),t.isWrappable?(C=Eo(Math.ceil(Math.round((u.valid[1]-u.valid[0])/i.resolution)/t.size[0]),M[1]),R=Eo(Math.floor((u.origin[0]-d[0])/y[0]),v[1]),L=Eo(C[0]+R[0]-1,_[1]),G=!0):(R=v,L=_,C=M,G=!1),new bA(i.level,i.resolution,i.scale,d,v,_,M,y,R,L,C,G)}constructor(t,i,s,u,d,y,v,_,M,E,O,C){this.level=t,this.resolution=i,this.scale=s,this.origin=u,this.first=d,this.last=y,this.size=v,this.norm=_,this.worldStart=M,this.worldEnd=E,this.worldSize=O,this.wrap=C}normalizeCol(t){if(!this.wrap)return t;const i=this.worldSize[0];return t<0?i-1-Math.abs((t+1)%i):t%i}denormalizeCol(t,i){return this.wrap?this.worldSize[0]*i+t:t}getWorldForColumn(t){return this.wrap?Math.floor(t/this.worldSize[0]):0}getFirstColumnForWorld(t){return t*this.worldSize[0]+this.first[0]}getLastColumnForWorld(t){return t*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(t){return(t-this.origin[0])/this.norm[0]}getXForColumn(t){return this.origin[0]+t*this.norm[0]}getRowForY(t){return(this.origin[1]-t)/this.norm[1]}getYForRow(t){return this.origin[1]-t*this.norm[1]}getTileBounds(t,i,s=!1){ds.set(i);const u=s?ds.col:this.denormalizeCol(ds.col,ds.world),d=ds.row;return jY(t,this.getXForColumn(u),this.getYForRow(d+1),this.getXForColumn(u+1),this.getYForRow(d)),t}getTileCoords(t,i,s=!1){ds.set(i);const u=s?ds.col:this.denormalizeCol(ds.col,ds.world);return Array.isArray(t)?Ua(t,this.getXForColumn(u),this.getYForRow(ds.row)):(t.x=this.getXForColumn(u),t.y=this.getYForRow(ds.row)),t}},Up=class{constructor(){this.spans=[]}acquire(t){this.lodInfo=t}release(){this.lodInfo=null,this.spans.length=0}forEach(t,i){const{spans:s,lodInfo:u}=this,{level:d}=u;if(s.length!==0)for(const{row:y,colFrom:v,colTo:_}of s)for(let M=v;M<=_;M++)t.call(i,d,y,u.normalizeCol(M),u.getWorldForColumn(M))}};Up.pool=new Tu(Up);let w2=class{constructor(t,i,s){this.row=t,this.colFrom=i,this.colTo=s}};const Ct=new _u("0/0/0/0");let RY=class _A{static create(t,i){t[1]>i[1]&&([t,i]=[i,t]);const[s,u]=t,[d,y]=i,v=d-s,_=y-u,M=_!==0?v/_:0,E=(Math.ceil(u)-u)*M,O=(Math.floor(u)-u)*M;return new _A(s,Math.floor(u),Math.ceil(y),M,v<0?E:O,v<0?O:E,v<0?d:s,v<0?s:d)}constructor(t,i,s,u,d,y,v,_){this.x=t,this.ymin=i,this.ymax=s,this.invM=u,this.leftAdjust=d,this.rightAdjust=y,this.leftBound=v,this.rightBound=_}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const _r=[[0,0],[0,0],[0,0],[0,0]],LY=1e-6;let DY=class{constructor(t,i=null,s=t.lods[0].level,u=t.lods[t.lods.length-1].level){this.tileInfo=t,this.fullExtent=i,this.scales=[],this._infoByScale={},this._infoByLevel={};const d=t.lods.filter(v=>v.level>=s&&v.level<=u);this.minScale=d[0].scale,this.maxScale=d[d.length-1].scale;const y=this._lodInfos=d.map(v=>NY.create(t,v,i));d.forEach((v,_)=>{this._infoByLevel[v.level]=y[_],this._infoByScale[v.scale]=y[_],this.scales[_]=v.scale},this),this._wrap=t.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(t){return this._infoByLevel[typeof t=="number"?t:t.level]}getTileBounds(t,i,s=!1){Ct.set(i);const u=this._infoByLevel[Ct.level];return u?u.getTileBounds(t,Ct,s):t}getTileCoords(t,i,s=!1){Ct.set(i);const u=this._infoByLevel[Ct.level];return u?u.getTileCoords(t,Ct,s):t}getTileCoverage(t,i=192,s=!0,u="closest"){if(!s&&(t.scale>this.minScale||t.scale<this.maxScale))return null;const d=u==="closest"?this.getClosestInfoForScale(t.scale):this.getSmallestInfoForScale(t.scale),y=Up.pool.acquire(d),v=this._wrap;let _,M,E,O=1/0,C=-1/0;const R=y.spans;_r[0][0]=_r[0][1]=_r[1][1]=_r[3][0]=-i,_r[1][0]=_r[2][0]=t.size[0]+i,_r[2][1]=_r[3][1]=t.size[1]+i;for(const K of _r)t.toMap(K,K),K[0]=d.getColumnForX(K[0]),K[1]=d.getRowForY(K[1]);const L=[];let G=3;for(let K=0;K<4;K++){if(_r[K][1]===_r[G][1]){G=K;continue}const ee=RY.create(_r[K],_r[G]);O=Math.min(ee.ymin,O),C=Math.max(ee.ymax,C),L[ee.ymin]===void 0&&(L[ee.ymin]=[]),L[ee.ymin].push(ee),G=K}if(O==null||C==null||C-O>100)return null;let U=[];for(_=O;_<C;){L[_]!=null&&(U=U.concat(L[_])),M=1/0,E=-1/0;for(let K=U.length-1;K>=0;K--){const ee=U[K];M=Math.min(M,ee.getLeftCol()),E=Math.max(E,ee.getRightCol())}if(M=Math.floor(M),E=Math.floor(E),_>=d.first[1]&&_<=d.last[1])if(v)if(d.size[0]<d.worldSize[0]){const K=Math.floor(E/d.worldSize[0]);for(let ee=Math.floor(M/d.worldSize[0]);ee<=K;ee++)R.push(new w2(_,Math.max(d.getFirstColumnForWorld(ee),M),Math.min(d.getLastColumnForWorld(ee),E)))}else R.push(new w2(_,M,E));else M>d.last[0]||E<d.first[0]||(M=Math.max(M,d.first[0]),E=Math.min(E,d.last[0]),R.push(new w2(_,M,E)));_+=1;for(let K=U.length-1;K>=0;K--){const ee=U[K];ee.ymax>=_?ee.incrRow():U.splice(K,1)}}return y}getTileParentId(t){Ct.set(t);const i=this._infoByLevel[Ct.level],s=this._lodInfos.indexOf(i)-1;return s<0?null:(this._getTileIdAtLOD(Ct,this._lodInfos[s],Ct),Ct.id)}getTileResolution(t){const i=this._infoByLevel[typeof t=="object"?t.level:t];return i?i.resolution:-1}getTileScale(t){const i=this._infoByLevel[t.level];return i?i.scale:-1}intersects(t,i){Ct.set(i);const s=this._infoByLevel[Ct.level],u=t.lodInfo;if(u.resolution>s.resolution){this._getTileIdAtLOD(Ct,u,Ct);const y=u.denormalizeCol(Ct.col,Ct.world);for(const v of t.spans)if(v.row===Ct.row&&v.colFrom<=y&&v.colTo>=y)return!0}if(u.resolution<s.resolution){const[y,v,_,M]=t.spans.reduce((G,U)=>(G[0]=Math.min(G[0],U.row),G[1]=Math.max(G[1],U.row),G[2]=Math.min(G[2],U.colFrom),G[3]=Math.max(G[3],U.colTo),G),[1/0,-1/0,1/0,-1/0]),E=s.denormalizeCol(Ct.col,Ct.world),O=u.getColumnForX(s.getXForColumn(E)),C=u.getRowForY(s.getYForRow(Ct.row)),R=u.getColumnForX(s.getXForColumn(E+1))-1,L=u.getRowForY(s.getYForRow(Ct.row+1))-1;return!(O>M||R<_||C>v||L<y)}const d=u.denormalizeCol(Ct.col,Ct.world);return t.spans.some(y=>y.row===Ct.row&&y.colFrom<=d&&y.colTo>=d)}normalizeBounds(t,i,s){if(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],this._wrap){const u=Or(this.tileInfo.spatialReference),d=-s*(u.valid[1]-u.valid[0]);t[0]+=d,t[2]+=d}return t}getSmallestInfoForScale(t){const i=this.scales;if(this._infoByScale[t])return this._infoByScale[t];if(t>i[0])return this._infoByScale[i[0]];for(let s=1;s<i.length-1;s++)if(t>i[s]+LY)return this._infoByScale[i[s-1]];return this._infoByScale[i[i.length-1]]}getClosestInfoForScale(t){const i=this.scales;return this._infoByScale[t]||(t=i.reduce((s,u)=>Math.abs(u-t)<Math.abs(s-t)?u:s,i[0])),this._infoByScale[t]}scaleToLevel(t){const i=this.scales;if(this._infoByScale[t])return this._infoByScale[t].level;for(let s=i.length-1;s>=0;s--)if(t<i[s])return s===i.length-1?this._infoByScale[i[i.length-1]].level:this._infoByScale[i[s]].level+(i[s]-t)/(i[s]-i[s+1]);return this._infoByScale[i[0]].level}scaleToZoom(t){return this.tileInfo.scaleToZoom(t)}_getTileIdAtLOD(t,i,s){const u=this._infoByLevel[s.level];return t.set(s),i.resolution<u.resolution?null:(i.resolution===u.resolution||(t.level=i.level,t.col=Math.floor(s.col*u.resolution/i.resolution+.01),t.row=Math.floor(s.row*u.resolution/i.resolution+.01)),t)}},b2=class{constructor(){this._map=new Map,this._observable=new rd}get size(){return Pe(this._observable),this._map.size}clear(){this._map.size>0&&(this._map.clear(),this._observable.notify())}delete(t){const i=this._map.delete(t);return i&&this._observable.notify(),i}entries(){return Pe(this._observable),this._map.entries()}forEach(t,i){Pe(this._observable),this._map.forEach((s,u)=>t.call(i,s,u,this),i)}get(t){return Pe(this._observable),this._map.get(t)}has(t){return Pe(this._observable),this._map.has(t)}keys(){return Pe(this._observable),this._map.keys()}set(t,i){return this._map.set(t,i),this._observable.notify(),this}values(){return Pe(this._observable),this._map.values()}[Symbol.iterator](){return Pe(this._observable),this._map[Symbol.iterator]()}get[Symbol.toStringTag](){return this._map[Symbol.toStringTag]}},FY=class{constructor(t,i){this.item=t,this.controller=i,this.promise=null}},zY=class{constructor(t){this._schedule=null,this._task=null,this._deferreds=new b2,this._controllers=new b2,this._processingItems=new b2,this._pausedSignal=KI(!1),this.concurrency=1,t.concurrency&&(this.concurrency=t.concurrency),this._queue=new _y(t.peeker),this.process=t.process;const i=t.scheduler;t.priority&&i&&(this._task=i.registerTask(t.priority,this))}destroy(){this.clear(),this._schedule=Kt(this._schedule),this._task=Kt(this._task)}get updating(){var t;return!!((t=this._task)!=null&&t.updating)||this.running}get length(){return this._processingItems.size+this._queue.length}abort(t){const i=this._controllers.get(t);i&&i.abort()}clear(){this._queue.clear();const t=[];this._controllers.forEach(i=>t.push(i)),this._controllers.clear(),t.forEach(i=>i.abort()),this._processingItems.clear(),this._cancelNext()}forEach(t){this._deferreds.forEach((i,s)=>t(s))}get(t){const i=this._deferreds.get(t);return i?i.promise:void 0}isOngoing(t){return this._processingItems.has(t)}has(t){return this._deferreds.has(t)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(t,i){const s=this.get(t);if(s)return s;const u=new AbortController;let d=null;i&&(d=Rs(i,()=>u.abort()));const y=()=>{const E=this._processingItems.get(t);E&&E.controller.abort(),v(),M.reject(hi())},v=()=>{_.remove(),d!=null&&d.remove(),this._deferreds.delete(t),this._controllers.delete(t),this._queue.remove(t),this._processingItems.delete(t),this._scheduleNext()},_=R9(u.signal,y),M=ts();return this._deferreds.set(t,M),this._controllers.set(t,u),M.promise.then(v,v),this._queue.push(t),this._scheduleNext(),M.promise}last(){return this._queue.last()}peek(){return this._queue.peek()}popLast(){return this._queue.popLast()}reset(){const t=[];this._processingItems.forEach(i=>t.push(i)),this._processingItems.clear();for(const i of t)this._queue.push(i.item),i.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const t=[];for(;this._queue.length;)t.push(this._queue.pop());return this.clear(),t}get running(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(t){for(;!t.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),t.madeProgress()}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=gc(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(t,i){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).resolve(i))}_processError(t,i){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).reject(i))}_canProcessFulfillment(t){return!!this._deferreds.get(t.item)&&this._processingItems.get(t.item)===t}_process(t){if(t==null)return;let i;const s=new AbortController,u=new FY(t,s);this._processingItems.set(t,u);try{i=this.process(t,s.signal)}catch(d){this._processError(u,d)}Oa(i)?(u.promise=i,i.then(d=>this._processResult(u,d),d=>this._processError(u,d))):this._processResult(u,i)}get test(){return{update:t=>this.runTask(t)}}};function VY(e,t){return e.length=0,t.forEach(i=>e.push(i)),e}const _2=new Set,cf=[],Uu=new Map,nx=[0,0];let Jo=class extends Ne{constructor(t){super(t),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:t,process:i,strategy:s}=this;this._queue=new zY({concurrency:t,process:(u,d)=>{const y=this._keyToItem.get(u);return i(y,{signal:d})},peeker:s==="scale-first"?u=>this._peekByScaleFirst(u):u=>this._peekByCenterFirst(u)})}destroy(){this.clear(),this._queue=Ot(this._queue)}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}abort(t){const i=typeof t=="string"?t:t.id;this._queue.abort(i)}clear(){this._queue.clear(),this._keyToItem.clear()}has(t){return typeof t=="string"?this._keyToItem.has(t):this._keyToItem.has(t.id)}isOngoing(t){const i=typeof t=="string"?t:t.id;return this.has(i)&&this._queue.isOngoing(i)}pause(){this._queue.pause()}push(t){const i=t.key.id;if(this._queue.has(i))return this._queue.get(i);const s=this._queue.push(i),u=()=>{this._keyToItem.delete(i)};return this._keyToItem.set(i,t),s.then(u,u),s}reset(){this._queue.reset()}resume(){this._queue.resume()}_peekByScaleFirst(t){if(!this.state)return t.values().next().value;const i=this.tileInfoView;let s=Number.NEGATIVE_INFINITY,u=Number.POSITIVE_INFINITY;t.forEach(E=>{const O=this._keyToItem.get(E),C=this.tileInfoView.getTileScale(O.key);Uu.has(C)||(Uu.set(C,[]),s=Math.max(C,s),u=Math.min(C,u)),Uu.get(C).push(O.key),_2.add(C)});let d=this.state.scale;Uu.has(d)||(VY(cf,_2),cf.sort((E,O)=>E-O),d=cf.reduce((E,O)=>Math.abs(O-d)<Math.abs(E-d)?O:E,cf[0])),d=Math.min(d,s),d=Math.max(d,u);const y=Uu.get(d),v=i.getClosestInfoForScale(d),_=v.getColumnForX(this.state.center[0]),M=v.getRowForY(this.state.center[1]);return y.sort((E,O)=>{const C=v.denormalizeCol(E.col,E.world),R=v.denormalizeCol(O.col,O.world);return Math.sqrt((_-C)*(_-C)+(M-E.row)*(M-E.row))-Math.sqrt((_-R)*(_-R)+(M-O.row)*(M-O.row))}),_2.clear(),Uu.clear(),y[0].id}_peekByCenterFirst(t){if(!this.state)return t.values().next().value;const i=this.tileInfoView,s=this.state.center;let u,d=Number.POSITIVE_INFINITY;return t.forEach(y=>{const v=this._keyToItem.get(y);i.getTileCoords(nx,v.key);const _=Xm(nx,s);_<d&&(d=_,u=v.key)}),u.id}};w([S({constructOnly:!0})],Jo.prototype,"concurrency",void 0),w([S({constructOnly:!0})],Jo.prototype,"process",void 0),w([S()],Jo.prototype,"state",void 0),w([S({constructOnly:!0})],Jo.prototype,"strategy",void 0),w([S({constructOnly:!0})],Jo.prototype,"tileInfoView",void 0),Jo=w([B("esri.views.2d.tiling.TileQueue")],Jo);const r0e=Jo;let GY=class{constructor(t,i,s){this.maxSize=t,this._tileInfoView=i,this._removedFunc=s,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(t){return this._tilePerId.has(t)}get(t){return this._tilePerId.get(t)}pop(t){const i=this._tilePerId.get(t);if(!i)return;const s=i.key.level,u=this._tileKeysPerLevel[s];ox(this._tilePerId,t);for(let d=0;d<u.length;d++)if(u[d].id===t){u.splice(d,1);break}return i.visible=!0,i}add(t){t.visible=!1;const i=t.key,s=i.id;if(this._tilePerId.has(s))return;this._tilePerId.set(s,t);const u=i.level;this._tileKeysPerLevel[u]||(this._tileKeysPerLevel[u]=[]),this._tileKeysPerLevel[u].push(i)}prune(t,i,s){let u=this._tilePerId.size;if(u<=this.maxSize)return;let d=this._tileKeysPerLevel.length-1;for(;u>this.maxSize&&d>=0;)d!==t&&(u=this._pruneAroundCenterTile(u,i,s,d)),d--;u>this.maxSize&&(u=this._pruneAroundCenterTile(u,i,s,t))}_pruneAroundCenterTile(t,i,s,u){const d=this._tileKeysPerLevel[u];if(!d||d.length===0)return t;const{size:y,origin:v}=this._tileInfoView.tileInfo,_=s*y[0],M=s*y[1],E=[0,0],O=[0,0];for(d.sort((C,R)=>(E[0]=v.x+_*(C.col+.5),E[1]=v.y-M*(C.row+.5),O[0]=v.x+_*(R.col+.5),O[1]=v.y-M*(R.row+.5),Gy(E,i)-Gy(O,i)));d.length>0;){const C=d.pop();if(this._removeTile(C.id),--t===this.maxSize)break}return t}_removeTile(t){const i=this._tilePerId.get(t);this._removedFunc&&i&&this._removedFunc(i),ox(this._tilePerId,t)}};function ox(e,t){e.delete(t)}const Ba=new _u(0,0,0,0),kn=new Map,Ha=[],x2=[];let n0e=class{constructor(t){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=t.acquireTile,this.releaseTile=t.releaseTile,this.tileInfoView=t.tileInfoView,t.resampling!=null&&(this.resampling=t.resampling),t.cachePolicy&&(this.cachePolicy=t.cachePolicy),t.coveragePolicy&&(this.coveragePolicy=t.coveragePolicy),t.buffer!=null&&(this.buffer=t.buffer),t.cacheSize&&(this._tileCache=new GY(t.cacheSize,this.tileInfoView,i=>{this.releaseTile(i)}))}destroy(){this.tileIndex.clear()}update(t){var K,ee;const{resampling:i,tileIndex:s}=this,{scale:u,center:d,resolution:y}=t.state,{minScale:v,maxScale:_}=this.tileInfoView,M=!t.stationary&&u>this._previousScale;if(this._previousScale=u,!i&&(u>v||u<_))return this.tiles.length=0,void this.clear();const E=this.tileInfoView.getTileCoverage(t.state,this.buffer,this.resampling,this.coveragePolicy);if(!E)return this.tiles.length=0,void this.clear();const{spans:O,lodInfo:C}=E,{level:R}=C;this.tiles.length=0,s.forEach(Q=>Q.visible=!0);let L=0,G=0;if(O.length>0)for(const{row:Q,colFrom:re,colTo:ne}of O)for(let le=re;le<=ne;le++){L++;const ve=Ba.set(R,Q,C.normalizeCol(le),C.getWorldForColumn(le)).id;let we=s.get(ve);if(we)we.isReady?(kn.set(ve,we),G++):M||this._addParentTile(ve,kn);else{if((K=this._tileCache)!=null&&K.has(ve)){if(we=this._tileCache.pop(ve),this.tileIndex.set(ve,we),we.isReady){kn.set(ve,we),G++;continue}}else we=this.acquireTile(Ba),this.tileIndex.set(ve,we);M||this._addParentTile(ve,kn)}}const U=G===L;for(const[Q,re]of s){if(kn.has(Q))continue;Ba.set(Q);const ne=this.tileInfoView.intersects(E,Ba),le=this.cachePolicy==="purge"?Ba.level!==R:Ba.level>R;!ne||!M&&U?!le&&ne||Ha.push(re):re.isReady?le&&this.cachePolicy==="purge"&&this._hasReadyAncestor(Ba,R)?Ha.push(re):x2.push(re):le&&Ha.push(re)}for(const Q of x2)Q.isReady&&kn.set(Q.key.id,Q);for(const Q of Ha)this._tileCache?this._tileCache.add(Q):this.releaseTile(Q),s.delete(Q.key.id);for(const Q of kn.values())this.tiles.push(Q);for(const Q of s.values())kn.has(Q.key.id)||(Q.visible=!1);(ee=this._tileCache)==null||ee.prune(R,d,y),Up.pool.release(E),x2.length=0,Ha.length=0,kn.clear()}clear(){const{tileIndex:t}=this;for(const i of t.values())this.releaseTile(i);t.clear()}refresh(t){var i;for(const s of this.tileIndex.values())this.tiles.includes(s)?t(s):Ha.push(s);for(const s of Ha)this.releaseTile(s),this.tileIndex.delete(s.key.id);(i=this._tileCache)==null||i.clear()}updateCacheSize(t){this._tileCache&&(this._tileCache.maxSize=t)}_addParentTile(t,i){var d;let s=t,u=null;for(;s=this.tileInfoView.getTileParentId(s),s;)if(this.tileIndex.has(s)){if(u=this.tileIndex.get(s),u==null?void 0:u.isReady){i.has(u.key.id)||i.set(u.key.id,u);break}}else if((d=this._tileCache)!=null&&d.has(s)&&(u=this._tileCache.pop(s),this.tileIndex.set(s,u),u==null?void 0:u.isReady)){i.has(u.key.id)||i.set(u.key.id,u);break}}_hasReadyAncestor(t,i){const s=_n();this.tileInfoView.getTileBounds(s,t,!0);for(const u of this.tileIndex.values())if(u.isReady&&u.key.level>=i&&u.key.level<t.level){const d=_n();if(this.tileInfoView.getTileBounds(d,u.key,!0),OF(d,s))return!0}return!1}};function xA(){const e=new Float32Array(6);return e[0]=1,e[3]=1,e}function qY(e){const t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function UY(e,t,i,s,u,d){const y=new Float32Array(6);return y[0]=e,y[1]=t,y[2]=i,y[3]=s,y[4]=u,y[5]=d,y}function BY(e,t){return new Float32Array(e,t,6)}function SA(e,t,i,s){const u=t[s],d=t[s+1];e[s]=i[0]*u+i[2]*d+i[4],e[s+1]=i[1]*u+i[3]*d+i[5]}function HY(e,t,i,s=0,u=0,d=2){const y=u||t.length/d;for(let v=s;v<y;v++)SA(e,t,i,v*d)}Object.freeze(Object.defineProperty({__proto__:null,clone:qY,create:xA,createView:BY,fromValues:UY,transform:SA,transformMany:HY},Symbol.toStringTag,{value:"Module"}));function WY(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function JY(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function $A(e,t,i,s,u,d,y,v,_,M){return e[0]=t,e[1]=i,e[2]=s,e[3]=u,e[4]=d,e[5]=y,e[6]=v,e[7]=_,e[8]=M,e}function TA(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function KY(e,t){if(e===t){const i=t[1],s=t[2],u=t[5];e[1]=t[3],e[2]=t[6],e[3]=i,e[5]=t[7],e[6]=s,e[7]=u}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function ZY(e,t){const i=t[0],s=t[1],u=t[2],d=t[3],y=t[4],v=t[5],_=t[6],M=t[7],E=t[8],O=E*y-v*M,C=-E*d+v*_,R=M*d-y*_;let L=i*O+s*C+u*R;return L?(L=1/L,e[0]=O*L,e[1]=(-E*s+u*M)*L,e[2]=(v*s-u*y)*L,e[3]=C*L,e[4]=(E*i-u*_)*L,e[5]=(-v*i+u*d)*L,e[6]=R*L,e[7]=(-M*i+s*_)*L,e[8]=(y*i-s*d)*L,e):null}function YY(e,t){const i=t[0],s=t[1],u=t[2],d=t[3],y=t[4],v=t[5],_=t[6],M=t[7],E=t[8];return e[0]=y*E-v*M,e[1]=u*M-s*E,e[2]=s*v-u*y,e[3]=v*_-d*E,e[4]=i*E-u*_,e[5]=u*d-i*v,e[6]=d*M-y*_,e[7]=s*_-i*M,e[8]=i*y-s*d,e}function XY(e){const t=e[0],i=e[1],s=e[2],u=e[3],d=e[4],y=e[5],v=e[6],_=e[7],M=e[8];return t*(M*d-y*_)+i*(-M*u+y*v)+s*(_*u-d*v)}function $4(e,t,i){const s=t[0],u=t[1],d=t[2],y=t[3],v=t[4],_=t[5],M=t[6],E=t[7],O=t[8],C=i[0],R=i[1],L=i[2],G=i[3],U=i[4],K=i[5],ee=i[6],Q=i[7],re=i[8];return e[0]=C*s+R*y+L*M,e[1]=C*u+R*v+L*E,e[2]=C*d+R*_+L*O,e[3]=G*s+U*y+K*M,e[4]=G*u+U*v+K*E,e[5]=G*d+U*_+K*O,e[6]=ee*s+Q*y+re*M,e[7]=ee*u+Q*v+re*E,e[8]=ee*d+Q*_+re*O,e}function L3(e,t,i){const s=t[0],u=t[1],d=t[2],y=t[3],v=t[4],_=t[5],M=t[6],E=t[7],O=t[8],C=i[0],R=i[1];return e[0]=s,e[1]=u,e[2]=d,e[3]=y,e[4]=v,e[5]=_,e[6]=C*s+R*y+M,e[7]=C*u+R*v+E,e[8]=C*d+R*_+O,e}function MA(e,t,i){const s=t[0],u=t[1],d=t[2],y=t[3],v=t[4],_=t[5],M=t[6],E=t[7],O=t[8],C=Math.sin(i),R=Math.cos(i);return e[0]=R*s+C*y,e[1]=R*u+C*v,e[2]=R*d+C*_,e[3]=R*y-C*s,e[4]=R*v-C*u,e[5]=R*_-C*d,e[6]=M,e[7]=E,e[8]=O,e}function QY(e,t,i){const s=i[0],u=i[1],d=i[2];return e[0]=s*t[0],e[1]=s*t[1],e[2]=s*t[2],e[3]=u*t[3],e[4]=u*t[4],e[5]=u*t[5],e[6]=d*t[6],e[7]=d*t[7],e[8]=d*t[8],e}function eX(e,t,i){const s=i[0],u=i[1];return e[0]=s*t[0],e[1]=s*t[1],e[2]=s*t[2],e[3]=u*t[3],e[4]=u*t[4],e[5]=u*t[5],e}function tX(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function iX(e,t){const i=Math.sin(t),s=Math.cos(t);return e[0]=s,e[1]=i,e[2]=0,e[3]=-i,e[4]=s,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function rX(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function sX(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function nX(e,t){const i=t[0],s=t[1],u=t[2],d=t[3],y=i+i,v=s+s,_=u+u,M=i*y,E=s*y,O=s*v,C=u*y,R=u*v,L=u*_,G=d*y,U=d*v,K=d*_;return e[0]=1-O-L,e[3]=E-K,e[6]=C+U,e[1]=E+K,e[4]=1-M-L,e[7]=R-G,e[2]=C-U,e[5]=R+G,e[8]=1-M-O,e}function oX(e,t){const i=t[0],s=t[1],u=t[2],d=t[4],y=t[5],v=t[6],_=t[8],M=t[9],E=t[10],O=E*y-v*M,C=-E*d+v*_,R=M*d-y*_,L=i*O+s*C+u*R;if(!L)return null;const G=1/L;return e[0]=O*G,e[1]=(-E*s+u*M)*G,e[2]=(v*s-u*y)*G,e[3]=C*G,e[4]=(E*i-u*_)*G,e[5]=(-v*i+u*d)*G,e[6]=R*G,e[7]=(-M*i+s*_)*G,e[8]=(y*i-s*d)*G,e}function aX(e,t){const i=t[0],s=t[1],u=t[2],d=t[3],y=t[4],v=t[5],_=t[6],M=t[7],E=t[8],O=t[9],C=t[10],R=t[11],L=t[12],G=t[13],U=t[14],K=t[15],ee=i*v-s*y,Q=i*_-u*y,re=i*M-d*y,ne=s*_-u*v,le=s*M-d*v,ve=u*M-d*_,we=E*G-O*L,Ee=E*U-C*L,Me=E*K-R*L,Le=O*U-C*G,Fe=O*K-R*G,it=C*K-R*U;let Ce=ee*it-Q*Fe+re*Le+ne*Me-le*Ee+ve*we;return Ce?(Ce=1/Ce,e[0]=(v*it-_*Fe+M*Le)*Ce,e[1]=(_*Me-y*it-M*Ee)*Ce,e[2]=(y*Fe-v*Me+M*we)*Ce,e[3]=(u*Fe-s*it-d*Le)*Ce,e[4]=(i*it-u*Me+d*Ee)*Ce,e[5]=(s*Me-i*Fe-d*we)*Ce,e[6]=(G*ve-U*le+K*ne)*Ce,e[7]=(U*re-L*ve-K*Q)*Ce,e[8]=(L*le-G*re+K*ee)*Ce,e):null}function lX(e,t,i){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/i,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function uX(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function hX(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2)}function cX(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e}function IA(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e}function pX(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e}function dX(e,t,i,s){return e[0]=t[0]+i[0]*s,e[1]=t[1]+i[1]*s,e[2]=t[2]+i[2]*s,e[3]=t[3]+i[3]*s,e[4]=t[4]+i[4]*s,e[5]=t[5]+i[5]*s,e[6]=t[6]+i[6]*s,e[7]=t[7]+i[7]*s,e[8]=t[8]+i[8]*s,e}function fX(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function yX(e,t){const i=e[0],s=e[1],u=e[2],d=e[3],y=e[4],v=e[5],_=e[6],M=e[7],E=e[8],O=t[0],C=t[1],R=t[2],L=t[3],G=t[4],U=t[5],K=t[6],ee=t[7],Q=t[8],re=ss();return Math.abs(i-O)<=re*Math.max(1,Math.abs(i),Math.abs(O))&&Math.abs(s-C)<=re*Math.max(1,Math.abs(s),Math.abs(C))&&Math.abs(u-R)<=re*Math.max(1,Math.abs(u),Math.abs(R))&&Math.abs(d-L)<=re*Math.max(1,Math.abs(d),Math.abs(L))&&Math.abs(y-G)<=re*Math.max(1,Math.abs(y),Math.abs(G))&&Math.abs(v-U)<=re*Math.max(1,Math.abs(v),Math.abs(U))&&Math.abs(_-K)<=re*Math.max(1,Math.abs(_),Math.abs(K))&&Math.abs(M-ee)<=re*Math.max(1,Math.abs(M),Math.abs(ee))&&Math.abs(E-Q)<=re*Math.max(1,Math.abs(E),Math.abs(Q))}function mX(e){const t=ss(),i=e[0],s=e[1],u=e[2],d=e[3],y=e[4],v=e[5],_=e[6],M=e[7],E=e[8];return Math.abs(1-(i*i+d*d+_*_))<=t&&Math.abs(1-(s*s+y*y+M*M))<=t&&Math.abs(1-(u*u+v*v+E*E))<=t}const gX=$4,vX=IA;Object.freeze(Object.defineProperty({__proto__:null,add:cX,adjoint:YY,copy:JY,determinant:XY,equals:yX,exactEquals:fX,frob:hX,fromMat2d:sX,fromMat4:WY,fromQuat:nX,fromRotation:iX,fromScaling:rX,fromTranslation:tX,identity:TA,invert:ZY,isOrthoNormal:mX,mul:gX,multiply:$4,multiplyScalar:pX,multiplyScalarAndAdd:dX,normalFromMat4:aX,normalFromMat4Legacy:oX,projection:lX,rotate:MA,scale:QY,scaleByVec2:eX,set:$A,str:uX,sub:vX,subtract:IA,translate:L3,transpose:KY},Symbol.toStringTag,{value:"Module"}));function w1(){const e=new Float32Array(9);return e[0]=1,e[4]=1,e[8]=1,e}function wX(e){const t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function bX(e,t,i,s,u,d,y,v,_){const M=new Float32Array(9);return M[0]=e,M[1]=t,M[2]=i,M[3]=s,M[4]=u,M[5]=d,M[6]=y,M[7]=v,M[8]=_,M}function _X(e,t){return new Float32Array(e,t,9)}Object.freeze(Object.defineProperty({__proto__:null,clone:wX,create:w1,createView:_X,fromValues:bX},Symbol.toStringTag,{value:"Module"}));function EA(){return new Float32Array(2)}function xX(e){const t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t}function fc(e,t){const i=new Float32Array(2);return i[0]=e,i[1]=t,i}function SX(e,t){return new Float32Array(e,t,2)}function kA(){return EA()}function AA(){return fc(1,1)}function OA(){return fc(1,0)}function PA(){return fc(0,1)}const $X=kA(),TX=AA(),MX=OA(),IX=PA();Object.freeze(Object.defineProperty({__proto__:null,ONES:TX,UNIT_X:MX,UNIT_Y:IX,ZEROS:$X,clone:xX,create:EA,createView:SX,fromValues:fc,ones:AA,unitX:OA,unitY:PA,zeros:kA},Symbol.toStringTag,{value:"Module"}));function EX(e){return e instanceof Float32Array&&e.length>=2}function kX(e){return Array.isArray(e)&&e.length>=2}function pf(e){return EX(e)||kX(e)}var D3;const Ci=[0,0];let Ko=D3=class extends pe{constructor(e){super(e),this._viewpoint2D={center:Zt(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new Tt,this.id=0,this.inverseTransform=ba(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=ba(),this.transformNoRotation=ba(),this.displayMat3=w1(),this.displayViewMat3=w1(),this.viewMat3=w1(),this.viewMat2d=xA(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(e){this._set("pixelRatio",e),this._update()}set size(e){this._set("size",e),this._update()}set viewpoint(e){if(e){const t=this._viewpoint2D,i=e.targetGeometry;t.center[0]=i.x,t.center[1]=i.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=i.spatialReference}this._update()}copy(e){const t=this.size,i=this.viewpoint;return i&&t?(this.viewpoint=Gs(i,e.viewpoint),this._set("size",Gp(t,e.size))):(this.viewpoint=e.viewpoint.clone(),this._set("size",[e.size[0],e.size[1]])),this._set("pixelRatio",e.pixelRatio),this}clone(){return new D3({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(e,t,i){return pf(t)?ks(e,t,this.inverseTransform):(Ci[0]=t,Ci[1]=i,ks(e,Ci,this.inverseTransform))}toScreen(e,t,i){return pf(t)?ks(e,t,this.transform):(Ci[0]=t,Ci[1]=i,ks(e,Ci,this.transform))}toScreenNoRotation(e,t,i){return pf(t)?ks(e,t,this.transformNoRotation):(Ci[0]=t,Ci[1]=i,ks(e,Ci,this.transformNoRotation))}toScreenClosest(e,t,i){pf(t)?(Ci[0]=t[0],Ci[1]=t[1]):(Ci[0]=t,Ci[1]=i);const[s]=Ci,{center:u,extent:d,spatialReference:y,transform:v}=this;return(s<d.xmin||s>d.xmax)&&(Ci[0]=lA(s,u[0],y)),ks(e,Ci,v)}getScreenTransform(e,t){const{center:i}=this._viewpoint2D,s=this._get("pixelRatio")||1,u=this._get("size");return x4(e,i,u,t,0,s),e}_update(){const{center:e,spatialReference:t,scale:i,rotation:s}=this._viewpoint2D,u=this._get("pixelRatio")||1,d=this._get("size"),y=new vn({targetGeometry:new Je(e[0],e[1],t),scale:i,rotation:s});if(this._set("viewpoint",y),!d||!t||!i)return;this.resolution=Ac(y),this.rotation=s,this.scale=i,this.spatialReference=t,Gp(this.center,e);const v=d[0]!==0?2/d[0]:0,_=d[1]!==0?-2/d[1]:0;$A(this.displayMat3,v,0,0,0,_,0,-1,1,1);const M=TA(this.viewMat3),E=fc(d[0]/2,d[1]/2),O=fc(-d[0]/2,-d[1]/2),C=q9(s);L3(M,M,E),MA(M,M,C),L3(M,M,O),$4(this.displayViewMat3,this.displayMat3,M);const R=v4(this.viewMat2d,E);return Ym(R,R,C),Vp(R,R,O),dY(this.extent,y,d),S4(this.transform,y,d,u),m4(this.inverseTransform,this.transform),bY(this.transformNoRotation,y,d,u),this.worldScreenWidth=xY(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};w([S({readOnly:!0})],Ko.prototype,"id",void 0),w([S({value:1,json:{write:!0}})],Ko.prototype,"pixelRatio",null),w([S({json:{write:!0}})],Ko.prototype,"size",null),w([S()],Ko.prototype,"spatialReference",void 0),w([S({type:vn,json:{write:!0}})],Ko.prototype,"viewpoint",null),Ko=D3=w([B("esri.views.2d.ViewState")],Ko);const ax=Ko;var F3,z3;let no=F3=class extends Ne{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new F3({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};w([S()],no.prototype,"left",void 0),w([S()],no.prototype,"top",void 0),w([S()],no.prototype,"right",void 0),w([S()],no.prototype,"bottom",void 0),no=F3=w([B("esri.views.2d.PaddedViewState.Padding")],no);let uh=z3=class extends ax{constructor(...e){super(...e),this.paddedViewState=new ax,this._updateContent=(()=>{const t=Zt();return()=>{const i=this._get("size"),s=this._get("padding");if(!i||!s)return;const u=this.paddedViewState;_i(t,s.left+s.right,s.top+s.bottom),qp(t,i,t),Gp(u.size,t);const d=u.viewpoint;d&&(this.viewpoint=d)}})(),this.addHandles(Ge(()=>[this.size,this.padding],()=>this._updateContent(),ku)),this.padding=new no,this.size=[0,0]}set padding(e){this._set("padding",e||new no)}set viewpoint(e){if(e){const t=e.clone();this.paddedViewState.viewpoint=e,$Y(t,e,this._get("size"),this._get("padding"));const i=this._viewpoint2D,s=t.targetGeometry;i.center[0]=s.x,i.center[1]=s.y,i.rotation=t.rotation,i.scale=t.scale,i.spatialReference=s.spatialReference,this._update()}}clone(){return new z3({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};w([S()],uh.prototype,"paddedViewState",void 0),w([S({type:no})],uh.prototype,"padding",null),w([S()],uh.prototype,"viewpoint",null),uh=z3=w([B("esri.views.2d.PaddedViewState")],uh);const AX=uh;let Xi=class extends Ne{constructor(t){super(t),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([Ge(()=>{var i;return(i=this.constraints)==null?void 0:i.version},i=>{this.constraints&&i&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},ku)])}get center(){if(!this.ready)return this._get("center");const{center:t,spatialReference:i}=this.state.paddedViewState;return this.state.commitProperty("id"),new Je({x:t[0],y:t[1],spatialReference:i})}set center(t){if(t==null)return;if(!this.ready)return void this._set("center",t);let i;try{i=this._project(t,this.state.spatialReference)}catch(u){return void de.getLogger(this).error(new ae("mapview:invalid-center","could not project the value in the view's spatial reference",{input:t,error:u}))}const s=this.viewpoint;C3(s,s,i),this.viewpoint=s}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(t){if(t==null)return;if(!t.width||!t.height)return void de.getLogger(this).error(new ae("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",t),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let i;try{i=this._project(t,this.state.spatialReference)}catch(u){return void de.getLogger(this).error(new ae("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:u}))}const s=this.viewpoint;fY(s,s,i,this.state.size,{constraints:this.constraints}),this.viewpoint=s}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(t){this.ready?(this.state.padding=t,this._set("padding",this.state.padding)):this._set("padding",t)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(t){if(isNaN(t))return;if(!this.ready)return void this._set("rotation",t);const i=this.viewpoint;MY(i,i,t),this.viewpoint=i}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(t){if(!t||isNaN(t))return;if(!this.ready){this._set("scale",t),this._set("zoom",void 0);const s=this._get("extent");return void(s&&(this._set("extent",void 0),this._set("center",s.center)))}const i=this.viewpoint;ix(i,i,t),this.viewpoint=i}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(t){var d;if(t==null)return;if(!this.ready)return this._set("viewpoint",t),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let i,s;try{i=this._project(t,this.state.spatialReference),!t.scale||isNaN(t.scale)?s=new ae("mapview:invalid-viewpoint",`invalid scale value of ${t.scale}`):t.targetGeometry==null&&(s=new ae("mapview:invalid-viewpoint","geometry not defined"))}catch(y){s=new ae("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:y})}if(s)return void de.getLogger(this).error(s);this._scaleBeforeChangingSpatialReference=null;const u=new vn({targetGeometry:new Je,scale:0,rotation:0});Gs(u,i),(d=this.constraints)==null||d.constrain(u,this.state.paddedViewState.viewpoint),this.state.viewpoint=u,this._set("viewpoint",u)}get zoom(){var t;return this.ready?((t=this.constraints)==null?void 0:t.scaleToZoom(this.scale))??-1:this._get("zoom")}set zoom(t){var u,d;if(!(t>=0))return;if(!this.ready){this._set("zoom",t),this._set("scale",void 0);const y=this._get("extent");return void(y&&(this._set("extent",void 0),this._set("center",y.center)))}const i=((u=this.constraints)==null?void 0:u.zoomToScale(t))??0;if(!i)return void this._set("zoom",-1);const s=this.viewpoint;ix(s,s,i),this.viewpoint=s,this._set("zoom",((d=this.constraints)==null?void 0:d.scaleToZoom(this.scale))??-1)}getUserStartupOptions(t){if(!t[0]&&!t[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:i,constraints:s}=this,u=this._get("center"),d=this._get("extent"),y=this._get("scale"),v=this._get("rotation"),_=this._get("viewpoint"),M=this._get("zoom"),E=M!=null&&s!=null&&s.zoomToScale(M)||void 0;let O,C,R;const L=_==null?void 0:_.rotation,G=_==null?void 0:_.targetGeometry;(G==null?void 0:G.type)==="extent"?O=G:(G==null?void 0:G.type)==="point"&&(C=G,R=_==null?void 0:_.scale);const U=d??O;return{center:u??C??(U==null?void 0:U.center),rotation:v??L,scale:(y??E??R??(U&&Kh(U,[t[0]-i.left-i.right,t[1]-i.top-i.bottom])))||void 0}}startup(t,i,s,u){var y;const d=t.targetGeometry;try{this._project(t,s)}catch(v){de.getLogger(this).warn(new is("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:d.toJSON(),spatialReference:s,error:v})),t.targetGeometry=u||new Je({x:0,y:0,spatialReference:s})}(y=this.constraints)==null||y.fit(t),this._set("state",new AX({padding:this.padding,size:i,viewpoint:t})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[t,i],spatialReference:s,rotation:u,scale:d}=this.state.paddedViewState,y=new Je({x:t,y:i,spatialReference:s});this._set("viewpoint",null),this._set("extent",null),this._set("center",y),this._set("zoom",-1),this._set("rotation",u),this._set("scale",d),this._set("state",null)}changeSpatialReference(t){var _;const i=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=i.scale;else{const M=i.viewpoint.clone();M.scale=this._scaleBeforeChangingSpatialReference,i.viewpoint=M}const s=i.clone(),[u,d]=i.center;let y=null;try{y=this._project(new Je({x:u,y:d,spatialReference:i.spatialReference}),t)}catch(M){s5()||de.getLogger(this).warn(new is("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:y==null?void 0:y.toJSON(),spatialReference:t,error:M}))}y||(y=new Je({x:0,y:0,spatialReference:t}));const v=C3(new vn({targetGeometry:new Je,scale:0,rotation:0}),i.viewpoint,y);s.viewpoint=v;try{const E=[i.size[0]/2,i.size[1]/2],O=[E[0]+20,E[1]],C=i.toMap([0,0],O),{x:R,y:L}=this._project(new Je({x:C[0],y:C[1],spatialReference:i.spatialReference}),t);C[0]=R,C[1]=L,s.toScreen(C,C);const G=SY(E,C,O),U=Math.hypot(C[0]-E[0],C[1]-E[1])/20;!Number.isFinite(U)||Math.abs(U)>4?(v.rotation=0,v.targetGeometry=new Je({x:0,y:0,spatialReference:t})):(v.scale*=U,v.scale>oe("mapview-srswitch-adjust-rotation-scale-threshold")?v.rotation=0:v.rotation+=Number.isFinite(G)?G:0)}catch{}(_=this._get("constraints"))==null||_.constrain(v,void 0),this._get("state").viewpoint=v}resize(t,i){var y;if(!this.ready)return;const s=this.state;let u=this.state.paddedViewState.viewpoint;const d=this.state.paddedViewState.size.concat();s.size=[t,i],TY(u,u,d,this.state.paddedViewState.size,this.resizeAlign),u=((y=this.constraints)==null?void 0:y.constrain(u,void 0))??u,this.state.viewpoint=u}toMap(t){if(!this.ready)return null;const i=[0,0],[s,u]=this.state.toMap(i,[t.x,t.y]),d=this.state.spatialReference;return new Je({x:s,y:u,spatialReference:d})}toScreen(t,i){if(!this.ready)return null;const s=this._project(t,this.state.spatialReference),u=[s.x,s.y];return(i==null?void 0:i.pickClosestTarget)===!1?this.state.toScreen(u,u):this.state.toScreenClosest(u,u),ir(u[0],u[1])}_project(t,i){var d;const s=(t==null?void 0:t.targetGeometry)||t;if(!i)return t;if(!s)return null;if(i.imageCoordinateSystem||(d=s.spatialReference)!=null&&d.imageCoordinateSystem||Xt(i,s.spatialReference))return t;const u=Na(s,i);if(!u)throw new ae("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:s,spatialReference:i});return OX(t)?(t.targetGeometry=u,t):u}};function OX(e){return(e==null?void 0:e.declaredClass)==="esri.Viewpoint"}w([S({type:Je})],Xi.prototype,"center",null),w([S()],Xi.prototype,"constraints",void 0),w([S({type:Tt})],Xi.prototype,"extent",null),w([S({value:{top:0,right:0,bottom:0,left:0},cast:e=>({top:0,right:0,bottom:0,left:0,...e})})],Xi.prototype,"padding",null),w([S()],Xi.prototype,"ready",void 0),w([S()],Xi.prototype,"resizeAlign",void 0),w([S({readOnly:!0})],Xi.prototype,"resolution",null),w([S({type:Number})],Xi.prototype,"rotation",null),w([S({type:Number})],Xi.prototype,"scale",null),w([S({readOnly:!0})],Xi.prototype,"state",void 0),w([S({type:vn})],Xi.prototype,"viewpoint",null),w([S()],Xi.prototype,"zoom",null),Xi=w([B("esri.views.2d.ViewStateManager")],Xi);function T4(e,t){switch(t){case"primary":return e.pointerType==="touch"||e.button===0;case"secondary":return e.pointerType!=="touch"&&e.button===2;case"tertiary":return e.pointerType!=="touch"&&e.button===1}}let lx=class extends mi{constructor(t,i){super(!0),this._view=t,this.registerIncoming("double-click",i,s=>this._handleDoubleClick(s,i))}_handleDoubleClick(t,i){T4(t.data,"primary")&&(t.stopPropagation(),i?this._view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this._view.mapViewNavigation.zoomIn([t.data.x,t.data.y]))}},PX=class extends mi{constructor(t,i,s){super(!0),this.view=t,this.pointerType=i,this.registerIncoming("double-tap-drag",s,u=>this._handleDoubleTapDrag(u))}_handleDoubleTapDrag(t){const{data:i}=t,{pointerType:s}=i;if(s!==this.pointerType)return;t.stopPropagation();const{action:u,delta:d}=i,{view:y}=this,{mapViewNavigation:v}=y;switch(u){case"begin":{const{scale:_}=y;this._startScale=_,this._currentScale=_,this._previousDelta=d,v.begin();break}case"update":{if(this._previousDelta.y===d.y)return;this._previousDelta=d;const _=1.015**d.y,M=this._startScale*_,E=M/this._currentScale;v.setViewpointImmediate(E),this._currentScale=M;break}case"end":{const{constraints:_}=y,{effectiveLODs:M,snapToZoom:E}=_;if(!E||!M)return void v.end();const O=_.snapScale(this._currentScale),C=(d.y>0?Math.max(O,_.snapToPreviousScale(this._startScale)):Math.min(O,_.snapToNextScale(this._startScale)))/this._currentScale;v.zoom(C);break}}}},eg=class{constructor(t){this._callbacks=t,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(t){const i=t.data,s=i.pointers.size;switch(i.action){case"start":this._currentCount=s,this._emitStart(t);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=s,this._emitStart(t);break;case"update":this._emitUpdate(t);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=s,this._emitStart(t);break;case"end":this._emitEnd(t),this._currentCount=0}this._previousEvent=t}_emitStart(t){var i,s;this._startEvent=t,(s=(i=this._callbacks).condition)!=null&&s.call(i,this._currentCount,t)&&this._callbacks.start(this._currentCount,t,this._startEvent)}_emitUpdate(t){var i,s;(s=(i=this._callbacks).condition)!=null&&s.call(i,this._currentCount,t)&&this._callbacks.update(this._currentCount,t,this._startEvent)}_emitEnd(t){var i,s;(s=(i=this._callbacks).condition)!=null&&s.call(i,this._currentCount,t)&&this._callbacks.end(this._currentCount,t,this._startEvent),this._startEvent=null}},CX=class extends mi{constructor(t,i,s){super(!0),this.view=t,this.pointerAction=i,this.registerIncoming("drag",s,u=>this._handleDrag(u)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(t){super.onInstall(t),this._dragEventSeparator=new eg({start:(i,s)=>{this.view.mapViewNavigation.pan.begin(this.view,s.data),s.stopPropagation()},update:(i,s)=>{this.view.mapViewNavigation.pan.update(this.view,s.data),s.stopPropagation()},end:(i,s)=>{this.view.mapViewNavigation.pan.end(this.view,s.data),s.stopPropagation()},condition:(i,s)=>i===1&&T4(s.data,this.pointerAction)})}_handleDrag(t){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},jX=class extends mi{constructor(t,i,s){super(!0),this._view=t,this.pointerAction=i;const u=this._view.mapViewNavigation;this._dragEventSeparator=new eg({start:(d,y)=>{u.rotate.begin(this._view,y.data),y.stopPropagation()},update:(d,y)=>{u.rotate.update(this._view,y.data),y.stopPropagation()},end:(d,y)=>{u.rotate.end(),y.stopPropagation()},condition:(d,y)=>d===1&&T4(y.data,this.pointerAction)}),this.registerIncoming("drag",s,d=>this._dragEventSeparator.handle(d))}};function fs(e){let t=e*e;return e<0&&(t*=-1),t}function NX(e){return e.translation[0]=0,e.translation[1]=0,e.translation[2]=0,e.heading=0,e.tilt=0,e}function RX(e,t,i){const s=i,u=e.state,d=e.device,y=t.tiltDirection==="forward-down"?1:-1,v=1;return d.deviceType==="standard"?(s.translation[0]=fs(u.axes[0]),s.translation[1]=fs(u.axes[1]),s.translation[2]=fs(u.buttons[7])-fs(u.buttons[6]),s.heading=fs(u.axes[2]),s.tilt=fs(u.axes[3])):d.deviceType==="spacemouse"&&(s.translation[0]=1.2*fs(u.axes[0]),s.translation[1]=1.2*fs(u.axes[1]),s.translation[2]=2*-fs(u.axes[2]),s.heading=1.2*fs(u.axes[5]),s.tilt=1.2*fs(u.axes[3])),s.tilt*=y,A$(s.translation,s.translation,v),s}function LX(e){return e.translation[0]===0&&e.translation[1]===0&&e.translation[2]===0&&e.heading===0&&e.tilt===0&&e.zoom===0}let DX=class extends mi{constructor(t){super(!0),this._view=t,this._frameTask=null,this._watchHandles=new C9,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",i=>this._handleGamePadEvent(i)),this._handle.pause()}onInstall(t){super.onInstall(t),this._watchHandles.add([Ge(()=>{var i;return(i=this._view.navigation.gamepad)==null?void 0:i.enabled},i=>{i?(this._handle.resume(),this._frameTask||(this._frameTask=rc({update:s=>this._frameUpdate(s.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},rr)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(t){const i=this._view.navigation.gamepad.device;i&&t.data.device!==i||this._currentDevice&&this._currentDevice!==t.data.device||(t.data.action==="end"?(this._currentDevice=null,NX(this._transformation)):(this._currentDevice=t.data.device,RX(t.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(t){const i=this._transformation;if(LX(i))return;const s=this._view.viewpoint.clone(),u=this._view.navigation.gamepad.velocityFactor,d=zX*u*t;Qm(s,s,[i.translation[0]*d,-i.translation[1]*d]);const y=1+i.translation[2]*VX*t,v=this._view.constraints.rotationEnabled?-i.heading*FX*t:0,_=this._view.size,M=[_[0]/2,_[1]];fA(s,s,y,v,M,_);const E=this._view.constraints.constrain(s,this._view.viewpoint);this._view.viewpoint=E}};const FX=.06,zX=.7,VX=6e-4;function CA(e){const t=()=>e(document.visibilityState==="visible");return document.addEventListener("visibilitychange",t),{remove:()=>document.addEventListener("visibilitychange",t)}}let GX=class extends mi{constructor(t,i,s){super(!0),this.view=t,this.keys=i,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=u=>{const d=this._keyMap[u.data.key];if(u.modifiers.has("Meta")||u.modifiers.has("Ctrl"))return void this._stopMovement();if(d==null)return;u.stopPropagation(),u.preventDefault();const y=u.type==="key-down";if(this._pressedKeys[y?"add":"delete"](d),y){if(this._direction===d)return;this._direction=d,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})}else{const v=this._timeout===void 0,_=this._pressedKeys.size>0;v||_?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",s,this._handleKey),this.registerIncoming("key-up",s,this._handleKey),this.registerIncoming("blur",s,this._stopMovement),this._visibilityHandle=CA(u=>u?null:this._stopMovement())}onUninstall(){var t;this._stopMovement(),(t=this._visibilityHandle)==null||t.remove()}get _direction(){return this._currentDirection}set _direction(t){const i=this._currentDirection!=null;if(t!=null){if(i||this.view.mapViewNavigation.begin(),this._currentDirection!==t)switch(t){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}}else i&&this.view.mapViewNavigation.stop();this._currentDirection=t}_setTimeout(t){clearTimeout(this._timeout),this._timeout=t===void 0?void 0:setTimeout(()=>{this._timeout=void 0,t()},this._stickyKeyDuration)}},qX=class extends mi{constructor(t,i,s){super(!0),this.view=t,this.keys=i,this._pressed=!1,this._keyToDirection={[i.clockwiseOption1]:"clockwise",[i.clockwiseOption2]:"clockwise",[i.counterClockwiseOption1]:"counterClockwise",[i.counterClockwiseOption2]:"counterClockwise",[i.resetOption1]:"reset",[i.resetOption2]:"reset"},this.registerIncoming("key-down",s,u=>this._handleKeyDown(u)),this.registerIncoming("key-up",s,u=>this._handleKeyUp(u)),this.registerIncoming("blur",s,()=>this._handleStop()),this._visibilityHandle=CA(u=>u?null:this._handleStop())}onUninstall(){var t;(t=this._visibilityHandle)==null||t.remove(),this._handleStop()}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,i){const s=t.modifiers;if(s.size>0&&!s.has("Shift")||!this.view.constraints.rotationEnabled)return;const u=this._keyToDirection[t.data.key];if(this._pressed=u!=null,this._pressed){if(t.preventDefault(),i)switch(this.view.mapViewNavigation.begin(),u){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}};var Dh;(function(e){e[e.IN=0]="IN",e[e.OUT=1]="OUT"})(Dh||(Dh={}));let UX=class extends mi{constructor(t,i,s){super(!0),this.view=t,this.keys=i,this._keysToZoomAction={},this.registerIncoming("key-down",s,u=>this._handleKeyDown(u)),i.zoomIn.forEach(u=>this._keysToZoomAction[u]=Dh.IN),i.zoomOut.forEach(u=>this._keysToZoomAction[u]=Dh.OUT)}_handleKeyDown(t){this._handleKey(t)}_handleKey(t){const i=t.modifiers;if(i.size>0&&!i.has("Shift"))return;const{key:s}=t.data;if(!(s in this._keysToZoomAction))return;const u=this._keysToZoomAction[s],{mapViewNavigation:d}=this.view;let y=null;switch(u){case Dh.IN:y=d.zoomIn();break;case Dh.OUT:y=d.zoomOut();break;default:return}d.begin(),y.then(()=>d.end()),t.stopPropagation()}};const BX=.6;let HX=class extends mi{constructor(t,i){super(!0),this._view=t,this._canZoom=!0,this.registerIncoming("mouse-wheel",i,s=>this._handleMouseWheel(s))}_handleMouseWheel(t){if(!this._view.navigation.mouseWheelZoomEnabled||(t.preventDefault(),t.stopPropagation(),!this._canZoom))return;const i=this._view.mapViewNavigation,{x:s,y:u,deltaY:d}=t.data,y=1/BX**(1/60*d),v=i.zoom(y,[s,u]);v&&(this._canZoom=!1,v.catch(()=>{}).then(()=>{this._canZoom=!0,i.end()}))}},WX=class extends mi{constructor(t){super(!0),this.view=t,this.registerIncoming("drag",s=>this._handleDrag(s)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const i=this.view.mapViewNavigation;this._dragEventSeparator=new eg({start:(s,u)=>{i.pinch.begin(this.view,u.data),u.stopPropagation()},update:(s,u)=>{i.pinch.update(this.view,u.data),u.stopPropagation()},end:(s,u)=>{i.pinch.end(this.view),u.stopPropagation()},condition:s=>s>=2})}_handleDrag(t){this._dragEventSeparator.handle(t)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function ux(e){const t=e.native;return t?{buttons:t.buttons.map(i=>i.pressed?i.value||1:0),axes:t.axes.map(i=>ZX(i,e.axisThreshold))}:{buttons:[],axes:[]}}function JX(e,t){if(e.axes.length!==t.axes.length||e.buttons.length!==t.buttons.length)return!1;for(let i=0;i<e.axes.length;i++)if(e.axes[i]!==t.axes[i])return!1;for(let i=0;i<e.buttons.length;i++)if(e.buttons[i]!==t.buttons[i])return!1;return!0}function KX(e){for(let t=0;t<e.axes.length;t++)if(e.axes[t]!==0)return!1;for(let t=0;t<e.buttons.length;t++)if(e.buttons[t]!==0)return!1;return!0}function ZX(e,t){const i=Math.abs(e);return i<t?0:Math.sign(e)*(i-t)/(1-t)}let YX=class{constructor(t,i){this._element=t,this._input=i,this._hasEventListeners=!1,this._onConnectGamepad=d=>{this._connectGamepad(d.gamepad)},this._onDisconnectGamepad=d=>{const y=d.gamepad,v=y.index,_=this._inputDevices[v];_&&(this._emitGamepadEvent(y,ux(_),!1),this._inputDevices.splice(v,1),this._latestUpdate.splice(v,1),this._input.gamepad.devices.remove(_),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const s="getGamepads"in window.navigator,u=window.isSecureContext;this.supported=s&&u,this.supported&&(this._forEachGamepad(d=>this._connectGamepad(d)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(t){this._hasEventListeners!==t&&(this._hasEventListeners=t,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(t){this._callback=t}_connectGamepad(t){const i=new f4(t);i.deviceType!=="unknown"&&(this._inputDevices[t.index]=i,this._input.gamepad.devices.add(i)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=rc({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const t=document.hasFocus(),i=this._element.contains(document.activeElement),s=this._input.gamepad.enabledFocusMode==="document"&&!t||this._input.gamepad.enabledFocusMode==="view"&&!i;this._forEachGamepad(u=>{const d=this._inputDevices[u.index];if(!d)return;const y=this._latestUpdate[u.index],v=ux(d),_=s||KX(v);y&&(y.timestamp===u.timestamp||!y.active&&_||JX(y.state,v))||this._emitGamepadEvent(u,v,!_)})}_forEachGamepad(t){const i=window.navigator.getGamepads();for(let s=0;s<i.length;s++){const u=i[s];this._validate(u)&&t(u)}}_emitGamepadEvent(t,i,s){const u=this._latestUpdate[t.index],d=u&&u.active;if(!d&&!s)return;const y=!d&&s?"start":d&&s?"update":"end";this._latestUpdate[t.index]={timestamp:t.timestamp,state:i,active:s},this._callback&&this._callback({device:this._inputDevices[t.index],state:i,action:y})}_validate(t){if(!t||!t.connected)return!1;for(let i=0;i<t.axes.length;i++)if(isNaN(t.axes[i]))return!1;return!0}};const hx=oe("edge"),XX=oe("chrome"),QX=oe("ff"),eQ=oe("safari"),cx="esri-view-surface",Bu={touchNone:`${cx}--touch-none`,touchPan:`${cx}--touch-pan`};let jA=class NA{constructor(t,i){this._input=i,this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=t,t.getAttribute("tabindex")||t.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new YX(t,this._input),this._gamepadSource.onEvent=s=>this._callback("gamepad",s)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(t=>{this._releasePointerCaptureSafe(t)}),this._gamepadSource=Ot(this._gamepadSource),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(t){this._browserTouchPanningEnabled=t,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(t){this._callback=t}set activeEvents(t){for(const i in this._active)if(!t||!t.has(i)){const s=this._active[i];this._element.removeEventListener(S2[i],s),delete this._active[i]}t&&t.forEach(i=>{if(!this._active[i]&&S2[i]){const s=(this._eventHandlers[i]||this._handleDefault).bind(this,i);this._element.addEventListener(S2[i],s),this._active[i]=s}}),this._gamepadSource.hasEventListeners=(t==null?void 0:t.has("gamepad"))??!1}setPointerCapture(t,i){i?this._setPointerCatpureSafe(t.pointerId):(this._releasePointerCaptureSafe(t.pointerId),this._activePointerCaptures.delete(t.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?Bu.touchNone:Bu.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?Bu.touchPan:Bu.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(Bu.touchNone),this._element.classList.remove(Bu.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCatpureSafe(t){try{this._element.setPointerCapture(t),this._activePointerCaptures.add(t)}catch{}}_releasePointerCaptureSafe(t){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(t))return;this._element.releasePointerCapture(t)}catch{}}_updateNormalizedPointerLikeEvent(t,i){const s=Pk(this._element,t);return NA.test.disableSubpixelCoordinates&&(s.x=Math.round(s.x),s.y=Math.round(s.y)),i.x=s.x,i.y=s.y,i}_handleKey(t,i){const s=QU(i);s&&t==="key-up"&&this._keyDownState.delete(s);const u={native:i,key:s,repeat:!!s&&this._keyDownState.has(s)};s&&t==="key-down"&&this._keyDownState.add(u.key),this._callback(t,u)}_handlePointer(t,i){const s=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(t,s)}_handlePointerPreventDefault(t,i){const s=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(t,s)}_handleMouseWheel(t,i){let s=i.deltaY;switch(i.deltaMode){case 0:hx&&(s=s/document.documentElement.clientHeight*600);break;case 1:s*=30;break;case 2:s*=900}hx?s*=.7:XX||eQ?s*=.6:QX&&(s*=1.375);const u=100,d=Math.abs(s);d>u&&(s=s/d*200/(1+Math.exp(-.02*(d-u))));const y=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:s});this._callback(t,y)}_handlePointerCaptureLost(t,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(t,i)}_handleDefault(t,i){const s={native:i};i.preventDefault(),this._callback(t,s)}_preventAltKeyDefault(t){t.key==="Alt"&&t.preventDefault()}_preventMultiTouchPanning(t){t.touches.length>1&&t.preventDefault()}};jA.test={disableSubpixelCoordinates:!1};const S2={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let tQ=class extends mi{constructor(){super(!0),this.registerIncoming("context-menu",t=>{t.data.native.preventDefault()})}};const Ii={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};function Uy(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function iQ(e,t){const i=t.x-e.x,s=t.y-e.y;return Math.sqrt(i*i+s*s)}function rQ(e,t){if(t?(t.radius=0,t.center.x=0,t.center.y=0):t={radius:0,center:ir()},e.length===0)return t;if(e.length===1)return t.center.x=e[0].x,t.center.y=e[0].y,t;if(e.length===2){const[Q,re]=e,[ne,le]=[re.x-Q.x,re.y-Q.y];return t.radius=Math.sqrt(ne*ne+le*le)/2,t.center.x=(Q.x+re.x)/2,t.center.y=(Q.y+re.y)/2,t}let i=0,s=0;for(let Q=0;Q<e.length;Q++)i+=e[Q].x,s+=e[Q].y;i/=e.length,s/=e.length;const u=e.map(Q=>Q.x-i),d=e.map(Q=>Q.y-s);let y=0,v=0,_=0,M=0,E=0,O=0,C=0;for(let Q=0;Q<u.length;Q++){const re=u[Q],ne=d[Q],le=re*re,ve=ne*ne;y+=le,v+=ve,_+=re*ne,M+=le*re,E+=ve*ne,O+=re*ve,C+=ne*le}const R=.5*(M+O),L=.5*(E+C),G=y*v-_*_,U=(R*v-L*_)/G,K=(y*L-_*R)/G,ee=ir(U+i,K+s);return{radius:Math.sqrt(U*U+K*K+(y+v)/e.length),center:ee}}function au(e){const{native:t}=e,{pointerId:i,button:s,pointerType:u}=t;return u==="mouse"?`${i}:${s}`:`${u}`}let sQ=class extends mi{constructor(t=Ii.maximumDoubleClickDelay,i=Ii.maximumDoubleClickDistance,s=Ii.maximumDoubleTouchDelay,u=Ii.maximumDoubleTouchDistance,d=mc){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=s,this._maximumDoubleTouchDistance=u,this._clock=d,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=ir(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new eg({start:(y,v)=>this._dragStart(y,v),update:(y,v)=>this._dragUpdate(v),end:(y,v)=>this._dragEnd(v)}),this.registerIncoming("drag",y=>this._dragEventSeparator.handle(y)),this.registerIncoming("pointer-down",y=>this._handlePointerDown(y)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(t=>{t.doubleTapTimeout=Kt(t.doubleTapTimeout)})}get hasPendingInputs(){return mm(this._pointerState,t=>t.doubleTapTimeout!=null)}_clearPointerDown(t){const i=this._pointerState.get(t);i&&(i.doubleTapTimeout=Kt(i.doubleTapTimeout),this._pointerState.delete(t),this.refreshHasPendingInputs())}_createDoubleTapDragData(t,i,s){const{button:u,buttons:d,pointer:y,pointers:v,pointerType:_,timestamp:M}=s;return{action:t,delta:i,button:u,buttons:d,pointer:y,pointers:v,pointerType:_,timestamp:M}}_dragStart(t,i){if(!this._doubleTapDragReady||t!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:s,modifiers:u}=i,{center:d}=s;this._dragStartCenter=d;const y=this._createDoubleTapDragData("begin",ir(0,0),s);this._doubleTapDrag.emit(y,void 0,u),i.stopPropagation()}_dragUpdate(t){if(!this._doubleTapDragActive)return;const{data:i,modifiers:s}=t,{center:u}=i,d=ir(u.x-this._dragStartCenter.x,u.y-this._dragStartCenter.y),y=this._createDoubleTapDragData("update",d,i);this._doubleTapDrag.emit(y,void 0,s),t.stopPropagation()}_dragEnd(t){if(!this._doubleTapDragActive)return;const{data:i,modifiers:s}=t,{center:u}=i,d=ir(u.x-this._dragStartCenter.x,u.y-this._dragStartCenter.y),y=this._createDoubleTapDragData("end",d,i);this._doubleTapDrag.emit(y,void 0,s),this._doubleTapDragActive=!1,t.stopPropagation()}_handlePointerDown(t){const{data:i}=t,s=au(i),u=this._pointerState.get(s),{pointerType:d}=i.native;if(u){const y=d==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(s),Uy(u.event.data,i)>y?this._storePointerDown(t):this._doubleTapDragReady=!0}else this._storePointerDown(t)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(t){const{data:i}=t,{pointerType:s}=i.native,u=au(i),d=s==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,y=this._clock.setTimeout(()=>this._clearPointerDown(u),d);this._pointerState.set(u,{event:t,doubleTapTimeout:y}),this.refreshHasPendingInputs()}},nQ=class extends mi{constructor(t){super(!1),this._navigationTouch=t,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(t,i,s,u){return{action:t,pointerType:this._pointerType,button:this._mouseButton,buttons:i.buttons,timestamp:u,pointers:oQ(this._activePointerMap),pointer:i,angle:s.angle,radius:s.radius,center:s.center}}_addPointer(t){const i=t.native.pointerId,s=df(this._activePointerMap).angle,u={event:t,initialAngle:0,lastAngle:0};this._activePointerMap.set(i,u);const d=b1(u,RA(this._activePointerMap));u.initialAngle=d,u.lastAngle=d,this._updatePointerAngles(s)}_updatePointer(t){if(t&&t.x==null&&t.y==null)return;const i=t.native.pointerId,s=this._activePointerMap.get(i);s?s.event=t:this._addPointer(t)}_removePointer(t){const i=df(this._activePointerMap).angle;this._activePointerMap.delete(t),this._updatePointerAngles(i)}_updatePointerAngles(t){const i=df(this._activePointerMap);this._activePointerMap.forEach(s=>{s.initialAngle=b1(s,i)-t,s.lastAngle=b1(s,i)-t})}_emitEvent(t,i,s){const u=df(this._activePointerMap);this._drag.emit(this._createPayload(t,i,u,s),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(t){const i=t.data.native.pointerId,s=t.timestamp;this._activePointerMap.get(i)&&(this._activePointerMap.size===1?(this._updatePointer(t.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",t.data,s),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(i)):(this._removePointer(i),this._emitEvent("removed",t.data,t.timestamp)))}_handlePointerDrag(t){const i=t.data,s=i.currentEvent,u=t.timestamp;switch(i.action){case"start":case"update":this._isDragging?this._activePointerMap.has(s.native.pointerId)?(this._updatePointer(s),!this._isCurrentDragSuppressed&&this._emitEvent("update",s,u)):(this._addPointer(s),this._emitEvent("added",s,u),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(s),this._pointerType=t.data.startEvent.pointerType,this._mouseButton=t.data.startEvent.button,this._startStateModifiers=t.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",s,u))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function RA(e){const t=[];return e.forEach(i=>{t.push(ir(i.event.x,i.event.y))}),rQ(t)}function df(e){const t=RA(e);let i=0;return e.forEach(s=>{let u=b1(s,t),d=u-s.lastAngle;for(;d>Math.PI;)d-=2*Math.PI;for(;d<-Math.PI;)d+=2*Math.PI;u=s.lastAngle+d,s.lastAngle=u;const y=u-s.initialAngle;i+=y}),i/=e.size||1,{angle:i,radius:t.radius,center:t.center}}function oQ(e){const t=new Map;return e.forEach((i,s)=>t.set(s,i.event)),t}function b1(e,t){const i=e.event,s=i.x-t.center.x,u=i.y-t.center.y;return Math.atan2(u,s)}var px;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward",e[e.Undefined=-1]="Undefined"})(px||(px={}));let aQ=class extends mi{constructor(t=Ii.maximumDoubleClickDelay,i=Ii.maximumDoubleClickDistance,s=Ii.maximumDoubleTouchDelay,u=Ii.maximumDoubleTouchDistance,d=mc){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=s,this._maximumDoubleTouchDistance=u,this._clock=d,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(t){const i=t.data,s=au(i);if(!this._pointerState.has(s)){const u={downButton:i.native.button,x:i.x,y:i.y,immediateDoubleClick:null};this._pointerState.set(s,u),this.startCapturingPointer(i.native)}}_handlePointerUp(t){const i=t.data,s=au(i),u=this._pointerState.get(s);if(u&&u.downButton===i.native.button){const d=u.immediateDoubleClick,y=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;d?(d.timeoutHandle.remove(),Uy(d,t.data)>y?this._startImmediateDoubleClick(t,u):(this._immediateDoubleClick.emit(t.data,void 0,d.modifiers),this._removeState(i))):Uy(u,t.data)>y?this._removeState(i):this._startImmediateDoubleClick(t,u)}}_startImmediateDoubleClick(t,i){const s=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;i.immediateDoubleClick={x:t.data.x,y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(t.data),s)}}_removeState(t){const i=au(t);this._pointerState.delete(i),this.stopCapturingPointer(t.native),this.refreshHasPendingInputs()}},lQ=class extends mi{constructor(t=Ii.maximumClickDelay,i=Ii.movementUntilMouseDrag,s=Ii.movementUntilPenDrag,u=Ii.movementUntilTouchDrag,d=Ii.holdDelay,y=mc){super(!1),this._maximumClickDelay=t,this._movementUntilMouseDrag=i,this._movementUntilPenDrag=s,this._movementUntilTouchDrag=u,this._holdDelay=d,this._clock=y,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",v=>{this._handlePointerLoss(v,"pointer-up")}),this.registerIncoming("pointer-capture-lost",v=>{this._handlePointerLoss(v,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",v=>{this._handlePointerLoss(v,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(t=>{t.holdTimeout=Kt(t.holdTimeout)}),super.onUninstall()}_handlePointerDown(t){const i=t.data,s=i.native.pointerId;let u=null;this._pointerState.size===0&&(u=this._clock.setTimeout(()=>{const y=this._pointerState.get(s);if(y){if(!y.isDragging){const v=y.previousEvent;this._pointerHold.emit(v,void 0,t.modifiers),y.holdEmitted=!0}y.holdTimeout=null}},this._holdDelay));const d={startEvent:i,previousEvent:i,startTimestamp:t.timestamp,isDragging:!1,downButton:i.native.button,holdTimeout:u,modifiers:new Set};this._pointerState.set(s,d),this.startCapturingPointer(i.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(t)}_createPointerDragData(t,i,s){return{action:t,startEvent:i.startEvent,previousEvent:i.previousEvent,currentEvent:s}}_handlePointerMove(t){const i=t.data,s=i.native.pointerId,u=this._pointerState.get(s);u&&(u.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",u,i),void 0,u.modifiers):iQ(i,u.startEvent)>this._getDragThreshold(i.native.pointerType)&&this._startDragging(t),u.previousEvent=i)}_getDragThreshold(t){switch(t){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(t){const i=t.data,s=i.native.pointerId;this._pointerState.forEach(u=>{u.holdTimeout!=null&&(u.holdTimeout.remove(),u.holdTimeout=null),u.isDragging||(u.modifiers=t.modifiers,u.isDragging=!0,s===u.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",u,i)):this._pointerDrag.emit(this._createPointerDragData("start",u,u.previousEvent),t.timestamp))})}_handlePointerLoss(t,i){const s=t.data,u=s.native.pointerId,d=this._pointerState.get(u);d&&(d.holdTimeout!=null&&(d.holdTimeout.remove(),d.holdTimeout=null),d.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",d,i==="pointer-up"?s:d.previousEvent),void 0,d.modifiers):i==="pointer-up"&&d.downButton===s.native.button&&t.timestamp-d.startTimestamp<=this._maximumClickDelay&&!d.holdEmitted&&this._immediateClick.emit(s),this._pointerState.delete(u),this.stopCapturingPointer(s.native),this._pointerState.size===0&&this._moveHandle.pause())}},uQ=class extends mi{constructor(t=Ii.maximumDoubleClickDelay,i=Ii.maximumDoubleClickDistance,s=Ii.maximumDoubleTouchDelay,u=Ii.maximumDoubleTouchDistance,d=mc){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=s,this._maximumDoubleTouchDistance=u,this._clock=d,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this))}onUninstall(){this._pointerState.forEach(t=>t.doubleClickTimer=Kt(t.doubleClickTimer))}get hasPendingInputs(){return mm(this._pointerState,t=>t.doubleClickTimer!=null)}_clearDoubleClickTimer(t,i){const s=this._pointerState.get(t);s&&(s.doubleClickTimer=Kt(s.doubleClickTimer),i&&this._click.emit(s.event.data,void 0,s.event.modifiers),this._pointerState.delete(t),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(t){const i=this._pointerState.get(t);i.pointerDownCount===1&&this._click.emit(i.event.data,void 0,i.event.modifiers),i.doubleClickTimer=null,this._pointerState.delete(t),this.refreshHasPendingInputs()}_getPointerId(t){const{pointerId:i,pointerType:s,button:u}=t.native;return s==="mouse"?`${i}:${u}`:`${s}`}_handleImmediateClick(t){const i=t.data,{pointerType:s}=i.native,u=this._getPointerId(i);if(!this._pointerState.has(u))return void this._startClick(t);const d=this._pointerState.get(u),{data:y,modifiers:v}=d.event,_=s==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;Uy(y,i)>_?(this._clearDoubleClickTimer(u,!0),this._startClick(t)):(this._clearDoubleClickTimer(u,!1),d.pointerDownCount===2&&this._doubleClick.emit(y,void 0,v))}_handlePointerDown(t){const i=au(t.data),s=this._pointerState.get(i);s&&(s.pointerDownCount+=1)}_startClick(t){const{data:i}=t,{native:{pointerType:s}}=i,u=au(i),d=s==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,y=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(u),d),v=1;this._pointerState.set(u,{event:t,doubleClickTimer:y,pointerDownCount:v}),this.refreshHasPendingInputs()}};const ff={counter:"Ctrl",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let ml=class extends Ne{initialize(){const t=()=>{var i;return(i=this.view)==null?void 0:i.ready};this.addHandles([yu(()=>!t(),()=>this._disconnect()),yu(t,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerType(){var t;return(t=this._inputManager)==null?void 0:t.latestPointerType}get latestPointerLocation(){var t;return(t=this._inputManager)==null?void 0:t.latestPointerLocation}get multiTouchActive(){var t;return((t=this._inputManager)==null?void 0:t.multiTouchActive)??!1}_disconnect(){this.view.viewEvents.disconnect(),this._inputManager=Ot(this._inputManager)}_connect(){const t=this.view.surface,i=new jA(t,this.view.input),s=[new aQ,new lQ,new uQ,new nQ(this.view.navigation),new sQ],u=new Gr({eventSource:i,recognizers:s});u.installHandlers("prevent-context-menu",[new tQ],wa.INTERNAL),u.installHandlers("navigation",[new WX(this.view),new DX(this.view),new HX(this.view),new lx(this.view),new lx(this.view,[ff.counter]),new CX(this.view,"primary"),new GX(this.view,ff.pan),new UX(this.view,ff.zoom),new qX(this.view,ff.rotate),new jX(this.view,"secondary"),new PX(this.view,"touch")],wa.INTERNAL),this.view.viewEvents.connect(u),this._source=i,this._inputManager=u,Ge(()=>{var d,y;return(y=(d=this.view)==null?void 0:d.navigation)==null?void 0:y.browserTouchPanEnabled},d=>{this._source&&(this._source.browserTouchPanningEnabled=!d)},rr)}get test(){return{inputManager:this._inputManager}}};w([S()],ml.prototype,"view",void 0),w([S()],ml.prototype,"latestPointerType",null),w([S()],ml.prototype,"latestPointerLocation",null),w([S()],ml.prototype,"multiTouchActive",null),ml=w([B("esri.views.2d.input.MapViewInputManager")],ml);const hQ=ml;var I0e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function LA(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var dx,fx,yx,V3={exports:{}};V3.exports,dx=V3,fx=function(){function e(u,d,y,v,_){t(u,d,y||0,v||u.length-1,_||s)}function t(u,d,y,v,_){for(;v>y;){if(v-y>600){var M=v-y+1,E=d-y+1,O=Math.log(M),C=.5*Math.exp(2*O/3),R=.5*Math.sqrt(O*C*(M-C)/M)*(E-M/2<0?-1:1);t(u,d,Math.max(y,Math.floor(d-E*C/M+R)),Math.min(v,Math.floor(d+(M-E)*C/M+R)),_)}var L=u[d],G=y,U=v;for(i(u,y,d),_(u[v],L)>0&&i(u,y,v);G<U;){for(i(u,G,U),G++,U--;_(u[G],L)<0;)G++;for(;_(u[U],L)>0;)U--}_(u[y],L)===0?i(u,y,U):i(u,++U,v),U<=d&&(y=U+1),d<=U&&(v=U-1)}}function i(u,d,y){var v=u[d];u[d]=u[y],u[y]=v}function s(u,d){return u<d?-1:u>d?1:0}return e},(yx=fx())!==void 0&&(dx.exports=yx);const cQ=LA(V3.exports);function By(e,t){if(!(this instanceof By))return new By(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&(typeof t=="function"?this.toBBox=t:this._initFormat(t)),this.clear()}function pQ(e,t,i){if(!i)return t.indexOf(e);for(var s=0;s<t.length;s++)if(i(e,t[s]))return s;return-1}function Hu(e,t){C0(e,0,e.children.length,t,e)}function C0(e,t,i,s,u){u||(u=hh(null)),u.minX=1/0,u.minY=1/0,u.maxX=-1/0,u.maxY=-1/0;for(var d,y=t;y<i;y++)d=e.children[y],j0(u,e.leaf?s(d):d);return u}function j0(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function mx(e,t){return e.minX-t.minX}function gx(e,t){return e.minY-t.minY}function $2(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function yf(e){return e.maxX-e.minX+(e.maxY-e.minY)}function dQ(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function fQ(e,t){var i=Math.max(e.minX,t.minX),s=Math.max(e.minY,t.minY),u=Math.min(e.maxX,t.maxX),d=Math.min(e.maxY,t.maxY);return Math.max(0,u-i)*Math.max(0,d-s)}function T2(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function mf(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function hh(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function vx(e,t,i,s,u){for(var d,y=[t,i];y.length;)(i=y.pop())-(t=y.pop())<=s||(d=t+Math.ceil((i-t)/s/2)*s,cQ(e,d,t,i,u),y.push(t,d,d,i))}By.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,i=[],s=this.toBBox;if(!mf(e,t))return i;for(var u,d,y,v,_=[];t;){for(u=0,d=t.children.length;u<d;u++)y=t.children[u],mf(e,v=t.leaf?s(y):y)&&(t.leaf?i.push(y):T2(e,v)?this._all(y,i):_.push(y));t=_.pop()}return i},collides:function(e){var t=this.data,i=this.toBBox;if(!mf(e,t))return!1;for(var s,u,d,y,v=[];t;){for(s=0,u=t.children.length;s<u;s++)if(d=t.children[s],mf(e,y=t.leaf?i(d):d)){if(t.leaf||T2(e,y))return!0;v.push(d)}t=v.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,i=e.length;t<i;t++)this.insert(e[t]);return this}var s=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===s.height)this._splitRoot(this.data,s);else{if(this.data.height<s.height){var u=this.data;this.data=s,s=u}this._insert(s,this.data.height-s.height-1,!0)}else this.data=s;return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=hh([]),this},remove:function(e,t){if(!e)return this;for(var i,s,u,d,y=this.data,v=this.toBBox(e),_=[],M=[];y||_.length;){if(y||(y=_.pop(),s=_[_.length-1],i=M.pop(),d=!0),y.leaf&&(u=pQ(e,y.children,t))!==-1)return y.children.splice(u,1),_.push(y),this._condense(_),this;d||y.leaf||!T2(y,v)?s?(i++,y=s.children[i],d=!1):y=null:(_.push(y),M.push(i),i=0,s=y,y=y.children[0])}return this},toBBox:function(e){return e},compareMinX:mx,compareMinY:gx,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var i=[];e;)e.leaf?t.push.apply(t,e.children):i.push.apply(i,e.children),e=i.pop();return t},_build:function(e,t,i,s){var u,d=i-t+1,y=this._maxEntries;if(d<=y)return Hu(u=hh(e.slice(t,i+1)),this.toBBox),u;s||(s=Math.ceil(Math.log(d)/Math.log(y)),y=Math.ceil(d/Math.pow(y,s-1))),(u=hh([])).leaf=!1,u.height=s;var v,_,M,E,O=Math.ceil(d/y),C=O*Math.ceil(Math.sqrt(y));for(vx(e,t,i,C,this.compareMinX),v=t;v<=i;v+=C)for(vx(e,v,M=Math.min(v+C-1,i),O,this.compareMinY),_=v;_<=M;_+=O)E=Math.min(_+O-1,M),u.children.push(this._build(e,_,E,s-1));return Hu(u,this.toBBox),u},_chooseSubtree:function(e,t,i,s){for(var u,d,y,v,_,M,E,O;s.push(t),!t.leaf&&s.length-1!==i;){for(E=O=1/0,u=0,d=t.children.length;u<d;u++)_=$2(y=t.children[u]),(M=dQ(e,y)-_)<O?(O=M,E=_<E?_:E,v=y):M===O&&_<E&&(E=_,v=y);t=v||t.children[0]}return t},_insert:function(e,t,i){var s=this.toBBox,u=i?e:s(e),d=[],y=this._chooseSubtree(u,this.data,t,d);for(y.children.push(e),j0(y,u);t>=0&&d[t].children.length>this._maxEntries;)this._split(d,t),t--;this._adjustParentBBoxes(u,d,t)},_split:function(e,t){var i=e[t],s=i.children.length,u=this._minEntries;this._chooseSplitAxis(i,u,s);var d=this._chooseSplitIndex(i,u,s),y=hh(i.children.splice(d,i.children.length-d));y.height=i.height,y.leaf=i.leaf,Hu(i,this.toBBox),Hu(y,this.toBBox),t?e[t-1].children.push(y):this._splitRoot(i,y)},_splitRoot:function(e,t){this.data=hh([e,t]),this.data.height=e.height+1,this.data.leaf=!1,Hu(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,i){var s,u,d,y,v,_,M,E;for(_=M=1/0,s=t;s<=i-t;s++)y=fQ(u=C0(e,0,s,this.toBBox),d=C0(e,s,i,this.toBBox)),v=$2(u)+$2(d),y<_?(_=y,E=s,M=v<M?v:M):y===_&&v<M&&(M=v,E=s);return E},_chooseSplitAxis:function(e,t,i){var s=e.leaf?this.compareMinX:mx,u=e.leaf?this.compareMinY:gx;this._allDistMargin(e,t,i,s)<this._allDistMargin(e,t,i,u)&&e.children.sort(s)},_allDistMargin:function(e,t,i,s){e.children.sort(s);var u,d,y=this.toBBox,v=C0(e,0,t,y),_=C0(e,i-t,i,y),M=yf(v)+yf(_);for(u=t;u<i-t;u++)d=e.children[u],j0(v,e.leaf?y(d):d),M+=yf(v);for(u=i-t-1;u>=t;u--)d=e.children[u],j0(_,e.leaf?y(d):d),M+=yf(_);return M},_adjustParentBBoxes:function(e,t,i){for(var s=i;s>=0;s--)j0(t[s],e)},_condense:function(e){for(var t,i=e.length-1;i>=0;i--)e[i].children.length===0?i>0?(t=e[i-1].children).splice(t.indexOf(e[i]),1):this.clear():Hu(e[i],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};var G3;const wx=new et({upperLeft:"upper-left",lowerLeft:"lower-left"});let gl=G3=class extends pe{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new G3(ie({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};w([S({type:Tt,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],gl.prototype,"extent",void 0),w([S({type:["view","edit"],json:{write:!0}})],gl.prototype,"mode",void 0),w([S({type:String,json:{read:wx.read,write:wx.write}})],gl.prototype,"originPosition",void 0),w([S({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],gl.prototype,"tolerance",void 0),gl=G3=w([B("esri.rest.support.QuantizationParameters")],gl);const DA=gl;let bx=class FA{constructor(t,i){this.key=new _u(0,0,0,0),this.bounds=_n(),this.objectIds=new Set,this.key.set(i);const s=t.getLODInfoAt(this.key);this.tileInfoView=t,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=s.resolution,this.scale=s.scale,this.level=s.level}get id(){return this.key.id}get extent(){return Tt.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createChildTiles(){const t=this.key.getChildKeys(),i=tr.acquire();for(let s=0;s<t.length;s++)i[s]=new FA(this.tileInfoView,t[s]);return i}getQuantizationParameters(){return DA.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const Wa={added:[],removed:[]},M2=new Set,yQ=new _u(0,0,0,0);let mQ=class extends ja{constructor(t){super(),this._tiles=new Map,this._index=By(9,oe("esri-csp-restrictions")?i=>({minX:i.bounds[0],minY:i.bounds[1],maxX:i.bounds[2],maxY:i.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=t}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(t){return this._tiles.has(t)}get(t){return this._tiles.get(t)}boundsIntersections(t){return this._index.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]})}updateTiles(t){const i={added:[],removed:[]};for(const s of t.added)if(!this.has(s)){const u=new bx(this.tileScheme,s);this._tiles.set(s,u),this._index.insert(u),i.added.push(u)}for(const s of t.removed)if(this.has(s)){const u=this.get(s);this._tiles.delete(s),this._index.remove(u),i.removed.push(u)}this.tiles.length=0,this._tiles.forEach(s=>this.tiles.push(s)),(i.added.length||i.removed.length)&&this.emit("update",i)}setViewState(t){const i=this.tileScheme.getTileCoverage(t,0);if(!i)return;const{spans:s,lodInfo:u}=i,{level:d}=u;if(s.length>0)for(const{row:y,colFrom:v,colTo:_}of s)for(let M=v;M<=_;M++){const E=yQ.set(d,y,u.normalizeCol(M),u.getWorldForColumn(M)).id;if(M2.add(E),!this.has(E)){const O=new bx(this.tileScheme,E);this._tiles.set(E,O),this._index.insert(O),this.tiles.push(O),Wa.added.push(O)}}for(let y=this.tiles.length-1;y>=0;y--){const v=this.tiles[y];M2.has(v.id)||(this._tiles.delete(v.id),this.tiles.splice(y,1),this._index.remove(v),Wa.removed.push(v))}(Wa.added.length||Wa.removed.length)&&this.emit("update",Wa),Up.pool.release(i),M2.clear(),Wa.added.length=0,Wa.removed.length=0}},vl=class extends Ne{constructor(){super(...arguments),this.color=new Ve([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25}equals(t){return this.color.equals(t.color)&&(this.haloColor||this.color).equals(t.haloColor||t.color)&&this.haloOpacity===t.haloOpacity&&this.fillOpacity===t.fillOpacity}};w([S({type:Ve})],vl.prototype,"color",void 0),w([S({type:Ve})],vl.prototype,"haloColor",void 0),w([S()],vl.prototype,"haloOpacity",void 0),w([S()],vl.prototype,"fillOpacity",void 0),vl=w([B("esri.views.2d.support.HighlightOptions")],vl);const zA=vl;async function gQ(e,t,i){const s=jk(t)?Ck(e,t):t;if(!e.ready||isNaN(s.x)||isNaN(s.y))return{screenPoint:s,results:[]};let u=new Set;const d=new Set;let y=!1,v=null,_=null;i!=null&&i.include?xx(i.include,_x(e,C=>{u.add(C),I2(C,R=>d.add(R))},(C,R)=>{d.add(C),u.add(R)},C=>{v||(v=new Set),v.add(C)},C=>u.add(C),()=>y=!0)):(y=!0,u=new Set(e.allLayerViews),u.forEach(C=>{I2(C,R=>d.add(R))})),i!=null&&i.exclude&&xx(i.exclude,_x(e,C=>{u.delete(C),I2(C,R=>d.delete(R))},C=>d.delete(C),C=>{_||(_=new Set),_.add(C)}));const M=e.allLayerViews.filter(C=>!C.suspended&&u.has(C)).reverse(),E=e.toMap(s);let O=[...y?e.graphicsView.hitTest(E).map(C=>({type:"graphic",graphic:C,layer:null,mapPoint:E})):[],...await Promise.all(M.map(C=>C.hitTest(E,s)).toArray())].filter(tc).flat().filter(tc);return O=O.filter(C=>{var R;return C.type!=="graphic"||((R=C.layer)==null?void 0:R.type)!=="subtype-group"||d.has(C.graphic.layer)}),v&&(O=O.filter(C=>!("graphic"in C)||!C.graphic||(v==null?void 0:v.has(q3(C.graphic))))),_&&(O=O.filter(C=>!("graphic"in C)||!C.graphic||!(_!=null&&_.has(q3(C.graphic))))),{screenPoint:s,results:O}}function _x(e,t,i,s,u,d){return y=>{if(y instanceof ka){if(y.layer===e)d==null||d();else{const v=e.allLayerViews.find(_=>_.layer===y.layer);v&&(u==null||u(v))}s(q3(y))}else if(y.type==="subtype-sublayer"){const v=e.allLayerViews.find(_=>_.layer===y.parent);v&&i(y,v)}else{const v=e.allLayerViews.find(_=>_.layer===y);v&&t(v)}}}function xx(e,t){if(e)if(B1(e))for(const i of e)if(B1(i))for(const s of i)t(s);else t(i);else t(e)}function q3(e){var i,s;const t=e.getObjectId();return t?`${((i=e.layer)==null?void 0:i.uid)??((s=e.sourceLayer)==null?void 0:s.uid)??"MapView"}/${t}`:`"MapView/${e.uid}`}function I2({layer:e},t){e.type==="subtype-group"&&e.sublayers.forEach(i=>{t(i)})}function vQ(e,t,i){const{ctx:s,canvas:u}=VA(e,i),d=s.getImageData(0,0,e.width,e.height),y=_Q(u,t);return GA(u),{dataUrl:y,data:d}}function wQ(e,t){const{ctx:i,canvas:s}=VA(e,t),u=i.getImageData(0,0,e.width,e.height);return GA(s),u}function VA(e,t){const i=bQ();t.premultipliedAlpha&&MQ(e),i.width=e.width,i.height=e.height;const s=i.getContext("2d",{willReadFrequently:!0});return s.putImageData(e,0,0),t.flipY&&TQ(s),{ctx:s,canvas:i}}function GA(e){e.width=0,e.height=0}function bQ(){return E2==null&&(E2=document.createElement("canvas")),E2}let E2=null;function _Q(e,t){const i=IQ[t.format],s=t.quality/100;return e.toDataURL(i,s)}function xQ(e,t){const i=$Q(e),s=kQ[i];return{format:i,quality:rs(t??s,0,100)}}function SQ(e,t){return t/Math.max(e[0],e[1])}function A0e(e,t,i,s=0,u=0,d=e.width-s,y=e.height-u,v=!1){const{data:_}=e,{width:M,height:E,data:O}=t,C=d/M,R=y/E,L=Math.ceil(C/2),G=Math.ceil(R/2),U=e.width;for(let K=0;K<E;K++)for(let ee=0;ee<M;ee++){const Q=4*(ee+(v?E-K-1:K)*M);let re=0,ne=0,le=0,ve=0,we=0,Ee=0;const Me=(K+.5)*R;for(let Le=Math.floor(K*R);Le<(K+1)*R;Le++){const Fe=Math.abs(Me-(Le+.5))/G,it=(ee+.5)*C,Ce=Fe*Fe;for(let Ut=Math.floor(ee*C);Ut<(ee+1)*C;Ut++){const vr=Math.abs(it-(Ut+.5))/L,Dt=Math.sqrt(Ce+vr*vr);if(Dt>=1)continue;let lt=2*Dt*Dt*Dt-3*Dt*Dt+1;const wr=4*(s+Ut+(u+Le)*U);Ee+=lt*_[wr+3],ne+=lt,!i&&_[wr+3]<255&&(lt=lt*_[wr+3]/255),le+=lt*_[wr],ve+=lt*_[wr+1],we+=lt*_[wr+2],re+=lt}}O[Q]=le/re,O[Q+1]=ve/re,O[Q+2]=we/re,O[Q+3]=Ee/ne}return t}function $Q(e){switch(e){case"png":case"jpg":case"jpeg":return e;default:return EQ}}function TQ(e){e.save(),e.globalCompositeOperation="copy",e.scale(1,-1),e.translate(0,-e.canvas.height),e.drawImage(e.canvas,0,0),e.restore()}function MQ(e){const t=e.data,i=t.length;for(let s=0;s<i;s+=4){const u=t[s+3];if(u!==255&&u>0){const d=255/u;t[s]=t[s]*d,t[s+1]=t[s+1]*d,t[s+2]=t[s+2]*d}}}const IQ={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},Sx=98,EQ="png",kQ={png:100,jpg:Sx,jpeg:Sx},qA={flipY:!0,premultipliedAlpha:!0};async function AQ(e,t){const i=await UA(e,t),{format:s,quality:u}=xQ(t==null?void 0:t.format,t==null?void 0:t.quality);return vQ(i,{format:s,quality:u,rotation:0,disableDecorations:!1},qA)}async function OQ(e,t){const i=await UA(e,t);return wQ(i,qA)}function UA(e,t){const i=jQ(t||{},CQ(e.stage,e.size),e.size,e.padding),s=PQ(t,e.allLayerViews);return e.stage.takeScreenshot(i,s,e.backgroundColor,t==null?void 0:t.rotation)}function PQ(e={},t){if(!e.layers)return;const i=[];return e.layers.forEach(s=>{const u=t.find(d=>d.layer.id===s.id);u!=null&&u.container&&i.push(u.container)}),i}function CQ(e,t){return Math.min(4,SQ(t,Math.min(4096,e.context.parameters.maxTextureSize)))}function jQ(e,t,i,s){e.ignorePadding&&(s={left:0,right:0,top:0,bottom:0});let u=null;e.width!=null&&e.height!=null?u=[e.width,e.height]:e.width==null&&e.height!=null?u=[e.height,e.height]:e.width!=null&&e.height==null?u=[e.width,e.width]:e.width==null&&e.height==null&&(u=null);const d=i[0]-(s.left+s.right),y=i[1]-(s.top+s.bottom);let v,_,M=e.area||{x:0,y:0,width:d,height:y};if(u){const E=d/y,O=u[0]/u[1];if(O>E){const C=M.width/O;M={x:M.x,y:Math.round(M.y+(M.height-C)/2),width:M.width,height:Math.round(C)}}else{const C=M.height*O;M={x:Math.round(M.x+(M.width-C)/2),y:M.y,width:Math.round(C),height:M.height}}}else u=[M.width,M.height];return u[0]>M.width?(v=Math.min(u[0]/M.width,t),_=u[0]/M.width/v):(v=1,_=u[0]/M.width),{cropArea:{x:Math.round((M.x+s.left)*v),y:Math.round((M.y+s.top)*v),width:Math.round(M.width*v),height:Math.round(M.height*v)},outputScale:_,resolutionScale:v}}const $x=160;let N0=class extends Ne{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval(()=>{performance.now()-this._timestamp>=$x&&this.clear()},$x))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};w([S()],N0.prototype,"_timer",void 0),w([S()],N0.prototype,"stationary",null),N0=w([B("esri.views.2d.support.StationaryManager")],N0);const NQ=e=>e.includes("Brush");let BA=class{constructor(){this._names=new Map}begin(t){this._names.has(t)||(this._names.set(t,!1),NQ(t)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${t}.Start`))}end(t){this._names.has(t)&&!this._names.get(t)&&(this._names.set(t,!0),performance.mark(`Esri.${t}.End`))}record(t){this._names.has(t)||(this._names.set(t,!0),performance.mark(`Esri.${t}`))}};var ui;function U3(e,t,i={}){const s=t===ui.WEBGL1?"webgl":"webgl2";return e.getContext(s,i)||null}function C0e(e,t,i={}){const s=HA(e);for(const u of s){const d=U3(t,u,i);if(d)return d}return null}function HA(e){if(e==="3d")return[ui.WEBGL2];const t=oe("esri-force-webgl");return t===ui.WEBGL1||t===ui.WEBGL2?[t]:oe("mac")&&oe("chrome")?[ui.WEBGL1,ui.WEBGL2]:[ui.WEBGL2,ui.WEBGL1]}(function(e){e[e.WEBGL1=1]="WEBGL1",e[e.WEBGL2=2]="WEBGL2"})(ui||(ui={}));let k2,A2;function RQ(e){const t=HA(e);for(;t.length>1;){const i=Tx(t.shift());if(i.available)return i}return Tx(t.shift())}function Tx(e){switch(e){case ui.WEBGL1:return LQ();case ui.WEBGL2:return DQ()}}function LQ(){return k2||(k2=VQ()),k2}function DQ(){return A2||(A2=GQ()),A2}let WA=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsElementIndexUint=!1,this.supportsStandardDerivatives=!1,this.supportsInstancedArrays=!1,this.supportsTextureFloat=!1,this.supportsTextureHalfFloat=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}},FQ=class extends WA{constructor(){super(...arguments),this.type=ui.WEBGL1}},zQ=class extends WA{constructor(){super(...arguments),this.type=ui.WEBGL2,this.supportsElementIndexUint=!0,this.supportsStandardDerivatives=!0,this.supportsInstancedArrays=!0,this.supportsTextureFloat=!0,this.supportsTextureHalfFloat=!0}};function JA(e,t){if(e===ui.WEBGL1&&typeof WebGLRenderingContext>"u"||e===ui.WEBGL2&&typeof WebGL2RenderingContext>"u")return null;const i=document.createElement("canvas");if(!i)return null;let s=U3(i,e,{failIfMajorPerformanceCaveat:!0});if(s==null&&(s=U3(i,e),s!=null&&(t.majorPerformanceCaveat=!0)),s==null)return s;if(e===ui.WEBGL1){const d=s.getParameter(s.VERSION),y=d==null?void 0:d.match(/^WebGL\s+([\d.]*)/);if(y){const v=parseFloat(y[1]);t.available=v>=.94}}else t.available=!0;t.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE),t.supportsVertexShaderSamplers=s.getParameter(s.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const u=s.getShaderPrecisionFormat(s.FRAGMENT_SHADER,s.HIGH_FLOAT);return u&&(t.supportsHighPrecisionFragment=u.precision>0),s}function VQ(){const e=new FQ,t=JA(ui.WEBGL1,e);return t==null||(e.supportsElementIndexUint=t.getExtension("OES_element_index_uint")!==null,e.supportsStandardDerivatives=t.getExtension("OES_standard_derivatives")!==null,e.supportsInstancedArrays=t.getExtension("ANGLE_instanced_arrays")!==null,e.supportsTextureFloat=t.getExtension("OES_texture_float")!==null,e.supportsTextureHalfFloat=t.getExtension("OES_texture_half_float")!==null,e.supportsColorBufferFloat=t.getExtension("WEBGL_color_buffer_float")!==null,e.supportsColorBufferFloatBlend=t.getExtension("EXT_float_blend")!==null,e.supportsColorBufferHalfFloat=t.getExtension("EXT_color_buffer_half_float")!==null),e}function GQ(){const e=new zQ,t=JA(ui.WEBGL2,e);return t==null||(e.supportsColorBufferFloat=t.getExtension("EXT_color_buffer_float")!==null,e.supportsColorBufferFloatBlend=t.getExtension("EXT_float_blend")!==null,e.supportsColorBufferHalfFloat=e.supportsColorBufferFloat||t.getExtension("EXT_color_buffer_half_float")!==null),e}function qQ(e){const t=RQ(e);if(!t.available)return new ae("webgl:required",e==="3d"?"WebGL2 is required but not supported.":"WebGL is required but not supported.",new Error().stack);if(e==="3d"&&t.majorPerformanceCaveat)return new ae("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");if(!t.supportsHighPrecisionFragment)return new ae("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!t.supportsVertexShaderSamplers)return new ae("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported.");if(t.type===ui.WEBGL1){if(!t.supportsElementIndexUint)return new ae("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");if(!t.supportsStandardDerivatives)return new ae("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!t.supportsInstancedArrays)return new ae("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null}function UQ(e){return e&&"nodeType"in e}function BQ(e){return e&&typeof e.render=="function"}const Mx={component:"esri-component"};let wl=class extends Ne{constructor(){super(...arguments),this.widget=null}destroy(){var t;this.node=null,(t=this.widget)==null||t.destroy()}get id(){var t,i;return this._get("id")??((t=this.widget)==null?void 0:t.id)??((i=this.node)==null?void 0:i.id)}set id(t){this._set("id",t)}set node(t){const i=this._get("node");t!==i&&(t&&t.classList.add(Mx.component),i&&i.classList.remove(Mx.component),this._set("node",t))}castNode(t){var i;return(i=this.widget)==null||i.destroy(),t?typeof t=="string"||UQ(t)?(this._set("widget",null),z5(t)):(BQ(t)&&!t.domNode&&(t.domNode=document.createElement("div")),this._set("widget",t),t.domNode):(this._set("widget",null),null)}};w([S()],wl.prototype,"id",null),w([S()],wl.prototype,"node",null),w([mt("node")],wl.prototype,"castNode",null),w([S({readOnly:!0})],wl.prototype,"widget",void 0),wl=w([B("esri.views.ui.Component")],wl);const _1=wl,KA="calcite-mode-";function HQ(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replaceAll(/\s|'|"/g,"")}function WQ(){return HQ().startsWith("dark")}function JQ(){return`${KA}${WQ()?"dark":"light"}`}function KQ(e){ZQ(e),e.classList.add(JQ())}function ZQ(e){Array.from(e.classList).forEach(t=>{t.startsWith(KA)&&e.classList.remove(t)})}const YQ={left:0,top:0,bottom:0,right:0},ZA={bottom:30,top:15,right:15,left:15},An="esri-ui",or={ui:An,corner:`${An}-corner`,innerContainer:`${An}-inner-container`,manualContainer:`${An}-manual-container`,cornerContainer:`${An}-corner-container`,topLeft:`${An}-top-left`,topRight:`${An}-top-right`,bottomLeft:`${An}-bottom-left`,bottomRight:`${An}-bottom-right`};function XQ(e){return e&&!e._started&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}function gf(e){return e===0?"0":`${e}px`}function O2(e){const t=typeof e=="object"&&e!==null&&Object.getPrototypeOf(e);return(t===null||t===Object.prototype)&&("component"in e||"index"in e||"position"in e)?e:null}function P2(e,{top:t,bottom:i,left:s,right:u}){e.style.top=t,e.style.bottom=i,e.style.left=s,e.style.right=u}let ln=class extends ja.EventedAccessor{constructor(t){super(t),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._locale=Pr(),this.view=null,this._applyViewPadding=()=>{const i=this.container;i&&P2(i,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const i=this._innerContainer;i&&P2(i,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([Ge(()=>{var t;return[(t=this.view)==null?void 0:t.padding,this.container]},this._applyViewPadding,rr),Ge(()=>this.padding,this._applyUIPadding,rr),Ge(()=>[this.container,this._locale],([t,i])=>{t&&t.setAttribute("lang",i)},rr),S5(t=>{this._locale=t})])}destroy(){this.container=null;for(const t of this._components)t.destroy();this._components.length=0,this._componentMap.clear()}set container(t){const i=this._get("container");t!==i&&(t&&(t.classList.add(or.ui),KQ(t),this._attachContainers(t)),i&&(i.classList.remove(or.ui),P2(i,{top:"",bottom:"",left:"",right:""}),MI(i)),this._set("container",t))}get height(){var d;const t=((d=this.view)==null?void 0:d.height)??0;if(t===0)return t;const i=this._getViewPadding(),{top:s,bottom:u}=i;return Math.max(t-s-u,0)}get padding(){return this._get("padding")}set padding(t){this._overrideIfSome("padding",t)}castPadding(t){return typeof t=="number"?{bottom:t,top:t,right:t,left:t}:{...ZA,...t}}get width(){var d;const t=((d=this.view)==null?void 0:d.width)??0;if(t===0)return t;const i=this._getViewPadding(),{left:s,right:u}=i;return Math.max(t-s-u,0)}add(t,i){let s,u,d;if(Array.isArray(t))return void t.forEach(v=>this.add(v,i));const y=O2(t);y&&({index:s,position:i,component:t,key:u}=y),i&&typeof i=="object"&&({index:s,key:u,position:i,internal:d}=i),!t||i&&!this._isValidPosition(i)||this._add(t,i,s,u,d)}remove(t,i){var u;if(!t)return;if(Array.isArray(t))return t.map(d=>this.remove(d,i));const s=this._find(t);if(s){if(this._componentMap.has(s)&&((u=this._componentMap.get(s))==null?void 0:u.key)!==i)return;const d=this._components.indexOf(s),y=s.node.parentNode;return y==null||y.removeChild(s.node),this._componentMap.delete(s),this._components.splice(d,1)[0]}}empty(t,i={removeInternal:!1}){if(Array.isArray(t)){for(const d of t)this.empty(d,i);return}const s=this._positionNameToContainerLookup[t??"manual"],u=Array.prototype.slice.call(s.children).map(d=>this._findByNode(d)).filter(d=>{var y;return d==null?!1:!(((y=this._componentMap.get(d))==null?void 0:y.internal)??!1)||i.removeInternal});for(const d of u)this.remove(d)}move(t,i){if(Array.isArray(t)&&t.forEach(y=>this.move(y,i)),!t)return;let s;const u=O2(t)||O2(i);if(u&&(s=u.index,i=u.position,t=u.component||t),i&&!this._isValidPosition(i))return;const d=this.remove(t);d&&this.add(d,{position:i,index:s})}find(t){if(!t)return null;const i=this._findById(t);return i&&(i.widget||i.node)}getComponents(t,i={includeInternal:!1}){return t?Array.isArray(t)?t.flatMap(s=>this._getComponentsAtPosition(s,i)):this._getComponentsAtPosition(t,i):this._components.filter(s=>{var u;return i.includeInternal||!((u=this._componentMap.get(s))!=null&&u.internal)}).map(({widget:s,node:u})=>s??u)}getPosition(t){for(const i in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[i].contains(t))return i;return null}_add(t,i,s,u,d){t instanceof _1||(t=new _1({node:t})),this._place({component:t,position:i,index:s}),this._components.push(t),this._componentMap.set(t,{key:u,internal:d})}_find(t){return t?t instanceof _1?this._findByComponent(t):typeof t=="string"?this._findById(t):this._findByNode(t.domNode||t):null}_getViewPadding(){var t;return((t=this.view)==null?void 0:t.padding)??YQ}_attachContainers(t){t.appendChild(this._innerContainer),t.appendChild(this._manualContainer)}_initContainers(){const t=document.createElement("div");t.classList.add(or.innerContainer,or.cornerContainer);const i=document.createElement("div");i.classList.add(or.innerContainer,or.manualContainer);const s=document.createElement("div");s.classList.add(or.topLeft,or.corner),t.appendChild(s);const u=document.createElement("div");u.classList.add(or.topRight,or.corner),t.appendChild(u);const d=document.createElement("div");d.classList.add(or.bottomLeft,or.corner),t.appendChild(d);const y=document.createElement("div");y.classList.add(or.bottomRight,or.corner),t.appendChild(y),this._innerContainer=t,this._manualContainer=i;const v=OU();this._cornerNameToContainerLookup={"top-left":s,"top-right":u,"bottom-left":d,"bottom-right":y,"top-leading":v?u:s,"top-trailing":v?s:u,"bottom-leading":v?y:d,"bottom-trailing":v?d:y},this._positionNameToContainerLookup={manual:i,...this._cornerNameToContainerLookup}}_isValidPosition(t){return!!this._positionNameToContainerLookup[t]}_place(t){const i=t.position??"manual",{component:s,index:u}=t,d=this._positionNameToContainerLookup[i],y=u!=null&&u>-1;if(XQ(s.widget)&&s.widget.startup(),!y)return void d.appendChild(s.node);const v=Array.from(d.children);if(u===0)return void(d.firstChild?i7(s.node,d.firstChild):d.appendChild(s.node));u>=v.length?d.appendChild(s.node):i7(s.node,v[u])}_toPixelPosition(t){return{top:gf(t.top),left:gf(t.left),right:gf(t.right),bottom:gf(t.bottom)}}_findByComponent(t){return this._components.find(i=>i===t)??null}_findById(t){return this._components.find(({id:i})=>i===t)??null}_findByNode(t){return this._components.find(({node:i})=>i===t)??null}_getComponentsAtPosition(t,i){const s=this._positionNameToContainerLookup[t];return Array.prototype.slice.call(s.children).map(u=>this._findByNode(u)).filter(tc).filter(u=>{var d;return i.includeInternal||!((d=this._componentMap.get(u))!=null&&d.internal)}).map(({widget:u,node:d})=>u??d)}};w([S()],ln.prototype,"_locale",void 0),w([S()],ln.prototype,"container",null),w([S()],ln.prototype,"height",null),w([S({value:ZA})],ln.prototype,"padding",null),w([mt("padding")],ln.prototype,"castPadding",null),w([S()],ln.prototype,"view",void 0),w([S()],ln.prototype,"width",null),ln=w([B("esri.views.ui.UI")],ln);const QQ=ln,eee="randomUUID"in crypto;function M4(){if(eee)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=i=>e[i].toString(16).padStart(4,"0");return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}function F0e(){return`{${M4().toUpperCase()}}`}function tee(){return`{${M4()}}`}const iee={handleInterceptedEvent:(e,t,i,s)=>(e.scheduleRender(),t.properties[`on${s.type}`].apply(t.properties.bind||i,[s]))},ree={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,i)=>{t.charAt(0)==="-"?e.style.setProperty(t,i):e.style[t]=i}},see=e=>({...ree,...e}),nee=(e,t)=>{const i=[];for(;e&&e!==t;)i.push(e),e=e.parentNode;return i},oee=(e,t)=>e.find(t),Ix=(e,t,i=!1)=>{let s=e;return t.forEach((u,d)=>{const y=s!=null&&s.children?oee(s.children,v=>v.domNode===u):void 0;i&&!y&&d!==t.length-1||(s=y)}),s},aee=e=>{let t;const i={...iee,...e},s=see(i),u=s.performanceLogger;let d,y=!0,v=!1;const _=[],M=[],E=(C,R,L)=>{var K;let G;s.eventHandlerInterceptor=(ee,Q,re,ne)=>function(le){let ve;u("domEvent",le);const we=nee(le.currentTarget,G.domNode),Ee=we.some(Le=>{var Fe;return customElements.get((Fe=Le==null?void 0:Le.tagName)==null?void 0:Fe.toLowerCase())});if(le.eventPhase===Event.CAPTURING_PHASE||!Ee)we.reverse(),ve=Ix(G.getLastRender(),we);else{const Le=le.composedPath(),Fe=Le.slice(Le.indexOf(le.currentTarget),Le.indexOf(G.domNode)).reverse();ve=Ix(G.getLastRender(),Fe,!0)}let Me;return ve&&(Me=i.handleInterceptedEvent(t,ve,this,le)),u("domEventProcessed",le),Me},(K=i.postProcessProjectionOptions)==null||K.call(i,s);const U=L();G=C(R,U,s),s.eventHandlerInterceptor=void 0,_.push(G),M.push(L),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(G,U)};let O=()=>{if(d=void 0,y){y=!1,u("renderStart",void 0);for(let C=0;C<_.length;C++){const R=M[C]();u("rendered",void 0),_[C].update(R),u("patched",void 0)}u("renderDone",void 0),y=!0}};return i.modifyDoRenderImplementation&&(O=i.modifyDoRenderImplementation(O,_,M)),t={renderNow:O,scheduleRender:()=>{d||v||(d=requestAnimationFrame(O))},stop:()=>{d&&(cancelAnimationFrame(d),d=void 0),v=!0},resume:()=>{v=!1,y=!0,t.scheduleRender()},append:(C,R)=>{E(ya.append,C,R)},insertBefore:(C,R)=>{E(ya.insertBefore,C,R)},merge:(C,R)=>{E(ya.merge,C,R)},replace:(C,R)=>{E(ya.replace,C,R)},detach:C=>{for(let R=0;R<M.length;R++)if(M[R]===C)return M.splice(R,1),_.splice(R,1)[0];throw new Error("renderFunction was not found")}},t},ch={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,safari10:!1,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,cssVarShim:!1,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,dynamicImportShim:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0};let ph,YA,tg,XA=!1,Hy=!1,I4=!1,Er=!1,Ex=null,B3=!1;const lee=e=>{const t=new URL(e,$i.$resourcesUrl$);return t.origin!==vd.location.origin?t.href:t.pathname},uee=e=>$i.$resourcesUrl$=e,xu=(e,t="")=>()=>{},kx="http://www.w3.org/1999/xlink",Ax={},hee="http://www.w3.org/2000/svg",cee="http://www.w3.org/1999/xhtml",pee=e=>e!=null,E4=e=>(e=typeof e,e==="object"||e==="function");function dee(e){var t,i,s;return(s=(i=(t=e.head)===null||t===void 0?void 0:t.querySelector('meta[name="csp-nonce"]'))===null||i===void 0?void 0:i.getAttribute("content"))!==null&&s!==void 0?s:void 0}const QA=(e,t,...i)=>{let s=null,u=null,d=null,y=!1,v=!1;const _=[],M=O=>{for(let C=0;C<O.length;C++)s=O[C],Array.isArray(s)?M(s):s!=null&&typeof s!="boolean"&&((y=typeof e!="function"&&!E4(s))&&(s=String(s)),y&&v?_[_.length-1].$text$+=s:_.push(y?Wy(null,s):s),v=y)};if(M(i),t){t.key&&(u=t.key),t.name&&(d=t.name);{const O=t.className||t.class;O&&(t.class=typeof O!="object"?O:Object.keys(O).filter(C=>O[C]).join(" "))}}if(typeof e=="function")return e(t===null?{}:t,_,mee);const E=Wy(e,null);return E.$attrs$=t,_.length>0&&(E.$children$=_),E.$key$=u,E.$name$=d,E},Wy=(e,t)=>{const i={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return i.$attrs$=null,i.$key$=null,i.$name$=null,i},fee={},yee=e=>e&&e.$tag$===fee,mee={forEach:(e,t)=>e.map(Ox).forEach(t),map:(e,t)=>e.map(Ox).map(t).map(gee)},Ox=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),gee=e=>{if(typeof e.vtag=="function"){const i=Object.assign({},e.vattrs);return e.vkey&&(i.key=e.vkey),e.vname&&(i.name=e.vname),QA(e.vtag,i,...e.vchildren||[])}const t=Wy(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},vee=e=>Bee.map(t=>t(e)).find(t=>!!t),wee=(e,t)=>e!=null&&!E4(e)?t&4?e==="false"?!1:e===""||!!e:t&2?parseFloat(e):t&1?String(e):e:e,bee=e=>e,z0e=(e,t,i)=>{const s=bee(e);return{emit:u=>_ee(s,t,{bubbles:!!(i&4),composed:!!(i&2),cancelable:!!(i&1),detail:u})}},_ee=(e,t,i)=>{const s=$i.ce(t,i);return e.dispatchEvent(s),s},Px=new WeakMap,xee=(e,t,i)=>{let s=Ky.get(e);Jee&&i?(s=s||new CSSStyleSheet,typeof s=="string"?s=t:s.replaceSync(t)):s=t,Ky.set(e,s)},See=(e,t,i,s)=>{var u;let d=eO(t,i);const y=Ky.get(d);if(e=e.nodeType===11?e:zs,y)if(typeof y=="string"){e=e.head||e;let v=Px.get(e),_;if(v||Px.set(e,v=new Set),!v.has(d)){{_=zs.createElement("style"),_.innerHTML=y;const M=(u=$i.$nonce$)!==null&&u!==void 0?u:dee(zs);M!=null&&_.setAttribute("nonce",M),e.insertBefore(_,e.querySelector("link"))}v&&v.add(d)}}else e.adoptedStyleSheets.includes(y)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,y]);return d},$ee=e=>{const t=e.$cmpMeta$,i=e.$hostElement$,s=t.$flags$,u=xu("attachStyles",t.$tagName$),d=See(i.shadowRoot?i.shadowRoot:i.getRootNode(),t,e.$modeName$);s&10&&(i["s-sc"]=d,i.classList.add(d+"-h"),s&2&&i.classList.add(d+"-s")),u()},eO=(e,t)=>"sc-"+(t&&e.$flags$&32?e.$tagName$+"-"+t:e.$tagName$),Cx=(e,t,i,s,u,d)=>{if(i!==s){let y=Lx(e,t),v=t.toLowerCase();if(t==="class"){const _=e.classList,M=jx(i),E=jx(s);_.remove(...M.filter(O=>O&&!E.includes(O))),_.add(...E.filter(O=>O&&!M.includes(O)))}else if(t==="style"){for(const _ in i)(!s||s[_]==null)&&(_.includes("-")?e.style.removeProperty(_):e.style[_]="");for(const _ in s)(!i||s[_]!==i[_])&&(_.includes("-")?e.style.setProperty(_,s[_]):e.style[_]=s[_])}else if(t!=="key")if(t==="ref")s&&s(e);else if(!e.__lookupSetter__(t)&&t[0]==="o"&&t[1]==="n")t[2]==="-"?t=t.slice(3):Lx(vd,v)?t=v.slice(2):t=v[2]+t.slice(3),i&&$i.rel(e,t,i,!1),s&&$i.ael(e,t,s,!1);else{const _=E4(s);if((y||_&&s!==null)&&!u)try{if(e.tagName.includes("-"))e[t]=s;else{const E=s??"";t==="list"?y=!1:(i==null||e[t]!=E)&&(e[t]=E)}}catch{}let M=!1;v!==(v=v.replace(/^xlink\:?/,""))&&(t=v,M=!0),s==null||s===!1?(s!==!1||e.getAttribute(t)==="")&&(M?e.removeAttributeNS(kx,t):e.removeAttribute(t)):(!y||d&4||u)&&!_&&(s=s===!0?"":s,M?e.setAttributeNS(kx,t,s):e.setAttribute(t,s))}}},Tee=/\s/,jx=e=>e?e.split(Tee):[],tO=(e,t,i,s)=>{const u=t.$elm$.nodeType===11&&t.$elm$.host?t.$elm$.host:t.$elm$,d=e&&e.$attrs$||Ax,y=t.$attrs$||Ax;for(s in d)s in y||Cx(u,s,d[s],void 0,i,t.$flags$);for(s in y)Cx(u,s,d[s],y[s],i,t.$flags$)},Jy=(e,t,i,s)=>{const u=t.$children$[i];let d=0,y,v,_;if(XA||(I4=!0,u.$tag$==="slot"&&(ph&&s.classList.add(ph+"-s"),u.$flags$|=u.$children$?2:1)),u.$text$!==null)y=u.$elm$=zs.createTextNode(u.$text$);else if(u.$flags$&1)y=u.$elm$=zs.createTextNode("");else{if(Er||(Er=u.$tag$==="svg"),y=u.$elm$=zs.createElementNS(Er?hee:cee,u.$flags$&2?"slot-fb":u.$tag$),Er&&u.$tag$==="foreignObject"&&(Er=!1),tO(null,u,Er),pee(ph)&&y["s-si"]!==ph&&y.classList.add(y["s-si"]=ph),u.$children$)for(d=0;d<u.$children$.length;++d)v=Jy(e,u,d,y),v&&y.appendChild(v);u.$tag$==="svg"?Er=!1:y.tagName==="foreignObject"&&(Er=!0)}return y["s-hn"]=tg,u.$flags$&3&&(y["s-sr"]=!0,y["s-cr"]=YA,y["s-sn"]=u.$name$||"",_=e&&e.$children$&&e.$children$[i],_&&_.$tag$===u.$tag$&&e.$elm$&&Bp(e.$elm$,!1)),y},Bp=(e,t)=>{$i.$flags$|=1;const i=e.childNodes;for(let s=i.length-1;s>=0;s--){const u=i[s];u["s-hn"]!==tg&&u["s-ol"]&&(sO(u).insertBefore(u,k4(u)),u["s-ol"].remove(),u["s-ol"]=void 0,I4=!0),t&&Bp(u,t)}$i.$flags$&=-2},iO=(e,t,i,s,u,d)=>{let y=e["s-cr"]&&e["s-cr"].parentNode||e,v;for(y.shadowRoot&&y.tagName===tg&&(y=y.shadowRoot);u<=d;++u)s[u]&&(v=Jy(null,i,u,e),v&&(s[u].$elm$=v,y.insertBefore(v,k4(t))))},rO=(e,t,i,s,u)=>{for(;t<=i;++t)(s=e[t])&&(u=s.$elm$,aO(s),Hy=!0,u["s-ol"]?u["s-ol"].remove():Bp(u,!0),u.remove())},Mee=(e,t,i,s)=>{let u=0,d=0,y=0,v=0,_=t.length-1,M=t[0],E=t[_],O=s.length-1,C=s[0],R=s[O],L,G;for(;u<=_&&d<=O;)if(M==null)M=t[++u];else if(E==null)E=t[--_];else if(C==null)C=s[++d];else if(R==null)R=s[--O];else if(vf(M,C))dh(M,C),M=t[++u],C=s[++d];else if(vf(E,R))dh(E,R),E=t[--_],R=s[--O];else if(vf(M,R))(M.$tag$==="slot"||R.$tag$==="slot")&&Bp(M.$elm$.parentNode,!1),dh(M,R),e.insertBefore(M.$elm$,E.$elm$.nextSibling),M=t[++u],R=s[--O];else if(vf(E,C))(M.$tag$==="slot"||R.$tag$==="slot")&&Bp(E.$elm$.parentNode,!1),dh(E,C),e.insertBefore(E.$elm$,M.$elm$),E=t[--_],C=s[++d];else{for(y=-1,v=u;v<=_;++v)if(t[v]&&t[v].$key$!==null&&t[v].$key$===C.$key$){y=v;break}y>=0?(G=t[y],G.$tag$!==C.$tag$?L=Jy(t&&t[d],i,y,e):(dh(G,C),t[y]=void 0,L=G.$elm$),C=s[++d]):(L=Jy(t&&t[d],i,d,e),C=s[++d]),L&&sO(M.$elm$).insertBefore(L,k4(M.$elm$))}u>_?iO(e,s[O+1]==null?null:s[O+1].$elm$,i,s,d,O):d>O&&rO(t,u,_)},vf=(e,t)=>e.$tag$===t.$tag$?e.$tag$==="slot"?e.$name$===t.$name$:e.$key$===t.$key$:!1,k4=e=>e&&e["s-ol"]||e,sO=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,dh=(e,t)=>{const i=t.$elm$=e.$elm$,s=e.$children$,u=t.$children$,d=t.$tag$,y=t.$text$;let v;y===null?(Er=d==="svg"?!0:d==="foreignObject"?!1:Er,d==="slot"||tO(e,t,Er),s!==null&&u!==null?Mee(i,s,t,u):u!==null?(e.$text$!==null&&(i.textContent=""),iO(i,null,t,u,0,u.length-1)):s!==null&&rO(s,0,s.length-1),Er&&d==="svg"&&(Er=!1)):(v=i["s-cr"])?v.parentNode.textContent=y:e.$text$!==y&&(i.data=y)},nO=e=>{const t=e.childNodes;let i,s,u,d,y,v;for(s=0,u=t.length;s<u;s++)if(i=t[s],i.nodeType===1){if(i["s-sr"]){for(y=i["s-sn"],i.hidden=!1,d=0;d<u;d++)if(v=t[d].nodeType,t[d]["s-hn"]!==i["s-hn"]||y!==""){if(v===1&&y===t[d].getAttribute("slot")){i.hidden=!0;break}}else if(v===1||v===3&&t[d].textContent.trim()!==""){i.hidden=!0;break}}nO(i)}},Ps=[],oO=e=>{let t,i,s,u,d,y,v=0;const _=e.childNodes,M=_.length;for(;v<M;v++){if(t=_[v],t["s-sr"]&&(i=t["s-cr"])&&i.parentNode)for(s=i.parentNode.childNodes,u=t["s-sn"],y=s.length-1;y>=0;y--)i=s[y],!i["s-cn"]&&!i["s-nr"]&&i["s-hn"]!==t["s-hn"]&&(Nx(i,u)?(d=Ps.find(E=>E.$nodeToRelocate$===i),Hy=!0,i["s-sn"]=i["s-sn"]||u,d?d.$slotRefNode$=t:Ps.push({$slotRefNode$:t,$nodeToRelocate$:i}),i["s-sr"]&&Ps.map(E=>{Nx(E.$nodeToRelocate$,i["s-sn"])&&(d=Ps.find(O=>O.$nodeToRelocate$===i),d&&!E.$slotRefNode$&&(E.$slotRefNode$=d.$slotRefNode$))})):Ps.some(E=>E.$nodeToRelocate$===i)||Ps.push({$nodeToRelocate$:i}));t.nodeType===1&&oO(t)}},Nx=(e,t)=>e.nodeType===1?e.getAttribute("slot")===null&&t===""||e.getAttribute("slot")===t:e["s-sn"]===t?!0:t==="",aO=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(aO)},Iee=(e,t)=>{const i=e.$hostElement$,s=e.$cmpMeta$,u=e.$vnode$||Wy(null,null),d=yee(t)?t:QA(null,null,t);tg=i.tagName,s.$attrsToReflect$&&(d.$attrs$=d.$attrs$||{},s.$attrsToReflect$.map(([y,v])=>d.$attrs$[v]=i[y])),d.$tag$=null,d.$flags$|=4,e.$vnode$=d,d.$elm$=u.$elm$=i.shadowRoot||i,ph=i["s-sc"],YA=i["s-cr"],XA=(s.$flags$&1)!==0,Hy=!1,dh(u,d);{if($i.$flags$|=1,I4){oO(d.$elm$);let y,v,_,M,E,O,C=0;for(;C<Ps.length;C++)y=Ps[C],v=y.$nodeToRelocate$,v["s-ol"]||(_=zs.createTextNode(""),_["s-nr"]=v,v.parentNode.insertBefore(v["s-ol"]=_,v));for(C=0;C<Ps.length;C++)if(y=Ps[C],v=y.$nodeToRelocate$,y.$slotRefNode$){for(M=y.$slotRefNode$.parentNode,E=y.$slotRefNode$.nextSibling,_=v["s-ol"];_=_.previousSibling;)if(O=_["s-nr"],O&&O["s-sn"]===v["s-sn"]&&M===O.parentNode&&(O=O.nextSibling,!O||!O["s-nr"])){E=O;break}(!E&&M!==v.parentNode||v.nextSibling!==E)&&v!==E&&(!v["s-hn"]&&v["s-ol"]&&(v["s-hn"]=v["s-ol"].parentNode.nodeName),M.insertBefore(v,E))}else v.nodeType===1&&(v.hidden=!0)}Hy&&nO(d.$elm$),$i.$flags$&=-2,Ps.length=0}},Eee=(e,t)=>{},A4=(e,t)=>(e.$flags$|=16,Eee(e,e.$ancestorComponent$),Zee(()=>kee(e,t))),kee=(e,t)=>{const i=e.$hostElement$,s=xu("scheduleUpdate",e.$cmpMeta$.$tagName$),u=i;let d;return t?d=Zh(u,"componentWillLoad"):d=Zh(u,"componentWillUpdate"),d=Rx(d,()=>Zh(u,"componentWillRender")),s(),Rx(d,()=>Aee(e,u,t))},Aee=async(e,t,i)=>{const s=e.$hostElement$,u=xu("update",e.$cmpMeta$.$tagName$);s["s-rc"],i&&$ee(e);const d=xu("render",e.$cmpMeta$.$tagName$);Oee(e,t,s),d(),u(),Pee(e)},Oee=(e,t,i)=>{try{Ex=t,t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,(ch.hasRenderFn||ch.reflect)&&(ch.vdomRender||ch.reflect)&&(ch.hydrateServerSide||Iee(e,t))}catch(v){gd(v,e.$hostElement$)}return Ex=null,null},Pee=e=>{const t=e.$cmpMeta$.$tagName$,i=e.$hostElement$,s=xu("postUpdate",t),u=i;e.$ancestorComponent$,Zh(u,"componentDidRender"),e.$flags$&64?(Zh(u,"componentDidUpdate"),s()):(e.$flags$|=64,Zh(u,"componentDidLoad"),s())},V0e=e=>{{const t=md(e),i=t.$hostElement$.isConnected;return i&&(t.$flags$&18)===2&&A4(t,!1),i}},Zh=(e,t,i)=>{if(e&&e[t])try{return e[t](i)}catch(s){gd(s)}},Rx=(e,t)=>e&&e.then?e.then(t):t(),Cee=(e,t)=>md(e).$instanceValues$.get(t),jee=(e,t,i,s)=>{const u=md(e),d=e,y=u.$instanceValues$.get(t),v=u.$flags$,_=d;i=wee(i,s.$members$[t][0]);const M=Number.isNaN(y)&&Number.isNaN(i);if(i!==y&&!M){u.$instanceValues$.set(t,i);{if(s.$watchers$&&v&128){const O=s.$watchers$[t];O&&O.map(C=>{try{_[C](i,y,t)}catch(R){gd(R,d)}})}if((v&18)===2){if(_.componentShouldUpdate&&_.componentShouldUpdate(i,y,t)===!1)return;A4(u,!1)}}}},Nee=(e,t,i)=>{if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const s=Object.entries(t.$members$),u=e.prototype;s.map(([d,[y]])=>{(y&31||y&32)&&Object.defineProperty(u,d,{get(){return Cee(this,d)},set(v){jee(this,d,v,t)},configurable:!0,enumerable:!0})});{const d=new Map;u.attributeChangedCallback=function(y,v,_){$i.jmp(()=>{const M=d.get(y);if(this.hasOwnProperty(M))_=this[M],delete this[M];else if(u.hasOwnProperty(M)&&typeof this[M]=="number"&&this[M]==_)return;this[M]=_===null&&typeof this[M]=="boolean"?!1:_})},e.observedAttributes=s.filter(([y,v])=>v[0]&15).map(([y,v])=>{const _=v[1]||y;return d.set(_,y),v[0]&512&&t.$attrsToReflect$.push([y,_]),_})}}return e},Ree=async(e,t,i,s,u)=>{if(!(t.$flags$&32)&&(u=e.constructor,t.$flags$|=32,customElements.whenDefined(i.$tagName$).then(()=>t.$flags$|=128),u.style)){let y=u.style;typeof y!="string"&&(y=y[t.$modeName$=vee(e)]);const v=eO(i,t.$modeName$);if(!Ky.has(v)){const _=xu("registerStyles",i.$tagName$);xee(v,y,!!(i.$flags$&1)),_()}}t.$ancestorComponent$,(()=>A4(t,!0))()},Lee=e=>{},Dee=e=>{if(!($i.$flags$&1)){const t=md(e),i=t.$cmpMeta$,s=xu("connectedCallback",i.$tagName$);t.$flags$&1?(lO(e,t,i.$listeners$),Lee(t.$lazyInstance$)):(t.$flags$|=1,i.$flags$&12&&Fee(e),i.$members$&&Object.entries(i.$members$).map(([u,[d]])=>{if(d&31&&e.hasOwnProperty(u)){const y=e[u];delete e[u],e[u]=y}}),Ree(e,t,i)),s()}},Fee=e=>{const t=e["s-cr"]=zs.createComment("");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)},zee=e=>{if(!($i.$flags$&1)){const t=md(e);t.$rmListeners$&&(t.$rmListeners$.map(i=>i()),t.$rmListeners$=void 0)}},G0e=(e,t)=>{const i={$flags$:t[0],$tagName$:t[1]};i.$members$=t[2],i.$listeners$=t[3],i.$watchers$=e.$watchers$,i.$attrsToReflect$=[];const s=e.prototype.connectedCallback,u=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){Uee(this,i)},connectedCallback(){Dee(this),s&&s.call(this)},disconnectedCallback(){zee(this),u&&u.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(i.$flags$&16)})}}),e.is=i.$tagName$,Nee(e,i)},q0e=(e,t)=>t,lO=(e,t,i,s)=>{i&&i.map(([u,d,y])=>{const v=Gee(e,u),_=Vee(t,y),M=qee(u);$i.ael(v,d,_,M),(t.$rmListeners$=t.$rmListeners$||[]).push(()=>$i.rel(v,d,_,M))})},Vee=(e,t)=>i=>{try{ch.lazyLoad||e.$hostElement$[t](i)}catch(s){gd(s)}},Gee=(e,t)=>t&4?zs:t&8?vd:t&16?zs.body:e,qee=e=>Hee?{passive:(e&1)!==0,capture:(e&2)!==0}:(e&2)!==0,uO=new WeakMap,md=e=>uO.get(e),Uee=(e,t)=>{const i={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return lO(e,i,t.$listeners$),uO.set(e,i)},Lx=(e,t)=>t in e,gd=(e,t)=>(0,console.error)(e,t),Ky=new Map,Bee=[],vd=typeof window<"u"?window:{},zs=vd.document||{head:{}},U0e=vd.HTMLElement||class{},$i={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,i,s)=>e.addEventListener(t,i,s),rel:(e,t,i,s)=>e.removeEventListener(t,i,s),ce:(e,t)=>new CustomEvent(e,t)},Hee=(()=>{let e=!1;try{zs.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch{}return e})(),Wee=e=>Promise.resolve(e),Jee=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),H3=[],hO=[],cO=(e,t)=>i=>{e.push(i),B3||(B3=!0,t&&$i.$flags$&4?Kee(W3):$i.raf(W3))},Dx=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(i){gd(i)}e.length=0},W3=()=>{Dx(H3),Dx(hO),(B3=H3.length>0)&&$i.raf(W3)},Kee=e=>Wee().then(e),B0e=cO(H3,!1),Zee=cO(hO,!0);/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v1.10.0
 */const pO="calcite-mode-auto",dO="calcite-mode-dark",Yee="calcite-mode-light",H0e={autoMode:pO,darkMode:dO,lightMode:Yee,rtl:"calcite--rtl",calciteAnimate:"calcite-animate",calciteAnimateIn:"calcite-animate__in",calciteAnimateInUp:"calcite-animate__in-up",calciteAnimateInDown:"calcite-animate__in-down",calciteAnimateInRight:"calcite-animate__in-right",calciteAnimateInLeft:"calcite-animate__in-left",calciteAnimateInScale:"calcite-animate__in-scale"};/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var fO=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Zy=fO.join(","),yO=typeof Element>"u",Su=yO?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Yy=!yO&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e==null?void 0:e.ownerDocument},Xy=function e(t,i){var s;i===void 0&&(i=!0);var u=t==null||(s=t.getAttribute)===null||s===void 0?void 0:s.call(t,"inert"),d=u===""||u==="true",y=d||i&&t&&e(t.parentNode);return y},Xee=function(t){var i,s=t==null||(i=t.getAttribute)===null||i===void 0?void 0:i.call(t,"contenteditable");return s===""||s==="true"},mO=function(t,i,s){if(Xy(t))return[];var u=Array.prototype.slice.apply(t.querySelectorAll(Zy));return i&&Su.call(t,Zy)&&u.unshift(t),u=u.filter(s),u},gO=function e(t,i,s){for(var u=[],d=Array.from(t);d.length;){var y=d.shift();if(!Xy(y,!1))if(y.tagName==="SLOT"){var v=y.assignedElements(),_=v.length?v:y.children,M=e(_,!0,s);s.flatten?u.push.apply(u,M):u.push({scopeParent:y,candidates:M})}else{var E=Su.call(y,Zy);E&&s.filter(y)&&(i||!t.includes(y))&&u.push(y);var O=y.shadowRoot||typeof s.getShadowRoot=="function"&&s.getShadowRoot(y),C=!Xy(O,!1)&&(!s.shadowRootFilter||s.shadowRootFilter(y));if(O&&C){var R=e(O===!0?y.children:O.children,!0,s);s.flatten?u.push.apply(u,R):u.push({scopeParent:y,candidates:R})}else d.unshift.apply(d,y.children)}}return u},vO=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},wO=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||Xee(t))&&!vO(t)?0:t.tabIndex},Qee=function(t,i){var s=wO(t);return s<0&&i&&!vO(t)?0:s},ete=function(t,i){return t.tabIndex===i.tabIndex?t.documentOrder-i.documentOrder:t.tabIndex-i.tabIndex},bO=function(t){return t.tagName==="INPUT"},tte=function(t){return bO(t)&&t.type==="hidden"},ite=function(t){var i=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(s){return s.tagName==="SUMMARY"});return i},rte=function(t,i){for(var s=0;s<t.length;s++)if(t[s].checked&&t[s].form===i)return t[s]},ste=function(t){if(!t.name)return!0;var i=t.form||Yy(t),s=function(v){return i.querySelectorAll('input[type="radio"][name="'+v+'"]')},u;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")u=s(window.CSS.escape(t.name));else try{u=s(t.name)}catch(y){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",y.message),!1}var d=rte(u,t.form);return!d||d===t},nte=function(t){return bO(t)&&t.type==="radio"},ote=function(t){return nte(t)&&!ste(t)},ate=function(t){var i,s=t&&Yy(t),u=(i=s)===null||i===void 0?void 0:i.host,d=!1;if(s&&s!==t){var y,v,_;for(d=!!((y=u)!==null&&y!==void 0&&(v=y.ownerDocument)!==null&&v!==void 0&&v.contains(u)||t!=null&&(_=t.ownerDocument)!==null&&_!==void 0&&_.contains(t));!d&&u;){var M,E,O;s=Yy(u),u=(M=s)===null||M===void 0?void 0:M.host,d=!!((E=u)!==null&&E!==void 0&&(O=E.ownerDocument)!==null&&O!==void 0&&O.contains(u))}}return d},Fx=function(t){var i=t.getBoundingClientRect(),s=i.width,u=i.height;return s===0&&u===0},lte=function(t,i){var s=i.displayCheck,u=i.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var d=Su.call(t,"details>summary:first-of-type"),y=d?t.parentElement:t;if(Su.call(y,"details:not([open]) *"))return!0;if(!s||s==="full"||s==="legacy-full"){if(typeof u=="function"){for(var v=t;t;){var _=t.parentElement,M=Yy(t);if(_&&!_.shadowRoot&&u(_)===!0)return Fx(t);t.assignedSlot?t=t.assignedSlot:!_&&M!==t.ownerDocument?t=M.host:t=_}t=v}if(ate(t))return!t.getClientRects().length;if(s!=="legacy-full")return!0}else if(s==="non-zero-area")return Fx(t);return!1},ute=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var i=t.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var s=0;s<i.children.length;s++){var u=i.children.item(s);if(u.tagName==="LEGEND")return Su.call(i,"fieldset[disabled] *")?!0:!u.contains(t)}return!0}i=i.parentElement}return!1},Qy=function(t,i){return!(i.disabled||Xy(i)||tte(i)||lte(i,t)||ite(i)||ute(i))},J3=function(t,i){return!(ote(i)||wO(i)<0||!Qy(t,i))},hte=function(t){var i=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(i)||i>=0)},cte=function e(t){var i=[],s=[];return t.forEach(function(u,d){var y=!!u.scopeParent,v=y?u.scopeParent:u,_=Qee(v,y),M=y?e(u.candidates):v;_===0?y?i.push.apply(i,M):i.push(v):s.push({documentOrder:d,tabIndex:_,item:u,isScope:y,content:M})}),s.sort(ete).reduce(function(u,d){return d.isScope?u.push.apply(u,d.content):u.push(d.content),u},[]).concat(i)},pte=function(t,i){i=i||{};var s;return i.getShadowRoot?s=gO([t],i.includeContainer,{filter:J3.bind(null,i),flatten:!1,getShadowRoot:i.getShadowRoot,shadowRootFilter:hte}):s=mO(t,i.includeContainer,J3.bind(null,i)),cte(s)},W0e=function(t,i){i=i||{};var s;return i.getShadowRoot?s=gO([t],i.includeContainer,{filter:Qy.bind(null,i),flatten:!0,getShadowRoot:i.getShadowRoot}):s=mO(t,i.includeContainer,Qy.bind(null,i)),s},J0e=function(t,i){if(i=i||{},!t)throw new Error("No node provided");return Su.call(t,Zy)===!1?!1:J3(i,t)},dte=fO.concat("iframe").join(","),K0e=function(t,i){if(i=i||{},!t)throw new Error("No node provided");return Su.call(t,dte)===!1?!1:Qy(i,t)};const fte={getShadowRoot:!0};function Z0e(e){const t="dir",i=`[${t}]`,s=yte(e,i);return s?s.getAttribute(t):"ltr"}function _O(e){return e.getRootNode()}function xO(e){return e.host||null}function Y0e(e,{selector:t,id:i}){function s(u){if(!u)return null;u.assignedSlot&&(u=u.assignedSlot);const d=_O(u),y=i?"getElementById"in d?d.getElementById(i):null:t?d.querySelector(t):null,v=xO(d);return y||(v?s(v):null)}return s(e)}function yte(e,t){function i(s){return s?s.closest(t)||i(xO(_O(s))):null}return i(e)}function mte(e,t){return SO(e,t)}function SO(e,t){if(!e)return;const i=t(e);if(i!==void 0)return i;const{parentNode:s}=e;return SO(s instanceof ShadowRoot?s.host:s,t)}function X0e(e,t){return!!mte(t,i=>i===e?!0:void 0)}function gte(e){return typeof(e==null?void 0:e.setFocus)=="function"}async function Q0e(e){if(e)return gte(e)?e.setFocus():e.focus()}function epe(e){e&&(pte(e,fte)[0]||e).focus()}const Hp=":not([slot])";function tpe(e,t,i){t&&!Array.isArray(t)&&typeof t!="string"&&(i=t,t=null);const s=t?Array.isArray(t)?t.map(u=>`[slot="${u}"]`).join(","):`[slot="${t}"]`:Hp;return i!=null&&i.all?vte(e,s,i):wte(e,s,i)}function $O(e,t){return e?Array.from(e.children||[]).filter(i=>i==null?void 0:i.matches(t)):[]}function vte(e,t,i){let s=t===Hp?$O(e,Hp):Array.from(e.querySelectorAll(t));s=i&&i.direct===!1?s:s.filter(d=>d.parentElement===e),s=i!=null&&i.matches?s.filter(d=>d==null?void 0:d.matches(i.matches)):s;const u=i==null?void 0:i.selector;return u?s.map(d=>Array.from(d.querySelectorAll(u))).reduce((d,y)=>[...d,...y],[]).filter(d=>!!d):s}function wte(e,t,i){let s=t===Hp?$O(e,Hp)[0]||null:e.querySelector(t);s=i&&i.direct===!1||(s==null?void 0:s.parentElement)===e?s:null,s=i!=null&&i.matches?s!=null&&s.matches(i.matches)?s:null:s;const u=i==null?void 0:i.selector;return u?s==null?void 0:s.querySelector(u):s}function ipe(e,t,i){if(typeof t=="string"&&t!=="")return t;if(t==="")return e[i]}function rpe(e){return(!!e).toString()}function spe(e){return Ste(e)||_te(e)}function bte(e){return xte(e).filter(t=>t.nodeType===Node.TEXT_NODE).map(t=>t.textContent).join("").trim()}function _te(e){return!!bte(e)}function xte(e){return e.target.assignedNodes({flatten:!0})}function Ste(e){return!!$te(e).length}function $te(e){return e.target.assignedElements({flatten:!0})}function npe(e){return!!(e.isPrimary&&e.button===0)}function ope(e,t){if(e.parentNode!==t.parentNode)return!1;const i=Array.from(e.parentNode.children);return i.indexOf(e)<i.indexOf(t)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v1.10.0
 */function zx(){const{classList:e}=document.body,t=window.matchMedia("(prefers-color-scheme: dark)").matches,i=()=>e.contains(dO)||e.contains(pO)&&t?"dark":"light",s=y=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:y}})),u=y=>{d!==y&&s(y),d=y};let d=i();s(d),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",y=>u(y.matches?"dark":"light")),new MutationObserver(()=>u(i())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}function Tte(){typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document&&(document.readyState==="interactive"?zx():document.addEventListener("DOMContentLoaded",()=>zx(),{once:!0}))}const Mte=Tte;Mte();let TO;function Ite(){try{lee(".")}catch{uee(Yr(xt(TO)))}}function Ete(e){var i;const t=[];for(const s of Object.keys(e))customElements.get(`calcite-${s}`)||t.push((i=e[s])==null?void 0:i.call(e));return t.length>0?Promise.all(t):null}TO="components/assets";const MO=Symbol("widget"),IO=Symbol("widget-test-data"),kte=[],Ate={},em=new WeakMap;function EO(e,t){let i=t.children;if(i!=null&&i.length)for(let u=0;u<i.length;++u)i[u]=EO(e,i[u]);else i=kte;const s=t.vnodeSelector;if(tm(s)){const u=t.properties||Ate,d=u.key||s;return{vnodeSelector:"div",properties:{key:d,afterCreate:Ote,afterUpdate:Pte,afterRemoved:kO,parentWidget:e,widgetConstructor:s,widgetProperties:{...u,key:d,children:i}},children:void 0,text:void 0,domNode:null}}return t}function Ote(e,t,i,{parentWidget:s,widgetConstructor:u,widgetProperties:d}){var v;const y=new u(d);y.container=e,em.set(e,y),(v=y.afterCreate)==null||v.call(y,y,e),s.addHandles(Et(()=>kO(e))),queueMicrotask(()=>{y[IO].projector.renderNow()})}function Pte(e,t,i,{widgetProperties:s}){var d;const u=em.get(e);u&&(u.set(s),(d=u.afterUpdate)==null||d.call(u,u,e))}function kO(e){var i;const t=em.get(e);t&&((i=t.afterRemoved)==null||i.call(t,t,e),t.destroy(),em.delete(e))}function tm(e){return typeof e=="function"&&e[MO]}const $n={arrowDown:"esri-icon-arrow-down",arrowUp:"esri-icon-arrow-up",basemap:"esri-icon-basemap",bookmark:"esri-icon-bookmark",calendar:"esri-icon-calendar",checkMark:"esri-icon-check-mark",checkboxUnchecked:"esri-icon-checkbox-unchecked",close:"esri-icon-close",collapse:"esri-icon-collapse",defaultAction:"esri-icon-default-action",description:"esri-icon-description",directions:"esri-icon-directions",dockBottom:"esri-icon-dock-bottom",dockLeft:"esri-icon-dock-left",dockRight:"esri-icon-dock-right",down:"esri-icon-down",downArrow:"esri-icon-down-arrow",download:"esri-icon-download",dragHorizontal:"esri-icon-drag-horizontal",dragVertical:"esri-icon-drag-vertical",duplicate:"esri-icon-duplicate",edit:"esri-icon-edit",elevationProfile:"esri-icon-elevation-profile",environmentSettings:"esri-icon-environment-settings",erase:"esri-icon-erase",error:"esri-icon-error",expand:"esri-icon-expand",fontFallbackText:"esri-icon-font-fallback-text",forward:"esri-icon-forward",gear:"esri-icon-gear",handleHorizontal:"esri-icon-handle-horizontal",handleVertical:"esri-icon-handle-vertical",home:"esri-icon-home",icon:"esri-icon",launchLinkExternal:"esri-icon-launch-link-external",layerList:"esri-icon-layer-list",layers:"esri-icon-layers",left:"esri-icon-left",leftArrows:"esri-icon-left-arrow",leftTriangleArrow:"esri-icon-left-triangle-arrow",lineOfSight:"esri-icon-line-of-sight",link:"esri-icon-link",linkExternal:"esri-icon-link-external",linkHorizontal:"esri-icon-link-horizontal",loadingIndicator:"esri-icon-loading-indicator",locate:"esri-icon-locate",locateCircled:"esri-icon-locate-circled",locked:"esri-icon-locked",mapPin:"esri-icon-map-pin",maximize:"esri-icon-maximize",measure:"esri-icon-measure",measureArea:"esri-icon-measure-area",measureBuildingHeightShadow:"esri-icon-measure-building-height-shadow",measureLine:"esri-icon-measure-line",menu:"esri-icon-menu",minimize:"esri-icon-minimize",minus:"esri-icon-minus",nonVisible:"esri-icon-non-visible",northNavigation:"esri-icon-north-navigation",noticeTriangle:"esri-icon-notice-triangle",organization:"esri-icon-organization",pan:"esri-icon-pan",pan2:"esri-icon-pan2",partlyCloudy:"esri-icon-partly-cloudy",pause:"esri-icon-pause",play:"esri-icon-play",playCircled:"esri-icon-play-circled",plus:"esri-icon-plus",polyline:"esri-icon-polyline",printer:"esri-icon-printer",radioChecked:"esri-icon-radio-checked",radioUnchecked:"esri-icon-radio-unchecked",refresh:"esri-icon-refresh",reverse:"esri-icon-reverse",right:"esri-icon-right",rightArrow:"esri-icon-right-arrow",rightTriangleArrow:"esri-icon-right-triangle-arrow",rotate:"esri-icon-rotate",save:"esri-icon-save",search:"esri-icon-search",settings2:"esri-icon-settings2",slice:"esri-icon-slice",swap:"esri-icon-swap",table:"esri-icon-table",timeClock:"esri-icon-time-clock",tracking:"esri-icon-tracking",trash:"esri-icon-trash",unlockedLinkHorizontal:"esri-icon-unlocked-link-horizontal",up:"esri-icon-up",upArrow:"esri-icon-up-arrow",upDownArrows:"esri-icon-up-down-arrows",urbanModel:"esri-icon-urban-model",vertexGps:"esri-icon-vertex-gps",visible:"esri-icon-visible",zoomInFixed:"esri-icon-zoom-in-fixed",zoomInMagnifyingGlass:"esri-icon-zoom-in-magnifying-glass",zoomOutFixed:"esri-icon-zoom-out-fixed",zoomToObject:"esri-icon-zoom-to-object"},Vx=new Set;function Cte(e){Vx.add(e),e.finally(()=>Vx.delete(e))}var AO;const jte="esri.widgets.Widget";let Nte=0;const Rte={widgetIcon:$n.checkboxUnchecked};function OO(e,t){for(const i in t)e[i]!=null&&(typeof e[i]=="object"&&typeof t[i]=="object"?OO(e[i],t==null?void 0:t[i]):e[i]=t[i]);return e}const Lte=aee({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,i=/capture$/i;e.eventHandlerInterceptor=(s,u,d,y)=>{const v=t==null?void 0:t(s,u,d,y),_=i.test(s);if(!((s=s.replace(i,"")).toLowerCase()in d)||_){const M=s[2].toLowerCase()+s.slice(3),E=R=>v==null?void 0:v.call(d,R);d.addEventListener(M,E,_);const O=()=>d.removeEventListener(M,E,_),C=y.afterRemoved;y.afterRemoved=R=>{C==null||C(R),O()}}return v}},handleInterceptedEvent(e,t,i,s){const{eventPhase:u,type:d}=s,y=u===Event.CAPTURING_PHASE;let v=`on${d}${y?"capture":""}`;const _=t.properties;(_&&v in _||(v=`on${d[0].toUpperCase()}${d.slice(1)}${y?"Capture":""}`,_&&v in _))&&(VI(),e.scheduleRender(),_[v].call(_.bind||i,s))}});let C2=!1,ni=class extends Dm(ja.EventedAccessor){constructor(t,i){super(t,i),this._attached=!1,this._projector=Lte,this._readyForTrueRender=!1,this.iconClass=Rte.widgetIcon,this.icon=null,this.key=this,this._loadLocale=L9(async()=>{var v;if((v=this._messageBundleProps)!=null&&v.length){const _=await Promise.allSettled(this._messageBundleProps.map(async({bundlePath:M,propertyName:E})=>{if(this.destroyed)return;let O=await N5(M);this.uiStrings&&Object.keys(this.uiStrings)&&(O=OO(ie(O),this.uiStrings)),this[E]=O}));if(this.destroyed)return;for(const M of _)M.status==="rejected"&&de.getLogger(this).error("widget-intl:locale-error",this.declaredClass,M.reason)}await this.loadLocale()}),Ite();const s="esri-widget-uid-"+M4(),u=this.render.bind(this);this._trackingTarget=new ym(()=>this.scheduleRender());const d=()=>{var O;if(!this._readyForTrueRender||this.destroyed)return null;const v=u();let{properties:_}=v;_||(v.properties=_={});const{key:M}=_;if(M||(_.key=s),tm(v.vnodeSelector)){if(!this.visible)return{vnodeSelector:"div",properties:{key:`${s}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}}else this.visible?_.styles||(_.styles={}):(_.class="",_.styles={display:"none"}),_.styles.display||(_.styles.display="");let E=0;return(O=v.children)==null||O.forEach(C=>{if(tm(C.vnodeSelector))return;let{properties:R}=C;R||(C.properties=R={}),R.key||(R.key=`${this.id}--${E++}`)}),EO(this,v)};this.render=()=>{if(C2)return d();let v=IU(this)??null;if(v)return v;this._trackingTarget.clear(),C2=!0;try{v=ho(this._trackingTarget,d)}catch(_){throw console.error(_),_}finally{C2=!1}return v&&EU(this,v),v};const y=this.beforeFirstRender();y?this._resourcesFetch=y.then(()=>{this._readyForTrueRender=!0,this._postInitialize()}):(this._resourcesFetch=Promise.resolve().then(()=>{this._postInitialize()}),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),Cte(this._resourcesFetch)}normalizeCtorArgs(t,i){const s={...t};return i&&(s.container=i),s}postInitialize(){}beforeFirstRender(){var i;const t=this.loadDependencies();return(i=this._messageBundleProps)!=null&&i.length||t?Promise.all([t,this._loadLocale()]).then(()=>{}).catch(x6):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(Ot(this._trackingTarget),Ot(this.viewModel),this._detach(this.container),this._set("container",null),this._emitter.clear(),this.render=()=>null,this._projector=null,r2(this))}set container(t){this._get("container")||this._set("container",t)}castContainer(t){return z5(t)}get domNode(){return this.container}set domNode(t){this.container=t}get id(){var t;return this._get("id")||((t=this.container)==null?void 0:t.id)||Date.now().toString(16)+"-widget-"+Nte++}set id(t){t&&this._set("id",t)}get label(){return this.declaredClass.split(".").pop()}set label(t){this._overrideIfSome("label",t)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(t){this._set("visible",t)}get[(AO=MO,IO)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(r2(this),this._projector.scheduleRender())}own(t){AS(de.getLogger(this.declaredClass),"`Widget.own()` is deprecated in favor of Widget.addHandles()'",{replacement:"Widget.addHandles()",version:"4.28"}),this.addHandles(t)}classes(...t){return AU.apply(this,t)}renderNow(){r2(this),this._projector.renderNow()}_postInitialize(){var i;if(this.destroyed)return;this.scheduleRender(),(i=this._delegatedEventNames)!=null&&i.length&&this.addHandles(Ge(()=>this.viewModel,(s,u)=>{u&&this.removeHandles("delegated-events"),s&&pm(s)&&this.addHandles(this._delegatedEventNames.map(d=>Qp(s,d,y=>{this.emit(d,y)})),"delegated-events")},so)),this.postInitialize();const t=async()=>{await this._loadLocale().catch(x6),this.scheduleRender()};this.addHandles([S5(t),Ge(()=>this.uiStrings,t),yu(()=>this.container,s=>{this.destroyed||this._attach(s)},{initial:!0,once:!0})])}_attach(t){t&&(this._projector.merge(t,this.render),this._attached=!0)}_detach(t){var i;this._attached&&(this._projector.detach(this.render),this._attached=!1),(i=t==null?void 0:t.parentNode)==null||i.removeChild(t)}};ni[AO]=!0,w([S()],ni.prototype,"_readyForTrueRender",void 0),w([S({value:null})],ni.prototype,"container",null),w([mt("container")],ni.prototype,"castContainer",null),w([S()],ni.prototype,"iconClass",void 0),w([S()],ni.prototype,"icon",void 0),w([S()],ni.prototype,"id",null),w([S()],ni.prototype,"label",null),w([S()],ni.prototype,"renderable",null),w([S()],ni.prototype,"uiStrings",void 0),w([S()],ni.prototype,"viewModel",void 0),w([S({value:!0})],ni.prototype,"visible",null),w([S()],ni.prototype,"key",void 0),w([S()],ni.prototype,"children",void 0),w([S()],ni.prototype,"afterCreate",void 0),w([S()],ni.prototype,"afterUpdate",void 0),w([S()],ni.prototype,"afterRemoved",void 0),ni=w([B(jte)],ni);const wd=ni;function Gx(e,t){return e&&"copyright"in e&&(!t||typeof e.originOf=="function"&&e.originOf("copyright")==="user")}function Dte(e,t){return e.length!==t.length||e.some((i,s)=>i.text!==t[s].text)}function wf(e,t,i){!i||!t||e.find(s=>s.layerView===t&&s.text===i)||e.push({text:i,layerView:t})}function Fte(e){return e.type==="bing-maps"}const ko=[];let fh=class extends Ne{constructor(t){super(t),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new Oe,this.view=null,this._allLayerViewsChange=i=>{var u;this.removeHandles("suspension");const s=(u=this.view)==null?void 0:u.allLayerViews;s&&this.addHandles(s.map(d=>Ge(()=>{var y;return[d.suspended,(y=d.layer)==null?void 0:y.attributionVisible]},()=>this._updateAttributionItems())).toArray(),"suspension"),i!=null&&i.removed&&i.removed.forEach(d=>{this._pendingAttributions.delete(d),this._fetchedAttributionData.delete(d)}),this._updateAttributionItems()},this.addHandles([uc(()=>{var i;return(i=this.view)==null?void 0:i.allLayerViews},"change",i=>this._allLayerViewsChange(i),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),yu(()=>{var i;return((i=this.view)==null?void 0:i.stationary)===!0},()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){var t;return(t=this.view)!=null&&t.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const t=this.view,i=t==null?void 0:t.allLayerViews;ko.length=0,t&&i?(i.forEach(s=>{var y,v;if(s.suspended||!((y=s.layer)!=null&&y.attributionVisible))return;const u=s.layer;if(Gx(u,"user"))return void wf(ko,s,u.copyright);if(u.hasAttributionData){if(this._fetchedAttributionData.has(s)){const _=this._fetchedAttributionData.get(s);return void(_?wf(ko,s,this._getDynamicAttribution(_,t,u)):Gx(u)&&wf(ko,s,u.copyright))}return void this._fetchAttributionData(s)}const d="portalItem"in u?(v=u.portalItem)==null?void 0:v.accessInformation:void 0;wf(ko,s,d||u.copyright)}),Dte(this.items,ko)&&(this.items.removeAll(),this.items.addMany(ko)),ko.length=0,this.notifyChange("state")):this._clear()}async _fetchAttributionData(t){if(this._pendingAttributions.has(t))return;this._pendingAttributions.add(t);const i=await Tm(t.layer.fetchAttributionData());if(this._pendingAttributions.has(t)){const s=i.ok?this._createContributionIndex(i.value,Fte(t.layer)):null;this._pendingAttributions.delete(t),this._fetchedAttributionData.set(t,s)}this._updateAttributionItems()}_createContributionIndex(t,i){const s=t.contributors,u={};if(!s)return u;for(let d=0;d<s.length;d++){const y=s[d],v=y.coverageAreas;if(!v)return;for(const _ of v){const M=_.bbox,E=_.zoomMin-(i&&_.zoomMin?1:0),O=_.zoomMax-(i&&_.zoomMax?1:0),C=new Tt({xmin:M[1],ymin:M[0],xmax:M[3],ymax:M[2],spatialReference:He.WGS84}),R={extent:tu(C),attribution:y.attribution||"",score:_.score!=null?_.score:100,id:d};for(let L=E;L<=O;L++)u[L]??(u[L]=[]),u[L].push(R)}}return u.maxKey=Math.max.apply(null,Object.keys(u)),u}_getDynamicAttribution(t,i,s){var E;const{extent:u,scale:d}=i;let y=((E=s.tileInfo)==null?void 0:E.scaleToZoom(d))??0;if(y=Math.min(t.maxKey??0,Math.round(y)),!u||y==null||y<=-1)return"";const v=t[y],_=xm(u.center.clone().normalize(),i.spatialReference),M=new Set;return v?v.filter(O=>{const C=O.id,R=!M.has(C)&&_&&O.extent&&Sm(O.extent,_);return R&&M.add(C),R}).sort((O,C)=>C.score-O.score||O.objectId-C.objectId).map(O=>O.attribution).join(", "):""}};w([S({readOnly:!0,type:Oe})],fh.prototype,"items",void 0),w([S({readOnly:!0})],fh.prototype,"state",null),w([S()],fh.prototype,"view",void 0),fh=w([B("esri.widgets.Attribution.AttributionViewModel")],fh);const PO=fh,kr={anchor:"esri-widget__anchor",anchorDisabled:"esri-widget__anchor--disabled",button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",disabled:"esri-disabled",disabledElement:"esri-disabled-element",empty:"esri-widget__content--empty",emptyIllustration:"esri-widget__content-illustration--empty",heading:"esri-widget__heading",hidden:"esri-hidden",input:"esri-input",interactive:"esri-interactive",loader:"esri-widget__loader",loaderAnimation:"esri-widget__loader-animation",loaderText:"esri-widget__loader-text",menu:"esri-menu",menuHeader:"esri-menu__header",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",menuItemFocus:"esri-menu__list-item--focus",menuList:"esri-menu__list",noBookmarksIcon:"esri-widget__no-bookmark-icon",panel:"esri-widget--panel",panelHeightOnly:"esri-widget--panel-height-only",primaryTick:"primary-tick",primaryTickAmPm:"primary-tick__ampm",primaryTickLabel:"primary-tick__label",rotating:"esri-rotating",secondaryTick:"secondary-tick",select:"esri-select",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button",widgetButtonActive:"esri-widget--button-active",widgetDisabled:"esri-widget--disabled"};function O4(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${String(t)}'`);return{value:Vte(e[t])}}}function zte(e){const t=e==null?void 0:e.type;return e instanceof KeyboardEvent||t==="keyup"||t==="keydown"||t==="keypress"}function Vte(e){return function(t,...i){zte(t)?NU(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call(this,t,...i)}}function ig(e){return(t,i)=>{t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:i})}}var Gte=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},CO=function(e,t){for(var i=0,s=e.length;i<s;i++){var u=e[i];Array.isArray(u)?CO(u,t):u!=null&&u!==!1&&(u.hasOwnProperty("vnodeSelector")||(u=Gte(u)),t.push(u))}},qte=function(e,t){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];if(i.length===1&&typeof i[0]=="string")return{vnodeSelector:e,properties:t||void 0,children:void 0,text:i[0],domNode:null};var u=[];return CO(i,u),{vnodeSelector:e,properties:t||void 0,children:u,text:void 0,domNode:null}};function Ei(e,t,...i){return typeof e!="function"||tm(e)?qte(e,t,...i):e(t,...i)}function upe(...e){return e}const Wu="esri-attribution",Ja={base:Wu,poweredBy:`${Wu}__powered-by`,sources:`${Wu}__sources`,open:`${Wu}--open`,sourcesOpen:`${Wu}__sources--open`,link:`${Wu}__link`,widgetIcon:$n.description};let zi=class extends wd{constructor(t,i){super(t,i),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(s=>s.forEach(({target:u})=>this._checkSourceTextOverflow(u))),this.iconClass=Ja.widgetIcon,this.icon=null,this.itemDelimiter=" | ",this.messages=null,this.viewModel=new PO}initialize(){this.addHandles(uc(()=>{var t;return(t=this.viewModel)==null?void 0:t.items},"change",()=>this.scheduleRender()))}destroy(){var t;(t=this._resizeObserver)==null||t.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((t,i)=>(t.includes(i.text)||t.push(i.text),t),[]).join(this.itemDelimiter)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const t={[Ja.open]:this._isOpen};return Ei("div",{bind:this,class:this.classes(Ja.base,kr.widget,t),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return Ei("div",{class:Ja.poweredBy},"Powered by"," ",Ei("a",{class:Ja.link,href:"http://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const t=this._isOpen,i=this._isInteractive,s=i?0:void 0,{attributionText:u}=this,d={[Ja.sourcesOpen]:t,[kr.interactive]:i};return Ei("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(Ja.sources,d),innerHTML:u,tabIndex:s})}_afterSourcesNodeCreate(t){this._prevSourceNodeHeight=t.clientWidth,this._resizeObserver.observe(t)}_checkSourceTextOverflow(t){let i=!1;const{clientHeight:s,clientWidth:u,scrollWidth:d}=t,y=d>u,v=this._attributionTextOverflowed!==y;if(this._attributionTextOverflowed=y,v&&(i=!0),this._isOpen){const _=s<this._prevSourceNodeHeight;this._prevSourceNodeHeight=s,_&&(this._isOpen=!1,i=!0)}i&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};w([S()],zi.prototype,"_isOpen",void 0),w([S()],zi.prototype,"_isInteractive",null),w([S()],zi.prototype,"_attributionTextOverflowed",void 0),w([S()],zi.prototype,"_prevSourceNodeHeight",void 0),w([S({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],zi.prototype,"attributionText",null),w([S()],zi.prototype,"iconClass",void 0),w([S()],zi.prototype,"icon",void 0),w([S()],zi.prototype,"itemDelimiter",void 0),w([S()],zi.prototype,"label",null),w([S(),ig("esri/widgets/Attribution/t9n/Attribution")],zi.prototype,"messages",void 0),w([S()],zi.prototype,"view",null),w([S({type:PO})],zi.prototype,"viewModel",void 0),w([O4()],zi.prototype,"_toggleState",null),zi=w([B("esri.widgets.Attribution")],zi);const Ute=zi;function Bte(e){var t,i;return((t=e==null?void 0:e.spatialReference)==null?void 0:t.isWebMercator)||((i=e==null?void 0:e.spatialReference)==null?void 0:i.isGeographic)||!1}const Hte=e=>{let t=class extends e{constructor(...i){super(...i),this.goToOverride=null,this.view=null}callGoTo(i){const{view:s}=this;return OS(s),this.goToOverride?this.goToOverride(s,i):s.goTo(i.target,i.options)}};return w([S()],t.prototype,"goToOverride",void 0),w([S()],t.prototype,"view",void 0),t=w([B("esri.widgets.support.GoTo")],t),t},Wte="esri.widgets.CompassViewModel";let bl=class extends Hte(Ne){constructor(t){super(t),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this.addHandles(Ge(()=>this.view,this._updateRotationWatcher,rr))}destroy(){this.view=null}get canShowNorth(){return Bte(this.view)}get state(){var t;return!((t=this.view)!=null&&t.ready)||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){var i,s;if(!((i=this.view)!=null&&i.ready))return;const t={};((s=this.view)==null?void 0:s.type)==="2d"?t.rotation=0:t.heading=0,this.callGoTo({target:t})}_updateForRotation(t){t!=null&&(this.orientation={z:t})}_updateForCamera(t){if(!t)return;const i=-t.heading;this.orientation={x:0,y:0,z:i}}_updateRotationWatcher(t){this.removeAllHandles(),t&&this.addHandles(t.type==="2d"?Ge(()=>t==null?void 0:t.rotation,this._updateForRotation,rr):Ge(()=>t==null?void 0:t.camera,this._updateForCamera,rr))}};w([S({readOnly:!0})],bl.prototype,"canShowNorth",null),w([S()],bl.prototype,"orientation",void 0),w([S({readOnly:!0})],bl.prototype,"state",null),w([S()],bl.prototype,"view",void 0),bl=w([B(Wte)],bl);const jO=bl,qx="esri-compass",j2={base:qx,widgetIcon:$n.locateCircled,iconContainer:`${qx}__icon-container`};let un=class extends wd{constructor(t,i){super(t,i),this.iconClass=j2.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new jO,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=s=>({transform:`rotateZ(${s.z}deg)`})}loadDependencies(){return Ete({button:()=>Se(()=>import("./calcite-button-bdde811c.js"),["assets/calcite-button-bdde811c.js","assets/label2-a84fd708.js","assets/interactive-d3faccfc.js","assets/loadable-ab71d1fb.js","assets/t9n-48ad091c.js","assets/observers-6ec6279a.js","assets/icon-8b891245.js","assets/loader-3ffdd6dc.js"]),icon:()=>Se(()=>import("./calcite-icon-0d5396e1.js"),["assets/calcite-icon-0d5396e1.js","assets/icon-8b891245.js","assets/observers-6ec6279a.js"])})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}reset(){return this.viewModel.reset()}render(){const{orientation:t,state:i}=this.viewModel,s=i==="rotation"?"arrow-up":"compass-needle",{messages:u}=this;return Ei("div",{class:this.classes(j2.base,kr.widget)},Ei("calcite-button",{"aria-label":u.reset,class:kr.widgetButton,disabled:i==="disabled",kind:"neutral",onclick:this._reset,round:!0,scale:"s",title:u.reset},Ei("div",{"aria-hidden":"true",class:j2.iconContainer,title:u.reset},Ei("calcite-icon",{icon:s,scale:"m",styles:this._toRotationTransform(t)}))))}};w([S()],un.prototype,"goToOverride",null),w([S()],un.prototype,"iconClass",void 0),w([S()],un.prototype,"icon",void 0),w([S()],un.prototype,"label",null),w([S(),ig("esri/widgets/Compass/t9n/Compass")],un.prototype,"messages",void 0),w([S()],un.prototype,"view",null),w([S({type:jO})],un.prototype,"viewModel",void 0),un=w([B("esri.widgets.Compass")],un);const Jte=un,Ju="esri-navigation-toggle",On={base:Ju,widgetIcon:$n.pan2,button:`${Ju}__button`,activeButton:`${Ju}__button--active`,panButton:`${Ju}__button--pan`,rotateButton:`${Ju}__button--rotate`,isLayoutHorizontal:`${Ju}--horizontal`};let yh=class extends Ne{constructor(t){super(t),this.navigationMode="pan",this.view=null}initialize(){this.addHandles(yu(()=>{var t;return(t=this.view)==null?void 0:t.inputManager},()=>this._setNavigationMode()))}destroy(){this.view=null}get state(){var t,i;return(t=this.view)!=null&&t.ready&&((i=this.view)==null?void 0:i.type)==="3d"?"ready":"disabled"}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){var i;const t=(i=this.view)==null?void 0:i.inputManager;t&&(t.primaryDragAction=this.navigationMode==="pan"?"pan":"rotate")}};w([S({readOnly:!0})],yh.prototype,"state",null),w([S()],yh.prototype,"navigationMode",void 0),w([S()],yh.prototype,"view",void 0),yh=w([B("esri.widgets.NavigationToggleViewModel")],yh);const NO=yh;let _s=class extends wd{constructor(t,i){super(t,i),this.iconClass=On.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new NO}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}set layout(t){t!=="horizontal"&&(t="vertical"),this._set("layout",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}toggle(){return this.viewModel.toggle()}render(){var _,M;const t=((_=this.viewModel)==null?void 0:_.state)==="disabled",i=((M=this.viewModel)==null?void 0:M.navigationMode)==="pan",s={[kr.disabled]:t,[On.isLayoutHorizontal]:this.layout==="horizontal"},u={[On.activeButton]:i},d={[On.activeButton]:!i},y=t?-1:0,v=this.messages.toggle;return Ei("div",{"aria-label":v,bind:this,class:this.classes(On.base,kr.widget,s),onclick:this._toggle,onkeydown:this._toggle,tabIndex:y,title:v},Ei("div",{class:this.classes(On.button,kr.widgetButton,On.panButton,u)},Ei("span",{class:$n.pan})),Ei("div",{class:this.classes(On.button,kr.widgetButton,On.rotateButton,d)},Ei("span",{class:$n.rotate})))}_toggle(){this.toggle()}};w([S()],_s.prototype,"iconClass",void 0),w([S()],_s.prototype,"icon",void 0),w([S()],_s.prototype,"label",null),w([S({value:"vertical"})],_s.prototype,"layout",null),w([S(),ig("esri/widgets/NavigationToggle/t9n/NavigationToggle")],_s.prototype,"messages",void 0),w([S()],_s.prototype,"view",null),w([S({type:NO})],_s.prototype,"viewModel",void 0),w([O4()],_s.prototype,"_toggle",null),_s=w([B("esri.widgets.NavigationToggle")],_s);const Kte=_s,vi="esri-feature",Zte={base:vi,container:`${vi}__size-container`,title:`${vi}__title`,main:`${vi}__main-container`,btn:`${vi}__button`,icon:`${vi}__icon`,content:`${vi}__content`,contentNode:`${vi}__content-node`,contentNodeText:`${vi}__content-node--text`,contentElement:`${vi}__content-element`,text:`${vi}__text`,lastEditedInfo:`${vi}__last-edited-info`,fields:`${vi}__fields`,fieldHeader:`${vi}__field-header`,fieldData:`${vi}__field-data`,fieldDataDate:`${vi}__field-data--date`,loadingSpinnerContainer:`${vi}__loading-container`,spinner:`${vi}__loading-spinner`};let qn=class extends wd{constructor(){super(...arguments),this.enabled=!0,this.iconClass=null,this.icon=null,this.title=""}render(){const t=this.enabled?0:-1,i={[kr.disabled]:!this.enabled,[kr.interactive]:this.enabled};return Ei("div",{bind:this,class:this.classes(kr.widgetButton,kr.widget,i),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:t,title:this.title},Ei("span",{"aria-hidden":"true",class:this.classes(Zte.icon,this.iconClass??""),role:"presentation"}),Ei("span",{class:$n.fontFallbackText},this.title))}_triggerAction(){this.action.call(this)}};w([S()],qn.prototype,"action",void 0),w([S()],qn.prototype,"enabled",void 0),w([S()],qn.prototype,"iconClass",void 0),w([S()],qn.prototype,"icon",void 0),w([S()],qn.prototype,"title",void 0),w([O4()],qn.prototype,"_triggerAction",null),qn=w([B("esri.widgets.IconButton")],qn);const Ux=qn;let _l=class extends Ne{get canZoomIn(){var s,u,d;if(!((s=this.view)==null?void 0:s.ready))return!1;const i=(d=(u=this.view)==null?void 0:u.constraints)==null?void 0:d.effectiveMaxScale;return i===0||this._scale>i}get canZoomOut(){var u;const{view:t}=this;if(!(t==null?void 0:t.ready))return!1;const s=(u=t.constraints)==null?void 0:u.effectiveMinScale;return s===0||this._scale<s}get _scale(){var i,s,u;const t=(s=(i=this.view)==null?void 0:i.animation)==null?void 0:s.target;return(t&&"then"in t||t==null?void 0:t.scale)??((u=this.view)==null?void 0:u.scale)??0}};w([S({readOnly:!0})],_l.prototype,"canZoomIn",null),w([S({readOnly:!0})],_l.prototype,"canZoomOut",null),w([S()],_l.prototype,"view",void 0),w([S()],_l.prototype,"_scale",null),_l=w([B("esri.widgets.Zoom.ZoomConditions2D")],_l);const Yte=_l;let mh=class extends Ne{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};w([S({readOnly:!0})],mh.prototype,"canZoomIn",null),w([S({readOnly:!0})],mh.prototype,"canZoomOut",null),w([S()],mh.prototype,"view",void 0),mh=w([B("esri.widgets.Zoom.ZoomConditions3D")],mh);const Xte=mh;let Zo=class extends Ne{constructor(t){super(t)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){var t;return this._zoomConditions!=null&&((t=this._zoomConditions)==null?void 0:t.canZoomOut)}get state(){var t;return(t=this.view)!=null&&t.ready?"ready":"disabled"}set view(t){t?t.type==="2d"?this._zoomConditions=new Yte({view:t}):t.type==="3d"&&(this._zoomConditions=new Xte({view:t})):this._zoomConditions=null,this._set("view",t)}zoomIn(){if(!this.canZoomIn)return;const t=this.view;t.type==="2d"?t.mapViewNavigation.zoomIn():yv(t.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const t=this.view;t.type==="2d"?t.mapViewNavigation.zoomOut():yv(t.goTo({zoomFactor:.5}))}};w([S()],Zo.prototype,"_zoomConditions",void 0),w([S()],Zo.prototype,"canZoomIn",null),w([S()],Zo.prototype,"canZoomOut",null),w([S({readOnly:!0})],Zo.prototype,"state",null),w([S()],Zo.prototype,"view",null),Zo=w([B("esri.widgets.Zoom.ZoomViewModel")],Zo);const RO=Zo,N2={base:"esri-zoom",widgetIcon:$n.zoomInMagnifyingGlass,horizontalLayout:"esri-zoom--horizontal"};let hn=class extends wd{constructor(t,i){super(t,i),this.iconClass=N2.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new RO}initialize(){this._zoomInButton=new Ux({action:this.zoomIn.bind(this),iconClass:$n.plus}),this._zoomOutButton=new Ux({action:this.zoomOut.bind(this),iconClass:$n.minus})}destroy(){this._zoomInButton=Ot(this._zoomInButton),this._zoomOutButton=Ot(this._zoomOutButton)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}set layout(t){t!=="horizontal"&&(t="vertical"),this._set("layout",t)}set view(t){this.viewModel.view=t}get view(){return this.viewModel.view}render(){const t=this.viewModel,i={[N2.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:s,canZoomOut:u}=t;this._zoomInButton.enabled=s,this._zoomOutButton.enabled=u;const{zoomIn:d,zoomOut:y}=this.messages;return this._zoomInButton.title=d,this._zoomOutButton.title=y,Ei("div",{class:this.classes(N2.base,kr.widget,i)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};w([S()],hn.prototype,"iconClass",void 0),w([S()],hn.prototype,"icon",void 0),w([S()],hn.prototype,"label",null),w([S({value:"vertical"})],hn.prototype,"layout",null),w([S(),ig("esri/widgets/Zoom/t9n/Zoom")],hn.prototype,"messages",void 0),w([S()],hn.prototype,"view",null),w([S({type:RO})],hn.prototype,"viewModel",void 0),hn=w([B("esri.widgets.Zoom")],hn);const Qte=hn;function eie(e){return(e==null?void 0:e.view)!==void 0}let x1=class extends QQ{constructor(t){super(t),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=i=>{this.components.forEach(s=>{const u=this._find(s),d=u==null?void 0:u.widget;eie(d)&&(d.view=i)})},this._componentsWatcher=(i,s)=>{this._removeComponents(s),this._addComponents(i),this._adjustPadding(i)}}initialize(){this.addHandles([Ge(()=>this.components,this._componentsWatcher,rr),Ge(()=>this.view,this._updateViewAwareWidgets,rr)])}_add(t,i,s,u,d){let y=t;if(typeof t=="string"&&this._defaultPositionLookup[t]){if(this._find(t))return;y=this._createComponent(t)}super._add(y,i,s,u,d)}_removeComponents(t){t.forEach(i=>{const s=this._find(i);s&&(this.remove(s),s.destroy())})}_adjustPadding(t){if(!t.includes("attribution")&&!this._isOverridden("padding")){const{top:i}=this.padding;this.padding=i}}_addComponents(t){this.constructed&&t.forEach(i=>this.add(this._createComponent(i),this._defaultPositionLookup[i]))}_createComponent(t){const i=this._createWidget(t);return new _1({id:t,node:i})}_createWidget(t){const{view:i}=this;switch(t){case"attribution":return new Ute({view:i});case"compass":return new Jte({view:i});case"navigation-toggle":return new Kte({view:i});case"zoom":return new Qte({view:i})}}};w([S()],x1.prototype,"components",void 0),x1=w([B("esri.views.ui.DefaultUI")],x1);const LO=x1;let S1=class extends LO{constructor(t){super(t),this.components=["attribution","zoom"]}};w([S()],S1.prototype,"components",void 0),S1=w([B("esri.views.ui.2d.DefaultUI2D")],S1);const DO=S1;var K3;let $1=K3=class extends pe{constructor(e){super(e),this.color=new Ve([0,0,0,1])}clone(){return new K3(ie({color:this.color}))}};w([S({type:Ve,json:{write:!0}})],$1.prototype,"color",void 0),$1=K3=w([B("esri.webmap.background.ColorBackground")],$1);const tie=$1;let FO,zO,VO,GO,qO,UO;async function iie(){const[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:i,MapViewNavigation:s,MagnifierView2D:u,Stage:d}]=await Promise.all([Se(()=>import("./webglDeps-3f3a3d9f.js"),["assets/webglDeps-3f3a3d9f.js","assets/FramebufferObject-80159f0f.js","assets/Texture-d90263e2.js","assets/enums-bdecffa2.js","assets/ProgramTemplate-4339738f.js","assets/programUtils-bc6831b3.js","assets/NestedMap-1b5db22e.js"]),Se(()=>import("./mapViewDeps-4a36bfd0.js"),["assets/mapViewDeps-4a36bfd0.js","assets/ExpandedCIM-800e3b93.js","assets/BidiEngine-9a40f2f4.js","assets/visualVariablesUtils-1ef3f471.js","assets/OptimizedGeometry-d94e541f.js","assets/color-ebf39a9d.js","assets/enums-f1a6a48a.js","assets/enums-bdecffa2.js","assets/VertexElementDescriptor-2925c6af.js","assets/definitions-328d54fa.js","assets/GeometryUtils-984e8446.js","assets/utils-214f8e9b.js","assets/GeometryUtils-67cf8401.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-b480e172.js","assets/floatRGBA-028aa075.js","assets/imageUtils-8d55e5ea.js","assets/Container-85b121df.js","assets/Texture-d90263e2.js","assets/BufferPool-f5e44a0f.js","assets/AttributeStoreView-f57c4151.js","assets/TiledDisplayObject-2b64e00b.js","assets/WGLContainer-6804eac4.js","assets/FramebufferObject-80159f0f.js","assets/ProgramTemplate-4339738f.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/earcut-f0ab7973.js","assets/featureConversionUtils-317e3645.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/util-77b54e6c.js","assets/enums-fb086c25.js","assets/programUtils-bc6831b3.js","assets/NestedMap-1b5db22e.js","assets/MagnifierPrograms-42a17b79.js","assets/rasterizingUtils-87ec9425.js","assets/pbf-280c2fba.js","assets/imageutils-c778fbfd.js","assets/Matcher-1df389f9.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-0f11baf4.js","assets/CircularArray-ef508845.js","assets/testSVGPremultipliedAlpha-f1fece6b.js","assets/throttle-7bf02de9.js","assets/ComputedAttributeStorage-82dd5a77.js","assets/TimeOnly-c5d299c6.js","assets/RenderingContext-3b226226.js","assets/OrderIndependentTransparency-6ae10952.js","assets/basicInterfaces-11f56cb3.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/GraphicsView2D-4eff31d4.js","assets/normalizeUtilsSync-0dfcf0d7.js","assets/projectionSupport-276693a5.js","assets/json-48e3ea08.js","assets/GraphicContainer-8b76bd40.js","assets/BaseGraphicContainer-9f13a3fe.js","assets/FeatureContainer-369d9021.js","assets/TileContainer-9fad44e6.js","assets/vec3f32-2da9db36.js","assets/requestImageUtils-de23011a.js"])]);zO=e,VO=t,GO=i,qO=s,UO=u,FO=d}let qe=class extends jq(hB(ZU(QK))){constructor(t){super(t),this._magnifierView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new Ep({getCollections:()=>{var i,s;return[(i=this.basemapView)==null?void 0:i.baseLayerViews,this.layerViews,(s=this.basemapView)==null?void 0:s.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.goToManager=new v1({view:this}),this.graphicsView=null,this.stateManager=new Xi({constraints:new wA({view:this})}),this.stationaryManager=new N0,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this.frameTask=new AY(this),this.floors=new Oe,this.highlightOptions=new zA,this.inputManager=new hQ({view:this}),this.map=null,this.spatialReferenceLocked=!1,this.timeline=new BA,this.type="2d",this.ui=new DO,this.test={takeScreenshot:async i=>OQ(this._getScreenshotView(i),i)},this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([Ge(()=>this.viewpoint,()=>this.stationaryManager.flip(),ku),this.on("resize",i=>this.stateManager.resize(i.width,i.height)),Ge(()=>{var i;return(i=this.animationManager)==null?void 0:i.animation},i=>{this.animation=i})]),KG()}destroy(){this._set("preconditionsReady",!1),this.frameTask=Ot(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new mQ(this.featuresTilingScheme)}get constraintsInfo(){var s,u;const t=(s=this.defaultsFromMap)==null?void 0:s.tileInfo,i=this.spatialReference;return{lods:(u=t==null?void 0:t.spatialReference)!=null&&u.equals(i)?t.lods:null,spatialReference:i}}get state(){return this.stateManager.state}get initialExtentRequired(){var v;if(!this.stateManager)return!1;const{scale:t,constraints:i,center:s,viewpoint:u,extent:d}=this;let y=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((v=this.map.initialViewProperties)!=null&&v.viewpoint))&&!d&&(i!=null&&i.effectiveLODs||(y=-1),(!s||t===0&&y===-1)&&((u==null?void 0:u.targetGeometry)==null||u.targetGeometry.type!=="extent"&&!u.scale))}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get typeSpecificPreconditionsReady(){const t=this._getDefaultViewpoint();if(!t)return!1;const i=this.spatialReference,s=t.targetGeometry;return!!fo(s.spatialReference,i)||gI()}set animation(t){const i=this._get("animation");if(t===i)return;if(i&&i.stop(),!t||t.isFulfilled())return this._set("animation",null),void(this.frameTask.animationInProgress=!1);this._set("animation",t),this.frameTask.animationInProgress=!0;const s=()=>{var u;t===this._get("animation")&&(this._set("animation",null),(u=this.frameTask)==null||u.requestFrame()),this.frameTask.animationInProgress=!1};t.when(s,s)}get background(){return Bx(this.map)?this.map.initialViewProperties.background:null}set background(t){this._override("background",t)}get center(){var t;return((t=this.stateManager)==null?void 0:t.center)??null}set center(t){this.stateManager.center=t}get constraints(){var t;return(t=this.stateManager)==null?void 0:t.constraints}set constraints(t){t.view=this;const i=this.stateManager.constraints;this.stateManager.constraints=t,i==null||i.destroy()}get extent(){var t;return((t=this.stateManager)==null?void 0:t.extent)??null}set extent(t){this.stateManager.extent=t}get padding(){var t;return(t=this.stateManager)==null?void 0:t.padding}set padding(t){this.stateManager&&(this.stateManager.padding=t)}get rendering(){var t;return((t=this.stage)==null?void 0:t.renderRequested)??!1}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(t){this.stateManager.resizeAlign=t}get resolution(){return this.stateManager.resolution??0}get rotation(){return this.stateManager.rotation??0}set rotation(t){const{rotationEnabled:i}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=t,this.constraints.rotationEnabled=i}get scale(){var t;return((t=this.stateManager)==null?void 0:t.scale)??0}set scale(t){this.stateManager&&(this.stateManager.scale=t)}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}get updating(){var i,s,u;const t=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(d=>!d.destroyed&&!("layerViews"in d)&&d.updating===!0));if(oe("esri-2d-log-updating")){const d=this.allLayerViews.reduce((y,v)=>({...y,[v.layer.id]:!v.destroyed&&!("layerViews"in v)&&v.updating}),{});console.log(`Updating MapView: ${t}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${(i=this.layerViewManager)==null?void 0:i.updating}
-> labelManager.updating: ${(s=this.labelManager)==null?void 0:s.updating}
-> graphicsView.updating: ${(u=this.graphicsView)==null?void 0:u.updating}
-> allLayerViews: ${JSON.stringify(d)}
`)}return t}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(t){this.stateManager.viewpoint=t,this.frameTask.requestFrame()}get zoom(){return this.stateManager.zoom??-1}set zoom(t){this.stateManager.zoom=t}get navigating(){var t;return((t=this.mapViewNavigation)==null?void 0:t.interacting)??!1}goTo(t,i){return this.goToManager.goTo(t,i)}async hitTest(t,i){return gQ(this,t,i)}async takeScreenshot(t){return AQ(this._getScreenshotView(t),t)}toMap(t){if(!this.ready)return null;const i=jk(t)?Ck(this,t):t;return this.stateManager.toMap(i)}toScreen(t,i){return this.stateManager.toScreen(t,i)}on(t,i,s,u){return this.inputManager&&this.viewEvents.on(t,i,s,u)||super.on(t,i)}hasEventListener(t){return super.hasEventListener(t)||this.viewEvents.hasHandler(t)}whenLayerView(t){return super.whenLayerView(t)}graphicChanged(t){this.graphicsView&&this.graphicsView.graphicUpdateHandler(t)}whenReady(){return new Promise(t=>{this.ready?t(this):this._resolveWhenReady.push(t)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var t,i,s;return this.map&&"initialViewProperties"in this.map&&((i=(t=this.map)==null?void 0:t.initialViewProperties)==null?void 0:i.spatialReference)||((s=this.defaultsFromMap)==null?void 0:s.spatialReference)||null}getDefaultTimeZone(){return Bx(this.map)?this.map.initialViewProperties.timeZone:null}hasLayerViewModule(t){return sx.hasLayerViewModule(t)}importLayerView(t){return sx.importLayerView(t)}pixelSizeAt(){return this.ready?this.resolution:(de.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}popupHitTest(t){return this.hitTest(t).then(i=>({...i,mapPoint:this.toMap(t)}))}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let t=qQ(this.type);if(oe("safari")&&oe("safari")<9&&(t=new ae("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:oe("safari")})),t!=null)throw de.getLogger(this).warn("#validate()",t.message),t}loadAsyncDependencies(){return iie()}_getDefaultViewpoint(){var U;const{constraints:t,initialExtent:i,map:s,padding:u,size:d}=this;if(!t)return null;const y=s&&"initialViewProperties"in s?s.initialViewProperties:void 0,v=this.stateManager.getUserStartupOptions(this.size),_=y==null?void 0:y.viewpoint,M=((U=_==null?void 0:_.targetGeometry)==null?void 0:U.extent)??i,E=M==null?void 0:M.center,O=(_==null?void 0:_.rotation)??0,C=(_==null?void 0:_.scale)||M&&Kh(M,[d[0]-u.left-u.right,d[1]-u.top-u.bottom]),R=v.center??E,L=v.rotation??O,G=v.scale??C;return R&&G?new vn({targetGeometry:R,scale:G,rotation:L}):null}_startup(){var v;this.timeline.begin("MapView Startup");const t=this._getDefaultViewpoint();this.stateManager.startup(t,this.size,this.spatialReference,(v=this.defaultsFromMap.extent)==null?void 0:v.center),this.graphics.owner=this;const i=new FO(this.surface,{canvas:this.renderCanvas,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this.stage=i,this._magnifierView=new UO,this._magnifierView.magnifier=this.magnifier;const s=new GO({view:this});this._set("labelManager",s);const u=new kY({view:this});this._set("animationManager",u);const d=new qO({view:this,animationManager:u});this._set("mapViewNavigation",d),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),i.on("webgl-error",_=>this.fatalError=_.error),Ge(()=>this.stationary,_=>i.stationary=_,so),Ge(()=>this.background,_=>{i.backgroundColor=_==null?void 0:_.color,this._magnifierView.backgroundColor=_==null?void 0:_.color},so),Ge(()=>this.magnifier,_=>this._magnifierView.magnifier=_,so),Ge(()=>this.renderingOptions,_=>i.renderingOptions=_,so),Ge(()=>this.highlightOptions,_=>i.highlightOptions=_,so),Ge(()=>this.state.id,()=>i.state=this.state,so)],"map-view"),this._updateStageChildren();const y=this._resolveWhenReady;this._resolveWhenReady=[],y.forEach(_=>_(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown(),this.animation=null}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach(i=>{this.stage.addChild(i.container)});const t=this.graphicsView;this.stage.addChild(t.container),this.stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){const t=new DY(Pq.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",t);const i=new zO({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new VO(t)});this._set("graphicsView",i)}_destroySpatialReferenceDependentProperties(){const t=this.graphicsView;this._set("graphicsView",null),t.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(t){var y;const{allLayerViews:i,padding:s,size:u,stage:d}=this;return{allLayerViews:i,backgroundColor:t!=null&&t.ignoreBackground?null:(y=this.background)==null?void 0:y.color,padding:s,size:u,stage:d}}_spatialReferenceChanged(t){if(this.ready){this.frameTask.stop();for(const i of this.allLayerViews)i.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(t),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const i of this.allLayerViews)i.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}};qe.type="2d",w([S({readOnly:!0})],qe.prototype,"animationManager",void 0),w([S({constructOnly:!0})],qe.prototype,"deactivatedWebGLExtensions",void 0),w([S({constructOnly:!0})],qe.prototype,"debugWebGLExtensions",void 0),w([S({readOnly:!0})],qe.prototype,"featuresTilingScheme",void 0),w([S({readOnly:!0})],qe.prototype,"fullOpacity",void 0),w([S()],qe.prototype,"goToManager",void 0),w([S({readOnly:!0})],qe.prototype,"graphicsTileStore",null),w([S()],qe.prototype,"graphicsView",void 0),w([S()],qe.prototype,"stateManager",void 0),w([S()],qe.prototype,"constraintsInfo",null),w([S({readOnly:!0})],qe.prototype,"state",null),w([S()],qe.prototype,"initialExtentRequired",null),w([S()],qe.prototype,"labelManager",void 0),w([S({readOnly:!0})],qe.prototype,"mapViewNavigation",void 0),w([S({constructOnly:!0})],qe.prototype,"renderCanvas",void 0),w([S()],qe.prototype,"renderingOptions",void 0),w([S({constructOnly:!0})],qe.prototype,"supersampleScreenshotsEnabled",void 0),w([S({readOnly:!0})],qe.prototype,"supportsGround",void 0),w([S()],qe.prototype,"_defaultsFromMapSettings",null),w([S({readOnly:!0})],qe.prototype,"typeSpecificPreconditionsReady",null),w([S()],qe.prototype,"animation",null),w([S({type:tie})],qe.prototype,"background",null),w([S()],qe.prototype,"center",null),w([S({type:wA})],qe.prototype,"constraints",null),w([S()],qe.prototype,"extent",null),w([S()],qe.prototype,"floors",void 0),w([S({type:zA})],qe.prototype,"highlightOptions",void 0),w([S({readOnly:!0})],qe.prototype,"inputManager",void 0),w([S()],qe.prototype,"map",void 0),w([S()],qe.prototype,"padding",null),w([S({readOnly:!0})],qe.prototype,"rendering",null),w([S()],qe.prototype,"resizeAlign",null),w([S({readOnly:!0})],qe.prototype,"resolution",null),w([S()],qe.prototype,"rotation",null),w([S()],qe.prototype,"scale",null),w([S({constructOnly:!0})],qe.prototype,"spatialReferenceLocked",void 0),w([S()],qe.prototype,"stationary",null),w([S({type:BA,readOnly:!0})],qe.prototype,"timeline",void 0),w([S({readOnly:!0})],qe.prototype,"type",void 0),w([S({readOnly:!0})],qe.prototype,"updating",null),w([S()],qe.prototype,"viewpoint",null),w([S()],qe.prototype,"zoom",null),w([S({readOnly:!0})],qe.prototype,"navigating",null),w([S(),mt(e=>e instanceof LO?e:gm(DO,e))],qe.prototype,"ui",void 0),qe=w([B("esri.views.MapView")],qe);const rie=qe;function Bx(e){return(e==null?void 0:e.declaredClass)==="esri.WebMap"}var Z3;let R0=Z3=class extends pe{constructor(e){super(e),this.minValue=0,this.maxValue=0}clone(){return new Z3({minValue:this.minValue,maxValue:this.maxValue})}};w([S({type:Number,json:{write:!0}})],R0.prototype,"minValue",void 0),w([S({type:Number,json:{write:!0}})],R0.prototype,"maxValue",void 0),R0=Z3=w([B("esri.renderer.support.AuthoringInfoClassBreakInfo")],R0);var Y3;let la=Y3=class extends pe{constructor(e){super(e),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=[]}clone(){return new Y3({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:ie(this.classBreakInfos)})}};w([S({type:String,json:{write:!0}})],la.prototype,"field",void 0),w([S({type:String,json:{write:!0}})],la.prototype,"normalizationField",void 0),w([S({type:String,json:{write:!0}})],la.prototype,"label",void 0),w([S({type:[R0],json:{write:!0}})],la.prototype,"classBreakInfos",void 0),la=Y3=w([B("esri.renderers.support.AuthoringInfoFieldInfo")],la);var X3;const bf=new et({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),_f=new et({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),Hx={key:e=>typeof e=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},Wx=["high-to-low","above-and-below","centered-on","extremes"],Jx=[...new Set(["high-to-low","above-and-below","centered-on","extremes","90-10","above","below","high-to-low","above-and-below","90-10","above","below"])],Kx=["seconds","minutes","hours","days","months","years"];let hr=X3=class extends pe{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(e){return typeof e=="string"||typeof e=="number"?e:null}castStartTime(e){return typeof e=="string"||typeof e=="number"?e:null}get style(){return this.type==="color"?this._get("style"):null}set style(e){this._set("style",e)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e)}clone(){return new X3({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};w([S({types:Hx,json:{write:!0}})],hr.prototype,"endTime",void 0),w([mt("endTime")],hr.prototype,"castEndTime",null),w([S({type:String,json:{write:!0}})],hr.prototype,"field",void 0),w([S({type:Number,json:{write:!0}})],hr.prototype,"maxSliderValue",void 0),w([S({type:Number,json:{write:!0}})],hr.prototype,"minSliderValue",void 0),w([S({types:Hx,json:{write:!0}})],hr.prototype,"startTime",void 0),w([mt("startTime")],hr.prototype,"castStartTime",null),w([S({type:bf.apiValues,value:null,json:{type:bf.jsonValues,read:bf.read,write:bf.write}})],hr.prototype,"style",null),w([S({type:Jx,value:null,json:{type:Jx,origins:{"web-scene":{type:Wx,write:{writer:(e,t)=>{Wx.includes(e)&&(t.theme=e)}}}},write:!0}})],hr.prototype,"theme",null),w([S({type:_f.apiValues,json:{type:_f.jsonValues,read:_f.read,write:_f.write}})],hr.prototype,"type",void 0),w([S({type:Kx,json:{type:Kx,write:!0}})],hr.prototype,"units",void 0),hr=X3=w([B("esri.renderers.support.AuthoringInfoVisualVariable")],hr);const sie=hr;let T1=class extends pe{constructor(t){super(t),this.type=null}};w([S({readOnly:!0,json:{read:!1,write:!0}})],T1.prototype,"type",void 0),T1=w([B("esri.rest.support.ColorRamp")],T1);const P4=T1;var Q3;let xl=Q3=class extends P4{constructor(e){super(e),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new Q3({fromColor:ie(this.fromColor),toColor:ie(this.toColor),algorithm:this.algorithm})}};w([Ae({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],xl.prototype,"algorithm",void 0),w([S({type:Ve,json:{type:[St],write:!0}})],xl.prototype,"fromColor",void 0),w([S({type:Ve,json:{type:[St],write:!0}})],xl.prototype,"toColor",void 0),w([S({type:["algorithmic"]})],xl.prototype,"type",void 0),xl=Q3=w([B("esri.rest.support.AlgorithmicColorRamp")],xl);const C4=xl;var eb;let L0=eb=class extends P4{constructor(e){super(e),this.colorRamps=null,this.type="multipart"}clone(){return new eb({colorRamps:ie(this.colorRamps)})}};w([S({type:[C4],json:{write:!0}})],L0.prototype,"colorRamps",void 0),w([S({type:["multipart"]})],L0.prototype,"type",void 0),L0=eb=w([B("esri.rest.support.MultipartColorRamp")],L0);const BO=L0,nie={key:"type",base:P4,typeMap:{algorithmic:C4,multipart:BO}};function oie(e){return e!=null&&e.type?e.type==="algorithmic"?C4.fromJSON(e):e.type==="multipart"?BO.fromJSON(e):null:null}var tb;const Ka=new et({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),xf=new et({pieChart:"pie-chart",classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),Zx=new et({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),Yx=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"],aie=["high-to-low","above-and-below","above","below","90-10"],lie=["flow-line","wave-front"],uie=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let zt=tb=class extends pe{constructor(e){super(e),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const e=this._get("classificationMethod"),t=this.type;return t&&t!=="relationship"?t==="class-breaks-size"||t==="class-breaks-color"?e||"manual":null:e}set classificationMethod(e){this._set("classificationMethod",e)}readColorRamp(e){return e?oie(e):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(e){this._set("fields",e)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(e){this._set("field1",e)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(e){this._set("field2",e)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(e){this._set("flowTheme",e)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(e){this._set("focus",e)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(e){this._set("numClasses",e)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(e){this._set("statistics",e)}get standardDeviationInterval(){const e=this.type;return e&&e!=="relationship"&&e!=="class-breaks-size"&&e!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(e){this._set("standardDeviationInterval",e)}get type(){return this._get("type")}set type(e){let t=e;e==="classed-size"?t="class-breaks-size":e==="classed-color"&&(t="class-breaks-color"),this._set("type",t)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(e){this._set("univariateSymbolStyle",e)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(e){this._set("univariateTheme",e)}clone(){var e;return new tb({classificationMethod:this.classificationMethod,colorRamp:ie(this.colorRamp),fadeRatio:ie(this.fadeRatio),fields:(e=this.fields)==null?void 0:e.slice(0),field1:ie(this.field1),field2:ie(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(t=>t.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};w([S({type:Ka.apiValues,value:null,json:{type:Ka.jsonValues,read:Ka.read,write:Ka.write,origins:{"web-document":{default:"manual",type:Ka.jsonValues,read:Ka.read,write:Ka.write}}}})],zt.prototype,"classificationMethod",null),w([S({types:nie,json:{write:!0}})],zt.prototype,"colorRamp",void 0),w([me("colorRamp")],zt.prototype,"readColorRamp",null),w([S({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],zt.prototype,"fadeRatio",void 0),w([S({type:[String],value:null,json:{write:!0}})],zt.prototype,"fields",null),w([S({type:la,value:null,json:{write:!0}})],zt.prototype,"field1",null),w([S({type:la,value:null,json:{write:!0}})],zt.prototype,"field2",null),w([S({type:lie,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],zt.prototype,"flowTheme",null),w([S({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],zt.prototype,"focus",null),w([S({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],zt.prototype,"isAutoGenerated",void 0),w([S({type:Number,value:null,json:{type:St,write:!0}})],zt.prototype,"numClasses",null),w([S({type:Yx,json:{type:Yx,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],zt.prototype,"lengthUnit",void 0),w([S({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],zt.prototype,"maxSliderValue",void 0),w([S({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],zt.prototype,"minSliderValue",void 0),w([S({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],zt.prototype,"statistics",null),w([S({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],zt.prototype,"standardDeviationInterval",null),w([S({type:xf.apiValues,value:null,json:{type:xf.jsonValues,read:xf.read,write:xf.write,origins:{"web-scene":{type:Zx.jsonValues,write:{writer:Zx.write,overridePolicy:e=>({enabled:e!=="flow"})}}}}})],zt.prototype,"type",null),w([S({type:[sie],json:{write:!0}})],zt.prototype,"visualVariables",void 0),w([S({type:uie,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],zt.prototype,"univariateSymbolStyle",null),w([S({type:aie,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],zt.prototype,"univariateTheme",null),zt=tb=w([B("esri.renderers.support.AuthoringInfo")],zt);const j4=zt,R2=new et({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let D0=class extends pe{constructor(t){super(t),this.authoringInfo=null,this.type=null}async getRequiredFields(t){if(!this.collectRequiredFields)return[];const i=new Set;return await this.collectRequiredFields(i,t),Array.from(i).sort()}getSymbol(t,i){}async getSymbolAsync(t,i){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};w([S({type:j4,json:{write:!0}})],D0.prototype,"authoringInfo",void 0),w([S({type:R2.apiValues,readOnly:!0,json:{type:R2.jsonValues,read:!1,write:{writer:R2.write,ignoreOrigin:!0}}})],D0.prototype,"type",void 0),D0=w([B("esri.renderers.Renderer")],D0);const go=D0;function hie(e){var t,i;return((i=(t=e.match(cie))==null?void 0:t[1])==null?void 0:i.replace(/\\'/g,"'"))??null}const cie=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;var ib;let Yh=ib=class extends pe{constructor(){super(...arguments),this.title=null}clone(){return new ib({title:this.title})}};w([S({type:String,json:{write:!0}})],Yh.prototype,"title",void 0),Yh=ib=w([B("esri.renderers.support.LegendOptions")],Yh);var rb;let M1=rb=class extends Yh{constructor(){super(...arguments),this.showLegend=null}clone(){return new rb({title:this.title,showLegend:this.showLegend})}};w([S({type:Boolean,json:{write:!0}})],M1.prototype,"showLegend",void 0),M1=rb=w([B("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],M1);const HO=M1,L2=new et({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let xs=class extends pe{constructor(t){super(t),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(t){return t==null?t:typeof t=="function"?(de.getLogger(this).error(".field: field must be a string value"),null):ed(t)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};w([S()],xs.prototype,"index",void 0),w([S({type:L2.apiValues,readOnly:!0,json:{read:L2.read,write:L2.write}})],xs.prototype,"type",void 0),w([S({type:String,json:{write:!0}})],xs.prototype,"field",void 0),w([mt("field")],xs.prototype,"castField",null),w([S({type:String,json:{write:!0}})],xs.prototype,"valueExpression",void 0),w([S({type:String,json:{write:!0}})],xs.prototype,"valueExpressionTitle",void 0),w([S({readOnly:!0})],xs.prototype,"arcadeRequired",null),w([S({type:HO,json:{write:!0}})],xs.prototype,"legendOptions",void 0),xs=w([B("esri.renderers.visualVariables.VisualVariable")],xs);const bd=xs;var sb;let Sl=sb=class extends pe{constructor(e){super(e),this.color=null,this.label=null,this.value=null}writeValue(e,t,i){t[i]=e??0}clone(){return new sb({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};w([S({type:Ve,json:{type:[St],write:!0}})],Sl.prototype,"color",void 0),w([S({type:String,json:{write:!0}})],Sl.prototype,"label",void 0),w([S({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],Sl.prototype,"value",void 0),w([_e("value")],Sl.prototype,"writeValue",null),Sl=sb=w([B("esri.renderers.visualVariables.support.ColorStop")],Sl);const pie=Sl;var nb;let $l=nb=class extends bd{constructor(e){super(e),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value),this._set("stops",e)}clone(){var e;return new nb({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};w([S({readOnly:!0})],$l.prototype,"cache",null),w([S({type:["color"],json:{type:["colorInfo"]}})],$l.prototype,"type",void 0),w([S({type:String,json:{write:!0}})],$l.prototype,"normalizationField",void 0),w([S({type:[pie],json:{write:!0}})],$l.prototype,"stops",null),$l=nb=w([B("esri.renderers.visualVariables.ColorVariable")],$l);const WO=$l;var ob;let Yo=ob=class extends pe{constructor(e){super(e),this.label=null,this.opacity=null,this.value=null}readOpacity(e,t){return Np(t.transparency)}writeOpacity(e,t,i){t[i]=zm(e)}clone(){return new ob({label:this.label,opacity:this.opacity,value:this.value})}};w([S({type:String,json:{write:!0}})],Yo.prototype,"label",void 0),w([S({type:Number,json:{type:St,write:{target:"transparency"}}})],Yo.prototype,"opacity",void 0),w([me("opacity",["transparency"])],Yo.prototype,"readOpacity",null),w([_e("opacity")],Yo.prototype,"writeOpacity",null),w([S({type:Number,json:{write:!0}})],Yo.prototype,"value",void 0),Yo=ob=w([B("esri.renderers.visualVariables.support.OpacityStop")],Yo);const die=Yo;var ab;let Tl=ab=class extends bd{constructor(e){super(e),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value),this._set("stops",e)}clone(){var e;return new ab({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};w([S({readOnly:!0})],Tl.prototype,"cache",null),w([S({type:["opacity"],json:{type:["transparencyInfo"]}})],Tl.prototype,"type",void 0),w([S({type:String,json:{write:!0}})],Tl.prototype,"normalizationField",void 0),w([S({type:[die],json:{write:!0}})],Tl.prototype,"stops",null),Tl=ab=w([B("esri.renderers.visualVariables.OpacityVariable")],Tl);const JO=Tl;var lb;let Un=lb=class extends bd{constructor(e){super(e),this.axis=null,this.type="rotation",this.rotationType="geographic",this.valueExpressionTitle=null}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}writeValueExpressionTitleWebScene(e,t,i,s){if(s!=null&&s.messages){const u=`visualVariables[${this.index}]`;s.messages.push(new ae("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:u+".valueExpressionTitle",context:s}))}}clone(){var e;return new lb({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}};w([S({readOnly:!0})],Un.prototype,"cache",null),w([S({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],Un.prototype,"axis",void 0),w([S({type:["rotation"],json:{type:["rotationInfo"]}})],Un.prototype,"type",void 0),w([S({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],Un.prototype,"rotationType",void 0),w([S({type:String,json:{write:!0}})],Un.prototype,"valueExpressionTitle",void 0),w([_e("web-scene","valueExpressionTitle")],Un.prototype,"writeValueExpressionTitleWebScene",null),Un=lb=w([B("esri.renderers.visualVariables.RotationVariable")],Un);const KO=Un;var ub;let gh=ub=class extends pe{constructor(e){super(e),this.label=null,this.size=null,this.value=null}clone(){return new ub({label:this.label,size:this.size,value:this.value})}};w([S({type:String,json:{write:!0}})],gh.prototype,"label",void 0),w([S({type:Number,cast:ot,json:{write:!0}})],gh.prototype,"size",void 0),w([S({type:Number,json:{write:!0}})],gh.prototype,"value",void 0),gh=ub=w([B("esri.renderers.visualVariables.support.SizeStop")],gh);const vh=gh;var hb;let I1=hb=class extends HO{constructor(){super(...arguments),this.customValues=null}clone(){var e;return new hb({title:this.title,showLegend:this.showLegend,customValues:(e=this.customValues)==null?void 0:e.slice(0)})}};w([S({type:[Number],json:{write:!0}})],I1.prototype,"customValues",void 0),I1=hb=w([B("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],I1);const fie=I1;var uo,yi;function ma(e){return e&&e.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function Wp(e){return e!=null&&!isNaN(e)&&isFinite(e)}function ZO(e){return e.valueExpression?uo.Expression:e.field&&typeof e.field=="string"?uo.Field:uo.Unknown}function yie(e,t){const i=t||ZO(e),s=e.valueUnit||"unknown";return i===uo.Unknown?yi.Constant:e.stops?yi.Stops:e.minSize!=null&&e.maxSize!=null&&e.minDataValue!=null&&e.maxDataValue!=null?yi.ClampedLinear:s==="unknown"?e.minSize!=null&&e.minDataValue!=null?e.minSize&&e.minDataValue?yi.Proportional:yi.Additive:yi.Identity:yi.RealWorldSize}(function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"})(uo||(uo={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(yi||(yi={}));const N4={unknown:1,inches:zr(1,"meters","inches"),feet:zr(1,"meters","feet"),"us-feet":zr(1,"meters","us-feet"),yards:zr(1,"meters","yards"),miles:zr(1,"meters","miles"),"nautical-miles":zr(1,"meters","nautical-miles"),millimeters:zr(1,"meters","millimeters"),centimeters:zr(1,"meters","centimeters"),decimeters:zr(1,"meters","decimeters"),meters:zr(1,"meters","meters"),kilometers:zr(1,"meters","kilometers"),"decimal-degrees":1/zD(1,"meters",Pt.radius)},Aa=de.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),Xx=new ka,E1=Math.PI,YO=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function XO(e,t,i){const s="visualVariables"in e&&e.visualVariables?e.visualVariables.find(L=>L.type==="color"):e;if(!s)return;if(s.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void Aa.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const u=typeof t=="number",d=u?null:t,y=d==null?void 0:d.attributes;let v=u?t:null;const _=s.field,{ipData:M,hasExpression:E}=s.cache;let O=s.cache.compiledFunc;if(!_&&!E){const L=s.stops;return L&&L[0]&&L[0].color}if(typeof v!="number")if(E){if((i==null?void 0:i.arcade)==null)return void Aa.error("Use of arcade expressions requires an arcade context");const L={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},G=i.arcade.arcadeUtils,U=G.getViewInfo(L),K=G.createExecContext(d,U,i.timeZone);if(!O){const ee=G.createSyntaxTree(s.valueExpression);O=G.createFunction(ee),s.cache.compiledFunc=O}v=G.executeFunction(O,K)}else y&&(v=y[_]);const C=s.normalizationField,R=y!=null&&C!=null?parseFloat(y[C]):void 0;if(v!=null&&(!C||u||!isNaN(R)&&R!==0)){isNaN(R)||u||(v/=R);const L=R4(v,M);if(L){const G=L[0],U=L[1],K=G===U?s.stops[G].color:Ve.blendColors(s.stops[G].color,s.stops[U].color,L[2],i!=null?i.color:void 0);return new Ve(K)}}}function QO(e,t,i){const s="visualVariables"in e&&e.visualVariables?e.visualVariables.find(L=>L.type==="opacity"):e;if(!s)return;if(s.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void Aa.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const u=typeof t=="number",d=u?null:t,y=d==null?void 0:d.attributes;let v=u?t:null;const _=s.field,{ipData:M,hasExpression:E}=s.cache;let O=s.cache.compiledFunc;if(!_&&!E){const L=s.stops;return L&&L[0]&&L[0].opacity}if(typeof v!="number")if(E){if((i==null?void 0:i.arcade)==null)return void Aa.error("Use of arcade expressions requires an arcade context");const L={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},G=i.arcade.arcadeUtils,U=G.getViewInfo(L),K=G.createExecContext(d,U,i.timeZone);if(!O){const ee=G.createSyntaxTree(s.valueExpression);O=G.createFunction(ee),s.cache.compiledFunc=O}v=G.executeFunction(O,K)}else y&&(v=y[_]);const C=s.normalizationField,R=y!=null&&C!=null?parseFloat(y[C]):void 0;if(v!=null&&(!C||u||!isNaN(R)&&R!==0)){isNaN(R)||u||(v/=R);const L=R4(v,M);if(L){const G=L[0],U=L[1];if(G===U)return s.stops[G].opacity;{const K=s.stops[G].opacity;return K+(s.stops[U].opacity-K)*L[2]}}}}function eP(e,t,i){const s="visualVariables"in e&&e.visualVariables?e.visualVariables.find(R=>R.type==="rotation"):e;if(!s)return;if(s.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void Aa.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const u=s.axis||"heading",d=u==="heading"&&s.rotationType==="arithmetic"?90:0,y=u==="heading"&&s.rotationType==="arithmetic"?-1:1,v=typeof t=="number"?null:t,_=v==null?void 0:v.attributes,M=s.field,{hasExpression:E}=s.cache;let O=s.cache.compiledFunc,C=0;if(!M&&!E)return C;if(E){if((i==null?void 0:i.arcade)==null)return void Aa.error("Use of arcade expressions requires an arcade context");const R={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},L=i.arcade.arcadeUtils,G=L.getViewInfo(R),U=L.createExecContext(v,G,i.timeZone);if(!O){const K=L.createSyntaxTree(s.valueExpression);O=L.createFunction(K),s.cache.compiledFunc=O}C=L.executeFunction(O,U)}else _&&(C=_[M]||0);return C=typeof C!="number"||isNaN(C)?null:d+y*C,C}function mie(e,t,i){const s=typeof t=="number",u=s?null:t,d=u==null?void 0:u.attributes;let y=s?t:null;const{isScaleDriven:v}=e.cache;let _=e.cache.compiledFunc;if(v){const E=i!=null?i.scale:void 0,O=i!=null?i.view:void 0;y=E==null||O==="3d"?gie(e):E}else if(!s)switch(e.inputValueType){case uo.Expression:{if((i==null?void 0:i.arcade)==null)return void Aa.error("Use of arcade expressions requires an arcade context");const E={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},O=i.arcade.arcadeUtils,C=O.getViewInfo(E),R=O.createExecContext(u,C,i.timeZone);if(!_){const L=O.createSyntaxTree(e.valueExpression);_=O.createFunction(L),e.cache.compiledFunc=_}y=O.executeFunction(_,R);break}case uo.Field:d&&(y=d[e.field]);break;case uo.Unknown:y=null}if(!Wp(y))return null;if(s||!e.normalizationField)return y;const M=d?parseFloat(d[e.normalizationField]):null;return Wp(M)&&M!==0?y/M:null}function gie(e){let t=null,i=null;const s=e.stops;return s?(t=s[0].value,i=s[s.length-1].value):(t=e.minDataValue||0,i=e.maxDataValue||0),(t+i)/2}function rg(e,t,i){const s="visualVariables"in e&&e.visualVariables?e.visualVariables.find(d=>d.type==="size"):e;if(!s)return;if(s.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void Aa.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const u=iP(mie(s,t,i),s,t,i,s.cache.ipData);return u==null||isNaN(u)?0:u}function yr(e,t,i){return e==null?null:ma(e)?rg(e,t,i):Wp(e)?e:null}function tP(e,t,i){return Wp(i)&&e>i?i:Wp(t)&&e<t?t:e}function vie(e,t,i,s){return e+((yr(t.minSize,i,s)||t.minDataValue)??0)}function wie(e,t,i){const s=e.stops;let u=(s==null?void 0:s.length)&&s[0].size;return u==null&&(u=e.minSize),yr(u,t,i)}function bie(e,t,i,s){const u=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),d=yr(t.minSize,i,s),y=yr(t.maxSize,i,s),v=s!=null?s.shape:void 0;if(e<=t.minDataValue)return d;if(e>=t.maxDataValue)return y;if(d==null||y==null)return null;if(t.scaleBy==="area"&&v){const _=v==="circle",M=_?E1*(d/2)**2:d*d,E=M+u*((_?E1*(y/2)**2:y*y)-M);return _?2*Math.sqrt(E/E1):Math.sqrt(E)}return d+u*(y-d)}function _ie(e,t,i,s){const u=s!=null?s.shape:void 0,d=e/t.minDataValue,y=yr(t.minSize,i,s),v=yr(t.maxSize,i,s);let _=null;return _=u==="circle"?2*Math.sqrt(d*(y/2)**2):u==="square"||u==="diamond"||u==="image"?Math.sqrt(d*y**2):d*y,tP(_,y,v)}function xie(e,t,i,s,u){var _,M,E;const[d,y,v]=R4(e,u);if(d===y)return yr((_=t.stops)==null?void 0:_[d].size,i,s);{const O=yr((M=t.stops)==null?void 0:M[d].size,i,s);return O+(yr((E=t.stops)==null?void 0:E[y].size,i,s)-O)*v}}function Sie(e,t,i,s){const u=((s==null?void 0:s.resolution)??1)*N4[t.valueUnit],d=yr(t.minSize,i,s),y=yr(t.maxSize,i,s),{valueRepresentation:v}=t;let _=null;return _=v==="area"?2*Math.sqrt(e/E1)/u:v==="radius"||v==="distance"?2*e/u:e/u,tP(_,d,y)}function iP(e,t,i,s,u){switch(t.transformationType){case yi.Additive:return vie(e,t,i,s);case yi.Constant:return wie(t,i,s);case yi.ClampedLinear:return bie(e,t,i,s);case yi.Proportional:return _ie(e,t,i,s);case yi.Stops:return xie(e,t,i,s,u);case yi.RealWorldSize:return Sie(e,t,i,s);case yi.Identity:return e;case yi.Unknown:return null}}function $ie(e,t,i){const{isScaleDriven:s}=e.cache;if(!(s&&i==="3d"||t))return null;const u={scale:t,view:i};let d=yr(e.minSize,Xx,u),y=yr(e.maxSize,Xx,u);if(d!=null||y!=null){if(d>y){const v=y;y=d,d=v}return{minSize:d,maxSize:y}}}function Tie(e,t,i){if(!e.visualVariables)return;const s=[],u=[],d=[],y=[],v=[];for(const _ of e.visualVariables)switch(_.type){case"color":u.push(_);break;case"opacity":d.push(_);break;case"rotation":v.push(_);break;case"size":y.push(_)}return u.forEach(_=>{const M=XO(_,t,i);s.push({variable:_,value:M})}),d.forEach(_=>{const M=QO(_,t,i);s.push({variable:_,value:M})}),v.forEach(_=>{const M=eP(_,t,i);s.push({variable:_,value:M})}),y.forEach(_=>{const M=rg(_,t,i);s.push({variable:_,value:M})}),s.filter(_=>_.value!=null)}function R4(e,t){if(!t)return;let i=0,s=t.length-1;return t.some((u,d)=>e<u?(s=d,!0):(i=d,!1)),[i,s,(e-t[i])/(t[s]-t[i])]}function Mie(e,t,i){const s=["proportional","proportional","proportional"];for(const u of e){const d=u.useSymbolValue?"symbol-value":rg(u,t,i);switch(u.axis){case"width":s[0]=d;break;case"depth":s[1]=d;break;case"height":s[2]=d;break;case"width-and-depth":s[0]=d,s[1]=d;break;case"all":case void 0:case null:s[0]=d,s[1]=d,s[2]=d;break;default:u.axis}}return s}const Mpe=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:Mie,getColor:XO,getOpacity:QO,getRotationAngle:eP,getSize:rg,getSizeForValue:iP,getSizeFromNumberOrVariable:yr,getSizeRangeAtScale:$ie,getVisualVariableValues:Tie,viewScaleRE:YO},Symbol.toStringTag,{value:"Module"}));var cb;const Sf=new et({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),pb=new et({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function Qx(e){if(e!=null)return typeof e=="string"||typeof e=="number"?ot(e):e.type==="size"?ma(e)?e:(delete(e={...e}).type,new ct(e)):void 0}function e8(e,t,i){if(typeof e!="object")return e;const s=new ct;return s.read(e,i),s}let ct=cb=class extends bd{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&YO.test(this.valueExpression)}}set expression(e){de.getLogger(this).warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),e==="view.scale"?(this.valueExpression="$view.scale",this._set("expression",e)):this._set("expression",null)}set index(e){ma(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),ma(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e)}get inputValueType(){return ZO(this)}set maxDataValue(e){e&&this.stops&&(de.getLogger(this).warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}set maxSize(e){e&&this.stops&&(de.getLogger(this).warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}castMaxSize(e){return Qx(e)}readMaxSize(e,t,i){return e8(e,t,i)}set minDataValue(e){e&&this.stops&&(de.getLogger(this).warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}set minSize(e){e&&this.stops&&(de.getLogger(this).warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}castMinSize(e){return Qx(e)}readMinSize(e,t,i){return e8(e,t,i)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(e){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value):e&&(de.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}get transformationType(){return yie(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,t,i,s){if(e==="$view.scale"){if(s!=null&&s.messages){const u=this.index,d=typeof u=="string"?u:`visualVariables[${u}]`;s.messages.push(new ae("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:d+".valueExpression",context:s}))}}else t[i]=e}readValueUnit(e){return e?pb.read(e):null}clone(){var e,t;return new cb({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:ma(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:ma(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:(e=this.stops)==null?void 0:e.map(i=>i.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:(t=this.legendOptions)==null?void 0:t.clone()})}flipSizes(){if(this.transformationType===yi.ClampedLinear){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if(this.transformationType===yi.Stops){const e=this.stops;if(!e)return this;const t=e.map(s=>s.size).reverse(),i=e.length;for(let s=0;s<i;s++)e[s].size=t[s];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){var e;return(e=this.stops)==null?void 0:e.map(t=>t.value||0)}};w([S({readOnly:!0})],ct.prototype,"cache",null),w([S({type:Sf.apiValues,json:{type:Sf.jsonValues,origins:{"web-map":{read:!1}},read:Sf.read,write:Sf.write}})],ct.prototype,"axis",void 0),w([S({type:String,value:null,json:{read:!1}})],ct.prototype,"expression",null),w([S()],ct.prototype,"index",null),w([S({type:String,readOnly:!0})],ct.prototype,"inputValueType",null),w([S({type:fie,json:{write:!0}})],ct.prototype,"legendOptions",void 0),w([S({type:Number,value:null,json:{write:!0}})],ct.prototype,"maxDataValue",null),w([S({type:Number,value:null,json:{write:!0}})],ct.prototype,"maxSize",null),w([mt("maxSize")],ct.prototype,"castMaxSize",null),w([me("maxSize")],ct.prototype,"readMaxSize",null),w([S({type:Number,value:null,json:{write:!0}})],ct.prototype,"minDataValue",null),w([S({type:Number,value:null,json:{write:!0}})],ct.prototype,"minSize",null),w([mt("minSize")],ct.prototype,"castMinSize",null),w([me("minSize")],ct.prototype,"readMinSize",null),w([S({type:String,json:{write:!0}})],ct.prototype,"normalizationField",void 0),w([S({readOnly:!0})],ct.prototype,"arcadeRequired",null),w([S({type:String})],ct.prototype,"scaleBy",void 0),w([S({type:[vh],value:null,json:{write:!0}})],ct.prototype,"stops",null),w([S({type:["outline"],json:{write:!0}})],ct.prototype,"target",void 0),w([S({type:String,readOnly:!0})],ct.prototype,"transformationType",null),w([S({type:["size"],json:{type:["sizeInfo"]}})],ct.prototype,"type",void 0),w([S({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],ct.prototype,"useSymbolValue",void 0),w([S({type:String,json:{write:!0}})],ct.prototype,"valueExpression",void 0),w([me("valueExpression",["valueExpression","expression"])],ct.prototype,"readValueExpression",null),w([_e("web-scene","valueExpression")],ct.prototype,"writeValueExpressionWebScene",null),w([S({type:["radius","diameter","area","width","distance"],json:{write:!0}})],ct.prototype,"valueRepresentation",void 0),w([S({type:pb.apiValues,json:{write:pb.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],ct.prototype,"valueUnit",void 0),w([me("valueUnit")],ct.prototype,"readValueUnit",null),ct=cb=w([B("esri.renderers.visualVariables.SizeVariable")],ct);const sg=ct,Iie={color:WO,size:sg,opacity:JO,rotation:KO},Eie=new et({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),kie=/^\[([^\]]+)\]$/i;let k1=class extends Ne{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(t){if(this._resetVariables(),t=t&&t.filter(i=>!!i),t==null?void 0:t.length){for(const i of t)switch(i.type){case"color":this.colorVariables.push(i);break;case"opacity":this.opacityVariables.push(i);break;case"rotation":this.rotationVariables.push(i);break;case"size":this.sizeVariables.push(i)}this.sizeVariables.length&&this.sizeVariables.some(i=>!!i.target)&&t.sort((i,s)=>{let u=null;return u=i.target===s.target?0:i.target?1:-1,u});for(let i=0;i<t.length;i++)t[i].index=i;this._set("visualVariables",t)}else this._set("visualVariables",t)}readVariables(t,i,s){const{rotationExpression:u,rotationType:d}=i,y=u==null?void 0:u.match(kie),v=y==null?void 0:y[1];if(v&&(t||(t=[]),t.push({type:"rotationInfo",rotationType:d,field:v})),t)return t.map(_=>{const M=Eie.read(_.type),E=Iie[M];E||(de.getLogger(this).warn(`Unknown variable type: ${M}`),s!=null&&s.messages&&s.messages.push(new is("visual-variable:unsupported",`visualVariable of type '${M}' is not supported`,{definition:_,context:s})));const O=new E;return O.read(_,s),O})}writeVariables(t,i){const s=[];for(const u of t){const d=u.toJSON(i);d&&s.push(d)}return s}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};w([S()],k1.prototype,"visualVariables",null),k1=w([B("esri.renderers.visualVariables.VisualVariableFactory")],k1);const Aie=k1,Oie={base:bd,key:"type",typeMap:{opacity:JO,color:WO,rotation:KO,size:sg}},Oc=e=>{let t=class extends e{constructor(){super(...arguments),this._vvFactory=new Aie}set visualVariables(i){this._vvFactory.visualVariables=i,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(i,s,u){return this._vvFactory.readVariables(i,s,u)}writeVisualVariables(i,s,u,d){s[u]=this._vvFactory.writeVariables(i,d)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const i of this.visualVariables)if(i.arcadeRequired)return!0;return!1}hasVisualVariables(i,s){return i?this.getVisualVariablesForType(i,s).length>0:this.getVisualVariablesForType("size",s).length>0||this.getVisualVariablesForType("color",s).length>0||this.getVisualVariablesForType("opacity",s).length>0||this.getVisualVariablesForType("rotation",s).length>0}getVisualVariablesForType(i,s){const u=this.visualVariables;return u?u.filter(d=>d.type===i&&(typeof s=="string"?d.target===s:s!==!1||!d.target)):[]}async collectVVRequiredFields(i,s){let u=[];this.visualVariables&&(u=u.concat(this.visualVariables));for(const d of u)d&&(d.field&&jr(i,s,d.field),d.normalizationField&&jr(i,s,d.normalizationField),d.valueExpression&&(Pie(d.valueExpression,i,s)||await nr(i,s,d.valueExpression)))}};return w([S({types:[Oie],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),w([me("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),w([_e("visualVariables")],t.prototype,"writeVisualVariables",null),t=w([B("esri.renderers.mixins.VisualVariablesMixin")],t),t};function Pie(e,t,i){const s=hie(e);return s!=null&&(jr(t,i,s),!0)}const Xc={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function Cie(e,t=Xc){var v,_;if(!e)return{symbol:null};const{retainId:i=Xc.retainId,ignoreDrivers:s=Xc.ignoreDrivers,hasLabelingContext:u=Xc.hasLabelingContext,retainCIM:d=Xc.retainCIM}=t;let y=null;if(q7(e)||e instanceof ju)y=e.clone();else if(e.type==="cim"){const M=(_=(v=e.data)==null?void 0:v.symbol)==null?void 0:_.type;if(M!=="CIMPointSymbol")return{error:new ae("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${M||"unknown"}' is unsupported in 3D`,{symbol:e})};y=d?e.clone():Yl.fromCIMSymbol(e)}else if(e instanceof ns)y=Jm.fromSimpleLineSymbol(e);else if(e instanceof za)y=Yl.fromSimpleMarkerSymbol(e);else if(e instanceof Zm)y=Yl.fromPictureMarkerSymbol(e);else if(e instanceof Cu)y=t.geometryType&&t.geometryType==="mesh"?Km.fromSimpleFillSymbol(e):dd.fromSimpleFillSymbol(e);else{if(!(e instanceof Ec))return{error:new ae("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};y=u?Wm.fromTextSymbol(e):Yl.fromTextSymbol(e)}return i&&y&&y.type!=="cim"&&(y.id=e.id),s&&q7(y)&&y.symbolLayers.forEach(M=>M.ignoreDrivers=!0),{symbol:y}}function im(e,t,i,s){const u=rP(e,{},{context:s,isLabelSymbol:!1});u!=null&&(t[i]=u)}function t8(e,t,i,s){const u=rP(e,{},{context:s,isLabelSymbol:!0});u!=null&&(t[i]=u)}function i8(e){return e instanceof Ic||e instanceof ju}function rP(e,t,i){if(e==null)return null;const{context:s,isLabelSymbol:u}=i,d=s==null?void 0:s.origin,y=s==null?void 0:s.messages;if(d==="web-scene"&&!i8(e)){const v=Cie(e,{retainCIM:!0,hasLabelingContext:u});return v.symbol!=null?v.symbol.write(t,s):(y==null||y.push(new ae("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:s,error:v.error})),null)}return(d==="web-map"||d==="portal-item"&&!eE(s==null?void 0:s.layer))&&i8(e)?(y==null||y.push(new ae("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:s})),null):e.write(t,s)}function Epe(e,t){return _K(e,null,t)}const ng={types:Mk,json:{write:{writer:im},origins:{"web-scene":{types:U7,write:{writer:im},read:{reader:vc({types:U7})}}}}},L4=P9({json:{origins:{"web-scene":{write:{isRequired:!0}}}}},ng),sP={types:{base:gr,key:"type",typeMap:{"simple-fill":nu.typeMap["simple-fill"],"picture-fill":nu.typeMap["picture-fill"],"polygon-3d":nu.typeMap["polygon-3d"]}},json:{write:{writer:im},origins:{"web-scene":{type:dd,write:{writer:im}}}}},A1={cast:e=>e==null||typeof e=="string"||typeof e=="number"?e:`${e}`,json:{type:String,write:{writer:(e,t)=>{t.value=e==null?void 0:e.toString()}}}};var db;let Xo=db=class extends pe{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new db({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}};w([S({type:String,json:{write:!0}})],Xo.prototype,"description",void 0),w([S({type:String,json:{write:!0}})],Xo.prototype,"label",void 0),w([S({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],Xo.prototype,"minValue",void 0),w([S({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],Xo.prototype,"maxValue",void 0),w([S(L4)],Xo.prototype,"symbol",void 0),Xo=db=w([B("esri.renderers.support.ClassBreakInfo")],Xo);const rm=Xo;var fb;const nP="log",O1="percent-of-total",P1="field",$f=new et({esriNormalizeByLog:nP,esriNormalizeByPercentOfTotal:O1,esriNormalizeByField:P1}),jie=ei(rm);let oi=fb=class extends Oc(go){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,i){if(!Array.isArray(e))return;let s=t.minValue;return e.map(u=>{const d=new rm;return d.read(u,i),d.minValue==null&&(d.minValue=s),d.maxValue==null&&(d.maxValue=d.minValue),s=d.maxValue,d})}writeClassBreakInfos(e,t,i,s){const u=e.map(d=>d.write({},s));this._areClassBreaksConsecutive()&&u.forEach(d=>delete d.classMinValue),t[i]=u}castField(e){return e==null?e:typeof e=="function"?(de.getLogger(this).error(".field: field must be a string value"),null):ed(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,i=this.normalizationTotal!=null;return t||i?(e=t&&P1||i&&O1||null,t&&i&&de.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):e!==P1&&e!==O1||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,i){let s=null;s=typeof e=="number"?new rm({minValue:e,maxValue:t,symbol:Ik(i)}):jie(ie(e)),this.classBreakInfos.push(s),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const i=this.classBreakInfos.length;for(let s=0;s<i;s++){const u=[this.classBreakInfos[s].minValue,this.classBreakInfos[s].maxValue];if(u[0]===e&&u[1]===t){this.classBreakInfos.splice(s,1);break}}}getBreakIndex(e,t){return this.valueExpression&&(t==null?void 0:t.arcade)==null&&de.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let i=t;this.valueExpression&&(t==null?void 0:t.arcade)==null&&(i={...i,arcade:await wu()});const s=this.getBreakIndex(e,i);return s!==-1?this.classBreakInfos[s]:null}getSymbol(e,t){if(this.valueExpression&&(t==null?void 0:t.arcade)==null)return void de.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this.getBreakIndex(e,t);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let i=t;if(this.valueExpression&&(t==null?void 0:t.arcade)==null){const u=await wu(),{arcadeUtils:d}=u;d.hasGeometryOperations(this.valueExpression)&&await d.enableGeometryOperations(),i={...i,arcade:u}}const s=this.getBreakIndex(e,i);return s>-1?this.classBreakInfos[s].symbol:this.defaultSymbol}getSymbols(){const e=[];return this.classBreakInfos.forEach(t=>{t.symbol&&e.push(t.symbol)}),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),i=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce((s,u)=>s+u.getMeshHash(),"")}.${i}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){var e,t;return new fb({field:this.field,backgroundFillSymbol:(e=this.backgroundFillSymbol)==null?void 0:e.clone(),defaultLabel:this.defaultLabel,defaultSymbol:(t=this.defaultSymbol)==null?void 0:t.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:ie(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:ie(this.visualVariables),legendOptions:ie(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}async collectRequiredFields(e,t){const i=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(i)}async collectSymbolFields(e,t){const i=[...this.getSymbols().map(s=>s.collectRequiredFields(e,t)),nr(e,t,this.valueExpression)];jr(e,t,this.field),jr(e,t,this.normalizationField),await Promise.all(i)}_getBreakIndexForExpression(e,t){const{viewingMode:i,scale:s,spatialReference:u,arcade:d,timeZone:y}=t??{},{valueExpression:v}=this;let _=this._compiledValueExpression.valueExpression===v?this._compiledValueExpression.compiledFunction:null;const M=d.arcadeUtils;if(!_){const O=M.createSyntaxTree(v);_=M.createFunction(O),this._compiledValueExpression.compiledFunction=_}this._compiledValueExpression.valueExpression=v;const E=M.executeFunction(_,M.createExecContext(e,M.getViewInfo({viewingMode:i,scale:s,spatialReference:u}),y));return this._getBreakIndexfromInfos(E)}_getBreakIndexForField(e){const t=this.field,i=e.attributes,s=this.normalizationType;let u=parseFloat(i[t]);if(s){const d=this.normalizationTotal,y=parseFloat(this.normalizationField?i[this.normalizationField]:void 0);if(s===nP)u=Math.log(u)*Math.LOG10E;else if(s!==O1||d==null||isNaN(d)){if(s===P1&&!isNaN(y)){if(isNaN(u)||isNaN(y))return-1;u/=y}}else u=u/d*100}return this._getBreakIndexfromInfos(u)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(e!=null&&typeof e=="number"&&!isNaN(e))for(let i=0;i<this.classBreakInfos.length;i++){const s=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(s[0]<=e&&(t?e<=s[1]:e<s[1]))return i}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let i=1;i<t;i++)if(e[i-1].maxValue!==e[i].minValue)return!1;return!0}};w([S(sP)],oi.prototype,"backgroundFillSymbol",void 0),w([S({type:[rm]})],oi.prototype,"classBreakInfos",void 0),w([me("classBreakInfos")],oi.prototype,"readClassBreakInfos",null),w([_e("classBreakInfos")],oi.prototype,"writeClassBreakInfos",null),w([S({type:String,json:{write:!0}})],oi.prototype,"defaultLabel",void 0),w([S(ng)],oi.prototype,"defaultSymbol",void 0),w([S({type:String,json:{write:!0}})],oi.prototype,"field",void 0),w([mt("field")],oi.prototype,"castField",null),w([S({type:Boolean})],oi.prototype,"isMaxInclusive",void 0),w([S({type:Yh,json:{write:!0}})],oi.prototype,"legendOptions",void 0),w([S({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],oi.prototype,"minValue",null),w([S({type:String,json:{write:!0}})],oi.prototype,"normalizationField",void 0),w([S({type:Number,cast:e=>Zr(e),json:{write:!0}})],oi.prototype,"normalizationTotal",void 0),w([S({type:$f.apiValues,value:null,json:{type:$f.jsonValues,read:$f.read,write:$f.write}})],oi.prototype,"normalizationType",null),w([Ae({classBreaks:"class-breaks"})],oi.prototype,"type",void 0),w([S({type:String,json:{write:!0}})],oi.prototype,"valueExpression",void 0),w([S({type:String,json:{write:!0}})],oi.prototype,"valueExpressionTitle",void 0),oi=fb=w([B("esri.renderers.ClassBreaksRenderer")],oi);const oP=oi,D2=-3;var to;(function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME"})(to||(to={}));let kpe=class{constructor(t,i,s){this.name=t,this._storage=i,this.id=Rie+++":",this.size=0,this.maxSize=0,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),s&&(this._storage.registerRemoveFunc(this.id,s),this._removeFunc=!0)}destroy(){this._storage.clear(this),this._removeFunc&&this._storage.deregisterRemoveFunc(this.id),this._storage.deregister(this),this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get sizeAll(){return this._storage.size}resetHitRate(){this._hit=this._miss=0}put(t,i,s,u=0){this._storage.put(this,t,i,s,u)}get(t){const i=this._storage.get(this,t);return i===void 0?++this._miss:++this._hit,i}peek(t){return this._storage.peek(this,t)}pop(t){const i=this._storage.pop(this,t);return i===void 0?++this._miss:++this._hit,i}updateSize(t,i,s){this._storage.updateSize(this,t,i,s)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}},Nie=class{get size(){return this._size}constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new Y1,this._users=new Y1}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,i){this._removeFuncs.push([t,i])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace(i=>i[0]!==t)}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,0),this._checkSizeLimits()}put(t,i,s,u,d){i=t.id+i;const y=this._db.get(i);if(y&&(this._size-=y.size,t.size-=y.size,this._db.delete(i),y.entry!==s&&this._notifyRemove(i,y.entry,to.ALL)),u>this._maxSize)return void this._notifyRemove(i,s,to.ALL);if(s===void 0)return void console.warn("Refusing to cache undefined entry ");if(!u||u<0)return console.warn(`Refusing to cache entry with size ${u} for key ${i}`),void this._notifyRemove(i,s,to.ALL);const v=1+Math.max(d,D2)-D2;this._db.set(i,{entry:s,size:u,lifetime:v,lives:v}),this._size+=u,t.size+=u,this._checkSizeLimits()}updateSize(t,i,s,u){i=t.id+i;const d=this._db.get(i);if(d&&d.entry===s){for(this._size-=d.size,t.size-=d.size;u>this._maxSize;){const y=this._notifyRemove(i,s,to.SOME);if(!(y!=null&&y>0))return void this._db.delete(i);u=y}d.size=u,this._size+=u,t.size+=u,this._checkSizeLimits()}}pop(t,i){i=t.id+i;const s=this._db.get(i);if(s)return this._size-=s.size,t.size-=s.size,this._db.delete(i),++this._hit,s.entry;++this._miss}get(t,i){i=t.id+i;const s=this._db.get(i);if(s!==void 0)return this._db.delete(i),s.lives=s.lifetime,this._db.set(i,s),++this._hit,s.entry;++this._miss}peek(t,i){const s=this._db.get(t.id+i);return s?++this._hit:++this._miss,s==null?void 0:s.entry}get performanceInfo(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},i={},s=new Array;this._db.forEach((y,v)=>{const _=y.lifetime;s[_]=(s[_]||0)+y.size,this._users.forAll(M=>{const{id:E,name:O}=M;if(v.startsWith(E)){const C=i[O]||0;i[O]=C+y.size}})});const u={};this._users.forAll(y=>{const v=y.name;if("hitRate"in y&&typeof y.hitRate=="number"&&!isNaN(y.hitRate)&&y.hitRate>0){const _=i[v]||0;i[v]=_,u[v]=Math.round(100*y.hitRate)+"%"}else u[v]="0%"});const d=Object.keys(i);d.sort((y,v)=>i[v]-i[y]),d.forEach(y=>t[y]=Math.round(i[y]/2**20)+"MB / "+u[y]);for(let y=s.length-1;y>=0;--y){const v=s[y];v&&(t["Priority "+(y+D2-1)]=Math.round(v/this._size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll(t=>t.resetHitRate())}clear(t){const i=t.id;this._db.forEach((s,u)=>{u.startsWith(i)&&(this._size-=s.size,this._db.delete(u),this._notifyRemove(u,s.entry,to.ALL))}),t.size=0}clearAll(){this._db.forEach((t,i)=>this._notifyRemove(i,t.entry,to.ALL)),this._users.forEach(t=>t.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,i,s){let u;return this._removeFuncs.some(d=>{if(t.startsWith(d[0])){const y=d[1](i,s);return typeof y=="number"&&(u=y),!0}return!1}),u}_checkSizeLimits(){if(this._size>this._maxSize){for(const[t,i]of this._db)if(this._purgeItem(t,i),this._size<=.9*this.maxSize)return}this._users.forEach(t=>{if(t.maxSize>0&&t.size>t.maxSize){for(const[i,s]of this._db)if(i.startsWith(t.id)&&(this._purgeItem(i,s,t),t.size<=.9*t.maxSize))return}})}_purgeItem(t,i,s=this._users.find(u=>t.startsWith(u.id))){if(this._db.delete(t),i.lives<=1){this._size-=i.size,s&&(s.size-=i.size);const u=this._notifyRemove(t,i.entry,to.SOME);u!=null&&u>0&&(this._size+=u,s&&(s.size+=u),i.lives=i.lifetime,i.size=u,this._db.set(t,i))}else--i.lives,this._db.set(t,i)}},Rie=0,Lie=class{constructor(t,i){this._storage=new Nie,this.id="",this.name="",this.size=0,this._storage.maxSize=t,this._storage.register(this),i&&this._storage.registerRemoveFunc("",i)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(t,i,s=1){this._storage.put(this,t,i,s,1)}pop(t){return this._storage.pop(this,t)}get(t){return this._storage.get(this,t)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}resetHitRate(){}},yb=class{constructor(t,i,s=""){this.major=t,this.minor=i,this._context=s}lessThan(t,i){return this.major<t||t===this.major&&this.minor<i}since(t,i){return!this.lessThan(t,i)}validate(t){if(this.major!==t.major){const i=this._context&&this._context+":",s=this._context&&this._context+" ";throw new ae(i+"unsupported-version",`Required major ${s}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:t})}}clone(){return new yb(this.major,this.minor,this._context)}static parse(t,i=""){const[s,u]=t.split("."),d=/^\s*\d+\s*$/;if(!(s!=null&&s.match)||!d.test(s))throw new ae((i&&i+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!(u!=null&&u.match)||!d.test(u))throw new ae((i&&i+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});const y=parseInt(s,10),v=parseInt(u,10);return new yb(y,v,i)}},og=class{};function Die(e){return e instanceof bc?e===og.instance:(e==null?void 0:e.toString().toLowerCase())==="unknown"}function Npe(e){return Die(e)?og.instance:e}og.instance=new Nr("Etc/UTC");function Fie(e){return"timeZone"in e}function zie(e){return"timeZone"in e}function Vie(e){return"dateFieldsTimeZone"in e}const Gie=new Map;class Xh{static fromJSON(t){return new Xh(t.fields,t.timeZoneByFieldName)}static fromLayer(t){return new Xh(t.fields??[],s8(t))}static fromLayerJSON(t){return new Xh(t.fields??[],s8(t))}constructor(t=[],i){var u;this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=t||[],this._timeZoneByFieldName=i?new Map(i):null;const s=[];for(const d of this.fields){const y=d==null?void 0:d.name,v=r8(y);if(y&&v){const _=zl(y);this._fieldsMap.set(y,d),this._fieldsMap.set(_,d),this._normalizedFieldsMap.set(v,d),s.push(`${_}:${d.type}:${(u=this._timeZoneByFieldName)==null?void 0:u.get(y)}`),nJ(d)?(this.dateFields.push(d),this._dateFieldsSet.add(d)):VE(d)&&(this._numericFieldsSet.add(d),this.numericFields.push(d)),N7(d)||R7(d)||(d.editable=d.editable==null||!!d.editable,d.nullable=d.nullable==null||!!d.nullable)}}s.sort(),this.uid=s.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const t of this.fields)N7(t)||R7(t)||t.nullable||HW(t)!==void 0||this._requiredFields.push(t)}return this._requiredFields}equals(t){return this.uid===(t==null?void 0:t.uid)}has(t){return this.get(t)!=null}get(t){if(!t)return;let i=this._fieldsMap.get(t);return i||(i=this._fieldsMap.get(zl(t))??this._normalizedFieldsMap.get(r8(t)),i&&this._fieldsMap.set(t,i),i)}getTimeZone(t){const i=this.get(t&&typeof t!="string"?t.name:t);return i?this._timeZoneByFieldName?this._timeZoneByFieldName.get(i.name):i.type==="date"||i.type==="esriFieldTypeDate"?(de.getLogger("esri.layers.support.FieldsIndex").error(new ae("getTimeZone:no-timezone-information",`no time zone information for field '${i.name}'`)),Ma):aP.has(i.type)?mu:null:null}getLuxonTimeZone(t){const i=this.getTimeZone(t);return i?i===mu?og.instance:i===Ma?ki.utcInstance:r$(Gie,i,()=>Nr.create(i)):null}isDateField(t){return this._dateFieldsSet.has(this.get(t))}isTimeOnlyField(t){return oJ(this.get(t))}isNumericField(t){return this._numericFieldsSet.has(this.get(t))}normalizeFieldName(t){var i;return((i=this.get(t))==null?void 0:i.name)??void 0}toJSON(){return{fields:this.fields.map(t=>ly(t)?t.toJSON():t),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}function zl(e){return e.trim().toLowerCase()}function r8(e){var t;return((t=AW(e))==null?void 0:t.toLowerCase())??""}const aP=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function s8(e){const t=new Map;if(!e.fields)return t;const i=e.datesInUnknownTimezone===!0,{timeInfo:s,editFieldsInfo:u}=e,d=(s?"startField"in s?s.startField:s.startTimeField:"")??"",y=(s?"endField"in s?s.endField:s.endTimeField:"")??"",v=Vie(e)?e.dateFieldsTimeZone??null:e.dateFieldsTimeReference?qf(e.dateFieldsTimeReference):null,_=u?Fie(u)?u.timeZone??v:u.dateFieldsTimeReference?qf(u.dateFieldsTimeReference):v??Ma:null,M=s?zie(s)?s.timeZone??v:s.timeReference?qf(s.timeReference):v:null,E=new Map([[zl((u==null?void 0:u.creationDateField)??""),_],[zl((u==null?void 0:u.editDateField)??""),_],[zl(d),M],[zl(y),M]]);for(const{name:O,type:C}of e.fields)if(aP.has(C))t.set(O,mu);else if(C!=="date"&&C!=="esriFieldTypeDate")t.set(O,null);else if(i)t.set(O,mu);else{const R=E.get(zl(O??""))??v;t.set(O,R)}return t}const n8="esri.renderers.support.DictionaryLoader",qie={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let D4=class{constructor(t,i,s){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new Lie(100),this._dictionaryVersion=null,this._fieldIndex=null,this._dictionaryPromise=null,this.url=t,this.config=i,this.fieldMap=s}getSymbolFields(){return this._symbolFields}async getSymbolAsync(t,i){let s;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(i));try{s=await this._dictionaryPromise}catch(L){if(Rr(L))return this._dictionaryPromise=null,null}const u=this._dictionaryVersion&&this._dictionaryVersion.since(4,0),d={};if(this.fieldMap)for(const L of this._symbolFields){const G=this._getFieldName(this.fieldMap[L]);if(G){const U=t.attributes[G];d[L]=u?U:U!=null?""+t.attributes[G]:""}else d[L]=""}let y=null;try{y=s==null?void 0:s(d,i)}catch{return null}if(!y||typeof y!="string")return null;const v=j9(y).toString(),_=this._symbolCache.get(v);if(_)return _.catch(()=>{this._symbolCache.pop(v)}),_;const M=y.split(";"),E=[],O=[];for(const L of M)if(L)if(L.includes("po:")){const G=L.substr(3).split("|");if(G.length===3){const U=G[0],K=G[1];let ee=G[2];if(K==="DashTemplate")ee=ee.split(" ").map(Q=>Number(Q));else if(K==="Color"){const Q=new Ve(ee).toRgba();ee=[Q[0],Q[1],Q[2],255*Q[3]]}else ee=Number(ee);O.push({primitiveName:U,propertyName:K,value:ee})}}else if(L.includes("|")){for(const G of L.split("|"))if(this._itemNames.has(G)){E.push(G);break}}else this._itemNames.has(L)&&E.push(L);const C=t.geometry==null||!t.geometry.hasZ&&t.geometry.type==="point",R=this._cimPartsToCIMSymbol(E,O,C,i);return this._symbolCache.put(v,R,1),R}async fetchResources(t){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void de.getLogger(n8).error("no valid URL!");const i=Yt(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:t!=null?t.signal:null}),[{data:s}]=await Promise.all([i,wu()]);if(!s)throw this._dictionaryPromise=null,new ae("esri.renderers.DictionaryRenderer","Bad dictionary data!");const{authoringInfo:u,dictionary_version:d,expression:y,itemsNames:v}=s,_=y;let M=!1;d&&(this._dictionaryVersion=yb.parse(d),M=this._dictionaryVersion.since(4,0)),this._refSymbolUrlTemplate=this.url+"/"+s.cimRefTemplateUrl,this._itemNames=new Set(v),this._symbolFields=u.symbol;const E={};if(this.config){const R=this.config;for(const L in R)E[L]=R[L]}if(u.configuration)for(const R of u.configuration)E.hasOwnProperty(R.name)||(E[R.name]=R.value);const O=[];if(t!=null&&t.fields&&this.fieldMap)for(const R of this._symbolFields){const L=this.fieldMap[R],G=t.fields.filter(U=>U.name.toLowerCase()===(L==null?void 0:L.toLowerCase()));G.length>0&&O.push({...G[0],type:M?G[0].type:"esriFieldTypeString"})}O.length>0&&(this._fieldIndex=new Xh(O));const C=IW(_,t!=null?t.spatialReference:null,O,E).then(R=>{const L={scale:0};return(G,U)=>{if(R==null)return null;const K=R.repurposeFeature({geometry:null,attributes:G});return L.scale=U!=null?U.scale??void 0:void 0,R.evaluate({$feature:K,$view:L},R.services)}}).catch(R=>(de.getLogger(n8).error("Creating dictinoary expression failed:",R),null));return this._dictionaryPromise=C,C}async _cimPartsToCIMSymbol(t,i,s,u){const d=new Array(t.length);for(let _=0;_<t.length;_++)d[_]=this._getSymbolPart(t[_],u);const y=await Promise.all(d),v=this.fieldMap;if(v)for(const _ of y)lP(_,v);return new ud({data:this._combineSymbolParts(y,i,s)})}async _getSymbolPart(t,i){if(this._ongoingRequests.has(t))return this._ongoingRequests.get(t).then(d=>d.data);const s=this._refSymbolUrlTemplate.replaceAll(/\{itemName\}/gi,t),u=Yt(s,{responseType:"json",query:{f:"json"},...i});this._ongoingRequests.set(t,u);try{return(await u).data}catch(d){throw this._ongoingRequests.delete(t),d}}_combineSymbolParts(t,i,s){if(!t||t.length===0)return null;const u={...t[0]};if(t.length>1){u.symbolLayers=[];for(const d of t){const y=d;u.symbolLayers.unshift(...y.symbolLayers)}}return s&&(u.callout=qie),{type:"CIMSymbolReference",symbol:u,primitiveOverrides:i}}_getFieldName(t){if(this._fieldIndex!==null){const i=this._fieldIndex.get(t);return i?i.name:t}return t}};function lP(e,t){if(!e)return;const i=e.symbolLayers;if(!i)return;let s=i.length;for(;s--;){const u=i[s];u&&u.enable!==!1&&u.type==="CIMVectorMarker"&&Uie(u,t)}}function Uie(e,t){const i=e.markerGraphics;if(i)for(const s of i){if(!s)continue;const u=s.symbol;if(u)switch(u.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":lP(u,t);break;case"CIMTextSymbol":u.fieldMap=t}}}const Lpe=Object.freeze(Object.defineProperty({__proto__:null,DictionaryLoader:D4},Symbol.toStringTag,{value:"Module"}));var mb;let Ss=mb=class extends Oc(go){constructor(e){super(e),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new D4(this.url,this.config,this.fieldMap)}writeData(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}writeVisualVariables(e,t,i,s){s!=null&&s.origin||super.writeVisualVariables(e,t,i,s)}clone(){return new mb({config:ie(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:ie(this.fieldMap),url:ie(this.url),visualVariables:ie(this.visualVariables)})}async getSymbolAsync(e,t){return this._loader.getSymbolAsync(e,t)}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t),this.scaleExpression&&await nr(e,t,this.scaleExpression);for(const i in this.fieldMap){const s=this.fieldMap[i];t.has(s)&&e.add(s)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};w([S({type:D4})],Ss.prototype,"_loader",null),w([S({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],Ss.prototype,"config",void 0),w([S({type:Object,json:{write:!0}})],Ss.prototype,"fieldMap",void 0),w([S({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],Ss.prototype,"scaleExpression",void 0),w([_e("scaleExpression")],Ss.prototype,"writeData",null),w([S({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],Ss.prototype,"scaleExpressionTitle",void 0),w([S({type:String,json:{write:!0}})],Ss.prototype,"url",void 0),w([_e("visualVariables")],Ss.prototype,"writeVisualVariables",null),Ss=mb=w([B("esri.renderers.DictionaryRenderer")],Ss);const Bie=Ss;var gb;let Bn=gb=class extends pe{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return e==null?e:typeof e=="function"?(de.getLogger(this).error(".field: field must be a string value"),null):ed(e)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){var e;return new gb({color:(e=this.color)==null?void 0:e.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};w([S({type:Ve,json:{type:[Number],write:!0}})],Bn.prototype,"color",void 0),w([S({type:String,json:{write:!0}})],Bn.prototype,"field",void 0),w([mt("field")],Bn.prototype,"castField",null),w([S({type:String,json:{write:!0}})],Bn.prototype,"label",void 0),w([S({type:String,json:{write:!0}})],Bn.prototype,"valueExpression",void 0),w([S({type:String,json:{write:!0}})],Bn.prototype,"valueExpressionTitle",void 0),Bn=gb=w([B("esri.renderers.support.AttributeColorInfo")],Bn);const uP=Bn;var vb;let C1=vb=class extends pe{constructor(){super(...arguments),this.unit=null}clone(){return new vb({unit:this.unit})}};w([S({type:String,json:{write:!0}})],C1.prototype,"unit",void 0),C1=vb=w([B("esri.renderers.support.DotDensityLegendOptions")],C1);const Hie=C1;var wb;let cr=wb=class extends Oc(go){constructor(e){super(e),this.attributes=null,this.backgroundColor=new Ve([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new ns,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(e){if(this.referenceScale==null)return this.dotValue;const t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new Cu({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){var e;return((e=this.attributes)==null?void 0:e.reduce((t,i)=>t+i.getAttributeHash(),""))??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new wb({attributes:ie(this.attributes),backgroundColor:ie(this.backgroundColor),dotBlendingEnabled:ie(this.dotBlendingEnabled),dotShape:ie(this.dotShape),dotSize:ie(this.dotSize),dotValue:ie(this.dotValue),legendOptions:ie(this.legendOptions),outline:ie(this.outline),referenceScale:ie(this.referenceScale),visualVariables:ie(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}getControllerHash(){var t;return`${(t=this.attributes)==null?void 0:t.map(i=>i.field||i.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const i of this.attributes??[])i.valueExpression&&await nr(e,t,i.valueExpression),i.field&&e.add(i.field)}};w([S({type:[uP],json:{write:!0}})],cr.prototype,"attributes",void 0),w([S({type:Ve,json:{write:!0}})],cr.prototype,"backgroundColor",void 0),w([S({type:Boolean,json:{write:!0}})],cr.prototype,"dotBlendingEnabled",void 0),w([S({type:String,json:{write:!1}})],cr.prototype,"dotShape",void 0),w([S({type:Number,json:{write:!0}})],cr.prototype,"dotSize",void 0),w([S({type:Hie,json:{write:!0}})],cr.prototype,"legendOptions",void 0),w([S({type:ns,json:{default:null,write:!0}})],cr.prototype,"outline",void 0),w([S({type:Number,json:{write:!0}})],cr.prototype,"dotValue",void 0),w([S({type:Number,json:{write:!0}})],cr.prototype,"referenceScale",void 0),w([S({type:Number,json:{write:!0}})],cr.prototype,"seed",void 0),w([Ae({dotDensity:"dot-density"})],cr.prototype,"type",void 0),cr=wb=w([B("esri.renderers.DotDensityRenderer")],cr);const Wie=cr;var bb;let F0=bb=class extends pe{constructor(e){super(e),this.color=null,this.ratio=null}clone(){return new bb({color:this.color,ratio:this.ratio})}};w([S({type:Ve,json:{type:[St],default:null,write:!0}})],F0.prototype,"color",void 0),w([S({type:Number,json:{write:!0}})],F0.prototype,"ratio",void 0),F0=bb=w([B("esri.renderers.support.HeatmapColorStop")],F0);const j1=F0;let wh=class extends Mt(pe){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};w([S({type:String,json:{write:!0}})],wh.prototype,"minLabel",void 0),w([S({type:String,json:{write:!0}})],wh.prototype,"maxLabel",void 0),w([S({type:String,json:{write:!0}})],wh.prototype,"title",void 0),wh=w([B("esri.renderers.support.HeatmapLegendOptions")],wh);function ag(){return[0,0,0,0]}function Jie(e){return[e[0],e[1],e[2],e[3]]}function Pc(e,t,i,s){return[e,t,i,s]}function Kie(e,t=ag()){const i=Math.min(4,e.length);for(let s=0;s<i;++s)t[s]=e[s];return t}function Zie(e,t){return new Float64Array(e,t,4)}function hP(){return ag()}function cP(){return Pc(1,1,1,1)}function pP(){return Pc(1,0,0,0)}function dP(){return Pc(0,1,0,0)}function fP(){return Pc(0,0,1,0)}function yP(){return Pc(0,0,0,1)}const Yie=hP(),Xie=cP(),Qie=pP(),ere=dP(),tre=fP(),ire=yP();Object.freeze(Object.defineProperty({__proto__:null,ONES:Xie,UNIT_W:ire,UNIT_X:Qie,UNIT_Y:ere,UNIT_Z:tre,ZEROS:Yie,clone:Jie,create:ag,createView:Zie,fromArray:Kie,fromValues:Pc,ones:cP,unitW:yP,unitX:pP,unitY:dP,unitZ:fP,zeros:hP},Symbol.toStringTag,{value:"Module"}));const F4=2.4;function rre(e){return mo(e*F4)}function sre(e){return uE(e)/F4}function nre(e,t,i,s){let{color:u,ratio:d}=t,{color:y,ratio:v}=i;v===d&&(v===1?d-=1e-6:v+=1e-6);const _=rs((s-d)/(v-d),0,1);G$(e,u.toArray(),y.toArray(),_)}function Fpe(e){const i=new Uint8ClampedArray(2048);if(e=e.filter(({ratio:v})=>v>=0&&v<=1).sort((v,_)=>v.ratio-_.ratio).map(({color:v,ratio:_})=>({color:v,ratio:Math.max(_,.001)})),e.length<1)return i;let s=e[0],u=e[0],d=1;const y=ag();for(let v=0;v<512;v++){const _=(v+.5)/512;for(;_>u.ratio&&d<e.length;)s=u,u=e[d++];nre(y,s,u,_),i.set(y,4*v)}return i}function zpe(e,t,i,s){const{radius:u,fieldOffset:d,field:y}=t,v=Math.round(uE(u)),_=new Float64Array(i*s);let M,E=Number.NEGATIVE_INFINITY;const O=lre(y,d),C=new Set;for(const R of e){const L=R.getCursor();for(;L.next();){const G=L.getObjectId();if(C.has(G))continue;C.add(G);const U=L.readLegacyPointGeometry(),K=128;if(U.x<-K||U.x>=i+K||U.y<-K||U.y>s+K)continue;const ee=+O(L),Q=Math.max(0,Math.round(U.x)-v),re=Math.max(0,Math.round(U.y)-v),ne=Math.min(s,Math.round(U.y)+v),le=Math.min(i,Math.round(U.x)+v);for(let ve=re;ve<ne;ve++)for(let we=Q;we<le;we++){const Ee=ve*i+we,Me=are(U.x-we,U.y-ve,v);M=_[Ee]+=Me*ee,M>E&&(E=M)}}}return{matrix:_.buffer,max:E}}function Vpe(e,t,i,s,u,d){e.canvas.width=e.canvas.height=t,e.clearRect(0,0,t,t);const y=e.getImageData(0,0,t,t);i&&s&&y.data.set(new Uint8ClampedArray(ore(t,i,s,u,d))),e.putImageData(y,0,0)}function ore(e,t,i,s,u){const d=new Uint32Array(e*e),y="buffer"in t?t:new Float64Array(t),v="buffer"in i?new Uint32Array(i.buffer):new Uint32Array(new Uint8Array(i).buffer),_=v.length/(u-s);for(let M=0;M<y.length;M++){const E=y[M],O=Math.floor((E-s)*_);d[M]=v[rs(O,0,v.length-1)]}return d.buffer}function are(e,t,i){const s=Math.sqrt(e**2+t**2)/i;return s>1?0:3/(Math.PI*i**2)*(1-s**2)**2}function Gpe(e,t){return typeof e=="function"?e:e?typeof t=="string"?i=>-1*+i[e]:i=>+i[e]+t:()=>1}function lre(e,t){return e!=null?typeof t=="string"?i=>-1*+i.readAttribute(e):i=>+i.readAttribute(e)+t:i=>1}var _b;const mP="esri.renderers.HeatmapRenderer",ure=de.getLogger(mP);function o8(e){if(e!=null){const{maxDensity:t,minDensity:i,radius:s}=e;if(t!=null||i!=null||s!=null){const{blurRadius:u,maxPixelIntensity:d,minPixelIntensity:y,...v}=e;return v}}return e}let fi=_b=class extends go{constructor(e){super(e),this.authoringInfo=null,this.colorStops=[new j1({ratio:0,color:new Ve("rgba(255, 140, 0, 0)")}),new j1({ratio:.75,color:new Ve("rgba(255, 140, 0, 1)")}),new j1({ratio:.9,color:new Ve("rgba(255, 0,   0, 1)")})],this.field=null,this.fieldOffset=0,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null,this._warnedProps={blurRadius:!1,maxPixelIntensity:!1,minPixelIntensity:!1}}normalizeCtorArgs(e){return o8(e)}get blurRadius(){return sre(this.radius)}set blurRadius(e){const t=this.maxPixelIntensity,i=this.minPixelIntensity;this._set("radius",rre(e)),this._warnAboutDeprecatedGaussianBlurProp("blurRadius","radius"),this._set("maxDensity",t*this._pixelIntensityToDensity),this._set("minDensity",i*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(e){this._set("maxDensity",e*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("maxPixelIntensity","maxDensity")}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(e){this._set("minDensity",e*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("minPixelIntensity","minDensity")}get _pixelIntensityToDensity(){return 24/(F4**2*this.blurRadius**4)}_warnAboutDeprecatedGaussianBlurProp(e,t){this._warnedProps[e]||sr(this).getDefaultOrigin()==="user"&&(this._warnedProps[e]=!0,gc(()=>{hv(ure,e,{replacement:`${String(t)} (suggested value: ${this._get(t)})`,version:"4.24"})}))}read(e,t){e=o8(e),super.read(e,t)}getSymbol(){return new za}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}async collectRequiredFields(e,t){const i=this.field,s=this.valueExpression;i&&typeof i=="string"&&jr(e,t,i),s&&typeof s=="string"&&await nr(e,t,s)}getAttributeHash(){return null}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new _b({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:ie(this.colorStops),field:this.field,legendOptions:ie(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};w([S({type:j4,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],fi.prototype,"authoringInfo",void 0),w([S({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],fi.prototype,"blurRadius",null),w([S({type:[j1],json:{write:!0}})],fi.prototype,"colorStops",void 0),w([S({type:String,json:{write:!0}})],fi.prototype,"field",void 0),w([S({type:Number,json:{write:{overridePolicy:(e,t,i)=>({enabled:i==null})},origins:{"web-scene":{write:!1}}}})],fi.prototype,"fieldOffset",void 0),w([S({type:wh,json:{write:!0}})],fi.prototype,"legendOptions",void 0),w([S({type:Number,json:{write:!0}})],fi.prototype,"maxDensity",void 0),w([S({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],fi.prototype,"maxPixelIntensity",null),w([S({type:Number,json:{write:!0}})],fi.prototype,"minDensity",void 0),w([S({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],fi.prototype,"minPixelIntensity",null),w([S({type:Number,cast:ot,json:{write:!0}})],fi.prototype,"radius",void 0),w([S({type:Number,range:{min:0},json:{default:0,write:!0}})],fi.prototype,"referenceScale",void 0),w([Ae({heatmap:"heatmap"})],fi.prototype,"type",void 0),w([S({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],fi.prototype,"valueExpression",void 0),w([S({type:String})],fi.prototype,"valueExpressionTitle",void 0),w([S({readOnly:!0})],fi.prototype,"_pixelIntensityToDensity",null),fi=_b=w([B(mP)],fi);const gP=fi;let Vl=class extends Mt(pe){constructor(){super(...arguments),this.color=new Ve([0,0,0,0]),this.label=null,this.threshold=0}};w([S({type:Ve,json:{write:!0}})],Vl.prototype,"color",void 0),w([S({type:String,json:{write:!0}})],Vl.prototype,"label",void 0),w([S({type:Number,range:{min:0,max:1},json:{write:!0}})],Vl.prototype,"threshold",void 0),Vl=w([B("esri.renderers.support.OthersCategory")],Vl);let N1=class extends Mt(pe){constructor(){super(...arguments),this.title=null}};w([S({type:String,json:{write:!0}})],N1.prototype,"title",void 0),N1=w([B("esri.renderers.support.PieChartLegendOptions")],N1);let $r=class extends Oc(Mt(go)){constructor(t){super(t),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new Ve([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new Vl,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart"}getSymbol(){var t;return new za({size:this.size?this.size/2+(((t=this.outline)==null?void 0:t.width)||0):0})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(tc)}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,i)=>t+i.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((t,i)=>t+JSON.stringify(i),"")}async collectRequiredFields(t,i){await this.collectVVRequiredFields(t,i);for(const s of this.attributes)s.valueExpression&&await nr(t,i,s.valueExpression),s.field&&t.add(s.field)}};w([S({type:[uP],json:{write:!0}})],$r.prototype,"attributes",void 0),w([S({type:Cu,json:{default:null,write:!0}})],$r.prototype,"backgroundFillSymbol",void 0),w([S({type:Ve,json:{write:!0}})],$r.prototype,"defaultColor",void 0),w([S({type:String,json:{write:!0}})],$r.prototype,"defaultLabel",void 0),w([S({type:Number,range:{min:0,max:1},json:{write:!0}})],$r.prototype,"holePercentage",void 0),w([S({type:Vl,json:{write:!0}})],$r.prototype,"othersCategory",void 0),w([S({type:N1,json:{write:!0}})],$r.prototype,"legendOptions",void 0),w([S({type:ns,json:{default:null,write:!0}})],$r.prototype,"outline",void 0),w([S({type:Number,cast:ot,json:{write:!0}})],$r.prototype,"size",void 0),w([Ae({pieChart:"pie-chart"})],$r.prototype,"type",void 0),$r=w([B("esri.renderers.PieChartRenderer")],$r);const hre=$r;var xb;let Ml=xb=class extends Oc(go){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(e,t){await Promise.all([this.collectSymbolFields(e,t),this.collectVVRequiredFields(e,t)])}async collectSymbolFields(e,t){await Promise.all(this.getSymbols().map(i=>i.collectRequiredFields(e,t)))}getSymbol(e,t){return this.symbol}async getSymbolAsync(e,t){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((e,t)=>e+JSON.stringify(t),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new xb({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:ie(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}};w([S({type:String,json:{write:!0}})],Ml.prototype,"description",void 0),w([S({type:String,json:{write:!0}})],Ml.prototype,"label",void 0),w([S(L4)],Ml.prototype,"symbol",void 0),w([Ae({simple:"simple"})],Ml.prototype,"type",void 0),Ml=xb=w([B("esri.renderers.SimpleRenderer")],Ml);const lg=Ml,cre=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function Sb(e){return e instanceof Ne}function a8(e){return e instanceof Oe?Object.keys(e.items):Sb(e)?sr(e).keys():e?Object.keys(e):[]}function Tf(e,t){return e instanceof Oe?e.items[t]:e[t]}function pre(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}function gp(e){return e?e.declaredClass:null}function vP(e,t){var O;const i=e.diff;if(i&&typeof i=="function")return i(e,t);const s=a8(e),u=a8(t);if(s.length===0&&u.length===0)return;if(!s.length||!u.length||pre(e,t))return{type:"complete",oldValue:e,newValue:t};const d=u.filter(C=>!s.includes(C)),y=s.filter(C=>!u.includes(C)),v=s.filter(C=>u.includes(C)&&Tf(e,C)!==Tf(t,C)).concat(d,y).sort(),_=gp(e);if(_&&cre.has(_)&&v.length)return{type:"complete",oldValue:e,newValue:t};let M;const E=Sb(e)&&Sb(t);for(const C of v){const R=Tf(e,C),L=Tf(t,C);let G;if((E||typeof R!="function"&&typeof L!="function")&&R!==L&&(R!=null||L!=null)){if(i&&i[C]&&typeof i[C]=="function")G=(O=i[C])==null?void 0:O.call(i,R,L);else if(R instanceof Date&&L instanceof Date){if(R.getTime()===L.getTime())continue;G={type:"complete",oldValue:R,newValue:L}}else G=typeof R=="object"&&typeof L=="object"&&gp(R)===gp(L)?vP(R,L):{type:"complete",oldValue:R,newValue:L};G!=null&&(M!=null?M.diff[C]=G:M={type:"partial",diff:{[C]:G}})}}return M}function dre(e,t){if(e==null)return!1;const i=t.split(".");let s=e;for(const u of i){if(s.type==="complete")return!0;if(s.type!=="partial")return!1;{const d=s.diff[u];if(!d)return!1;s=d}}return!0}function Hpe(e,t){for(const i of t)if(dre(e,i))return!0;return!1}function fre(e,t){if(typeof e!="function"&&typeof t!="function"&&(e!=null||t!=null))return e==null||t==null||typeof e=="object"&&typeof t=="object"&&gp(e)!==gp(t)?{type:"complete",oldValue:e,newValue:t}:vP(e,t)}let bh=class extends Mt(pe){constructor(t){super(t),this.value=null,this.value2=null,this.value3=null}};w([S(A1)],bh.prototype,"value",void 0),w([S(A1)],bh.prototype,"value2",void 0),w([S(A1)],bh.prototype,"value3",void 0),bh=w([B("esri.renderers.support.UniqueValue")],bh);const Qh=bh;let Qo=class extends Mt(pe){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(t){if(t==null)return null;const i=typeof(t=Array.isArray(t)?t:[t])[0];return i==="string"||i==="number"?t.map(s=>new Qh({value:s})):i==="object"?t[0]instanceof Qh?t:t.map(s=>new Qh(s)):null}};w([S({type:String,json:{write:!0}})],Qo.prototype,"description",void 0),w([S({type:String,json:{write:!0}})],Qo.prototype,"label",void 0),w([S(ng)],Qo.prototype,"symbol",void 0),w([S({type:[Qh],json:{type:[[String]],read:{reader:e=>e?e.map(t=>new Qh({value:t[0],value2:t[1],value3:t[2]})):null},write:{writer:(e,t)=>{const i=[];for(const s of e){const u=[s.value,s.value2,s.value3].filter(tc).map(d=>d.toString());i.push(u)}t.values=i}}}})],Qo.prototype,"values",void 0),w([mt("values")],Qo.prototype,"castValues",null),Qo=w([B("esri.renderers.support.UniqueValueClass")],Qo);const wP=Qo;let z0=class extends Mt(pe){constructor(t){super(t),this.heading=null,this.classes=null}};w([S({type:String,json:{write:!0}})],z0.prototype,"heading",void 0),w([S({type:[wP],json:{write:!0}})],z0.prototype,"classes",void 0),z0=w([B("esri.renderers.support.UniqueValueGroup")],z0);const $b=z0;var Tb;let Il=Tb=class extends pe{constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new Tb({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){var t;const e=JSON.stringify((t=this.symbol)==null?void 0:t.toJSON());return`${this.value}.${e}`}};w([S({type:String,json:{write:!0}})],Il.prototype,"description",void 0),w([S({type:String,json:{write:!0}})],Il.prototype,"label",void 0),w([S(L4)],Il.prototype,"symbol",void 0),w([S(A1)],Il.prototype,"value",void 0),Il=Tb=w([B("esri.renderers.support.UniqueValueInfo")],Il);const vp=Il,yre=()=>!!oe("enable-feature:force-wosr"),mre=()=>oe.add("enable-feature:direct-3d-object-feature-layer-display",!0,!0,!0),gre=()=>oe.add("enable-feature:direct-3d-object-feature-layer-display",!1,!0,!0),vre=()=>oe.add("enable-i3s-patching",!0,!0,!0),wre=()=>oe.add("enable-i3s-patching",!1,!0,!0),Zpe=()=>!!oe("enable-feature:SceneLayer-editing"),bre=(e="i3s-patching")=>{switch(wre(),gre(),oe.add("enable-feature:SceneLayer-editing",!0,!0,!0),e){case"feature-layer-view":mre();break;case"i3s-patching":vre()}};bre("i3s-patching");let F2={};async function _re(e,t){try{return{data:(await Tre(e,t)).data,baseUrl:KL(e),styleUrl:e}}catch(i){return yn(i),null}}function xre(e,t,i){const s=t.portal!=null?t.portal:mr.getDefault();let u;const d=`${s.url} - ${s.user&&s.user.username} - ${e}`;return F2[d]||(F2[d]=Sre(e,s,i).then(y=>(u=y,y.fetchData())).then(y=>({data:y,baseUrl:u.itemUrl??"",styleName:e}))),F2[d]}function Sre(e,t,i){return t.load(i).then(()=>{const s=new mn({disableExtraQuery:!0,query:`owner:${l8} AND type:${u8} AND typekeywords:"${e}"`});return t.queryItems(s,i)}).then(({results:s})=>{var y;let u=null;const d=e.toLowerCase();if(s&&Array.isArray(s)){for(const v of s)if(((y=v.typeKeywords)==null?void 0:y.some(M=>M.toLowerCase()===d))&&v.type===u8&&v.owner===l8){u=v;break}}if(!u)throw new ae("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return u.load(i)})}function $re(e,t,i){return(e==null?void 0:e.styleUrl)!=null?_re(e.styleUrl,i):(e==null?void 0:e.styleName)!=null?xre(e.styleName,t,i):Promise.reject(new ae("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function Ype(e){return e===null||e.type==="CIMSymbolReference"?e:{type:"CIMSymbolReference",symbol:e}}function Xpe(e,t,i=["gltf"]){if(t==="cimRef")return e.cimRef;if(e.formatInfos&&!yre())for(const s of i){const u=e.formatInfos.find(d=>d.type===s);if(u)return u.href}return e.webRef}function Tre(e,t){const i={responseType:"json",query:{f:"json"},...t};return Yt(Ls(e),i)}const l8="esri_en",u8="Style",Qpe="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var V0;const bP="esri.renderers.UniqueValueRenderer",Ao=de.getLogger(bP),h8="uvInfos-watcher",c8="uvGroups-watcher",Mre=",",Ire=ei(vp);function Ere(e){const{field1:t,field2:i,field3:s,fieldDelimiter:u,uniqueValueInfos:d,valueExpression:y}=e,v=!(!t||!i);return[{classes:(d??[]).map(_=>{var K;const{symbol:M,label:E,value:O,description:C}=_,[R,L,G]=v?((K=O==null?void 0:O.toString())==null?void 0:K.split(u||""))||[]:[O],U=[];return(t||y)&&U.push(R),i&&U.push(L),s&&U.push(G),{symbol:M,label:E,values:[U],description:C}})}]}let Nt=V0=class extends Oc(go){constructor(e){super(e),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(t,i){if(!t&&!i)return;if(!t||!i)return{type:"complete",oldValue:t,newValue:i};let s=!1;const u={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let d=0;d<i.length;d++){const y=t.find(v=>v.value===i[d].value);y?fre(y,i[d])?(u.changed.push({type:"complete",oldValue:y,newValue:i[d]}),s=!0):u.unchanged.push({oldValue:y,newValue:i[d]}):(u.added.push(i[d]),s=!0)}for(let d=0;d<t.length;d++)i.find(y=>y.value===t[d].value)||(u.removed.push(t[d]),s=!0);return s?u:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(e){this._set("field",e),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(e){return e==null||typeof e=="function"?e:ed(e)}writeField(e,t,i,s){typeof e=="string"?t[i]=e:s!=null&&s.messages?s.messages.push(new ae("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):Ao.error(".field: cannot write field to JSON since it's not a string value")}set field2(e){this._set("field2",e),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(e){this._set("field3",e),this._updateUniqueValues()}set valueExpression(e){this._set("valueExpression",e),this._updateUniqueValues()}set defaultSymbol(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}set fieldDelimiter(e){this._set("fieldDelimiter",e),this._updateUniqueValues()}readPortal(e,t,i){return i.portal||mr.getDefault()}readStyleOrigin(e,t,i){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){const s=Tc(t.styleUrl,i);return Object.freeze({styleUrl:s})}}writeStyleOrigin(e,t,i,s){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=cd(e.styleUrl,s))}set uniqueValueGroups(e){this.styleOrigin?Ao.error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",e),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(e){this.styleOrigin?Ao.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(e,t){var s;if(this.styleOrigin)return void Ao.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let i;i=typeof e=="object"?Ire(e):new vp({value:e,symbol:Ik(t)}),(s=this.uniqueValueInfos)==null||s.push(i),this._valueInfoMap[i.value]=i,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(e){if(this.styleOrigin)return void Ao.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const t=this.uniqueValueInfos;if(t)for(let i=0;i<t.length;i++){const s=t[i];if(String(s.value)===String(e)){delete this._valueInfoMap[e],t.splice(i,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(e,t){let i=t;return this.valueExpression&&(t==null?void 0:t.arcade)==null&&(i={...i,arcade:await wu()}),this._getUniqueValueInfo(e,i)}getSymbol(e,t){if(this.valueExpression&&(t==null?void 0:t.arcade)==null)return void Ao.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this._getUniqueValueInfo(e,t);return(i==null?void 0:i.symbol)||this.defaultSymbol}async getSymbolAsync(e,t){let i=t;if(this.valueExpression&&(i==null?void 0:i.arcade)==null){const u=await wu(),{arcadeUtils:d}=u;d.hasGeometryOperations(this.valueExpression)&&await d.enableGeometryOperations(),i={...i,arcade:u}}const s=this._getUniqueValueInfo(e,i);return(s==null?void 0:s.symbol)||this.defaultSymbol}getSymbols(){const e=[];for(const t of this.uniqueValueInfos??[])t.symbol&&e.push(t.symbol);return this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){var s;const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),i=(s=this.uniqueValueInfos)==null?void 0:s.reduce((u,d)=>u+d.getMeshHash(),"");return`${e}.${t}.${i}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const e=new V0({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:ie(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:ie(this.visualVariables),legendOptions:ie(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:ie(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);const t=ie(this.uniqueValueInfos),i=ie(this.uniqueValueGroups);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze(ie(this.styleOrigin))),Object.freeze(t),Object.freeze(i)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e._set("uniqueValueGroups",i),e._isInfosSource=this._isInfosSource,e._watchUniqueValueInfosAndGroups(),e}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(e,t){const i=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(i)}async collectSymbolFields(e,t){const i=[...this.getSymbols().map(s=>s.collectRequiredFields(e,t)),nr(e,t,this.valueExpression)];jr(e,t,this.field),jr(e,t,this.field2),jr(e,t,this.field3),await Promise.all(i)}populateFromStyle(){return $re(this.styleOrigin,{portal:this.portal}).then(e=>{var i;const t=[];return this._valueInfoMap={},e&&e.data&&Array.isArray(e.data.items)&&e.data.items.forEach(s=>{const u=new ju({styleUrl:e.styleUrl,styleName:e.styleName,portal:this.portal,name:s.name});this.defaultSymbol||s.name!==e.data.defaultItem||(this.defaultSymbol=u,this._isDefaultSymbolDerived=!0);const d=new vp({value:s.name,symbol:u});t.push(d),this._valueInfoMap[s.name]=d}),this._set("uniqueValueInfos",Object.freeze(t)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&((i=this.uniqueValueInfos)!=null&&i.length)&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",Mre)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:e}=this;if(e)for(const t of e)this._valueInfoMap[t.value+""]=t}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(h8);const{uniqueValueInfos:e}=this;if(e){const t=[];for(const i of e)t.push(Ge(()=>({symbol:i.symbol,value:i.value,label:i.label,description:i.description}),(s,u)=>{s!==u&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(t,h8)}}_watchUniqueValueGroups(){this.removeHandles(c8);const{uniqueValueGroups:e}=this;if(e){const t=[];for(const i of e){t.push(Ge(()=>({classes:i.classes}),(s,u)=>{s!==u&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));for(const s of i.classes??[])t.push(Ge(()=>({symbol:s.symbol,values:s.values,label:s.label,description:s.description}),(u,d)=>{u!==d&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}))}this.addHandles(t,c8)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const e=[],{field:t,field2:i,field3:s,fieldDelimiter:u,uniqueValueGroups:d,valueExpression:y}=this;if(!t&&!y)return this._set("uniqueValueInfos",e),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const v=!(!t||!i);for(const _ of d)for(const M of _.classes??[]){const{symbol:E,label:O,values:C,description:R}=M;for(const L of C??[]){const{value:G,value2:U,value3:K}=L,ee=[G];i&&ee.push(U),s&&ee.push(K);const Q=v?ee.join(u||""):ee[0];e.push(new vp({symbol:E,label:O,value:Q,description:R}))}}this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(e=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:t,field2:i,valueExpression:s,fieldDelimiter:u,uniqueValueInfos:d}=this;if(!t&&!s||!d.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const y=!(!t||!i),v=d.map(M=>{var K;const{symbol:E,label:O,value:C,description:R}=M,[L,G,U]=y?((K=C==null?void 0:C.toString())==null?void 0:K.split(u||""))||[]:[C];return new wP({symbol:E,label:O,description:R,values:[new Qh({value:L,value2:G,value3:U})]})}),_=[new $b({classes:v})];e&&Object.freeze(_),this._set("uniqueValueGroups",_),this._watchUniqueValueGroups()}_getUniqueValueInfo(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}_getUnqiueValueInfoForExpression(e,t){const{viewingMode:i,scale:s,spatialReference:u,arcade:d,timeZone:y}=t??{};let v=this._cache.compiledFunc;const _=d.arcadeUtils;if(!v){const E=_.createSyntaxTree(this.valueExpression);v=_.createFunction(E),this._cache.compiledFunc=v}const M=_.executeFunction(v,_.createExecContext(e,_.getViewInfo({viewingMode:i,scale:s,spatialReference:u}),y));return this._valueInfoMap[M+""]}_getUnqiueValueInfoForFields(e){const t=this.field,i=e.attributes;let s;if(typeof t!="function"&&this.field2){const u=this.field2,d=this.field3,y=[];t&&y.push(i[t]),u&&y.push(i[u]),d&&y.push(i[d]),s=y.join(this.fieldDelimiter||"")}else typeof t=="function"?s=t(e):t&&(s=i[t]);return this._valueInfoMap[s+""]}static fromPortalStyle(e,t){const i=new V0(t==null?void 0:t.properties);i._set("styleOrigin",Object.freeze({styleName:e})),i._set("portal",(t==null?void 0:t.portal)||mr.getDefault());const s=i.populateFromStyle();return s.catch(u=>{Ao.error(`#fromPortalStyle('${e}'[, ...])`,"Failed to create unique value renderer from style name",u)}),s}static fromStyleUrl(e,t){const i=new V0(t==null?void 0:t.properties);i._set("styleOrigin",Object.freeze({styleUrl:e}));const s=i.populateFromStyle();return s.catch(u=>{Ao.error(`#fromStyleUrl('${e}'[, ...])`,"Failed to create unique value renderer from style URL",u)}),s}};w([S({readOnly:!0})],Nt.prototype,"_cache",null),w([Ae({uniqueValue:"unique-value"})],Nt.prototype,"type",void 0),w([S(sP)],Nt.prototype,"backgroundFillSymbol",void 0),w([S({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],Nt.prototype,"field",null),w([mt("field")],Nt.prototype,"castField",null),w([_e("field")],Nt.prototype,"writeField",null),w([S({type:String,value:null,json:{write:!0}})],Nt.prototype,"field2",null),w([S({type:String,value:null,json:{write:!0}})],Nt.prototype,"field3",null),w([S({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],Nt.prototype,"orderByClassesEnabled",void 0),w([S({type:String,value:null,json:{write:!0}})],Nt.prototype,"valueExpression",null),w([S({type:String,json:{write:!0}})],Nt.prototype,"valueExpressionTitle",void 0),w([S({type:Yh,json:{write:!0}})],Nt.prototype,"legendOptions",void 0),w([S({type:String,json:{write:!0}})],Nt.prototype,"defaultLabel",void 0),w([S(P9({...ng},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],Nt.prototype,"defaultSymbol",null),w([S({type:String,value:null,json:{write:!0}})],Nt.prototype,"fieldDelimiter",null),w([S({type:mr,readOnly:!0})],Nt.prototype,"portal",void 0),w([me("portal",["styleName"])],Nt.prototype,"readPortal",null),w([S({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],Nt.prototype,"styleOrigin",void 0),w([me("styleOrigin",["styleName","styleUrl"])],Nt.prototype,"readStyleOrigin",null),w([_e("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],Nt.prototype,"writeStyleOrigin",null),w([S({type:[$b],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(e,t,i)=>(t.uniqueValueGroups||Ere(t)).map(s=>$b.fromJSON(s,i))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],Nt.prototype,"uniqueValueGroups",null),w([S({type:[vp],json:{read:!1,write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],Nt.prototype,"uniqueValueInfos",null),Nt=V0=w([B(bP)],Nt);const z4=Nt,ug={key:"type",base:go,typeMap:{heatmap:gP,simple:lg,"unique-value":z4,"class-breaks":oP,"dot-density":Wie,dictionary:Bie,"pie-chart":hre},errorContext:"renderer"},kre={key:"type",base:go,typeMap:{simple:lg,"unique-value":z4,"class-breaks":oP,heatmap:gP},errorContext:"renderer",validate:Are};function Are(e){switch(e.type){case"simple":return Ore(e);case"unique-value":return Pre(e);case"class-breaks":return Cre(e);case"heatmap":return e}}function Ore(e){if(e.symbol)return e;de.getLogger("esri.renderers.support.types").error("Removed invalid 'simple' renderer without a symbol from web scene.")}function Pre(e){const t=e.uniqueValueInfos,i=t==null?void 0:t.filter(({symbol:s,label:u},d)=>(s||de.getLogger("esri.renderers.support.types").error(`Removed invalid unique value info ([${d}] ${u}) without a symbol from web scene.`),!!s));return(i==null?void 0:i.length)!==(t==null?void 0:t.length)&&(e.uniqueValueInfos=i),e}function Cre(e){const t=e.classBreakInfos,i=t==null?void 0:t.filter(({symbol:s,label:u},d)=>(s||de.getLogger("esri.renderers.support.types").error(`Removed invalid class break info ([${d}] ${u}) without a symbol from web scene.`),!!s));return(i==null?void 0:i.length)!==(t==null?void 0:t.length)&&(e.classBreakInfos=i),e}function ede(e,t){return Jp(e,null,t)}const jre=vc({types:ug});function Jp(e,t,i){return e?e&&(e.styleName||e.styleUrl)&&e.type!=="uniqueValue"?(i!=null&&i.messages&&i.messages.push(new is("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:i})),null):jre(e,t,i):null}let Nre=class _P{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(dv),this._values=new Map,this.multipleOriginsSupported=!0}clone(t){const i=new _P,s=this._originStores[Xe.DEFAULTS];s&&s.forEach((u,d)=>{i.set(d,ie(u),Xe.DEFAULTS)});for(let u=Xe.SERVICE;u<dv;u++){const d=this._originStores[u];d&&d.forEach((y,v)=>{t&&t.has(v)||i.set(v,ie(y),u)})}return i}get(t,i){const s=i===void 0?this._values:this._originStores[i];return s?s.get(t):void 0}keys(t){const i=t==null?this._values:this._originStores[t];return i?[...i.keys()]:[]}set(t,i,s=Xe.USER){let u=this._originStores[s];if(u||(u=new Map,this._originStores[s]=u),u.set(t,i),!this._values.has(t)||this._propertyOriginMap.get(t)<=s){const d=this._values.get(t);return this._values.set(t,i),this._propertyOriginMap.set(t,s),d!==i}return!1}delete(t,i=Xe.USER){const s=this._originStores[i];if(!s)return;const u=s.get(t);if(s.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===i){this._values.delete(t);for(let d=i-1;d>=0;d--){const y=this._originStores[d];if(y&&y.has(t)){this._values.set(t,y.get(t)),this._propertyOriginMap.set(t,d);break}}}return u}has(t,i){const s=i===void 0?this._values:this._originStores[i];return!!s&&s.has(t)}revert(t,i){for(;i>0&&!this.has(t,i);)--i;const s=this._originStores[i],u=s==null?void 0:s.get(t),d=this._values.get(t);return this._values.set(t,u),this._propertyOriginMap.set(t,i),d!==u}originOf(t){return this._propertyOriginMap.get(t)||Xe.DEFAULTS}forEach(t){this._values.forEach(t)}};const xP=e=>{let t=class extends e{constructor(...i){super(...i);const s=sr(this),u=s.store,d=new Nre;s.store=d,W$(s,u,d)}read(i,s){K$(this,i,s)}getAtOrigin(i,s){const u=z2(this),d=pa(s);if(typeof i=="string")return u.get(i,d);const y={};return i.forEach(v=>{y[v]=u.get(v,d)}),y}originOf(i){return W1(this.originIdOf(i))}originIdOf(i){return z2(this).originOf(i)}revert(i,s){const u=z2(this),d=pa(s),y=sr(this);let v;v=typeof i=="string"?i==="*"?u.keys(d):[i]:i,v.forEach(_=>{y.invalidate(_),u.revert(_,d),y.commit(_)})}};return t=w([B("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function z2(e){return sr(e).store}let p8=class extends xP(Ne){};p8=w([B("esri.core.ReadOnlyMultiOriginJSONSupport")],p8);const Rre=e=>{let t=class extends e{constructor(...i){super(...i)}clear(i,s="user"){return V2(this).delete(i,pa(s))}write(i,s){return Y$(this,i=i||{},s),i}setAtOrigin(i,s,u){sr(this).setAtOrigin(i,s,pa(u))}removeOrigin(i){const s=V2(this),u=pa(i),d=s.keys(u);for(const y of d)s.originOf(y)===u&&s.set(y,s.get(y,u),Xe.USER)}updateOrigin(i,s){const u=V2(this),d=pa(s),y=Ns(this,i);for(let v=d+1;v<dv;++v)u.delete(i,v);u.set(i,y,d)}toJSON(i){return this.write({},i)}};return t=w([B("esri.core.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function V2(e){return sr(e).store}const SP=e=>{let t=class extends Rre(xP(e)){constructor(...i){super(...i)}};return t=w([B("esri.core.MultiOriginJSONSupport")],t),t};let d8=class extends SP(Ne){};d8=w([B("esri.core.MultiOriginJSONSupport")],d8);const Wi=(e=>e)(["operational-layers","basemap","ground"]);var Mb;let El=Mb=class extends pe{constructor(e){super(e),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new Mb({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};w([S({type:String,json:{write:!0}})],El.prototype,"expression",void 0),w([S({type:String,json:{write:!0}})],El.prototype,"name",void 0),w([S({type:["boolean","date","number","string"],json:{write:!0}})],El.prototype,"returnType",void 0),w([S({type:String,json:{write:!0}})],El.prototype,"title",void 0),El=Mb=w([B("esri.form.ExpressionInfo")],El);const Lre=El;let kl=class extends pe{constructor(t){super(t),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};w([S({type:String,json:{write:!0}})],kl.prototype,"description",void 0),w([S({type:String,json:{write:!0}})],kl.prototype,"label",void 0),w([S()],kl.prototype,"type",void 0),w([S({type:String,json:{write:!0}})],kl.prototype,"visibilityExpression",void 0),kl=w([B("esri.form.elements.Element")],kl);const yc=kl;var Ib;let R1=Ib=class extends pe{constructor(e){super(e),this.type=null}clone(){return new Ib({type:this.type})}};w([S({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],R1.prototype,"type",void 0),R1=Ib=w([B("esri.form.elements.inputs.AttachmentInput")],R1);const Dre=R1;var Eb;let Al=Eb=class extends yc{constructor(e){super(e),this.attachmentKeyword=null,this.editableExpression=null,this.input=null,this.type="attachment"}clone(){return new Eb({attachmentKeyword:this.attachmentKeyword,description:this.description,editableExpression:this.editableExpression,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}};w([S({type:String,json:{write:!0}})],Al.prototype,"attachmentKeyword",void 0),w([S({type:String,json:{write:!0}})],Al.prototype,"editableExpression",void 0),w([S({type:Dre,json:{read:{source:"inputType"},write:{target:"inputType"}}})],Al.prototype,"input",void 0),w([S({type:["attachment"],json:{read:!1,write:!0}})],Al.prototype,"type",void 0),Al=Eb=w([B("esri.form.elements.AttachmentElement")],Al);const f8=Al;let L1=class extends pe{constructor(t){super(t),this.type=null}};w([S()],L1.prototype,"type",void 0),L1=w([B("esri.form.elements.inputs.Input")],L1);const vo=L1;let G0=class extends vo{constructor(t){super(t),this.maxLength=null,this.minLength=0}};w([S({type:Number,json:{write:!0}})],G0.prototype,"maxLength",void 0),w([S({type:Number,json:{write:!0}})],G0.prototype,"minLength",void 0),G0=w([B("esri.form.elements.inputs.TextInput")],G0);const V4=G0;var kb;let D1=kb=class extends V4{constructor(e){super(e),this.type="barcode-scanner"}clone(){return new kb({maxLength:this.maxLength,minLength:this.minLength})}};w([S({type:["barcode-scanner"],json:{read:!1,write:!0}})],D1.prototype,"type",void 0),D1=kb=w([B("esri.form.elements.inputs.BarcodeScannerInput")],D1);const Fre=D1;var Ab;let _h=Ab=class extends vo{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new Ab({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};w([S({type:String,json:{write:!0}})],_h.prototype,"noValueOptionLabel",void 0),w([S({type:Boolean,json:{write:!0}})],_h.prototype,"showNoValueOption",void 0),w([S({type:["combo-box"],json:{read:!1,write:!0}})],_h.prototype,"type",void 0),_h=Ab=w([B("esri.form.elements.inputs.ComboBoxInput")],_h);const zre=_h;var Ob;function y8(e){return e??null}function m8(e){return e??null}let cn=Ob=class extends vo{constructor(e){super(e),this.max=null,this.min=null,this.type="date-picker"}readMax(e,t){return y8(t.max)}writeMax(e,t){t.max=m8(e)}readMin(e,t){return y8(t.min)}writeMin(e,t){t.min=m8(e)}clone(){return new Ob({max:this.max,min:this.min})}};w([S({type:String,json:{type:String,write:!0}})],cn.prototype,"max",void 0),w([me("max")],cn.prototype,"readMax",null),w([_e("max")],cn.prototype,"writeMax",null),w([S({type:String,json:{type:String,write:!0}})],cn.prototype,"min",void 0),w([me("min")],cn.prototype,"readMin",null),w([_e("min")],cn.prototype,"writeMin",null),w([S({type:["date-picker"],json:{read:!1,write:!0}})],cn.prototype,"type",void 0),cn=Ob=w([B("esri.form.elements.inputs.DatePickerInput")],cn);const Vre=cn;var Pb;function G2(e){return e??null}function q2(e){return e??null}let pr=Pb=class extends vo{constructor(e){super(e),this.includeTimeOffset=!0,this.max=null,this.min=null,this.timeResolution="minutes",this.type="datetimeoffset-picker"}readMax(e,t){return G2(t.max)}writeMax(e,t){t.max=q2(e)}readMin(e,t){return G2(t.min)}writeMin(e,t){t.min=q2(e)}readTimeResolution(e,t){return G2(t.timeResolution)}writeTimeResolution(e,t){t.timeResolution=q2(e)}clone(){return new Pb({includeTimeOffset:this.includeTimeOffset,max:this.max,min:this.min,timeResolution:this.timeResolution})}};w([S({type:Boolean,json:{write:!0}})],pr.prototype,"includeTimeOffset",void 0),w([S({type:String,json:{type:String,write:!0}})],pr.prototype,"max",void 0),w([me("max")],pr.prototype,"readMax",null),w([_e("max")],pr.prototype,"writeMax",null),w([S({type:String,json:{type:String,write:!0}})],pr.prototype,"min",void 0),w([me("min")],pr.prototype,"readMin",null),w([_e("min")],pr.prototype,"writeMin",null),w([S({type:String,json:{type:String,write:!0}})],pr.prototype,"timeResolution",void 0),w([me("timeResolution")],pr.prototype,"readTimeResolution",null),w([_e("timeResolution")],pr.prototype,"writeTimeResolution",null),w([S({type:["datetimeoffset-picker"],json:{read:!1,write:!0}})],pr.prototype,"type",void 0),pr=Pb=w([B("esri.form.elements.inputs.DateTimeOffsetPickerInput")],pr);const Gre=pr;var Cb;function g8(e){return e!=null?new Date(e):null}function v8(e){return e?e.getTime():null}let $s=Cb=class extends vo{constructor(e){super(e),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(e,t){return g8(t.max)}writeMax(e,t){t.max=v8(e)}readMin(e,t){return g8(t.min)}writeMin(e,t){t.min=v8(e)}clone(){return new Cb({includeTime:this.includeTime,max:this.max,min:this.min})}};w([S({type:Boolean,json:{write:!0}})],$s.prototype,"includeTime",void 0),w([S({type:Date,json:{type:Number,write:!0}})],$s.prototype,"max",void 0),w([me("max")],$s.prototype,"readMax",null),w([_e("max")],$s.prototype,"writeMax",null),w([S({type:Date,json:{type:Number,write:!0}})],$s.prototype,"min",void 0),w([me("min")],$s.prototype,"readMin",null),w([_e("min")],$s.prototype,"writeMin",null),w([S({type:["datetime-picker"],json:{read:!1,write:!0}})],$s.prototype,"type",void 0),$s=Cb=w([B("esri.form.elements.inputs.DateTimePickerInput")],$s);const qre=$s;var jb;let xh=jb=class extends vo{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new jb({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};w([S({type:String,json:{write:!0}})],xh.prototype,"noValueOptionLabel",void 0),w([S({type:Boolean,json:{write:!0}})],xh.prototype,"showNoValueOption",void 0),w([S({type:["radio-buttons"],json:{read:!1,write:!0}})],xh.prototype,"type",void 0),xh=jb=w([B("esri.form.elements.inputs.RadioButtonsInput")],xh);const Ure=xh;var Nb;let Sh=Nb=class extends vo{constructor(e){super(e),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new Nb({offValue:this.offValue,onValue:this.onValue})}};w([S({type:[String,Number],json:{write:!0}})],Sh.prototype,"offValue",void 0),w([S({type:[String,Number],json:{write:!0}})],Sh.prototype,"onValue",void 0),w([S({type:["switch"],json:{read:!1,write:!0}})],Sh.prototype,"type",void 0),Sh=Nb=w([B("esri.form.elements.inputs.SwitchInput")],Sh);const Bre=Sh;var Rb;let F1=Rb=class extends V4{constructor(e){super(e),this.type="text-area"}clone(){return new Rb({maxLength:this.maxLength,minLength:this.minLength})}};w([S({type:["text-area"],json:{read:!1,write:!0}})],F1.prototype,"type",void 0),F1=Rb=w([B("esri.form.elements.inputs.TextAreaInput")],F1);const Hre=F1;var Lb;let z1=Lb=class extends V4{constructor(e){super(e),this.type="text-box"}clone(){return new Lb({maxLength:this.maxLength,minLength:this.minLength})}};w([S({type:["text-box"],json:{read:!1,write:!0}})],z1.prototype,"type",void 0),z1=Lb=w([B("esri.form.elements.inputs.TextBoxInput")],z1);const Wre=z1;var Db;function U2(e){return e??null}function B2(e){return e??null}let Tr=Db=class extends vo{constructor(e){super(e),this.max=null,this.min=null,this.timeResolution="minutes",this.type="time-picker"}readMax(e,t){return U2(t.max)}writeMax(e,t){t.max=B2(e)}readMin(e,t){return U2(t.min)}writeMin(e,t){t.min=B2(e)}readTimeResolution(e,t){return U2(t.timeResolution)}writeTimeResolution(e,t){t.timeResolution=B2(e)}clone(){return new Db({max:this.max,min:this.min,timeResolution:this.timeResolution})}};w([S({type:String,json:{type:String,write:!0}})],Tr.prototype,"max",void 0),w([me("max")],Tr.prototype,"readMax",null),w([_e("max")],Tr.prototype,"writeMax",null),w([S({type:String,json:{type:String,write:!0}})],Tr.prototype,"min",void 0),w([me("min")],Tr.prototype,"readMin",null),w([_e("min")],Tr.prototype,"writeMin",null),w([S({type:String,json:{type:String,write:!0}})],Tr.prototype,"timeResolution",void 0),w([me("timeResolution")],Tr.prototype,"readTimeResolution",null),w([_e("timeResolution")],Tr.prototype,"writeTimeResolution",null),w([S({type:["time-picker"],json:{read:!1,write:!0}})],Tr.prototype,"type",void 0),Tr=Db=w([B("esri.form.elements.inputs.TimePickerInput")],Tr);const Jre=Tr,Kre={base:vo,key:"type",typeMap:{"barcode-scanner":Fre,"combo-box":zre,"date-picker":Vre,"datetime-picker":qre,"datetimeoffset-picker":Gre,"radio-buttons":Ure,switch:Bre,"text-area":Hre,"text-box":Wre,"time-picker":Jre}};var Fb;let q0=Fb=class extends pe{constructor(e){super(e),this.name=null,this.code=null}clone(){return new Fb({name:this.name,code:this.code})}};w([S({type:String,json:{write:!0}})],q0.prototype,"name",void 0),w([S({type:[String,Number],json:{write:!0}})],q0.prototype,"code",void 0),q0=Fb=w([B("esri.layers.support.CodedValue")],q0);const Zre=new et({inherited:"inherited",codedValue:"coded-value",range:"range"});let U0=class extends pe{constructor(t){super(t),this.name=null,this.type=null}};w([S({type:String,json:{write:!0}})],U0.prototype,"name",void 0),w([Ae(Zre)],U0.prototype,"type",void 0),U0=w([B("esri.layers.support.Domain")],U0);const hg=U0;var zb;let B0=zb=class extends hg{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const i=String(e);this.codedValues.some(s=>(String(s.code)===i&&(t=s.name),!!t))}return t}clone(){return new zb({codedValues:ie(this.codedValues),name:this.name})}};w([S({type:[q0],json:{write:!0}})],B0.prototype,"codedValues",void 0),w([Ae({codedValue:"coded-value"})],B0.prototype,"type",void 0),B0=zb=w([B("esri.layers.support.CodedValueDomain")],B0);const $P=B0;var Vb;let V1=Vb=class extends hg{constructor(e){super(e),this.type="inherited"}clone(){return new Vb}};w([Ae({inherited:"inherited"})],V1.prototype,"type",void 0),V1=Vb=w([B("esri.layers.support.InheritedDomain")],V1);const TP=V1;var Gb;let $h=Gb=class extends hg{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new Gb({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};w([S({json:{type:[Number],read:{source:"range",reader:(e,t)=>{var i;return(i=t.range)==null?void 0:i[1]}},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(e,t,i){t[i]=[this.minValue||0,e]}}}})],$h.prototype,"maxValue",void 0),w([S({json:{type:[Number],read:{source:"range",reader:(e,t)=>{var i;return(i=t.range)==null?void 0:i[0]}},write:{target:"range",writer(e,t,i){t[i]=[e,this.maxValue||0]}}}})],$h.prototype,"minValue",void 0),w([Ae({range:"range"})],$h.prototype,"type",void 0),$h=Gb=w([B("esri.layers.support.RangeDomain")],$h);const MP=$h,IP={key:"type",base:hg,typeMap:{range:MP,"coded-value":$P,inherited:TP}};function cg(e){if(!(e!=null&&e.type))return null;switch(e.type){case"range":return MP.fromJSON(e);case"codedValue":return $P.fromJSON(e);case"inherited":return TP.fromJSON(e)}return null}var qb;const EP="esri.form.elements.FieldElement",w8=de.getLogger(EP);let Wr=qb=class extends yc{constructor(e){super(e),this.domain=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}get editable(){return hv(w8,"editable",{replacement:"editableExpression",version:"4.26",warnOnce:!0}),this._get("editable")??!0}set editable(e){hv(w8,"editable",{replacement:"editableExpression",version:"4.26",warnOnce:!0}),this._set("editable",e)}clone(){return new qb({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};w([S({types:IP,json:{read:{reader:cg},write:!0}})],Wr.prototype,"domain",void 0),w([S({type:Boolean,json:{write:!0}})],Wr.prototype,"editable",null),w([S({type:String,json:{write:!0}})],Wr.prototype,"editableExpression",void 0),w([S({type:String,json:{write:!0}})],Wr.prototype,"fieldName",void 0),w([S({type:String,json:{write:!0}})],Wr.prototype,"hint",void 0),w([S({types:Kre,json:{read:{source:"inputType"},write:{target:"inputType"}}})],Wr.prototype,"input",void 0),w([S({type:String,json:{write:!0}})],Wr.prototype,"requiredExpression",void 0),w([S({type:String,json:{read:!1,write:!0}})],Wr.prototype,"type",void 0),w([S({type:String,json:{write:!0}})],Wr.prototype,"valueExpression",void 0),Wr=qb=w([B(EP)],Wr);const b8=Wr;var Ub;let Hn=Ub=class extends yc{constructor(e){super(e),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new Ub({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:ie(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};w([S({type:Number,json:{write:!0}})],Hn.prototype,"displayCount",void 0),w([S({type:["list"],json:{write:!0}})],Hn.prototype,"displayType",void 0),w([S({type:String,json:{write:!0}})],Hn.prototype,"editableExpression",void 0),w([S({type:[i4],json:{write:!0}})],Hn.prototype,"orderByFields",void 0),w([S({type:Number,json:{write:!0}})],Hn.prototype,"relationshipId",void 0),w([S({type:["relationship"],json:{read:!1,write:!0}})],Hn.prototype,"type",void 0),Hn=Ub=w([B("esri.form.elements.RelationshipElement")],Hn);const _8=Hn;function kP(e){return{typesWithGroup:{base:yc,key:"type",typeMap:{attachment:f8,field:b8,group:e,relationship:_8}},typesWithoutGroup:{base:yc,key:"type",typeMap:{attachment:f8,field:b8,relationship:_8}}}}function AP(e,t,i=!0){if(!e)return null;const s=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(u=>s[u.type]).map(u=>s[u.type].fromJSON(u))}function OP(e,t,i=!0){if(!e)return null;const s=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(u=>s[u.type]).map(u=>u.toJSON())}function PP(e,t,i=!0){return e?e.map(s=>wn(i?t.typesWithGroup:t.typesWithoutGroup,s)):null}var Bb;let dn=Bb=class extends yc{constructor(e){super(e),this.elements=null,this.initialState="expanded",this.type="group"}castElements(e){return PP(e,H2,!1)}readElements(e,t){return AP(t.formElements,H2,!1)}writeElements(e,t){t.formElements=OP(e,H2,!1)}clone(){return new Bb({description:this.description,elements:ie(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};w([S({json:{write:!0}})],dn.prototype,"elements",void 0),w([mt("elements")],dn.prototype,"castElements",null),w([me("elements",["formElements"])],dn.prototype,"readElements",null),w([_e("elements")],dn.prototype,"writeElements",null),w([S({type:["collapsed","expanded"],json:{write:!0}})],dn.prototype,"initialState",void 0),w([S({type:String,json:{read:!1,write:!0}})],dn.prototype,"type",void 0),dn=Bb=w([B("esri.form.elements.GroupElement")],dn);const H2=kP(dn),Yre=dn;var Hb;const W2=kP(Yre);let Ts=Hb=class extends pe{constructor(e){super(e),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(e){return PP(e,W2)}readElements(e,t){return AP(t.formElements,W2)}writeElements(e,t){t.formElements=OP(e,W2)}clone(){return new Hb({description:this.description,expressionInfos:ie(this.expressionInfos),elements:ie(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}};w([S({type:String,json:{write:!0}})],Ts.prototype,"description",void 0),w([S({json:{write:!0}})],Ts.prototype,"elements",void 0),w([mt("elements")],Ts.prototype,"castElements",null),w([me("elements",["formElements"])],Ts.prototype,"readElements",null),w([_e("elements")],Ts.prototype,"writeElements",null),w([S({type:[Lre],json:{write:!0}})],Ts.prototype,"expressionInfos",void 0),w([S({type:Boolean,json:{default:!1,write:!0}})],Ts.prototype,"preserveFieldValuesWhenHidden",void 0),w([S({type:String,json:{write:!0}})],Ts.prototype,"title",void 0),Ts=Hb=w([B("esri.form.FormTemplate")],Ts);const Xre=Ts;function x8(e,t,i){if(e.hasM==null||e.hasZ)for(const s of t)for(const u of s)u.length>2&&(u[2]*=i)}function Qre(e,t,i){if(!e&&!t||!i)return;const s=vy(i);S8(e,i,s),S8(t,i,s)}function S8(e,t,i){if(e)for(const s of e)ese(s.geometry,t,i)}function ese(e,t,i){if(!(e!=null&&e.spatialReference)||Xt(e.spatialReference,t))return;const s=vy(e.spatialReference)/i;if(s!==1){if("x"in e)e.z!=null&&(e.z*=s);else if("rings"in e)x8(e,e.rings,s);else if("paths"in e)x8(e,e.paths,s);else if("points"in e&&(e.hasM==null||e.hasZ))for(const u of e.points)u.length>2&&(u[2]*=s)}}function $8(e,t,i){if(!(i!=null&&i.features)||!i.hasZ)return;const s=mI(i.geometryType,t,e.outSpatialReference);if(s!=null)for(const u of i.features)s(u.geometry)}const tse=new et({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var Wb;const ise=new et({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let Vi=Wb=class extends pe{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:t}){let i=null;try{i=t?JSON.parse(t):null}catch{}return(i==null?void 0:i.value)??null}readValueType(e,{description:t}){let i=null;try{i=t?JSON.parse(t):null}catch{}return i?ise.fromJSON(i.fieldValueType):null}clone(){return new Wb({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};w([S({type:String,json:{write:!0}})],Vi.prototype,"alias",void 0),w([S({type:[String,Number],json:{write:{allowNull:!0}}})],Vi.prototype,"defaultValue",void 0),w([S()],Vi.prototype,"description",void 0),w([me("description")],Vi.prototype,"readDescription",null),w([S({types:IP,json:{read:{reader:cg},write:!0}})],Vi.prototype,"domain",void 0),w([S({type:Boolean,json:{write:!0}})],Vi.prototype,"editable",void 0),w([S({type:St,json:{write:{overridePolicy:e=>({enabled:Number.isFinite(e)})}}})],Vi.prototype,"length",void 0),w([S({type:String,json:{write:!0}})],Vi.prototype,"name",void 0),w([S({type:Boolean,json:{write:!0}})],Vi.prototype,"nullable",void 0),w([Ae(tse)],Vi.prototype,"type",void 0),w([S()],Vi.prototype,"valueType",void 0),w([me("valueType",["description"])],Vi.prototype,"readValueType",null),w([S({type:Boolean,json:{read:!1}})],Vi.prototype,"visible",void 0),Vi=Wb=w([B("esri.layers.support.Field")],Vi);const G4=Vi;var Jb;const Kb=new et({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let wi=Jb=class extends pe{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){var u;const i=He.fromJSON(t.spatialReference),s=[];for(let d=0;d<e.length;d++){const y=e[d],v=ka.fromJSON(y),_=(u=y.geometry)==null?void 0:u.spatialReference;v.geometry==null||_||(v.geometry.spatialReference=i);const M=y.aggregateGeometries,E=v.aggregateGeometries;if(M&&E!=null)for(const O in E){const C=E[O],R=M[O],L=R==null?void 0:R.spatialReference;C==null||L||(C.spatialReference=i)}s.push(v)}return s}writeGeometryType(e,t,i,s){if(e)return void Kb.write(e,t,i,s);const{features:u}=this;if(u){for(const d of u)if((d==null?void 0:d.geometry)!=null)return void Kb.write(d.geometry.type,t,i,s)}}readQueryGeometry(e,t){if(!e)return null;const i=!!e.spatialReference,s=$a(e);return s&&!i&&t.spatialReference&&(s.spatialReference=He.fromJSON(t.spatialReference)),s}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:i}=this;if(i){for(const s of i)if(s&&s.geometry!=null&&s.geometry.spatialReference)return void(t.spatialReference=s.geometry.spatialReference.toJSON())}}clone(){return new Jb(this.cloneProperties())}cloneProperties(){return ie({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let i=0;i<t.features.length;i++){const s=t.features[i];if(s.geometry){const u=e==null?void 0:e[i];s.geometry=(u==null?void 0:u.toJSON())||s.geometry}}return t}quantize(e){const{scale:[t,i],translate:[s,u]}=e,d=M=>Math.round((M-s)/t),y=M=>Math.round((u-M)/i),v=this.features,_=this._getQuantizationFunction(this.geometryType,d,y);for(let M=0,E=v.length;M<E;M++)_!=null&&_(v[M].geometry)||(v.splice(M,1),M--,E--);return this.transform=e,this}unquantize(){var C,R;const{geometryType:e,features:t,transform:i}=this;if(!i)return this;const{translate:[s,u],scale:[d,y]}=i,v=L=>L*d+s,_=L=>u-L*y;let M=null,E=null;if(this.hasZ&&((C=i==null?void 0:i.scale)==null?void 0:C[2])!=null){const{translate:[,,L],scale:[,,G]}=i;M=U=>U*G+L}if(this.hasM&&((R=i==null?void 0:i.scale)==null?void 0:R[3])!=null){const{translate:[,,,L],scale:[,,,G]}=i;E=U=>U==null?U:U*G+L}const O=this._getHydrationFunction(e,v,_,M,E);for(const{geometry:L}of t)L!=null&&O&&O(L);return this.transform=null,this}_quantizePoints(e,t,i){let s,u;const d=[];for(let y=0,v=e.length;y<v;y++){const _=e[y];if(y>0){const M=t(_[0]),E=i(_[1]);M===s&&E===u||(d.push([M-s,E-u]),s=M,u=E)}else s=t(_[0]),u=i(_[1]),d.push([s,u])}return d.length>0?d:null}_getQuantizationFunction(e,t,i){return e==="point"?s=>(s.x=t(s.x),s.y=i(s.y),s):e==="polyline"||e==="polygon"?s=>{const u=Uh(s)?s.rings:s.paths,d=[];for(let y=0,v=u.length;y<v;y++){const _=u[y],M=this._quantizePoints(_,t,i);M&&d.push(M)}return d.length>0?(Uh(s)?s.rings=d:s.paths=d,s):null}:e==="multipoint"?s=>{const u=this._quantizePoints(s.points,t,i);return u&&u.length>0?(s.points=u,s):null}:e==="extent"?s=>s:null}_getHydrationFunction(e,t,i,s,u){return e==="point"?d=>{d.x=t(d.x),d.y=i(d.y),s&&(d.z=s(d.z))}:e==="polyline"||e==="polygon"?d=>{const y=Uh(d)?d.rings:d.paths;let v,_;for(let M=0,E=y.length;M<E;M++){const O=y[M];for(let C=0,R=O.length;C<R;C++){const L=O[C];C>0?(v+=L[0],_+=L[1]):(v=L[0],_=L[1]),L[0]=t(v),L[1]=i(_)}}if(s&&u)for(let M=0,E=y.length;M<E;M++){const O=y[M];for(let C=0,R=O.length;C<R;C++){const L=O[C];L[2]=s(L[2]),L[3]=u(L[3])}}else if(s)for(let M=0,E=y.length;M<E;M++){const O=y[M];for(let C=0,R=O.length;C<R;C++){const L=O[C];L[2]=s(L[2])}}else if(u)for(let M=0,E=y.length;M<E;M++){const O=y[M];for(let C=0,R=O.length;C<R;C++){const L=O[C];L[2]=u(L[2])}}}:e==="extent"?d=>{d.xmin=t(d.xmin),d.ymin=i(d.ymin),d.xmax=t(d.xmax),d.ymax=i(d.ymax),s&&d.zmax!=null&&d.zmin!=null&&(d.zmax=s(d.zmax),d.zmin=s(d.zmin)),u&&d.mmax!=null&&d.mmin!=null&&(d.mmax=u(d.mmax),d.mmin=u(d.mmin))}:e==="multipoint"?d=>{const y=d.points;let v,_;for(let M=0,E=y.length;M<E;M++){const O=y[M];M>0?(v+=O[0],_+=O[1]):(v=O[0],_=O[1]),O[0]=t(v),O[1]=i(_)}if(s&&u)for(let M=0,E=y.length;M<E;M++){const O=y[M];O[2]=s(O[2]),O[3]=u(O[3])}else if(s)for(let M=0,E=y.length;M<E;M++){const O=y[M];O[2]=s(O[2])}else if(u)for(let M=0,E=y.length;M<E;M++){const O=y[M];O[2]=u(O[2])}}:null}};w([S({type:String,json:{write:!0}})],wi.prototype,"displayFieldName",void 0),w([S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],wi.prototype,"exceededTransferLimit",void 0),w([S({type:[ka],json:{write:!0}})],wi.prototype,"features",void 0),w([me("features")],wi.prototype,"readFeatures",null),w([S({type:[G4],json:{write:!0}})],wi.prototype,"fields",void 0),w([S({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:Kb.read}}})],wi.prototype,"geometryType",void 0),w([_e("geometryType")],wi.prototype,"writeGeometryType",null),w([S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],wi.prototype,"hasM",void 0),w([S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],wi.prototype,"hasZ",void 0),w([S({types:Eu,json:{write:!0}})],wi.prototype,"queryGeometry",void 0),w([me("queryGeometry")],wi.prototype,"readQueryGeometry",null),w([S({type:He,json:{write:!0}})],wi.prototype,"spatialReference",void 0),w([_e("spatialReference")],wi.prototype,"writeSpatialReference",null),w([S({json:{write:!0}})],wi.prototype,"transform",void 0),wi=Jb=w([B("esri.rest.support.FeatureSet")],wi),wi.prototype.toJSON.isDefaultToJSON=!0;const CP=wi;let rse=0,io=class extends yo.LoadableMixin(Dm(Oe)){constructor(t){super(t),this._idToClientGraphic=null,this.type="memory"}load(t){const i=t!=null?t.signal:null;return this.addResolvingPromise(this._startWorker(i)),Promise.resolve(this)}destroy(){var t;(t=this._connection)==null||t.close(),this._connection=null}get _workerGeometryType(){var i;const t=(i=this.layer)==null?void 0:i.geometryType;return t?this._geometryTypeRequiresClientGraphicMapping(t)?"polygon":t:null}applyEdits(t){return this.load().then(()=>this._applyEdits(t))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(t,i={}){await this.load(i);const s=await this._connection.invoke("queryFeatures",t?t.toJSON():null,i);$8(t,this.layer.spatialReference,s);const u=CP.fromJSON(s);if(!this._requiresClientGraphicMapping())return u;const d=this.layer.objectIdField;for(const y of u.features){const v=y.attributes[d],_=this._idToClientGraphic.get(v);_&&(y.geometry=_.geometry)}return u.geometryType=this.layer.geometryType,u}async queryFeaturesJSON(t,i={}){if(this._requiresClientGraphicMapping())throw new ae("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(i);const s=await this._connection.invoke("queryFeatures",t?t.toJSON():null,i);return $8(t,this.layer.spatialReference,s),s}queryFeatureCount(t,i={}){return this.load(i).then(()=>this._connection.invoke("queryFeatureCount",t?t.toJSON():null,i))}queryObjectIds(t,i={}){return this.load(i).then(()=>this._connection.invoke("queryObjectIds",t?t.toJSON():null,i))}queryExtent(t,i={}){return this.load(i).then(()=>this._connection.invoke("queryExtent",t?t.toJSON():null,i)).then(s=>({count:s.count,extent:Tt.fromJSON(s.extent)}))}querySnapping(t,i={}){return this.load(i).then(()=>this._connection.invoke("querySnapping",t,i))}async _applyEdits(t){if(!this._connection)throw new ae("feature-layer-source:edit-failure","Memory source not loaded");const i=this.layer.objectIdField;let s=null;const u=[],d=[];await Promise.all([this._prepareClientMapping(t.addFeatures,null),this._prepareClientMapping(t.updateFeatures,null)]);const y=E=>"objectId"in E&&E.objectId!=null?E.objectId:"attributes"in E&&E.attributes[i]!=null?E.attributes[i]:null;if(t.addFeatures&&(s=this._prepareAddFeatures(t.addFeatures)),t.deleteFeatures)for(const E of t.deleteFeatures){const O=y(E);O!=null&&u.push(O)}const v=t.updateFeatures&&this._idToClientGraphic?new Map:null;if(t.updateFeatures){for(const E of t.updateFeatures)if(d.push(this._serializeFeature(E)),v){const O=y(E);O!=null&&v.set(O,E)}}Qre(s?s.features:null,d,this.layer.spatialReference);const{fullExtent:_,featureEditResults:M}=await this._connection.invoke("applyEdits",{adds:s?s.features:[],updates:d,deletes:u});return this.fullExtent=_,s&&s.finish(M.uidToObjectId),this._updateClientGraphicIds(v,M),this._createEditsResult(M)}async _prepareClientMapping(t,i){if(this._layerOrSourceGeometryType!=="mesh"||t==null)return;const s=[];for(const{geometry:u}of t)u==null||u.type!=="mesh"||u.hasExtent||u.loaded||s.push(u.load({signal:i}));s.length&&await Promise.all(s)}_updateClientGraphicIds(t,i){if(this._idToClientGraphic){if(t)for(const s of i.updateResults){if(!s.success)continue;const u=t.get(s.objectId);u!=null&&this._addIdToClientGraphic(u)}for(const s of i.deleteResults)s.success&&this._idToClientGraphic.delete(s.objectId)}}_createEditsResult(t){return{addFeatureResults:t.addResults?t.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:t.updateResults?t.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:t.deleteResults?t.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(t){const i=t.success===!0?null:t.error||{code:void 0,description:void 0};return{objectId:t.objectId,globalId:t.globalId,error:i?new ae("feature-layer-source:edit-failure",i.description,{code:i.code}):null}}_prepareAddFeatures(t){const i=new Map,s=new Array(t.length);let u=null;for(let y=0;y<t.length;y++){const v=t[y],_=this._serializeFeature(v);u||v.geometry==null||(u=v.geometry.type),s[y]=_,i.set(`${_.uid}`,v)}const d=this;return{features:s,inferredGeometryType:u,finish(y){const v=d.sourceJSON.objectIdField;for(const _ in y){const M=y[_],E=i.get(_);E&&(E.attributes||(E.attributes={}),M===-1?delete E.attributes[v]:E.attributes[v]=M,d._addIdToClientGraphic(E))}}}}_addIdToClientGraphic(t){var u;if(!this._idToClientGraphic)return;const i=this.sourceJSON.objectIdField,s=(u=t.attributes)==null?void 0:u[i];s!=null&&this._idToClientGraphic.set(s,t)}get _layerOrSourceGeometryType(){var t,i;return((t=this.layer)==null?void 0:t.geometryType)??((i=this.sourceJSON)==null?void 0:i.geometryType)}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(t){return this._geometryTypeRequiresClientGraphicMapping(t.type)}_geometryTypeRequiresClientGraphicMapping(t){return t==="mesh"||t==="multipatch"||t==="extent"}_serializeFeature(t){const{attributes:i}=t,s=this._geometryForSerialization(t),u=(rse++).toString();return s?{uid:u,geometry:s.toJSON(),attributes:i}:{uid:u,attributes:i}}_geometryForSerialization(t){const{geometry:i}=t;return i==null?null:this._geometryRequiresClientGraphicMapping(i)?i.extent?po.fromExtent(i.extent):null:i}async _startWorker(t){this._connection=await ZG("MemorySourceWorker",{strategy:oe("feature-layers-workers")?"dedicated":"local",signal:t,registryTarget:this});const{fields:i,spatialReference:s,objectIdField:u,hasM:d,hasZ:y,timeInfo:v,dateFieldsTimeZone:_}=this.layer,M=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,t);const E=this._prepareAddFeatures(this.items);this.addHandles(this.on("before-changes",L=>{de.getLogger(this).error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),L.preventDefault()}));const O={features:E.features,fields:i==null?void 0:i.map(L=>L.toJSON()),geometryType:t_.toJSON(this._workerGeometryType),hasM:this._layerOrSourceGeometryType!=="mesh"&&d,hasZ:this._layerOrSourceGeometryType==="mesh"||y,objectIdField:u,spatialReference:M?null:s&&s.toJSON(),timeInfo:(v==null?void 0:v.toJSON())??null,dateFieldsTimeZone:_},C=await this._connection.invoke("load",O,{signal:t});for(const L of C.warnings)de.getLogger(this.layer).warn("#load()",`${L.message} (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{warning:L});C.featureErrors.length&&de.getLogger(this.layer).warn("#load()",`Encountered ${C.featureErrors.length} validation errors while loading features. (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{errors:C.featureErrors});const R=C.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(E.inferredGeometryType)&&(R.geometryType=t_.toJSON(E.inferredGeometryType)),this.sourceJSON=R,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),E.finish(C.assignedObjectIds)}};w([g5({Type:ka,ensureType:ei(ka)})],io.prototype,"itemType",void 0),w([S()],io.prototype,"type",void 0),w([S({constructOnly:!0})],io.prototype,"layer",void 0),w([S({readOnly:!0})],io.prototype,"_workerGeometryType",null),w([S()],io.prototype,"sourceJSON",void 0),io=w([B("esri.layers.graphics.sources.MemorySource")],io);function sse(e){return"portalItem"in e}const nse=e=>{let t=class extends e{get apiKey(){var i;return this._isOverridden("apiKey")?this._get("apiKey"):sse(this)?(i=this.portalItem)==null?void 0:i.apiKey:null}set apiKey(i){i!=null?this._override("apiKey",i):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return w([S({type:String})],t.prototype,"apiKey",null),t=w([B("esri.layers.mixins.APIKeyMixin")],t),t},ose=e=>{let t=class extends e{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const i=kc(this.url);if(i!=null&&i.title)return i.title}return this._get("title")||""}set title(i){this._set("title",i)}set url(i){this._set("url",UK(i,de.getLogger(this)))}};return w([S()],t.prototype,"title",null),w([S({type:String})],t.prototype,"url",null),t=w([B("esri.layers.mixins.ArcGISService")],t),t};var T8,M8,Zb={exports:{}};Zb.exports,M8=function(){function e(u,d){function y(){this.constructor=u}y.prototype=d.prototype,u.prototype=new y}function t(u,d,y,v){var _=Error.call(this,u);return Object.setPrototypeOf&&Object.setPrototypeOf(_,t.prototype),_.expected=d,_.found=y,_.location=v,_.name="SyntaxError",_}function i(u,d,y){return y=y||" ",u.length>d?u:(d-=u.length,u+(y+=y.repeat(d)).slice(0,d))}function s(u,d){var y,v={},_=(d=d!==void 0?d:{}).grammarSource,M={start:Bt},E=Bt,O="none",C=")",R=",",L="(",G="%",U="px",K="cm",ee="mm",Q="in",re="pt",ne="pc",le="deg",ve="rad",we="grad",Ee="turn",Me="#",Le=".",Fe="e",it=/^[ \t\n\r]/,Ce=/^[a-z\-]/,Ut=/^[0-9a-fA-F]/,vr=/^[+\-]/,Dt=/^[0-9]/,lt=fe("none"),wr=ce("none",!1),yg=ce(")",!1),Sd=ce(",",!1),mg=fe("whitespace"),$d=ue([" ","	",`
`,"\r"],!1,!1),gg=fe("function"),vg=ce("(",!1),wg=fe("identifier"),Td=ue([["a","z"],"-"],!1,!1),bg=fe("percentage"),_g=ce("%",!1),xg=fe("length"),Sg=ce("px",!1),$g=ce("cm",!1),Md=ce("mm",!1),Tg=ce("in",!1),Mg=ce("pt",!1),Ig=ce("pc",!1),ti=fe("angle"),q=ce("deg",!1),Oi=ce("rad",!1),Id=ce("grad",!1),nt=ce("turn",!1),Ft=fe("number"),os=fe("color"),qs=ce("#",!1),as=ue([["0","9"],["a","f"],["A","F"]],!1,!1),Us=ue(["+","-"],!1,!1),ls=ue([["0","9"]],!1,!1),Ed=ce(".",!1),In=ce("e",!1),ge=function(){return[]},wo=function(J,he){return{type:"function",name:J,parameters:he||[]}},h=function(J,he){return he.length>0?wC(J,he,3):[J]},k=function(J){return{type:"quantity",value:J.value,unit:J.unit}},g=function(J){return{type:"color",colorType:J.type,value:J.value}},l=function(J){return J},o=function(){return se()},r=function(J){return{value:J,unit:"%"}},n=function(J){return{value:J,unit:"px"}},a=function(J){return{value:J,unit:"cm"}},c=function(J){return{value:J,unit:"mm"}},p=function(J){return{value:J,unit:"in"}},f=function(J){return{value:J,unit:"pt"}},m=function(J){return{value:J,unit:"pc"}},b=function(J){return{value:J,unit:"deg"}},x=function(J){return{value:J,unit:"rad"}},T=function(J){return{value:J,unit:"grad"}},I=function(J){return{value:J,unit:"turn"}},A=function(J){return{value:J,unit:null}},P=function(){return{type:"hex",value:se()}},j=function(J){return{type:"function",value:J}},D=function(){return{type:"named",value:se()}},F=function(){return parseFloat(se())},N=0,z=0,W=[{line:1,column:1}],H=0,Y=[],Z=0;if("startRule"in d){if(!(d.startRule in M))throw new Error(`Can't start parsing from rule "`+d.startRule+'".');E=M[d.startRule]}function se(){return u.substring(z,N)}function ce(J,he){return{type:"literal",text:J,ignoreCase:he}}function ue(J,he,ye){return{type:"class",parts:J,inverted:he,ignoreCase:ye}}function $e(){return{type:"end"}}function fe(J){return{type:"other",description:J}}function ze(J){var he,ye=W[J];if(ye)return ye;for(he=J-1;!W[he];)he--;for(ye={line:(ye=W[he]).line,column:ye.column};he<J;)u.charCodeAt(he)===10?(ye.line++,ye.column=1):ye.column++,he++;return W[J]=ye,ye}function Re(J,he,ye){var Ye=ze(J),ii=ze(he),wt={source:_,start:{offset:J,line:Ye.line,column:Ye.column},end:{offset:he,line:ii.line,column:ii.column}};return ye&&_&&typeof _.offset=="function"&&(wt.start=_.offset(wt.start),wt.end=_.offset(wt.end)),wt}function xe(J){N<H||(N>H&&(H=N,Y=[]),Y.push(J))}function gt(J,he,ye){return new t(t.buildMessage(J,he),J,he,ye)}function Bt(){var J;return(J=vt())===v&&(J=rt()),J}function vt(){var J,he;return Z++,J=N,We(),u.substr(N,4)===O?(he=O,N+=4):(he=v,Z===0&&xe(wr)),he!==v?(We(),z=J,J=ge()):(N=J,J=v),Z--,J===v&&Z===0&&xe(lt),J}function rt(){var J,he;if(J=[],(he=st())!==v)for(;he!==v;)J.push(he),he=st();else J=v;return J}function st(){var J,he,ye,Ye;return J=N,We(),(he=br())!==v?(We(),(ye=Ze())===v&&(ye=null),We(),u.charCodeAt(N)===41?(Ye=C,N++):(Ye=v,Z===0&&xe(yg)),Ye!==v?(We(),z=J,J=wo(he,ye)):(N=J,J=v)):(N=J,J=v),J}function Ze(){var J,he,ye,Ye,ii,wt,Lr,kd;if(J=N,(he=It())!==v){for(ye=[],Ye=N,ii=We(),u.charCodeAt(N)===44?(wt=R,N++):(wt=v,Z===0&&xe(Sd)),wt===v&&(wt=null),Lr=We(),(kd=It())!==v?Ye=ii=[ii,wt,Lr,kd]:(N=Ye,Ye=v);Ye!==v;)ye.push(Ye),Ye=N,ii=We(),u.charCodeAt(N)===44?(wt=R,N++):(wt=v,Z===0&&xe(Sd)),wt===v&&(wt=null),Lr=We(),(kd=It())!==v?Ye=ii=[ii,wt,Lr,kd]:(N=Ye,Ye=v);z=J,J=h(he,ye)}else N=J,J=v;return J}function It(){var J,he;return J=N,(he=Ti())===v&&(he=ut())===v&&(he=Ru())===v&&(he=Lu()),he!==v&&(z=J,he=k(he)),(J=he)===v&&(J=N,(he=Du())!==v&&(z=J,he=g(he)),J=he),J}function We(){var J,he;for(Z++,J=[],it.test(u.charAt(N))?(he=u.charAt(N),N++):(he=v,Z===0&&xe($d));he!==v;)J.push(he),it.test(u.charAt(N))?(he=u.charAt(N),N++):(he=v,Z===0&&xe($d));return Z--,he=v,Z===0&&xe(mg),J}function br(){var J,he,ye;return Z++,J=N,(he=Qe())!==v?(u.charCodeAt(N)===40?(ye=L,N++):(ye=v,Z===0&&xe(vg)),ye!==v?(z=J,J=l(he)):(N=J,J=v)):(N=J,J=v),Z--,J===v&&(he=v,Z===0&&xe(gg)),J}function Qe(){var J,he,ye;if(Z++,J=N,he=[],Ce.test(u.charAt(N))?(ye=u.charAt(N),N++):(ye=v,Z===0&&xe(Td)),ye!==v)for(;ye!==v;)he.push(ye),Ce.test(u.charAt(N))?(ye=u.charAt(N),N++):(ye=v,Z===0&&xe(Td));else he=v;return he!==v&&(z=J,he=o()),Z--,(J=he)===v&&(he=v,Z===0&&xe(wg)),J}function Ti(){var J,he,ye;return Z++,J=N,We(),(he=Pi())!==v?(u.charCodeAt(N)===37?(ye=G,N++):(ye=v,Z===0&&xe(_g)),ye!==v?(z=J,J=r(he)):(N=J,J=v)):(N=J,J=v),Z--,J===v&&Z===0&&xe(bg),J}function ut(){var J,he,ye;return Z++,J=N,We(),(he=Pi())!==v?(u.substr(N,2)===U?(ye=U,N+=2):(ye=v,Z===0&&xe(Sg)),ye!==v?(z=J,J=n(he)):(N=J,J=v)):(N=J,J=v),J===v&&(J=N,We(),(he=Pi())!==v?(u.substr(N,2)===K?(ye=K,N+=2):(ye=v,Z===0&&xe($g)),ye!==v?(z=J,J=a(he)):(N=J,J=v)):(N=J,J=v),J===v&&(J=N,We(),(he=Pi())!==v?(u.substr(N,2)===ee?(ye=ee,N+=2):(ye=v,Z===0&&xe(Md)),ye!==v?(z=J,J=c(he)):(N=J,J=v)):(N=J,J=v),J===v&&(J=N,We(),(he=Pi())!==v?(u.substr(N,2)===Q?(ye=Q,N+=2):(ye=v,Z===0&&xe(Tg)),ye!==v?(z=J,J=p(he)):(N=J,J=v)):(N=J,J=v),J===v&&(J=N,We(),(he=Pi())!==v?(u.substr(N,2)===re?(ye=re,N+=2):(ye=v,Z===0&&xe(Mg)),ye!==v?(z=J,J=f(he)):(N=J,J=v)):(N=J,J=v),J===v&&(J=N,We(),(he=Pi())!==v?(u.substr(N,2)===ne?(ye=ne,N+=2):(ye=v,Z===0&&xe(Ig)),ye!==v?(z=J,J=m(he)):(N=J,J=v)):(N=J,J=v)))))),Z--,J===v&&Z===0&&xe(xg),J}function Ru(){var J,he,ye;return Z++,J=N,(he=Pi())!==v?(u.substr(N,3)===le?(ye=le,N+=3):(ye=v,Z===0&&xe(q)),ye!==v?(z=J,J=b(he)):(N=J,J=v)):(N=J,J=v),J===v&&(J=N,(he=Pi())!==v?(u.substr(N,3)===ve?(ye=ve,N+=3):(ye=v,Z===0&&xe(Oi)),ye!==v?(z=J,J=x(he)):(N=J,J=v)):(N=J,J=v),J===v&&(J=N,(he=Pi())!==v?(u.substr(N,4)===we?(ye=we,N+=4):(ye=v,Z===0&&xe(Id)),ye!==v?(z=J,J=T(he)):(N=J,J=v)):(N=J,J=v),J===v&&(J=N,(he=Pi())!==v?(u.substr(N,4)===Ee?(ye=Ee,N+=4):(ye=v,Z===0&&xe(nt)),ye!==v?(z=J,J=I(he)):(N=J,J=v)):(N=J,J=v)))),Z--,J===v&&(he=v,Z===0&&xe(ti)),J}function Lu(){var J,he;return Z++,J=N,We(),(he=Pi())!==v?(z=J,J=A(he)):(N=J,J=v),Z--,J===v&&Z===0&&xe(Ft),J}function Du(){var J,he,ye,Ye;if(Z++,J=N,u.charCodeAt(N)===35?(he=Me,N++):(he=v,Z===0&&xe(qs)),he!==v){if(ye=[],Ut.test(u.charAt(N))?(Ye=u.charAt(N),N++):(Ye=v,Z===0&&xe(as)),Ye!==v)for(;Ye!==v;)ye.push(Ye),Ut.test(u.charAt(N))?(Ye=u.charAt(N),N++):(Ye=v,Z===0&&xe(as));else ye=v;ye!==v?(z=J,J=P()):(N=J,J=v)}else N=J,J=v;return J===v&&(J=N,(he=st())!==v&&(z=J,he=j(he)),(J=he)===v&&(J=N,(he=Qe())!==v&&(z=J,he=D()),J=he)),Z--,J===v&&(he=v,Z===0&&xe(os)),J}function Pi(){var J,he,ye,Ye,ii,wt,Lr;for(J=N,vr.test(u.charAt(N))?(u.charAt(N),N++):Z===0&&xe(Us),he=N,ye=[],Dt.test(u.charAt(N))?(Ye=u.charAt(N),N++):(Ye=v,Z===0&&xe(ls));Ye!==v;)ye.push(Ye),Dt.test(u.charAt(N))?(Ye=u.charAt(N),N++):(Ye=v,Z===0&&xe(ls));if(u.charCodeAt(N)===46?(Ye=Le,N++):(Ye=v,Z===0&&xe(Ed)),Ye!==v){if(ii=[],Dt.test(u.charAt(N))?(wt=u.charAt(N),N++):(wt=v,Z===0&&xe(ls)),wt!==v)for(;wt!==v;)ii.push(wt),Dt.test(u.charAt(N))?(wt=u.charAt(N),N++):(wt=v,Z===0&&xe(ls));else ii=v;ii!==v?he=ye=[ye,Ye,ii]:(N=he,he=v)}else N=he,he=v;if(he===v)if(he=[],Dt.test(u.charAt(N))?(ye=u.charAt(N),N++):(ye=v,Z===0&&xe(ls)),ye!==v)for(;ye!==v;)he.push(ye),Dt.test(u.charAt(N))?(ye=u.charAt(N),N++):(ye=v,Z===0&&xe(ls));else he=v;if(he!==v){if(ye=N,u.charCodeAt(N)===101?(Ye=Fe,N++):(Ye=v,Z===0&&xe(In)),Ye!==v){if(vr.test(u.charAt(N))?(ii=u.charAt(N),N++):(ii=v,Z===0&&xe(Us)),ii===v&&(ii=null),wt=[],Dt.test(u.charAt(N))?(Lr=u.charAt(N),N++):(Lr=v,Z===0&&xe(ls)),Lr!==v)for(;Lr!==v;)wt.push(Lr),Dt.test(u.charAt(N))?(Lr=u.charAt(N),N++):(Lr=v,Z===0&&xe(ls));else wt=v;wt!==v?ye=Ye=[Ye,ii,wt]:(N=ye,ye=v)}else N=ye,ye=v;ye===v&&(ye=null),z=J,J=F()}else N=J,J=v;return J}function vC(J,he){return J.map(function(ye){return ye[he]})}function wC(J,he,ye){return[J].concat(vC(he,ye))}if((y=E())!==v&&N===u.length)return y;throw y!==v&&N<u.length&&xe($e()),gt(Y,H<u.length?u.charAt(H):null,H<u.length?Re(H,H+1):Re(H,H))}return e(t,Error),t.prototype.format=function(u){var d="Error: "+this.message;if(this.location){var y,v=null;for(y=0;y<u.length;y++)if(u[y].source===this.location.source){v=u[y].text.split(/\r\n|\n|\r/g);break}var _=this.location.start,M=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(_):_,E=this.location.source+":"+M.line+":"+M.column;if(v){var O=this.location.end,C=i("",M.line.toString().length," "),R=v[_.line-1],L=(_.line===O.line?O.column:R.length+1)-_.column||1;d+=`
 --> `+E+`
`+C+` |
`+M.line+" | "+R+`
`+C+" | "+i("",_.column-1," ")+i("",L,"^")}else d+=`
 at `+E}return d},t.buildMessage=function(u,d){var y={literal:function(R){return'"'+_(R.text)+'"'},class:function(R){var L=R.parts.map(function(G){return Array.isArray(G)?M(G[0])+"-"+M(G[1]):M(G)});return"["+(R.inverted?"^":"")+L.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(R){return R.description}};function v(R){return R.charCodeAt(0).toString(16).toUpperCase()}function _(R){return R.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(L){return"\\x0"+v(L)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(L){return"\\x"+v(L)})}function M(R){return R.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(L){return"\\x0"+v(L)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(L){return"\\x"+v(L)})}function E(R){return y[R.type](R)}function O(R){var L,G,U=R.map(E);if(U.sort(),U.length>0){for(L=1,G=1;L<U.length;L++)U[L-1]!==U[L]&&(U[G]=U[L],G++);U.length=G}switch(U.length){case 1:return U[0];case 2:return U[0]+" or "+U[1];default:return U.slice(0,-1).join(", ")+", or "+U[U.length-1]}}function C(R){return R?'"'+_(R)+'"':"end of input"}return"Expected "+O(u)+" but "+C(d)+" found."},{SyntaxError:t,parse:s}},(T8=Zb).exports&&(T8.exports=M8());var ase=Zb.exports;function jP(e){if(!e||e.length===0)return null;if(typeof e=="string"){const i=I8(e);return i&&i.length!==0?i:null}const t=e.map(i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new ae("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:I8(i.value)}});t.sort((i,s)=>s.effects.length-i.effects.length);for(let i=0;i<t.length-1;i++){if(!iW(t[i].effects,t[i+1].effects))throw new ae("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[i].effects,b:t[i+1].effects});rW(t[i].effects,t[i+1].effects)}return t.sort((i,s)=>s.scale-i.scale),t}function I8(e){let t;if(!e)return[];try{t=ase.parse(e)}catch(i){throw new ae("effect:invalid-syntax","Invalid effect syntax",{value:e,error:i})}return t.map(i=>lse(i))}function lse(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return use(e);case"opacity":return hse(e);case"hue-rotate":return cse(e);case"blur":return pse(e);case"drop-shadow":return dse(e);case"bloom":return fse(e)}}catch(t){throw t.details.filter=e,t}throw new ae("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}function use(e){let t=1;return Cc(e.parameters,1),e.parameters.length===1&&(t=As(e.parameters[0])),new vw(e.name,t)}function hse(e){let t=1;return Cc(e.parameters,1),e.parameters.length===1&&(t=As(e.parameters[0])),new SE(t)}function cse(e){let t=0;return Cc(e.parameters,1),e.parameters.length===1&&(t=bse(e.parameters[0])),new _E(t)}function pse(e){let t=0;return Cc(e.parameters,1),e.parameters.length===1&&(t=B4(e.parameters[0]),_d(t,e.parameters[0])),new mE(t)}function dse(e){const t=[];let i=null;for(const s of e.parameters)if(s.type==="color"){if(t.length&&Object.freeze(t),i)throw new ae("effect:type-error","Accepts only one color",{});i=_se(s)}else{const u=B4(s);if(Object.isFrozen(t))throw new ae("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(u),t.length===3&&_d(u,s)}if(t.length<2||t.length>3)throw new ae("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new wE(t[0],t[1],t[2]||0,i||NP("black"))}function fse(e){let t=1,i=0,s=0;return Cc(e.parameters,3),e.parameters[0]&&(t=As(e.parameters[0])),e.parameters[1]&&(i=B4(e.parameters[1]),_d(i,e.parameters[1])),e.parameters[2]&&(s=As(e.parameters[2])),new fE(t,i,s)}function Cc(e,t){if(e.length>t)throw new ae("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function pg(e){if(e.type==="color")return"<color>";if(e.unit){if(e.unit in U4)return"<length>";if(e.unit in q4)return"<angle>";if(e.unit==="%")return"<percentage>"}return"<double>"}function _d(e,t){if(e<0)throw new ae("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}function yse(e){if(e.type!=="quantity"||e.unit!==null)throw new ae("effect:type-error",`Expected <double>, Actual: ${pg(e)}`,{term:e})}function mse(e){if(e.type!=="quantity"||e.unit!==null&&e.unit!=="%")throw new ae("effect:type-error",`Expected <double> or <percentage>, Actual: ${pg(e)}`,{term:e})}const q4={deg:1,grad:.9,rad:180/Math.PI,turn:360};function gse(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&q4[e.unit]!=null))throw new ae("effect:type-error",`Expected <angle>, Actual: ${pg(e)}`,{term:e})}const U4={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function vse(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&U4[e.unit]!=null))throw new ae("effect:type-error",`Expected <length>, Actual: ${pg(e)}`,{term:e})}function As(e){mse(e);const t=e.value;return _d(t,e),e.unit==="%"?.01*t:t}function wse(e){return yse(e),_d(e.value,e),e.value}function bse(e){return gse(e),e.value*q4[e.unit]||0}function B4(e){return vse(e),e.value*U4[e.unit]||0}function _se(e){switch(e.colorType){case"hex":return BB(e.value);case"named":return NP(e.value);case"function":return $se(e.value)}}function NP(e){if(!iE(e))throw new ae("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return UB(e)}const xse=/^rgba?/i,Sse=/^hsla?/i;function $se(e){if(Cc(e.parameters,4),xse.test(e.name))return[As(e.parameters[0]),As(e.parameters[1]),As(e.parameters[2]),e.parameters[3]?As(e.parameters[3]):1];if(Sse.test(e.name))return rE(wse(e.parameters[0]),As(e.parameters[1]),As(e.parameters[2]),e.parameters[3]?As(e.parameters[3]):1);throw new ae("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}function H4(e,t,i){var s;try{return Mse(e)}catch(u){(s=i==null?void 0:i.messages)==null||s.push(u)}return null}function W4(e,t,i,s){try{const u=Tse(e);Hi(i,u,t)}catch(u){s.messages&&s.messages.push(u)}}function Tse(e){const t=jP(e);return t?sW(t)?t.map(i=>i.toJSON()):t.map(({scale:i,effects:s})=>({scale:i,value:s.map(u=>u.toJSON())})):null}function Mse(e){if(!e||e.length===0)return null;if(Ise(e)){const t=[];for(const i of e)t.push({scale:i.scale,value:E8(i.value)});return t}return E8(e)}function Ise(e){const t=e[0];return!!t&&"scale"in t}function E8(e){if(!(e!=null&&e.length))return"";const t=[];for(const i of e){let s=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":s=[Pn(i,"amount")];break;case"blur":s=[Pn(i,"radius","pt")];break;case"hue-rotate":s=[Pn(i,"angle","deg")];break;case"drop-shadow":s=[Pn(i,"xoffset","pt"),Pn(i,"yoffset","pt"),Pn(i,"blurRadius","pt"),Ese(i,"color")];break;case"bloom":s=[Pn(i,"strength"),Pn(i,"radius","pt"),Pn(i,"threshold")]}const u=`${i.type}(${s.filter(Boolean).join(" ")})`;jP(u),t.push(u)}return t.join(" ")}function Pn(e,t,i){if(e[t]==null)throw new ae("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return i?e[t]+i:""+e[t]}function Ese(e,t){if(e[t]==null)throw new ae("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const i=e[t];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}const k8={read:{reader:H4},write:{allowNull:!0,writer:W4}},RP=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return w([S({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}})],t.prototype,"blendMode",void 0),w([S({json:{read:!1,write:!1,origins:{"web-map":k8,"portal-item":k8}}})],t.prototype,"effect",void 0),t=w([B("esri.layers.mixins.BlendLayer")],t),t},kse=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return w([S({type:Object,json:{write:{overridePolicy:i=>({enabled:!!(i&&Object.keys(i).length>0)})}}})],t.prototype,"customParameters",void 0),t=w([B("esri.layers.mixins.CustomParametersMixin")],t),t},Ase=tee(),Ose=new Map,LP=new Map;async function lde(e,t,i=!1){var d,y;if(!e||!t)return!0;const s=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),u=(d=LP.get(s))==null?void 0:d.entries();if(u){for(const[v,_]of u)if(_.name===t){const M=!((y=_.stack)!=null&&y.hasForwardEdits());if(!M&&i){const[{deleteForwardEdits:E},{default:O}]=await Promise.all([Se(()=>import("./deleteForwardEdits-d1ad4a1a.js"),[]),Se(()=>import("./DeleteForwardEditsParameters-84e34171.js"),[])]);return E(s,v,new O({sessionId:Ase,moment:_.moment}))}return M}}return!0}function Pse(e,t){var u;if(!e)return!1;const i=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),s=(u=LP.get(i))==null?void 0:u.entries();if(s){for(const[d,y]of s)if(y.name===t)return y.lockType==="edit"}return!1}const J4=new ja.EventEmitter;function Cse(e){return J4.on("apply-edits",new WeakRef(e))}function jse(e){return J4.on("update-moment",new WeakRef(e))}function ude(e,t,i=null,s=!1){const u=ts();return s=t==null||s,J4.emit("apply-edits",{serviceUrl:e,layerId:t,gdbVersion:i,mayReceiveServiceEdits:s,result:u.promise}),u}const DP="esri.layers.mixins.EditBusLayer",FP=Symbol(DP);function hde(e){return e!=null&&typeof e=="object"&&FP in e}function Qc(e){return e!=null&&typeof e=="object"&&"gdbVersion"in e}function J2(e,t,i){const s=new URL(e).host,u=Ose.get(s),d=y=>!y||y===u;return d(t)&&d(i)||t===i}const Nse=e=>{var t;let i=class extends e{constructor(...s){super(...s),this[t]=!0,this._applyEditsHandler=u=>{const{serviceUrl:d,layerId:y,gdbVersion:v,mayReceiveServiceEdits:_,result:M}=u,E=d===this.url,O=y!=null&&this.layerId!=null&&y===this.layerId,C=Qc(this),R=Qc(this)&&J2(d,v,this.gdbVersion);if(!E||C&&!R||!O&&!_)return;const L=M.then(G=>{var K;if(O&&(G.addedFeatures.length||G.updatedFeatures.length||G.deletedFeatures.length||G.addedAttachments.length||G.updatedAttachments.length||G.deletedAttachments.length))return this.emit("edits",ie(G)),G;const U=(K=G.editedFeatures)==null?void 0:K.find(({layerId:ee})=>ee===this.layerId);if(U){const{adds:ee,updates:Q,deletes:re}=U.editedFeatures,ne={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:ee?ee.map(({attributes:le})=>({objectId:this.objectIdField&&le[this.objectIdField],globalId:this.globalIdField&&le[this.globalIdField]})):[],deletedFeatures:re?re.map(({attributes:le})=>({objectId:this.objectIdField&&le[this.objectIdField],globalId:this.globalIdField&&le[this.globalIdField]})):[],updatedFeatures:Q?Q.map(({current:{attributes:le}})=>({objectId:this.objectIdField&&le[this.objectIdField],globalId:this.globalIdField&&le[this.globalIdField]})):[],editedFeatures:ie(G.editedFeatures),exceededTransferLimit:!1,historicMoment:ie(G.historicMoment)};return this.emit("edits",ne),ne}return{edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:ie(G.editedFeatures),exceededTransferLimit:!1,historicMoment:ie(G.historicMoment)}}).then(G=>("historicMoment"in this&&this.historicMoment!==G.historicMoment&&Pse(d,v)&&(this.historicMoment=G.historicMoment),G));this.emit("apply-edits",{result:L})},this._updateMomentHandler=u=>{const{serviceUrl:d,gdbVersion:y,moment:v}=u,_=d===this.url,M=Qc(this),E=Qc(this)&&J2(d,y,this.gdbVersion),O=Qc(this)&&!J2(d,this.gdbVersion,null);_&&M&&E&&O&&"historicMoment"in this&&this.historicMoment!==v&&(this.historicMoment=v)},this.when().then(()=>{this.addHandles(Cse(this._applyEditsHandler)),"historicMoment"in this&&this.addHandles(jse(this._updateMomentHandler))},()=>{})}};return t=FP,i=w([B(DP)],i),i};var Yb;let Th=Yb=class extends pe{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new Yb({mapLayerId:e,gdbVersion:t})}};w([Ae({mapLayer:"map-layer"})],Th.prototype,"type",void 0),w([S({type:St,json:{write:!0}})],Th.prototype,"mapLayerId",void 0),w([S({type:String,json:{write:!0}})],Th.prototype,"gdbVersion",void 0),Th=Yb=w([B("esri.layers.support.source.MapLayerSource")],Th);var Xb;let Wn=Xb=class extends pe{constructor(e){super(e),this.type="query-table"}clone(){const{workspaceId:e,query:t,oidFields:i,spatialReference:s,geometryType:u}=this,d={workspaceId:e,query:t,oidFields:i,spatialReference:(s==null?void 0:s.clone())??void 0,geometryType:u};return new Xb(d)}};w([Ae({queryTable:"query-table"})],Wn.prototype,"type",void 0),w([S({type:String,json:{write:!0}})],Wn.prototype,"workspaceId",void 0),w([S({type:String,json:{write:!0}})],Wn.prototype,"query",void 0),w([S({type:String,json:{write:!0}})],Wn.prototype,"oidFields",void 0),w([S({type:He,json:{write:!0}})],Wn.prototype,"spatialReference",void 0),w([Ae(GF)],Wn.prototype,"geometryType",void 0),Wn=Xb=w([B("esri.layers.support.source.QueryTableDataSource")],Wn);var Qb;let Mh=Qb=class extends pe{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new Qb({workspaceId:e,dataSourceName:t})}};w([Ae({raster:"raster"})],Mh.prototype,"type",void 0),w([S({type:String,json:{write:!0}})],Mh.prototype,"dataSourceName",void 0),w([S({type:String,json:{write:!0}})],Mh.prototype,"workspaceId",void 0),Mh=Qb=w([B("esri.layers.support.source.RasterDataSource")],Mh);var e9;let Ol=e9=class extends pe{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:i}=this;return new e9({workspaceId:e,gdbVersion:t,dataSourceName:i})}};w([Ae({table:"table"})],Ol.prototype,"type",void 0),w([S({type:String,json:{write:!0}})],Ol.prototype,"workspaceId",void 0),w([S({type:String,json:{write:!0}})],Ol.prototype,"gdbVersion",void 0),w([S({type:String,json:{write:!0}})],Ol.prototype,"dataSourceName",void 0),Ol=e9=w([B("esri.layers.support.source.TableDataSource")],Ol);var t9,i9;const Rse=Ji()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let Mr=t9=class extends pe{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,i){return A8()(e,t,i)}castLeftTableSource(e){return wn(r9(),e)}readRightTableSource(e,t,i){return A8()(e,t,i)}castRightTableSource(e){return wn(r9(),e)}clone(){const{leftTableKey:e,rightTableKey:t,leftTableSource:i,rightTableSource:s,joinType:u}=this,d={leftTableKey:e,rightTableKey:t,leftTableSource:(i==null?void 0:i.clone())??void 0,rightTableSource:(s==null?void 0:s.clone())??void 0,joinType:u};return new t9(d)}};w([Ae({joinTable:"join-table"})],Mr.prototype,"type",void 0),w([S({type:String,json:{write:!0}})],Mr.prototype,"leftTableKey",void 0),w([S({type:String,json:{write:!0}})],Mr.prototype,"rightTableKey",void 0),w([S({json:{write:!0}})],Mr.prototype,"leftTableSource",void 0),w([me("leftTableSource")],Mr.prototype,"readLeftTableSource",null),w([mt("leftTableSource")],Mr.prototype,"castLeftTableSource",null),w([S({json:{write:!0}})],Mr.prototype,"rightTableSource",void 0),w([me("rightTableSource")],Mr.prototype,"readRightTableSource",null),w([mt("rightTableSource")],Mr.prototype,"castRightTableSource",null),w([Ae(Rse)],Mr.prototype,"joinType",void 0),Mr=t9=w([B("esri.layers.support.source.JoinTableDataSource")],Mr);let K2=null;function A8(){return K2||(K2=vc({types:r9()})),K2}let Z2=null;function r9(){return Z2||(Z2={key:"type",base:null,typeMap:{"data-layer":Os,"map-layer":Th}}),Z2}const Lse={key:"type",base:null,typeMap:{"join-table":Mr,"query-table":Wn,raster:Mh,table:Ol}};let Os=i9=class extends pe{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new i9({fields:e,dataSource:t})}};w([Ae({dataLayer:"data-layer"})],Os.prototype,"type",void 0),w([S({type:[G4],json:{write:!0}})],Os.prototype,"fields",void 0),w([S({types:Lse,json:{write:!0}})],Os.prototype,"dataSource",void 0),Os=i9=w([B("esri.layers.support.source.DataLayerSource")],Os),Os.from=ei(Os);let Pl=class extends Mt(pe){constructor(t){super(t),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};w([S({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],Pl.prototype,"onFields",void 0),w([S({type:String,json:{write:!0}})],Pl.prototype,"operator",void 0),w([S({type:String,json:{write:!0}})],Pl.prototype,"searchTerm",void 0),w([S({type:String,json:{write:!0}})],Pl.prototype,"searchType",void 0),Pl=w([B("esri.rest.support.FullTextSearch")],Pl);const Dse=Pl;var s9;const O8=new et({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let Ms=s9=class extends pe{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(t.statisticParameters=ie(e))}clone(){return new s9({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:ie(this.statisticParameters)})}};w([S({type:Number,json:{write:!0}})],Ms.prototype,"maxPointCount",void 0),w([S({type:Number,json:{write:!0}})],Ms.prototype,"maxRecordCount",void 0),w([S({type:Number,json:{write:!0}})],Ms.prototype,"maxVertexCount",void 0),w([S({type:String,json:{write:!0}})],Ms.prototype,"onStatisticField",void 0),w([S({type:String,json:{write:!0}})],Ms.prototype,"outStatisticFieldName",void 0),w([S({type:String,json:{read:{source:"statisticType",reader:O8.read},write:{target:"statisticType",writer:O8.write}}})],Ms.prototype,"statisticType",void 0),w([S({type:Object})],Ms.prototype,"statisticParameters",void 0),w([_e("statisticParameters")],Ms.prototype,"writeStatisticParameters",null),Ms=s9=w([B("esri.rest.support.StatisticDefinition")],Ms);const Fse=Ms;var G1;const zse=new et({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),Vse=new et({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let je=G1=class extends pe{static from(e){return gm(G1,e)}constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const i={};for(const s in e){const u=e[s];Array.isArray(u)?i[s]=u.map(d=>d instanceof Date?d.getTime():d):u instanceof Date?i[s]=u.getTime():i[s]=u}t.parameterValues=i}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new G1(ie({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};je.MAX_MAX_RECORD_COUNT_FACTOR=5,w([S({json:{write:!0}})],je.prototype,"aggregateIds",void 0),w([S({type:Boolean,json:{write:!0}})],je.prototype,"cacheHint",void 0),w([S({type:Boolean,json:{default:!1,write:!0}})],je.prototype,"compactGeometryEnabled",void 0),w([S({json:{write:!0}})],je.prototype,"datumTransformation",void 0),w([mt("datumTransformation")],je.prototype,"castDatumTransformation",null),w([S({type:Boolean,json:{default:!1,write:!0}})],je.prototype,"defaultSpatialReferenceEnabled",void 0),w([S({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],je.prototype,"distance",void 0),w([S({type:Os,json:{write:!0}})],je.prototype,"dynamicDataSource",void 0),w([S({type:String,json:{write:!0}})],je.prototype,"formatOf3DObjects",void 0),w([S({type:[Dse],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],je.prototype,"fullText",void 0),w([S({type:String,json:{write:!0}})],je.prototype,"gdbVersion",void 0),w([S({types:Eu,json:{read:$a,write:!0}})],je.prototype,"geometry",void 0),w([S({type:Number,json:{write:!0}})],je.prototype,"geometryPrecision",void 0),w([S({type:[String],json:{write:!0}})],je.prototype,"groupByFieldsForStatistics",void 0),w([S({type:String,json:{write:!0}})],je.prototype,"having",void 0),w([S({type:Date})],je.prototype,"historicMoment",void 0),w([_e("historicMoment")],je.prototype,"writeHistoricMoment",null),w([S({type:Number,json:{write:!0}})],je.prototype,"maxAllowableOffset",void 0),w([S({type:Number,cast:e=>e<1?1:e>je.MAX_MAX_RECORD_COUNT_FACTOR?je.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],je.prototype,"maxRecordCountFactor",void 0),w([S({type:["xyFootprint"],json:{write:!0}})],je.prototype,"multipatchOption",void 0),w([S({type:Number,json:{read:{source:"resultRecordCount"}}})],je.prototype,"num",void 0),w([S({json:{write:!0}})],je.prototype,"objectIds",void 0),w([S({type:[String],json:{write:!0}})],je.prototype,"orderByFields",void 0),w([S({type:[String],json:{write:!0}})],je.prototype,"outFields",void 0),w([S({type:He,json:{name:"outSR",write:!0}})],je.prototype,"outSpatialReference",void 0),w([S({type:[Fse],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],je.prototype,"outStatistics",void 0),w([S({json:{write:!0}})],je.prototype,"parameterValues",void 0),w([_e("parameterValues")],je.prototype,"writeParameterValues",null),w([S({type:Je,json:{write:!0}})],je.prototype,"pixelSize",void 0),w([S({type:DA,json:{write:!0}})],je.prototype,"quantizationParameters",void 0),w([S({type:[Object],json:{write:!0}})],je.prototype,"rangeValues",void 0),w([S({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],je.prototype,"relationParameter",void 0),w([S({type:String,json:{write:!0}})],je.prototype,"resultType",void 0),w([S({type:Boolean,json:{default:!1,write:!0}})],je.prototype,"returnCentroid",void 0),w([S({type:Boolean,json:{default:!1,write:!0}})],je.prototype,"returnDistinctValues",void 0),w([S({type:Boolean,json:{default:!0,write:!0}})],je.prototype,"returnExceededLimitFeatures",void 0),w([S({type:Boolean,json:{write:!0}})],je.prototype,"returnGeometry",void 0),w([S({type:Boolean,json:{default:!1,write:!0}})],je.prototype,"returnQueryGeometry",void 0),w([S({type:Boolean,json:{default:!1,write:!0}})],je.prototype,"returnM",void 0),w([S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],je.prototype,"returnZ",void 0),w([S({type:He,json:{write:!0}})],je.prototype,"sourceSpatialReference",void 0),w([Ae(zse,{ignoreUnknown:!1,name:"spatialRel"})],je.prototype,"spatialRelationship",void 0),w([S({type:Number,json:{read:{source:"resultOffset"}}})],je.prototype,"start",void 0),w([_e("start"),_e("num")],je.prototype,"writeStart",null),w([S({type:String,json:{write:!0}})],je.prototype,"sqlFormat",void 0),w([S({type:String,json:{write:!0}})],je.prototype,"text",void 0),w([S({type:Tn,json:{write:!0}})],je.prototype,"timeExtent",void 0),w([S({type:Boolean,json:{default:!1,write:!0}})],je.prototype,"timeReferenceUnknownClient",void 0),w([Ae(Vse,{ignoreUnknown:!1}),S({json:{write:{overridePolicy(e){return{enabled:!!e&&this.distance!=null&&this.distance>0}}}}})],je.prototype,"units",void 0),w([S({type:String,json:{write:{overridePolicy(e){return{enabled:e!=null||this.start!=null&&this.start>0}}}}})],je.prototype,"where",void 0),w([_e("where")],je.prototype,"writeWhere",null),je=G1=w([B("esri.rest.support.Query")],je);const Nu=je;var n9;const Y2=new et({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),X2=new et({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let pn=n9=class extends pe{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(e={}){const{where:t,geometry:i,spatialRelationship:s,timeExtent:u,objectIds:d,units:y,distance:v}=this;return new Nu({geometry:ie(i),objectIds:ie(d),spatialRelationship:s,timeExtent:ie(u),where:t,units:y,distance:v,...e})}clone(){const{where:e,geometry:t,spatialRelationship:i,timeExtent:s,objectIds:u,units:d,distance:y}=this;return new n9({geometry:ie(t),objectIds:ie(u),spatialRelationship:i,timeExtent:ie(s),where:e,units:d,distance:y})}};w([S({type:String,json:{write:!0}})],pn.prototype,"where",void 0),w([S({types:Eu,json:{write:!0}})],pn.prototype,"geometry",void 0),w([S({type:Y2.apiValues,json:{name:"spatialRel",read:{reader:Y2.read},write:{allowNull:!1,writer:Y2.write,overridePolicy(){return{enabled:this.geometry!=null}}}}})],pn.prototype,"spatialRelationship",void 0),w([S({type:Number,json:{write:{overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],pn.prototype,"distance",void 0),w([S({type:[Number],json:{write:!0}})],pn.prototype,"objectIds",void 0),w([S({type:X2.apiValues,json:{read:X2.read,write:{writer:X2.write,overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],pn.prototype,"units",void 0),w([S({type:Tn,json:{write:!0}})],pn.prototype,"timeExtent",void 0),pn=n9=w([B("esri.layers.support.FeatureFilter")],pn);const Gse=pn;var o9;const P8={read:{reader:H4},write:{writer:W4,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},C8={read:{reader:H4},write:{writer:W4,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},j8={name:"showExcludedLabels",default:!0};let Cl=o9=class extends pe{constructor(e){super(e),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(e,t){var s,u;const i=super.write(e,t);if(t!=null&&t.origin){if(i.filter){const d=Object.keys(i.filter);if(d.length>1||d[0]!=="where")return(s=t.messages)==null||s.push(new ae("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:t.layer,effect:this})),null}if("showExcludedLabels"in i)return(u=t.messages)==null||u.push(new ae("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:t.layer,effect:this})),null}return i}clone(){return new o9({filter:this.filter!=null?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};w([S({type:Gse,json:{write:{allowNull:!0,writer(e,t,i,s){const u=e==null?void 0:e.write({},s);u&&Object.keys(u).length!==0?Hi(i,u,t):Hi(i,null,t)}}}})],Cl.prototype,"filter",void 0),w([S({json:{write:!0,origins:{"web-map":P8,"portal-item":P8}}})],Cl.prototype,"includedEffect",void 0),w([S({json:{write:!0,origins:{"web-map":C8,"portal-item":C8}}})],Cl.prototype,"excludedEffect",void 0),w([S({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":j8,"portal-item":j8}}})],Cl.prototype,"excludedLabelsVisible",void 0),Cl=o9=w([B("esri.layers.support.FeatureEffect")],Cl);const qse=Cl,N8={write:{allowNull:!0}},Use=e=>{let t=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return w([S({type:qse,json:{origins:{"web-map":N8,"portal-item":N8}}})],t.prototype,"featureEffect",void 0),t=w([B("esri.layers.mixins.FeatureEffectLayer")],t),t};function Bse(e){if(!e)return e;const{start:t,end:i}=e;return new Tn({start:t!=null?su(t,-t.getTimezoneOffset(),"minutes"):t,end:i!=null?su(i,-i.getTimezoneOffset(),"minutes"):i})}function Hse(e){if(!e)return e;const{start:t,end:i}=e;return new Tn({start:t!=null?su(t,t.getTimezoneOffset(),"minutes"):t,end:i!=null?su(i,i.getTimezoneOffset(),"minutes"):i})}var a9;let H0=a9=class extends pe{constructor(e){super(e)}async collectRequiredFields(e,t){return nr(e,t,this.expression)}clone(){return new a9({expression:this.expression,title:this.title})}equals(e){return this.expression===e.expression&&this.title===e.title}};w([S({type:String,json:{write:!0}})],H0.prototype,"expression",void 0),w([S({type:String,json:{write:!0}})],H0.prototype,"title",void 0),H0=a9=w([B("esri.layers.support.FeatureExpressionInfo")],H0);const R8=H0;function pde(e){return 1/(N4[e]||1)}function Wse(){const e=Object.keys(N4);return e.sort(),e}const Jse=Wse();var l9;const Mf=Ji()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),L8=new et({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let Jn=l9=class extends pe{constructor(e){super(e),this.offset=null}readFeatureExpressionInfo(e,t){return e??(t.featureExpression&&t.featureExpression.value===0?{expression:"0"}:void 0)}writeFeatureExpressionInfo(e,t,i,s){t[i]=e.write({},s),e.expression==="0"&&(t.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:t}=this;return this._isOverridden("mode")?this._get("mode"):e!=null||t?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,t):null}clone(){return new l9({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&rj(this.featureExpressionInfo,e.featureExpressionInfo)}};w([S({type:R8,json:{write:!0}})],Jn.prototype,"featureExpressionInfo",void 0),w([me("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],Jn.prototype,"readFeatureExpressionInfo",null),w([_e("featureExpressionInfo",{featureExpressionInfo:{type:R8},"featureExpression.value":{type:[0]}})],Jn.prototype,"writeFeatureExpressionInfo",null),w([S({type:Mf.apiValues,nonNullable:!0,json:{type:Mf.jsonValues,read:Mf.read,write:{writer:Mf.write,isRequired:!0}}})],Jn.prototype,"mode",null),w([S({type:Number,json:{write:!0}})],Jn.prototype,"offset",void 0),w([S({type:Jse,json:{type:String,read:L8.read,write:L8.write}})],Jn.prototype,"unit",null),Jn=l9=w([B("esri.layers.support.ElevationInfo")],Jn);const zP=Jn,Kse={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:Wi}}},K4={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,i){t[i]=!e}}}},Z4={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:Wi}}},Zse={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:bu}}},Yse={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:Wi}}},Xse={value:null,type:zP,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:Wi}}};function dde(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const VP={write:{enabled:!0,layerContainerTypes:Wi},read:!0},u9={type:Number,json:{origins:{"web-document":VP,"portal-item":{write:!0}}}},Qse={...u9,json:{...u9.json,origins:{"web-document":{...VP,write:{enabled:!0,layerContainerTypes:Wi,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,i)=>{var s;return i&&i.origin!=="service"||!t.drawingInfo||t.drawingInfo.transparency===void 0?(s=t.layerDefinition)!=null&&s.drawingInfo&&t.layerDefinition.drawingInfo.transparency!==void 0?Np(t.layerDefinition.drawingInfo.transparency):void 0:Np(t.drawingInfo.transparency)}}}},fde={type:Tn,readOnly:!0,get(){var v,_;if(!((v=this.layer)!=null&&v.timeInfo))return null;const{datesInUnknownTimezone:e,timeOffset:t,useViewTime:i}=this.layer,s=(_=this.view)==null?void 0:_.timeExtent;let u=this.layer.timeExtent;e&&(u=Hse(u));let d=i?s&&u?s.intersection(u):s||u:u;if(!d||d.isEmpty||d.isAllTime)return d;t&&(d=d.offset(-t.value,t.unit)),e&&(d=Bse(d));const y=this._get("timeExtent");return d.equals(y)?y:d}},yde={type:Tt,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const i=Tt.fromJSON(e);return t.spatialReference!=null&&typeof t.spatialReference=="object"&&(i.spatialReference=He.fromJSON(t.spatialReference)),i}}}},read:!1}},ene={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},tne={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.minScale",write:{enabled:!0,layerContainerTypes:Wi}}},name:"layerDefinition.minScale",write:!0}},ine={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.maxScale",write:{enabled:!0,layerContainerTypes:Wi}}},name:"layerDefinition.maxScale",write:!0}},GP={json:{write:{ignoreOrigin:!0,layerContainerTypes:Wi},origins:{"web-map":{read:!1,write:!1}}}};let Kn=class extends Mt(pe){constructor(t){super(t),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}};w([S()],Kn.prototype,"creatorField",void 0),w([S()],Kn.prototype,"creationDateField",void 0),w([S()],Kn.prototype,"editorField",void 0),w([S()],Kn.prototype,"editDateField",void 0),w([S()],Kn.prototype,"realm",void 0),w([S(My("dateFieldsTimeReference",!0))],Kn.prototype,"timeZone",void 0),Kn=w([B("esri.layers.support.EditFieldsInfo")],Kn);const rne=Kn;let fn=class extends Mt(pe){constructor(t){super(t)}};w([S({constructOnly:!0,json:{write:!0}})],fn.prototype,"name",void 0),w([S({constructOnly:!0,json:{write:!0}})],fn.prototype,"fields",void 0),w([S({constructOnly:!0,json:{write:!0}})],fn.prototype,"isAscending",void 0),w([S({constructOnly:!0,json:{write:!0}})],fn.prototype,"indexType",void 0),w([S({constructOnly:!0,json:{write:!0}})],fn.prototype,"isUnique",void 0),w([S({constructOnly:!0,json:{write:!0}})],fn.prototype,"description",void 0),fn=w([B("esri.layers.support.FeatureIndex")],fn);async function sne(e,t,i){t=t.clone(),e.capabilities.query.supportsMaxRecordCountFactor&&(t.maxRecordCountFactor=qP(e));const s=nne(e),u=e.capabilities.query.supportsPagination;t.start=0,t.num=s;let d=null;for(;;){const y=await e.source.queryFeaturesJSON(t,i);if(d==null?d=y:d.features=d.features.concat(y.features),d.exceededTransferLimit=y.exceededTransferLimit,!u||!y.exceededTransferLimit)break;t.start+=s}return d}function nne(e){return qP(e)*one(e)}function one(e){return e.capabilities.query.maxRecordCount||2e3}function qP(e){return e.capabilities.query.supportsMaxRecordCountFactor?Nu.MAX_MAX_RECORD_COUNT_FACTOR:1}var h9;let bi=h9=class extends pe{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new h9(ie({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};w([S({type:[String],json:{write:!0}})],bi.prototype,"attachmentTypes",void 0),w([S({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],bi.prototype,"attachmentsWhere",void 0),w([S({type:Boolean,json:{write:!0}})],bi.prototype,"cacheHint",void 0),w([S({type:[String],json:{write:!0}})],bi.prototype,"keywords",void 0),w([S({type:[Number],json:{write:!0}})],bi.prototype,"globalIds",void 0),w([S({json:{write:!0}})],bi.prototype,"name",void 0),w([S({type:Number,json:{read:{source:"resultRecordCount"}}})],bi.prototype,"num",void 0),w([S({type:[Number],json:{write:!0}})],bi.prototype,"objectIds",void 0),w([S({type:Boolean,json:{default:!1,write:!0}})],bi.prototype,"returnMetadata",void 0),w([S({type:[Number],json:{write:!0}})],bi.prototype,"size",void 0),w([S({type:Number,json:{read:{source:"resultOffset"}}})],bi.prototype,"start",void 0),w([_e("start"),_e("num")],bi.prototype,"writeStart",null),w([S({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],bi.prototype,"where",void 0),bi=h9=w([B("esri.rest.support.AttachmentQuery")],bi),bi.from=ei(bi);const ane=bi;var c9;let Lt=c9=class extends pe{constructor(e){super(e),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(t.definitionExpression="1=1")}clone(){return new c9(ie({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};w([S({type:Boolean,json:{write:!0}})],Lt.prototype,"cacheHint",void 0),w([S({type:Os,json:{write:!0}})],Lt.prototype,"dynamicDataSource",void 0),w([S({type:String,json:{write:!0}})],Lt.prototype,"gdbVersion",void 0),w([S({type:Number,json:{write:!0}})],Lt.prototype,"geometryPrecision",void 0),w([S({type:Date})],Lt.prototype,"historicMoment",void 0),w([_e("historicMoment")],Lt.prototype,"_writeHistoricMoment",null),w([S({type:Number,json:{write:!0}})],Lt.prototype,"maxAllowableOffset",void 0),w([S({type:[Number],json:{write:!0}})],Lt.prototype,"objectIds",void 0),w([S({type:[String],json:{write:!0}})],Lt.prototype,"orderByFields",void 0),w([S({type:[String],json:{write:!0}})],Lt.prototype,"outFields",void 0),w([S({type:He,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Lt.prototype,"outSpatialReference",void 0),w([S({json:{write:!0}})],Lt.prototype,"relationshipId",void 0),w([S({type:Number,json:{read:{source:"resultOffset"}}})],Lt.prototype,"start",void 0),w([_e("start"),_e("num")],Lt.prototype,"writeStart",null),w([S({type:Number,json:{read:{source:"resultRecordCount"}}})],Lt.prototype,"num",void 0),w([S({json:{write:!0}})],Lt.prototype,"returnGeometry",void 0),w([S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Lt.prototype,"returnM",void 0),w([S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Lt.prototype,"returnZ",void 0),w([S({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],Lt.prototype,"where",void 0),Lt=c9=w([B("esri.rest.support.RelationshipQuery")],Lt),Lt.from=ei(Lt);const Y4=Lt,vde=Object.freeze(Object.defineProperty({__proto__:null,default:Y4},Symbol.toStringTag,{value:"Module"})),p9=new et({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function lne(e,t,i,s){const u=await Va(e);if(await X4(e,t,s),!u.addAttachment)throw new ae(s,"Layer source does not support addAttachment capability");return u.addAttachment(t,i)}function X4(e,t,i){var d,y;const{attributes:s}=t,{objectIdField:u}=e;return(y=(d=e.capabilities)==null?void 0:d.data)!=null&&y.supportsAttachment?t?s?u&&s[u]?Promise.resolve():Promise.reject(new ae(i,`feature is missing the identifying attribute ${u}`)):Promise.reject(new ae(i,"'attributes' are required on a feature to query attachments")):Promise.reject(new ae(i,"A feature is required to add/delete/update attachments")):Promise.reject(new ae(i,"this layer doesn't support attachments"))}async function une(e,t,i,s,u){const d=await Va(e);if(await X4(e,t,u),!d.updateAttachment)throw new ae(u,"Layer source does not support updateAttachment capability");return d.updateAttachment(t,i,s)}async function hne(e,t,i){const{applyEdits:s}=await Se(()=>import("./editingSupport-f2d9b1ea.js"),[]),u=await e.load(),{source:d,globalIdField:y}=u;let v=i;return u.type==="feature"&&u.infoFor3D&&t.deleteFeatures!=null&&y!=null&&(v={...v,globalIdToObjectId:await Ine(e,t.deleteFeatures,y)}),s(u,d,t,i)}async function cne(e,t,i){const{uploadAssets:s}=await Se(()=>import("./editingSupport-f2d9b1ea.js"),[]),u=await e.load();return s(u,u.source,t,i)}async function pne(e,t,i,s){const u=await Va(e);if(await X4(e,t,s),!u.deleteAttachments)throw new ae(s,"Layer source does not support deleteAttachments capability");return u.deleteAttachments(t,i)}async function dne(e,t,i){const s=(await e.load({signal:t==null?void 0:t.signal})).source;if(!s.fetchRecomputedExtents)throw new ae(i,"Layer source does not support fetchUpdates capability");return s.fetchRecomputedExtents(t)}async function fne(e,t,i,s){var R,L;t=ane.from(t),await e.load();const u=e.source,d=e.capabilities;if(!((R=d==null?void 0:d.data)!=null&&R.supportsAttachment))throw new ae(s,"this layer doesn't support attachments");const{attachmentTypes:y,objectIds:v,globalIds:_,num:M,size:E,start:O,where:C}=t;if(!((L=d==null?void 0:d.operations)!=null&&L.supportsQueryAttachments)&&((y==null?void 0:y.length)>0||(_==null?void 0:_.length)>0||(E==null?void 0:E.length)>0||M||O||C))throw new ae(s,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",t);if(!(v!=null&&v.length||_!=null&&_.length||C))throw new ae(s,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",t);if(!u.queryAttachments)throw new ae(s,"Layer source does not support queryAttachments capability",t);return u.queryAttachments(t)}async function yne(e,t,i,s){const u=await Va(e);if(!u.queryObjectIds)throw new ae(s,"Layer source does not support queryObjectIds capability");return u.queryObjectIds(Nu.from(t)??e.createQuery(),i)}async function mne(e,t,i,s){const u=await Va(e);if(!u.queryFeatureCount)throw new ae(s,"Layer source does not support queryFeatureCount capability");return u.queryFeatureCount(Nu.from(t)??e.createQuery(),i)}async function gne(e,t,i,s){const u=await Va(e);if(!u.queryExtent)throw new ae(s,"Layer source does not support queryExtent capability");return u.queryExtent(Nu.from(t)??e.createQuery(),i)}async function vne(e,t,i,s){const u=await Va(e);if(!u.queryRelatedFeatures)throw new ae(s,"Layer source does not support queryRelatedFeatures capability");return u.queryRelatedFeatures(Y4.from(t),i)}async function wne(e,t,i,s){const u=await Va(e);if(!u.queryRelatedFeaturesCount)throw new ae(s,"Layer source does not support queryRelatedFeaturesCount capability");return u.queryRelatedFeaturesCount(Y4.from(t),i)}async function bne(e){const t=e.source;if(t!=null&&t.refresh)try{const{dataChanged:i,updates:s}=await t.refresh();if(s!=null&&(e.sourceJSON={...e.sourceJSON,...s},e.read(s,{origin:"service",url:e.parsedUrl})),i)return!0}catch{}if(e.definitionExpression)try{return(await kE(e.definitionExpression,e.fieldsIndex)).hasDateFunctions}catch{}return!1}function _ne(e){var y,v;const t=new Nu,i=(y=e.capabilities)==null?void 0:y.data,s=(v=e.capabilities)==null?void 0:v.query;t.historicMoment=e.historicMoment,t.gdbVersion=e.gdbVersion,t.returnGeometry=!0,s&&(t.compactGeometryEnabled=s.supportsCompactGeometry,t.defaultSpatialReferenceEnabled=s.supportsDefaultSpatialReference),i&&(i.supportsZ&&e.returnZ!=null&&(t.returnZ=e.returnZ),i.supportsM&&e.returnM!=null&&(t.returnM=e.returnM)),t.outFields=["*"];const{timeOffset:u,timeExtent:d}=e;return t.timeExtent=u!=null&&d!=null?d.offset(-u.value,u.unit):d||null,t.multipatchOption=e.geometryType==="multipatch"?"xyFootprint":null,t}function UP(e){const{globalIdField:t,fields:i}=e;if(t)return t;if(i){for(const s of i)if(s.type==="esriFieldTypeGlobalID")return s.name}}function BP(e){const{objectIdField:t,fields:i}=e;if(t)return t;if(i){for(const s of i)if(s.type==="esriFieldTypeOID")return s.name}}function xne(e){return e.currentVersion?e.currentVersion:e.hasOwnProperty("capabilities")||e.hasOwnProperty("drawingInfo")||e.hasOwnProperty("hasAttachments")||e.hasOwnProperty("htmlPopupType")||e.hasOwnProperty("relationships")||e.hasOwnProperty("timeInfo")||e.hasOwnProperty("typeIdField")||e.hasOwnProperty("types")?10:9.3}async function Va(e){return(await e.load()).source}async function Sne(e,t){if(!tt||tt.findCredential(e))return;let i;try{const s=await tE(e,t);s&&(i=await tt.checkSignInStatus(`${s}/sharing`))}catch{}if(i)try{const s=t!=null?t.signal:null;await tt.getCredential(e,{signal:s})}catch{}}async function $ne(e,t,i){var u;const s=(u=e.parsedUrl)==null?void 0:u.path;s&&e.authenticationTriggerEvent===t&&await Sne(s,i)}function Tne(e){var t;return!((t=e.sourceJSON)!=null&&t.isMultiServicesView)&&(e.userHasUpdateItemPrivileges||e.editingEnabled)}const Q2=vc({types:Mk});function Q4(e,t){var i;if(e.defaultSymbol)return(i=e.types)!=null&&i.length?new z4({defaultSymbol:Q2(e.defaultSymbol,e,t),field:e.typeIdField,uniqueValueInfos:e.types.map(s=>({id:s.id,symbol:Q2(s.symbol,s,t)}))}):new lg({symbol:Q2(e.defaultSymbol,e,t)})}function Mne(e){var s,u,d;let t=(s=e.sourceJSON)==null?void 0:s.cacheMaxAge;if(!t)return!1;const i=(d=(u=e.editingInfo)==null?void 0:u.lastEditDate)==null?void 0:d.getTime();return i==null||(t*=1e3,Date.now()-i<t)}async function Ine(e,t,i){if(t==null)return null;const s=[],{objectIdField:u}=e;if(t.forEach(M=>{let E=null;if("attributes"in M){const{attributes:O}=M;E={globalId:O[i],objectId:O[u]!=null&&O[u]!==-1?O[u]:null}}else E={globalId:M.globalId,objectId:M.objectId!=null&&M.objectId!==-1?M.objectId:null};E.globalId!=null&&(E.objectId!=null&&E.objectId!==-1||s.push(E.globalId))}),s.length===0)return null;const d=e.createQuery();d.where=s.map(M=>`${i}='${M}'`).join(" OR "),d.returnGeometry=!1,d.outFields=[u,i],d.cacheHint=!1;const y=await XF(sne(e,d));if(!y.ok)return null;const v=new Map,_=y.value.features;for(const M of _){const E=M.attributes[i],O=M.attributes[u];E!=null&&O!=null&&O!==-1&&v.set(E,O)}return v}let Ih=class extends Mt(pe){constructor(t){super(t),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};w([S({type:String,json:{read:{source:"shapeAreaFieldName"}}})],Ih.prototype,"shapeAreaField",void 0),w([S({type:String,json:{read:{source:"shapeLengthFieldName"}}})],Ih.prototype,"shapeLengthField",void 0),w([S({type:String,json:{read:e=>JD.read(e)||KD.read(e)}})],Ih.prototype,"units",void 0),Ih=w([B("esri.layers.support.GeometryFieldsInfo")],Ih);const Ene=Ih;var d9;let Eh=d9=class extends pe{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new Oe}clone(){return new d9({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};w([S({type:String,json:{write:!0}})],Eh.prototype,"floorField",void 0),w([S({json:{read:!1,write:!1}})],Eh.prototype,"viewAllMode",void 0),w([S({json:{read:!1,write:!1}})],Eh.prototype,"viewAllLevelIds",void 0),Eh=d9=w([B("esri.layers.support.LayerFloorInfo")],Eh);const kne=Eh,D8=new et({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),F8=new et({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let Jr=class extends Mt(pe){constructor(t){super(t),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};w([S({json:{read:D8.read,write:D8.write}})],Jr.prototype,"cardinality",void 0),w([S({json:{read:!0,write:!0}})],Jr.prototype,"composite",void 0),w([S({json:{read:!0,write:!0}})],Jr.prototype,"id",void 0),w([S({json:{read:!0,write:!0}})],Jr.prototype,"keyField",void 0),w([S({json:{read:!0,write:!0}})],Jr.prototype,"keyFieldInRelationshipTable",void 0),w([S({json:{read:!0,write:!0}})],Jr.prototype,"name",void 0),w([S({json:{read:!0,write:!0}})],Jr.prototype,"relatedTableId",void 0),w([S({json:{read:!0,write:!0}})],Jr.prototype,"relationshipTableId",void 0),w([S({json:{read:F8.read,write:F8.write}})],Jr.prototype,"role",void 0),Jr=w([B("esri.layers.support.Relationship")],Jr);const Ane=Jr;function De(e,t,i){return!!HP(e,t,i)}function W0(e,t,i){return HP(e,t,i)}function HP(e,t,i){return e&&e.hasOwnProperty(t)?e[t]:i}const One={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function Pne(e){var i;const t=(i=e==null?void 0:e.supportedSpatialAggregationStatistics)==null?void 0:i.map(s=>s.toLowerCase());return{envelope:!!(t!=null&&t.includes("envelopeaggregate")),centroid:!!(t!=null&&t.includes("centroidaggregate")),convexHull:!!(t!=null&&t.includes("convexhullaggregate"))}}function xd(e,t){var s;const i=(s=e==null?void 0:e.supportedOperationsWithCacheHint)==null?void 0:s.map(u=>u.toLowerCase());return!!(i!=null&&i.includes(t.toLowerCase()))}function WP(e,t){return{analytics:Cne(e),attachment:jne(e),data:Nne(e),metadata:Rne(e),operations:Lne(e.capabilities,e,t),query:Dne(e,t),queryRelated:Fne(e),queryTopFeatures:zne(e),editing:Vne(e)}}function Cne(e){return{supportsCacheHint:xd(e.advancedQueryCapabilities,"queryAnalytics")}}function jne(e){const t=e.attachmentProperties,i={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:xd(e.advancedQueryCapabilities,"queryAttachments"),supportsResize:De(e,"supportsAttachmentsResizing",!1)};return t&&Array.isArray(t)&&t.forEach(s=>{const u=One[s.name];u&&(i[u]=!!s.isEnabled)}),i}function Nne(e){return{isVersioned:De(e,"isDataVersioned",!1),supportsAttachment:De(e,"hasAttachments",!1),supportsM:De(e,"hasM",!1),supportsZ:De(e,"hasZ",!1)}}function Rne(e){return{supportsAdvancedFieldProperties:De(e,"supportsFieldDescriptionProperty",!1)}}function Lne(e,t,i){const s=e?e.toLowerCase().split(",").map(C=>C.trim()):[],u=i?kc(i):null,d=s.includes(u!=null&&u.serverType==="MapServer"?"data":"query"),y=s.includes("editing")&&!t.datesInUnknownTimezone;let v=y&&s.includes("create"),_=y&&s.includes("delete"),M=y&&s.includes("update");const E=s.includes("changetracking"),O=t.advancedQueryCapabilities;return y&&!(v||_||M)&&(v=_=M=!0),{supportsCalculate:De(t,"supportsCalculate",!1),supportsTruncate:De(t,"supportsTruncate",!1),supportsValidateSql:De(t,"supportsValidateSql",!1),supportsAdd:v,supportsDelete:_,supportsEditing:y,supportsChangeTracking:E,supportsQuery:d,supportsQueryAnalytics:De(O,"supportsQueryAnalytic",!1),supportsQueryAttachments:De(O,"supportsQueryAttachments",!1),supportsQueryTopFeatures:De(O,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:De(t,"supportsAttachmentsResizing",!1),supportsSync:s.includes("sync"),supportsUpdate:M,supportsExceedsLimitStatistics:De(t,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:De(t,"supportsAsyncConvert3D",!1)}}function Dne(e,t){const i=e.advancedQueryCapabilities,s=e.ownershipBasedAccessControlForFeatures,u=e.archivingInfo,d=e.currentVersion,y=t==null?void 0:t.includes("MapServer"),v=!y||d>=oe("mapserver-pbf-version-support"),_=zk(t),M=new Set((e.supportedQueryFormats??"").split(",").map(E=>E.toLowerCase().trim()));return{supportsStatistics:De(i,"supportsStatistics",e.supportsStatistics),supportsPercentileStatistics:De(i,"supportsPercentileStatistics",!1),supportsSpatialAggregationStatistics:De(i,"supportsSpatialAggregationStatistics",!1),supportedSpatialAggregationStatistics:Pne(i),supportsCentroid:De(i,"supportsReturningGeometryCentroid",!1),supportsDistance:De(i,"supportsQueryWithDistance",!1),supportsDistinct:De(i,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:De(i,"supportsReturningQueryExtent",!1),supportsGeometryProperties:De(i,"supportsReturningGeometryProperties",!1),supportsHavingClause:De(i,"supportsHavingClause",!1),supportsOrderBy:De(i,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:De(i,"supportsPagination",!1),supportsQuantization:De(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:De(e,"supportsQuantizationEditMode",!1),supportsQueryGeometry:De(e,"supportsReturningQueryGeometry",!1),supportsResultType:De(i,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:De(i,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:De(i,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:De(e,"useStandardizedQueries",!1),supportsTopFeaturesQuery:De(i,"supportsTopFeaturesQuery",!1),supportsQueryByAnonymous:De(s,"allowAnonymousToQuery",!0),supportsQueryByOthers:De(s,"allowOthersToQuery",!0),supportsHistoricMoment:De(u,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:v&&M.has("pbf"),supportsDisjointSpatialRelationship:De(i,"supportsDisjointSpatialRel",!1),supportsCacheHint:De(i,"supportsQueryWithCacheHint",!1)||xd(i,"query"),supportsDefaultSpatialReference:De(i,"supportsDefaultSR",!1),supportsCompactGeometry:_,supportsFullTextSearch:De(i,"supportsFullTextSearch",!1),maxRecordCountFactor:W0(e,"maxRecordCountFactor",void 0),maxRecordCount:W0(e,"maxRecordCount",void 0),standardMaxRecordCount:W0(e,"standardMaxRecordCount",void 0),tileMaxRecordCount:W0(e,"tileMaxRecordCount",void 0)}}function Fne(e){const t=e.advancedQueryCapabilities,i=De(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:De(t,"supportsQueryRelatedPagination",!1),supportsCount:i,supportsOrderBy:i,supportsCacheHint:xd(t,"queryRelated")}}function zne(e){return{supportsCacheHint:xd(e.advancedQueryCapabilities,"queryTopFilter")}}function Vne(e){const t=e.ownershipBasedAccessControlForFeatures,i=e?e.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:De(e,"allowGeometryUpdates",!0),supportsGlobalId:De(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:De(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:De(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:De(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:De(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:De(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:De(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:De(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:De(t,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:De(i,"supportsAsyncApplyEdits",!1),zDefault:W0(e,"zDefault",void 0)}}let Zn=class extends Mt(pe){constructor(t){super(t),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(t){if(!t)return null;const i={};for(const s of Object.keys(t))i[s]=cg(t[s]);return i}writeDomains(t,i){var u;if(!t)return;const s={};for(const d of Object.keys(t))t[d]&&(s[d]=(u=t[d])==null?void 0:u.toJSON());i.domains=s}};w([S({type:Number,json:{write:!0}})],Zn.prototype,"code",void 0),w([S({type:Object,json:{write:!0}})],Zn.prototype,"defaultValues",void 0),w([S({json:{write:!0}})],Zn.prototype,"domains",void 0),w([me("domains")],Zn.prototype,"readDomains",null),w([_e("domains")],Zn.prototype,"writeDomains",null),w([S({type:String,json:{write:!0}})],Zn.prototype,"name",void 0),Zn=w([B("esri.layers.support.Subtype")],Zn);const Gne=Zn,qne=e=>{let t=class extends e{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(Oe.ofType(fn)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=He.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.version=void 0}get authenticationTriggerEvent(){if(!this.url)return null;const{capabilities:i}=this;if(i){const{query:s,operations:u,editing:d}=i;if(!s.supportsQueryByOthers||!s.supportsQueryByAnonymous||u.supportsEditing&&!(d.supportsUpdateByOthers&&d.supportsUpdateByAnonymous&&d.supportsDeleteByOthers&&d.supportsDeleteByAnonymous))return"load"}return this.userHasUpdateItemPrivileges?Mne(this)?"load":this.hasUpdateItemRestrictions?i.operations.supportsQuery?"editing":"load":null:this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions?"editing":null}readCapabilitiesFromService(i,s){return WP(s,this.url)}readEditingInfo(i,s){const{editingInfo:u}=s;return u?{lastEditDate:u.lastEditDate!=null?new Date(u.lastEditDate):null}:null}get effectiveCapabilities(){var y;const i=this.capabilities;if(!i)return null;const s=ie(i),{operations:u,editing:d}=s;return(y=this.sourceJSON)!=null&&y.isMultiServicesView?(this.userHasUpdateItemPrivileges&&(u.supportsQuery=!0),s):this.userHasUpdateItemPrivileges?(u.supportsAdd=u.supportsDelete=u.supportsEditing=u.supportsQuery=u.supportsUpdate=d.supportsDeleteByOthers=d.supportsGeometryUpdate=d.supportsUpdateByOthers=!0,s):(this.userHasFullEditingPrivileges&&u.supportsEditing&&(u.supportsAdd=u.supportsDelete=u.supportsUpdate=d.supportsGeometryUpdate=!0),s)}readGlobalIdFieldFromService(i,s){return UP(s)}get hasFullEditingRestrictions(){var d;const i=this.capabilities;if(!i||(d=this.sourceJSON)!=null&&d.isMultiServicesView)return!1;const{operations:s,editing:u}=i;return s.supportsEditing&&!(s.supportsAdd&&s.supportsDelete&&s.supportsUpdate&&u.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){var d;const i=this.capabilities;if(!i)return!1;const{operations:s,editing:u}=i;return(d=this.sourceJSON)!=null&&d.isMultiServicesView?!s.supportsQuery:!(s.supportsAdd&&s.supportsDelete&&s.supportsEditing&&s.supportsQuery&&s.supportsUpdate&&u.supportsDeleteByOthers&&u.supportsGeometryUpdate&&u.supportsUpdateByOthers)}readIsTableFromService(i,s){return s.type==="Table"}readMaxScale(i,s){return s.effectiveMaxScale||i||0}readMinScale(i,s){return s.effectiveMinScale||i||0}readObjectIdFieldFromService(i,s){return BP(s)}readServiceDefinitionExpression(i,s){return s.definitionQuery||s.definitionExpression}set url(i){const s=BK({layer:this,url:i,nonStandardUrlAllowed:!0,logger:de.getLogger(this)});this._set("url",s.url),s.layerId!=null&&this._set("layerId",s.layerId)}writeUrl(i,s,u,d){HK(this,i,null,s,d)}readVersion(i,s){return xne(s)}};return w([S({readOnly:!0})],t.prototype,"authenticationTriggerEvent",null),w([S({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],t.prototype,"copyright",void 0),w([S({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],t.prototype,"capabilities",void 0),w([me("service","capabilities")],t.prototype,"readCapabilitiesFromService",null),w([S(My("dateFieldsTimeReference"))],t.prototype,"dateFieldsTimeZone",void 0),w([S({type:Boolean})],t.prototype,"datesInUnknownTimezone",void 0),w([S({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],t.prototype,"definitionExpression",void 0),w([S({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],t.prototype,"displayField",void 0),w([S({readOnly:!0,type:rne})],t.prototype,"editFieldsInfo",void 0),w([S({readOnly:!0})],t.prototype,"editingInfo",void 0),w([me("editingInfo")],t.prototype,"readEditingInfo",null),w([S({readOnly:!0})],t.prototype,"effectiveCapabilities",null),w([S((()=>{const i=ie(Xse),s=i.json.origins;return s["web-map"]={read:!1,write:!1},s["portal-item"]={read:!1,write:!1},i})())],t.prototype,"elevationInfo",void 0),w([S({type:kne,json:{name:"layerDefinition.floorInfo",write:!0,origins:{"web-scene":{name:"layerDefinition.floorInfo",write:{enabled:!0,layerContainerTypes:Wi}}}}})],t.prototype,"floorInfo",void 0),w([S({type:Tt,json:{origins:{service:{read:{source:"extent"}}}}})],t.prototype,"fullExtent",void 0),w([S()],t.prototype,"gdbVersion",void 0),w([S({readOnly:!0,type:Ene,json:{read:{source:"geometryProperties"}}})],t.prototype,"geometryFieldsInfo",void 0),w([S({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:p9.read}}}})],t.prototype,"geometryType",void 0),w([S({type:String})],t.prototype,"globalIdField",void 0),w([me("service","globalIdField",["globalIdField","fields"])],t.prototype,"readGlobalIdFieldFromService",null),w([S({readOnly:!0})],t.prototype,"hasFullEditingRestrictions",null),w([S({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasM",void 0),w([S({readOnly:!0})],t.prototype,"hasUpdateItemRestrictions",null),w([S({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasZ",void 0),w([S({readOnly:!0,type:qm})],t.prototype,"heightModelInfo",void 0),w([S({type:Date})],t.prototype,"historicMoment",void 0),w([S({type:Oe.ofType(fn),readOnly:!0})],t.prototype,"indexes",void 0),w([S({readOnly:!0})],t.prototype,"isTable",void 0),w([me("service","isTable",["type"])],t.prototype,"readIsTableFromService",null),w([S({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],t.prototype,"layerId",void 0),w([S(ine)],t.prototype,"maxScale",void 0),w([me("service","maxScale",["maxScale","effectiveMaxScale"])],t.prototype,"readMaxScale",null),w([S(tne)],t.prototype,"minScale",void 0),w([me("service","minScale",["minScale","effectiveMinScale"])],t.prototype,"readMinScale",null),w([S({type:String})],t.prototype,"objectIdField",void 0),w([me("service","objectIdField",["objectIdField","fields"])],t.prototype,"readObjectIdFieldFromService",null),w([S(My("preferredTimeReference"))],t.prototype,"preferredTimeZone",void 0),w([S({type:[Ane],readOnly:!0})],t.prototype,"relationships",void 0),w([S({type:Boolean})],t.prototype,"returnM",void 0),w([S({type:Boolean})],t.prototype,"returnZ",void 0),w([S({readOnly:!0,json:{write:!1}})],t.prototype,"serverGens",void 0),w([S({readOnly:!0})],t.prototype,"serviceDefinitionExpression",void 0),w([me("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],t.prototype,"readServiceDefinitionExpression",null),w([S({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],t.prototype,"serviceItemId",void 0),w([S()],t.prototype,"sourceJSON",void 0),w([S({type:He,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],t.prototype,"spatialReference",void 0),w([S({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],t.prototype,"subtypeField",void 0),w([S({type:[Gne],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],t.prototype,"subtypes",void 0),w([S({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],t.prototype,"trackIdField",void 0),w([S(Zse)],t.prototype,"url",null),w([_e("url")],t.prototype,"writeUrl",null),w([S({json:{origins:{service:{read:!0}},read:!1}})],t.prototype,"version",void 0),w([me("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],t.prototype,"readVersion",null),t=w([B("esri.layers.mixins.FeatureLayerBase")],t),t};let kh=class extends Mt(pe){constructor(t){super(t),this.expression=null,this.title=null,this.returnType=null}};w([S({type:String,json:{write:!0}})],kh.prototype,"expression",void 0),w([S({type:String,json:{write:!0}})],kh.prototype,"title",void 0),w([S({type:String,json:{write:!0}})],kh.prototype,"returnType",void 0),kh=w([B("esri.layers.support.ExpressionInfo")],kh);const e6=kh;var f9;let Yn=f9=class extends pe{constructor(e){super(e),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new f9({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:ie(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}};w([S({type:Boolean,json:{write:!0}})],Yn.prototype,"isAutoGenerated",void 0),w([S({type:String,json:{write:!0}})],Yn.prototype,"name",void 0),w([S({type:String,json:{write:!0}})],Yn.prototype,"alias",void 0),w([S({type:String,json:{write:!0}})],Yn.prototype,"onStatisticField",void 0),w([S({type:e6,json:{write:!0}})],Yn.prototype,"onStatisticExpression",void 0),w([S({type:String,json:{write:!0}})],Yn.prototype,"statisticType",void 0),Yn=f9=w([B("esri.layers.support.AggregateField")],Yn);const $u=Yn;let _a=class extends pe{constructor(){super(...arguments),this.type=null}};w([S({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],_a.prototype,"type",void 0),_a=w([B("esri.layers.support.FeatureReduction")],_a);const t6="__begin__",i6="__end__",Une=new RegExp(t6,"ig"),Bne=new RegExp(i6,"ig"),z8=new RegExp("^"+t6,"i"),V8=new RegExp(i6+"$","i"),sm='"',Hne=sm+" + ",Wne=" + "+sm;function Jne(e){return e.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function Kne(e){return e.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function r6(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):e.labelExpression!=null&&(t.expression=Jne(e.labelExpression),t.type="conventional"),t}function Zne(e){const t=r6(e);if(!t)return null;switch(t.type){case"conventional":return y9(t.expression);case"arcade":return t.expression}return null}function Yne(e){const t=r6(e);if(!t)return null;switch(t.type){case"conventional":return Qne(t.expression);case"arcade":return JP(t.expression)}return null}function y9(e){let t;return e?(t=hm(e,i=>t6+'$feature["'+i+'"]'+i6),t=z8.test(t)?t.replace(z8,""):sm+t,t=V8.test(t)?t.replace(V8,""):t+sm,t=t.replaceAll(Une,Hne).replaceAll(Bne,Wne)):t='""',t}const Xne=/^\s*\{([^}]+)\}\s*$/i;function Qne(e){const t=e==null?void 0:e.match(Xne);return(t==null?void 0:t[1].trim())||null}const eoe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,toe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,ioe=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function JP(e){if(!e)return null;let t=eoe.exec(e)||toe.exec(e);return t?t[1]||t[3]:(t=ioe.exec(e),t?t[2]:null)}var m9;let ea=m9=class extends pe{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,t){return t.value?y9(t.value):e}writeExpression(e,t,i){this.value!=null&&(e=y9(this.value)),e!=null&&(t[i]=e)}clone(){return new m9({expression:this.expression,title:this.title,value:this.value})}};w([S({type:String,json:{write:{writerEnsuresNonNull:!0}}})],ea.prototype,"expression",void 0),w([me("expression",["expression","value"])],ea.prototype,"readExpression",null),w([_e("expression")],ea.prototype,"writeExpression",null),w([S({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],ea.prototype,"title",void 0),w([S({json:{read:!1,write:!1}})],ea.prototype,"value",void 0),ea=m9=w([B("esri.layers.support.LabelExpressionInfo")],ea);const KP=ea,ZP=[252,146,31,255],roe={type:"esriSMS",style:"esriSMSCircle",size:6,color:ZP,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},soe={type:"esriSLS",style:"esriSLSSolid",width:.75,color:ZP},noe={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},ooe={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},aoe={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},loe={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},uoe={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},$de=za.fromJSON(roe),Tde=ns.fromJSON(soe),Mde=Cu.fromJSON(noe),hoe=Ec.fromJSON(ooe),Ide=za.fromJSON(aoe),Ede=ns.fromJSON(loe),kde=Cu.fromJSON(uoe);var g9;const If=new et({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function Ef(e,t,i){return{enabled:!eE(i==null?void 0:i.layer)}}function YP(e){var t;return!e||e.origin!=="service"&&((t=e.layer)==null?void 0:t.type)!=="map-image"}function coe(e){return(e==null?void 0:e.type)==="map-image"}function XP(e){var t,i;return!!coe(e)&&!!((i=(t=e.capabilities)==null?void 0:t.exportMap)!=null&&i.supportsArcadeExpressionForLabeling)}function poe(e){return YP(e)||XP(e==null?void 0:e.layer)}let Wt=g9=class extends pe{static evaluateWhere(e,t){const i=(s,u,d)=>{switch(u){case"=":return s==d;case"<>":return s!=d;case">":return s>d;case">=":return s>=d;case"<":return s<d;case"<=":return s<=d}return!1};try{if(e==null)return!0;const s=e.split(" ");if(s.length===3)return i(t[s[0]],s[1],s[2]);if(s.length===7){const u=i(t[s[0]],s[1],s[2]),d=s[3],y=i(t[s[4]],s[5],s[6]);switch(d){case"AND":return u&&y;case"OR":return u||y}}return!1}catch{console.log("Error.: can't parse = "+e)}}constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=hoe,this.useCodedValues=void 0,this.where=null}readLabelExpression(e,t){const i=t.labelExpressionInfo;if(!i||!i.value&&!i.expression)return e}writeLabelExpression(e,t,i){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)e=Kne(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const s=JP(this.labelExpressionInfo.expression);s&&(e="["+s+"]")}}e!=null&&(t[i]=e)}writeLabelExpressionInfo(e,t,i,s){if(e==null&&this.labelExpression!=null&&YP(s))e=new KP({expression:this.getLabelExpressionArcade()});else if(!e)return;const u=e.toJSON(s);u.expression&&(t[i]=u)}writeMaxScale(e,t){(e||this.minScale)&&(t.maxScale=e)}writeMinScale(e,t){(e||this.maxScale)&&(t.minScale=e)}getLabelExpression(){return r6(this)}getLabelExpressionArcade(){return Zne(this)}getLabelExpressionSingleField(){return Yne(this)}hash(){return JSON.stringify(this)}clone(){return new g9({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:ie(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:ie(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};w([S({type:String,json:{write:!0}})],Wt.prototype,"name",void 0),w([S({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:Ef}}}}})],Wt.prototype,"allowOverrun",void 0),w([S({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:Ef}}}}})],Wt.prototype,"deconflictionStrategy",void 0),w([S({type:String,json:{write:{overridePolicy(e,t,i){return this.labelExpressionInfo&&(i==null?void 0:i.origin)==="service"&&XP(i.layer)?{enabled:!1}:{allowNull:!0}}}}})],Wt.prototype,"labelExpression",void 0),w([me("labelExpression")],Wt.prototype,"readLabelExpression",null),w([_e("labelExpression")],Wt.prototype,"writeLabelExpression",null),w([S({type:KP,json:{write:{overridePolicy:(e,t,i)=>poe(i)?{allowNull:!0}:{enabled:!1}}}})],Wt.prototype,"labelExpressionInfo",void 0),w([_e("labelExpressionInfo")],Wt.prototype,"writeLabelExpressionInfo",null),w([S({type:If.apiValues,json:{type:If.jsonValues,read:If.read,write:If.write}})],Wt.prototype,"labelPlacement",void 0),w([S({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],Wt.prototype,"labelPosition",void 0),w([S({type:Number})],Wt.prototype,"maxScale",void 0),w([_e("maxScale")],Wt.prototype,"writeMaxScale",null),w([S({type:Number})],Wt.prototype,"minScale",void 0),w([_e("minScale")],Wt.prototype,"writeMinScale",null),w([S({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:Ef}}}}})],Wt.prototype,"repeatLabel",void 0),w([S({type:Number,cast:ot,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:Ef}}}}})],Wt.prototype,"repeatLabelDistance",void 0),w([S({types:xK,json:{origins:{"web-scene":{types:SK,write:t8,default:null}},write:t8,default:null}})],Wt.prototype,"symbol",void 0),w([S({type:Boolean,json:{write:!0}})],Wt.prototype,"useCodedValues",void 0),w([S({type:String,json:{write:!0}})],Wt.prototype,"where",void 0),Wt=g9=w([B("esri.layers.support.LabelClass")],Wt);const dg=Wt;var v9;const doe="esri.layers.support.FeatureReductionBinning";let Qi=v9=class extends _a{constructor(e){super(e),this.type="binning",this.binType="geohash",this.fixedBinLevel=3,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.fields=[],this.renderer=null}writeFields(e,t,i){const s=e.filter(u=>u.statisticType!=="avg_angle").map(u=>u.toJSON());Hi(i,s,t)}readRenderer(e,t,i){var u;const s=(u=t.drawingInfo)==null?void 0:u.renderer;return s?Jp(s,t,i)??void 0:Q4(t,i)}clone(){return new v9({fields:ie(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:ie(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:ie(this.popupTemplate),renderer:ie(this.renderer)})}};w([Ae({binning:"binning"})],Qi.prototype,"type",void 0),w([Ae({geohash:"geohash"})],Qi.prototype,"binType",void 0),w([S({type:Number,range:{min:1,max:9},json:{write:!0}})],Qi.prototype,"fixedBinLevel",void 0),w([S({type:[dg],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Qi.prototype,"labelingInfo",void 0),w([S(Z4)],Qi.prototype,"labelsVisible",void 0),w([S({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],Qi.prototype,"maxScale",void 0),w([S(K4)],Qi.prototype,"popupEnabled",void 0),w([S({type:ld,json:{name:"popupInfo",write:!0}})],Qi.prototype,"popupTemplate",void 0),w([S({type:[$u],json:{write:!0}})],Qi.prototype,"fields",void 0),w([_e("fields")],Qi.prototype,"writeFields",null),w([S({types:ug,json:{write:{target:"drawingInfo.renderer"}}})],Qi.prototype,"renderer",void 0),w([me("renderer",["drawingInfo.renderer"])],Qi.prototype,"readRenderer",null),Qi=v9=w([B(doe)],Qi);const QP=Qi;var w9;const foe="esri.layers.support.FeatureReductionCluster";function G8(e){var t;return e.type==="simple"&&!((t=e.visualVariables)!=null&&t.length)}let ai=w9=class extends pe{constructor(e){super(e),this.type="cluster",this.clusterRadius=ot("80px"),this.clusterMinSize=ot("12px"),this.clusterMaxSize=ot("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=null}readRenderer(e,t,i){var u,d;const s=(u=t.drawingInfo)==null?void 0:u.renderer;return(d=s==null?void 0:s.authoringInfo)!=null&&d.isAutoGenerated?null:s?G8(s)?null:Jp(s,t,i)??void 0:Q4(t,i)}readSymbol(e,t,i){var u,d;const s=(u=t.drawingInfo)==null?void 0:u.renderer;if((d=s==null?void 0:s.authoringInfo)!=null&&d.isAutoGenerated)return null;if(s&&G8(s)){const y=Jp(s,t,i);return y==null?void 0:y.symbol}return null}writeSymbol(e,t,i,s){var d,y;const u=(y=(d=this.renderer)==null?void 0:d.authoringInfo)==null?void 0:y.isAutoGenerated;if(!this.renderer||u){const v=new lg({symbol:e});t.drawingInfo={renderer:v.write({},s)}}}writeFields(e,t,i){const s=e.filter(u=>u.statisticType!=="avg_angle").map(u=>u.toJSON());Hi(i,s,t)}readFields(e,t,i){return e.filter(s=>!s.isAutoGenerated).map(s=>$u.fromJSON(s))}clone(){return new w9({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:ie(this.labelingInfo),labelsVisible:this.labelsVisible,fields:ie(this.fields),maxScale:this.maxScale,renderer:ie(this.renderer),symbol:ie(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:ie(this.popupTemplate)})}};w([S({type:["cluster"],readOnly:!0,json:{write:!0}})],ai.prototype,"type",void 0),w([S({type:Number,cast:e=>e==="auto"?e:ot(e),json:{write:!0}})],ai.prototype,"clusterRadius",void 0),w([S({type:Number,cast:ot,json:{write:!0}})],ai.prototype,"clusterMinSize",void 0),w([S({type:Number,cast:ot,json:{write:!0}})],ai.prototype,"clusterMaxSize",void 0),w([S({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],ai.prototype,"maxScale",void 0),w([S(K4)],ai.prototype,"popupEnabled",void 0),w([S({type:ld,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],ai.prototype,"popupTemplate",void 0),w([S({types:ug,json:{write:{target:"drawingInfo.renderer"}}})],ai.prototype,"renderer",void 0),w([me("renderer",["drawingInfo.renderer"])],ai.prototype,"readRenderer",null),w([S({types:bK})],ai.prototype,"symbol",void 0),w([me("symbol",["drawingInfo.renderer"])],ai.prototype,"readSymbol",null),w([_e("symbol")],ai.prototype,"writeSymbol",null),w([S({type:[dg],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],ai.prototype,"labelingInfo",void 0),w([S(Z4)],ai.prototype,"labelsVisible",void 0),w([S({type:[$u],json:{write:!0}})],ai.prototype,"fields",void 0),w([_e("fields")],ai.prototype,"writeFields",null),w([me("fields")],ai.prototype,"readFields",null),ai=w9=w([B(foe)],ai);const eC=ai;var b9;let q1=b9=class extends _a{constructor(e){super(e),this.type="selection"}clone(){return new b9}};w([S({type:["selection"]})],q1.prototype,"type",void 0),q1=b9=w([B("esri.layers.support.FeatureReductionSelection")],q1);const q8=q1,U8={key:"type",base:_a,typeMap:{cluster:eC,binning:QP}},yoe={types:{key:"type",base:_a,typeMap:{selection:q8,cluster:eC,binning:QP}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:U8},"portal-item":{types:U8},"web-scene":{types:{key:"type",base:_a,typeMap:{selection:q8}},name:"layerDefinition.featureReduction",write:{layerContainerTypes:Wi}}}}},Ku={Base64:0,Hex:1,String:2,Raw:3},ec=8,tC=(1<<ec)-1;function ga(e,t){const i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function moe(e){const t=[];for(let i=0,s=e.length*ec;i<s;i+=ec)t[i>>5]|=(e.charCodeAt(i/ec)&tC)<<i%32;return t}function goe(e){const t=[];for(let i=0,s=32*e.length;i<s;i+=ec)t.push(String.fromCharCode(e[i>>5]>>>i%32&tC));return t.join("")}function voe(e){const t="0123456789abcdef",i=[];for(let s=0,u=4*e.length;s<u;s++)i.push(t.charAt(e[s>>2]>>s%4*8+4&15)+t.charAt(e[s>>2]>>s%4*8&15));return i.join("")}function woe(e){const t="=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=[];for(let u=0,d=4*e.length;u<d;u+=3){const y=(e[u>>2]>>u%4*8&255)<<16|(e[u+1>>2]>>(u+1)%4*8&255)<<8|e[u+2>>2]>>(u+2)%4*8&255;for(let v=0;v<4;v++)8*u+6*v>32*e.length?s.push(t):s.push(i.charAt(y>>6*(3-v)&63))}return s.join("")}function boe(e,t){return e<<t|e>>>32-t}function fg(e,t,i,s,u,d){return ga(boe(ga(ga(t,e),ga(s,d)),u),i)}function ji(e,t,i,s,u,d,y){return fg(t&i|~t&s,e,t,u,d,y)}function Ni(e,t,i,s,u,d,y){return fg(t&s|i&~s,e,t,u,d,y)}function Ri(e,t,i,s,u,d,y){return fg(t^i^s,e,t,u,d,y)}function Li(e,t,i,s,u,d,y){return fg(i^(t|~s),e,t,u,d,y)}function _oe(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;let i=1732584193,s=-271733879,u=-1732584194,d=271733878;for(let y=0;y<e.length;y+=16){const v=i,_=s,M=u,E=d;i=ji(i,s,u,d,e[y],7,-680876936),d=ji(d,i,s,u,e[y+1],12,-389564586),u=ji(u,d,i,s,e[y+2],17,606105819),s=ji(s,u,d,i,e[y+3],22,-1044525330),i=ji(i,s,u,d,e[y+4],7,-176418897),d=ji(d,i,s,u,e[y+5],12,1200080426),u=ji(u,d,i,s,e[y+6],17,-1473231341),s=ji(s,u,d,i,e[y+7],22,-45705983),i=ji(i,s,u,d,e[y+8],7,1770035416),d=ji(d,i,s,u,e[y+9],12,-1958414417),u=ji(u,d,i,s,e[y+10],17,-42063),s=ji(s,u,d,i,e[y+11],22,-1990404162),i=ji(i,s,u,d,e[y+12],7,1804603682),d=ji(d,i,s,u,e[y+13],12,-40341101),u=ji(u,d,i,s,e[y+14],17,-1502002290),s=ji(s,u,d,i,e[y+15],22,1236535329),i=Ni(i,s,u,d,e[y+1],5,-165796510),d=Ni(d,i,s,u,e[y+6],9,-1069501632),u=Ni(u,d,i,s,e[y+11],14,643717713),s=Ni(s,u,d,i,e[y],20,-373897302),i=Ni(i,s,u,d,e[y+5],5,-701558691),d=Ni(d,i,s,u,e[y+10],9,38016083),u=Ni(u,d,i,s,e[y+15],14,-660478335),s=Ni(s,u,d,i,e[y+4],20,-405537848),i=Ni(i,s,u,d,e[y+9],5,568446438),d=Ni(d,i,s,u,e[y+14],9,-1019803690),u=Ni(u,d,i,s,e[y+3],14,-187363961),s=Ni(s,u,d,i,e[y+8],20,1163531501),i=Ni(i,s,u,d,e[y+13],5,-1444681467),d=Ni(d,i,s,u,e[y+2],9,-51403784),u=Ni(u,d,i,s,e[y+7],14,1735328473),s=Ni(s,u,d,i,e[y+12],20,-1926607734),i=Ri(i,s,u,d,e[y+5],4,-378558),d=Ri(d,i,s,u,e[y+8],11,-2022574463),u=Ri(u,d,i,s,e[y+11],16,1839030562),s=Ri(s,u,d,i,e[y+14],23,-35309556),i=Ri(i,s,u,d,e[y+1],4,-1530992060),d=Ri(d,i,s,u,e[y+4],11,1272893353),u=Ri(u,d,i,s,e[y+7],16,-155497632),s=Ri(s,u,d,i,e[y+10],23,-1094730640),i=Ri(i,s,u,d,e[y+13],4,681279174),d=Ri(d,i,s,u,e[y],11,-358537222),u=Ri(u,d,i,s,e[y+3],16,-722521979),s=Ri(s,u,d,i,e[y+6],23,76029189),i=Ri(i,s,u,d,e[y+9],4,-640364487),d=Ri(d,i,s,u,e[y+12],11,-421815835),u=Ri(u,d,i,s,e[y+15],16,530742520),s=Ri(s,u,d,i,e[y+2],23,-995338651),i=Li(i,s,u,d,e[y],6,-198630844),d=Li(d,i,s,u,e[y+7],10,1126891415),u=Li(u,d,i,s,e[y+14],15,-1416354905),s=Li(s,u,d,i,e[y+5],21,-57434055),i=Li(i,s,u,d,e[y+12],6,1700485571),d=Li(d,i,s,u,e[y+3],10,-1894986606),u=Li(u,d,i,s,e[y+10],15,-1051523),s=Li(s,u,d,i,e[y+1],21,-2054922799),i=Li(i,s,u,d,e[y+8],6,1873313359),d=Li(d,i,s,u,e[y+15],10,-30611744),u=Li(u,d,i,s,e[y+6],15,-1560198380),s=Li(s,u,d,i,e[y+13],21,1309151649),i=Li(i,s,u,d,e[y+4],6,-145523070),d=Li(d,i,s,u,e[y+11],10,-1120210379),u=Li(u,d,i,s,e[y+2],15,718787259),s=Li(s,u,d,i,e[y+9],21,-343485551),i=ga(i,v),s=ga(s,_),u=ga(u,M),d=ga(d,E)}return[i,s,u,d]}function iC(e,t=Ku.Hex){const i=t||Ku.Base64,s=_oe(moe(e),e.length*ec);switch(i){case Ku.Raw:return s;case Ku.Hex:return voe(s);case Ku.String:return goe(s);case Ku.Base64:return woe(s)}}var _9;let J0=_9=class extends sg{writeLevels(e,t,i){for(const s in e){const u=this.levels[s];return void(t.stops=u)}}clone(){var e,t;return new _9({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:ma(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:ma(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:(e=this.stops)==null?void 0:e.map(i=>i.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:(t=this.legendOptions)==null?void 0:t.clone(),levels:ie(this.levels)})}};w([S()],J0.prototype,"levels",void 0),w([_e("levels")],J0.prototype,"writeLevels",null),J0=_9=w([B("esri.views.2d.engine.LevelDependentSizeVariable")],J0);const xoe=de.getLogger("esri.views.2d.layers.support.clusterUtils");oe.add("esri-cluster-arcade-enabled",!0);const Soe=oe("esri-cluster-arcade-enabled"),$oe=(e,t,i,s,u)=>{const d=t.clone();if(!Moe(d))return d;if(d.authoringInfo||(d.authoringInfo=new j4),d.authoringInfo.isAutoGenerated=!0,"visualVariables"in d){const y=(d.visualVariables||[]).filter(_=>_.valueExpression!=="$view.scale"),v=rC(y);y.forEach(_=>{_.type==="rotation"?_.field?_.field=Za(e,_.field,"avg_angle","number"):_.valueExpression&&(_.field=e0(e,_.valueExpression,"avg_angle","number"),_.valueExpression=null):_.normalizationField?(_.field=Za(e,_.field,"avg_norm","number",_.normalizationField),_.normalizationField=null):_.field?_.field=Za(e,_.field,"avg","number"):_.valueExpression&&(_.field=e0(e,_.valueExpression,"avg","number"),_.valueExpression=null)}),v==null&&!Toe(y)&&u&&(y.push(sC(i,s)),d.dynamicClusterSize=!0),d.visualVariables=y}switch(d.type){case"simple":break;case"pie-chart":for(const y of d.attributes)y.field?y.field=Za(e,y.field,"sum","number"):y.valueExpression&&(y.field=e0(e,y.valueExpression,"sum","number"),y.valueExpression=null);break;case"unique-value":d.field?d.field=Za(e,d.field,"mode","string"):d.valueExpression&&(d.field=e0(e,d.valueExpression,"mode","string"),d.valueExpression=null);break;case"class-breaks":d.normalizationField?(d.field=Za(e,d.field,"avg_norm","number",d.normalizationField),d.normalizationField=null):d.field?d.field=Za(e,d.field,"avg","number"):d.valueExpression&&(d.field=e0(e,d.valueExpression,"avg","number"),d.valueExpression=null)}return d},rC=e=>{for(const t of e)if(t.type==="size")return t;return null};function Ade(e,t,i){const s=e.clone();let u=!1;if("visualVariables"in s){const d=(s.visualVariables||[]).filter(y=>y.valueExpression!=="$view.scale");rC(d)==null&&(s.visualVariables||(s.visualVariables=[]),s.visualVariables.push(sC(t,i)),s.dynamicClusterSize=!0,u=!0)}return{renderer:s,didInject:u}}const Toe=e=>{for(const t of e)if(t.field==="cluster_count")return!0;return!1},sC=(e,t)=>{const i=[new vh({value:0,size:0}),new vh({value:1})];if(t==null)return new sg({field:"cluster_count",stops:[...i,new vh({value:2,size:0})]});const s=Object.keys(t).reduce((u,d)=>({...u,[d]:[...i,new vh({value:Math.max(2,t[d].minValue),size:e.clusterMinSize}),new vh({value:Math.max(3,t[d].maxValue),size:e.clusterMaxSize})]}),{});return new J0({field:"cluster_count",levels:s})},Moe=e=>{const t=i=>xoe.error(new ae("Unsupported-renderer",i,{renderer:e}));if(!e)return!1;switch(e.type){case"unique-value":if(e.field2||e.field3)return t("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(e.normalizationField){const i=e.normalizationType;if(i!=="field")return t(`FeatureReductionCluster does not support a normalizationType of ${i}`),!1}break;case"simple":case"pie-chart":break;default:return t(`FeatureReductionCluster does not support renderers of type ${e.type}`),!1}if(!Soe){if("valueExpression"in e&&e.valueExpression)return t("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in e&&e.visualVariables||[]).some(i=>!(!("valueExpression"in i)||!i.valueExpression)))return t("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function Ioe(e,t,i){switch(e){case"sum":return`cluster_sum_${t}`;case"avg":case"avg_angle":return`cluster_avg_${t}`;case"mode":return`cluster_type_${t}`;case"avg_norm":{const s=i,u="field",d=t.toLowerCase()+",norm:"+u+","+s.toLowerCase();return"cluster_avg_"+iC(d)}}}function e0(e,t,i,s){const u=iC(t),d=i==="mode"?`cluster_type_${u}`:i==="sum"?`cluster_sum_${u}`:`cluster_avg_${u}`;return e.some(y=>y.name===d)||e.push(new $u({name:d,isAutoGenerated:!0,onStatisticExpression:new e6({expression:t,returnType:s}),statisticType:i})),d}function Za(e,t,i,s,u){if(t==="cluster_count"||e.some(y=>y.name===t))return t;const d=Ioe(i,t,u);return e.some(y=>y.name===d)||(i==="avg_norm"?e.push(new $u({name:d,isAutoGenerated:!0,onStatisticExpression:new e6({expression:`$feature.${t} / $feature.${u}`,returnType:s}),statisticType:"avg"})):e.push(new $u({name:d,isAutoGenerated:!0,onStatisticField:t,statisticType:i}))),d}const Eoe=e=>{let t=class extends e{constructor(...i){super(...i),this.addHandles(Ge(()=>this.renderer,()=>{if(this.featureReduction){const s=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",s)}},ku))}set featureReduction(i){const s=this._normalizeFeatureReduction(i);this._set("featureReduction",s)}set renderer(i){}_normalizeFeatureReduction(i){var v;if((i==null?void 0:i.type)!=="cluster")return i;const s=i.clone(),u=[new $u({name:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],d=(s.fields??[]).filter(_=>!_.isAutoGenerated);if(i.renderer&&!((v=i.renderer.authoringInfo)!=null&&v.isAutoGenerated))return s.fields=[...u,...d],s;if(i.symbol)return s.fields=[...u,...d],s.renderer=null,s;if(!this.renderer)return i;const y=$oe(u,this.renderer,i,null,!1);return s.fields=[...u,...d],s.renderer=y,s}};return w([S(yoe)],t.prototype,"featureReduction",null),t=w([B("esri.layers.mixins.FeatureReductionLayer")],t),t},B8={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CSV:!0,GeoRSS:!0,GeoJSON:!0,GroupLayer:!0,KML:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},H8={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},W8={ArcGISFeatureLayer:!0},koe={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,GeoJSON:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,KML:!0,RasterDataLayer:!0,Voxel:!0,LineOfSightLayer:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":B8,"web-map/basemap":H8,"web-map/tables":W8,"link-chart/operational-layers":{...B8,LinkChartLayer:!0},"link-chart/basemap":H8,"link-chart/tables":W8,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISImageServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0}},Aoe=e=>{let t=class extends e{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(i,s,u){var d;return((d=u==null?void 0:u.portalItem)==null?void 0:d.type)==="Group Layer"?void 0:i}writeListMode(i,s,u,d){(d&&d.layerContainerType==="ground"||i&&mL(this,u,{},d))&&(s[u]=i)}writeOperationalLayerType(i,s,u,d){i&&(d==null?void 0:d.layerContainerType)!=="tables"&&(s.layerType=i)}writeTitle(i,s){s.title=i??"Layer"}read(i,s){s&&(s.layer=this),dL(this,i,u=>super.read(i,u),s)}write(i,s){var y,v;if(!this.persistenceEnabled)return null;if(s!=null&&s.origin){const _=`${s.origin}/${s.layerContainerType||"operational-layers"}`,M=koe[_];let E=!!(M!=null&&M[this.operationalLayerType]);if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&_==="web-scene/operational-layers"&&(E=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&_==="web-map/operational-layers"&&(E=!1),!E)return(y=s.messages)==null||y.push(new ae("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${_}'`,{layer:this})),null}const u=super.write(i,{...s,layer:this}),d=!!s&&!!s.messages&&!!s.messages.filter(_=>_ instanceof ae&&_.name==="web-document-write:property-required").length;return _m(u==null?void 0:u.url)?((v=s==null?void 0:s.messages)==null||v.push(new ae("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&d?null:u}beforeSave(){}};return w([S({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),w([me("id",["id"])],t.prototype,"readId",null),w([S(GP)],t.prototype,"listMode",void 0),w([_e("listMode")],t.prototype,"writeListMode",null),w([S({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:Wi}}}}})],t.prototype,"operationalLayerType",void 0),w([_e("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),w([S(u9)],t.prototype,"opacity",void 0),w([S({type:Boolean,readOnly:!1})],t.prototype,"persistenceEnabled",void 0),w([S({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),w([_e("title"),_e(["web-scene"],"title")],t.prototype,"writeTitle",null),w([S({type:Boolean,json:{origins:{"web-scene":{name:"visibility",write:{enabled:!0,layerContainerTypes:Wi}}},name:"visibility",write:!0}})],t.prototype,"visible",void 0),t=w([B("esri.layers.mixins.OperationalLayer")],t),t};var x9;const ev=new et({asc:"ascending",desc:"descending"});let Ah=x9=class extends pe{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new x9({field:this.field,valueExpression:this.valueExpression,order:this.order})}};w([S({type:String,json:{write:!0}})],Ah.prototype,"field",void 0),w([S({type:String,json:{write:!0}})],Ah.prototype,"valueExpression",void 0),w([S({type:ev.apiValues,json:{read:ev.read,write:ev.write}})],Ah.prototype,"order",void 0),Ah=x9=w([B("esri.layers.support.OrderByInfo")],Ah);const nC=Ah;function Ooe(e,t,i){if(!e)return null;const s=e.find(d=>!!d.field);if(!s)return null;const u=new nC;return u.read(s,i),[u]}function Poe(e,t,i,s){const u=e.find(d=>!!d.field);u&&Hi(i,[u.toJSON()],t)}const Coe=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return w([S({type:[nC],json:{origins:{"web-scene":{write:!1,read:!1}},read:{source:"layerDefinition.orderBy",reader:Ooe},write:{target:"layerDefinition.orderBy",writer:Poe}}})],t.prototype,"orderBy",void 0),t=w([B("esri.layers.mixins.OrderedLayer")],t),t};async function joe(e){const t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return Ch(e);const i=He.WGS84;return await F5(t,i),Na(e,i)}function Noe(e,t){if(!oC(e,t)){const i=e.typeKeywords;i?i.push(t):e.typeKeywords=[t]}}function oC(e,t){var i;return!!((i=e.typeKeywords)!=null&&i.includes(t))}function Ode(e){return oC(e,Loe.HOSTED_SERVICE)}function Roe(e,t){const i=e.typeKeywords;if(i){const s=i.indexOf(t);s>-1&&i.splice(s,1)}}function Pde(e,t,i){i?Noe(e,t):Roe(e,t)}async function Cde(e){const t=e.clone().normalize();let i;if(t.length>1)for(const s of t)i?s.width>i.width&&(i=s):i=s;else i=t[0];return joe(i)}const Loe={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service",LOCAL_SCENE:"ViewingMode-Local",TILED_IMAGERY:"Tiled Imagery",GROUP_LAYER_MAP:"Map"};function J8(e){var _;const{portal:t,isOrgItem:i,itemControl:s}=e,u=(_=t.user)==null?void 0:_.privileges;let d=!u||u.includes("features:user:edit"),y=!!i&&!!(u!=null&&u.includes("features:user:fullEdit"));const v=s==="update"||s==="admin";return v?y=d=!0:y&&(d=!0),{features:{edit:d,fullEdit:y},content:{updateItem:v}}}const Doe=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=Ot(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(i){i!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",i))}readPortalItem(i,s,u){if(s.itemId)return new op({id:s.itemId,portal:u==null?void 0:u.portal})}writePortalItem(i,s){i!=null&&i.id&&(s.itemId=i.id)}async loadFromPortal(i,s){var u;if((u=this.portalItem)!=null&&u.id)try{const{load:d}=await Se(()=>import("./layersLoader-da1a8df4.js"),["assets/layersLoader-da1a8df4.js","assets/fetchService-db08c7e2.js","assets/lazyLayerLoader-a873d88c.js","assets/portalLayers-baa684b9.js","assets/associatedFeatureServiceUtils-98a4e095.js","assets/layersCreator-18752ae6.js","assets/jsonContext-f3e53722.js"]);return Gt(s),await d({instance:this,supportedTypes:i.supportedTypes,validateItem:i.validateItem,supportsData:i.supportsData,layerModuleTypeMap:i.layerModuleTypeMap},s)}catch(d){throw Rr(d)||de.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${d}`),d}}async finishLoadEditablePortalLayer(i){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(i).catch(s=>(yn(s),!0)))}async setUserPrivileges(i,s){if(!at.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(s);if(this.url)try{const{features:{edit:u,fullEdit:d},content:{updateItem:y}}=await this._fetchUserPrivileges(i,s);this._set("userHasEditingPrivileges",u),this._set("userHasFullEditingPrivileges",d),this._set("userHasUpdateItemPrivileges",y)}catch(u){yn(u)}}async _fetchUserPrivileges(i,s){let u=this.portalItem;if(!i||!u||!u.loaded||u.sourceUrl)return this._fetchFallbackUserPrivileges(s);const d=i===u.id;if(d&&u.portal.user)return J8(u);let y,v;if(d)y=u.portal.url;else try{y=await tE(this.url,s)}catch(O){yn(O)}if(!y||!FL(y,u.portal.url))return this._fetchFallbackUserPrivileges(s);try{const O=s!=null?s.signal:null;v=await(tt==null?void 0:tt.getCredential(`${y}/sharing`,{prompt:!1,signal:O}))}catch(O){yn(O)}const _=!0,M=!1,E=!1;if(!v)return{features:{edit:_,fullEdit:M},content:{updateItem:E}};try{if(d?await u.reload():(u=new op({id:i,portal:{url:y}}),await u.load(s)),u.portal.user)return J8(u)}catch(O){yn(O)}return{features:{edit:_,fullEdit:M},content:{updateItem:E}}}async _fetchFallbackUserPrivileges(i){let s=!0;try{s=await this._fetchUserHasEditingPrivileges(i)}catch(u){yn(u)}return{features:{edit:s,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(i){const s=this.url?tt==null?void 0:tt.findCredential(this.url):null;if(!s)return!0;const u=kf.credential===s?kf.user:await this._fetchEditingUser(i);return kf.credential=s,kf.user=u,(u==null?void 0:u.privileges)==null||u.privileges.includes("features:user:edit")}async _fetchEditingUser(i){var E,O;const s=(O=(E=this.portalItem)==null?void 0:E.portal)==null?void 0:O.user;if(s)return s;const u=tt.findServerInfo(this.url??"");if(!(u!=null&&u.owningSystemUrl))return null;const d=`${u.owningSystemUrl}/sharing/rest`,y=mr.getDefault();if(y&&y.loaded&&Ls(y.restUrl)===Ls(d))return y.user;const v=`${d}/community/self`,_=i!=null?i.signal:null,M=await Tm(Yt(v,{authMode:"no-prompt",query:{f:"json"},signal:_}));return M.ok?U5.fromJSON(M.value.data):null}read(i,s){s&&(s.layer=this),super.read(i,s)}write(i,s){var y;const u=s==null?void 0:s.portal,d=((y=this.portalItem)==null?void 0:y.id)&&(this.portalItem.portal||mr.getDefault());return u&&d&&!tT(d.restUrl,u.restUrl)?(s.messages&&s.messages.push(new ae("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(i,{...s,layer:this})}};return w([S({type:op})],t.prototype,"portalItem",null),w([me("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),w([_e("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),w([S({clonable:!1})],t.prototype,"resourceReferences",void 0),w([S({type:Boolean,readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),w([S({type:Boolean,readOnly:!0})],t.prototype,"userHasFullEditingPrivileges",void 0),w([S({type:Boolean,readOnly:!0})],t.prototype,"userHasUpdateItemPrivileges",void 0),t=w([B("esri.layers.mixins.PortalLayer")],t),t},kf={credential:null,user:null};let K0=class extends Ne{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};w([S()],K0.prototype,"updating",void 0),w([S()],K0.prototype,"status",void 0),K0=w([B("esri.layers.support.PublishingInfo")],K0);const Foe=K0,aC="esri.layers.mixins.PublishableLayer",zoe=Symbol(aC),Voe=e=>{var t;let i=class extends e{constructor(){super(...arguments),this[t]=!0}get publishingInfo(){if(this.destroyed)return null;const s=this._get("publishingInfo");if(s)return s;const u=new Foe;return this._checkPublishingStatus(u),u}_checkPublishingStatus(s){let y=0;const v=async M=>{let E;s.updating=!0;try{E=await this.fetchPublishingStatus()}catch{E="unavailable"}E!=="published"&&E!=="unavailable"||(s.status==="publishing"&&this.refresh(),_.remove()),s.status=E,s.updating=!1,_.removed||(y=setTimeout(v,M,M+125))},_={removed:!1,remove(){this.removed=!0,clearTimeout(y)}};this.when().catch(()=>_.remove()),v(250),this.addHandles(_)}};return t=zoe,w([S({readOnly:!0,clonable:!1})],i.prototype,"publishingInfo",null),i=w([B(aC)],i),i},va=new Oe,wp=new WeakMap;function Goe(e){Uoe(e)&&va.push(new WeakRef(e))}function qoe(e){const t=va.find(i=>i.deref()===e);t&&va.remove(t)}function Uoe(e){return e!=null&&typeof e=="object"&&"refreshInterval"in e&&"refresh"in e}function lC(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:lC(t,e%t):0}let tv=0,Af=0;function Boe(){const e=Date.now();let t=!1;for(const i of va){const s=i.deref();s?s.refreshInterval&&e-(wp.get(s)??0)+5>=6e4*s.refreshInterval&&(wp.set(s,e),s.refresh(e)):t=!0}if(t)for(let i=va.length-1;i>=0;i--)va.at(i).deref()||va.removeAt(i)}e$(()=>{const e=Date.now();let t=0;for(const i of va){const s=i.deref();s&&(t=lC(Math.round(6e4*s.refreshInterval),t),s.refreshInterval?wp.get(s)||wp.set(s,e):wp.delete(s))}if(t!==Af){if(Af=t,clearInterval(tv),Af===0)return void(tv=0);tv=setInterval(Boe,Af)}});const K8=.1,Hoe=e=>{let t=class extends e{constructor(...i){super(...i),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=L9(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||Goe(this)},()=>{})}destroy(){qoe(this)}castRefreshInterval(i){return i>=K8?i:i<=0?0:K8}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(i=Date.now()){yv(this._debounceHasDataChanged()).then(s=>{s&&this._set("refreshTimestamp",i),this.emit("refresh",{dataChanged:s})},s=>{de.getLogger(this).error(s),this.emit("refresh",{dataChanged:!1,error:s})})}async hasDataChanged(){return!0}get test(){const i=this;return{set refreshInterval(s){i._set("refreshInterval",s)}}}};return w([S({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:Wi}}}}})],t.prototype,"refreshInterval",void 0),w([mt("refreshInterval")],t.prototype,"castRefreshInterval",null),w([S({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),w([S({readOnly:!0})],t.prototype,"refreshParameters",null),t=w([B("esri.layers.mixins.RefreshableLayer")],t),t},uC=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const i={minScale:this.minScale,maxScale:this.maxScale},s=this.parent;s&&"effectiveScaleRange"in s&&Woe(i,s.effectiveScaleRange);const u=this._get("effectiveScaleRange");return u&&u.minScale===i.minScale&&u.maxScale===i.maxScale?u:i}};return w([S({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),w([S({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),w([S({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=w([B("esri.layers.mixins.ScaleRangeLayer")],t),t};function Woe(e,t){return e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale,e}const hC=Ji()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let Z0=class extends Mt(pe){constructor(t){super(t),this.unit="milliseconds",this.value=0}toMilliseconds(){return fW(this.value,this.unit,"milliseconds")}};w([Ae(hC,{nonNullable:!0})],Z0.prototype,"unit",void 0),w([S({type:Number,json:{write:!0},nonNullable:!0})],Z0.prototype,"value",void 0),Z0=w([B("esri.TimeInterval")],Z0);const nm=Z0;function Z8(e,t){return nm.fromJSON({value:e,unit:t})}let Gi=class extends Mt(pe){constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||t.timeExtent.length!==2)return null;const i=new Date(t.timeExtent[0]),s=new Date(t.timeExtent[1]);return new Tn({start:i,end:s})}writeFullTimeExtent(e,t){(e==null?void 0:e.start)!=null&&e.end!=null?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?Z8(t.timeInterval,t.timeIntervalUnits):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?Z8(t.defaultTimeInterval,t.defaultTimeIntervalUnits):null}writeInterval(e,t){t.timeInterval=(e==null?void 0:e.toJSON().value)??null,t.timeIntervalUnits=(e==null?void 0:e.toJSON().unit)??null}};w([S({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],Gi.prototype,"cumulative",void 0),w([S({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],Gi.prototype,"endField",void 0),w([S({type:Tn,json:{write:{enabled:!0,allowNull:!0}}})],Gi.prototype,"fullTimeExtent",void 0),w([me("fullTimeExtent",["timeExtent"])],Gi.prototype,"readFullTimeExtent",null),w([_e("fullTimeExtent")],Gi.prototype,"writeFullTimeExtent",null),w([S({type:Boolean,json:{write:!0}})],Gi.prototype,"hasLiveData",void 0),w([S({type:nm,json:{write:{enabled:!0,allowNull:!0}}})],Gi.prototype,"interval",void 0),w([me("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],Gi.prototype,"readInterval",null),w([_e("interval")],Gi.prototype,"writeInterval",null),w([S({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],Gi.prototype,"startField",void 0),w([S(My("timeReference",!0))],Gi.prototype,"timeZone",void 0),w([S({type:String,json:{write:{enabled:!0,allowNull:!0}}})],Gi.prototype,"trackIdField",void 0),w([S({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],Gi.prototype,"useTime",void 0),Gi=w([B("esri.layers.support.TimeInfo")],Gi);const cC=Gi,Joe=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(i,s){const u=s.timeInfo.exportOptions;if(!u)return null;const d=u.timeOffset,y=hC.fromJSON(u.timeOffsetUnits);return d&&y?new nm({value:d,unit:y}):null}set timeInfo(i){jE(i,this.fieldsIndex),this._set("timeInfo",i)}};return w([S({type:Tn,json:{write:!1}})],t.prototype,"timeExtent",void 0),w([S({type:nm})],t.prototype,"timeOffset",void 0),w([me("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),w([S({value:null,type:cC,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),w([S({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],t.prototype,"useViewTime",void 0),t=w([B("esri.layers.mixins.TemporalLayer")],t),t},Y8=new et({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let ta=class extends Mt(pe){constructor(t){super(t),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};w([S({json:{write:!0}})],ta.prototype,"name",void 0),w([S({json:{write:!0}})],ta.prototype,"description",void 0),w([S({json:{read:Y8.read,write:Y8.write}})],ta.prototype,"drawingTool",void 0),w([S({json:{write:!0}})],ta.prototype,"prototype",void 0),w([S({json:{write:!0}})],ta.prototype,"thumbnail",void 0),ta=w([B("esri.layers.support.FeatureTemplate")],ta);const s6=ta;let Xn=class extends Mt(pe){constructor(t){super(t),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(t){const i={};for(const s of Object.keys(t))i[s]=cg(t[s]);return i}writeDomains(t,i){var u;const s={};for(const d of Object.keys(t))t[d]&&(s[d]=(u=t[d])==null?void 0:u.toJSON());i.domains=s}};w([S({json:{write:!0}})],Xn.prototype,"id",void 0),w([S({json:{write:!0}})],Xn.prototype,"name",void 0),w([S({json:{write:!0}})],Xn.prototype,"domains",void 0),w([me("domains")],Xn.prototype,"readDomains",null),w([_e("domains")],Xn.prototype,"writeDomains",null),w([S({type:[s6],json:{write:!0}})],Xn.prototype,"templates",void 0),Xn=w([B("esri.layers.support.FeatureType")],Xn);const pC=Xn;function Koe(){return{fields:{type:[G4],value:null,set:function(e){if(e&&oe("big-integer-warning-enabled")){const t=e.filter(i=>i.type==="big-integer"||i.type==="oid"&&(i.length||0)>=8);if(t.length){const i=t.map(s=>`'${s.name}'`).join(", ");de.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${i}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",e)}},fieldsIndex:{readOnly:!0,get(){return Xh.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){var t;const e=this._userOutFields;if(!(e!=null&&e.length))return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const i of e)((t=this.fieldsIndex)==null?void 0:t.has(i))||de.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${i} found in outFields`,{layer:this,outFields:e});return X5(this.fieldsIndex,e)}}}}const iv=de.getLogger("esri.layers.support.labelingInfo"),Zoe=/\[([^\[\]]+)\]/gi;function rv(e,t,i){return e?e.map(s=>{var d;const u=new dg;if(u.read(s,i),u.labelExpression){const y=t.fields||((d=t.layerDefinition)==null?void 0:d.fields)||this.fields;u.labelExpression=u.labelExpression.replaceAll(Zoe,(v,_)=>`[${Yoe(_,y)}]`)}return u}):null}function Yoe(e,t){if(!t)return e;const i=e.toLowerCase();for(let s=0;s<t.length;s++){const u=t[s].name;if(u.toLowerCase()===i)return u}return e}const Xoe={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along"],esriGeometryMultipoint:null};function Dde(e,t){const i=ie(e);return i.some(s=>Qoe(s,t))?[]:i}function Qoe(e,t){const i=e.labelPlacement,s=Xoe[t];if(!e.symbol)return iv.warn("No ILabelClass symbol specified."),!0;if(!s)return iv.error(new ae("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${t}' is not supported`)),!0;if(!s.includes(i)){const u=s[0];i&&iv.warn(`Found invalid label placement type ${i} for ${t}. Defaulting to ${u}`),e.labelPlacement=u}return!1}const Qn=[];function eae(e,t){if(zk(e.url??""))return!0;const{wkid:i}=t;for(const s of Qn){if((e.version??0)>=s[0])return!0;if(typeof s[1]=="function"&&(s[1]=s[1]()),s[1].has(i))return!1}return!0}Qn.push([10.91,()=>{const e=new Set([9709,9716,9741,9761,9766]);for(let t=9712;t<=9713;t++)e.add(t);for(let t=9748;t<=9749;t++)e.add(t);for(let t=20904;t<=20932;t++)e.add(t);for(let t=21004;t<=21032;t++)e.add(t);for(let t=21207;t<=21264;t++)e.add(t);for(let t=21307;t<=21364;t++)e.add(t);for(let t=23301;t<=23333;t++)e.add(t);for(let t=102759;t<=102760;t++)e.add(t);for(let t=102934;t<=102955;t++)e.add(t);return e}]),Qn.push([10.9,()=>{const e=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let t=9356;t<=9360;t++)e.add(t);for(let t=9404;t<=9407;t++)e.add(t);for(let t=9476;t<=9482;t++)e.add(t);for(let t=9487;t<=9494;t++)e.add(t);for(let t=9697;t<=9699;t++)e.add(t);return e}]),Qn.push([10.81,()=>{const e=new Set([9265,9333,103598,103699]);for(let t=9248;t<=9254;t++)e.add(t);for(let t=9271;t<=9273;t++)e.add(t);for(let t=9284;t<=9285;t++)e.add(t);for(let t=21453;t<=21463;t++)e.add(t);return e}]),Qn.push([10.8,()=>{const e=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let t=8035;t<=8036;t++)e.add(t);for(let t=8455;t<=8456;t++)e.add(t);for(let t=8518;t<=8529;t++)e.add(t);for(let t=8533;t<=8536;t++)e.add(t);for(let t=8538;t<=8540;t++)e.add(t);for(let t=8677;t<=8679;t++)e.add(t);for(let t=8902;t<=8903;t++)e.add(t);for(let t=8907;t<=8910;t++)e.add(t);for(let t=8949;t<=8951;t++)e.add(t);for(let t=8972;t<=8987;t++)e.add(t);for(let t=9039;t<=9040;t++)e.add(t);for(let t=9068;t<=9069;t++)e.add(t);for(let t=9140;t<=9141;t++)e.add(t);for(let t=9148;t<=9150;t++)e.add(t);for(let t=9153;t<=9159;t++)e.add(t);for(let t=9205;t<=9218;t++)e.add(t);for(let t=9221;t<=9222;t++)e.add(t);for(let t=54098;t<=54101;t++)e.add(t);return e}]),Qn.push([10.71,()=>{const e=new Set([6316]);for(let t=8351;t<=8353;t++)e.add(t);for(let t=9294;t<=9297;t++)e.add(t);for(let t=22619;t<=22621;t++)e.add(t);for(let t=103586;t<=103594;t++)e.add(t);return e}]),Qn.push([10.7,()=>{const e=new Set([8387,8391,8427,8545,8682,8685,8818,31370,104022,104024,104975]);for(let t=8065;t<=8068;t++)e.add(t);for(let t=8082;t<=8083;t++)e.add(t);for(let t=8379;t<=8385;t++)e.add(t);for(let t=8836;t<=8840;t++)e.add(t);for(let t=8857;t<=8860;t++)e.add(t);for(let t=53035;t<=53037;t++)e.add(t);for(let t=54090;t<=54091;t++)e.add(t);for(let t=102498;t<=102499;t++)e.add(t);return e}]),Qn.push([10.61,()=>new Set([102497])]),Qn.push([10.6,()=>{const e=new Set([7803,7805,7887,8086,8232,8237,8240,8246,8249,8252,8255,9019,9391]);for(let t=7755;t<=7787;t++)e.add(t);for(let t=7791;t<=7795;t++)e.add(t);for(let t=7799;t<=7801;t++)e.add(t);for(let t=7825;t<=7831;t++)e.add(t);for(let t=7877;t<=7878;t++)e.add(t);for(let t=7882;t<=7883;t++)e.add(t);for(let t=7991;t<=7992;t++)e.add(t);for(let t=8042;t<=8043;t++)e.add(t);for(let t=8058;t<=8059;t++)e.add(t);for(let t=8311;t<=8348;t++)e.add(t);for(let t=9060;t<=9067;t++)e.add(t);for(let t=102562;t<=102568;t++)e.add(t);for(let t=102799;t<=102900;t++)e.add(t);return e}]);async function tae(e,t,i){const s=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin);if(s&&s.type==="unique-value"&&s.styleOrigin){const u=await Tm(s.populateFromStyle());if(Gt(i),u.ok===!1){const d=u.error;t!=null&&t.messages&&t.messages.push(new is("renderer:style-reference",`Failed to create unique value renderer from style reference: ${d.message}`,{error:d,context:t})),e.clear("renderer",t==null?void 0:t.origin)}}}var S9;let Oh=S9=class extends pe{constructor(e){super(e),this.groupByFields=void 0,this.topCount=void 0,this.orderByFields=void 0}clone(){return new S9({groupByFields:this.groupByFields,topCount:this.topCount,orderByFields:this.orderByFields})}};w([S({type:[String],json:{write:!0}})],Oh.prototype,"groupByFields",void 0),w([S({type:Number,json:{write:!0}})],Oh.prototype,"topCount",void 0),w([S({type:[String],json:{write:!0}})],Oh.prototype,"orderByFields",void 0),Oh=S9=w([B("esri.rest.support.TopFilter")],Oh);const iae=Oh;var $9;const X8=new et({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),Q8=new et({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let At=$9=class extends pe{constructor(e){super(e),this.cacheHint=void 0,this.distance=void 0,this.geometry=null,this.geometryPrecision=void 0,this.maxAllowableOffset=void 0,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.resultType=null,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.start=void 0,this.spatialRelationship="intersects",this.timeExtent=null,this.topFilter=void 0,this.units=null,this.where="1=1"}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new $9(ie({cacheHint:this.cacheHint,distance:this.distance,geometry:this.geometry,geometryPrecision:this.geometryPrecision,maxAllowableOffset:this.maxAllowableOffset,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,resultType:this.resultType,returnGeometry:this.returnGeometry,returnZ:this.returnZ,returnM:this.returnM,start:this.start,spatialRelationship:this.spatialRelationship,timeExtent:this.timeExtent,topFilter:this.topFilter,units:this.units,where:this.where}))}};w([S({type:Boolean,json:{write:!0}})],At.prototype,"cacheHint",void 0),w([S({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],At.prototype,"distance",void 0),w([S({types:Eu,json:{read:$a,write:!0}})],At.prototype,"geometry",void 0),w([S({type:Number,json:{write:!0}})],At.prototype,"geometryPrecision",void 0),w([S({type:Number,json:{write:!0}})],At.prototype,"maxAllowableOffset",void 0),w([S({type:Number,json:{read:{source:"resultRecordCount"}}})],At.prototype,"num",void 0),w([S({json:{write:!0}})],At.prototype,"objectIds",void 0),w([S({type:[String],json:{write:!0}})],At.prototype,"orderByFields",void 0),w([S({type:[String],json:{write:!0}})],At.prototype,"outFields",void 0),w([S({type:He,json:{read:{source:"outSR"},write:{target:"outSR"}}})],At.prototype,"outSpatialReference",void 0),w([S({type:String,json:{write:!0}})],At.prototype,"resultType",void 0),w([S({json:{write:!0}})],At.prototype,"returnGeometry",void 0),w([S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],At.prototype,"returnM",void 0),w([S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],At.prototype,"returnZ",void 0),w([S({type:Number,json:{read:{source:"resultOffset"}}})],At.prototype,"start",void 0),w([_e("start"),_e("num")],At.prototype,"writeStart",null),w([S({type:String,json:{read:{source:"spatialRel",reader:X8.read},write:{target:"spatialRel",writer:X8.write}}})],At.prototype,"spatialRelationship",void 0),w([S({type:Tn,json:{write:!0}})],At.prototype,"timeExtent",void 0),w([S({type:iae,json:{write:!0}})],At.prototype,"topFilter",void 0),w([S({type:String,json:{read:Q8.read,write:{writer:Q8.write,overridePolicy(e){return{enabled:e!=null&&this.distance!=null&&this.distance>0}}}}})],At.prototype,"units",void 0),w([S({type:String,json:{write:!0}})],At.prototype,"where",void 0),At=$9=w([B("esri.rest.support.TopFeaturesQuery")],At),At.from=ei(At);const Of=At;function rae({displayField:e,editFieldsInfo:t,fields:i,objectIdField:s,title:u},d){if(!i)return null;const y=aae({editFieldsInfo:t,fields:i,objectIdField:s},d);if(!y.length)return null;const v=hae({titleBase:u,fields:i,displayField:e}),_=uae();return new ld({title:v,content:_,fieldInfos:y})}const sae=(e,t)=>t.visibleFieldNames?t.visibleFieldNames.has(e.name):UW(e,t);function nae(e,t){const i=e;return t&&(e=e.filter(s=>!t.includes(s.type))),e===i&&(e=e.slice()),e.sort(oae),e}function oae(e,t){return e.type==="oid"?-1:t.type==="oid"?1:eS(e)?-1:eS(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function aae(e,t){const i=t==null?void 0:t.visibleFieldNames;return nae(e.fields??[],(t==null?void 0:t.ignoreFieldTypes)||cae).map(s=>new e4({fieldName:s.name,isEditable:qW(s,e),label:s.alias,format:lae(s),visible:sae(s,{...e,visibleFieldNames:i})}))}function lae(e){switch(e.type){case"small-integer":case"integer":case"single":return new e1({digitSeparator:!0,places:0});case"double":return new e1({digitSeparator:!0,places:2});case"string":return yJ(e.name)?new e1({digitSeparator:!0,places:0}):null;default:return null}}function uae(){return[new Dp,new Lp]}function hae(e){const t=CW(e),{titleBase:i}=e;return t?`${i}: {${t.trim()}}`:i??""}function eS(e){return(e.name&&e.name.toLowerCase())==="name"?!0:(e.alias&&e.alias.toLowerCase())==="name"}const cae=["geometry","blob","raster","guid","xml"];var Fh;(function(e){e[e.SAVE=0]="SAVE",e[e.SAVE_AS=1]="SAVE_AS"})(Fh||(Fh={}));const Ki="FeatureLayer",dC="esri.layers.FeatureLayer",pae=de.getLogger(dC);function Pf(e,t){return new ae("layer:unsupported",`Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${t}`,{layer:e})}function tS(e){return e&&e instanceof Oe}const sv=Koe();function nv(e,t,i){const s=!!(i!=null&&i.writeLayerSchema);return{enabled:s,ignoreOrigin:s}}let Ie=class extends qne(Eoe(Use(Voe(Nse(RP(Coe(Joe(uC(Hoe(ose(Aoe(Doe(SP(kse(nse(Mt(Z5))))))))))))))))){constructor(...e){super(...e),this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.resourceInfo=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=He.WGS84,this.subtypeCode=null,this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0,this._debouncedSaveOperations=L9(async(t,i,s)=>{const{save:u,saveAs:d}=await Se(()=>import("./featureLayerUtils-edd79ca7.js"),["assets/featureLayerUtils-edd79ca7.js","assets/originUtils-cfe4feaf.js","assets/multiOriginJSONSupportUtils-c978f4c3.js","assets/utils-439ea777.js","assets/jsonContext-f3e53722.js","assets/saveAPIKeyUtils-54cdf6c6.js","assets/fetchService-db08c7e2.js","assets/lazyLayerLoader-a873d88c.js"]);switch(t){case Fh.SAVE:return u(this,i);case Fh.SAVE_AS:return d(this,s,i)}})}destroy(){var e;(e=this.source)==null||e.destroy()}normalizeCtorArgs(e,t){return typeof e=="string"?{url:e,...t}:e}load(e){var s;const t=e!=null?e.signal:null;if((s=this.portalItem)!=null&&s.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(t).then(u=>this.initLayerProperties(u))),Promise.resolve(this);const i=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]},e).catch(yn).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const u=await this._fetchFirstValidLayerId(t);u!=null&&(this.layerId=u)}if(!this.url&&!this._hasMemorySource())throw new ae("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(t))}).then(()=>$ne(this,"load",e));return this.addResolvingPromise(i),Promise.resolve(this)}readCapabilities(e,t){return t=t.layerDefinition||t,WP(t,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){var e;return!(this.loaded&&!((e=this.capabilities)!=null&&e.operations.supportsEditing))&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){this._overrideIfSome("editingEnabled",e)}readEditingEnabled(e,t){return this._readEditingEnabled(t,!1)}readEditingEnabledFromWebMap(e,t,i){return this._readEditingEnabled(t,!0,i)}writeEditingEnabled(e,t){this._writeEditingEnabled(e,t,!1)}writeEditingEnabledToWebMap(e,t,i,s){this._writeEditingEnabled(e,t,!0,s)}get effectiveEditingEnabled(){return Tne(this)}readIsTable(e,t){return(t=(t==null?void 0:t.layerDefinition)??t).type==="Table"||!t.geometryType}writeIsTable(e,t,i,s){s!=null&&s.writeLayerSchema&&Hi(i,e?"Table":"Feature Layer",t)}readGlobalIdField(e,t){return UP(t.layerDefinition||t)}readObjectIdField(e,t){return BP(t.layerDefinition||t)}get parsedUrl(){const e=Ai(this.url);return e!=null&&(this.dynamicDataSource!=null?e.path=nc(e.path,"dynamicLayer"):this.layerId!=null&&(e.path=nc(e.path,this.layerId.toString()))),e}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){C7(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,t,i){var u;t=t.layerDefinition||t;const s=(u=t.drawingInfo)==null?void 0:u.renderer;if(s){const d=Jp(s,t,i)??void 0;return d||pae.error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:i}),d}return Q4(t,i)}set source(e){const t=this._get("source");t!==e&&(tS(t)&&this._resetMemorySource(t),tS(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof Oe?new io({layer:this,items:e}):e:null}readSource(e,t){const i=CP.fromJSON(t.featureSet);return new io({layer:this,items:(i==null?void 0:i.features)??[]})}readTemplates(e,t){const i=t.editFieldsInfo,s=i==null?void 0:i.creatorField,u=i==null?void 0:i.editorField;return e=e==null?void 0:e.map(d=>s6.fromJSON(d)),this._fixTemplates(e,s),this._fixTemplates(e,u),e}readTitle(e,t){var u,d,y;const i=((u=t.layerDefinition)==null?void 0:u.name)??t.name,s=t.title||((d=t.layerDefinition)==null?void 0:d.title);if(i){const v=(y=this.portalItem)==null?void 0:y.title;if(this.sublayerTitleMode==="item-title")return this.url?qK(this.url,i):i;let _=i;if(!_&&this.url){const M=kc(this.url);M!=null&&(_=M.title)}return _?(this.sublayerTitleMode==="item-title-and-service-name"&&v&&v!==_&&(_=v+" - "+_),y4(_)):void 0}if(this.sublayerTitleMode==="item-title"&&s)return s}readTitleFromWebMap(e,t){var i;return t.title||((i=t.layerDefinition)==null?void 0:i.name)}readTypeIdField(e,t){let i=(t=t.layerDefinition||t).typeIdField;if(i&&t.fields){i=i.toLowerCase();const s=t.fields.find(u=>u.name.toLowerCase()===i);s&&(i=s.name)}return i}readTypes(e,t){e=(t=t.layerDefinition||t).types;const i=t.editFieldsInfo,s=i==null?void 0:i.creatorField,u=i==null?void 0:i.editorField;return e==null?void 0:e.map(d=>(d=pC.fromJSON(d),this._fixTemplates(d.templates,s),this._fixTemplates(d.templates,u),d))}readVisible(e,t){var i;return((i=t.layerDefinition)==null?void 0:i.defaultVisibility)!=null?!!t.layerDefinition.defaultVisibility:t.visibility!=null?!!t.visibility:void 0}async addAttachment(e,t){return lne(this,e,t,Ki)}async updateAttachment(e,t,i){return une(this,e,t,i,Ki)}async applyEdits(e,t){return hne(this,e,t)}async uploadAssets(e,t){return cne(this,e,t)}on(e,t){return super.on(e,t)}createPopupTemplate(e){return rae(this,e)}async createGraphicsSource(e){if(this._hasMemorySource()&&this.source)return this.source.load({signal:e});const{default:t}=await jj(Se(()=>import("./FeatureLayerSource-1595124d.js"),["assets/FeatureLayerSource-1595124d.js","assets/mat4f64-1413b4a7.js","assets/MeshGeoreferencedRelativeVertexSpace-b82a6496.js","assets/vec32-78fb89cb.js","assets/External-fa325dd0.js","assets/editingSupport-f2d9b1ea.js","assets/clientSideDefaults-220b65f4.js","assets/QueryEngineCapabilities-85c4f1d0.js","assets/QueryTask-fbed0b75.js","assets/executeForIds-8e164100.js","assets/query-e1f4c37d.js","assets/pbfQueryUtils-17afc2b2.js","assets/pbf-280c2fba.js","assets/OptimizedGeometry-d94e541f.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/executeQueryJSON-a0d4cd8b.js","assets/executeQueryPBF-540175cb.js","assets/featureConversionUtils-317e3645.js"]),e);return new t({layer:this}).load({signal:e})}createQuery(){const e=_ne(this);e.dynamicDataSource=this.dynamicDataSource;const t=this.subtypeCode!=null?`${this.subtypeField} = ${this.subtypeCode}`:null,i=gW(this.definitionExpression,t);return e.where=i||"1=1",e}async deleteAttachments(e,t){return pne(this,e,t,Ki)}async fetchRecomputedExtents(e){return dne(this,e,Ki)}getFeatureType(e){const{typeIdField:t,types:i}=this;if(!t||!e)return null;const s=e.attributes?e.attributes[t]:void 0;if(s==null)return null;let u=null;return i==null||i.some(d=>{const{id:y}=d;return y!=null&&(y.toString()===s.toString()&&(u=d),!!u)}),u}getFieldDomain(e,t){const i=t==null?void 0:t.feature,s=this.getFeatureType(i);if(s){const u=s.domains&&s.domains[e];if(u&&u.type!=="inherited")return u}return this._getLayerDomain(e)}getField(e){return this.fieldsIndex.get(e)}async queryAttachments(e,t){return fne(this,e,t,Ki)}async queryFeatures(e,t){const i=await this.load(),s=await i.source.queryFeatures(Nu.from(e)??i.createQuery(),t);if(s!=null&&s.features)for(const u of s.features)u.layer=u.sourceLayer=i;return s}async queryObjectIds(e,t){return yne(this,e,t,Ki)}async queryFeatureCount(e,t){return mne(this,e,t,Ki)}async queryExtent(e,t){return gne(this,e,t,Ki)}async queryRelatedFeatures(e,t){return vne(this,e,t,Ki)}async queryRelatedFeaturesCount(e,t){return wne(this,e,t,Ki)}async queryTopFeatures(e,t){var d;const{source:i,capabilities:s}=await this.load();if(!i.queryTopFeatures||!((d=s==null?void 0:s.query)!=null&&d.supportsTopFeaturesQuery))throw new ae(Ki,"Layer source does not support queryTopFeatures capability");const u=await i.queryTopFeatures(Of.from(e),t);if(u!=null&&u.features)for(const y of u.features)y.layer=y.sourceLayer=this;return u}async queryTopObjectIds(e,t){const{source:i,capabilities:s}=await this.load();if(!i.queryTopObjectIds||!(s!=null&&s.query.supportsTopFeaturesQuery))throw new ae(Ki,"Layer source does not support queryTopObjectIds capability");return i.queryTopObjectIds(Of.from(e),t)}async queryTopFeaturesExtent(e,t){var u;const{source:i,capabilities:s}=await this.load();if(!i.queryTopExtents||!((u=s==null?void 0:s.query)!=null&&u.supportsTopFeaturesQuery))throw new ae(Ki,"Layer source does not support queryTopExtents capability");return i.queryTopExtents(Of.from(e),t)}async queryTopFeatureCount(e,t){var u;const{source:i,capabilities:s}=await this.load();if(!i.queryTopCount||!((u=s==null?void 0:s.query)!=null&&u.supportsTopFeaturesQuery))throw new ae(Ki,"Layer source does not support queryFeatureCount capability");return i.queryTopCount(Of.from(e),t)}read(e,t){const i=e.featureCollection;if(i){this.resourceInfo=e;const s=i.layers;s&&s.length===1&&(super.read(s[0],t),i.showLegend!=null&&super.read({showLegend:i.showLegend},t))}super.read(e,t),t&&t.origin==="service"&&(this.revert(["objectIdField","fields","timeInfo","dateFieldsTimeZone"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(e,t){t={...t,origin:(t==null?void 0:t.origin)??void 0,writeLayerSchema:(t==null?void 0:t.writeLayerSchema)??this._hasMemorySource()};const{origin:i,layerContainerType:s,messages:u}=t;if(this.dynamicDataSource)return u==null||u.push(Pf(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if((i==="web-map"||i==="web-scene")&&s!=="tables")return u==null||u.push(Pf(this,`a table source can only be written to tables, not ${s}`)),null;if(this._hasMemorySource())return u==null||u.push(Pf(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&(i==="web-map"||i==="web-scene")&&s==="tables")return u==null||u.push(Pf(this,"using a non-table source cannot be written to tables in web maps or web scenes")),null;return super.write(e,t)}clone(){if(this._hasMemorySource())throw new ae(Ki,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){var t;return!!this.loaded&&(((t=this.source)==null?void 0:t.type)==="memory"||eae(this,e))}async save(e){return this._debouncedSaveOperations(Fh.SAVE,e)}async saveAs(e,t){return this._debouncedSaveOperations(Fh.SAVE_AS,t,e)}_readEditingEnabled(e,t,i){var u;let s=(u=e.layerDefinition)==null?void 0:u.capabilities;return s?this._hasEditingCapability(s):(s=e.capabilities,t&&(i==null?void 0:i.origin)==="web-map"&&!this._hasMemorySource()&&s?this._hasEditingCapability(s):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map(t=>t.trim()).includes("editing")}_writeEditingEnabled(e,t,i,s){var u,d;if(!e){const y=(d=(u=this.capabilities)==null?void 0:u.operations)!=null&&d.supportsSync?"Query,Sync":"Query";Hi("layerDefinition.capabilities",y,t),i&&!(s!=null&&s.writeLayerSchema)&&(t.capabilities=y)}}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}_fetchFirstValidLayerId(e){return Yt(this.url,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(t=>{const i=t.data;if(i)return this.findFirstValidLayerId(i)})}async initLayerProperties(e){var t;return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:(t=this.portalItem)==null?void 0:t.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),C7(this.renderer,this.fieldsIndex),jE(this.timeInfo,this.fieldsIndex),tae(this,{origin:"service"})}async hasDataChanged(){return bne(this)}async fetchPublishingStatus(){const e=this.source;return e!=null&&e.fetchPublishingStatus?e.fetchPublishingStatus():"unavailable"}_verifyFields(){var t,i;const e=((t=this.parsedUrl)==null?void 0:t.path)??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||(i=this.fields)!=null&&i.some(s=>s.type==="geometry")||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,t){e&&e.forEach(i=>{var u;const s=(u=i.prototype)==null?void 0:u.attributes;s&&t&&delete s[t]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new ae("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new ae("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach(t=>{t.layer=this,t.sourceLayer=this}),this.addHandles([e.on("after-add",t=>{t.item.layer=this,t.item.sourceLayer=this}),e.on("after-remove",t=>{t.item.layer=null,t.item.sourceLayer=null})],"fl-source")}_resetMemorySource(e){e.forEach(t=>{t.layer=null,t.sourceLayer=null}),this.removeHandles("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}findFirstValidLayerId(e){return Array.isArray(e.layers)&&e.layers.length>0?e.layers[0].id:Array.isArray(e.tables)&&e.tables.length>0?e.tables[0].id:void 0}};w([me("service","capabilities")],Ie.prototype,"readCapabilities",null),w([S({json:{origins:{"web-scene":{write:!1}},write:!0}})],Ie.prototype,"charts",void 0),w([S({readOnly:!0})],Ie.prototype,"createQueryVersion",null),w([S({json:{read:{source:"layerDefinition.copyrightText"}}})],Ie.prototype,"copyright",void 0),w([S({json:{read:{source:"layerDefinition.displayField"}}})],Ie.prototype,"displayField",void 0),w([S({types:nu,readOnly:!0})],Ie.prototype,"defaultSymbol",void 0),w([S({type:Os})],Ie.prototype,"dynamicDataSource",void 0),w([S({type:Boolean})],Ie.prototype,"editingEnabled",null),w([me(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],Ie.prototype,"readEditingEnabled",null),w([me("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],Ie.prototype,"readEditingEnabledFromWebMap",null),w([_e(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],Ie.prototype,"writeEditingEnabled",null),w([_e("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],Ie.prototype,"writeEditingEnabledToWebMap",null),w([S({readOnly:!0})],Ie.prototype,"effectiveEditingEnabled",null),w([S({...sv.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:nv}}}}})],Ie.prototype,"fields",void 0),w([S(sv.fieldsIndex)],Ie.prototype,"fieldsIndex",void 0),w([S({type:Xre,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Ie.prototype,"formTemplate",void 0),w([S({json:{read:{source:"layerDefinition.extent"}}})],Ie.prototype,"fullExtent",void 0),w([S({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:nv,writer(e,t,i){const s=e?p9.toJSON(e):null;s&&Hi(i,s,t)}}}},read:{source:"layerDefinition.geometryType",reader:p9.read}}})],Ie.prototype,"geometryType",void 0),w([S({json:{read:{source:"layerDefinition.hasM"}}})],Ie.prototype,"hasM",void 0),w([S({json:{read:{source:"layerDefinition.hasZ"}}})],Ie.prototype,"hasZ",void 0),w([S(ene)],Ie.prototype,"id",void 0),w([S({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],Ie.prototype,"infoFor3D",void 0),w([S({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],Ie.prototype,"isTable",void 0),w([me("service","isTable",["type","geometryType"]),me("isTable",["layerDefinition.type","layerDefinition.geometryType"])],Ie.prototype,"readIsTable",null),w([_e("web-map","isTable")],Ie.prototype,"writeIsTable",null),w([S(Z4)],Ie.prototype,"labelsVisible",void 0),w([S({type:[dg],json:{origins:{service:{name:"drawingInfo.labelingInfo",read:rv,write:!1},"web-scene":{name:"layerDefinition.drawingInfo.labelingInfo",read:rv,write:{enabled:!0,layerContainerTypes:Wi}}},name:"layerDefinition.drawingInfo.labelingInfo",read:rv,write:!0}})],Ie.prototype,"labelingInfo",void 0),w([S((()=>{const e=ie(Qse);return e.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(t,i,s){Hi(s,zm(t),i)}}},e})())],Ie.prototype,"opacity",void 0),w([S(Yse)],Ie.prototype,"legendEnabled",void 0),w([S({type:["show","hide"],json:(()=>{const e=ie(GP.json);return e.origins["portal-item"]={read:!1,write:!1},e})()})],Ie.prototype,"listMode",void 0),w([me("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],Ie.prototype,"readGlobalIdField",null),w([S({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:nv}}}}})],Ie.prototype,"objectIdField",void 0),w([me("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],Ie.prototype,"readObjectIdField",null),w([S({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],Ie.prototype,"operationalLayerType",void 0),w([S(sv.outFields)],Ie.prototype,"outFields",void 0),w([S({readOnly:!0})],Ie.prototype,"parsedUrl",null),w([S({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],Ie.prototype,"path",void 0),w([S(K4)],Ie.prototype,"popupEnabled",void 0),w([S({type:ld,json:{name:"popupInfo",write:!0}})],Ie.prototype,"popupTemplate",void 0),w([S({readOnly:!0})],Ie.prototype,"defaultPopupTemplate",null),w([S({types:ug,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:kre,name:"layerDefinition.drawingInfo.renderer",write:{layerContainerTypes:Wi,overridePolicy:(e,t,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(e,t,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}})],Ie.prototype,"renderer",null),w([me("service","renderer",["drawingInfo.renderer","defaultSymbol"]),me("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],Ie.prototype,"readRenderer",null),w([S()],Ie.prototype,"resourceInfo",void 0),w([S((()=>{const e=ie(Kse);return e.json.origins["portal-item"]={read:!1,write:!1},e})())],Ie.prototype,"screenSizePerspectiveEnabled",void 0),w([S({clonable:!1})],Ie.prototype,"source",null),w([mt("source")],Ie.prototype,"castSource",null),w([me("portal-item","source",["featureSet"]),me("web-map","source",["featureSet"])],Ie.prototype,"readSource",null),w([S({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],Ie.prototype,"spatialReference",void 0),w([S({type:Number})],Ie.prototype,"subtypeCode",void 0),w([S({type:[s6]})],Ie.prototype,"templates",void 0),w([me("templates",["editFieldsInfo","creatorField","editorField","templates"])],Ie.prototype,"readTemplates",null),w([S({type:cC})],Ie.prototype,"timeInfo",void 0),w([S()],Ie.prototype,"title",void 0),w([me("service","title",["name"]),me("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],Ie.prototype,"readTitle",null),w([me("web-map","title",["layerDefinition.name","title"])],Ie.prototype,"readTitleFromWebMap",null),w([S({type:String})],Ie.prototype,"sublayerTitleMode",void 0),w([S({json:{read:!1}})],Ie.prototype,"type",void 0),w([S({type:String})],Ie.prototype,"typeIdField",void 0),w([me("service","typeIdField"),me("typeIdField",["layerDefinition.typeIdField"])],Ie.prototype,"readTypeIdField",null),w([S({type:[pC]})],Ie.prototype,"types",void 0),w([me("service","types",["types"]),me("types",["layerDefinition.types"])],Ie.prototype,"readTypes",null),w([S({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],Ie.prototype,"visible",void 0),w([me("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],Ie.prototype,"readVisible",null),Ie=w([B(dC)],Ie);const fC=Ie,Fde=Object.freeze(Object.defineProperty({__proto__:null,default:fC},Symbol.toStringTag,{value:"Module"}));function dae(e,t){for(var i=0;i<t.length;i++){const s=t[i];if(typeof s!="string"&&!Array.isArray(s)){for(const u in s)if(u!=="default"&&!(u in e)){const d=Object.getOwnPropertyDescriptor(s,u);d&&Object.defineProperty(e,u,d.get?d:{enumerable:!0,get:()=>s[u]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var yC={exports:{}};(function(e,t){function i(){function u(h){if(typeof h=="number")return q.Tc.Zg(h);if(h==null)return null;if(ls[h]!=null)return q.Tc.Zg(ls[h]);throw Error("Unrecognised Unit Type")}function d(h){if(typeof h=="number")return q.Tc.Zg(h);if(h==null)return null;if(Ed[h]!=null)return q.Tc.Zg(Ed[h]);throw Error("Unrecognised Unit Type")}function y(h){if(h)switch(h){case"loxodrome":return 1;case"great-elliptic":return 2;case"normal-section":return 3;case"shape-preserving":return 4}return 0}function v(h,k,g,l){if(g==null||g.B())return null;switch(g.getType()){case q.qn.Point:return h.exportPoint(k,g,l);case q.qn.Polygon:return h.exportPolygon(k,g,l);case q.qn.Polyline:return h.exportPolyline(k,g,l);case q.qn.MultiPoint:return h.exportMultipoint(k,g,l);case q.qn.Envelope:return h.exportExtent(k,g,l)}return null}function _(h,k,g,l){if(g.getType()!==q.qn.Point)throw Error("Geometry not Point");return h.exportPoint(k,g,l)}function M(h,k,g){return h.convertToGEGeometry(k,g)}function E(h){var k=h.wkid;h=h.wkt2||h.wkt;var g=In.get(k||h);return g==null&&(k!==-1&&k!=null?(g=q.Eg.create(k),In.set(k,g)):h&&(g=q.Eg.qP(h),In.set(h,g)),wo.has(k||h)&&g.VW(wo.get(k||h))),g}function O(h){var k,g,l;if(h==null)return null;var o=E(h);return h=o.Hd(),o=o.Kn(),(k={}).tolerance=o,k.unitType=h==null?-1:h.od,k.unitID=h==null?-1:h.Ec(),k.unitBaseFactor=h==null?0:h.ai,k.unitSquareDerivative=h==null?0:(l=(g=q.Tc.aG(h))===null||g===void 0?void 0:g.Ec())!==null&&l!==void 0?l:0,k}function C(h,k,g,l){return g==null?null:(g=q.$b.clip(M(h,ge,g),M(h,ge,l),E(k)),v(h,ge,g,k))}function R(h,k,g,l){g=q.$b.dl(M(h,ge,g),M(h,ge,l),E(k)),l=[];for(var o=0;o<g.length;o++)l.push(v(h,ge,g[o],k));return l}function L(h,k,g,l){if(g==null||l==null)throw Error("Illegal Argument Exception");return q.$b.contains(M(h,ge,g),M(h,ge,l),E(k))}function G(h,k,g,l){if(g==null||l==null)throw Error("Illegal Argument Exception");return q.$b.BP(M(h,ge,g),M(h,ge,l),E(k))}function U(h,k,g,l,o){if(g==null||l==null)throw Error("Illegal Argument Exception");return q.$b.tb(M(h,ge,g),M(h,ge,l),E(k),u(o))}function K(h,k,g,l){return!(g==null&&l!=null||l==null&&g!=null)&&q.$b.Nb(M(h,ge,g),M(h,ge,l),E(k))}function ee(h,k,g,l){if(g==null||l==null)throw Error("Illegal Argument Exception");return q.$b.TS(M(h,ge,g),M(h,ge,l),E(k))}function Q(h,k,g,l){if(g==null||l==null)throw Error("Illegal Argument Exception");return q.$b.touches(M(h,ge,g),M(h,ge,l),E(k))}function re(h,k,g,l){if(g==null||l==null)throw Error("Illegal Argument Exception");return q.$b.qY(M(h,ge,g),M(h,ge,l),E(k))}function ne(h,k,g,l){if(g==null||l==null)throw Error("Illegal Argument Exception");return q.$b.TP(M(h,ge,g),M(h,ge,l),E(k))}function le(h,k,g,l){if(g==null||l==null)throw Error("Illegal Argument Exception");return q.$b.DU(M(h,ge,g),M(h,ge,l),E(k))}function ve(h,k,g,l,o){if(g==null||l==null)throw Error("Illegal Argument Exception");return q.$b.yB(M(h,ge,g),M(h,ge,l),E(k),o)}function we(h,k,g){if(g==null)throw Error("Illegal Argument Exception");return q.$b.dT(M(h,ge,g),E(k))}function Ee(h,k,g){if(g==null)throw Error("Illegal Argument Exception");return g=q.$b.eC(M(h,ge,g),E(k)),v(h,ge,g,k)}function Me(h,k,g,l){if(l===void 0&&(l=!1),g==null)throw Error("Illegal Argument Exception");if(Array.isArray(g)){var o=l,r=[];for(l=0;l<g.length;l++)r.push(M(h,ge,g[l]));for(g=q.$b.jP(r,o),o=Array(g.length),l=0;l<g.length;l++)o[l]=v(h,ge,g[l],k);return o}return l=q.$b.iP(M(h,ge,g),E(k)),v(h,ge,l,k)}function Le(h,k,g,l){if(g==null||l==null)throw Error("Illegal Argument Exception");if(Array.isArray(g)){for(var o=[],r=0;r<g.length;r++)o.push(M(h,ge,g[r]));for(g=q.$b.QP(o,M(h,ge,l),E(k)),l=Array(g.length),r=0;r<g.length;r++)l[r]=v(h,ge,g[r],k);return l}return r=q.$b.im(M(h,ge,g),M(h,ge,l),E(k)),v(h,ge,r,k)}function Fe(h,k,g,l){if(g==null||l==null)throw Error("Illegal Argument Exception");if(Array.isArray(g)){for(var o=[],r=0;r<g.length;r++)o.push(M(h,ge,g[r]));for(g=q.$b.VX(o,M(h,ge,l),E(k)),l=Array(g.length),r=0;r<g.length;r++)l[r]=v(h,ge,g[r],k);return l}return r=q.$b.ep(M(h,ge,g),M(h,ge,l),E(k)),v(h,ge,r,k)}function it(h,k,g,l){if(g==null||l==null)throw Error("Illegal Argument Exception");if(Array.isArray(g)){for(var o=[],r=0;r<g.length;r++)o.push(M(h,ge,g[r]));for(g=q.$b.RS(o,M(h,ge,l),E(k)),l=Array(g.length),r=0;r<g.length;r++)l[r]=v(h,ge,g[r],k);return l}return r=q.$b.Ea(M(h,ge,g),M(h,ge,l),E(k)),v(h,ge,r,k)}function Ce(h,k,g,l){if(g==null)return null;var o=[];if(Array.isArray(g)){if(g.length===0)return null;for(l=0;l<g.length;l++)o.push(M(h,ge,g[l]))}else o.push(M(h,ge,g)),l!=null&&o.push(M(h,ge,l));return v(h,ge,q.$b.jY(o,E(k)),k)}function Ut(h,k,g,l,o,r,n,a){var c=0;if(r!=null)switch(r){case"round":c=0;break;case"bevel":c=1;break;case"miter":c=2;break;case"square":c=3}if(Array.isArray(g)){if(g==null)h=null;else if(g.length===0)h=[];else{var p=[];for(r=0;r<g.length;r++)p.push(M(h,ge,g[r]));for(g=q.$b.BU(p,E(k),l,c,n,a,u(o)),l=Array(g.length),r=0;r<g.length;r++)l[r]=v(h,ge,g[r],k);h=l}return h}return g=q.$b.offset(M(h,ge,g),E(k),l,c,n,a,u(o)),v(h,ge,g,k)}function vr(h,k,g,l,o,r){if(r===void 0&&(r=!1),Array.isArray(g)){if(!Array.isArray(l)){for(var n=[],a=0;a<g.length;a++)n.push(l);l=n}if(l.length!=g.length){if(l.length==0)throw Error("Illegal Argument Exception");n=[];var c=0;for(a=0;a<g.length;a++)l[a]===void 0?n.push(c):(n.push(l[a]),c=l[a]);l=n}return lt(h,k,g,l,o,!1,r,"geodesic",NaN)}return g=q.$b.buffer(M(h,ge,g),E(k),l,u(o),!1,0,NaN),v(h,ge,g,k)}function Dt(h,k,g,l,o,r,n,a){if(Array.isArray(g)){if(!Array.isArray(l)){for(var c=[],p=0;p<g.length;p++)c.push(l);l=c}if(l.length!==g.length){if(l.length===0)throw Error("Illegal Argument Exception");c=[];var f=0;for(p=0;p<g.length;p++)l[p]===void 0?c.push(f):(c.push(l[p]),f=l[p]);l=c}return lt(h,k,g,l,o,!0,r,n,a)}return n===void 0&&(n=NaN),g=q.$b.buffer(M(h,ge,g),E(k),l,u(o),!0,y(r),n),v(h,ge,g,k)}function lt(h,k,g,l,o,r,n,a,c){if(c===void 0&&(c=NaN),g==null)return null;if(g.length===0)return[];for(var p=[],f=0;f<g.length;f++)p.push(M(h,ge,g[f]));for(g=q.$b.MN(p,E(k),l,u(o),r,n,y(a),c),l=Array(g.length),f=0;f<g.length;f++)l[f]=v(h,ge,g[f],k);return l}function wr(h,k,g,l,o){var r;return o===void 0&&(o=!0),g=q.$b.nz(M(h,ge,g),M(h,ge,l),o),(r={}).coordinate=_(h,ge,g.fz(),k),r.distance=g.hz(),r.isRightSide=g.Sz(),r.vertexIndex=g.Ua(),r.isEmpty=g.B(),r}function yg(h,k,g,l){var o;return g=q.$b.oz(M(h,ge,g),M(h,ge,l)),(o={}).coordinate=_(h,ge,g.fz(),k),o.distance=g.hz(),o.isRightSide=g.Sz(),o.vertexIndex=g.Ua(),o.isEmpty=g.B(),o}function Sd(h,k,g,l,o,r){var n;for(g=q.$b.pz(M(h,ge,g),M(h,ge,l),o,r),l=[],o=0;o<g.length;o++)g[o].B()===!1&&l.push(((n={}).coordinate=_(h,ge,g[o].fz(),k),n.distance=g[o].hz(),n.isRightSide=g[o].Sz(),n.vertexIndex=g[o].Ua(),n.isEmpty=g[o].B(),n));return l}function mg(h,k,g,l,o,r){return g=q.$b.QQ(M(h,ge,g),E(k),l,o,u(r)),v(h,ge,g,k)}function $d(h,k,g,l,o){return g=q.$b.Qr(M(h,ge,g),E(k),l,u(o)),v(h,ge,g,k)}function gg(h,k,g,l,o,r){return r===void 0&&(r=0),g=q.$b.Wy(M(h,ge,g),E(k),l,u(o),r),v(h,ge,g,k)}function vg(h,k,g,l){if(g==null)throw Error("Illegal Argument Exception");return q.$b.JU(M(h,ge,g),E(k),d(l))}function wg(h,k,g,l){if(g==null)throw Error("Illegal Argument Exception");return q.$b.KU(M(h,ge,g),E(k),u(l))}function Td(h,k,g,l,o){if(g==null)throw Error("Illegal Argument Exception");return q.$b.WQ(M(h,ge,g),E(k),d(l),y(o))}function bg(h,k,g,l,o){if(g==null)throw Error("Illegal Argument Exception");return q.$b.ZQ(M(h,ge,g),E(k),u(l),y(o))}function _g(h){q.NL.bind(h)}function xg(h,k,g,l,o){var r=null,n=null;if(l){if(!o)throw q.i.N("AOI missing Spatial Reference");r=M(h,ge,l),n=E(o).fh()}return(h=q.gu.XR(E(k).fh(),E(g).fh(),r,n))!==null?h:null}function Sg(h,k,g,l,o){var r=null,n=null;if(l){if(!o)throw q.i.N("AOI missing Spatial Reference");r=M(h,ge,l),n=E(o).fh()}return q.gu.YR(E(k).fh(),E(g).fh(),r,n)}function $g(h,k,g,l,o,r){if(o===void 0&&(o=null),r===void 0&&(r=null),r){var n=new q.yC;n.Vu=r.densificationStep,n.Jr=r.centralMeridianOfOutputGCS,r.clipWithInputHorizon&&n.PW(r.clipWithInputHorizon),r.clipWithOutputHorizon&&n.QW(r.clipWithOutputHorizon)}if(this.KY===!1)throw Error("Projection Engine must be enabled using enableProjection");if(k.length===0)return[];if(o){if(!(r=o.getCachedGeTransformation(g,l)))e:{if(r=o,o=null,r){var a=r.getGTListEntry();if(a!==null){o=new q.wC(null);for(var c=0,p=a.steps;c<p.length;c++){a=p[c];var f=new q.Dx(a.geogtran);a.isInverse&&f.Qz(),o.add(f)}n=q.vr.Nr(E(g).fh(),E(l).fh(),o,n),r.assignCachedGe(g,l,n),r=n;break e}}if(o===null&&r&&r.steps&&0<r.steps.length){for(o=new q.wC(null),c=0,p=r.steps;c<p.length;c++)(a=p[c]).wkid!=-1&&a.wkid!=null?o.add(q.Dx.create(a.wkid,a.isInverse)):o.add(q.Dx.uP(a.wkt,a.isInverse));n=q.vr.Nr(E(g).fh(),E(l).fh(),o,n),r.assignCachedGe(g,l,n),r=n}else r=q.vr.Nr(E(g).fh(),E(l).fh(),o,n)}for(g=[],o=0;o<k.length;o++)n=k[o],g.push(Md(h,n,l,r))}else for(r=q.vr.Nr(E(g).fh(),E(l).fh(),null),g=[],o=0;o<k.length;o++)n=k[o],g.push(Md(h,n,l,r));return g}function Md(h,k,g,l){return k=q.$b.zh(M(h,ge,k),l),v(h,ge,k,g)}function Tg(h,k){h!=null&&(h=h.wkid||h.wkt2||h.wkt,wo.has(h),wo.set(h,k),In.has(h)&&In.delete(h))}function Mg(h){h!=null&&(h=h.wkid||h.wkt2||h.wkt,wo.has(h)&&(wo.delete(h),In.has(h)&&In.delete(h)))}function Ig(h,k,g,l){if(g==null||l==null)return[];var o=[],r=0;for(g=q.$b.QS(M(h,ge,g),M(h,ge,l),E(k))||[];r<g.length;r++)o.push(v(h,ge,g[r],k));return o}var ti,q,Oi,Id,nt=this&&this.__extends||function(){function h(k,g){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,o){l.__proto__=o}||function(l,o){for(var r in o)o.hasOwnProperty(r)&&(l[r]=o[r])})(k,g)}return function(k,g){function l(){this.constructor=k}h(k,g),k.prototype=g===null?Object.create(g):(l.prototype=g.prototype,new l)}}();(function(h){var k;(k=h.qn||(h.qn={}))[k.Unknown=0]="Unknown",k[k.Point=33]="Point",k[k.Line=322]="Line",k[k.Envelope=197]="Envelope",k[k.MultiPoint=550]="MultiPoint",k[k.Polyline=1607]="Polyline",k[k.Polygon=1736]="Polygon",function(l){l[l.enumMild=0]="enumMild",l[l.enumMedium=1]="enumMedium",l[l.enumHot=2]="enumHot"}(h.YK||(h.YK={}));var g=function(){function l(){this.description=null,this.VA=0}return l.prototype.getType=function(){return 0},l.prototype.Db=function(){return-1},l.prototype.Nf=function(o){this.vc(),o!=this.description&&this.sn(o)},l.prototype.sn=function(){},l.prototype.Jl=function(o){this.vc(),o!=this.description&&(o=h.ee.CR(this.description,o))!=this.description&&this.sn(o)},l.prototype.hasAttribute=function(o){return this.description.hasAttribute(o)},l.prototype.re=function(o){this.vc(),this.description.hasAttribute(o)||(o=h.ee.BR(this.description,o),this.sn(o))},l.prototype.Tg=function(){return null},l.prototype.bn=function(){},l.prototype.A=function(){},l.prototype.Qo=function(){},l.prototype.xc=function(o){this.A(o)},l.prototype.B=function(){return!0},l.prototype.Oa=function(){},l.prototype.Oc=function(){},l.prototype.Ia=function(){return null},l.prototype.copyTo=function(){},l.prototype.Ke=function(){return 0},l.prototype.Qb=function(){return 0},l.prototype.iG=function(){return this.hasAttribute(1)},l.tf=function(o){return 1+((192&o)>>6)>>1},l.Rn=function(o){return(32&o)!=0},l.US=function(o){return(128&o)!=0},l.yd=function(o){return(256&o)!=0},l.xj=function(o){return(512&o)!=0},l.Hc=function(o){return(1024&o)!=0},l.prototype.Of=function(){var o=this.Ia();return this.copyTo(o),o},l.prototype.mg=function(){return null},l.jg=function(o){var r=o.Ia();return o.copyTo(r),r},l.prototype.vc=function(){0<=this.VA&&(this.VA+=2147483649)},l.Ax=function(o){var r=o.getType();if(l.xj(r))return o.I();if(o.B())return 0;if(r==197)return 4;if(r==33)return 1;if(l.yd(r))return 2;throw h.i.fa("missing type")},l}();h.aa=g})(q||(q={})),Oi=q||(q={}),Id=function(){function h(){this.y=this.x=0}return h.construct=function(k,g){var l=new h;return l.x=k,l.y=g,l},h.al=function(k){var g=new h;return g.x=k.x,g.y=k.y,g},h.prototype.ma=function(k,g){this.x=k,this.y=g},h.prototype.L=function(k){this.x=k.x,this.y=k.y},h.prototype.fq=function(k,g){return this.x===k&&this.y===g},h.prototype.Rz=function(k){return 2220446049250313e-31>=Math.abs(this.x-k.x)&&2220446049250313e-31>=Math.abs(this.y-k.y)},h.prototype.qb=function(k){return this.x===k.x&&this.y===k.y},h.prototype.Nb=function(k){return k==this||k instanceof h&&this.x==k.x&&this.y==k.y},h.prototype.sub=function(k){this.x-=k.x,this.y-=k.y},h.prototype.uc=function(k,g){this.x=k.x-g.x,this.y=k.y-g.y},h.prototype.add=function(k,g){g!==void 0?(this.x=k.x+g.x,this.y=k.y+g.y):(this.x+=k.x,this.y+=k.y)},h.prototype.Sq=function(){this.x=-this.x,this.y=-this.y},h.prototype.mt=function(k){this.x=-k.x,this.y=-k.y},h.prototype.NS=function(k,g,l){this.x=k.x*(1-l)+g.x*l,this.y=k.y*(1-l)+g.y*l},h.prototype.Ct=function(k,g){this.x=this.x*k+g.x,this.y=this.y*k+g.y},h.prototype.HW=function(k,g,l){this.x=g.x*k+l.x,this.y=g.y*k+l.y},h.prototype.scale=function(k){this.x*=k,this.y*=k},h.prototype.compare=function(k){return this.y<k.y?-1:this.y>k.y?1:this.x<k.x?-1:this.x>k.x?1:0},h.prototype.normalize=function(){var k=this.length();k==0&&(this.x=1,this.y=0),this.x/=k,this.y/=k},h.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},h.prototype.Sk=function(){return this.x*this.x+this.y*this.y},h.tb=function(k,g){return Math.sqrt(this.yc(k,g))},h.Oy=function(k,g,l,o){return k-=l,g-=o,Math.sqrt(k*k+g*g)},h.prototype.Qh=function(k){return this.x*k.x+this.y*k.y},h.prototype.fD=function(k){return Math.abs(this.x*k.x)+Math.abs(this.y*k.y)},h.prototype.wi=function(k){return this.x*k.y-this.y*k.x},h.prototype.Bt=function(k,g){var l=-this.x*g+this.y*k;this.x=this.x*k+this.y*g,this.y=l},h.prototype.Hv=function(){var k=this.x;this.x=-this.y,this.y=k},h.prototype.MG=function(k){this.x=-k.y,this.y=k.x},h.prototype.ar=function(){var k=this.x;this.x=this.y,this.y=-k},h.prototype.qu=function(){return 0<this.x?0<=this.y?1:4:0<this.y?2:this.x==0?4:3},h.nu=function(k,g){var l=k.qu(),o=g.qu();return o==l?0>(k=k.wi(g))?1:0<k?-1:0:l<o?-1:1},h.yc=function(k,g){var l=k.x-g.x;return l*l+(k=k.y-g.y)*k},h.prototype.toString=function(){return"("+this.x+" , "+this.y+")"},h.prototype.Rc=function(){this.y=this.x=NaN},h.prototype.isNaN=function(){return isNaN(this.x)||isNaN(this.y)},h.prototype.offset=function(k,g){var l=h.tb(k,g),o=h.construct(this.x,this.y);if(l==0)return h.tb(o,k);var r=new h;return r.L(g),r.sub(k),o.sub(k),o.wi(r)/l},h.Uq=function(k,g,l){var o=new Oi.Wb;o.set(g.x),o.sub(k.x);var r=new Oi.Wb;r.set(l.y),r.sub(k.y);var n=new Oi.Wb;n.set(g.y),n.sub(k.y);var a=new Oi.Wb;return a.set(l.x),a.sub(k.x),o.Ag(r),n.Ag(a),o.sub(n),o.ps()?(o=new Oi.hp(g.x),r=new Oi.hp(k.x),n=new Oi.hp(k.y),o=o.jt(r),k=(k=new Oi.hp(l.y)).jt(n),g=(g=new Oi.hp(g.y)).jt(n),l=(l=new Oi.hp(l.x)).jt(r),o=o.lr(k),g=g.lr(l),(o=o.lr(g)).nT()?-1:o.fS()?1:0):0>(l=o.value())?-1:0<l?1:0},h.prototype.cc=function(){return Oi.O.uj(Oi.O.uj())},h}(),Oi.h=Id,function(h){var k=function(){function g(l){this.Fy=this.Mt=0,this.OX=l}return g.prototype.reset=function(){this.Fy=this.Mt=0},g.prototype.add=function(l){l-=this.Fy;var o=this.Mt+l;this.Fy=o-this.Mt-l,this.Mt=o},g.prototype.sub=function(l){this.add(-l)},g.prototype.rm=function(){return this.OX+this.Mt},g}();h.Fx=k,h.lc=function(){function g(){}return g.Cn=function(l,o){return 0<=o?Math.abs(l):-Math.abs(l)},g.sign=function(l){return 0>l?-1:0<l?1:0},g.RK=function(l){return l-360*Math.floor(l/360)},g.round=function(l){return Math.floor(l+.5)},g.ox=function(l){return l*l},g.hq=function(l,o,r){return .5>=r?l+(o-l)*r:o-(o-l)*(1-r)},g.OG=function(l,o,r,n){.5>=r?(n.x=l.x+(o.x-l.x)*r,n.y=l.y+(o.y-l.y)*r):(n.x=o.x-(o.x-l.x)*(1-r),n.y=o.y-(o.y-l.y)*(1-r))},g.lT=function(l,o,r,n,a,c){.5>=a?(c.x=l+(r-l)*a,c.y=o+(n-o)*a):(c.x=r-(r-l)*(1-a),c.y=n-(n-o)*(1-a))},g}()}(q||(q={})),function(h){var k=function(g){function l(){var o=g.call(this)||this;return o.sa=0,o.na=0,o.pa=0,o.la=0,o.ka=null,o}return nt(l,g),l.prototype.ac=function(){return h.h.construct(this.sa,this.na)},l.prototype.Yp=function(o){o.x=this.sa,o.y=this.na},l.prototype.Dc=function(o){this.em(0,o)},l.prototype.ZB=function(o,r){this.em(0,h.h.construct(o,r))},l.prototype.To=function(o){this.hD(0,o)},l.prototype.setStart=function(o){this.uD(0,o)},l.prototype.wv=function(o,r){return this.Od(0,o,r)},l.prototype.YB=function(o,r,n){this.tn(0,o,r,n)},l.prototype.wc=function(){return h.h.construct(this.pa,this.la)},l.prototype.Tr=function(o){o.x=this.pa,o.y=this.la},l.prototype.Qc=function(o){this.em(1,o)},l.prototype.Ql=function(o,r){this.em(1,h.h.construct(o,r))},l.prototype.Po=function(o){this.hD(1,o)},l.prototype.setEnd=function(o){this.uD(1,o)},l.prototype.gv=function(o,r){return this.Od(1,o,r)},l.prototype.OB=function(o,r,n){this.tn(1,o,r,n)},l.prototype.Db=function(){return 1},l.prototype.B=function(){return this.Ac()},l.prototype.Oa=function(){},l.prototype.Ke=function(){return 0},l.prototype.Ea=function(o,r,n,a,c){return this.KM(o,r,n,a,c)},l.prototype.isIntersecting=function(o,r){return this.zr(o,r,!1)!=0},l.prototype.qs=function(o,r){return this.ru(o,r,!1)},l.prototype.ru=function(){return null},l.prototype.Ac=function(){return!1},l.prototype.ay=function(o){if(this.vc(),this.ka==null&&0<o)this.ka=h.O.lg(2*o);else if(this.ka!=null&&this.ka.length<2*o){for(var r=this.ka.slice(0),n=this.ka.length;n<2*o;n++)r[n]=0;this.ka=r}},l.gM=function(o,r,n){if(0<n)var a=0;for(var c=0;c<n;c++)r[0+a]=o[0],a++},l.prototype.em=function(o,r){o!=0?(this.pa=r.x,this.la=r.y):(this.sa=r.x,this.na=r.y)},l.prototype.sn=function(o){if(this.ka!=null){for(var r=h.ee.Iw(o,this.description),n=[],a=l.Gg(this.description,0),c=l.Gg(this.description,1),p=l.Gg(o,0),f=l.Gg(o,1),m=0,b=1,x=o.Aa;b<x;b++){var T=o.kd(b),I=h.ra.Va(T);if(r[b]==-1){var A=h.ra.se(T);for(T=0;T<I;T++)n[p+m]=A,n[f+m]=A,m++}else for(A=this.description.$j(r[b])-2,T=0;T<I;T++)n[p+m]=this.ka[a+A],n[f+m]=this.ka[c+A],m++,A++}this.ka=n}this.description=o},l.prototype.hD=function(o,r){if(this.Ac())throw h.i.fa("empty geometry");r.Nf(this.description),r.Ac()&&r.un();for(var n=0;n<this.description.Aa;n++)for(var a=this.description.Ed(n),c=0,p=h.ra.Va(a);c<p;c++){var f=this.Od(o,a,c);r.setAttribute(a,c,f)}},l.prototype.uD=function(o,r){if(this.vc(),r.Ac())throw h.i.fa("empty geometry");for(var n=r.description,a=0,c=n.Aa;a<c;a++)for(var p=n.Ed(a),f=h.ra.Va(p),m=0;m<f;m++){var b=r.Uc(p,m);this.tn(o,p,m,b)}},l.prototype.Od=function(o,r,n){if(this.Ac())throw h.i.fa("This operation was performed on an Empty Geometry.");if(r==0)return o!=0?n!=0?this.la:this.pa:n!=0?this.na:this.sa;if(n>=h.ra.Va(r))throw h.i.ce();var a=this.description.Pf(r);return 0<=a?(this.ka!=null&&this.ay(this.description.Ae.length-2),this.ka[l.Gg(this.description,o)+this.description.$j(a)-2+n]):h.ra.se(r)},l.prototype.tn=function(o,r,n,a){if(this.vc(),n>=h.ra.Va(r))throw h.i.ce();var c=this.description.Pf(r);0>c&&(this.re(r),c=this.description.Pf(r)),r==0?o!=0?n!=0?this.la=a:this.pa=a:n!=0?this.na=a:this.sa=a:(this.ka==null&&this.ay(this.description.Ae.length-2),this.ka[l.Gg(this.description,o)+this.description.$j(c)-2+n]=a)},l.prototype.copyTo=function(o){if(o.getType()!=this.getType())throw h.i.N();o.description=this.description,o.ay(this.description.Ae.length-2),l.gM(this.ka,o.ka,2*(this.description.Ae.length-2)),o.sa=this.sa,o.na=this.na,o.pa=this.pa,o.la=this.la,o.vc(),this.op(o)},l.prototype.Tg=function(o,r){var n=new h.Nc;return this.Ac()?(n.Oa(),n):(n.oa=this.Od(0,o,r),n.va=n.oa,n.Lk(this.Od(1,o,r)),n)},l.prototype.ZI=function(o){this.Ac()?o.Oa():(o.oa=this.Od(0,0,0),o.va=o.oa,o.Lk(this.Od(1,0,0)))},l.prototype.Tw=function(o,r){r.Nf(this.description),r.Cb(this.hc(o));for(var n=1,a=this.description.Aa;n<a;n++)for(var c=this.description.Ed(n),p=h.ra.Va(c),f=0;f<p;f++){var m=this.Uc(o,c,f);r.setAttribute(c,f,m)}},l.prototype.FM=function(o){if(this.description!=o.description||this.sa!=o.sa||this.pa!=o.pa||this.na!=o.na||this.la!=o.la)return!1;for(var r=0;r<2*(this.description.Ae.length-2);r++)if(this.ka[r]!=o.ka[r])return!1;return!0},l.prototype.BG=function(){return this.sa==this.pa&&this.na==this.la},l.prototype.reverse=function(){var o=this.sa;this.sa=this.pa,this.pa=o,o=this.na,this.na=this.la,this.la=o,o=1;for(var r=this.description.Aa;o<r;o++)for(var n=this.description.kd(o),a=0,c=h.ra.Va(n);a<c;a++){var p=this.Od(0,n,a),f=this.Od(1,n,a);this.tn(0,n,a,f),this.tn(1,n,a,p)}},l.prototype.zr=function(o,r,n){var a=this.getType(),c=o.getType();if(a===322){if(c==322)return h.yb.OM(this,o,r,n);throw h.i.Qa()}throw h.i.Qa()},l.prototype.KM=function(o,r,n,a,c){var p=this.getType(),f=o.getType();if(p===322){if(f==322)return h.yb.Zx(this,o,r,n,a,c);throw h.i.Qa()}throw h.i.Qa()},l.prototype.Tx=function(){return null},l.Gg=function(o,r){return r*(o.Ae.length-2)},l.prototype.hc=function(o,r){if(r===void 0)return r=new h.h,this.hc(o,r),r;h.lc.lT(this.sa,this.na,this.pa,this.la,o,r)},l.prototype.fe=function(){return null},l.prototype.eG=function(){return null},l.prototype.cq=function(){return null},l.prototype.Bi=function(){return null},l.prototype.Pn=function(){return null},l.prototype.kg=function(){return null},l.prototype.Ux=function(o,r){return r!==void 0?this.vx(r)-this.vx(o):this.vx(o)},l.prototype.op=function(){},l.prototype.dl=function(){return null},l.prototype.ah=function(){},l.prototype.Uc=function(){return null},l.prototype.Pe=function(){return null},l.prototype.vx=function(){return null},l.prototype.NG=function(){return null},l.prototype.tb=function(o,r){if(!r&&this.zr(o,0,!1)!=0)return 0;r=17976931348623157e292;var n=this.ac(),a=o.fe(n,!1);return n.sub(o.hc(a)),(n=n.length())<r&&(r=n),n=this.wc(),a=o.fe(n,!1),n.sub(o.hc(a)),(n=n.length())<r&&(r=n),n=o.ac(),a=this.fe(n,!1),n.sub(this.hc(a)),(n=n.length())<r&&(r=n),n=o.wc(),a=this.fe(n,!1),n.sub(this.hc(a)),(n=n.length())<r&&(r=n),r},l.prototype.mg=function(){return h.pi.gm(this,null)},l}(h.aa);h.SC=k}(q||(q={})),new q.h,function(h){var k;(k=h.$K||(h.$K={}))[k.Unknown=-1]="Unknown",k[k.Not=0]="Not",k[k.Weak=1]="Weak",k[k.Strong=2]="Strong",function(l){l[l.DirtyIsKnownSimple=1]="DirtyIsKnownSimple",l[l.IsWeakSimple=2]="IsWeakSimple",l[l.IsStrongSimple=4]="IsStrongSimple",l[l.DirtyOGCFlags=8]="DirtyOGCFlags",l[l.DirtyVerifiedStreams=32]="DirtyVerifiedStreams",l[l.DirtyExactIntervals=64]="DirtyExactIntervals",l[l.DirtyLooseIntervals=128]="DirtyLooseIntervals",l[l.DirtyIntervals=192]="DirtyIntervals",l[l.DirtyIsEnvelope=256]="DirtyIsEnvelope",l[l.DirtyLength2D=512]="DirtyLength2D",l[l.DirtyRingAreas2D=1024]="DirtyRingAreas2D",l[l.DirtyCoordinates=1993]="DirtyCoordinates",l[l.DirtyAllInternal=65535]="DirtyAllInternal",l[l.DirtyAll=16777215]="DirtyAll"}(h.MK||(h.MK={}));var g=function(l){function o(){var r=l.call(this)||this;return r.Hm=65535,r.wa=0,r.Pg=-1,r.Bb=null,r}return nt(o,l),o.prototype.op=function(){},o.prototype.$x=function(){},o.prototype.iy=function(){},o.prototype.I=function(){return this.wa},o.prototype.B=function(){return this.Ac()},o.prototype.Ac=function(){return this.wa==0},o.prototype.ak=function(r){return(this.Hm&r)!=0},o.prototype.Lf=function(r,n){this.Hm=n?this.Hm|r:this.Hm&~r},o.prototype.mc=function(){this.ak(32)&&this.bN()},o.prototype.wx=function(){if(this.Ac())throw h.i.fa("This operation was performed on an Empty Geometry.")},o.prototype.ve=function(r,n){if(0>r||r>=this.wa)throw h.i.fa("index out of bounds");this.mc(),n.Nf(this.description),n.B()&&n.un();for(var a=0;a<this.description.Aa;a++)for(var c=this.description.Ed(a),p=0,f=h.ra.Va(c);p<f;p++){var m=this.za[a].eg(f*r+p);n.setAttribute(c,p,m)}},o.prototype.Ht=function(r,n){this.mc();for(var a=n.description,c=0;c<a.Aa;c++)for(var p=a.Ed(c),f=h.ra.Va(p),m=0;m<f;m++){var b=n.Uc(p,m);this.setAttribute(p,r,m,b)}},o.prototype.D=function(r,n){if(0>r||r>=this.I())throw h.i.ce();this.mc(),this.za[0].tc(2*r,n)},o.prototype.Na=function(r){var n=new h.h;return this.D(r,n),n},o.prototype.Gc=function(r,n){this.za[0].tc(2*r,n)},o.prototype.Cb=function(r,n,a){if(0>r||r>=this.wa)throw h.i.ce();this.mc();var c=this.za[0];a!==void 0?(c.write(2*r,n),c.write(2*r+1,a)):c.Tt(2*r,n),this.Pc(1993)},o.prototype.Cz=function(){if(void 0>=this.I())throw h.i.ce();this.mc();var r=this.za[0],n=new h.Nd;return n.x=r.read(NaN),n.y=r.read(NaN),n.z=this.hasAttribute(1)?this.za[1].eg():h.ra.se(1),n},o.prototype.dC=function(r){if(0>r||r>=this.I())throw h.i.ce();this.re(1),this.mc(),this.Pc(1993);var n=this.za[0];n.write(2*r,(void 0).x),n.write(2*r+1,(void 0).y),this.za[1].pr(r,(void 0).z)},o.prototype.Uc=function(r,n,a){if(0>n||n>=this.wa)throw h.i.ce();var c=h.ra.Va(r);if(a>=c)throw h.i.ce();this.mc();var p=this.description.Pf(r);return 0<=p?this.za[p].eg(n*c+a):h.ra.se(r)},o.prototype.yF=function(r,n){return this.Uc(r,n)},o.prototype.setAttribute=function(r,n,a,c){if(0>n||n>=this.wa)throw h.i.ce();var p=h.ra.Va(r);if(a>=p)throw h.i.ce();this.re(r),this.mc(),r=this.description.Pf(r),this.Pc(1993),this.za[r].pr(n*p+a,c)},o.prototype.ub=function(r){return this.wx(),this.re(r),this.mc(),this.za[this.description.Pf(r)]},o.prototype.hn=function(r,n){if(n!=null&&h.ra.Tp(r)!=n.Tp())throw h.i.N();this.re(r),r=this.description.Pf(r),this.za==null&&(this.za=h.Yc.qI(this.description.Aa)),this.za[r]=n,this.Pc(16777215)},o.prototype.sn=function(r){var n=null;if(this.za!=null){var a=h.ee.Iw(r,this.description);n=[];for(var c=0,p=r.Aa;c<p;c++)a[c]!=-1&&(n[c]=this.za[a[c]])}this.description=r,this.za=n,this.Pg=-1,this.Pc(16777215)},o.prototype.AD=function(r){this.wu(!0),r instanceof h.l?this.$.A(r):this.$.Qo(r)},o.prototype.aN=function(r){this.wu(!1),r instanceof h.l?this.$.A(r):this.$.Qo(r)},o.prototype.bn=function(r){this.wu(!0),this.$.copyTo(r)},o.prototype.A=function(r){this.AD(r)},o.prototype.Qo=function(r){this.AD(r)},o.prototype.xc=function(r){this.aN(r)},o.prototype.Tg=function(r,n){var a=new h.Nc;return this.Ac()?(a.Oa(),a):(this.wu(!0),this.$.Tg(r,n))},o.prototype.cc=function(){var r=this.description.cc();if(!this.Ac())for(var n=this.I(),a=0,c=this.description.Aa;a<c;a++)r=this.za[a].An(r,0,n*h.ra.Va(this.description.Ed(a)));return r},o.prototype.Nb=function(r){if(r==this)return!0;if(!(r instanceof o&&this.description.Nb(r.description))||this.Ac()!=r.Ac())return!1;if(this.Ac())return!0;var n=this.I();if(n!=r.I())return!1;for(var a=0;a<this.description.Aa;a++){var c=this.description.kd(a),p=this.ub(c),f=r.ub(c);if(!p.Nb(f,0,n*h.ra.Va(c)))return!1}return!0},o.prototype.copyTo=function(r){if(r.getType()!=this.getType())throw h.i.N();this.dD(r)},o.prototype.dD=function(r){this.mc(),r.description=this.description,r.za=null;var n=this.description.Aa,a=null;if(this.za!=null){a=[];for(var c=0;c<n;c++)this.za[c]!=null&&(a[c]=this.za[c].GB(this.I()*h.ra.Va(this.description.Ed(c))))}this.$!=null?(r.$=this.$.Ia(),this.$.copyTo(r.$)):r.$=null,r.wa=this.wa,r.Hm=this.Hm,r.za=a;try{this.op(r)}catch{throw r.Oa(),h.i.fu()}},o.prototype.wD=function(){this.wa=0,this.Pg=-1,this.za=null,this.Pc(16777215)},o.prototype.Pc=function(r){r==16777215&&(this.Pg=-1,this.$x()),this.Hm|=r,this.lM(),this.vc()},o.prototype.wu=function(r){if(this.mc(),this.ak(192))if(this.$==null?this.$=new h.Fh(this.description):this.$.Nf(this.description),this.B())this.$.Oa();else{this.hy(r);for(var n=1;n<this.description.Aa;n++)for(var a=this.description.Ed(n),c=h.ra.Va(a),p=this.za[n],f=0;f<c;f++){var m=new h.Nc;m.Oa();for(var b=0;b<this.wa;b++){var x=p.eg(b*c+f);m.Zb(x)}this.$.setInterval(a,f,m)}r&&this.Lf(192,!1)}},o.prototype.hy=function(){this.$.Oa();for(var r=this.za[0],n=new h.h,a=0;a<this.wa;a++)r.tc(2*a,n),this.$.Zb(n)},o.prototype.yp=function(r){r.Oa();for(var n=this.za[0],a=new h.h,c=0;c<this.wa;c++)n.tc(2*c,a),r.Zb(a)},o.prototype.bN=function(){if(this.Pg<this.wa){this.za==null&&(this.za=h.Yc.qI(this.description.Aa)),this.Pg=2147483647;for(var r=0;r<this.description.Aa;r++){var n=this.description.Ed(r);if(this.za[r]!=null){var a=h.ra.Va(n),c=h.O.truncate(this.za[r].size/a);c<this.wa&&(c=h.O.truncate(this.Pg>this.wa+5?(5*this.wa+3)/4:this.wa),this.za[r].resize(c*a,h.ra.se(n))),c<this.Pg&&(this.Pg=c)}else this.za[r]=h.Yc.YE(n,this.wa),this.Pg=this.wa}}this.iy(),this.Lf(32,!1)},o.prototype.dm=function(r){if(0>r)throw h.i.N();r!=this.wa&&(this.wa=r,this.Pc(65535))},o.prototype.om=function(r){if(!this.ak(1)){if(!this.ak(2))return 0;if(this.QT>=r)return this.ak(8)?1:2}return-1},o.prototype.Ch=function(r,n){if(this.QT=n,r==-1)this.Lf(1,!0),this.Lf(8,!0);else if(this.Lf(1,!1),this.Lf(8,!0),r==0)this.Lf(2,!1),this.Lf(4,!1);else if(r==1)this.Lf(2,!0),this.Lf(4,!1);else{if(r!=2)throw h.i.fa("internal error.");this.Lf(2,!0),this.Lf(4,!0)}},o.prototype.lM=function(){this.Bb!=null&&(this.Bb=null)},o.prototype.kD=function(r,n,a,c){if(0>r||r>=this.wa||0>n||n>=this.wa)throw h.i.fa("index out of bounds");this.mc(),c.Nf(this.description),c.B()&&c.un();for(var p=0;p<this.description.Aa;p++)for(var f=this.description.Ed(p),m=0,b=h.ra.Va(f);m<b;m++){var x=this.za[p].eg(b*r+m),T=this.za[p].eg(b*n+m);c.setAttribute(f,m,h.lc.hq(x,T,a))}},o.prototype.yr=function(r,n){var a=this.za[0].o,c=a[2*r]-a[2*n];return r=a[2*r+1]-a[2*n+1],Math.sqrt(c*c+r*r)},o.prototype.KR=function(r){if(0>r||r>=this.wa)throw h.i.ce();this.mc();var n=new h.Sa;n.Nf(this.description),n.B()&&n.un();for(var a=0;a<this.description.Aa;a++)for(var c=this.description.kd(a),p=0,f=h.ra.Va(c);p<f;p++){var m=this.za[a].eg(f*r+p);n.setAttribute(c,p,m)}return n},o.prototype.Dh=function(r,n){if(0>r||r>=this.wa)throw h.i.ce();if(n.B())throw h.i.N();this.mc();for(var a=n.description,c=0;c<a.Aa;c++)for(var p=a.kd(c),f=h.ra.Va(p),m=0;m<f;m++){var b=n.Uc(p,m);this.setAttribute(p,r,m,b)}},o.prototype.lu=function(){return null},o.prototype.fj=function(){return null},o}(h.aa);h.Gx=g}(q||(q={})),function(h){var k=function(){function g(){this.ob=this.Zn=null,this.Tm=124234251,this.Rv=!0,this.Qe=-1,this.ob=new h.$c(7),this.Zn=null}return g.prototype.Vo=function(l){this.Zn=l},g.prototype.RP=function(){this.Rv=!1},g.prototype.De=function(l){this.ob.De(l)},g.prototype.Pr=function(l){var o=this.ob.Ce();return this.rX(o),this.uX(l,o),o},g.prototype.MP=function(l){this.ob.jd(l)},g.prototype.addElement=function(l,o){return o==-1&&(this.Qe==-1&&(this.Qe=this.Pr(-1)),o=this.Qe),this.FD(l,0,o)},g.prototype.KD=function(l){return this.Qe==-1&&(this.Qe=this.Pr(-1)),this.FD(l,1,this.Qe)},g.prototype.xn=function(l){this.Qe==-1&&(this.Qe=this.Pr(-1));var o=this.Qe,r=this.ob.o;if(o==-1||r[7*o]==-1)return l=this.ob.Ll([-1,-1,-1,l,this.gl(),-1,-1]),(r=this.ob.o)[7*o]=l,this.vp(-1,l,o,r),l;var n=o==-1?-1:r[7*o+2];return l=this.ob.Ll([-1,-1,n,l,this.gl(),-1,-1]),(r=this.ob.o)[7*n+1]=l,this.oy(l,r),r[7*l+2]===-1&&(r[7*o]=l),this.vp(-1,l,o,r),l},g.prototype.zu=function(l,o,r,n){var a=-1;a==-1&&(this.Qe==-1&&(this.Qe=this.Pr(-1)),a=this.Qe);var c=this.ob.o;if(a==-1||c[7*a]==-1)return r=this.ob.Ll([-1,-1,-1,r,this.gl(),-1,-1]),(c=this.ob.o)[7*a]=r,this.vp(-1,r,a,c),r;if(n){n=o!=-1?this.Zn.compare(this,r,o):-1;var p=l!=-1?this.Zn.compare(this,r,l):1}else n=-1,p=1;if(n==0||p==0)return c[7*a+3]=n==0?o:l,-1;for((o!=-1&&l!=-1?this.Tm>h.O.bB(this.Tm)>>1:o!=-1)?l=o:n=p,o=!0;;){if(0>n){if((p=c[7*l])==-1){n=l,r=this.ob.Ll([-1,-1,l,r,this.gl(),-1,-1]),(c=this.ob.o)[7*l]=r;break}l=p}else{if((p=c[7*l+1])==-1){n=c[7*l+6],r=this.ob.Ll([-1,-1,l,r,this.gl(),-1,-1]),(c=this.ob.o)[7*l+1]=r;break}l=p}o&&(n*=-1,o=!1)}return this.oy(r,c),c[7*r+2]===-1&&(c[7*a]=r),this.vp(n,r,a,c),r},g.prototype.FF=function(){return this.iR(this.Qe)},g.prototype.vd=function(l,o){o=o==-1?this.Qe:o,this.Rv?this.LP(l,o):this.iY(l,o)},g.prototype.search=function(l,o){for(o=this.sv(o);o!=-1;){var r=this.Zn.compare(this,l,o);if(r==0)return o;o=0>r?this.ll(o):this.Xp(o)}return-1},g.prototype.IW=function(l){for(var o=this.sv(-1),r=-1;o!=-1;){var n=l.compare(this,o);if(n==0)return o;0>n?o=this.ll(o):(r=o,o=this.Xp(o))}return r},g.prototype.uJ=function(l){for(var o=this.sv(-1),r=-1;o!=-1;){var n=l.compare(this,o);if(n==0)return o;0>n?(r=o,o=this.ll(o)):o=this.Xp(o)}return r},g.prototype.ja=function(l){return this.ob.T(l,3)},g.prototype.ll=function(l){return this.ob.T(l,0)},g.prototype.Xp=function(l){return this.ob.T(l,1)},g.prototype.getParent=function(l){return this.ob.T(l,2)},g.prototype.lb=function(l){return this.ob.T(l,6)},g.prototype.we=function(l){return this.ob.T(l,5)},g.prototype.rc=function(l){return l==-1?this.kl(this.Qe):this.kl(l)},g.prototype.Fc=function(l){return l==-1?this.Zr(this.Qe):this.Zr(l)},g.prototype.ZR=function(l){return l==-1?this.bG(this.Qe):this.bG(l)},g.prototype.Sj=function(l,o){this.NB(l,o)},g.prototype.sv=function(l){return l==-1?this.YF(this.Qe):this.YF(l)},g.prototype.clear=function(){this.ob.mj(!1),this.Qe=-1},g.prototype.size=function(l){return l==-1?this.$F(this.Qe):this.$F(l)},g.prototype.KN=function(l,o){for(var r=o[7*l],n=o[7*l+1],a=o[7*l+4];r!=-1||n!=-1;){var c=r!=-1?o[7*r+4]:2147483647;if(n=n!=-1?o[7*n+4]:2147483647,a<=Math.min(c,n))break;c<=n?this.sJ(r,o):this.rJ(l,o),r=o[7*l],n=o[7*l+1]}},g.prototype.oy=function(l,o){if(this.Rv)for(var r=o[7*l+4],n=o[7*l+2];n!=-1&&o[7*n+4]>r;)o[7*n]==l?this.sJ(l,o):this.rJ(n,o),n=o[7*l+2]},g.prototype.rJ=function(l,o){var r=o[7*l+1];o[7*r+2]=o[7*l+2],o[7*l+2]=r;var n=o[7*r];o[7*l+1]=n,n!=-1&&(o[7*n+2]=l),o[7*r]=l,(n=o[7*r+2])!=-1&&(o[7*n]==l?o[7*n]=r:o[7*n+1]=r)},g.prototype.sJ=function(l,o){var r=o[7*l+2];o[7*l+2]=o[7*r+2],o[7*r+2]=l;var n=o[7*l+1];o[7*r]=n,n!=-1&&(o[7*n+2]=r),o[7*l+1]=r,(n=o[7*l+2])!=-1&&(o[7*n]===r?o[7*n]=l:o[7*n+1]=l)},g.prototype.Pk=function(l,o){this.ob.S(l,2,o)},g.prototype.TB=function(l,o){this.ob.S(l,0,o)},g.prototype.XB=function(l,o){this.ob.S(l,1,o)},g.prototype.WB=function(l,o){this.ob.S(l,5,o)},g.prototype.ex=function(l,o){this.ob.S(l,6,o)},g.prototype.XJ=function(l,o){this.ob.S(o,0,l)},g.prototype.rX=function(l){this.ob.S(l,4,0)},g.prototype.uX=function(l,o){this.ob.S(o,5,l)},g.prototype.YF=function(l){return l==-1?-1:this.ob.T(l,0)},g.prototype.kl=function(l){return l==-1?-1:this.ob.T(l,1)},g.prototype.Zr=function(l){return l==-1?-1:this.ob.T(l,2)},g.prototype.iR=function(l){return l==-1?-1:this.ob.T(l,3)},g.prototype.$F=function(l){return l==-1?0:this.ob.T(l,4)},g.prototype.bG=function(l){return this.ob.T(l,5)},g.prototype.Pw=function(){return this.ob.Ll([-1,-1,-1,void 0,this.gl(),-1,-1])},g.prototype.fl=function(l){l!=-1&&this.ob.jd(l)},g.prototype.gl=function(){return this.Tm=h.O.bB(this.Tm),1073741823&this.Tm},g.prototype.FD=function(l,o,r){var n=this.ob.o;if(r==-1||n[7*r]==-1)return l=this.ob.Ll([-1,-1,-1,l,this.gl(),-1,-1]),(n=this.ob.o)[7*r]=l,this.vp(-1,l,r,n),l;for(var a=r==-1?-1:n[7*r];;){var c=o==-1?1:this.Zn.compare(this,l,a);if(0>c){if((c=this.ll(a))==-1){o=a,l=this.ob.Ll([-1,-1,a,l,this.gl(),-1,-1]),(n=this.ob.o)[7*a]=l;break}a=c}else{if(o==1&&c==0)return n[7*r+3]=a,-1;if((c=n[7*a+1])==-1){o=n[7*a+6],l=this.ob.Ll([-1,-1,a,l,this.gl(),-1,-1]),(n=this.ob.o)[7*a+1]=l;break}a=c}}return this.oy(l,n),n[7*l+2]===-1&&(n[7*r]=l),this.vp(o,l,r,n),l},g.prototype.vp=function(l,o,r,n){if(l!=-1){var a=n[7*l+5];n[7*l+5]=o}else a=r==-1?-1:n[7*r+2];n[7*o+5]=a,a!=-1&&(n[7*a+6]=o),n[7*o+6]=l,l==(r==-1?-1:n[7*r+1])&&(n[7*r+1]=o),l==-1&&(n[7*r+2]=o),n[7*r+4]=(r==-1?0:n[7*r+4])+1},g.prototype.AB=function(l,o){var r=this.ob.o,n=r[7*l+5];l=r[7*l+6],n!=-1?r[7*n+6]=l:r[7*o+1]=l,l!=-1?r[7*l+5]=n:r[7*o+2]=n,r[7*o+4]=o===-1?-1:r[7*o+4]-1},g.prototype.iY=function(l,o){this.AB(l,o);var r=this.ll(l),n=this.Xp(l),a=this.getParent(l),c=l;if(r!=-1&&n!=-1){this.Tm=h.O.bB(this.Tm);var p=1073741823<this.Tm?this.lb(l):this.we(l),f=this.getParent(p)==l;this.ob.gC(l,p,0),this.ob.gC(l,p,1),this.ob.gC(l,p,2),a!=-1?this.ll(a)==l?this.TB(a,p):this.XB(a,p):this.XJ(p,o),f?(r==p?(this.TB(p,l),this.Pk(n,p)):n==p&&(this.XB(p,l),this.Pk(r,p)),this.Pk(l,p),a=p):(this.Pk(r,p),this.Pk(n,p),a=this.getParent(l),c=p),r=this.ll(l),n=this.Xp(l),r!=-1&&this.Pk(r,l),n!=-1&&this.Pk(n,l)}r=r!=-1?r:n,a==-1?this.XJ(r,o):this.ll(a)==c?this.TB(a,r):this.XB(a,r),r!=-1&&this.Pk(r,a),this.fl(l)},g.prototype.LP=function(l,o){var r=this.ob.o;r[7*l+4]=2147483647;var n=-1,a=-1,c=o===-1?-1:r[7*o],p=c==l;if(p&&(n=r[7*c],a=r[7*c+1],n==-1&&a==-1))return this.AB(c,o),this.fl(c),void(r[7*o]=-1);this.KN(l,r),(c=r[7*l+2])!=-1&&(r[7*c]==l?r[7*c]=-1:r[7*c+1]=-1),this.AB(l,o),this.fl(l),p&&(r[7*o]=n==-1||r[7*n+2]!=-1?a:n)},g.prototype.NB=function(l,o){this.ob.S(l,3,o)},g}();h.Yj=k}(q||(q={})),function(h){var k=function(){function g(l,o){l!==void 0&&this.K(l,o)}return g.prototype.K=function(l,o){this.oa=l,this.va=o,this.normalize()},g.prototype.isIntersecting=function(l){return this.oa<=l.oa?this.va>=l.oa:l.va>=this.oa},g.prototype.move=function(l){this.B()||(this.oa+=l,this.va+=l)},g.prototype.normalize=function(){if(!isNaN(this.oa)){if(this.oa>this.va){var l=this.oa;this.oa=this.va,this.va=l}isNaN(this.va)&&this.Oa()}},g.prototype.Oa=function(){this.va=this.oa=NaN},g.prototype.B=function(){return isNaN(this.oa)},g.prototype.Zb=function(l){typeof l=="number"?this.B()?this.va=this.oa=l:this.Lk(l):l.B()||(this.B()?(this.oa=l.oa,this.va=l.va):(this.oa>l.oa&&(this.oa=l.oa),this.va<l.va&&(this.va=l.va),this.oa>this.va&&this.Oa()))},g.prototype.Lk=function(l){l<this.oa?this.oa=l:l>this.va&&(this.va=l)},g.prototype.contains=function(l){return typeof l=="number"?l>=this.oa&&l<=this.va:l.oa>=this.oa&&l.va<=this.va},g.prototype.Ea=function(l){this.B()||l.B()?this.Oa():(this.oa<l.oa&&(this.oa=l.oa),this.va>l.va&&(this.va=l.va),this.oa>this.va&&this.Oa())},g.prototype.W=function(l){this.B()||(this.oa-=l,this.va+=l,this.va<this.oa&&this.Oa())},g.prototype.xr=function(){return this.B()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.oa)+Math.abs(this.va)+1)},g.prototype.KB=function(l,o){l>o?(this.oa=o,this.va=l):(this.oa=l,this.va=o)},g.prototype.It=function(l){return h.O.Rk(l,this.oa,this.va)},g.prototype.R=function(){return this.va-this.oa},g.prototype.sf=function(){return .5*(this.oa+this.va)},g.prototype.Nb=function(l){return l==this||l instanceof g&&(!(!this.B()||!l.B())||this.oa==l.oa&&this.va==l.va)},g.prototype.cc=function(){return h.O.uj(h.O.uj())},g}();h.Nc=k}(q||(q={})),function(h){var k=new h.Nc,g=new h.Nc,l=function(){this.ne=null,this.pb=-1,this.sb=new h.yb,this.qA=55555555,this.Tv=this.Vv=!1,this.Uf=new h.Nc,this.Uf.KB(0,0)};h.IY=l;var o=function(){function r(n,a,c){this.g=n,this.Hk=NaN,this.NH=this.Kq=0,this.OH=NaN,this.qa=a,this.Nq=10*a,this.PH=this.QH=NaN,this.rg=!1,this.Dm=this.gt=this.Lo=this.Xs=this.Ws=-1,this.gA=c,this.TA=new l,this.YH=new l,h.O.truncate(3*n.fd/2)}return r.prototype.mG=function(n,a,c,p){n.ne=p===null?null:p[c[5*a]],n.Tv=n.ne!=null,n.Tv||((p=c[5*a+2])!==-1&&this.g.mW(c[5*a],c[5*p],n.sb),n.ne=n.sb,n.Uf.KB(n.sb.sa,n.sb.pa),n.Uf.va+=this.qa,n.sb.rI(),n.Vv=n.sb.la==n.sb.na,n.Vv||(n.qA=(n.sb.pa-n.sb.sa)/(n.sb.la-n.sb.na)))},r.prototype.OO=function(n,a){var c=n.zr(a,this.qa,!0);return c!=0?c==2?this.Qy():this.xi():(n.Yp(os),n.Tr(qs),a.Yp(as),a.Tr(Us),Ft.ma(this.Kq,this.Hk),os.qb(as)&&this.Hk==os.y?0>qs.compare(Us)?Ft.L(qs):Ft.L(Us):os.qb(Us)&&this.Hk==os.y?0>qs.compare(as)?Ft.L(qs):Ft.L(as):as.qb(qs)&&this.Hk==as.y?0>os.compare(Us)?Ft.L(os):Ft.L(Us):qs.qb(Us)&&this.Hk==qs.y&&(0>os.compare(as)?Ft.L(os):Ft.L(as)),n.Pe(Ft.y,Ft.x)<a.Pe(Ft.y,Ft.x)?-1:1)},r.prototype.MO=function(n,a){if(n.sb.na==a.sb.na&&n.sb.sa==a.sb.sa)return n.sb.la==a.sb.la&&n.sb.pa==a.sb.pa?this.gA?this.Qy():0:this.PE(n,a);if(n.sb.la==a.sb.la&&n.sb.pa==a.sb.pa)return this.OE(n,a);var c=this.OE(n,a);return n=this.PE(n,a),0>c&&0>n?-1:0<c&&0<n?1:this.xi()},r.prototype.IO=function(n,a){if(n.pa>a.pa){if(a.pa>a.sa&&a.la-a.na<2*this.qa&&n.vi(a.pa,a.la,this.qa))return this.xi()}else if((a.la-a.na)/(a.pa-a.sa)*(n.pa-n.sa)<this.Nq&&a.vi(n.pa,n.la,this.qa))return this.xi();return 1},r.prototype.JO=function(n,a){if(n.sa<a.sa){if(a.pa>a.sa&&a.la-a.na<2*this.qa&&n.vi(a.pa,a.la,this.qa))return this.xi()}else if((a.la-a.na)/(a.pa-a.sa)*(n.sa-n.pa)<this.Nq&&a.vi(n.sa,n.na,this.qa))return this.xi();return-1},r.prototype.KO=function(n,a){var c=new h.h;c.uc(a.wc(),a.ac()),c.ar(),c.normalize();var p=new h.h;p.uc(n.ac(),a.ac());var f=new h.h;f.uc(n.wc(),a.ac()),p=p.Qh(c),c=f.Qh(c),f=Math.abs(p);var m=Math.abs(c);if(f<m){if(f<this.Nq&&a.vi(n.sa,n.na,this.qa))return this.xi()}else if(m<this.Nq&&a.vi(n.pa,n.la,this.qa))return this.xi();return 0>p&&0>c?-1:0<p&&0<c?1:this.xi()},r.prototype.NE=function(n,a){return n.na==a.na&&n.sa==a.sa?this.IO(n,a):n.la==a.la&&n.pa==a.pa?this.JO(n,a):this.KO(n,a)},r.prototype.LO=function(n,a){return n.la==a.la&&n.pa==a.pa&&n.na==a.na&&n.sa==a.sa?this.gA?this.Qy():0:this.xi()},r.prototype.OE=function(n,a){var c=1;if(n.sb.na<a.sb.na){c=-1;var p=n;n=a,a=p}n=n.sb,p=a.sb;var f=n.sa-p.sa;a=a.qA*(n.na-p.na);var m=this.Nq;return f<a-m?-c:f>a+m?c:p.vi(n.sa,n.na,this.qa)?this.xi():f<a?-c:c},r.prototype.PE=function(n,a){var c=1;if(a.sb.la<n.sb.la){c=-1;var p=n;n=a,a=p}n=n.sb,p=a.sb;var f=n.pa-p.sa;a=a.qA*(n.la-p.na);var m=this.Nq;return f<a-m?-c:f>a+m?c:p.vi(n.pa,n.la,this.qa)?this.xi():f<a?-c:c},r.prototype.Qy=function(){return this.rg=!0,this.Ni=new h.Md(5,this.Lo,this.gt),-1},r.prototype.xi=function(){return this.rg=!0,this.gA?this.Ni=new h.Md(4,this.Lo,this.gt):this.gt=this.Lo=this.Xs=this.Ws=-1,-1},r.prototype.NO=function(n,a,c,p){if(this.rg)return-1;var f=this.OH==this.Hk&&this.NH==this.Kq;if(f&&n==this.Ws)var m=this.PH;else m=NaN,this.Ws=-1;return f&&a==this.Xs?f=this.QH:(f=NaN,this.Xs=-1),c.ne.ZI(k),p.ne.ZI(g),k.va<g.oa?-1:g.va<k.oa?1:(this.OH=this.Hk,this.NH=this.Kq,isNaN(m)&&(this.Ws=n,this.PH=m=n=c.ne.Pe(this.Hk,this.Kq)),isNaN(f)&&(this.Xs=a,this.QH=f=n=p.ne.Pe(this.Hk,this.Kq)),Math.abs(m-f)<=this.qa?this.OO(c.ne,p.ne):m<f?-1:m>f?1:0)},r.prototype.Kr=function(){this.rg=!1},r.prototype.rm=function(){return this.Ni},r.prototype.$J=function(n,a){this.Hk=n,this.Kq=a,this.gt=this.Lo=this.Xs=this.Ws=-1},r.prototype.compare=function(n,a,c){return this.rg?-1:(n=n.ja(c),this.Dm=c,this.RE(a,a,n,n))},r.prototype.RE=function(n,a,c,p){if(this.Lo==a)var f=this.TA;else this.Lo=a,f=this.TA,this.TA.pb=n,this.mG(f,a,this.g.td.o,this.g.We);if(m==null){this.gt=p;var m=this.YH;this.YH.pb=c,this.mG(m,p,this.g.td.o,this.g.We)}return f.Tv||m.Tv?this.NO(a,p,f,m):f.Uf.va<m.Uf.oa?-1:m.Uf.va<f.Uf.oa?1:(n=f.Vv?1:0,(n|=m.Vv?2:0)==0?this.MO(f,m):n==1?this.NE(f.sb,m.sb):n==2?-1*this.NE(m.sb,f.sb):this.LO(f.sb,m.sb))},r}();h.UC=o}(q||(q={})),function(h){var k=function(){function g(l,o){this.g=l,this.qa=o,this.rg=!1,this.Lo=-1,this.Uf=new h.Nc,this.Gq=new h.h,this.Gq.Rc(),this.ie=new h.yb,this.Dm=-1,this.BA=17976931348623157e292}return g.prototype.Kr=function(){this.rg=!1,this.BA=17976931348623157e292},g.prototype.Dh=function(l){this.Gq.L(l)},g.prototype.compare=function(l,o){return this.SE(o,l.ja(o))},g.prototype.SE=function(l,o){var r=this.g.bc(o)!=null;if(r||(this.g.ed(o,this.ie),this.Uf.KB(this.ie.sa,this.ie.pa)),r)throw h.i.fa("not implemented");if(this.Gq.x+this.qa<this.Uf.oa)return-1;if(this.Gq.x-this.qa>this.Uf.va)return 1;if(this.ie.na==this.ie.la)return this.Dm=l,this.rg=!0,0;this.ie.rI(),r=this.ie.ac(),(o=new h.h).uc(this.ie.wc(),r),o.ar();var n=new h.h;return n.uc(this.Gq,r),r=o.Qh(n),(r/=o.length())<10*-this.qa?-1:r>10*this.qa?1:this.ie.qs(this.Gq,this.qa)&&((o=Math.abs(r))<this.BA&&(this.Dm=l,this.BA=o),this.rg=!0,o<.25*this.qa)?0:0>r?-1:1},g}();h.aM=k}(q||(q={})),function(h){function k(l,o,r,n){r=new Float64Array(l.subarray(r,n)),l.set(r,o)}var g=function(){function l(o){this.Pb=this.pk=!1,this.o=null;var r=o;2>r&&(r=2),this.o=new Float64Array(r),this.size=o}return l.prototype.rotate=function(o,r,n){if(this.Pb)throw h.i.fa("invalid_call");if(r<o||r>n||o>n)throw h.i.N();o!=r&&n!=r&&(this.ni(o,r-o,1),this.ni(r,n-r,1),this.ni(o,n-o,1))},l.qf=function(o,r){var n=new l(o),a=n.o;if(2>o&&(o=2),r!==0)for(var c=0;c<o;c++)a[c]=r;return n},l.Bn=function(o){var r=new l(0);return r.o=new Float64Array(o.o),r.size=o.size,r},l.Lr=function(o,r){var n=new l(0);return n.size=o.size,n.size>r&&(n.size=r),2>(r=n.size)&&(r=2),n.o=new Float64Array(r),n.o.set(o.o.length<=r?o.o:o.o.subarray(0,r),0),n},l.prototype.Jb=function(o){0>=o||(this.o==null?this.o=new Float64Array(o):o<=this.o.length||(0<this.o.length?((o=new Float64Array(o)).set(this.o),this.o=o):this.o=new Float64Array(o)))},l.prototype.read=function(o){return this.o[o]},l.prototype.tc=function(o,r){r.x=this.o[o],r.y=this.o[o+1]},l.prototype.get=function(o){return this.o[o]},l.prototype.write=function(o,r){if(this.Pb)throw h.i.Hb();this.o[o]=r},l.prototype.set=function(o,r){if(this.Pb)throw h.i.Hb();this.o[o]=r},l.prototype.Tt=function(o,r){if(this.Pb)throw h.i.Hb();this.o[o]=r.x,this.o[o+1]=r.y},l.prototype.add=function(o){this.resize(this.size+1),this.o[this.size-1]=o},l.prototype.GB=function(o){return l.Lr(this,o)},l.prototype.eg=function(o){return this.read(o)},l.prototype.resize=function(o,r){if(r===void 0&&(r=0),this.pk)throw h.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");if(o<=this.size){if(30<this.o.length&&5*o/4<this.o.length){var n=new Float64Array(this.o,0,o);this.o=n}}else{o>this.o.length&&(n=h.O.truncate(64>o?Math.max(2*o,4):5*o/4),(n=new Float64Array(n)).set(this.o),this.o=n),n=this.o;for(var a=this.size;a<o;a++)n[a]=r}this.size=o},l.prototype.Bh=function(o){if((this.o==null||o>this.o.length)&&this.resize(o),this.pk)throw h.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");this.size=o},l.prototype.pr=function(o,r){this.write(o,r)},l.prototype.An=function(o,r,n){for(var a=this.size;r<a&&r<n;r++)o=h.O.uj(this.read(r));return o},l.prototype.Nb=function(o,r,n){if(o==null||!(o instanceof l))return!1;var a=this.size,c=o.size;if(n>a||n>c&&a!=c)return!1;for(n>a&&(n=a);r<n;r++)if(this.read(r)!=o.read(r))return!1;return!0},l.prototype.addRange=function(o,r,n,a,c){if(this.Pb)throw h.i.Hb();if(!a&&(1>c||n%c!=0))throw h.i.N();var p=this.size;if(this.resize(p+n),a)this.o.set(o.o.subarray(r,r+n),p);else{a=n;for(var f=0;f<n;f+=c){a-=c;for(var m=0;m<c;m++)this.o[p+f+m]=o.o[r+a+m]}}},l.prototype.Mn=function(o,r,n,a,c,p,f){if(this.Pb)throw h.i.Hb();if(!c&&(1>p||a%p!=0))throw h.i.N();var m=this.size-f;if(m<a&&this.resize(this.size+a-m),k(this.o,o+a,o,o+(f-o)),this.o==r.o&&o<n&&(n+=a),c)this.o.set(r.o.subarray(n,n+a),o);else for(c=a,f=0;f<a;f+=p)for(c-=p,m=0;m<p;m++)this.o[o+f+m]=r.o[n+c+m]},l.prototype.Iz=function(o,r,n,a,c,p){if(this.Pb)throw h.i.Hb();if(0>p&&(p=this.size),this.size+2*a>this.o.length?this.resize(this.size+2*a):this.size+=2*a,k(this.o,o+2*a,o,o+(p-o)),c)for(c=0;c<a;c++)p=r[n++],this.o[o++]=p.x,this.o[o++]=p.y;else{c=0;for(var f=a-1;c<a;++c)p=r[n+f],this.o[o++]=p.x,this.o[o++]=p.y,f--}},l.prototype.Ln=function(o,r,n,a){if(this.Pb)throw h.i.Hb();for(a-=o,k(this.o,o+a,o,o+a),a=0;a<n;a++)this.o[o+a]=r},l.prototype.vj=function(o,r,n){if(this.Pb)throw h.i.Hb();k(this.o,o+2,o,o+(n-o)),this.o[o]=r.x,this.o[o+1]=r.y},l.prototype.Ut=function(o,r,n,a,c,p){if(0>o||0>r||0>a||!c&&(0>=p||r%p!=0)||n.size<a+r)throw h.i.N();if(r!=0)if(this.size<r+o&&this.resize(r+o),n==this)this.Ar(o,r,a,c,p);else if(c)for(c=0;c<r;c++)this.o[o]=n.o[a],o++,a++;else if(a=a+r-p,p==1)for(c=0;c<r;c++)this.o[o]=n.o[a],o++,a--;else for(c=0,r=h.O.truncate(r/p);c<r;c++){for(var f=0;f<p;f++)this.o[o+f]=n.o[a+f];o+=p,a-=p}},l.prototype.En=function(o,r,n){if(this.Pb||o+r>this.size)throw h.i.Hb();0<n-(o+r)&&k(this.o,o,o+r,o+(n-(o+r))+r),this.size-=r},l.prototype.ni=function(o,r,n){if(this.Pb||1>n||r%n!=0)throw h.i.Hb();for(var a=r>>1,c=0;c<a;c+=n){r-=n;for(var p=0;p<n;p++){var f=this.o[o+c+p];this.o[o+c+p]=this.o[o+r+p],this.o[o+r+p]=f}}},l.prototype.Wj=function(o,r,n){if(0>r||0>n||0>r||n+r>this.size)throw h.i.N();for(var a=r;a<r+n;a++)this.o[a]=o},l.prototype.Ar=function(o,r,n,a,c){if(!(a&&o==n||(this.o.set(this.o.subarray(n,n+r),o),a)))for(n=o,o=o+r-c,a=0,r=h.O.truncate(r/2);a<r;a++){for(var p=0;p<c;p++){var f=this.o[n+p];this.o[n+p]=this.o[o+p],this.o[o+p]=f}n+=c,o-=c}},l.prototype.vC=function(o,r,n,a,c){if(0>o||0>r||0>a)throw h.i.N();if(r!=0)for(this.size<(r<<1)+o&&this.resize((r<<1)+o),c||(o+=r-1<<1),c=c?2:-2,r+=a;a<r;a++)this.o[o]=n[a].x,this.o[o+1]=n[a].y,o+=c},l.prototype.uC=function(o,r,n){if(0>o||0>r)throw h.i.N();if(r!=0){this.size<(r<<1)+o&&this.resize((r<<1)+o),r+=0;for(var a=0;a<r;a++)this.o[o]=n[a][0],this.o[o+1]=n[a][1],o+=2}},l.prototype.Vw=function(o,r,n,a,c){if(0>o||0>r||0>a||this.size<r+o)throw h.i.N();if(c)for(c=0;c<r;c++)n[a+c]=this.o[o+c];else for(a=a+r-1;o<r;o++)n[a]=this.o[o],a--},l.prototype.uB=function(o,r,n){if(0>o||0>r||this.size<(r>>1)+o)throw h.i.N();if(r!=0){r=0+r;for(var a=0;a<r;a++)n[a][0]=this.o[o],n[a][1]=this.o[o+1],o+=2}},l.prototype.clear=function(o){o?this.resize(0):this.Bh(0)},l.prototype.ix=function(){this.pk=this.Pb=!0},l.prototype.Vd=function(o,r,n){Array.prototype.sort.call(this.o.subarray(o,r),n)},l.prototype.Tp=function(){return 1},l}();h.be=g}(q||(q={})),function(h){function k(l,o,r,n){r=new Int32Array(l.subarray(r,n)),l.set(r,o)}h.rY=function(){this.random=1973};var g=function(){function l(o){this.Pb=this.pk=!1,this.o=null;var r=o;2>r&&(r=2),this.o=new Int32Array(r),this.size=o}return l.prototype.rotate=function(o,r,n){if(this.Pb)throw h.i.fa("invalid_call");if(r<o||r>n||o>n)throw h.i.N();o!=r&&n!=r&&(this.ni(o,r-o,1),this.ni(r,n-r,1),this.ni(o,n-o,1))},l.qf=function(o,r){var n=new l(o),a=n.o;if(2>o&&(o=2),r!==0)for(var c=0;c<o;c++)a[c]=r;return n},l.Bn=function(o){var r=new l(0);return r.o=new Int32Array(o.o),r.size=o.size,r},l.Lr=function(o,r){var n=new l(0);return n.size=o.size,n.size>r&&(n.size=r),2>(r=n.size)&&(r=2),n.o=new Int32Array(r),n.o.set(o.o.length<=r?o.o:o.o.subarray(0,r),0),n},l.prototype.Jb=function(o){0>=o||(this.o==null?this.o=new Int32Array(o):o<=this.o.length||(0<this.o.length?((o=new Int32Array(o)).set(this.o),this.o=o):this.o=new Int32Array(o)))},l.prototype.read=function(o){return this.o[o]},l.prototype.tc=function(o,r){r.x=this.o[o],r.y=this.o[o+1]},l.prototype.get=function(o){return this.o[o]},l.prototype.write=function(o,r){if(this.Pb)throw h.i.Hb();this.o[o]=r},l.prototype.set=function(o,r){if(this.Pb)throw h.i.Hb();this.o[o]=r},l.prototype.Tt=function(o,r){if(this.Pb)throw h.i.Hb();this.o[o]=r.x,this.o[o+1]=r.y},l.prototype.add=function(o){this.resize(this.size+1),this.o[this.size-1]=o},l.prototype.GB=function(o){return l.Lr(this,o)},l.prototype.eg=function(o){return this.read(o)},l.prototype.resize=function(o,r){if(r===void 0&&(r=0),this.pk)throw h.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");if(o<=this.size){if(30<this.o.length&&5*o/4<this.o.length){var n=new Int32Array(this.o,0,o);this.o=n}}else{o>this.o.length&&(n=h.O.truncate(64>o?Math.max(2*o,4):5*o/4),(n=new Int32Array(n)).set(this.o),this.o=n),n=this.o;for(var a=this.size;a<o;a++)n[a]=r}this.size=o},l.prototype.Bh=function(o){if((this.o==null||o>this.o.length)&&this.resize(o),this.pk)throw h.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");this.size=o},l.prototype.pr=function(o,r){this.write(o,r)},l.prototype.An=function(o,r,n){for(var a=this.size;r<a&&r<n;r++)o=h.O.Th(this.read(r),o);return o},l.prototype.Nb=function(o,r,n){if(o==null||!(o instanceof l))return!1;var a=this.size,c=o.size;if(n>a||n>c&&a!=c)return!1;for(n>a&&(n=a);r<n;r++)if(this.read(r)!=o.read(r))return!1;return!0},l.prototype.addRange=function(o,r,n,a,c){if(this.Pb)throw h.i.Hb();if(!a&&(1>c||n%c!=0))throw h.i.N();var p=this.size;if(this.resize(p+n),a)this.o.set(o.o.subarray(r,r+n),p);else{a=n;for(var f=0;f<n;f+=c){a-=c;for(var m=0;m<c;m++)this.o[p+f+m]=o.o[r+a+m]}}},l.prototype.Mn=function(o,r,n,a,c,p,f){if(this.Pb)throw h.i.Hb();if(!c&&(1>p||a%p!=0))throw h.i.N();if(k(this.o,o+a,o,o+(f-o)),this.o==r.o&&o<n&&(n+=a),c)this.o.set(r.o.subarray(n,n+a),o);else for(c=a,f=0;f<a;f+=p){c-=p;for(var m=0;m<p;m++)this.o[o+f+m]=r.o[n+c+m]}},l.prototype.Iz=function(o,r,n,a,c,p){if(this.Pb)throw h.i.Hb();if(0>p&&(p=this.size),this.size+2*a>this.o.length?this.resize(this.size+2*a):this.size+=2*a,k(this.o,o+2*a,o,o+(p-o)),c)for(c=0;c<a;c++)p=r[n++],this.o[o++]=p.x,this.o[o++]=p.y;else{c=0;for(var f=a-1;c<a;++c)p=r[n+f],this.o[o++]=p.x,this.o[o++]=p.y,f--}},l.prototype.Ln=function(o,r,n,a){if(this.Pb)throw h.i.Hb();for(a-=o,k(this.o,o+a,o,o+a),a=0;a<n;a++)this.o[o+a]=r},l.prototype.vj=function(o,r,n){if(this.Pb)throw h.i.Hb();k(this.o,o+2,o,o+(n-o)),this.o[o]=r.x,this.o[o+1]=r.y},l.prototype.Ut=function(o,r,n,a,c,p){if(0>o||0>r||0>a||!c&&(0>=p||r%p!=0)||n.size<a+r)throw h.i.N();if(r!=0)if(this.size<r+o&&this.resize(r+o),n==this)this.Ar(o,r,a,c,p);else if(c)for(c=0;c<r;c++)this.o[o]=n.o[a],o++,a++;else if(a=a+r-p,p==1)for(c=0;c<r;c++)this.o[o]=n.o[a],o++,a--;else for(c=0,r=h.O.truncate(r/p);c<r;c++){for(var f=0;f<p;f++)this.o[o+f]=n.o[a+f];o+=p,a-=p}},l.prototype.En=function(o,r,n){if(this.Pb||o+r>this.size)throw h.i.Hb();0<n-(o+r)&&k(this.o,o,o+r,o+(n-(o+r))+r),this.size-=r},l.prototype.ni=function(o,r,n){if(this.Pb||1>n||r%n!=0)throw h.i.Hb();for(var a=r>>1,c=0;c<a;c+=n){r-=n;for(var p=0;p<n;p++){var f=this.o[o+c+p];this.o[o+c+p]=this.o[o+r+p],this.o[o+r+p]=f}}},l.prototype.Wj=function(o,r,n){if(0>r||0>n||0>r||n+r>this.size)throw h.i.N();for(var a=r;a<r+n;a++)this.o[a]=o},l.prototype.Ar=function(o,r,n,a,c){if(!(a&&o==n||(this.o.set(this.o.subarray(n,n+r),o),a)))for(n=o,o=o+r-c,a=0,r=h.O.truncate(r/2);a<r;a++){for(var p=0;p<c;p++){var f=this.o[n+p];this.o[n+p]=this.o[o+p],this.o[o+p]=f}n+=c,o-=c}},l.prototype.vC=function(o,r,n,a,c){if(0>o||0>r||0>a)throw h.i.N();if(r!=0)for(this.size<(r<<1)+o&&this.resize((r<<1)+o),c||(o+=r-1<<1),c=c?2:-2,r+=a;a<r;a++)this.o[o]=n[a].x,this.o[o+1]=n[a].y,o+=c},l.prototype.Vw=function(o,r,n,a,c){if(0>o||0>r||0>a||this.size<r+o)throw h.i.N();if(c)for(c=0;c<r;c++)n[a+c]=this.o[o+c];else for(a=a+r-1;o<r;o++)n[a]=this.o[o],a--},l.prototype.clear=function(o){o?this.resize(0):this.Bh(0)},l.prototype.ix=function(){this.pk=this.Pb=!0},l.prototype.Vd=function(o,r,n){10>r-o?l.rG(this.o,o,r,n):l.qB(this.o,o,r-1,n)},l.prototype.Tp=function(){return 2},l.prototype.Fc=function(){return this.o[this.size-1]},l.prototype.If=function(){this.resize(this.size-1)},l.prototype.bX=function(o){this.o[this.size-1]=o},l.prototype.SV=function(o){o<this.size-1&&(this.o[o]=this.o[this.size-1]),this.resize(this.size-1)},l.prototype.lF=function(o){for(var r=0,n=this.size;r<n;r++)if(this.o[r]==o)return r;return-1},l.prototype.hG=function(o){return 0<=this.lF(o)},l.rG=function(o,r,n,a){for(var c=r;c<n;c++){for(var p=o[c],f=c-1;f>=r&&0<a(o[f],p);)o[f+1]=o[f],f--;o[f+1]=p}},l.tx=function(o,r,n){var a=o[n];o[n]=o[r],o[r]=a},l.qB=function(o,r,n,a){if(!(r>=n))for(;;){if(9>n-r){l.rG(o,r,n+1,a);break}var c=o[r];l.tx(o,r,n);for(var p=r,f=r;f<n;f++)0>=a(o[f],c)&&(l.tx(o,p,f),p+=1);l.tx(o,p,n),p-r<n-p?(l.qB(o,r,p-1,a),r=p+1):(l.qB(o,p+1,n,a),n=p-1)}},l}();h.ia=g}(q||(q={})),function(h){function k(l,o,r,n){r=new Int8Array(l.subarray(r,n)),l.set(r,o)}var g=function(){function l(o){this.o=null;var r=o;2>r&&(r=2),this.o=new Int8Array(r),this.size=o}return l.prototype.rotate=function(o,r,n){if(this.Pb)throw h.i.fa("invalid_call");if(r<o||r>n||o>n)throw h.i.N();o!=r&&n!=r&&(this.ni(o,r-o,1),this.ni(r,n-r,1),this.ni(o,n-o,1))},l.qf=function(o,r){var n=new l(o),a=n.o;if(2>o&&(o=2),r!==0)for(var c=0;c<o;c++)a[c]=r;return n},l.Bn=function(o){var r=new l(0);return r.o=new Int8Array(o.o),r.size=o.size,r},l.Lr=function(o,r){var n=new l(0);return n.size=o.size,n.size>r&&(n.size=r),2>(r=n.size)&&(r=2),n.o=new Int8Array(r),n.o.set(o.o.length<=r?o.o:o.o.subarray(0,r),0),n},l.prototype.Jb=function(o){0>=o||(this.o==null?this.o=new Int8Array(o):o<=this.o.length||(0<this.o.length?((o=new Int8Array(o)).set(this.o),this.o=o):this.o=new Int8Array(o)))},l.prototype.read=function(o){return this.o[o]},l.prototype.tc=function(o,r){r.x=this.o[o],r.y=this.o[o+1]},l.prototype.get=function(o){return this.o[o]},l.prototype.write=function(o,r){if(this.Pb)throw h.i.Hb();this.o[o]=r},l.prototype.set=function(o,r){if(this.Pb)throw h.i.Hb();this.o[o]=r},l.prototype.Tt=function(o,r){if(this.Pb)throw h.i.Hb();this.o[o]=r.x,this.o[o+1]=r.y},l.prototype.add=function(o){this.resize(this.size+1),this.o[this.size-1]=o},l.prototype.GB=function(o){return l.Lr(this,o)},l.prototype.eg=function(o){return this.read(o)},l.prototype.resize=function(o,r){if(r===void 0&&(r=0),this.pk)throw h.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");if(o<=this.size){if(30<this.o.length&&5*o/4<this.o.length){var n=new Int8Array(this.o,0,o);this.o=n}}else{o>this.o.length&&(n=h.O.truncate(64>o?Math.max(2*o,4):5*o/4),(n=new Int8Array(n)).set(this.o),this.o=n),n=this.o;for(var a=this.size;a<o;a++)n[a]=r}this.size=o},l.prototype.Bh=function(o){if((this.o==null||o>this.o.length)&&this.resize(o),this.pk)throw h.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");this.size=o},l.prototype.pr=function(o,r){this.write(o,r)},l.prototype.An=function(o,r,n){for(var a=this.size;r<a&&r<n;r++)o=h.O.Th(this.read(r),o);return o},l.prototype.Nb=function(o,r,n){if(o==null||!(o instanceof l))return!1;var a=this.size,c=o.size;if(n>a||n>c&&a!=c)return!1;for(n>a&&(n=a);r<n;r++)if(this.read(r)!=o.read(r))return!1;return!0},l.prototype.addRange=function(o,r,n,a,c){if(this.Pb)throw h.i.Hb();if(!a&&(1>c||n%c!=0))throw h.i.N();var p=this.size;if(this.resize(p+n),a)this.o.set(o.o.subarray(r,r+n),p);else{a=n;for(var f=0;f<n;f+=c){a-=c;for(var m=0;m<c;m++)this.o[p+f+m]=o.o[r+a+m]}}},l.prototype.Mn=function(o,r,n,a,c,p,f){if(this.Pb)throw h.i.Hb();if(!c&&(1>p||a%p!=0))throw h.i.N();if(k(this.o,o+a,o,o+(f-o)),this.o==r.o&&o<n&&(n+=a),c)this.o.set(r.o.subarray(n,n+a),o);else for(c=a,f=0;f<a;f+=p){c-=p;for(var m=0;m<p;m++)this.o[o+f+m]=r.o[n+c+m]}},l.prototype.Ln=function(o,r,n,a){if(this.Pb)throw h.i.Hb();for(a-=o,k(this.o,o+a,o,o+a),a=0;a<n;a++)this.o[o+a]=r},l.prototype.Iz=function(o,r,n,a,c,p){if(this.Pb)throw h.i.Hb();if(0>p&&(p=this.size),this.size+2*a>this.o.length?this.resize(this.size+2*a):this.size+=2*a,k(this.o,o+2*a,o,o+(p-o)),c)for(c=0;c<a;c++)p=r[n++],this.o[o++]=p.x,this.o[o++]=p.y;else{c=0;for(var f=a-1;c<a;++c)p=r[n+f],this.o[o++]=p.x,this.o[o++]=p.y,f--}},l.prototype.vj=function(o,r,n){if(this.Pb)throw h.i.Hb();k(this.o,o+2,o,o+(n-o)),this.o[o]=r.x,this.o[o+1]=r.y},l.prototype.Ut=function(o,r,n,a,c,p){if(0>o||0>r||0>a||!c&&(0>=p||r%p!=0)||n.size<a+r)throw h.i.N();if(r!=0)if(this.size<r+o&&this.resize(r+o),n==this)this.Ar(o,r,a,c,p);else if(c)for(c=0;c<r;c++)this.o[o]=n.o[a],o++,a++;else if(a=a+r-p,p==1)for(c=0;c<r;c++)this.o[o]=n.o[a],o++,a--;else for(c=0,r=h.O.truncate(r/p);c<r;c++){for(var f=0;f<p;f++)this.o[o+f]=n.o[a+f];o+=p,a-=p}},l.prototype.En=function(o,r,n){if(this.Pb||o+r>this.size)throw h.i.Hb();0<n-(o+r)&&k(this.o,o,o+r,o+(n-(o+r))+r),this.size-=r},l.prototype.ni=function(o,r,n){if(this.Pb||1>n||r%n!=0)throw h.i.Hb();for(var a=r>>1,c=0;c<a;c+=n){r-=n;for(var p=0;p<n;p++){var f=this.o[o+c+p];this.o[o+c+p]=this.o[o+r+p],this.o[o+r+p]=f}}},l.prototype.Wj=function(o,r,n){if(0>r||0>n||0>r||n+r>this.size)throw h.i.N();for(var a=r;a<r+n;a++)this.o[a]=o},l.prototype.Ar=function(o,r,n,a,c){if(!(a&&o==n||(this.o.set(this.o.subarray(n,n+r),o),a)))for(n=o,o=o+r-c,a=0,r=h.O.truncate(r/2);a<r;a++){for(var p=0;p<c;p++){var f=this.o[n+p];this.o[n+p]=this.o[o+p],this.o[o+p]=f}n+=c,o-=c}},l.prototype.vC=function(o,r,n,a,c){if(0>o||0>r||0>a)throw h.i.N();if(r!=0)for(this.size<(r<<1)+o&&this.resize((r<<1)+o),c||(o+=r-1<<1),c=c?2:-2,r+=a;a<r;a++)this.o[o]=n[a].x,this.o[o+1]=n[a].y,o+=c},l.prototype.Vw=function(o,r,n,a,c){if(0>o||0>r||0>a||this.size<r+o)throw h.i.N();if(c)for(c=0;c<r;c++)n[a+c]=this.o[o+c];else for(a=a+r-1;o<r;o++)n[a]=this.o[o],a--},l.prototype.clear=function(o){o?this.resize(0):this.Bh(0)},l.prototype.ix=function(){this.pk=this.Pb=!0},l.prototype.Vd=function(o,r,n){r=this.o.subarray(o,r),Array.prototype.sort.call(r,n),this.o.set(r,o)},l.prototype.zJ=function(o,r){if(this.Pb)throw h.i.fa("invalid call. Attribute Stream is read only.");this.o[o]|=r},l.prototype.KE=function(o,r){if(this.Pb)throw h.i.fa("invalid call. Attribute Stream is read only.");this.o[o]&=~r},l.prototype.Tp=function(){return 1},l}();h.pn=g}(q||(q={})),function(h){h.Yc=function(){function k(){}return k.Mr=function(g,l){return h.pn.qf(g,l)},k.Dn=function(g,l){return h.be.qf(g,l)},k.pP=function(g,l,o){switch(g){case 1:g=h.be.qf(l,o);break;case 2:g=h.ia.qf(l,o);break;case 4:g=h.pn.qf(l,o);break;default:throw h.i.Qa()}return g},k.YE=function(g,l){return k.pP(h.ra.Tp(g),l*h.ra.Va(g),h.ra.se(g))},k.Oh=function(g,l){return h.ia.qf(g,l)},k.qI=function(g){var l,o=[];for(l=0;l<g;l++)o.push(null);return o},k}()}(q||(q={})),function(h){h.ga=function(k){k===void 0&&(k=0),this.u=k}}(q||(q={})),function(h){h.NL=function(){function k(){}return k.bind=function(g){h.Sc=g.PeDefs,h.pf=g.PeFactory,h.NC=g.PeVertcs,h.ej=g.PeCSTransformations,h.MC=g.PeGTTransformations,h.LL=g.PeGeogtran,h.KL=g.PeFactoryCodechange,h.LC=g.PeGCSExtent,h.Cg=g.PePCSInfo,h.ML=g.PeHorizon,h.JL=g.PeCoordsys,h.lp=g.PeGTlistExtended,h.lp.PE_GTLIST_OPTS_USE_DEFAULT=128,h.pf.initialize(null),h.Mx=g.PeGTlistExtendedEntry,h.pf.fromString(h.Sc.PE_TYPE_UNIT,'UNIT["Meter",1.0]')},k}(),h.pf=null,h.NC=null,h.JL=null,h.ML=null,h.Cg=null,h.lp=null,h.Mx=null,h.LC=null,h.KL=null,h.LL=null,h.Sc=null,h.MC=null,h.ej=null}(q||(q={})),function(h){var k=function(){function g(){}return g.Mb=function(l,o){return 0<=o?g.P(l):-g.P(l)},g.P=function(l){return 0>l?-l:l},g.ti=function(l){return 3552713678800501e-30>l},g.KC=function(l,o,r){return g.P(l-o)<=r*(1+(g.P(l)+g.P(o))/2)},g.Y=function(l,o){return g.KC(l,o,3552713678800501e-30)},g.FL=function(l){return 3552713678800501e-30>=g.P(l)},g.Cd=function(l){return g.FL(l)},g}();h.s=k,h.F=function(){function g(){}return g.gp=function(l,o){var r=0;return(l=k.P(l))+(o=k.P(o))!=0&&(l>o?(r=o/l,r=l*Math.sqrt(1+r*r)):(r=l/o,r=o*Math.sqrt(1+r*r))),r},g.Wq=function(l,o,r,n,a){for(var c=[0,0,0],p=[0,0,0],f=0;2>=f;f++)o[f]-=l[f],r[f]-=o[f];r=c[1]*p[2]-c[2]*p[1],o=c[2]*p[0]-c[0]*p[2],c=c[0]*p[1]-c[1]*p[0],l=-1*(r*l[0]+o*l[1]+c*l[2]),n[0]=r,n[1]=o,n[2]=c,n[3]=l,p=g.on(n),n[0]/=p,n[1]/=p,n[2]/=p,n[3]/=p,a!=0&&(p=k.Cd(c)?k.Cd(l)?k.Mb(1,o):-k.Mb(1,l):k.Mb(1,c),p*=k.Mb(1,a),n[0]*=p,n[1]*=p,n[2]*=p,n[3]*=p)},g.zx=function(l,o,r){r[0]=l[1]*o[2]-o[1]*l[2],r[1]=l[2]*o[0]-o[2]*l[0],r[2]=l[0]*o[1]-o[0]*l[1]},g.St=function(l,o){return l[0]*o[0]+l[1]*o[1]+l[2]*o[2]},g.on=function(l){return g.gp(g.gp(l[0],l[1]),l[2])},g.cl=function(l,o,r,n,a,c,p,f){l=g.n(l,o,r);var m=Math.cos(r);c.u=(l+a)*m*Math.cos(n),p.u=(l+a)*m*Math.sin(n),f.u=(l*(1-o)+a)*Math.sin(r)},g.jO=function(l,o,r,n,a,c,p){var f=g.gp(o,r),m=1*Math.sqrt(1-l),b=m/1;if(k.Y(f,0))c.u=0,a.u=k.Mb(1.570796326794897,n),p.u=k.P(n)-m;else{c.u=Math.atan2(r,o),r=Math.atan2(1*n,m*f),c=Math.cos(r);var x=Math.sin(r);o=m*l/(1-l),l*=1,r=Math.atan2(n+o*x*x*x,f-l*c*c*c),3.141592653589793<k.P(r)&&(r=k.Mb(3.141592653589793,r)-r),r=Math.atan(b*Math.tan(r)),x=Math.sin(r),c=Math.cos(r),a.u=Math.atan2(n+o*x*x*x,f-l*c*c*c),1.570796326794897<k.P(a.u)&&(a.u=k.Mb(3.141592653589793,a.u)-a.u),r=Math.atan(b*Math.tan(a.u)),x=Math.sin(r),c=Math.cos(r),p.u=(n-m*x)*Math.sin(a.u)+(f-1*c)*Math.cos(a.u)}},g.n=function(l,o,r){return r=Math.sin(r),l/Math.sqrt(1-o*r*r)},g.ot=function(l,o){return Math.atan2(Math.sin(o)*(1-l),Math.cos(o))},g.Qj=function(l,o){return Math.atan2(Math.sin(o),Math.cos(o)*(1-l))},g.Rq=function(l,o){if(k.ti(l)||o==0||k.Y(k.P(o),1.570796326794897))return o;if(.006884661117170036>l){var r=Math.sqrt(1-l),n=(1-r)/(1+r),a=n*n,c=n*a,p=n*c,f=n*p,m=n*f,b=n*m,x=1.572916666666667*c-3.2578125*f+4.295068359375*b;l=2.142578125*p-6.071484375*m,r=3.129296875*f-11.249837239583334*b;var T=4.775276692708333*m,I=7.958636765252976*b,A=Math.cos(2*o);return o+Math.sin(2*o)*(1.5*n-.84375*c+.525390625*f-.2688395182291667*b-x+r-I+A*(2*(1.3125*a-1.71875*p+1.650146484375*m)-4*l+6*T+A*(4*x-12*r+24*I+A*(8*l-32*T+A*(16*r-80*I+A*(32*T+64*A*I))))))}for(r=1-l,n=l/2,c=(a=k.P(o))*g.Zu(l)/(1.570796326794897*r),p=9999,m=a,a=0;1e-16<p&&50>a;a++)b=g.w(l,m),f=m-(x=(f=(g.kG(m,l)-n*Math.sin(2*m)/b)/r-c)/(b=1/(b*b*b))),p=k.P(x),m=f;return 0<=o?m:-m},g.qW=function(l,o){return k.ti(o)?l:l*g.Zu(o)/1.570796326794897},g.ba=function(l){return 0>(l=g.pF(l,6.283185307179586))?l+6.283185307179586:3.141592653589793>k.P(l)||k.Y(k.P(l),3.141592653589793)?l:l-6.283185307179586},g.pF=function(l,o){return l-Math.floor(l/o)*o},g.Ah=function(l,o){if(.006884661117170036>o){var r=(o=(1-(o=Math.sqrt(1-o)))/(1+o))*o,n=r*r;return l/(1+o)*(1+.25*r+.015625*n+.00390625*r*n)*1.570796326794897}return l*g.Zu(o)},g.Vq=function(l,o){var r=k.Mb(1,Math.sin(o));return o=1.570796326794897>=(o=k.P(g.pF(o,3.141592653589793)))?o:3.141592653589793-o,(k.Y(o,1.570796326794897)?o:Math.atan(Math.sqrt(1-l)*Math.tan(o)))*r},g.q=function(l,o,r){if(.006884661117170036>o){var n=(o=(1-(o=Math.sqrt(1-o)))/(1+o))*o,a=o*n,c=o*a,p=o*c,f=o*p,m=o*f,b=-.7291666666666666*a+.2278645833333333*p+.03987630208333334*m,x=.615234375*c-.21533203125*f,T=-.54140625*p+.20302734375*m,I=.48876953125*f,A=-.4488699776785715*m,P=Math.cos(2*r);return l/(1+o)*((1+.25*n+.015625*c+.00390625*f)*r+Math.sin(2*r)*(-1.5*o+.1875*a+.0234375*p+.00732421875*m-b+T-A+P*(2*(.9375*n-.234375*c-.03662109375*f)-4*x+6*I+P*(4*b-12*T+24*A+P*(8*x-32*I+P*(16*T-80*A+P*(32*I+64*P*A)))))))}return l*(g.kG(r,o)-.5*o*Math.sin(2*r)/g.w(o,r))},g.w=function(l,o){return o=Math.sin(o),Math.sqrt(1-l*o*o)},g.Zu=function(l){return k.KC(l,1,2220446049250313e-31)?1:1>l?g.Xw(0,1-l)-l/3*g.Uw(0,1-l):NaN},g.kG=function(l,o){var r=k.Mb(1,l);l=k.P(l);var n=Math.floor(l/1.570796326794897);if(1<o)o=l==0?0:NaN;else if(k.Cd(n))o=(l=g.sin(l))*g.Xw(1-l*l,1-o*l*l)-o/3*l*l*l*g.Uw(1-l*l,1-o*l*l);else{var a=h.O.truncate(n%2),c=g.Zu(o);0<a?(l=1.570796326794897*(n+1)-l,o=c*(n+1)-(o=(l=Math.sin(l))*g.Xw(1-l*l,1-o*l*l)-o/3*l*l*l*g.Uw(1-l*l,1-o*l*l))):(l-=1.570796326794897*n,o=c*n+(o=(l=Math.sin(l))*g.Xw(1-l*l,1-o*l*l)-o/3*l*l*l*g.Uw(1-l*l,1-o*l*l)))}return o*r},g.sin=function(l){l=g.ba(l);var o=k.Mb(1,l);return l=k.P(l),k.Y(l,3.141592653589793)?0:k.Y(l,1.570796326794897)?1*o:Math.sin(l)*o},g.Uw=function(l,o){var r,n,a,c,p=l,f=o,m=1;for(o=0,l=1;n=((r=.2*(p+f+3*m))-p)/r,a=(r-f)/r,c=(r-m)/r,!(1e-4>k.P(n)&&1e-4>k.P(a)&&1e-4>k.P(c));)c=Math.sqrt(f),o+=l/((r=Math.sqrt(m))*(m+(c=Math.sqrt(p)*(c+r)+c*r))),l*=.25,p=.25*(p+c),f=.25*(f+c),m=.25*(m+c);return f=(p=n*a)-(m=c*c),3*o+l*(1+(m=p-6*m)*(.10227272727272728*m-.2142857142857143-.1730769230769231*c*(n=m+f+f))+c*(.1666666666666667*n+c*(-.4090909090909091*f+.1153846153846154*c*p)))/(r*Math.sqrt(r))},g.Xw=function(l,o){for(var r,n,a,c,p=1;n=2-((r=(l+o+p)/3)+l)/r,a=2-(r+o)/r,c=2-(r+p)/r,!(1e-4>k.P(n)&&1e-4>k.P(a)&&1e-4>k.P(c));p=.25*(p+r))r=Math.sqrt(o),n=Math.sqrt(p),l=.25*(l+(r=Math.sqrt(l)*(r+n)+r*n)),o=.25*(o+r);return(1+(.04166666666666666*(l=n*a-c*c)-.1-.06818181818181818*(o=n*a*c))*l+.07142857142857142*o)/Math.sqrt(r)},g.Qw=function(l,o){if(k.ti(l)||o==0||k.Y(k.P(o),1.570796326794897))return o;if(.006884661117170036>l){var r=l*l,n=l*r,a=l*n,c=l*a,p=l*c,f=l*p,m=-(.02708333333333333*n+.03430059523809524*a+.03149181547619048*c+.02634359154541446*p+.02156896735835538*f),b=.007669890873015873*a+.01299603174603175*c+.0148051353064374*p+.01454454953803912*f,x=-(.002275545634920635*c+.004830845032667949*p+.006558395368616723*f),T=.0006957236677288761*p+.001775193002406544*f,I=-.000217324089394402*f,A=Math.cos(2*o);return o+Math.sin(2*o)*(-(.5*l+.2083333333333333*r+.09375*n+.04878472222222222*a+.02916666666666667*c+.01938905423280423*p+.01388255931712963*f)-m+x-I+A*(2*(.1041666666666667*r+.0875*n+.06050347222222222*a+.04151785714285714*c+.02958958540013228*p+.02203667534722222*f)-4*b+6*T+A*(4*m-12*x+24*I+A*(8*b-32*T+A*(16*x-80*I+A*(32*T+64*A*I))))))}return o==0||k.Y(k.P(o),1.570796326794897)?r=o:(a=(n=Math.sqrt(l))*Math.sin(o),r=Math.tan(.7853981633974483+o/2)*Math.pow((1-a)/(1+a),n/2),r=2*Math.atan(r)-1.570796326794897),r},g.yO=function(l,o){if(k.ti(l)||o==0||k.Y(k.P(o),1.570796326794897))return o;if(.006884661117170036>l){var r=l*(T=l*(x=l*(A=l*l))),n=l*(I=l*r),a=.05833333333333333*x+.07232142857142858*T+.05634300595238095*r+.0355325796406526*I+.020235546186067*n,c=.02653149801587302*T+.04379960317460317*r+.0429211791776896*I+.03255384637546096*n,p=.01294022817460318*r+.02668104344536636*I+.03155651254609588*n,f=.00659454790965208*I+.0163075268674227*n,m=.003463473736911237*n,b=Math.cos(2*o);return o+Math.sin(2*o)*(.5*l+.2083333333333333*A+.08333333333333333*x+.03611111111111111*T+.01875*r+.01195601851851852*I+.008863673941798942*n-a+p-m+b*(2*(.1458333333333333*A+.1208333333333333*x+.07039930555555556*T+.03616071428571429*r+.01839451058201058*I+.01017113095238095*n)-4*c+6*f+b*(4*a-12*p+24*m+b*(8*c-32*f+b*(16*p-80*m+b*(32*f+64*b*m))))))}var x=Math.sqrt(l),T=x/2,I=Math.tan(.7853981633974483+o/2);l=0,a=1;for(var A=o;a!=0;A=n)r=x*Math.sin(A),n=I*Math.pow((1+r)/(1-r),T),n=2*Math.atan(n)-1.570796326794897,l++,(k.Y(n,A)||3e4<l)&&(a=0);return A},g}()}(q||(q={})),function(h){var k=function(){function g(l){this.ul=this.Us=null,this.Iv=!1,this.GA=this.HA=0,this.HH=new h.h,this.XH=new h.h,this.KA=!1,this.vq=new h.l,this.wH=this.sw=0,this.tw=null,this.zl=!1,this.Eo=null,this.bA=0,this.Ue=l,this.As=h.zb.xv(this.Ue,0,!0),this.HH.Rc(),this.XH.Rc(),this.RH=NaN;var o=l.getCode();0<o?(this.Kk=o,h.pf.getCode(l)):this.Kk=h.pf.getCode(l),0>this.Kk&&(this.Kk=0);var r=this.Ue.getType();if(this.jH=r==h.Sc.PE_TYPE_PROJCS?2:1,r==h.Sc.PE_TYPE_PROJCS&&!l.loadConstants())throw h.i.N("PeProjcs.loadConstants failed");o=r==h.Sc.PE_TYPE_GEOGCS?this.Ue:this.Ue.getGeogcs(),r!=h.Sc.PE_TYPE_GEOGCS&&h.pf.getCode(o),this.Eo=l.getUnit(),this.RH=o.getPrimem().getLongitude(),this.wH=l=o.getUnit().getUnitFactor(),l=Math.PI/(180*l),1e-10>Math.abs(l-1)&&(l=1),this.GA=l,r&h.Sc.PE_TYPE_PROJCS?(o=this.Ue,this.HA=1/o.getUnit().getUnitFactor(),this.sw=.001/this.Ue.getUnit().getUnitFactor(),this.tw=h.Cg.generate(o,h.Cg.PE_PCSINFO_OPTION_NONE),this.zl=this.tw.isPannableRectangle(),this.bA=h.zb.qN(this.tw.getCentralMeridian(),this.GA)):(this.KA=this.zl=!0,this.HA=0,r=1/o.getUnit().getUnitFactor(),this.sw=.001/o.getDatum().getSpheroid().getAxis()*r,this.bA=0),this.zl&&(this.xx(),this.DK(),this.nY(),this.CK(),this.lY(),this.mY())}return g.prototype.$r=function(){return this.Kk},g.prototype.kk=function(){return this.tw},g.Py=function(l,o){return l==o||l!=null&&o!=null&&l.Kk==0&&o.Kk==0&&l.As===o.As},g.prototype.Wc=function(){return this.zl},g.prototype.gh=function(l){l.K(this.so)},g.prototype.pv=function(){return this.so.v},g.prototype.ov=function(){return this.so.C},g.prototype.GR=function(l){l.K(this.uw)},g.prototype.lY=function(){var l=this.Ue.getType();if(l==h.Sc.PE_TYPE_PROJCS){l=this.Ue;var o=this.kk().getCentralMeridian(),r=l.getGeogcs();if(r==null)throw h.i.fa("internal error");o=[[o+(r=1/r.getUnit().getUnitFactor()*Math.PI),0]],h.ej.geogToProj(l,1,o),o=o[0][0],r=l.getParameters()[h.Sc.PE_PARM_X0].getValue();var n=this.ml();l=new h.l,n.A(l),o=(n=Math.abs(o-r))+r,r=-1*n+r,n=l.H,l=l.G;var a=new h.l;a.K(r,l,o,n),this.so==null&&(this.so=a)}else{if(l!=h.Sc.PE_TYPE_GEOGCS)throw h.i.fa("internal error");r=1/this.Ue.getUnit().getUnitFactor()*Math.PI,(l=new h.l).K(-r,-r/2,r,r/2),this.so==null&&(this.so=l)}},g.prototype.mY=function(){var l=this.Ue.getType();if(l==h.Sc.PE_TYPE_PROJCS){var o=this.Ue;if(l=this.kk().getCentralMeridian(),(o=o.getGeogcs())==null)throw h.i.fa("internal error");o=1/o.getUnit().getUnitFactor()*Math.PI;var r=this.Vr(),n=new h.l;r.A(n),(r=new h.l).K(l-o,n.G,l+o,n.H),this.uw==null&&(this.uw=r)}else{if(l!=h.Sc.PE_TYPE_GEOGCS)throw h.i.fa("internal error");o=1/this.Ue.getUnit().getUnitFactor()*Math.PI,(l=new h.l).K(-o,-o/2,o,o/2),this.uw==null&&(this.uw=l)}},g.prototype.bf=function(){return this.GA},g.prototype.pm=function(){return this.HA},g.prototype.Vr=function(){if(this.zl)return this.ul;var l=this.ul;return l??(this.xx(),this.ul)},g.prototype.Wr=function(){return this.zl?null:(this.ul!=null||this.xx(),this.YG)},g.prototype.xx=function(){if(this.Ue.getType()==h.Sc.PE_TYPE_PROJCS){var l=this.Ue,o=l.getGeogcs(),r=l.horizonGcsGenerate();if(r!=null){var n=r[0].getNump(),a=r[0].getKind();l=0<r[0].getInclusive();var c=this.bf(),p=90*c,f=360*c,m=370*c,b=180*c*h.Sc.PE_HORIZON_DELTA/Math.PI,x=new h.l,T=null;if(1<n){for(var I=1;I<n;I++)if(r[I].getKind()==h.Sc.PE_HORIZON_LINE){T==null&&(T=new h.Ta);var A=r[I].getCoord();T.sx(A[0][0],A[0][1]),T.yj(A[1][0],A[1][1])}}if(a==h.Sc.PE_HORIZON_RECT)r=r[0].getCoord(),x.K(r[0][0],r[0][1]),x.Zb(r[1][0],r[1][1]),Math.abs(x.H-p)<1e-7*b&&(x.H=p),Math.abs(x.G+p)<1e-7*b&&(x.G=-p),x.R()>m&&(r=-400*c,x.K(r,x.G,r+5*f,x.H)),r=new h.Fh(x),this.ul==null&&(this.ul=r,this.Iv=l);else{if(m=new h.Da,f=this.kk().isGcsHorizonMultiOverlap(),x=h.gu.bF(o,h.hu.Integer64),f){for(m=new h.gL,b=h.Gh.local().V(m,x,null),I=0;I<n;I++)if(r[I].getKind()==h.Sc.PE_HORIZON_POLY){for(o=r[I].getSize(),c=r[I].getCoord(),a=[],p=0;p<o;p++)a[p]=h.h.construct(c[p][0],c[p][1]);r[I].getInclusive(),f&&((c=new h.Da).Yk(a,o-1),m.ZX(c),b.qe())}m=b.next()}else for(I=0;I<n;I++)if(r[I].getKind()==h.Sc.PE_HORIZON_POLY){for(o=r[I].getSize(),c=r[I].getCoord(),f=[],p=0;p<o;p++)f[p]=h.h.construct(c[p][0],c[p][1]);r[I].getInclusive(),m.Yk(f,o-1)}l?h.Xj.local().wn(m,x,1):h.kp.local().wn(m,x,1),h.dj.local().wn(m,x,1),this.ul==null&&(this.ul=m,this.Iv=l,this.YG=T)}}}},g.prototype.hv=function(){return this.zl||this.ul==null&&this.xx(),this.Iv},g.prototype.DK=function(){if(this.jH==2){var l=this.Ue.horizonPcsGenerate();if(l!=null){var o=l[0].getKind();l[0].getInclusive();var r=l[0].getNump(),n=!1;if(o==h.Sc.PE_HORIZON_RECT)l=l[0].getCoord(),(r=new h.l).K(l[0][0],l[0][1]),r.Zb(l[1][0],l[1][1]),l=new h.Fh(r);else{for(o=-1,n=0;n<r;n++)l[n].getKind()==h.Sc.PE_HORIZON_POLY&&(o=n);for(n=l[o].getSize()-1,l=l[o].getCoord(),r=[],o=0;o<n;o++)r[o]=h.h.construct(l[o][0],l[o][1]);l=o=new h.Da,o.Yk(r,n),n=!0}this.kk().isDensificationNeeded()&&(r=1e5*this.pm(),l=h.Xl.local().V(l,r,null)),n&&(n=new h.Fh,l.bn(n),l.Ke(),l.Qb(),l.qR(),h.Xj.local().wn(l,null,1)),this.Us==null&&(this.Us=l)}}},g.prototype.ml=function(){if(this.zl)return this.Us;var l=this.Us;return l??(this.DK(),this.Us)},g.prototype.nY=function(){if(this.Ue.getType()==h.Sc.PE_TYPE_PROJCS){var l=90*this.bf();l=[[0,l],[0,-l]],h.ej.geogToProj(this.Ue,2,l);var o=this.kk(),r=o.getNorthPoleLocation()!=h.Cg.PE_POLE_OUTSIDE_BOUNDARY;o=o.getSouthPoleLocation()!=h.Cg.PE_POLE_OUTSIDE_BOUNDARY,this.KA||(r&&this.HH.ma(l[0][0],l[0][1]),o&&this.XH.ma(l[1][0],l[1][1]))}this.KA=!0},g.prototype.CK=function(){if(this.jH==1){var l=400*this.bf();this.vq.K(-l,-l,l,l)}else l=h.Cg.generate(this.Ue,h.Cg.PE_PCSINFO_OPTION_DOMAIN),l=h.l.construct(l.getDomainMinx(),l.getDomainMiny(),l.getDomainMaxx(),l.getDomainMaxy()),this.vq.B()&&this.vq.K(l)},g.prototype.hR=function(l){this.zl&&l.K(this.vq),this.vq.B()&&this.CK(),l.K(this.vq)},g.prototype.Up=function(){return this.RH},g.prototype.zi=function(){return this.bA},g.prototype.Hd=function(){return this.Eo},g.prototype.Xr=function(){return this.wH},g}();h.OC=k}(q||(q={})),function(h){var k=function(){function g(l){this.KT=l,this.As=h.zb.xv(l,0,!0);var o=l.getCode();this.ss=0<o?o:h.pf.getCode(l),0>this.ss&&(this.ss=0),this.Eo=o=this.KT.getUnit(),this.IH=1/o.getUnitFactor(),h.pf.getCode(l)}return g.Py=function(l,o){return l==o||l!=null&&o!=null&&l.ss==0&&o.ss==0&&l.As===o.As},g.prototype.$r=function(){return this.ss},g}();h.PL=k}(q||(q={})),function(h){h.Yg=function(){function k(){}return k.tb=function(g,l,o,r,n,a,c,p){if(a!=null||c!=null||p!=null){r=h.F.ba(r),l=h.F.ba(l),o=h.F.ba(o),n=h.F.ba(n),1.570796326794897<h.s.P(o)&&(o=h.s.Mb(3.141592653589793,o)-o,l=h.F.ba(l+3.141592653589793)),1.570796326794897<h.s.P(n)&&(n=h.s.Mb(3.141592653589793,n)-n,r=h.F.ba(r+3.141592653589793));var f=h.F.ba(r-l);if(h.s.Y(o,n)&&(h.s.Y(l,r)||h.s.Y(h.s.P(o),1.570796326794897)))a!=null&&(a.u=0),c!=null&&(c.u=0),p!=null&&(p.u=0);else{if(h.s.Y(o,-n)){if(h.s.Y(h.s.P(o),1.570796326794897))return a!=null&&(a.u=3.141592653589793*g),c!=null&&(c.u=0<o?h.F.ba(3.141592653589793-h.F.ba(r)):h.F.ba(r)),void(p!=null&&(p.u=0<o?h.F.ba(r):h.F.ba(3.141592653589793-h.F.ba(r))));if(h.s.Y(h.s.P(f),3.141592653589793))return a!=null&&(a.u=3.141592653589793*g),c!=null&&(c.u=0),void(p!=null&&(p.u=0))}var m=h.s.P(o)==1.570796326794897?0:Math.cos(o),b=Math.sin(o),x=h.s.P(n)==1.570796326794897?0:Math.cos(n),T=Math.sin(n),I=h.s.P(f)==1.570796326794897?0:Math.cos(f),A=h.s.P(f)==3.141592653589793?0:Math.sin(f);if(a!=null){var P=Math.sin((n-o)/2);f=Math.sin(f/2),a.u=2*Math.asin(Math.sqrt(P*P+m*x*f*f))*g}c!=null&&(c.u=h.s.Y(h.s.P(o),1.570796326794897)?0>o?r:h.F.ba(3.141592653589793-r):Math.atan2(x*A,m*T-b*x*I)),p!=null&&(h.s.Y(h.s.P(n),1.570796326794897)?p.u=0>n?l:h.F.ba(3.141592653589793-l):(p.u=Math.atan2(m*A,T*m*I-x*b),p.u=h.F.ba(p.u+3.141592653589793)))}}},k.rf=function(g,l,o,r,n,a,c){if(a!=null||c!=null){l=h.F.ba(l),o=h.F.ba(o),1.570796326794897<h.s.P(o)&&(o=h.s.Mb(3.141592653589793,o)-o,l=h.F.ba(l+3.141592653589793)),h.s.Y(h.s.P(o),1.570796326794897)&&(l=0),n=h.F.ba(n);var p=h.s.Y(h.s.P(n),1.570796326794897)?0:Math.cos(n),f=h.s.Y(h.s.P(n),3.141592653589793)?0:Math.sin(n),m=h.s.Y(h.s.P(o),1.570796326794897)?0:Math.cos(o),b=Math.sin(o);g=r/g,r=h.s.Y(h.s.P(g),1.570796326794897)?0:Math.cos(g);var x=h.s.Y(h.s.P(g),3.141592653589793)?0:Math.sin(g),T=Math.asin(b*r+m*x*p);c!=null&&(c.u=T),a!=null&&(a.u=h.s.Y(h.s.P(T),1.570796326794897)?h.s.Y(o,-T)?0>T?n:h.F.ba(3.141592653589793-n):l:h.s.Y(h.s.P(o),1.570796326794897)&&h.s.Y(g,3.141592653589793)?0>o?n:h.F.ba(3.141592653589793-n):h.F.ba(l+Math.atan2(x*f,m*r-b*x*p)))}},k}()}(q||(q={})),function(h){h.Wk=function(){function k(){}return k.tb=function(g,l,o,r,n,a,c,p,f){var m=new h.ga(0),b=new h.ga(0),x=[0,0,0],T=[0,0,0],I=[0,0,0],A=new h.ga(0),P=new h.ga(0),j=new h.ga(0),D=new h.ga(0),F=new h.ga(0);if(c!=null||p!=null||f!=null)if(h.s.ti(l))h.Yg.tb(g,o,r,n,a,c,p,f);else{n=h.F.ba(n),o=h.F.ba(o);var N=h.F.ba(n-o);if(h.s.Y(r,a)&&(h.s.Y(o,n)||h.s.Y(h.s.P(r),1.570796326794897)))c!=null&&(c.u=0),p!=null&&(p.u=0),f!=null&&(f.u=0);else{if(h.s.Y(r,-a)){if(h.s.Y(h.s.P(r),1.570796326794897))return c!=null&&(c.u=2*h.F.Ah(g,l)),p!=null&&(p.u=0<r?h.F.ba(3.141592653589793-h.F.ba(n)):h.F.ba(n)),void(f!=null&&(f.u=0<r?h.F.ba(n):h.F.ba(3.141592653589793-h.F.ba(n))));h.s.Y(h.s.P(N),3.141592653589793)&&(c!=null&&(c.u=2*h.F.Ah(g,l)),p!=null&&(p.u=0),f!=null&&(f.u=0))}else(h.s.Y(h.s.P(r),1.570796326794897)||h.s.Y(h.s.P(a),1.570796326794897))&&(h.s.Y(h.s.P(r),1.570796326794897)?o=n:n=o);var z=0;if(0>N){z=1;var W=o;o=n,n=W,W=r,r=a,a=W}N=h.F.ot(l,r);var H=h.F.ot(l,a);p==null&&f==null||(h.Yg.tb(g,o,N,n,H,null,m,b),m=Math.atan2(Math.sin(m.u)*Math.cos(r-N),Math.cos(m.u)),b=Math.atan2(Math.sin(b.u)*Math.cos(a-H),Math.cos(b.u)),z!=0&&(W=m,m=b,b=W),p!=null&&(p.u=m),f!=null&&(f.u=b)),c!=null&&(h.F.cl(1,l,r,o,0,j,D,F),x[0]=j.u,x[1]=D.u,x[2]=F.u,h.F.cl(1,l,a,n,0,j,D,F),T[0]=j.u,T[1]=D.u,T[2]=F.u,I[0]=x[1]*T[2]-T[1]*x[2],I[1]=-(x[0]*T[2]-T[0]*x[2]),I[2]=x[0]*T[1]-T[0]*x[1],l=1-h.F.w(l,h.F.Vq(l,h.F.Qj(l,Math.acos(I[2]/Math.sqrt(I[0]*I[0]+I[1]*I[1]+I[2]*I[2]))))),l*=2-l,p=Math.atan2(-I[1],-I[0]),I=h.F.ba(p-1.570796326794897),p=h.F.ba(p+1.570796326794897),I=h.s.P(h.F.ba(o-I))<=h.s.P(h.F.ba(o-p))?I:p,h.Yg.tb(1,I,0,o,N,A,null,null),h.Yg.tb(1,I,0,n,H,P,null,null),3.141592653589793<A.u+P.u&&(I=h.F.ba(I+3.141592653589793),h.Yg.tb(1,I,0,o,N,A,null,null),h.Yg.tb(1,I,0,n,H,P,null,null)),A.u*=h.s.Mb(1,r),P.u*=h.s.Mb(1,a),A.u=h.F.Qj(l,A.u),P.u=h.F.Qj(l,P.u),o=h.F.q(g,l,A.u),g=h.F.q(g,l,P.u),c.u=h.s.P(g-o))}}},k.rf=function(g,l,o,r,n,a,c,p){var f=0,m=new h.ga(0),b=new h.ga(0),x=[0,0,0],T=[0,0,0],I=new h.ga(0),A=new h.ga(0),P=new h.ga(0);if(c!=null||p!=null)if(h.s.ti(l))h.Yg.rf(g,o,r,n,a,c,p);else if(h.s.Cd(n))c!=null&&(c.u=o),p!=null&&(p.u=r);else if(a=h.F.ba(a),0>n&&(n=h.s.P(n),a=h.F.ba(a+3.141592653589793)),o=h.F.ba(o),r=h.F.ba(r),1.570796326794897<h.s.P(r)&&(o=h.F.ba(o+3.141592653589793),r=h.s.Mb(3.141592653589793,r)-r),h.s.Y(h.s.P(r),1.570796326794897)&&(o=0),h.s.Cd(r)){var j=h.s.P(1.570796326794897-h.s.P(a));j=h.F.Qj(l,j),j=1-h.F.w(l,h.F.Vq(l,j)),j*=2-j,g=n/h.F.Ah(g,j)*1.570796326794897,g=h.F.Rq(j,g),g=h.F.ot(j,g),h.Yg.rf(1,o,r,g,a,c,m),p!=null&&(f=m.u),p!=null&&(p.u=h.F.Qj(l,f))}else if(h.s.Y(h.s.P(r),1.570796326794897))m=2*(f=h.F.Ah(g,l)),a=0<(g=h.s.Mb(1.570796326794897,r))?h.F.ba(3.141592653589793-a):a,r=f-n,h.s.P(r)<=f?c!=null&&(c.u=a):(r=Math.floor(n/m),h.O.truncate(r%2)==0?(c!=null&&(c.u=a),n-=r*m):(c!=null&&(c.u=h.F.ba(a+3.141592653589793)),n=(r+1)*m-n),r=f-n),p!=null&&(p.u=h.F.Rq(l,r/f*g));else{j=h.F.ot(l,r),a=Math.atan2(Math.sin(a),Math.cos(a)*Math.cos(r-j));var D=h.O.truncate(h.s.Mb(1,j))*(1.570796326794897>=h.s.P(a)?1:-1);a=h.F.ba(o+Math.atan(Math.tan(a)*-Math.sin(j))),h.Yg.tb(g,a,0,o,j,null,b,null),j=h.s.P(1.570796326794897-h.s.P(b.u)),j=h.F.Qj(l,j),j=1-h.F.w(l,h.F.Vq(l,j)),j*=2-j,h.F.cl(1,l,0,a,0,I,A,P),x[0]=I.u,x[1]=A.u,x[2]=P.u,h.F.cl(1,l,r,o,0,I,A,P),T[0]=I.u,T[1]=A.u,T[2]=P.u,r=Math.acos((x[0]*T[0]+x[1]*T[1]+x[2]*T[2])/Math.sqrt(T[0]*T[0]+T[1]*T[1]+T[2]*T[2])),r=h.F.Qj(j,r),n=0<(r=h.F.q(g,j,r)+n*D)?b.u:h.F.ba(b.u+3.141592653589793),g=h.s.P(r)/h.F.Ah(g,j)*1.570796326794897,g=h.F.Rq(j,g),g=h.F.ot(j,g),h.Yg.rf(1,a,0,g,n,c,m),p!=null&&(f=m.u),p!=null&&(p.u=h.F.Qj(l,f))}},k}()}(q||(q={})),function(h){h.cu=function(){function k(){}return k.tb=function(g,l,o,r,n,a,c,p,f){var m=0,b=0,x=0;if(c!=null||p!=null||f!=null)if(h.s.ti(l))h.Yg.tb(g,o,r,n,a,c,p,f);else{var T=h.F.ba(n-o);if(h.s.Y(r,a)&&(h.s.Cd(T)||h.s.Y(h.s.P(r),1.570796326794897)))c!=null&&(c.u=0),p!=null&&(p.u=0),f!=null&&(f.u=0);else{if(h.s.Y(r,-a)){if(h.s.Y(h.s.P(r),1.570796326794897))return c!=null&&(c.u=2*h.F.Ah(g,l)),p!=null&&(p.u=0<r?h.F.ba(3.141592653589793-h.F.ba(n)):h.F.ba(n)),void(f!=null&&(f.u=0<r?h.F.ba(n):h.F.ba(3.141592653589793-h.F.ba(n))));h.s.Y(h.s.P(T),3.141592653589793)&&(c!=null&&(c.u=2*h.F.Ah(g,l)),p!=null&&(p.u=0),f!=null&&(f.u=0))}else if(h.s.Y(h.s.P(r),1.570796326794897)||h.s.Y(h.s.P(a),1.570796326794897)||h.s.Cd(T)||h.s.Y(h.s.P(T),3.141592653589793))return void h.Wk.tb(g,l,o,r,n,a,c,p,f);var I=1-Math.sqrt(1-l),A=l/(1-l),P=g*(1-I);g=h.F.Vq(l,r);var j=h.F.Vq(l,a);l=h.s.P(g)==1.570796326794897?0:Math.cos(g);var D=Math.sin(g),F=h.s.P(j)==1.570796326794897?0:Math.cos(j),N=Math.sin(j),z=T,W=Math.cos(z),H=Math.sin(z),Y=1,Z=0;do{var se=z,ce=Math.sqrt(Math.pow(F*H,2)+Math.pow(l*N-D*F*W,2)),ue=D*N+l*F*W,$e=Math.atan2(ce,ue);if(ce==0){Y=0;break}var fe=l*F*H/ce;if(m=Math.cos(Math.asin(fe)),b=ue-2*D*N/(m*=m),1<h.s.P(b)&&(b=h.s.Mb(1,b)),z=T+(1-(z=I/16*m*(4+I*(4-3*m))))*I*fe*($e+z*ce*(b+z*ue*(2*(x=b*b)-1))),W=Math.cos(z),H=Math.sin(z),Z++,3.141592653589793<h.s.P(z)&&30<Z){Y=0;break}}while(5e3>=Z&&!h.s.Y(se,z));if(Y!=0)I=(A*=m)*(256+A*(A*(74-47*A)-128))/1024,c!=null&&(c.u=P*(1+A*(4096+A*(A*(320-175*A)-768))/16384)*($e-I*ce*(b+I/4*(ue*(2*x-1)-I/6*b*(4*ce*ce-3)*(4*x-3))))),p!=null&&(p.u=h.s.Y(h.s.P(r),1.570796326794897)?0>r?n:h.F.ba(3.141592653589793-n):Math.atan2(F*H,l*N-D*F*W)),f!=null&&(h.s.Y(h.s.P(a),1.570796326794897)?f.u=0>a?o:h.F.ba(3.141592653589793-o):(f.u=Math.atan2(l*H,l*N*W-D*F),f.u=h.F.ba(f.u+3.141592653589793)));else{z=h.s.Mb(3.141592653589793,T),ue=D*N-l*F,$e=Math.acos(ue),ce=Math.sin($e),m=1,Z=fe=0;do x=fe,W=1-.25*(fe=I*(m*=m)*(1+I+I*I))+.1875*(b=I*I*(W=m*m)*(1+2.25*I))-.1953125*(Y=I*I*I*W*m),fe=.25*fe-.25*b+.29296875*Y,H=.03125*b-.05859375*Y,Y*=.00651041666666667,b=ue-2*D*N/m,1<h.s.P(b)&&(b=h.s.Mb(1,b)),m=Math.acos(b),ue=Math.cos(2*m),se=Math.cos(3*m),H=(fe=h.s.Y(r,-a)?h.F.ba(3.141592653589793-T)/(3.141592653589793*I*W):h.F.ba(z-T)/(I*(W*$e+fe*ce*b+H*Math.sin(2*$e)*ue+Y*Math.sin(3*$e)*se)))*ce/(l*F),z=1.570796326794897<h.s.P(T)?h.s.Mb(3.141592653589793,H)-Math.asin(H):Math.asin(H),W=Math.cos(z),ce=Math.sqrt(Math.pow(F*H,2)+Math.pow(l*N-D*F*W,2)),$e=3.141592653589793-Math.asin(h.s.P(ce)),ue=Math.cos($e),m=Math.cos(Math.asin(fe)),Z++;while(70>=Z&&!h.s.Y(x,fe));c!=null&&(W=1+(A*=m*=m)*(4096+A*(A*(320-175*A)-768))/16384,h.s.Y(r,-a)?c.u=3.141592653589793*P*W:(b=ue-2*D*N/m,m=Math.acos(b),ue=Math.cos(2*m),se=Math.cos(3*m),c.u=P*(W*$e+A*(A*(128+A*(35*A-60))-512)/2048*ce*b+A*(5*A-4)/6144*A*A*Math.sin(2*$e)*ue+Y*Math.sin(3*$e)*se+-762939453125e-16*A*A*A*A*Math.sin(4*$e)*Math.cos(4*m)))),p!=null&&(h.s.Cd(r)&&h.s.Cd(a)?(m=Math.sqrt(1-fe*fe),p.u=Math.acos(m),0>T&&(p.u*=-1)):h.s.Y(h.s.P(r),1.570796326794897)?p.u=0>r?n:h.F.ba(3.141592653589793-n):(c=fe/l,P=Math.sqrt(1-c*c),0>l*N-D*F*Math.cos(z)&&(P*=-1),p.u=Math.atan2(c,P),h.s.Y(r,-a)&&h.s.P(h.F.ba(o-n))>3.141592653589793*(1-I*Math.cos(r))&&(0<r&&1.570796326794897>h.s.P(p.u)||0>r&&1.570796326794897<h.s.P(p.u))&&(p.u=h.s.Mb(3.141592653589793,p.u)-p.u))),f!=null&&(h.s.Cd(r)&&h.s.Cd(a)?(m=Math.sqrt(1-fe*fe),f.u=Math.acos(m),0<=T&&(f.u*=-1)):h.s.Y(h.s.P(a),1.570796326794897)?f.u=0>a?o:h.F.ba(3.141592653589793-o):(T=fe/F,c=Math.sqrt(1-T*T),P=Math.sin(z/2),0>Math.sin(j-g)-2*l*N*P*P&&(c*=-1),f.u=Math.atan2(T,c),f.u=h.F.ba(f.u+3.141592653589793),h.s.Y(r,-a)&&!h.s.Cd(r)&&!h.s.Y(h.s.P(r),1.570796326794897)&&h.s.P(h.F.ba(o-n))>3.141592653589793*(1-I*Math.cos(r))&&(p!=null?P=p.u:(c=fe/l,P=Math.sqrt(1-c*c),0>l*N-D*F*Math.cos(z)&&(P*=-1),P=Math.atan2(c,P),h.s.Y(r,-a)&&h.s.P(h.F.ba(o-n))>3.141592653589793*(1-I*Math.cos(r))&&(0<r&&1.570796326794897>h.s.P(P)||0>r&&1.570796326794897<h.s.P(P))&&(P=h.s.Mb(3.141592653589793,P)-P)),1.570796326794897>=h.s.P(P)&&1.570796326794897<h.s.P(f.u)||1.570796326794897<=h.s.P(P)&&1.570796326794897>h.s.P(f.u))&&(f.u=-1*h.F.ba(f.u+3.141592653589793))))}}}},k.rf=function(g,l,o,r,n,a,c,p){if(c!=null||p!=null)if(h.s.ti(l))h.Yg.rf(g,o,r,n,a,c,p);else if(a=h.F.ba(a),h.s.Y(h.s.P(r),1.570796326794897)||h.s.Cd(a)||h.s.Y(h.s.P(a),3.141592653589793))h.Wk.rf(g,l,o,r,n,a,c,p);else{var f=h.s.P(a)==1.570796326794897?0:Math.cos(a),m=h.s.P(a)==3.141592653589793?0:Math.sin(a);h.s.Y(h.s.P(r),1.570796326794897)&&(o=0),a=1-Math.sqrt(1-l);var b=h.F.Vq(l,r);r=h.s.P(b)==1.570796326794897?0:Math.cos(b);var x=Math.sin(b);b=Math.atan2(Math.tan(b),f);var T=r*m,I=T*T,A=1-I,P=l/(1-l)*A,j=(l=P*(256+P*(P*(74-47*P)-128))/1024)/4,D=l/6,F=n/(g*(1-a)*(1+P*(4096+P*(P*(320-175*P)-768))/16384)),N=F;do{var z=N;n=h.s.P(N)==1.570796326794897?0:Math.cos(N);var W=(P=h.s.P(N)==3.141592653589793?0:Math.sin(N))*P;N=l*P*((g=Math.cos(2*b+N))+j*(n*(2*(N=g*g)-1)-D*g*(4*W-3)*(4*N-3)))+F}while(!h.s.Y(z,N));n=h.s.P(N)==1.570796326794897?0:Math.cos(N),P=h.s.P(N)==3.141592653589793?0:Math.sin(N),c!=null&&(m=Math.atan2(P*m,r*n-x*P*f),A=a/16*A*(4+a*(4-3*A)),g=Math.cos(2*b+N),c.u=h.F.ba(o+(m-(1-A)*a*T*(N+A*P*(g+A*n*(2*g*g-1)))))),p!=null&&(A=x*P-r*n*f,A=(1-a)*Math.sqrt(I+A*A),p.u=Math.atan2(x*n+r*P*f,A))}},k}()}(q||(q={})),function(h){h.PC=function(){function k(){}return k.tb=function(g,l,o,r,n,a,c,p,f){var m=h.F.ba(n-o),b=h.s.Y(h.s.P(r),1.570796326794897),x=h.s.Y(h.s.P(a),1.570796326794897);if(h.s.Y(r,a)&&(h.s.Cd(m)||b))c!=null&&(c.u=0),p!=null&&(p.u=0),f!=null&&(f.u=0);else{if(h.s.ti(l)){var T=Math.sin(r),I=Math.sin(a);T=Math.sqrt((1+T)/(1-T)),I=Math.sqrt((1+I)/(1-I)),T=Math.log(I)-Math.log(T),T=Math.atan2(m,T),c!=null&&(c.u=h.s.Y(r,a)?h.s.P(g*Math.cos(r)*m):h.s.P((g*a-g*r)/Math.cos(T)))}else I=h.F.Qw(l,a),T=Math.sin(h.F.Qw(l,r)),I=Math.sin(I),T=Math.sqrt((1+T)/(1-T)),I=Math.sqrt((1+I)/(1-I)),T=Math.log(I)-Math.log(T),T=Math.atan2(m,T),c!=null&&(h.s.Y(r,a)?c.u=h.s.P(g*m*Math.cos(r)/h.F.w(l,r)):(m=h.F.q(g,l,r),g=h.F.q(g,l,a),c.u=h.s.P((g-m)/Math.cos(T))));p==null&&f==null||(c=h.F.ba(T+3.141592653589793),b&&x||!b&&!x||(b?T=0>r?n:h.F.ba(3.141592653589793-n):x&&(c=0>a?o:h.F.ba(3.141592653589793-o))),p!=null&&(p.u=T),f!=null&&(f.u=c))}},k.rf=function(g,l,o,r,n,a,c,p){a=h.F.ba(a),0>n&&(n=h.s.P(n),a=h.F.ba(a+3.141592653589793)),h.s.ti(l)?h.s.Y(h.s.P(r),1.570796326794897)?(o=0>r?a:h.F.ba(3.141592653589793-a),3.141592653589793>=(a=n/g%6.283185307179586)?g=r-h.s.Mb(a,r):(o=h.F.ba(o+3.141592653589793),g=-r+h.s.Mb(a-3.141592653589793,r))):h.s.Y(h.s.P(a),1.570796326794897)?(o=h.F.ba(o+h.s.Mb(n,a)/(g*Math.cos(r))),g=r):(g=r+n*Math.cos(a)/g,1.570796326794897<h.s.P(g)&&(g=1.570796326794897),h.s.Y(h.s.P(g),1.570796326794897)&&(h.s.Cd(a)||h.s.Y(h.s.P(a),3.141592653589793))||(1.570796316258184<h.s.P(g)&&(g=h.s.Mb(1.570796316258184,g)),l=Math.sin(r),r=Math.sin(g),l=Math.sqrt((1+l)/(1-l)),r=Math.sqrt((1+r)/(1-r)),l=Math.log(r)-Math.log(l),o=h.F.ba(o+Math.tan(a)*l))):h.s.Y(h.s.P(r),1.570796326794897)?(o=0>r?a:h.F.ba(3.141592653589793-a),a=n/h.F.qW(g,l),3.141592653589793>=(a%=6.283185307179586)?g=r-h.s.Mb(a,r):(o=h.F.ba(o+3.141592653589793),g=-r+h.s.Mb(a-3.141592653589793,r)),g=h.F.Rq(l,g)):h.s.Y(h.s.P(a),1.570796326794897)?(o=h.F.ba(o+h.s.Mb(n,a)*h.F.w(l,r)/(g*Math.cos(r))),g=r):(g=1.570796326794897*(n*Math.cos(a)+h.F.q(g,l,r))/h.F.Ah(g,l),1.570796326794897<h.s.P(g)&&(g=h.s.Mb(1.570796326794897,g)),g=h.F.Rq(l,g),h.s.Y(h.s.P(g),1.570796326794897)&&(h.s.Cd(a)||h.s.Y(h.s.P(a),3.141592653589793))||(n=h.F.Qw(l,r),r=h.F.Qw(l,g),1.570796316258184<h.s.P(r)&&(r=h.s.Mb(1.570796316258184,g),g=h.F.yO(l,r)),l=Math.sin(n),r=Math.sin(r),l=Math.sqrt((1+l)/(1-l)),r=Math.sqrt((1+r)/(1-r)),l=Math.log(r)-Math.log(l),o=h.F.ba(o+Math.tan(a)*l))),c!=null&&(c.u=o),p!=null&&(p.u=g)},k}()}(q||(q={})),function(h){h.kb=function(){function k(){}return k.Xy=function(g,l,o,r,n,a,c){h.cu.tb(g,l,o,r,n,a,null,c,null)},k.yi=function(g,l,o,r,n,a,c,p){h.cu.rf(g,l,o,r,n,a,c,p)},k.wd=function(g,l,o,r,n,a,c,p,f,m){switch(m){case 2:h.Wk.tb(g,l,o,r,n,a,c,p,f);break;case 3:h.QC.tb(g,l,o,r,n,a,c,p,f);break;case 1:h.PC.tb(g,l,o,r,n,a,c,p,f);break;default:h.cu.tb(g,l,o,r,n,a,c,p,f)}},k.oj=function(g,l,o,r,n,a,c,p,f){switch(f){case 2:h.Wk.rf(g,l,o,r,n,a,c,p);break;case 3:h.QC.rf(g,l,o,r,n,a,c,p);break;case 1:h.PC.rf(g,l,o,r,n,a,c,p);break;default:h.cu.rf(g,l,o,r,n,a,c,p)}},k}()}(q||(q={})),function(h){var k=function(){function l(){this.y=this.x=null}return l.construct=function(o){var r=new l;return r.x=new h.Wb,r.x.set(o.x),r.y=new h.Wb,r.y.set(o.y),r},l.VE=function(o,r){var n=new l;return n.x=new h.Wb,n.x.set(o),n.y=new h.Wb,n.y.set(r),n},l.prototype.qg=function(){return this.x.qg()&&this.y.qg()},l.prototype.value=function(){return h.h.construct(this.x.value(),this.y.value())},l}();h.vY=k;var g=function(){function l(){this.z=this.y=this.x=null}return l.construct=function(o){var r=new l;return r.x=new h.Wb,r.x.set(o.x),r.y=new h.Wb,r.y.set(o.y),r.z=new h.Wb,r.z.set(o.z),r},l.VE=function(o,r,n){var a=new l;return a.x=new h.Wb,a.x.set(o),a.y=new h.Wb,a.y.set(r),a.z=new h.Wb,a.z.set(n),a},l.prototype.qg=function(){return this.x.qg()&&this.y.qg()&&this.z.qg()},l.prototype.value=function(){return new h.Nd(this.x.value(),this.y.value(),this.z.value())},l.prototype.Qh=function(o){var r=new h.Wb,n=new h.Wb,a=new h.Wb;return r.Kl(this.x,o.x),n.Kl(this.y,o.y),a.Kl(this.z,o.z),(o=new h.Wb).dN(r,n),o.add(a),o},l.prototype.cF=function(o){var r=new l;r.x.Kl(this.y,o.z),r.y.Kl(this.z,o.x),r.z.Kl(this.x,o.y);var n=new h.Wb,a=new h.Wb,c=new h.Wb;return n.Kl(this.z,o.y),a.Kl(this.x,o.z),c.Kl(this.y,o.x),r.x.sub(n),r.y.sub(a),r.z.sub(c),r},l}();h.wY=g,h.Ox=function(){function l(){}return l.EP=function(o,r,n){var a=r.x;r=r.y,l.cl(1,o,Math.cos(a),Math.sin(a),Math.cos(r),Math.sin(r),n)},l.DP=function(o,r){var n=new h.Nd;return l.EP(o,r,n),n},l.cl=function(o,r,n,a,c,p,f){o/=Math.sqrt(1-r*p*p),f.K(o*c*n,o*c*a,o*(1-r)*p)},l.Yu=function(o,r){var n=new h.Wb,a=new h.Wb,c=new h.Wb,p=new h.Wb;n.cos(r.x),a.sin(r.x),c.cos(r.y),p.sin(r.y);var f=new h.Wb;return f.set(p),f.Ag(p),f.No(o),f.No(-1),f.kN(),f.sqrt(),(r=new h.Wb).set(1),r.jm(f),(f=new h.Wb).set(r),f.Ag(c),f.Ag(n),(n=new h.Wb).set(r),n.Ag(c),n.Ag(a),(a=new h.Wb).set(r),a.No(1-o),a.Ag(p),g.VE(f,n,a)},l.SS=function(o,r,n,a){if(Math.abs(r.x-n.x)>Math.PI||Math.abs(r.y)>.5*Math.PI||Math.abs(n.y)>.5*Math.PI||(Math.abs(r.y)==.5*Math.PI||Math.abs(n.y)==.5*Math.PI)&&r.x!=n.x)return NaN;if(a=l.cB(a,Math.min(r.x,n.x),Math.max(r.x,n.x)),!new h.Nc(r.x,n.x).contains(a))return NaN;var c=k.construct(r);if(n=k.construct(n),c=l.Yu(o,c),n=l.Yu(o,n),(n=c.cF(n)).z.qg())return r.y;var p=new h.Wb;p.set(n.x),p.jm(n.z),p.No(-1);var f=new h.Wb;f.set(n.y),f.jm(n.z),f.No(-1);var m=new h.Wb;return m.set(f),m.Ag(f),(c=new h.Wb).set(p),c.Ag(p),c.add(m),c.sqrt(),c.qg()||p.qg()&&f.qg()?r.y:(r=Math.atan2(f.value(),p.value()),r=Math.atan2(c.value()*Math.cos(r-a),1-o),a=l.DP(o,h.h.construct(a,r)),o=new h.Nd(a.x,a.y,-a.z),a=n.value().Qh(a),o=n.value().Qh(o),Math.abs(o)<Math.abs(a)&&(r=-r),r)},l.Oz=function(o,r,n,a,c){if(c[0]=NaN,c[1]=NaN,Math.abs(r.x-n.x)>Math.PI||Math.abs(r.y)>.5*Math.PI||Math.abs(n.y)>.5*Math.PI||(Math.abs(r.y)==.5*Math.PI||Math.abs(n.y)==.5*Math.PI)&&r.x!=n.x||Math.abs(a)>=.5*Math.PI||0<r.y&&0<n.y&&r.y>a&&n.y>a||0>r.y&&0>n.y&&r.y<a&&n.y<a)return 0;var p=k.construct(r),f=k.construct(n);p=l.Yu(o,p),f=l.Yu(o,f);var m=p.cF(f);if(m.z.qg())return new h.Nc(r.y,n.y).contains(a)?(c[0]=r.x,1):0;(f=new h.Wb).set(m.x),f.jm(m.z),f.No(-1),(p=new h.Wb).set(m.y),p.jm(m.z),p.No(-1),(m=new h.Wb).set(p),m.Ag(p);var b=new h.Wb;return b.set(f),b.Ag(f),b.add(m),b.sqrt(),b.qg()||f.qg()&&p.qg()?a==0?(c[0]=r.x,c[1]=n.x,2):0:(o=(1-o)*Math.tan(a)/b.value(),1<Math.abs(o)?0:(o=Math.acos(o),m=Math.atan2(p.value(),f.value()),f=Math.min(r.x,n.x),p=Math.max(r.x,n.x),n=l.cB(m-o,f,p),o=a!=0?l.cB(m+o,f,p):n,a=0,f<=n&&n<=p&&(c[a]=n,a++),o!=n&&f<=o&&o<=p&&(c[a]=o,++a==2&&Math.abs(c[0]-r.x)>Math.abs(c[1]-r.x)&&(r=c[0],c[0]=c[1],c[1]=r)),a))},l.cB=function(o,r,n){return o>n?o-=2*(r=Math.ceil((o-n)/(2*Math.PI)))*Math.PI:o<r&&(o+=2*(r=Math.ceil((r-o)/(2*Math.PI)))*Math.PI),o},l}()}(q||(q={})),function(h){h.XK=function(){function k(){}return k.$X=function(g,l){var o=8,r=[0,0,0,0],n=new h.h;n.L(l),n.scale(h.cb.sc(g).Hd().Ec()==9102?1:h.cb.sc(g).Hd().ai/3.141592653589793*180),-180>n.x?(n.x-=n.x%360,-180>n.x&&(n.x+=360)):180<n.x&&(n.x-=n.x%360,180<n.x&&(n.x-=360)),90<n.y&&(n.y=90),-90>n.y&&(n.y=-90);for(var a=-180,c=180,p=(g=5*o)-1,f=(l=(g+31)/32)-1;0<=f;f--)for(var m=p-32*f,b=Math.min(32,g-32*f),x=1;x<b;x+=2){var T=.5*(c+a);n.x>=T?(r[f]|=1<<m,a=T):c=T,m-=2,p-=2}for(a=-90,c=90,p=g-2,f=l-1;0<=f;f--)for(m=p-32*f,b=Math.min(32,g-32*f),x=0;x<b;x+=2)T=.5*(c+a),n.y>=T?(r[f]|=1<<m,a=T):c=T,m-=2,p-=2;return k.$P(r,o,o)},k.$P=function(g,l,o){for(var r=[],n=0;n<l;n++)r[n]="";for(var a=n=0,c=0;c<l;c++){var p=g[n]>>a&31;if(31<(a+=5)){var f=37-a;p&=(1<<f)-1,a-=32,p|=(g[++n]&(1<<a)-1)<<f}r[l-1-c]="0123456789bcdefghjkmnpqrstuvwxyz".split("")[p]}if(o>l)for(c=0;c<o-l;c++)r.push("0");else o<l&&(r.length=o);return r.join("")},k}()}(q||(q={})),function(h){var k={gcstol:[0,2e-9,1,2241706620489156e-24,2,2313672246530541e-24,3,898240164660333e-23,4,8982433838020134e-24,5,8982439417325895e-24,6,8982466029667677e-24,7,8982476760268133e-24,8,8982492642167149e-24,9,898251968292634e-23,10,898253685210448e-23,11,8982546725256576e-24,12,8982557456049832e-24,13,898257333682596e-23,14,8982575482995276e-24,15,8982578488197342e-24,16,8982579775336987e-24,17,89825840676828e-22,18,8982599090925448e-24,19,8982605529473397e-24,20,8982609220517402e-24,21,8982611968030573e-24,22,8982616260407152e-24,23,8982620552787834e-24,24,8982633429954492e-24,25,8982637722351582e-24,26,898264416095491e-23,27,8982646307158072e-24,28,8982654891980968e-24,29,8982667769246082e-24,30,8982674207892485e-24,31,8982680646548117e-24,32,8982682792768713e-24,33,8982685798042582e-24,34,8982689231436652e-24,35,898269137766135e-23,36,898269266624163e-23,37,8982705114087017e-24,38,8982706830791106e-24,39,8982711958374661e-24,40,8982712839964735e-24,41,8982717991496125e-24,42,8982721424914803e-24,43,8982723571154887e-24,44,8982727863638127e-24,45,8982730868942154e-24,46,8982734302370678e-24,47,8982745033612112e-24,48,8982751472369276e-24,49,8982755764879183e-24,50,8982762203651733e-24,51,8982764776628385e-24,52,8982766496171896e-24,53,898277722749025e-23,54,898278152002477e-23,55,898279933943848e-23,56,89829143024805e-22,57,8982922161948598e-24,58,898292327314211e-23,59,8982925667349601e-24,60,8982932222965576e-24,61,8982961298941316e-24,62,8982965524049989e-24,63,8982994818246099e-24,64,8982994895706967e-24,65,898299489597736e-23,66,8983000733443498e-24,67,8983055097289157e-24,68,8983064111047368e-24,69,8983111996941178e-24,70,8983120447446023e-24,71,898312748954554e-23,72,8983134531656096e-24,73,8983141573777694e-24,74,8983148615910332e-24,75,8983152841195215e-24,76,8983153545409748e-24,77,8983153827095593e-24,78,898315396793852e-23,79,8983154249624393e-24,80,8983155658054012e-24,81,8983960794340072e-24,82,8984061344391998e-24,83,8984072829255685e-24,84,8984194981201908e-24,85,8984275233099427e-24,86,8984326127007554e-24,87,8984330099816539e-24,88,898433275258421e-23,89,8984333047023206e-24,90,8984333885258723e-24,91,8984337959508212e-24,92,8984365176209457e-24,93,8984727360418079e-24,94,8984901041679577e-24,95,898542662091587e-23,96,898610024130669e-23,97,8992894229037531e-24,98,8993203677616635e-24,99,8993206178094346e-24,100,8993216059187305e-24,101,899322029394808e-23,102,8994627867045891e-24,103,9467559984315793e-24,104,946881168618118e-23,105,9980888154931644e-24,106,9981105353606775e-24,107,9983807356573187e-24,108,1687060485811522e-23,109,1688447560354875e-23,110,2176606011487185e-23,111,2225078816042032e-23,112,2348476432064694e-23,113,2348765250187846e-23,114,2378108974103778e-23,115,314559636297708e-22,116,3297788621680806e-23,117,3667892343788279e-23,118,4235973644320739e-23,119,4794625900676345e-23,120,7262742998235812e-23,121,7499447580246377e-23,122,7525056410964318e-23,123,7979913581209237e-23,124,9662020153976783e-23,125,9799175562353741e-23,126,9897353517547472e-23,127,102313891987647e-21,128,1081460541960784e-22,129,121905913857622e-21,130,2246893314238523e-22,131,2297344808062643e-22,132,242984645941825e-21,133,2754604784282804e-22,134,2884548130346993e-22,135,3370339971357784e-22,136,4307953346848296e-22,137,5208707228462029e-22,138,5509209568565608e-22,139,6452227422644406e-22,140,6740679942715567e-22,141,6861770001566745e-22,142,7252630318111686e-22,143,7441010326374328e-22,144,7742672907173287e-22,145,9629542775307953e-22,146,1061032953945969e-21,147,1143628333594458e-21,148,1162186197019925e-21,149,136418522650196e-20,150,1367441038498385e-21,151,1432394487827058e-21,152,1736235742820677e-21,153,1848250952034914e-21,154,1909859317102744e-21,155,1975716534933873e-21,156,2122065907891938e-21,157,272837045300392e-20,158,3183098861837907e-21,159,3580986219567645e-21,160,3819718634205488e-21,161,409255567950588e-20,162,4407367654852486e-21,163,4774648292756861e-21,164,5161781938115525e-21,165,520870722846203e-20,166,5729577951308232e-21,167,6031134685587613e-21,168,6987290184522236e-21,169,9241254760174569e-21,170,1145915590261646e-20],pcstol:[0,6666666666666667e-24,1,2e-8,2,4970973863636364e-20,3,4970978156565657e-20,4,4970980410559237e-20,5,.001,6,.001093615055555556,7,.001093615194444445,8,.001093619003239988,9,.001093623110088878,10,.003280833333333333,11,.003280839895013123,12,.003280843014596366,13,.003280845583333334,14,.003280869330266636,15,.00497101413676763],newtoold:[2154,102110,2195,102200,2204,32036,2205,26979,2225,102641,2226,102642,2227,102643,2228,102644,2229,102645,2230,102646,2231,102653,2232,102654,2233,102655,2234,102656,2235,102657,2236,102658,2237,102659,2238,102660,2239,102666,2240,102667,2241,102668,2242,102669,2243,102670,2246,102679,2247,102680,2248,102685,2249,102686,2250,102687,2254,102694,2255,102695,2257,102712,2258,102713,2259,102714,2260,102715,2261,102716,2262,102717,2263,102718,2264,102719,2267,102724,2268,102725,2271,102728,2272,102729,2274,102736,2275,102737,2276,102738,2277,102739,2278,102740,2279,102741,2283,102746,2284,102747,2285,102748,2286,102749,2287,102752,2288,102753,2289,102754,2312,23433,2326,102140,2395,2091,2396,2092,2397,2166,2398,2167,2399,2168,2759,102229,2760,102230,2761,102248,2762,102249,2763,102250,2764,102251,2765,102252,2766,102241,2767,102242,2768,102243,2769,102244,2770,102245,2771,102246,2772,102253,2773,102254,2774,102255,2775,102256,2776,102257,2777,102258,2778,102259,2779,102260,2780,102266,2781,102267,2782,102261,2783,102262,2784,102263,2785,102264,2786,102265,2787,102268,2788,102269,2789,102270,2790,102271,2791,102272,2792,102273,2793,102274,2794,102275,2795,102276,2796,102277,2797,102278,2798,102279,2799,102280,2800,102281,2801,102282,2802,102283,2803,102284,2804,102285,2805,102286,2806,102287,2807,102288,2808,102289,2809,102290,2810,102291,2811,102292,2812,102293,2813,102294,2814,102295,2815,102296,2816,102297,2817,102298,2818,102300,2819,102304,2820,102307,2821,102308,2822,102309,2823,102310,2824,102311,2825,102312,2826,102313,2827,102314,2828,102315,2829,102316,2830,102317,2831,102318,2832,102320,2833,102321,2834,102322,2835,102323,2836,102324,2837,102325,2838,102326,2839,102327,2840,102330,2841,102334,2842,102335,2843,102336,2844,102337,2845,102338,2846,102339,2847,102340,2848,102341,2849,102342,2850,102343,2851,102344,2852,102345,2853,102346,2854,102347,2855,102348,2856,102349,2857,102350,2858,102351,2859,102352,2860,102353,2861,102354,2862,102355,2863,102356,2864,102357,2865,102358,2866,102361,2942,102167,2943,102169,2944,2139,2945,2140,2946,2141,2947,2142,2948,2143,2949,2144,2950,2145,2951,2146,2952,2147,2953,2036,2954,2291,2955,2153,2956,2152,2957,2151,2958,2150,2959,2149,2960,2037,2961,2038,2962,2148,2965,2244,2966,2245,3003,102091,3004,102092,3005,102190,3060,2982,3067,102139,3072,102606,3074,102608,3075,102208,3077,102210,3078,102123,3080,102119,3081,102603,3082,102602,3083,102601,3088,65163,3089,102763,3090,102363,3092,102151,3093,102152,3094,102153,3095,102154,3096,102155,3097,102145,3098,102146,3099,102147,3100,102148,3101,102149,3102,2155,3107,102172,3110,102170,3111,102171,3119,2214,3158,102234,3159,102235,3160,102236,3336,2979,3338,102006,3346,2600,3370,102126,3371,102127,3372,102130,3373,102131,3389,2577,3390,2694,3400,102184,3401,102185,3404,3359,3407,3366,3417,102675,3418,102676,3419,102677,3420,102678,3421,102707,3422,102708,3423,102709,3424,102711,3433,102651,3434,102652,3435,102671,3436,102672,3437,102710,3438,102730,3448,102095,3451,102681,3452,102682,3455,102735,3461,2063,3462,2064,3463,3073,3464,3076,3560,102742,3566,102743,3567,102744,3734,102722,3735,102723,3736,102755,3737,102756,3738,102757,3739,102758,3741,102205,3742,102206,3743,102207,3748,102211,3750,102202,3751,102203,3759,102663,3760,102463,3764,102112,3770,102090,3771,102180,3772,102181,3773,102182,3775,102186,3776,102187,3777,102188,3800,102183,3801,102189,3812,102199,3814,102609,3815,102469,3819,104990,3821,104136,3824,104137,3825,102444,3826,102443,3827,102442,3828,102441,3857,102100,3889,104991,3906,104992,4048,103201,4049,103202,4050,103203,4051,103204,4056,103205,4057,103206,4058,103207,4059,103208,4060,103209,4061,103210,4062,103211,4063,103212,4071,103213,4082,103214,4083,103215,4093,103216,4094,103217,4095,103218,4096,103219,4167,104108,4169,37252,4171,104107,4189,104110,4197,4234,4223,37223,4304,104304,4414,102201,4415,102762,4417,102764,4434,102765,4437,102647,4455,32029,4456,32018,4457,3454,4462,102439,4463,4466,4470,4469,4484,103794,4485,103795,4486,103796,4487,103797,4488,103798,4489,103799,4611,104104,4612,104111,4613,37255,4615,37247,4616,37250,4617,4140,4618,4291,4620,37211,4626,37235,4647,102362,4658,37204,4668,37201,4669,4126,4672,37217,4673,104125,4675,37220,4684,37232,4698,4631,4707,37213,4708,37231,4709,37212,4710,37238,4711,37214,4712,37237,4713,37208,4714,37215,4715,37253,4716,37216,4717,37239,4719,37219,4722,37242,4724,37233,4725,37222,4727,37224,4728,37246,4729,37226,4730,37227,4731,37228,4732,37229,4733,37230,4734,37251,4735,37259,4736,37254,4739,37205,4758,104133,4760,37001,4762,104114,4826,102214,5013,104142,5014,102331,5015,102332,5016,102333,5173,102085,5174,102086,5175,102087,5176,102088,5177,102089,5178,102040,5179,102080,5185,102081,5186,102082,5187,102083,5188,102084,5221,102066,5246,104100,5247,102490,5324,104144,5325,102420,5329,2934,5365,104143,5367,102305,5451,104132,5513,102065,5514,102067,5519,102111,5520,31461,5646,102745,5839,5388,5858,5532,5879,4474,6207,104256,6244,102769,6245,102790,6246,102770,6247,102771,6248,102793,6249,102796,6250,102772,6251,102788,6252,102775,6253,102795,6254,102781,6255,102767,6256,102774,6257,102768,6258,102797,6259,102789,6260,102780,6261,102783,6262,102787,6263,102791,6264,102777,6265,102798,6266,102779,6267,102784,6268,102792,6269,102782,6270,102785,6271,102794,6272,102773,6273,102778,6274,102786,6275,102776,6311,104141,6318,104145,6322,104287,6325,104286,6328,102046,6329,102047,6330,102048,6331,102049,6332,102050,6333,102051,6334,102052,6335,102053,6336,102054,6337,102055,6338,102056,6339,102057,6340,102058,6341,102059,6342,102382,6343,102383,6344,102384,6345,102385,6346,102386,6347,102387,6348,102388,6350,102965,6355,102975,6356,102976,6391,6141,6393,102966,6394,102977,6395,102978,6396,102979,6397,102980,6398,102981,6399,102982,6400,102983,6401,102984,6402,102985,6403,102986,6404,102988,6405,102991,6406,102987,6407,102990,6408,102989,6409,102992,6410,102993,6411,102995,6412,102994,6413,102996,6414,102962,6415,102997,6416,103003,6417,102998,6418,103004,6419,102999,6420,103005,6421,103e3,6422,103006,6423,103001,6424,103007,6425,103002,6426,103008,6427,103010,6428,103013,6429,103009,6430,103012,6431,103011,6432,103014,6433,103015,6434,103016,6435,103017,6436,103018,6437,103019,6438,103022,6439,102967,6440,103021,6441,103024,6442,103020,6443,103023,6444,103025,6445,103027,6446,103026,6447,103028,6448,103030,6449,103033,6450,103029,6451,103032,6452,103031,6453,103034,6454,103035,6455,103037,6456,103036,6457,103038,6458,103039,6459,103041,6460,103040,6461,103042,6462,103043,6463,103045,6464,103044,6465,103046,6466,103047,6467,103049,6468,103048,6469,103050,6470,103051,6471,103052,6472,103053,6473,103054,6474,103055,6475,103056,6476,103057,6477,103059,6478,103058,6479,103060,6480,103066,6481,103065,6482,103067,6483,103061,6484,103063,6485,103062,6486,103064,6487,103068,6488,103069,6489,103071,6490,103073,6491,103070,6492,103072,6493,103075,6494,103078,6495,103074,6496,103077,6497,102968,6498,103076,6499,103079,6500,103081,6501,103084,6502,103080,6503,103083,6504,103082,6505,103085,6506,103086,6507,103088,6508,102963,6509,103087,6510,103089,6511,103091,6512,103090,6513,103092,6514,103093,6515,103094,6516,103095,6518,103098,6519,103101,6520,103097,6521,103100,6522,103099,6523,103102,6524,103103,6525,103104,6526,103105,6527,103106,6528,103108,6529,103111,6530,103107,6531,103110,6532,103109,6533,103112,6534,103114,6535,103118,6536,103113,6537,103117,6538,103116,6539,103120,6540,103115,6541,103119,6542,103121,6543,103122,6544,103123,6545,103125,6546,103124,6547,103126,6548,103127,6549,103129,6550,103128,6551,103130,6552,103131,6553,103133,6554,103132,6555,103134,6556,102969,6557,102970,6558,103135,6559,103137,6560,103136,6561,103138,6562,103139,6563,103140,6564,103141,6565,103142,6566,103200,6567,103143,6568,103144,6569,103145,6570,103146,6571,103147,6572,103149,6573,103148,6574,103150,6575,103151,6576,103152,6577,103155,6578,103160,6579,102971,6580,102972,6581,103153,6582,103158,6583,103154,6584,103159,6585,103157,6586,103162,6587,103156,6588,103161,6589,103172,6590,103173,6592,103174,6593,103176,6594,103175,6595,103177,6596,103178,6597,103180,6598,103179,6599,103181,6600,103182,6601,103184,6602,103183,6603,103185,6605,103190,6606,103186,6607,103189,6608,103188,6609,103191,6610,102973,6611,103192,6612,103196,6613,103193,6614,103197,6615,103195,6616,103199,6617,103194,6618,103198,6619,103164,6620,103163,6621,103165,6625,103170,6626,103169,6627,103171,6628,102520,6629,102521,6630,102522,6631,102523,6632,102524,6633,102527,6634,102493,6635,102494,6636,102496,6637,102495,6668,104020,6669,102610,6670,102611,6671,102612,6672,102613,6673,102614,6674,102615,6675,102616,6676,102617,6677,102618,6678,102619,6679,102620,6680,102621,6681,102622,6682,102623,6683,102624,6684,102625,6685,102626,6686,102627,6687,102628,6688,102593,6689,102594,6690,102595,6691,102596,6692,102597,6783,104223,6784,102530,6785,102500,6788,102532,6789,102502,6792,102533,6793,102503,6796,102531,6797,102501,6800,102534,6801,102504,6804,102535,6805,102505,6808,102536,6809,102506,6812,102537,6813,102507,6816,102538,6817,102508,6820,102539,6821,102509,6824,102540,6825,102510,6828,102541,6829,102511,6832,102542,6833,102512,6836,102543,6837,102513,6840,102544,6841,102514,6844,102546,6845,102516,6848,102545,6849,102515,6852,102547,6853,102517,6856,102548,6857,102518,6860,102549,6861,102519,6867,102380,6868,102381,6879,103187,6880,103096,6884,102376,6885,102378,6886,102377,6887,102379,7136,6980,7139,6987,7142,102706,7692,102557,7693,102558,7694,102559,7695,102560,7696,102561,8090,103318,8091,103418,8092,103317,8093,103417,8095,103371,8096,103471,8097,103369,8098,103469,8099,103368,8100,103468,8101,103367,8102,103467,8103,103366,8104,103466,8105,103365,8106,103465,8107,103364,8108,103464,8109,103363,8110,103463,8111,103362,8112,103462,8113,103361,8114,103461,8115,103360,8116,103460,8117,103359,8118,103459,8119,103357,8120,103457,8121,103356,8122,103456,8123,103355,8124,103455,8125,103354,8126,103454,8127,103353,8128,103453,8129,103352,8130,103452,8131,103350,8132,103450,8133,103349,8134,103449,8135,103348,8136,103448,8139,103343,8140,103443,8141,103342,8142,103442,8143,103341,8144,103441,8145,103339,8146,103439,8147,103337,8148,103437,8149,103336,8150,103436,8151,103334,8152,103434,8153,103333,8154,103433,8155,103331,8156,103431,8161,103326,8162,103426,8163,103325,8164,103425,8165,103324,8166,103424,8171,103321,8172,103421,8173,103320,8177,103420,8179,103316,8180,103416,8181,103315,8182,103415,8184,103314,8185,103414,8191,103312,8193,103412,8196,103311,8197,103411,8198,103310,8200,103410,8201,103309,8202,103409,8203,103308,8204,103408,8207,103306,8208,103406,8209,103305,8210,103405,8212,103304,8213,103404,8214,103303,8216,103403,8218,103302,8220,103402,8222,103301,8224,103401,8431,104248,8441,102590,8693,102449,8826,102605,8857,54035,8858,54036,8859,54037,8860,8449,8988,104115,8989,104116,8990,104117,8991,104118,8992,104119,8993,104120,8994,104121,8995,104122,8996,104123,8997,104124,8998,104896,8999,104257,9e3,104019,9014,104010,9019,104021,9053,104011,9054,104012,9055,104013,9056,104014,9057,104015,9059,104258,9060,104179,9061,104180,9062,104181,9063,104182,9064,104183,9065,104184,9066,104185,9067,104186,21896,21891,21897,21892,21898,21893,21899,21894,26701,102124,26702,102125,26799,26747,26847,102683,26848,102684,26849,102691,26850,102692,26851,102693,26852,102704,26853,102750,26854,102751,26857,102466,26858,102467,26859,102468,26901,102128,26902,102129,27493,27492,29101,29100,29168,29118,29169,29119,29170,29120,29171,29121,29172,29122,29187,29177,29188,29178,29189,29179,29190,29180,29191,29181,29192,29182,29193,29183,29194,29184,29195,29185,29902,29900,31279,31278,31281,31291,31282,31292,31283,31293,31284,31294,31285,31295,31286,31296,31287,31297,31466,31462,31467,31463,31468,31464,31469,31465,31986,31917,31987,31918,31988,31919,31989,31920,31990,31921,31991,31922,32064,32074,32065,32075,32066,32076,32067,32077,102550,2181,102551,2182,102552,2183,102553,2184,102554,2185,102555,2186,102556,2187],pcsid:[2066,15,2136,12,2155,10,2157,5,2158,5,2159,12,2160,12,2219,5,2220,5,2244,10,2245,10,2256,11,2265,11,2266,11,2269,11,2270,11,2273,11,2290,5,2291,5,2294,5,2295,5,2313,5,2314,14,2899,10,2900,10,2901,11,2909,11,2910,11,2911,10,2912,10,2913,11,2914,11,2964,10,2967,10,2968,10,2991,5,2992,11,2993,5,2994,11,3073,5,3076,5,3079,5,3091,10,3106,5,3108,5,3109,5,3141,5,3142,5,3167,4,3337,5,3347,5,3348,5,3359,10,3360,5,3361,11,3362,5,3363,10,3364,5,3365,10,3366,14,3402,5,3403,5,3405,5,3406,5,3439,5,3440,5,3447,5,3449,5,3450,5,3453,10,3454,10,3460,5,3479,11,3480,5,3481,11,3482,5,3483,11,3484,5,3485,10,3486,5,3487,10,3488,5,3489,5,3490,10,3491,5,3492,10,3493,5,3494,10,3495,5,3496,10,3497,5,3498,10,3499,5,3500,10,3501,5,3502,10,3503,5,3504,10,3505,5,3506,10,3507,5,3508,10,3509,5,3510,10,3511,5,3512,10,3513,5,3514,5,3515,10,3516,5,3517,10,3518,5,3519,10,3520,5,3521,10,3522,5,3523,10,3524,5,3525,10,3526,5,3527,10,3528,5,3529,10,3530,5,3531,10,3532,5,3533,10,3534,5,3535,10,3536,5,3537,10,3538,5,3539,10,3540,5,3541,10,3542,5,3543,10,3544,5,3545,10,3546,5,3547,10,3548,5,3549,10,3550,5,3551,10,3552,5,3553,10,3582,10,3583,5,3584,10,3585,5,3586,10,3587,5,3588,11,3589,5,3590,11,3591,5,3592,5,3593,11,3598,10,3599,5,3600,10,3605,11,3606,5,3607,5,3608,10,3609,5,3610,10,3611,5,3612,10,3613,5,3614,10,3615,5,3616,10,3617,5,3618,10,3619,5,3620,10,3621,5,3622,10,3623,5,3624,10,3625,5,3626,10,3627,5,3628,10,3629,5,3630,10,3631,5,3632,10,3633,5,3634,11,3635,5,3636,11,3640,10,3641,5,3642,10,3643,5,3644,11,3645,5,3646,11,3647,5,3648,11,3649,5,3650,10,3651,5,3652,10,3653,5,3654,10,3655,5,3656,11,3657,5,3658,10,3659,5,3660,10,3661,5,3662,10,3663,5,3664,10,3668,10,3669,5,3670,10,3671,5,3672,10,3673,5,3674,10,3675,5,3676,11,3677,10,3678,5,3679,11,3680,10,3681,5,3682,11,3683,10,3684,5,3685,5,3686,10,3687,5,3688,10,3689,5,3690,10,3691,5,3692,10,3696,10,3697,5,3698,10,3699,5,3700,10,3740,5,3749,5,3783,5,3784,5,3793,5,3794,5,3802,5,3816,5,3829,5,3854,5,3911,5,3912,5,3920,5,3978,5,3979,5,3991,10,3992,10,4026,5,4037,5,4038,5,4087,5,4088,5,4217,10,4438,10,4439,10,4467,5,4471,5,4474,5,4559,5,4822,5,4839,5,5018,5,5048,5,5167,5,5168,5,5223,5,5234,5,5235,5,5243,5,5266,5,5316,5,5320,5,5321,5,5330,5,5331,5,5337,5,5361,5,5362,5,5382,5,5383,5,5396,5,5456,5,5457,5,5469,5,5472,9,5490,5,5518,5,5523,5,5559,5,5588,11,5589,14,5596,5,5627,5,5629,5,5641,5,5643,5,5644,5,5654,10,5655,10,5659,5,5700,5,5825,5,5836,5,5837,5,5842,5,5844,5,5880,5,5887,5,5890,5,6128,11,6129,11,6141,11,6204,5,6210,5,6211,5,6307,5,6312,5,6316,5,6362,5,6591,5,6646,5,6703,5,6786,5,6787,11,6790,5,6791,11,6794,5,6795,11,6798,5,6799,11,6802,5,6803,11,6806,5,6807,11,6810,5,6811,11,6814,5,6815,11,6818,5,6819,11,6822,5,6823,11,6826,5,6827,11,6830,5,6831,11,6834,5,6835,11,6838,5,6839,11,6842,5,6843,11,6846,5,6847,11,6850,5,6851,11,6854,5,6855,11,6858,5,6859,11,6862,5,6863,11,6870,5,6875,5,6876,5,6915,5,6922,5,6923,10,6924,5,6925,10,6962,5,6984,5,6991,5,7128,10,7131,5,7132,10,7257,5,7258,10,7259,5,7260,10,7261,5,7262,10,7263,5,7264,10,7265,5,7266,10,7267,5,7268,10,7269,5,7270,10,7271,5,7272,10,7273,5,7274,10,7275,5,7276,10,7277,5,7278,10,7279,5,7280,10,7281,5,7282,10,7283,5,7284,10,7285,5,7286,10,7287,5,7288,10,7289,5,7290,10,7291,5,7292,10,7293,5,7294,10,7295,5,7296,10,7297,5,7298,10,7299,5,7300,10,7301,5,7302,10,7303,5,7304,10,7305,5,7306,10,7307,5,7308,10,7309,5,7310,10,7311,5,7312,10,7313,5,7314,10,7315,5,7316,10,7317,5,7318,10,7319,5,7320,10,7321,5,7322,10,7323,5,7324,10,7325,5,7326,10,7327,5,7328,10,7329,5,7330,10,7331,5,7332,10,7333,5,7334,10,7335,5,7336,10,7337,5,7338,10,7339,5,7340,10,7341,5,7342,10,7343,5,7344,10,7345,5,7346,10,7347,5,7348,10,7349,5,7350,10,7351,5,7352,10,7353,5,7354,10,7355,5,7356,10,7357,5,7358,10,7359,5,7360,10,7361,5,7362,10,7363,5,7364,10,7365,5,7366,10,7367,5,7368,10,7369,5,7370,10,7877,5,7878,5,7882,5,7883,5,7887,5,7899,5,7991,5,7992,5,8035,10,8036,10,8058,5,8059,5,8082,5,8083,5,8088,5,8137,5,8138,10,8157,5,8158,10,8159,5,8160,10,8167,5,8168,10,8169,5,8170,10,8187,5,8189,10,8205,5,8206,10,8225,5,8226,10,8311,5,8312,11,8313,5,8314,11,8315,5,8316,11,8317,5,8318,11,8319,5,8320,11,8321,5,8322,11,8323,5,8324,11,8325,5,8326,11,8327,5,8328,11,8329,5,8330,11,8331,5,8332,11,8333,5,8334,11,8335,5,8336,11,8337,5,8338,11,8339,5,8340,11,8341,5,8342,11,8343,5,8344,11,8345,5,8346,11,8347,5,8348,11,8352,5,8353,5,8379,5,8380,10,8381,5,8382,10,8383,5,8384,10,8385,5,8387,10,8391,5,8395,5,8433,5,8455,5,8456,5,8531,10,8682,5,8687,5,8692,5,8903,5,8950,5,8951,5,9039,5,9040,5,9141,5,9149,5,9150,5,9191,5,9221,5,9222,5,20499,5,20538,5,20539,5,20790,5,20791,5,21291,5,21292,5,21500,5,21817,5,21818,5,22032,5,22033,5,22091,5,22092,5,22332,5,22391,5,22392,5,22700,5,22770,5,22780,5,22832,5,23090,5,23095,5,23239,5,23240,5,23433,5,23700,5,24047,5,24048,5,24100,14,24200,5,24305,5,24306,5,24382,6,24383,5,24500,5,24547,5,24548,5,24571,2,24600,5,25e3,5,25231,5,25884,5,25932,5,26237,5,26331,5,26332,5,26591,5,26592,5,26632,5,26692,5,26855,10,26856,10,27120,5,27200,5,27291,7,27292,7,27429,5,27492,5,27500,5,27700,5,28232,5,28600,5,28991,5,28992,5,29100,5,29220,5,29221,5,29333,5,29635,5,29636,5,29701,5,29738,5,29739,5,29849,5,29850,5,29871,3,29872,13,29873,5,29900,5,29901,5,29903,5,30200,15,30339,5,30340,5,30791,5,30792,5,31028,5,31121,5,31154,5,31170,5,31171,5,31370,5,31528,5,31529,5,31600,5,31700,5,31838,5,31839,5,31901,5,32061,5,32062,5,32098,5,32099,10,32100,5,32104,5,32161,5,32766,5,53048,5,53049,5,54090,5,54091,5,65061,10,65062,10,65161,5,65163,5,102041,10,102064,8,102068,1,102069,0,102118,10,102119,11,102120,10,102121,10,102217,10,102218,5,102219,10,102220,10,102378,11,102379,11,102380,5,102381,11,102498,5,102499,5,102589,10,102590,5,102599,10,102600,10,102604,10,102605,5,102606,5,102647,5,102704,10,102705,10,102706,5,102733,10,102761,10,102762,5,102763,10,102764,5,102765,5,102766,10,102962,5,102963,5,102970,11,102974,10,102993,5,102994,5,102995,10,102996,10,103015,5,103016,10,103017,5,103018,10,103025,5,103026,5,103027,10,103028,10,103035,5,103036,5,103037,10,103038,10,103039,5,103040,5,103041,10,103042,10,103043,5,103044,5,103045,10,103046,10,103047,5,103048,5,103049,10,103050,10,103051,5,103052,10,103053,5,103054,10,103055,5,103056,10,103057,5,103058,5,103059,10,103060,10,103061,5,103062,5,103063,10,103064,10,103069,10,103070,5,103071,5,103072,10,103073,10,103086,5,103087,5,103088,10,103089,10,103094,11,103095,5,103096,10,103103,5,103104,10,103105,5,103106,10,103121,5,103122,10,103123,5,103124,5,103125,11,103126,11,103127,5,103128,5,103129,10,103130,10,103131,5,103132,5,103133,10,103134,10,103135,5,103136,5,103137,11,103138,11,103139,5,103140,10,103141,5,103142,10,103143,5,103144,10,103145,5,103146,11,103147,5,103148,5,103149,10,103150,10,103151,5,103152,10,103172,5,103173,10,103174,5,103175,5,103176,10,103177,10,103178,5,103179,5,103180,10,103181,10,103182,5,103183,5,103184,10,103185,10,103228,5,103229,5,103230,10,103231,10,103250,5,103251,10,103252,5,103253,10,103260,5,103261,5,103262,10,103263,10,103270,5,103271,5,103272,10,103273,10,103274,5,103275,5,103276,10,103277,10,103278,5,103279,5,103280,10,103281,10,103282,5,103283,5,103284,10,103285,10,103286,5,103287,10,103288,5,103289,10,103290,5,103291,10,103292,5,103293,5,103294,10,103295,10,103296,5,103297,5,103298,10,103299,10,103376,10,103377,5,103378,5,103379,10,103380,10,103393,5,103394,5,103395,10,103396,10,103472,5,103473,11,103474,5,103475,10,103482,5,103483,10,103484,5,103485,10,103500,5,103501,10,103502,5,103503,5,103504,11,103505,11,103506,5,103507,5,103508,10,103509,10,103510,5,103511,5,103512,10,103513,10,103514,5,103515,10,103516,5,103517,10,103518,5,103519,10,103520,5,103521,11,103522,5,103523,5,103524,10,103525,10,103526,5,103527,10,103561,10,103562,10,103563,5,103564,5,103565,10,103566,10,103567,5,103568,5,103569,10,103570,10,103585,10,103586,5,103587,10,103588,11,103589,5,103590,10,103591,11,103592,5,103593,10,103594,11,103695,10,103846,5,103946,10],pcsidc:[[2e3,2045,5],[2056,2065,5],[2067,2135,5],[2137,2153,5],[2161,2170,5],[2172,2193,5],[2196,2198,5],[2200,2203,5],[2206,2217,5],[2222,2224,11],[2251,2253,11],[2280,2282,11],[2308,2311,5],[2315,2325,5],[2327,2394,5],[2400,2491,5],[2494,2758,5],[2867,2869,11],[2870,2888,10],[2891,2895,10],[2896,2898,11],[2902,2908,10],[2915,2920,10],[2921,2923,11],[2924,2930,10],[2931,2941,5],[2969,2973,5],[2975,2982,5],[2984,2988,5],[2995,3002,5],[3006,3051,5],[3054,3059,5],[3061,3066,5],[3068,3071,5],[3084,3087,5],[3112,3118,5],[3120,3138,5],[3146,3151,5],[3153,3157,5],[3161,3166,5],[3168,3172,5],[3174,3203,5],[3294,3313,5],[3315,3335,5],[3339,3345,5],[3350,3358,5],[3367,3369,5],[3374,3388,5],[3391,3399,5],[3408,3416,5],[3425,3432,10],[3441,3446,10],[3456,3459,10],[3465,3478,5],[3554,3559,5],[3561,3565,10],[3568,3570,10],[3571,3581,5],[3594,3597,5],[3601,3604,5],[3637,3639,5],[3665,3667,5],[3693,3695,5],[3701,3727,5],[3728,3733,10],[3744,3747,5],[3753,3758,10],[3761,3763,5],[3765,3769,5],[3779,3781,5],[3788,3791,5],[3797,3799,5],[3832,3841,5],[3844,3852,5],[3873,3885,5],[3890,3893,5],[3942,3950,5],[3968,3970,5],[3973,3976,5],[3986,3989,5],[3994,3997,5],[4390,4398,5],[4399,4413,10],[4418,4433,10],[4491,4554,5],[4568,4589,5],[4652,4656,5],[4766,4800,5],[5069,5072,5],[5105,5130,5],[5180,5184,5],[5253,5259,5],[5269,5275,5],[5292,5311,5],[5343,5349,5],[5355,5357,5],[5387,5389,5],[5459,5463,5],[5479,5482,5],[5530,5539,5],[5550,5552,5],[5562,5583,5],[5623,5625,10],[5631,5639,5],[5649,5653,5],[5663,5680,5],[5682,5685,5],[5875,5877,5],[5896,5899,5],[5921,5940,5],[6050,6125,5],[6351,6354,5],[6366,6372,5],[6381,6387,5],[6622,6624,5],[6707,6709,5],[6720,6723,5],[6732,6738,5],[6931,6933,5],[7005,7007,5],[7057,7070,10],[7074,7082,5],[7109,7118,5],[7119,7127,11],[7374,7376,5],[7528,7586,5],[7587,7645,10],[7755,7787,5],[7791,7795,5],[7799,7801,5],[7803,7805,5],[7825,7831,5],[7845,7859,5],[8013,8032,5],[8065,8068,11],[8518,8529,10],[8533,8536,10],[8538,8540,10],[8677,8679,5],[8836,8840,5],[8908,8910,5],[9154,9159,5],[9205,9218,5],[20002,20032,5],[20062,20092,5],[20135,20138,5],[20248,20258,5],[20348,20358,5],[20436,20440,5],[20822,20824,5],[20934,20936,5],[21035,21037,5],[21095,21097,5],[21148,21150,5],[21413,21423,5],[21473,21483,5],[21780,21782,5],[21891,21894,5],[22171,22177,5],[22181,22187,5],[22191,22197,5],[22234,22236,5],[22521,22525,5],[22991,22994,5],[23028,23038,5],[23830,23853,5],[23866,23872,5],[23877,23884,5],[23886,23894,5],[23946,23948,5],[24311,24313,5],[24342,24347,5],[24370,24374,6],[24375,24381,5],[24718,24721,5],[24817,24821,5],[24877,24882,5],[24891,24893,5],[25391,25395,5],[25828,25838,5],[26191,26195,5],[26391,26393,5],[26703,26722,5],[26729,26760,10],[26766,26798,10],[26860,26870,10],[26891,26899,5],[26903,26923,5],[26929,26946,5],[26948,26998,5],[27037,27040,5],[27205,27232,5],[27258,27260,5],[27391,27398,5],[27561,27564,5],[27571,27574,5],[27581,27584,5],[27591,27594,5],[28191,28193,5],[28348,28358,5],[28402,28432,5],[28462,28492,5],[29118,29122,5],[29177,29185,5],[30161,30179,5],[30491,30494,5],[30729,30732,5],[31251,31259,5],[31265,31268,5],[31275,31278,5],[31288,31297,5],[31461,31465,5],[31491,31495,5],[31917,31922,5],[31965,31985,5],[31992,32e3,5],[32001,32003,10],[32005,32031,10],[32033,32060,10],[32074,32077,10],[32081,32086,5],[32107,32130,5],[32133,32158,5],[32164,32167,10],[32180,32199,5],[32201,32260,5],[32301,32360,5],[32601,32662,5],[32664,32667,10],[32701,32761,5],[53001,53004,5],[53008,53019,5],[53021,53032,5],[53034,53037,5],[53042,53046,5],[53074,53080,5],[54001,54004,5],[54008,54019,5],[54021,54032,5],[54034,54037,5],[54042,54046,5],[54048,54053,5],[54074,54080,5],[54098,54101,5],[102001,102040,5],[102042,102063,5],[102065,102067,5],[102070,102112,5],[102114,102117,5],[102122,102208,5],[102210,102216,5],[102221,102300,5],[102304,102377,5],[102382,102388,5],[102389,102398,10],[102399,102444,5],[102445,102447,10],[102448,102458,5],[102459,102468,10],[102469,102496,5],[102500,102519,11],[102520,102524,5],[102525,102529,10],[102530,102549,5],[102557,102588,5],[102593,102598,5],[102601,102603,5],[102608,102628,5],[102629,102646,10],[102648,102672,10],[102675,102700,10],[102701,102703,5],[102707,102730,10],[102735,102758,10],[102767,102900,5],[102965,102969,5],[102971,102973,5],[102975,102989,5],[102990,102992,11],[102997,103002,5],[103003,103008,10],[103009,103011,5],[103012,103014,10],[103019,103021,5],[103022,103024,10],[103029,103031,5],[103032,103034,10],[103065,103068,5],[103074,103076,5],[103077,103079,11],[103080,103082,5],[103083,103085,10],[103090,103093,5],[103097,103099,5],[103100,103102,10],[103107,103109,5],[103110,103112,10],[103113,103116,5],[103117,103120,10],[103153,103157,5],[103158,103162,10],[103163,103165,5],[103166,103168,11],[103169,103171,10],[103186,103188,5],[103189,103191,10],[103192,103195,5],[103196,103199,10],[103200,103224,5],[103225,103227,11],[103232,103237,5],[103238,103243,10],[103244,103246,5],[103247,103249,10],[103254,103256,5],[103257,103259,10],[103264,103266,5],[103267,103269,10],[103300,103375,5],[103381,103383,5],[103384,103386,11],[103387,103389,5],[103390,103392,10],[103397,103399,5],[103400,103471,10],[103476,103478,5],[103479,103481,10],[103486,103488,5],[103489,103491,10],[103492,103495,5],[103496,103499,10],[103539,103543,5],[103544,103548,10],[103549,103551,5],[103552,103554,11],[103555,103557,10],[103558,103560,5],[103571,103573,5],[103574,103576,10],[103577,103580,5],[103581,103583,10],[103595,103597,5],[103600,103694,5],[103696,103698,5],[103700,103793,10],[103794,103799,5]],gcsid:[4001,81,4002,85,4003,70,4004,84,4005,82,4006,83,4007,60,4008,67,4009,39,4010,57,4011,63,4012,64,4013,64,4014,63,4015,92,4016,90,4018,86,4019,75,4020,68,4021,70,4022,55,4023,75,4024,66,4025,73,4027,95,4028,59,4029,58,4031,75,4032,78,4033,77,4034,65,4035,100,4036,70,4042,88,4044,87,4045,89,4046,75,4047,99,4052,101,4053,97,4054,61,4075,75,4081,75,4120,84,4121,75,4122,80,4123,55,4124,84,4126,75,4130,75,4131,92,4132,64,4133,75,4134,64,4140,75,4141,75,4142,64,4143,64,4144,92,4145,87,4146,89,4147,66,4148,75,4149,84,4150,84,4151,75,4152,75,4153,55,4154,55,4155,63,4156,84,4157,60,4162,84,4163,75,4164,66,4165,55,4166,75,4168,58,4170,75,4172,75,4173,75,4174,58,4175,64,4176,75,4178,66,4179,66,4180,75,4188,81,4190,75,4191,66,4192,55,4193,63,4198,64,4199,55,4200,66,4201,64,4202,70,4203,70,4204,55,4205,66,4206,63,4207,55,4208,55,4209,64,4210,64,4211,84,4212,64,4213,63,4214,66,4215,55,4216,67,4218,55,4219,84,4220,64,4221,55,4222,64,4224,55,4225,55,4229,68,4230,55,4231,55,4232,64,4234,64,4235,55,4236,55,4237,70,4238,70,4239,92,4240,92,4241,65,4242,67,4243,88,4244,92,4245,86,4246,64,4250,64,4251,64,4252,63,4253,67,4254,55,4255,55,4256,64,4257,84,4258,75,4259,55,4260,64,4261,106,4262,84,4263,64,4265,55,4266,63,4267,67,4269,75,4270,64,4271,55,4272,55,4273,82,4274,55,4275,63,4276,73,4280,84,4281,57,4282,63,4283,75,4284,66,4285,55,4286,68,4288,55,4289,84,4291,70,4292,55,4293,83,4294,84,4295,84,4296,63,4297,55,4298,90,4299,85,4300,85,4301,84,4302,60,4303,68,4306,84,4307,64,4308,84,4309,55,4310,63,4311,55,4312,84,4313,55,4314,84,4315,63,4316,55,4317,66,4318,75,4319,75,4322,80,4324,80,4326,75,4466,75,4469,75,4475,55,4483,75,4490,75,4555,66,4558,75,4608,67,4609,67,4610,74,4614,55,4619,75,4624,75,4625,55,4627,75,4636,55,4637,55,4638,67,4639,55,4657,93,4659,75,4660,55,4661,75,4666,84,4667,75,4670,75,4671,63,4674,75,4679,64,4680,64,4682,92,4683,67,4686,75,4687,75,4693,75,4694,75,4695,67,4696,64,4697,64,4702,75,4703,64,4704,55,4705,55,4706,68,4718,55,4720,80,4721,55,4723,67,4726,67,4737,75,4738,60,4740,79,4741,55,4742,75,4743,64,4744,64,4745,84,4746,84,4747,75,4748,56,4749,75,4750,75,4751,91,4752,56,4753,55,4754,55,4759,75,4761,75,4801,84,4802,55,4803,55,4804,84,4805,84,4806,55,4807,106,4808,84,4809,55,4810,105,4811,106,4816,106,4817,82,4818,84,4820,84,4821,106,4823,55,4824,55,4901,107,4902,107,4903,59,4904,84,5228,84,5229,84,5233,92,5252,75,5264,75,5340,75,5354,75,5360,75,5371,75,5373,75,5381,75,5393,75,5464,60,5467,67,5489,75,5524,55,5527,70,5546,75,5561,66,5593,75,5681,84,5886,75,6135,75,6365,75,6706,75,6881,64,6882,64,6883,55,6892,64,6894,64,6980,75,6983,75,6987,75,6990,75,7035,75,7037,75,7039,75,7041,75,7073,75,7084,75,7086,75,7133,75,7373,75,7683,76,7798,75,7844,75,7881,75,7886,75,8042,96,8043,96,8086,75,8232,75,8237,75,8240,75,8246,75,8249,75,8252,75,8255,75,8351,84,8427,75,8428,55,8449,75,8545,75,8685,75,8694,64,8699,75,8818,75,8888,75,8900,75,8902,75,8907,75,8949,75,9003,75,9006,75,9009,75,9012,75,9017,75,9068,75,9069,75,9140,75,9148,75,9153,75,37001,73,37002,69,37003,72,37004,71,37005,62,37006,91,37007,94,37008,101,37201,55,37202,92,37203,87,37204,55,37205,55,37206,64,37207,71,37208,64,37211,64,37220,67,37221,55,37222,55,37223,63,37224,55,37225,106,37226,55,37227,55,37228,64,37229,62,37230,55,37231,70,37232,55,37233,55,37235,55,37237,55,37238,55,37239,67,37240,64,37241,55,37242,55,37243,67,37252,67,37253,55,37254,64,37255,84,37257,66,37259,55,37260,67,104017,79,104018,79,104024,75,104027,75,104047,98,104050,75,104100,75,104101,84,104102,84,104103,64,104104,55,104105,84,104106,55,104107,75,104108,75,104109,67,104110,75,104111,75,104112,67,104113,67,104128,102,104129,75,104130,55,104131,84,104132,67,104133,75,104134,75,104135,66,104136,70,104137,75,104138,55,104139,106,104140,106,104223,75,104248,55,104256,92,104261,63,104286,75,104287,75,104304,63,104700,49,104701,9,104702,24,104703,15,104704,28,104705,32,104706,53,104707,46,104708,37,104709,54,104710,11,104711,14,104712,30,104713,52,104714,4,104715,4,104716,23,104717,14,104718,48,104719,29,104720,22,104721,21,104722,35,104723,21,104724,46,104725,22,104726,49,104727,45,104728,52,104729,10,104730,10,104731,21,104732,31,104733,26,104734,40,104735,19,104736,30,104737,34,104738,27,104739,46,104740,5,104741,12,104742,50,104743,9,104744,43,104745,21,104746,26,104747,25,104748,21,104749,7,104750,53,104751,6,104752,33,104753,29,104754,19,104755,41,104756,31,104757,3,104758,41,104759,25,104760,49,104761,41,104762,44,104763,50,104764,46,104765,6,104766,40,104767,16,104768,8,104769,17,104770,48,104771,42,104772,50,104773,25,104774,29,104775,25,104776,32,104777,13,104778,36,104779,47,104780,14,104781,29,104782,23,104783,38,104784,42,104785,18,104786,20,104808,51,104896,75,104900,112,104901,104,104902,103,104903,116,104904,109,104905,108,104906,169,104907,164,104908,0,104909,168,104910,141,104911,166,104912,114,104913,160,104914,151,104915,117,104916,110,104917,140,104918,115,104919,170,104920,163,104921,154,104922,158,104923,161,104924,148,104925,0,104926,159,104927,167,104928,127,104929,131,104930,145,104931,159,104932,136,104933,123,104934,139,104935,134,104936,166,104937,150,104938,137,104939,147,104940,121,104941,165,104942,128,104943,111,104944,1,104945,126,104946,152,104947,157,104948,162,104949,153,104950,156,104951,149,104952,132,104953,122,104954,160,104955,146,104956,143,104957,156,104958,120,104959,125,104960,2,104961,144,104962,142,104963,138,104964,155,104965,135,104966,133,104967,151,104968,118,104969,119,104970,124,104971,108,104972,129,104973,130,104974,113,104975,0,104990,84,104991,75,104992,84],gcsidc:[[4127,4129,67],[4135,4139,67],[4158,4161,55],[4181,4185,55],[4194,4196,55],[4226,4228,63],[4247,4249,55],[4277,4279,81],[4600,4607,64],[4621,4623,55],[4628,4633,55],[4641,4646,55],[4662,4665,55],[4676,4678,66],[4688,4692,55],[4699,4701,64],[4755,4757,75],[4763,4765,75],[4813,4815,84],[8972,8987,75],[37212,37219,55],[37245,37247,55],[37249,37251,55],[104009,104015,75],[104019,104022,75],[104114,104124,75],[104125,104127,55],[104141,104145,75],[104179,104186,75],[104257,104260,75]]},g={c:[[2e3,2035,9001],[2039,2045,9001],[2056,2062,9001],[2067,2090,9001],[2093,2135,9001],[2161,2165,9001],[2172,2180,9001],[2188,2193,9001],[2195,2198,9001],[2200,2203,9001],[2205,2213,9001],[2215,2217,9001],[2222,2224,9002],[2225,2243,9003],[2246,2250,9003],[2251,2253,9002],[2257,2264,9003],[2274,2279,9003],[2280,2282,9002],[2283,2289,9003],[2308,2313,9001],[2315,2491,9001],[2494,2576,9001],[2578,2599,9001],[2601,2693,9001],[2695,2866,9001],[2867,2869,9002],[2870,2888,9003],[2891,2895,9003],[2896,2898,9002],[2902,2908,9003],[2915,2920,9003],[2921,2923,9002],[2924,2930,9003],[2931,2933,9001],[2935,2962,9001],[2964,2968,9003],[2969,2973,9001],[2975,2978,9001],[2984,2988,9001],[2995,3051,9001],[3054,3072,9001],[3077,3079,9001],[3081,3088,9001],[3092,3101,9001],[3106,3138,9001],[3146,3151,9001],[3153,3166,9001],[3168,3172,9001],[3174,3203,9001],[3294,3313,9001],[3315,3348,9001],[3350,3358,9001],[3367,3403,9001],[3408,3416,9001],[3417,3438,9003],[3441,3446,9003],[3447,3450,9001],[3451,3453,9003],[3455,3459,9003],[3460,3478,9001],[3554,3559,9001],[3560,3570,9003],[3571,3581,9001],[3594,3597,9001],[3601,3604,9001],[3637,3639,9001],[3665,3667,9001],[3693,3695,9001],[3701,3727,9001],[3728,3739,9003],[3740,3751,9001],[3753,3760,9003],[3761,3773,9001],[3775,3777,9001],[3779,3781,9001],[3788,3791,9001],[3797,3802,9001],[3814,3816,9001],[3825,3829,9001],[3832,3841,9001],[3844,3852,9001],[3873,3885,9001],[3890,3893,9001],[3942,3950,9001],[3968,3970,9001],[3973,3976,9001],[3986,3989,9001],[3994,3997,9001],[4001,4016,9102],[4018,4025,9102],[4027,4029,9102],[4031,4036,9102],[4044,4047,9102],[4048,4051,9001],[4052,4054,9102],[4056,4063,9001],[4093,4096,9001],[4120,4124,9102],[4127,4139,9102],[4141,4176,9102],[4178,4185,9102],[4188,4216,9102],[4218,4232,9102],[4235,4260,9102],[4265,4267,9102],[4269,4286,9102],[4292,4304,9102],[4306,4319,9102],[4390,4398,9001],[4399,4413,9003],[4418,4433,9003],[4455,4457,9003],[4484,4489,9001],[4491,4554,9001],[4568,4589,9001],[4600,4630,9102],[4636,4639,9102],[4641,4646,9102],[4652,4656,9001],[4657,4680,9102],[4682,4684,9102],[4686,4765,9102],[4766,4800,9001],[4801,4806,9102],[4813,4815,9102],[5014,5016,9001],[5069,5072,9001],[5105,5130,9001],[5173,5188,9001],[5253,5259,9001],[5269,5275,9001],[5292,5311,9001],[5329,5331,9001],[5343,5349,9001],[5355,5357,9001],[5459,5463,9001],[5479,5482,9001],[5518,5520,9001],[5533,5539,9001],[5550,5552,9001],[5562,5583,9001],[5623,5625,9003],[5631,5639,9001],[5649,5653,9001],[5663,5680,9001],[5682,5685,9001],[5875,5877,9001],[5896,5899,9001],[5921,5940,9001],[6050,6125,9001],[6244,6275,9001],[6328,6348,9001],[6350,6356,9001],[6366,6372,9001],[6381,6387,9001],[6393,6404,9001],[6480,6483,9001],[6511,6514,9001],[6579,6581,9001],[6619,6624,9001],[6625,6627,9003],[6628,6632,9001],[6634,6637,9001],[6669,6692,9001],[6707,6709,9001],[6720,6723,9001],[6732,6738,9001],[6881,6883,9102],[6931,6933,9001],[7005,7007,9001],[7057,7070,9003],[7074,7082,9001],[7109,7118,9001],[7119,7127,9002],[7374,7376,9001],[7528,7586,9001],[7587,7645,9003],[7692,7696,9001],[7755,7787,9001],[7791,7795,9001],[7799,7801,9001],[7803,7805,9001],[7825,7831,9001],[7845,7859,9001],[8013,8032,9001],[8065,8068,9002],[8518,8529,9003],[8533,8536,9003],[8538,8540,9003],[8677,8679,9001],[8836,8840,9001],[8857,8859,9001],[8908,8910,9001],[8972,9e3,9102],[9053,9057,9102],[9059,9069,9102],[9154,9159,9001],[9205,9218,9001],[20002,20032,9001],[20062,20092,9001],[20135,20138,9001],[20248,20258,9001],[20348,20358,9001],[20436,20440,9001],[20822,20824,9001],[20934,20936,9001],[21035,21037,9001],[21095,21097,9001],[21148,21150,9001],[21413,21423,9001],[21473,21483,9001],[21780,21782,9001],[21896,21899,9001],[22171,22177,9001],[22181,22187,9001],[22191,22197,9001],[22234,22236,9001],[22521,22525,9001],[22991,22994,9001],[23028,23038,9001],[23830,23853,9001],[23866,23872,9001],[23877,23884,9001],[23886,23894,9001],[23946,23948,9001],[24311,24313,9001],[24342,24347,9001],[24370,24374,9084],[24375,24381,9001],[24718,24721,9001],[24817,24821,9001],[24877,24882,9001],[24891,24893,9001],[25391,25395,9001],[25828,25838,9001],[26191,26195,9001],[26391,26393,9001],[26701,26722,9001],[26729,26746,9003],[26748,26760,9003],[26766,26799,9003],[26847,26870,9003],[26891,26899,9001],[26901,26923,9001],[26929,26946,9001],[26948,26978,9001],[26980,26998,9001],[27037,27040,9001],[27205,27232,9001],[27258,27260,9001],[27391,27398,9001],[27561,27564,9001],[27571,27574,9001],[27581,27584,9001],[27591,27594,9001],[28191,28193,9001],[28348,28358,9001],[28402,28432,9001],[28462,28492,9001],[29168,29172,9001],[29187,29195,9001],[29901,29903,9001],[30161,30179,9001],[30491,30494,9001],[30729,30732,9001],[31251,31259,9001],[31265,31268,9001],[31275,31277,9001],[31281,31290,9001],[31466,31469,9001],[31491,31495,9001],[31965,32e3,9001],[32001,32003,9003],[32005,32017,9003],[32019,32028,9003],[32033,32035,9003],[32037,32060,9003],[32064,32067,9003],[32081,32086,9001],[32107,32130,9001],[32133,32158,9001],[32164,32167,9003],[32180,32199,9001],[32201,32260,9001],[32301,32360,9001],[32601,32662,9001],[32664,32667,9003],[32701,32761,9001],[37002,37008,9102],[53001,53004,9001],[53008,53019,9001],[53021,53032,9001],[53034,53037,9001],[53042,53046,9001],[53074,53080,9001],[54001,54004,9001],[54008,54019,9001],[54021,54032,9001],[54042,54046,9001],[54048,54053,9001],[54074,54080,9001],[54098,54101,9001],[102001,102005,9001],[102007,102039,9001],[102042,102045,9001],[102060,102063,9001],[102070,102079,9001],[102096,102099,9001],[102101,102109,9001],[102114,102117,9001],[102132,102138,9001],[102141,102144,9001],[102156,102166,9001],[102173,102179,9001],[102191,102198,9001],[102221,102228,9001],[102231,102233,9001],[102237,102240,9001],[102364,102375,9001],[102389,102398,9003],[102399,102419,9001],[102421,102438,9001],[102445,102447,9003],[102450,102458,9001],[102459,102462,9003],[102470,102489,9001],[102550,102556,9001],[102562,102588,9001],[102629,102640,9003],[102648,102650,9003],[102688,102690,9003],[102696,102700,9003],[102701,102703,9001],[102799,102900,9001],[103166,103168,9002],[103220,103224,9001],[103225,103227,9002],[103232,103237,9001],[103238,103243,9003],[103244,103246,9001],[103247,103249,9003],[103254,103256,9001],[103257,103259,9003],[103264,103266,9001],[103267,103269,9003],[103327,103330,9001],[103344,103347,9001],[103372,103375,9001],[103381,103383,9001],[103384,103386,9002],[103387,103389,9001],[103390,103392,9003],[103397,103399,9001],[103427,103430,9003],[103444,103447,9003],[103476,103478,9001],[103479,103481,9003],[103486,103488,9001],[103489,103491,9003],[103492,103495,9001],[103496,103499,9003],[103539,103543,9001],[103544,103548,9003],[103549,103551,9001],[103552,103554,9002],[103555,103557,9003],[103558,103560,9001],[103571,103573,9001],[103574,103576,9003],[103577,103580,9001],[103581,103583,9003],[103595,103597,9001],[103600,103694,9001],[103696,103698,9001],[103700,103793,9003],[104101,104103,9102],[104126,104131,9102],[104259,104261,9102],[104700,104786,9102],[104900,104975,9102]],nc:[2065,9001,2066,9039,2136,9094,2137,9001,2138,9001,2154,9001,2157,9001,2158,9001,2159,9094,2160,9094,2169,9001,2170,9001,2204,9003,2219,9001,2220,9001,2254,9003,2255,9003,2256,9002,2265,9002,2266,9002,2267,9003,2268,9003,2269,9002,2270,9002,2271,9003,2272,9003,2273,9002,2290,9001,2294,9001,2295,9001,2314,9005,2899,9003,2900,9003,2901,9002,2909,9002,2910,9002,2911,9003,2912,9003,2913,9002,2914,9002,2980,9001,2981,9001,2991,9001,2992,9002,2993,9001,2994,9002,3074,9001,3075,9001,3080,9002,3089,9003,3090,9001,3091,9003,3102,9003,3141,9001,3142,9001,3167,9301,3360,9001,3361,9002,3362,9001,3363,9003,3364,9001,3365,9003,3404,9003,3405,9001,3406,9001,3407,9005,3439,9001,3440,9001,3479,9002,3480,9001,3481,9002,3482,9001,3483,9002,3484,9001,3485,9003,3486,9001,3487,9003,3488,9001,3489,9001,3490,9003,3491,9001,3492,9003,3493,9001,3494,9003,3495,9001,3496,9003,3497,9001,3498,9003,3499,9001,3500,9003,3501,9001,3502,9003,3503,9001,3504,9003,3505,9001,3506,9003,3507,9001,3508,9003,3509,9001,3510,9003,3511,9001,3512,9003,3513,9001,3514,9001,3515,9003,3516,9001,3517,9003,3518,9001,3519,9003,3520,9001,3521,9003,3522,9001,3523,9003,3524,9001,3525,9003,3526,9001,3527,9003,3528,9001,3529,9003,3530,9001,3531,9003,3532,9001,3533,9003,3534,9001,3535,9003,3536,9001,3537,9003,3538,9001,3539,9003,3540,9001,3541,9003,3542,9001,3543,9003,3544,9001,3545,9003,3546,9001,3547,9003,3548,9001,3549,9003,3550,9001,3551,9003,3552,9001,3553,9003,3582,9003,3583,9001,3584,9003,3585,9001,3586,9003,3587,9001,3588,9002,3589,9001,3590,9002,3591,9001,3592,9001,3593,9002,3598,9003,3599,9001,3600,9003,3605,9002,3606,9001,3607,9001,3608,9003,3609,9001,3610,9003,3611,9001,3612,9003,3613,9001,3614,9003,3615,9001,3616,9003,3617,9001,3618,9003,3619,9001,3620,9003,3621,9001,3622,9003,3623,9001,3624,9003,3625,9001,3626,9003,3627,9001,3628,9003,3629,9001,3630,9003,3631,9001,3632,9003,3633,9001,3634,9002,3635,9001,3636,9002,3640,9003,3641,9001,3642,9003,3643,9001,3644,9002,3645,9001,3646,9002,3647,9001,3648,9002,3649,9001,3650,9003,3651,9001,3652,9003,3653,9001,3654,9003,3655,9001,3656,9002,3657,9001,3658,9003,3659,9001,3660,9003,3661,9001,3662,9003,3663,9001,3664,9003,3668,9003,3669,9001,3670,9003,3671,9001,3672,9003,3673,9001,3674,9003,3675,9001,3676,9002,3677,9003,3678,9001,3679,9002,3680,9003,3681,9001,3682,9002,3683,9003,3684,9001,3685,9001,3686,9003,3687,9001,3688,9003,3689,9001,3690,9003,3691,9001,3692,9003,3696,9003,3697,9001,3698,9003,3699,9001,3700,9003,3783,9001,3784,9001,3793,9001,3794,9001,3812,9001,3819,9102,3821,9102,3824,9102,3854,9001,3857,9001,3889,9102,3906,9102,3911,9001,3912,9001,3920,9001,3978,9001,3979,9001,3991,9003,3992,9003,4026,9001,4037,9001,4038,9001,4042,9102,4071,9001,4075,9102,4081,9102,4082,9001,4083,9001,4087,9001,4088,9001,4217,9003,4261,9105,4262,9102,4263,9102,4288,9102,4289,9102,4322,9102,4324,9102,4326,9102,4414,9001,4415,9001,4417,9001,4434,9001,4437,9001,4438,9003,4439,9003,4462,9001,4463,9102,4467,9001,4470,9102,4471,9001,4475,9102,4483,9102,4490,9102,4555,9102,4558,9102,4559,9001,4632,9102,4633,9102,4647,9001,4807,9105,4808,9102,4809,9102,4810,9105,4811,9105,4816,9105,4817,9102,4818,9102,4820,9102,4821,9105,4822,9001,4823,9102,4824,9102,4826,9001,4839,9001,4901,9105,4902,9105,4903,9102,4904,9102,5013,9102,5018,9001,5048,9001,5167,9001,5168,9001,5221,9001,5223,9001,5228,9102,5229,9102,5233,9102,5234,9001,5235,9001,5243,9001,5246,9102,5247,9001,5252,9102,5264,9102,5266,9001,5316,9001,5320,9001,5321,9001,5324,9102,5325,9001,5337,9001,5340,9102,5354,9102,5360,9102,5361,9001,5362,9001,5365,9102,5367,9001,5371,9102,5373,9102,5381,9102,5382,9001,5383,9001,5387,9001,5389,9001,5393,9102,5396,9001,5451,9102,5456,9001,5457,9001,5464,9102,5467,9102,5469,9001,5472,9037,5489,9102,5490,9001,5513,9001,5514,9001,5523,9001,5524,9102,5527,9102,5530,9001,5531,9001,5546,9102,5559,9001,5561,9102,5588,9002,5589,9005,5593,9102,5596,9001,5627,9001,5629,9001,5641,9001,5643,9001,5644,9001,5646,9003,5654,9003,5655,9003,5659,9001,5681,9102,5700,9001,5825,9001,5836,9001,5837,9001,5839,9001,5842,9001,5844,9001,5858,9001,5879,9001,5880,9001,5886,9102,5887,9001,5890,9001,6128,9002,6129,9002,6135,9102,6204,9001,6207,9102,6210,9001,6211,9001,6307,9001,6311,9102,6312,9001,6316,9001,6318,9102,6322,9102,6325,9102,6362,9001,6365,9102,6391,9002,6405,9002,6406,9001,6407,9002,6408,9001,6409,9002,6410,9001,6411,9003,6412,9001,6413,9003,6414,9001,6415,9001,6416,9003,6417,9001,6418,9003,6419,9001,6420,9003,6421,9001,6422,9003,6423,9001,6424,9003,6425,9001,6426,9003,6427,9001,6428,9003,6429,9001,6430,9003,6431,9001,6432,9003,6433,9001,6434,9003,6435,9001,6436,9003,6437,9001,6438,9003,6439,9001,6440,9001,6441,9003,6442,9001,6443,9003,6444,9001,6445,9003,6446,9001,6447,9003,6448,9001,6449,9003,6450,9001,6451,9003,6452,9001,6453,9003,6454,9001,6455,9003,6456,9001,6457,9003,6458,9001,6459,9003,6460,9001,6461,9003,6462,9001,6463,9003,6464,9001,6465,9003,6466,9001,6467,9003,6468,9001,6469,9003,6470,9001,6471,9003,6472,9001,6473,9003,6474,9001,6475,9003,6476,9001,6477,9003,6478,9001,6479,9003,6484,9003,6485,9001,6486,9003,6487,9001,6488,9003,6489,9001,6490,9003,6491,9001,6492,9003,6493,9001,6494,9002,6495,9001,6496,9002,6497,9001,6498,9001,6499,9002,6500,9001,6501,9003,6502,9001,6503,9003,6504,9001,6505,9003,6506,9001,6507,9003,6508,9001,6509,9001,6510,9003,6515,9002,6516,9001,6518,9001,6519,9003,6520,9001,6521,9003,6522,9001,6523,9003,6524,9001,6525,9003,6526,9001,6527,9003,6528,9001,6529,9003,6530,9001,6531,9003,6532,9001,6533,9003,6534,9001,6535,9003,6536,9001,6537,9003,6538,9001,6539,9003,6540,9001,6541,9003,6542,9001,6543,9003,6544,9001,6545,9002,6546,9001,6547,9002,6548,9001,6549,9003,6550,9001,6551,9003,6552,9001,6553,9003,6554,9001,6555,9003,6556,9001,6557,9002,6558,9001,6559,9002,6560,9001,6561,9002,6562,9001,6563,9003,6564,9001,6565,9003,6566,9001,6567,9001,6568,9003,6569,9001,6570,9002,6571,9001,6572,9003,6573,9001,6574,9003,6575,9001,6576,9003,6577,9001,6578,9003,6582,9003,6583,9001,6584,9003,6585,9001,6586,9003,6587,9001,6588,9003,6589,9001,6590,9003,6591,9001,6592,9001,6593,9003,6594,9001,6595,9003,6596,9001,6597,9003,6598,9001,6599,9003,6600,9001,6601,9003,6602,9001,6603,9003,6605,9003,6606,9001,6607,9003,6608,9001,6609,9003,6610,9001,6611,9001,6612,9003,6613,9001,6614,9003,6615,9001,6616,9003,6617,9001,6618,9003,6633,9003,6646,9001,6668,9102,6703,9001,6706,9102,6783,9102,6784,9001,6785,9002,6786,9001,6787,9002,6788,9001,6789,9002,6790,9001,6791,9002,6792,9001,6793,9002,6794,9001,6795,9002,6796,9001,6797,9002,6798,9001,6799,9002,6800,9001,6801,9002,6802,9001,6803,9002,6804,9001,6805,9002,6806,9001,6807,9002,6808,9001,6809,9002,6810,9001,6811,9002,6812,9001,6813,9002,6814,9001,6815,9002,6816,9001,6817,9002,6818,9001,6819,9002,6820,9001,6821,9002,6822,9001,6823,9002,6824,9001,6825,9002,6826,9001,6827,9002,6828,9001,6829,9002,6830,9001,6831,9002,6832,9001,6833,9002,6834,9001,6835,9002,6836,9001,6837,9002,6838,9001,6839,9002,6840,9001,6841,9002,6842,9001,6843,9002,6844,9001,6845,9002,6846,9001,6847,9002,6848,9001,6849,9002,6850,9001,6851,9002,6852,9001,6853,9002,6854,9001,6855,9002,6856,9001,6857,9002,6858,9001,6859,9002,6860,9001,6861,9002,6862,9001,6863,9002,6867,9001,6868,9002,6870,9001,6875,9001,6876,9001,6879,9001,6880,9003,6884,9001,6885,9002,6886,9001,6887,9002,6892,9102,6894,9102,6915,9001,6922,9001,6923,9003,6924,9001,6925,9003,6962,9001,6983,9102,6984,9001,6990,9102,6991,9001,7035,9102,7037,9102,7039,9102,7041,9102,7073,9102,7084,9102,7086,9102,7128,9003,7131,9001,7132,9003,7133,9102,7136,9102,7139,9102,7142,9001,7257,9001,7258,9003,7259,9001,7260,9003,7261,9001,7262,9003,7263,9001,7264,9003,7265,9001,7266,9003,7267,9001,7268,9003,7269,9001,7270,9003,7271,9001,7272,9003,7273,9001,7274,9003,7275,9001,7276,9003,7277,9001,7278,9003,7279,9001,7280,9003,7281,9001,7282,9003,7283,9001,7284,9003,7285,9001,7286,9003,7287,9001,7288,9003,7289,9001,7290,9003,7291,9001,7292,9003,7293,9001,7294,9003,7295,9001,7296,9003,7297,9001,7298,9003,7299,9001,7300,9003,7301,9001,7302,9003,7303,9001,7304,9003,7305,9001,7306,9003,7307,9001,7308,9003,7309,9001,7310,9003,7311,9001,7312,9003,7313,9001,7314,9003,7315,9001,7316,9003,7317,9001,7318,9003,7319,9001,7320,9003,7321,9001,7322,9003,7323,9001,7324,9003,7325,9001,7326,9003,7327,9001,7328,9003,7329,9001,7330,9003,7331,9001,7332,9003,7333,9001,7334,9003,7335,9001,7336,9003,7337,9001,7338,9003,7339,9001,7340,9003,7341,9001,7342,9003,7343,9001,7344,9003,7345,9001,7346,9003,7347,9001,7348,9003,7349,9001,7350,9003,7351,9001,7352,9003,7353,9001,7354,9003,7355,9001,7356,9003,7357,9001,7358,9003,7359,9001,7360,9003,7361,9001,7362,9003,7363,9001,7364,9003,7365,9001,7366,9003,7367,9001,7368,9003,7369,9001,7370,9003,7373,9102,7683,9102,7798,9102,7844,9102,7877,9001,7878,9001,7881,9102,7882,9001,7883,9001,7886,9102,7887,9001,7899,9001,7991,9001,7992,9001,8035,9003,8036,9003,8042,9102,8043,9102,8058,9001,8059,9001,8082,9001,8083,9001,8086,9102,8088,9001,8090,9001,8091,9003,8092,9001,8093,9003,8095,9001,8096,9003,8097,9001,8098,9003,8099,9001,8100,9003,8101,9001,8102,9003,8103,9001,8104,9003,8105,9001,8106,9003,8107,9001,8108,9003,8109,9001,8110,9003,8111,9001,8112,9003,8113,9001,8114,9003,8115,9001,8116,9003,8117,9001,8118,9003,8119,9001,8120,9003,8121,9001,8122,9003,8123,9001,8124,9003,8125,9001,8126,9003,8127,9001,8128,9003,8129,9001,8130,9003,8131,9001,8132,9003,8133,9001,8134,9003,8135,9001,8136,9003,8137,9001,8138,9003,8139,9001,8140,9003,8141,9001,8142,9003,8143,9001,8144,9003,8145,9001,8146,9003,8147,9001,8148,9003,8149,9001,8150,9003,8151,9001,8152,9003,8153,9001,8154,9003,8155,9001,8156,9003,8157,9001,8158,9003,8159,9001,8160,9003,8161,9001,8162,9003,8163,9001,8164,9003,8165,9001,8166,9003,8167,9001,8168,9003,8169,9001,8170,9003,8171,9001,8172,9003,8173,9001,8177,9003,8179,9001,8180,9003,8181,9001,8182,9003,8184,9001,8185,9003,8187,9001,8189,9003,8191,9001,8193,9003,8196,9001,8197,9003,8198,9001,8200,9003,8201,9001,8202,9003,8203,9001,8204,9003,8205,9001,8206,9003,8207,9001,8208,9003,8209,9001,8210,9003,8212,9001,8213,9003,8214,9001,8216,9003,8218,9001,8220,9003,8222,9001,8224,9003,8225,9001,8226,9003,8232,9102,8237,9102,8240,9102,8246,9102,8249,9102,8252,9102,8255,9102,8311,9001,8312,9002,8313,9001,8314,9002,8315,9001,8316,9002,8317,9001,8318,9002,8319,9001,8320,9002,8321,9001,8322,9002,8323,9001,8324,9002,8325,9001,8326,9002,8327,9001,8328,9002,8329,9001,8330,9002,8331,9001,8332,9002,8333,9001,8334,9002,8335,9001,8336,9002,8337,9001,8338,9002,8339,9001,8340,9002,8341,9001,8342,9002,8343,9001,8344,9002,8345,9001,8346,9002,8347,9001,8348,9002,8351,9102,8352,9001,8353,9001,8379,9001,8380,9003,8381,9001,8382,9003,8383,9001,8384,9003,8385,9001,8387,9003,8391,9001,8395,9001,8427,9102,8428,9102,8431,9102,8433,9001,8441,9001,8455,9001,8456,9001,8531,9003,8545,9102,8682,9001,8685,9102,8687,9001,8692,9001,8693,9001,8694,9102,8699,9102,8818,9102,8826,9001,8860,9102,8888,9102,8900,9102,8902,9102,8903,9001,8907,9102,8949,9102,8950,9001,8951,9001,9003,9102,9006,9102,9009,9102,9012,9102,9014,9102,9017,9102,9019,9102,9039,9001,9040,9001,9140,9102,9141,9001,9148,9102,9149,9001,9150,9001,9153,9102,9191,9001,9221,9001,9222,9001,20499,9001,20538,9001,20539,9001,20790,9001,20791,9001,21291,9001,21292,9001,21500,9001,21817,9001,21818,9001,22032,9001,22033,9001,22091,9001,22092,9001,22332,9001,22391,9001,22392,9001,22700,9001,22770,9001,22780,9001,22832,9001,23090,9001,23095,9001,23239,9001,23240,9001,23700,9001,24047,9001,24048,9001,24100,9005,24200,9001,24305,9001,24306,9001,24382,9084,24383,9001,24500,9001,24547,9001,24548,9001,24571,9062,24600,9001,25e3,9001,25231,9001,25884,9001,25932,9001,26237,9001,26331,9001,26332,9001,26591,9001,26592,9001,26632,9001,26692,9001,27120,9001,27200,9001,27291,9040,27292,9040,27429,9001,27493,9001,27500,9001,27700,9001,28232,9001,28600,9001,28991,9001,28992,9001,29101,9001,29220,9001,29221,9001,29333,9001,29635,9001,29636,9001,29701,9001,29738,9001,29739,9001,29849,9001,29850,9001,29871,9042,29872,9041,29873,9001,30200,9039,30339,9001,30340,9001,30791,9001,30792,9001,31028,9001,31121,9001,31154,9001,31170,9001,31171,9001,31279,9001,31370,9001,31528,9001,31529,9001,31600,9001,31700,9001,31838,9001,31839,9001,31901,9001,32030,9003,32031,9003,32061,9001,32062,9001,32098,9001,32099,9003,32100,9001,32104,9001,32161,9001,32766,9001,37202,9102,37203,9102,37206,9102,37207,9102,37218,9102,37221,9102,37225,9105,37240,9102,37241,9102,37243,9102,37245,9102,37249,9102,37257,9102,37260,9102,53048,9001,53049,9001,54034,9001,54090,9001,54091,9001,65061,9003,65062,9003,65161,9001,102041,9003,102064,9085,102068,109030,102069,109031,102093,9001,102094,9001,102118,9003,102120,9003,102121,9003,102122,9001,102150,9001,102168,9001,102204,9001,102212,9001,102213,9001,102215,9001,102216,9001,102217,9003,102218,9001,102219,9003,102220,9003,102247,9001,102299,9001,102306,9001,102319,9001,102328,9001,102329,9001,102359,9001,102360,9001,102440,9001,102448,9001,102464,9003,102465,9003,102491,9001,102492,9001,102498,9001,102499,9001,102525,9003,102526,9003,102528,9003,102529,9003,102589,9003,102598,9001,102599,9003,102600,9003,102604,9003,102661,9003,102662,9003,102664,9003,102665,9003,102705,9003,102720,9003,102721,9003,102726,9003,102727,9003,102733,9003,102761,9003,102766,9003,102974,9003,103228,9001,103229,9001,103230,9003,103231,9003,103250,9001,103251,9003,103252,9001,103253,9003,103260,9001,103261,9001,103262,9003,103263,9003,103270,9001,103271,9001,103272,9003,103273,9003,103274,9001,103275,9001,103276,9003,103277,9003,103278,9001,103279,9001,103280,9003,103281,9003,103282,9001,103283,9001,103284,9003,103285,9003,103286,9001,103287,9003,103288,9001,103289,9003,103290,9001,103291,9003,103292,9001,103293,9001,103294,9003,103295,9003,103296,9001,103297,9001,103298,9003,103299,9003,103300,9001,103307,9001,103313,9001,103319,9001,103322,9001,103323,9001,103332,9001,103335,9001,103338,9001,103340,9001,103351,9001,103358,9001,103370,9001,103376,9003,103377,9001,103378,9001,103379,9003,103380,9003,103393,9001,103394,9001,103395,9003,103396,9003,103400,9003,103407,9003,103413,9003,103419,9003,103422,9003,103423,9003,103432,9003,103435,9003,103438,9003,103440,9003,103451,9003,103458,9003,103470,9003,103472,9001,103473,9002,103474,9001,103475,9003,103482,9001,103483,9003,103484,9001,103485,9003,103500,9001,103501,9003,103502,9001,103503,9001,103504,9002,103505,9002,103506,9001,103507,9001,103508,9003,103509,9003,103510,9001,103511,9001,103512,9003,103513,9003,103514,9001,103515,9003,103516,9001,103517,9003,103518,9001,103519,9003,103520,9001,103521,9002,103522,9001,103523,9001,103524,9003,103525,9003,103526,9001,103527,9003,103561,9003,103562,9003,103563,9001,103564,9001,103565,9003,103566,9003,103567,9001,103568,9001,103569,9003,103570,9003,103585,9003,103586,9001,103587,9003,103588,9002,103589,9001,103590,9003,103591,9002,103592,9001,103593,9003,103594,9002,103695,9003,103846,9001,103946,9003,104009,9102,104017,9102,104018,9102,104022,9102,104024,9102,104027,9102,104047,9102,104050,9102,104105,9102,104106,9102,104109,9102,104112,9102,104113,9102,104134,9102,104135,9102,104138,9102,104139,9105,104140,9105,104808,9102]};h.wr=function(){function l(){}return l.Sy=function(o){l.xp===!1&&l.yt();var r=l.FQ(o);if(r==-1){var n=l.Bx(o);n!=o&&(r=l.Sy(n))}return r==-1&&(n=l.FK(o))!=o&&(r=l.Sy(n)),r},l.FQ=function(o){return l.Fw[o]!==void 0?l.Fw[o]:-1},l.CQ=function(o){l.xp===!1&&l.yt();var r=l.nF(o);if(r==1e38){var n=l.Bx(o);if(n!=o&&(r=l.nF(n)),r==1e38)return 1e-10}return r},l.ZS=function(o){if(l.Is[o]!==void 0)return!0;var r=l.Bx(o);return r!=o&&l.Is[r]!==void 0},l.aT=function(o){if(l.xo[o]!==void 0)return!0;var r=l.Bx(o);return r!=o&&l.xo[r]!==void 0},l.nF=function(o){return l.xp===!1&&l.yt(),l.Is[o]!==void 0?l.Is[o]:l.xo[o]!==void 0?l.xo[o]:1e38},l.FK=function(o){return l.xp===!1&&l.yt(),l.WA[o]!==void 0?l.WA[o]:o},l.Bx=function(o){return l.xp===!1&&l.yt(),l.XA[o]!==void 0?l.XA[o]:o},l.yt=function(){for(var o,r=k,n=0;n<r.pcsid.length;n+=2)l.xo[r.pcsid[n]]=r.pcstol[2*r.pcsid[n+1]+1];for(n=0;n<r.pcsidc.length;n+=1)for(var a=(o=r.pcsidc[n])[0];a<=o[1];a++)l.xo[a]=r.pcstol[2*o[2]+1];for(n=0;n<r.gcsid.length;n+=2)l.Is[r.gcsid[n]]=r.gcstol[2*r.gcsid[n+1]+1];for(n=0;n<r.gcsidc.length;n+=1)for(a=(o=r.gcsidc[n])[0];a<=o[1];a++)l.xo[a]=r.gcstol[2*o[2]+1];for(n=0;n<g.c.length;n+=1)for(a=(o=g.c[n])[0];a<=o[1];a++)l.Fw[a]=o[2];for(n=0;n<g.nc.length;n+=2)l.Fw[g.nc[n]]=g.nc[n+1];for(g=null,n=0;n<r.newtoold.length;n+=2)l.WA[r.newtoold[n+1]]=r.newtoold[n],l.XA[r.newtoold[n]]=r.newtoold[n+1];k=null,l.xp=!0},l.xp=!1,l.Is=[],l.xo=[],l.WA=[],l.XA=[],l.Fw=[],l}()}(q||(q={})),function(h){function k(l){return l.length===0?'""':l[0]=='"'||l[0]=="."||"0"<=l[0]&&"9">=l[0]?l:'"'+l.trim()+'"'}var g=[];h.XC=function(){function l(){}return l.EQ=function(o){try{for(var r=0;r<g.length;r++)if(g[r].wkttext===o)return g[r].unit;for(var n,a=r="",c=!1,p=0;p<o.length;p++){var f=o[p];c===!0?f=='"'?o[p+1]=='"'?r+=f:c=c=!1:r+=f:/[\s]/.test(f)||(f==","?(a=r!==""?a+(k(r)+","):a+",",r=""):f==")"||f=="]"?(a=r!==""?a+(k(r)+"]}"):a+"]}",r=""):f=="("||f=="["?(a+='{ "entity": "'+r.toUpperCase().trim()+'", "values":[',r=""):f=='"'?(c=!0,r=""):r+=f)}n=JSON.parse(a);var m=l.mF(n);if(m===null)return null;for(n=null,f=0;f<m.values.length;f++)if(typeof m.values[f]=="object"&&(m.values[f].entity==="UNIT"||m.values[f].entity==="ANGLEUNIT"||m.values[f].entity==="LENGTHUNIT")){n=m.values[f];break}if(n===null)return null;var b=h.Tc.ZO(m.entity==="GEOGCS"||m.entity==="GEOGCRS"?1:0,n.values[1],n.values[2]);return g.push({wkttext:o,unit:b}),10<g.length&&g.shift(),b}catch{return null}},l.mF=function(o){if(o===null)return null;switch(o.entity){case"GEOGCRS":case"GEOGCS":case"PROJCRS":case"PROJCS":return o}for(var r=[],n=0;n<o.values.length;n++)if(typeof o.values[n]=="object"&&o.values[n].entity!==void 0)switch(o.values[n].entity){case"GEOGCRS":case"GEOGCS":case"PROJCRS":case"PROJCS":return o.values[n];default:r.push(o.values[n])}for(o=0;o<r.length;o++)if((n=l.mF(r[o]))!==null)return n;return null},l.DQ=function(o){var r=-1;if(o!=null&&0<o.length){var n=o.search(/PROJCR?S/);if(0<=n){var a=0;if(0<=(n=o.lastIndexOf("UNIT"))&&0<(n=o.indexOf(",",n+4))){n++;var c=o.indexOf("]",n+1);if(0<c)try{a=parseFloat(o.substring(n,c))}catch{a=0}}0<a&&(r=.001/a)}else if(0<=(n=o.search(/GEOGCR?S/))){var p=0;if(a=0,(n=o.indexOf("SPHEROID",n+6))===-1&&(n=o.indexOf("ELLIPSOID",n+7)),0<n&&0<(n=o.indexOf(",",n+8))){if(n++,0<(c=o.indexOf(",",n+1)))try{p=parseFloat(o.substring(n,c))}catch{p=0}if(0<p&&((n=o.lastIndexOf("ANGLEUNIT",c+1))===-1&&(n=o.lastIndexOf("UNIT",c+1)),0<=n&&0<(n=o.indexOf(",",n+4))&&(n++,0<(c=o.indexOf("]",n+1)))))try{a=parseFloat(o.substring(n,c))}catch{a=0}}0<p&&0<a&&(r=.001/(p*a))}}return r},l}()}(q||(q={})),function(h){var k;(k=h.eL||(h.eL={}))[k.NONE=0]="NONE",k[k.LINEAR=1]="LINEAR",k[k.ANGULAR=2]="ANGULAR",function(l){l[l.enumFloat=0]="enumFloat",l[l.enumDouble=1]="enumDouble",l[l.enumInt32=2]="enumInt32",l[l.enumInt64=3]="enumInt64",l[l.enumInt8=4]="enumInt8",l[l.enumInt16=5]="enumInt16"}(h.QL||(h.QL={})),function(l){l[l.POSITION=0]="POSITION",l[l.Z=1]="Z",l[l.M=2]="M",l[l.ID=3]="ID",l[l.NORMAL=4]="NORMAL",l[l.TEXTURE1D=5]="TEXTURE1D",l[l.TEXTURE2D=6]="TEXTURE2D",l[l.TEXTURE3D=7]="TEXTURE3D",l[l.ID2=8]="ID2",l[l.MAXSEMANTICS=10]="MAXSEMANTICS"}(h.Ih||(h.Ih={}));var g=function(){function l(o,r){if(this.Vs=this.Ae=null,this.Oq=this.Aa=0,this.uh=this.bg=null,this.wl=0,r!==void 0){for(this.Aa=r.Aa,this.Oq=r.Oq,this.bg=r.bg.slice(0),this.uh=r.uh.slice(0),this.wl=r.wl,this.Vs=[],o=r=0;o<this.Aa;o++)this.Vs[o]=r,r+=l.Va(this.bg[o]);for(this.Oq=r,this.Ae=[],o=0;o<this.Aa;o++){r=l.Va(this.kd(o));for(var n=l.se(this.kd(o)),a=0;a<r;a++)this.Ae[this.Vs[o]+a]=n}}else this.Oq=this.Aa=0}return l.prototype.kd=function(o){if(0>o||o>this.Aa)throw h.i.N();return this.bg[o]},l.prototype.Pf=function(o){return this.uh[o]},l.lz=function(o){return l.JM[o]},l.Tp=function(o){return l.SM[o]},l.Va=function(o){return l.rM[o]},l.prototype.hasAttribute=function(o){return 0<=this.uh[o]},l.prototype.iG=function(){return this.hasAttribute(1)},l.se=function(o){return l.eD[o]},l.prototype.LR=function(o){return this.Vs[o]},l.DG=function(o,r){return l.eD[o]===r},l.prototype.Nb=function(o){return this===o},l.prototype.An=function(){for(var o=h.O.Th(this.bg[0]),r=1;r<this.Aa;r++)o=h.O.Th(this.bg[r],o);return o},l.prototype.$j=function(o){return this.Vs[o]},l.prototype.cc=function(){return this.wl},l.prototype.Ed=function(o){return this.bg[o]},l.eD=[0,0,NaN,0,0,0,0,0,0],l.JM=[1,1,1,0,2,1,1,1,0],l.SM=[1,1,1,2,0,0,0,0,2],l.rM=[2,1,1,1,3,1,2,3,2],l}();h.ra=g}(q||(q={})),function(h){function k(c,p,f){var m=p-(c=new a(c)).e,b=c.c;for(b.length>++p&&g(c,m,a.eu),b[0]?f?m=p:(b=c.c,m=c.e+m+1):++m;b.length<m;b.push(0));return m=c.e,f===1||f&&(p<=m||m<=o)?(0>c.Bd&&b[0]?"-":"")+(1<b.length?b[0]+"."+b.join("").slice(1):b[0])+(0>m?"e":"e+")+m:c.toString()}function g(c,p,f,m){var b=c.c,x=c.e+p+1;if(f===1?m=5<=b[x]:f===2?m=5<b[x]||b[x]==5&&(m||0>x||b[x+1]!==void 0||1&b[x-1]):f===3?m=m||b[x]!==void 0||0>x:(m=!1,f!==0&&l("!Big.RM!")),1>x||!b[0])m?(c.e=-p,c.c=[1]):c.c=[c.e=0];else{if(b.length=x--,m)for(;9<++b[x];)b[x]=0,x--||(++c.e,b.unshift(1));for(x=b.length;!b[--x];b.pop());}return c}function l(c){throw(c=Error(c)).name="BigError",c}var o=-7,r=21,n=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,a=function(){function c(p){if(p instanceof c)this.Bd=p.Bd,this.e=p.e,this.c=p.c.slice();else{var f,m,b;for(p===0&&0>1/p?p="-0":n.test(p+="")||l(NaN),this.Bd=p.charAt(0)=="-"?(p=p.slice(1),-1):1,-1<(f=p.indexOf("."))&&(p=p.replace(".","")),0<(m=p.search(/e/i))?(0>f&&(f=m),f+=+p.slice(m+1),p=p.substring(0,m)):0>f&&(f=p.length),m=0;p.charAt(m)=="0";m++);if(m==(b=p.length))this.c=[this.e=0];else{for(;p.charAt(--b)=="0";);for(this.e=f-m-1,this.c=[],f=0;m<=b;this.c[f++]=+p.charAt(m++));}}}return c.prototype.abs=function(){var p=new c(this);return p.Bd=1,p},c.prototype.cmp=function(p){var f=this.c,m=(p=new c(p)).c,b=this.Bd,x=p.Bd,T=this.e,I=p.e;if(!f[0]||!m[0])return f[0]?b:m[0]?-x:0;if(b!=x)return b;if(p=0>b,T!=I)return T>(I^p)?1:-1;for(b=-1,x=(T=f.length)<(I=m.length)?T:I;++b<x;)if(f[b]!=m[b])return f[b]>(m[b]^p)?1:-1;return T==I?0:T>(I^p)?1:-1},c.prototype.jm=function(p){var f=this.c,m=(p=new c(p)).c,b=this.Bd==p.Bd?1:-1,x=c.rr;if((x!==~~x||0>x||1e6<x)&&l("!Big.DP!"),!f[0]||!m[0])return f[0]==m[0]&&l(NaN),m[0]||l(b/0),new c(0*b);var T,I,A=m.slice(),P=T=m.length,j=f.length,D=f.slice(0,T),F=D.length,N=p,z=N.c=[],W=0,H=x+(N.e=this.e-p.e)+1;for(N.Bd=b,b=0>H?0:H,A.unshift(0);F++<T;D.push(0));do{for(I=0;10>I;I++){if(T!=(F=D.length))var Y=T>F?1:-1;else{var Z=-1;for(Y=0;++Z<T;)if(m[Z]!=D[Z]){Y=m[Z]>D[Z]?1:-1;break}}if(!(0>Y))break;for(p=F==T?m:A;F;){if(D[--F]<p[F]){for(Z=F;Z&&!D[--Z];D[Z]=9);--D[Z],D[F]+=10}D[F]-=p[F]}for(;!D[0];D.shift());}z[W++]=Y?I:++I,D[0]&&Y?D[F]=f[P]||0:D=[f[P]]}while((P++<j||D[0]!==void 0)&&b--);return z[0]||W==1||(z.shift(),N.e--),W>H&&g(N,x,c.eu,D[0]!==void 0),N},c.prototype.fS=function(){return 0<this.cmp(0)},c.prototype.nT=function(){return 0>this.cmp(0)},c.prototype.jt=function(p){var f,m=this.Bd,b=(p=new c(p)).Bd;if(m!=b)return p.Bd=-b,this.tI(p);var x=this.c.slice(),T=this.e,I=p.c,A=p.e;if(!x[0]||!I[0])return I[0]?(p.Bd=-b,p):new c(x[0]?this:0);if(m=T-A){for((f=0>m)?(m=-m,T=x):(A=T,T=I),T.reverse(),b=m;b--;T.push(0));T.reverse()}else for(T=((f=x.length<I.length)?x:I).length,m=b=0;b<T;b++)if(x[b]!=I[b]){f=x[b]<I[b];break}if(f&&(T=x,x=I,I=T,p.Bd=-p.Bd),0<(b=(T=I.length)-(f=x.length)))for(;b--;x[f++]=0);for(b=f;T>m;){if(x[--T]<I[T]){for(f=T;f&&!x[--f];x[f]=9);--x[f],x[T]+=10}x[T]-=I[T]}for(;x[--b]==0;x.pop());for(;x[0]==0;)x.shift(),--A;return x[0]||(p.Bd=1,x=[A=0]),p.c=x,p.e=A,p},c.prototype.tI=function(p){var f=this.Bd,m=(p=new c(p)).Bd;if(f!=m)return p.Bd=-m,this.jt(p);m=this.e;var b=this.c,x=p.e,T=p.c;if(!b[0]||!T[0])return T[0]?p:new c(b[0]?this:0*f);if(b=b.slice(),f=m-x){for(0<f?(x=m,m=T):(f=-f,m=b),m.reverse();f--;m.push(0));m.reverse()}for(0>b.length-T.length&&(m=T,T=b,b=m),f=T.length,m=0;f;)m=(b[--f]=b[f]+T[f]+m)/10|0,b[f]%=10;for(m&&(b.unshift(m),++x),f=b.length;b[--f]==0;b.pop());return p.c=b,p.e=x,p},c.prototype.pow=function(p){var f=this,m=new c(1),b=m,x=0>p;for((p!==~~p||-1e6>p||1e6<p)&&l("!pow!"),p=x?-p:p;1&p&&(b=b.lr(f)),p>>=1;)f=f.lr(f);return x?m.jm(b):b},c.prototype.round=function(p,f){var m=this;return p==null?p=0:(p!==~~p||0>p||1e6<p)&&l("!round!"),g(m=new c(m),p,f??c.eu),m},c.prototype.sqrt=function(){var p=this.c,f=this.Bd,m=this.e,b=new c("0.5");if(!p[0])return new c(this);0>f&&l(NaN),(f=Math.sqrt(this.toString()))==0||f==1/0?((f=p.join("")).length+m&1||(f+="0"),(p=new c(Math.sqrt(f).toString())).e=((m+1)/2|0)-(0>m||1&m)):p=new c(f.toString()),f=p.e+(c.rr+=4);do m=p,p=b.lr(m.tI(this.jm(m)));while(m.c.slice(0,f).join("")!==p.c.slice(0,f).join(""));return g(p,c.rr-=4,c.eu),p},c.prototype.lr=function(p){var f=this.c,m=(p=new c(p)).c,b=f.length,x=m.length,T=this.e,I=p.e;if(p.Bd=this.Bd==p.Bd?1:-1,!f[0]||!m[0])return new c(0*p.Bd);if(p.e=T+I,b<x){var A=f;f=m,m=A,I=b,b=x,x=I}for(A=Array(I=b+x);I--;A[I]=0);for(T=x;T--;){for(x=0,I=b+T;I>T;)x=A[I]+m[T]*f[I-T-1]+x,A[I--]=x%10,x=x/10|0;A[I]=(A[I]+x)%10}for(x&&++p.e,A[0]||A.shift(),T=A.length;!A[--T];A.pop());return p.c=A,p},c.prototype.toString=function(){var p=this.e,f=this.c.join(""),m=f.length;if(p<=o||p>=r)f=f.charAt(0)+(1<m?"."+f.slice(1):"")+(0>p?"e":"e+")+p;else if(0>p){for(;++p;f="0"+f);f="0."+f}else if(0<p)if(++p>m)for(p-=m;p--;f+="0");else p<m&&(f=f.slice(0,p)+"."+f.slice(p));else 1<m&&(f=f.charAt(0)+"."+f.slice(1));return 0>this.Bd&&this.c[0]?"-"+f:f},c.prototype.toExponential=function(p){return p==null?p=this.c.length-1:(p!==~~p||0>p||1e6<p)&&l("!toExp!"),k(this,p,1)},c.prototype.toFixed=function(p){var f=o,m=r;if(o=-(r=1/0),p==null)var b=this.toString();else p===~~p&&0<=p&&1e6>=p&&(b=k(this,this.e+p),0>this.Bd&&this.c[0]&&0>b.indexOf("-")&&(b="-"+b));return o=f,r=m,b||l("!toFix!"),b},c.prototype.toPrecision=function(p){return p==null?this.toString():((p!==~~p||1>p||1e6<p)&&l("!toPre!"),k(this,p-1,2))},c.rr=20,c.eu=1,c}();h.hp=a}(q||(q={})),function(h){var k=function(){function g(l){this.lf=l}return g.prototype.nr=function(l,o,r){var n=new h.h,a=new h.h,c=this.lf;r.Vd(l,o,function(p,f){return c.tc(2*p,n),c.tc(2*f,a),n.compare(a)})},g.prototype.$p=function(l){return this.lf.read(2*l+1)},g}();h.pi=function(){function g(){}return g.aq=function(l){if(l.B())return!1;var o=l.getType();return o==1736?l.Ke()!=0:o==1607?(o=[!1],g.sE(l,!0,o),o[0]):!(o!=197&&(!h.aa.yd(o)||l.BG()))},g.gm=function(l){var o=l.getType();if(o==1736)return o=new h.Ta(l.description),l.B()||l.dD(o),o;if(o==1607)return g.sE(l,!1,null);if(o==197)return o=new h.Ta(l.description),l.B()||o.ad(l,!1),o;if(h.aa.yd(o)){if(o=new h.de(l.description),!l.B()&&!l.BG()){var r=new h.Sa;l.To(r),o.add(r),l.Po(r),o.add(r)}return o}if(h.aa.Rn(o))return null;throw h.i.N()},g.sE=function(l,o,r){r!=null&&(r[0]=!1);var n=null;if(o||(n=new h.de(l.description)),!l.B()){var a=new h.ia(0);a.Jb(2*l.da());for(var c=0,p=l.da();c<p;c++)if(0<l.Ja(c)&&!l.Nn(c)){var f=l.Ba(c);a.add(f),f=l.Vc(c)-1,a.add(f)}if(0<a.size){p=new h.Xt,c=l.ub(0),p.sort(a,0,a.size,new k(c)),p=new h.h,c.tc(2*a.get(0),p),f=0;for(var m=1,b=new h.Sa,x=new h.h,T=1,I=a.size;T<I;T++)if(c.tc(2*a.get(T),x),x.qb(p))a.get(f)>a.get(T)?(a.set(f,2147483647),f=T):a.set(T,2147483647),m++;else{if(!(1&m))a.set(f,2147483647);else if(o)return r!=null&&(r[0]=!0),null;p.L(x),f=T,m=1}if(!(1&m))a.set(f,2147483647);else if(o)return r!=null&&(r[0]=!0),null;if(!o)for(a.Vd(0,a.size,function(A,P){return A-P}),T=0,I=a.size;T<I&&a.get(T)!=2147483647;T++)l.ve(a.get(T),b),n.add(b)}}return o?null:n},g}()}(q||(q={})),function(h){var k=function(){function g(){this.yf=new h.ia(0),this.ys=new h.ia(0),this.EH=1,this.Es=NaN}return g.prototype.sort=function(l,o,r,n){if(32>r-o)n.nr(o,r,l);else{var a=!0;try{for(var c=1/0,p=-1/0,f=o;f<r;f++){var m=n.$p(l.get(f));m<c&&(c=m),m>p&&(p=m)}if(this.reset(r-o,c,p,r-o)){for(f=o;f<r;f++){var b=l.get(f);m=n.$p(b);var x=this.zF(m);this.yf.set(x,this.yf.get(x)+1),this.ys.write(f-o,b)}var T=this.yf.get(0);this.yf.set(0,0),f=1;for(var I=this.yf.size;f<I;f++){var A=this.yf.get(f);this.yf.set(f,T),T+=A}for(f=o;f<r;f++){b=this.ys.read(f-o),m=n.$p(b),x=this.zF(m);var P=this.yf.get(x);l.set(P+o,b),this.yf.set(x,P+1)}a=!1}}catch{this.yf.resize(0),this.ys.resize(0)}if(a)n.nr(o,r,l);else{for(f=r=0,I=this.yf.size;f<I;f++)a=r,(r=this.yf.get(f))>a&&n.nr(o+a,o+r,l);100<this.yf.size&&(this.yf.resize(0),this.ys.resize(0))}}},g.prototype.reset=function(l,o,r,n){return!(2>l||r==o)&&(l=Math.min(g.hL,l),this.yf.Jb(l),this.yf.resize(l),this.yf.Wj(0,0,this.yf.size),this.EH=o,this.ys.resize(n),this.Es=(r-o)/(l-1),!0)},g.prototype.zF=function(l){return h.O.truncate((l-this.EH)/this.Es)},g.hL=65536,g}();h.Xt=k}(q||(q={})),function(h){var k,g;(g=k||(k={}))[g.enum_line=1]="enum_line",g[g.enum_arc=2]="enum_arc",g[g.enum_dummy=4]="enum_dummy",g[g.enum_concave_dip=8]="enum_concave_dip",g[g.enum_connection=3]="enum_connection";var l=function(){function c(){}return c.Qu=function(p,f,m,b,x,T){var I=new c;return I.Im=new h.h,I.Vm=new h.h,I.aw=new h.h,I.Im.L(p),I.Vm.L(f),I.aw.L(m),I.Co=b,I.qh=x,I.sh=T,I},c.construct=function(p,f,m,b){var x=new c;return x.Im=new h.h,x.Vm=new h.h,x.aw=new h.h,x.Im.L(p),x.Vm.L(f),x.aw.Rc(),x.Co=4,x.qh=m,x.sh=b,x},c}(),o=function(){function c(p,f,m,b,x,T){this.Yv=null,this.ya=0,this.EA=p,this.bI=this.$H=0,this.Ka=f,this.Mj=m,this.vk=b,this.Dq=x,this.Ub=T}return c.prototype.next=function(){for(var p=new h.Sa;;){if(this.ya==this.EA.I())return null;if(this.EA.ve(this.ya,p),this.ya++,!p.B())break}var f=!1;if(this.Yv==null&&(this.$H=p.Lg(),this.bI=p.ih(),this.Yv=a.buffer(p,this.Ka,this.Mj,this.vk,this.Dq,this.Ub),f=!0),this.ya<this.EA.I()){var m=new h.Da;this.Yv.copyTo(m)}else m=this.Yv;if(!f){f=new h.Dd;var b=p.Lg()-this.$H;p=p.ih()-this.bI,f.gg(b,p),m.Oc(f)}return m},c.prototype.La=function(){return 0},c.prototype.qe=function(){},c}(),r=function(){function c(p,f){this.Wa=p,this.ya=0,this.oq=f}return c.prototype.next=function(){var p=this.Wa.X;if(this.ya<p.da()){var f=this.ya;if(this.ya++,!p.Nn(f))for(var m=p.Na(p.Vc(f)-1);this.ya<p.da();){var b=p.Na(p.Ba(this.ya));if(p.Nn(this.ya)||b!=m)break;m=p.Na(p.Vc(this.ya)-1),this.ya++}if(this.ya-f==1)return this.Wa.kE(this.Wa.X,f,this.oq);for((m=new h.Ta(this.Wa.X.description)).addPath(this.Wa.X,f,!0),f+=1;f<this.ya;f++)m.Dr(this.Wa.X,f,0,p.rv(f),!1);return this.Wa.kE(m,0,this.oq)}return null},c.prototype.La=function(){return 0},c.prototype.qe=function(){},c}(),n=function(){function c(p){this.Wa=p,this.ya=0}return c.prototype.next=function(){var p=this.Wa.X;if(this.ya<p.da()){var f=this.ya;for(p.Ir(this.ya),this.ya++;this.ya<p.da()&&!(0<p.Ir(this.ya));)this.ya++;return f==0&&this.ya==p.da()?this.Wa.py(p,0,p.da()):this.Wa.py(p,f,this.ya)}return null},c.prototype.La=function(){return 0},c.prototype.qe=function(){},c}(),a=function(){function c(p){this.Ks=this.lw=this.Ls=this.Id=null,this.Zd=[],this.Ub=p,this.rb=this.Kv=this.JT=this.Ka=this.tA=this.ct=this.qa=0,this.oA=this.vk=-1,this.oq=!0}return c.buffer=function(p,f,m,b,x,T){if(p==null||0>b)throw h.i.N();if(p.B())return new h.Da(p.description);var I=new h.l;return p.xc(I),0<f&&I.W(f,f),(T=new c(T)).Mj=m,T.X=p,T.qa=h.ta.Wd(m,I,!0),T.ct=h.ta.Wd(null,I,!0),T.Ka=f,T.JT=p.getType(),0>=x&&(x=96),T.rb=Math.abs(T.Ka),T.Kv=T.rb!=0?1/T.rb:0,isNaN(b)||b==0?b=1e-5*T.rb:b>.5*T.rb&&(b=.5*T.rb),12>x&&(x=12),(p=Math.abs(f)*(1-Math.cos(Math.PI/x)))>b?b=p:(p=Math.PI/Math.acos(1-b/Math.abs(f)))<x-1&&12>(x=h.O.truncate(p))&&(x=12,b=Math.abs(f)*(1-Math.cos(Math.PI/x))),T.vk=b,T.Dq=x,T.tA=Math.min(T.ct,.25*b),T.lE()},c.prototype.cv=function(){if(this.Id==null)this.Id=[];else if(this.Id.length!==0)return;var p=this.qE();p=h.O.truncate((p+3)/4);var f=.5*Math.PI/p;this.oA=f;for(var m=0;m<4*p;m++)this.Id.push(null);var b=Math.cos(f);f=Math.sin(f);var x=h.h.construct(0,1);for(m=0;m<p;m++)this.Id[m+0*p]=h.h.construct(x.y,-x.x),this.Id[m+1*p]=h.h.construct(-x.x,-x.y),this.Id[m+2*p]=h.h.construct(-x.y,x.x),this.Id[m+3*p]=x,(x=h.h.construct(x.x,x.y)).Bt(b,f)},c.prototype.lE=function(){var p=this.X.getType();if(h.aa.yd(p))return(p=new h.Ta(this.X.description)).oc(this.X,!0),this.X=p,this.lE();if(this.Ka<=this.qa){if(!h.aa.US(p))return new h.Da(this.X.description);if(0>=this.Ka&&(p=new h.l,this.X.A(p),p.R()<=2*-this.Ka||p.ca()<=2*this.Ka))return new h.Da(this.X.description)}switch(this.X.getType()){case 33:return this.PN();case 550:return this.ON();case 1607:return this.RN();case 1736:return this.QN();case 197:return this.LN();default:throw h.i.Qa()}},c.prototype.RN=function(){if(this.EG(this.X)){var p=new h.Sa;this.X.ve(0,p);var f=new h.l;return this.X.A(f),p.Cb(f.sf()),this.Gu(p)}return this.X=this.WV(this.X),p=new r(this,this.oq),h.Gh.local().V(p,this.Mj,this.Ub).next()},c.prototype.QN=function(){if(this.Ka==0)return this.X;var p=h.Yl.local();if(this.cv(),this.X=p.V(this.X,null,!1,this.Ub),0>this.Ka){var f=this.X;return f=this.py(f,0,f.da()),p.V(f,this.Mj,!1,this.Ub)}return this.EG(this.X)?(p=new h.Sa,this.X.ve(0,p),f=new h.l,this.X.A(f),p.Cb(f.sf()),this.Gu(p)):(p=new n(this),h.Gh.local().V(p,this.Mj,this.Ub).next())},c.prototype.py=function(p,f,m){for(var b=new h.Da(p.description);f<m;f++)if(!(1>p.Ja(f))){var x=p.Ir(f),T=new h.l;if(p.Rj(f,T),0<this.Ka){if(0<x)if(this.FG(p,f))x=new h.Sa,p.ve(p.Ba(f),x),x.Cb(T.sf()),this.yu(b,x);else{var I=x=new h.Ta(p.description);I=h.Zt.JG(this.X,f)||this.zn(this.X,f,I,!0,1)==2?this.jE(p,f):this.yn(x),b.add(I,!1)}else if(!(T.R()+this.qa<=2*this.rb||T.ca()+this.qa<=2*this.rb||(I=x=new h.Ta(p.description),this.zn(this.X,f,I,!0,1),x.B()))){var A=new h.l;for(A.K(T),A.W(this.rb,this.rb),I.tp(A),T=1,x=(I=this.yn(x)).da();T<x;T++)b.addPath(I,T,!0)}}else if(0<x){if(!(T.R()+this.qa<=2*this.rb||T.ca()+this.qa<=2*this.rb||(I=x=new h.Ta(p.description),this.zn(this.X,f,I,!0,-1),x.B())))for(A=new h.l,I.xc(A),A.W(this.rb,this.rb),I.tp(A),T=1,x=(I=this.yn(x)).da();T<x;T++)b.addPath(I,T,!0)}else for(I=x=new h.Ta(p.description),this.zn(this.X,f,I,!0,-1),T=0,x=(I=this.yn(x)).da();T<x;T++)b.addPath(I,T,!0)}if(0<this.Ka)return 1<b.da()?b=this.yn(b):c.kx(b);if(p=new h.l,b.xc(p),b.B())return c.kx(b);for(p.W(this.rb,this.rb),b.tp(p),b=this.yn(b),p=new h.Da(b.description),T=1,x=b.da();T<x;T++)p.addPath(b,T,!1);return c.kx(p)},c.prototype.PN=function(){return this.Gu(this.X)},c.prototype.Gu=function(p){var f=new h.Da(this.X.description);return this.yu(f,p),this.sX(f)},c.prototype.ON=function(){var p=new o(this.X,this.Ka,this.Mj,this.vk,this.Dq,this.Ub);return h.Gh.local().V(p,this.Mj,this.Ub).next()},c.prototype.LN=function(){var p=new h.Da(this.X.description);if(0>=this.Ka){if(this.Ka==0)p.ad(this.X,!1);else{var f=new h.Fh;this.X.bn(f),f.W(this.Ka,this.Ka),p.ad(f,!1)}return p}return p.ad(this.X,!1),this.X=p,this.jE(p,0)},c.prototype.jE=function(p,f){this.cv();var m=new h.Da(p.description),b=new h.h,x=new h.h,T=new h.h,I=new h.h,A=new h.h,P=new h.h,j=new h.h,D=new h.h,F=p.Ja(f),N=p.Ba(f),z=0;for(f=p.Ja(f);z<f;z++){if(p.D(N+z,x),p.D(N+(z+1)%F,I),p.D(N+(z+2)%F,P),j.uc(I,x),j.length()==0||(j.Hv(),j.normalize(),j.scale(this.rb),b.add(j,x),T.add(j,I),z==0?m.Lt(b):m.Ci(b),m.Ci(T),D.uc(P,I),D.length()==0))throw h.i.Qa();D.Hv(),D.normalize(),D.scale(this.rb),A.add(D,I),this.GD(m,I,T,A,!1)}return c.kx(m)},c.prototype.kE=function(p,f,m){if(this.cv(),1>p.Ja(f))return null;if(this.FG(p,f)&&0<this.Ka){m=new h.Sa,p.ve(p.Ba(f),m);var b=new h.l;return p.Rj(f,b),m.Cb(b.sf()),this.Gu(m)}if(b=new h.Ta(p.description),p.Nn(f))this.zn(p,f,b,m,1),this.zn(p,f,b,m,-1);else{var x=new h.Ta(p.description);x.addPath(p,f,!1),x.Dr(p,f,0,p.rv(f),!1),this.zn(x,0,b,m,1)}return this.yn(b)},c.prototype.Xq=function(){if(this.Ys++,this.Ys%1024==0&&this.Ub!=null&&!this.Ub.progress(-1,-1))throw h.i.fu("user_canceled")},c.prototype.yn=function(p){return h.Fg.Mk(p,this.ct,!0,!0,this.Ub)},c.prototype.qE=function(){if(this.vk==0)return this.Dq;var p=1-this.vk*Math.abs(this.Kv);return 4>(p=-1>p?4:2*Math.PI/Math.acos(p)+.5)?p=4:p>this.Dq&&(p=this.Dq),h.O.truncate(p)},c.prototype.GD=function(p,f,m,b,x){this.cv();var T=new h.h;T.uc(m,f),T.scale(this.Kv);var I=new h.h;I.uc(b,f),I.scale(this.Kv),0>(T=Math.atan2(T.y,T.x)/this.oA)&&(T=this.Id.length+T),T=this.Id.length-T,0>(I=Math.atan2(I.y,I.x)/this.oA)&&(I=this.Id.length+I),(I=this.Id.length-I)<T&&(I+=this.Id.length);var A=h.O.truncate(I);I=h.O.truncate(Math.ceil(T)),(T=new h.h).L(this.Id[I%this.Id.length]),T.Ct(this.rb,f);var P=10*this.qa;for(T.sub(m),T.length()<P&&(I+=1),T.L(this.Id[A%this.Id.length]),T.Ct(this.rb,f),T.sub(b),T.length()<P&&--A,m=A-I,m++,A=0,I%=this.Id.length;A<m;A++,I=(I+1)%this.Id.length)T.L(this.Id[I]),T.Ct(this.rb,f),p.Ci(T),this.Xq();x&&p.Ci(b)},c.prototype.zn=function(p,f,m,b,x){var T=new h.gd,I=T.mN(p,f);if(T.Gp(this.tA,!1,!1),2>T.I(I))return 0>x||(x=p,T=new h.Sa,x.ve(x.Ba(f),T),this.yu(m,T)),1;var A=T.Na(T.Xa(T.Ob(I))),P=new h.Dd;if(P.gg(-A.x,-A.y),T.Oc(P),b&&(this.tQ(T,I,x),2>T.I(I)))return 0>x||(x=p,T=new h.Sa,x.ve(x.Ba(f),T),this.yu(m,T)),1;this.Zd.length=0;var j=T.Ob(I);f=T.Xa(j);var D=x==1?T.Ma(f):T.U(f);p=x==1?T.U(f):T.Ma(f);var F=!0;b=new h.h,I=new h.h;var N=new h.h,z=new h.h,W=new h.h,H=new h.h,Y=new h.h,Z=new h.h,se=new h.h,ce=new h.h,ue=this.rb;j=T.Ja(j);for(var $e=0;$e<j;$e++)T.D(p,I),F&&(T.D(f,b),T.D(D,N),Z.uc(b,N),Z.normalize(),ce.MG(Z),ce.scale(ue),z.add(ce,b)),Y.uc(I,b),Y.normalize(),se.MG(Y),se.scale(ue),W.add(b,se),D=Z.wi(Y),F=Z.Qh(Y),0>D||0>F&&D==0?this.Zd.push(l.Qu(z,W,b,2,this.Zd.length+1,this.Zd.length-1)):z.qb(W)||(this.Zd.push(l.construct(z,b,this.Zd.length+1,this.Zd.length-1,"dummy")),this.Zd.push(l.construct(b,W,this.Zd.length+1,this.Zd.length-1,"dummy"))),H.add(I,se),this.Zd.push(l.Qu(W,H,b,1,this.Zd.length+1,this.Zd.length-1)),z.L(H),ce.L(se),N.L(b),b.L(I),Z.L(Y),D=f,f=p,F=!1,p=x==1?T.U(f):T.Ma(f);return this.Zd[this.Zd.length-1].qh=0,this.Zd[0].sh=this.Zd.length-1,this.YV(m),P.gg(A.x,A.y),m.YD(P,m.da()-1),1},c.prototype.YV=function(p){for(var f=this.zO(),m=!0,b=f+1,x=f;b!=f;x=b){var T=this.Zd[x];b=T.qh!=-1?T.qh:(x+1)%this.Zd.length,T.Co!=0&&(m&&p.Lt(T.Im),T.Co==2?this.GD(p,T.aw,T.Im,T.Vm,!0):p.Ci(T.Vm),m=!1)}},c.prototype.zO=function(){this.Ks==null&&(this.Ks=[null,null,null,null,null,null,null,null,null]);for(var p=0,f=0,m=this.Zd.length;f<m;){var b=this.Zd[f];if(3&b.Co){p=f;break}f=b.qh}for(m=p+1,f=p;m!=p;f=m){m=(b=this.Zd[f]).qh;for(var x=1,T=null;m!=f&&!(3&(T=this.Zd[m]).Co);)m=T.qh,x++;x!=1&&(b.Co&T.Co)==1&&(this.Ls==null&&(this.Ls=new h.yb,this.lw=new h.yb),this.Ls.Dc(b.Im),this.Ls.Qc(b.Vm),this.lw.Dc(T.Im),this.lw.Qc(T.Vm),this.Ls.Ea(this.lw,this.Ks,null,null,this.ct)==1&&(b.Vm.L(this.Ks[0]),T.Im.L(this.Ks[0]),b.qh=m,T.sh=f))}return p},c.prototype.Fv=function(p,f,m){var b=new h.h;if(b.uc(m,p),m=b.length(),0<(m=this.rb*this.rb-m*m*.25)){m=Math.sqrt(m),b.normalize(),b.ar();var x=new h.h;if(x.uc(f,p),x.Qh(b)+m>=this.rb)return!0}return!1},c.prototype.tQ=function(p,f,m){for(var b=0;1>b;b++){var x=!1,T=p.Ob(f),I=p.Ja(T);if(I==0)break;var A=I;if(3>I)break;!p.dc(T)&&(A=I-1),T=p.Xa(T),I=0<m?p.Ma(T):p.U(T);for(var P=0<m?p.U(T):p.Ma(T),j=I,D=!0,F=new h.h,N=new h.h,z=new h.h,W=new h.h,H=new h.h,Y=h.h.construct(0,0),Z=new h.h,se=new h.h,ce=new h.h,ue=new h.h,$e=this.rb,fe=0,ze=0;ze<A&&(p.D(P,N),D&&(p.D(T,F),p.D(I,z),j=I),se.uc(F,z),se.normalize(),Z.uc(N,F),Z.normalize(),j!=P);){var Re=se.wi(Z),xe=se.Qh(Z),gt=!0;if(0>Re||0>xe&&Re==0||!this.Fv(z,F,N)||(Y.L(N),gt=!1,++fe,x=!0),gt){if(0<fe)for(;(Re=0<m?p.Ma(j):p.U(j))!=T;){if(p.D(Re,W),!this.Fv(W,z,Y)){Re!=P&&this.Fv(W,z,N)&&this.Fv(W,F,N)&&(z.L(W),j=Re,gt=!1,++fe);break}z.L(W),j=Re,gt=!1,++fe}if(!gt)continue;if(0<fe){for(j=0<m?p.Ma(I):p.U(I),D=1;D<fe;D++)gt=0<m?p.Ma(j):p.U(j),p.pd(j,!0),j=gt;ce.uc(F,z),fe=$e*$e-(fe=ce.length())*fe*.25,$e-(fe=Math.sqrt(fe))>.5*this.vk?(H.add(z,F),H.scale(.5),ce.normalize(),ce.ar(),ue.L(ce),ue.scale($e-fe),H.add(ue),p.mf(I,H)):p.pd(I,!0),fe=0}z.L(F),j=T}F.L(N),I=T,T=P,P=0<m?p.U(T):p.Ma(T),ze++,D=!1}if(0<fe){for(j=0<m?p.Ma(I):p.U(I),D=1;D<fe;D++)gt=0<m?p.Ma(j):p.U(j),p.pd(j,!0),j=gt;H.add(z,F),H.scale(.5),ce.uc(F,z),fe=$e*$e-(fe=ce.length())*fe*.25,fe=Math.sqrt(fe),ce.normalize(),ce.ar(),ue.L(ce),ue.scale($e-fe),H.add(ue),p.mf(I,H)}if(p.Gp(this.tA,!1,!1),!x)break}},c.prototype.FG=function(p,f){if(p.Ja(f)==1)return!0;var m=new h.l;return p.Rj(f,m),Math.max(m.R(),m.ca())<.5*this.vk},c.prototype.EG=function(p){var f=new h.l;return p.A(f),Math.max(f.R(),f.ca())<.5*this.vk},c.prototype.WV=function(p){for(var f=0,m=0,b=(p=h.EC.local().V(p,.25*this.vk,!1,this.Ub)).da();m<b;m++)f=Math.max(p.Ja(m),f);return 32>f?(this.oq=!1,p):(this.oq=!0,h.Fg.Mk(p,this.ct,!1,!0,this.Ub))},c.prototype.yu=function(p,f){if(f=f.D(),this.Id!=null&&this.Id.length!==0){var m=new h.h;m.L(this.Id[0]),m.Ct(this.rb,f),p.Lt(m);for(var b=1,x=this.Id.length;b<x;b++)m.L(this.Id[b]),m.Ct(this.rb,f),p.Ci(m)}else{b=this.qE(),m=h.O.truncate((b+3)/4),b=.5*Math.PI/m,x=Math.cos(b);for(var T=Math.sin(b),I=new h.h,A=3;0<=A;A--){switch(I.ma(0,this.rb),A){case 0:for(b=0;b<m;b++)p.yj(I.x+f.x,I.y+f.y),I.Bt(x,T);break;case 1:for(b=0;b<m;b++)p.yj(-I.y+f.x,I.x+f.y),I.Bt(x,T);break;case 2:for(b=0;b<m;b++)p.yj(-I.x+f.x,-I.y+f.y),I.Bt(x,T);break;default:for(p.sx(I.y+f.x,-I.x+f.y),b=1;b<m;b++)I.Bt(x,T),p.yj(I.y+f.x,-I.x+f.y)}this.Xq()}}},c.kx=function(p){return p.Ch(1,0),p},c.prototype.sX=function(p){return p.Ch(2,this.qa),p.fm(),p},c}();h.HK=a}(q||(q={})),function(h){var k=function(){function g(l){this.Ca=l,this.g=new h.gd,this.dd=new h.ia(0)}return g.prototype.Lh=function(l,o,r){switch(o){case 0:if(l.v<r&&l.C<=r)break;return l.v>=r?1:-1;case 1:if(l.G<r&&l.H<=r)break;return l.G>=r?1:-1;case 2:if(l.v>=r&&l.C>r)break;return l.C<=r?1:-1;case 3:if(!(l.G>=r&&l.H>r))return l.H<=r?1:-1}return 0},g.prototype.Ay=function(l,o){return l.getType()==1736?this.Cy(l,o):this.Dy(l)},g.prototype.Cy=function(l,o){if(this.Ca.R()==0||this.Ca.ca()==0)return l.Ia();var r=new h.l;l.xc(r),this.X=this.g.Ib(l);var n=new h.l,a=new h.l,c=new h.h,p=new h.h,f=[0,0,0,0,0,0,0,0,0],m=[0,0,0,0,0,0,0,0,0];new h.ig;var b=new h.yb,x=new h.ia(0);x.Jb(Math.min(100,l.I()));for(var T=!1,I=0;!T&&4>I;I++){var A=!1,P=(1&I)!=0,j=0;switch(I){case 0:j=this.Ca.v,A=r.v<=j&&r.C>=j;break;case 1:j=this.Ca.G,A=r.G<=j&&r.H>=j;break;case 2:j=this.Ca.C,A=r.v<=j&&r.C>=j;break;case 3:j=this.Ca.H,A=r.G<=j&&r.H>=j}if(A)for(T=!0,A=this.g.Ob(this.X);A!=-1;){var D=-1,F=-1,N=this.g.Xa(A),z=N;do{var W=this.g.bc(z);W==null&&(W=b,this.g.D(z,c),W.Dc(c),this.g.D(this.g.U(z),p),W.Qc(p)),W.A(n);var H=this.Lh(n,I,j),Y=0,Z=-1;if(H==-1){Y=0<(W=W.cq(P,j,f,m))?this.g.Ul(z,m,W):0,Y+=1;var se=z,ce=this.g.U(se);for(W=0;W<Y;W++){if(this.g.D(se,c),this.g.D(ce,p),(Z=this.g.bc(se))==null&&((Z=b).Dc(c),Z.Qc(p)),Z.A(a),(Z=this.Lh(a,I,j))==-1){if(P)(Z=Math.abs(c.y-j))<(ue=Math.abs(p.y-j))?(c.y=j,this.g.mf(se,c)):(p.y=j,this.g.mf(ce,p));else{Z=Math.abs(c.x-j);var ue=Math.abs(p.x-j);Z<ue?(c.x=j,this.g.mf(se,c)):(p.x=j,this.g.mf(ce,p))}(Z=this.g.bc(se))==null&&((Z=b).Dc(c),Z.Qc(p)),Z.A(a),Z=this.Lh(a,I,j)}ue=D,D=Z,F==-1&&(F=D),ue==0&&D==1||ue==1&&D==0||ue!=0||D!=0||x.add(se),D==1&&(T=!1),Z=se=ce,ce=this.g.U(ce)}}Y==0&&(ue=D,D=H,F==-1&&(F=D),ue==0&&D==1||ue==1&&D==0||ue!=0||D!=0||x.add(z),D==1&&(T=!1),Z=this.g.U(z)),z=Z}while(z!=N);for(F==0&&D==0&&x.add(N),W=0,D=x.size;W<D;W++)F=x.get(W),this.g.pd(F,!1);x.clear(!1),A=3>this.g.Ja(A)?this.g.Zq(A):this.g.Rb(A)}}return T?l.Ia():(this.FB(),0<o&&this.My(o),this.g.Ne(this.X))},g.prototype.Dy=function(l){var o=new h.l,r=new h.l,n=[0,0,0,0,0,0,0,0,0],a=[0,0,0,0,0,0,0,0,0],c=new h.ig,p=l,f=new h.l;l.xc(f);for(var m=0;4>m;m++){var b=!1,x=(1&m)!=0,T=0;switch(m){case 0:T=this.Ca.v,b=f.v<=T&&f.C>=T;break;case 1:T=this.Ca.G,b=f.G<=T&&f.H>=T;break;case 2:T=this.Ca.C,b=f.v<=T&&f.C>=T;break;case 3:T=this.Ca.H,b=f.G<=T&&f.H>=T}if(b){b=p,p=l.Ia(),(b=b.Ga()).Zi();for(var I,A=new h.h;b.$a();)for(var P,j=!0;b.Ha();){var D=b.ha();D.A(o);var F=this.Lh(o,m,T);if(F==-1){if(0<(F=D.cq(x,T,n,a))){var N=0;I=D.ac();for(var z=0;z<=F;z++)if(N!=(P=z<F?a[z]:1)){D.ah(N,P,c);var W=c.get();W.Dc(I),z<F&&(x?(A.x=n[z],A.y=T):(A.x=T,A.y=n[z]),W.Qc(A)),W.A(r);var H=this.Lh(r,m,T);if(H==-1){if(I=W.ac(),N=W.wc(),x)(H=Math.abs(I.y-T))<(Y=Math.abs(N.y-T))?(I.y=T,W.Dc(I)):(N.y=T,W.Qc(N));else{H=Math.abs(I.x-T);var Y=Math.abs(N.x-T);H<Y?(I.x=T,W.Dc(I)):(N.x=T,W.Qc(N))}W.A(r),H=this.Lh(r,m,T)}I=W.wc(),N=P,(P=H)==1?(p.oc(W,j),j=!1):j=!0}}}else(P=F)==1?(p.oc(D,j),j=!1):j=!0}}}return p},g.prototype.FB=function(){this.ji=-1,this.Vl(!1,this.Ca.v),this.Vl(!1,this.Ca.C),this.Vl(!0,this.Ca.G),this.Vl(!0,this.Ca.H),this.dd.resize(0),this.dd.Jb(100),this.ji=this.g.Gd();for(var l=new h.h,o=this.g.Ob(this.X);o!=-1;o=this.g.Rb(o))for(var r=this.g.Xa(o),n=0,a=this.g.Ja(o);n<a;n++,r=this.g.U(r))this.g.D(r,l),(this.Ca.v==l.x||this.Ca.C==l.x||this.Ca.G==l.y||this.Ca.H==l.y)&&(this.g.Ra(r,this.ji,this.dd.size),this.dd.add(r));this.Nl(!1,this.Ca.v),this.Nl(!1,this.Ca.C),this.Nl(!0,this.Ca.G),this.Nl(!0,this.Ca.H),this.Ty()},g.prototype.My=function(l){for(var o=new h.h,r=new h.h,n=h.O.lg(2048,0),a=this.g.Ob(this.X);a!=-1;a=this.g.Rb(a)){var c=this.g.Xa(a),p=c;do{var f=this.g.U(p);this.g.D(p,o);var m=-1;if(o.x==this.Ca.v?(this.g.D(f,r),r.x==this.Ca.v&&(m=1)):o.x==this.Ca.C&&(this.g.D(f,r),r.x==this.Ca.C&&(m=1)),o.y==this.Ca.G?(this.g.D(f,r),r.y==this.Ca.G&&(m=0)):o.y==this.Ca.H&&(this.g.D(f,r),r.y==this.Ca.H&&(m=0)),m!=-1&&(m=h.h.tb(o,r),!(1>=(m=h.O.truncate(Math.min(Math.ceil(m/l),2048)))))){for(var b=1;b<m;b++)n[b-1]=1*b/m;this.g.Ul(p,n,m-1)}p=f}while(p!=c)}},g.prototype.Vl=function(l,o){var r=this.g.Gd(),n=new h.h,a=new h.ia(0);a.Jb(100);for(var c=this.g.Ob(this.X);c!=-1;c=this.g.Rb(c))for(var p=this.g.Xa(c),f=0,m=this.g.Ja(c);f<m;f++){var b=this.g.U(p);this.g.D(p,n),(l?n.y==o:n.x==o)&&(this.g.D(b,n),(l?n.y==o:n.x==o)&&(this.g.Pa(p,r)!=1&&(a.add(p),this.g.Ra(p,r,1)),this.g.Pa(b,r)!=1&&(a.add(b),this.g.Ra(b,r,1)))),p=b}if(this.g.Td(r),!(3>a.size)){var x=this;a.Vd(0,a.size,function(H,Y){return x.Mh(H,Y)}),r=new h.h,c=new h.h,p=new h.h,c.Rc();var T=-1;f=new h.ia(0),m=new h.ia(0),b=this.g.Gd();for(var I=this.g.Gd(),A=0,P=a.size;A<P;A++){var j=a.get(A);if(this.g.D(j,n),!n.qb(c)){if(T!=-1){for(var D=T;D<A;D++){T=a.get(D);var F=this.g.U(T);j=this.g.Ma(T);var N=!1;0>this.Mh(T,F)&&(this.g.D(F,r),l?r.y==o:r.x==o)&&(f.add(T),N=!0,this.g.Ra(T,I,1)),0>this.Mh(T,j)&&(this.g.D(j,r),l?r.y==o:r.x==o)&&(N||f.add(T),this.g.Ra(T,b,1))}for(D=0,N=f.size;D<N;D++){if(T=f.get(D),j=this.g.Pa(T,b),F=this.g.Pa(T,I),j==1){j=this.g.Ma(T),this.g.D(j,p);var z=[0];if(z[0]=0,!p.qb(n)){var W=h.h.tb(c,p);z[0]=h.h.tb(p,n)/W,z[0]==0?z[0]=2220446049250313e-31:z[0]==1&&(z[0]=.9999999999999998),this.g.Ul(j,z,1),j=this.g.Ma(T),this.g.mf(j,n),m.add(j),this.g.Ra(j,b,1),this.g.Ra(j,I,-1)}}F==1&&(F=this.g.U(T),this.g.D(F,p),(z=[0])[0]=0,p.qb(n)||(W=h.h.tb(c,p),z[0]=h.h.tb(c,n)/W,z[0]==0?z[0]=2220446049250313e-31:z[0]==1&&(z[0]=.9999999999999998),this.g.Ul(T,z,1),j=this.g.U(T),this.g.mf(j,n),m.add(j),this.g.Ra(j,b,-1),this.g.Ra(j,I,1)))}T=f,f=m,(m=T).clear(!1)}T=A,c.L(n)}}this.g.Td(b),this.g.Td(I)}},g.prototype.Nl=function(l,o){var r=new h.h,n=new h.ia(0);n.Jb(100);for(var a=this.g.Gd(),c=0,p=this.dd.size;c<p;c++){var f=this.dd.get(c);if(f!=-1){var m=this.g.U(f);this.g.D(f,r),(l?r.y==o:r.x==o)&&(this.g.D(m,r),(l?r.y==o:r.x==o)&&(this.g.Pa(f,a)!=-2&&(n.add(f),this.g.Ra(f,a,-2)),this.g.Pa(m,a)!=-2&&(n.add(m),this.g.Ra(m,a,-2))))}}if(n.size!=0){var b=this;for(n.Vd(0,n.size,function(Y,Z){return b.Mh(Y,Z)}),c=0,p=n.size;c<p;c++){var x=n.get(c);this.g.Ra(x,a,c)}f=new h.h,(m=new h.h).Rc();var T=-1;for(c=0,p=n.size;c<p;c++)if((x=n.get(c))!=-1&&(this.g.D(x,r),!r.qb(m))){if(T!=-1)for(;;){x=!1;for(var I=1<c-T?c-1:c,A=T;A<I;A++){var P=n.get(A);if(P!=-1){var j=-1,D=this.g.U(P);0>this.Mh(P,D)&&(this.g.D(D,f),l?f.y==o:f.x==o)&&(j=D),D=-1;var F=this.g.Ma(P);if(0>this.Mh(P,F)&&(this.g.D(F,f),l?f.y==o:f.x==o)&&(D=F),j!=-1&&D!=-1)this.Kh(P,n,a),this.g.pd(P,!1),this.Kh(j,n,a),this.g.pd(j,!1),x=!0;else if(j!=-1||D!=-1){for(F=A+1;F<c;F++){var N=n.get(F);if(N!=-1){var z=this.g.U(N),W=-1;0>this.Mh(N,z)&&(this.g.D(z,f),l?f.y==o:f.x==o)&&(W=z),z=this.g.Ma(N);var H=-1;if(0>this.Mh(N,z)&&(this.g.D(z,f),l?f.y==o:f.x==o)&&(H=z),W!=-1&&H!=-1){this.Kh(N,n,a),this.g.pd(N,!1),this.Kh(W,n,a),this.g.pd(W,!1),x=!0;break}if(j!=-1&&H!=-1){this.zt(n,P,j,N,H,a),x=!0;break}if(D!=-1&&W!=-1){this.zt(n,N,W,P,D,a),x=!0;break}}}if(x)break}}}if(!x)break}T=c,m.L(r)}}this.g.Td(a)},g.prototype.Kh=function(l,o,r){r=this.g.Pa(l,r),o.set(r,-1),r=this.g.Pa(l,this.ji),this.dd.set(r,-1),(o=this.g.bd(l))!=-1&&this.g.Xa(o)==l&&(this.g.Jf(o,-1),this.g.Wg(o,-1))},g.prototype.zt=function(l,o,r,n,a,c){this.g.Bc(o,n),this.g.Cc(n,o),this.g.Cc(r,a),this.g.Bc(a,r),this.Kh(n,l,c),this.g.mi(n,!1),this.Kh(a,l,c),this.g.mi(a,!0)},g.prototype.Ty=function(){for(var l=0,o=this.dd.size;l<o;l++){var r=this.dd.get(l);r!=-1&&this.g.aj(r,-1)}for(var n=0,a=0,c=this.g.Ob(this.X);c!=-1;){var p=this.g.Xa(c);if(p==-1||c!=this.g.bd(p)){var f=c;c=this.g.Rb(c),this.g.Jf(f,-1),this.g.$q(f)}else{r=p,f=0;do this.g.aj(r,c),f++,r=this.g.U(r);while(r!=p);2>=f?(r=this.g.Pa(p,this.ji),this.dd.set(r,-1),p=this.g.pd(p,!1),f==2&&(r=this.g.Pa(p,this.ji),this.dd.set(r,-1),this.g.pd(p,!1)),f=c,c=this.g.Rb(c),this.g.Jf(f,-1),this.g.$q(f)):(this.g.cp(c,!1),this.g.Wg(c,this.g.Ma(p)),this.g.Vj(c,f),a+=f,n++,c=this.g.Rb(c))}}for(l=0,o=this.dd.size;l<o;l++)if((r=this.dd.get(l))!=-1&&(c=this.g.bd(r))==-1){c=this.g.vf(this.X,-1),f=0,p=r;do this.g.aj(r,c),f++,r=this.g.U(r);while(r!=p);2>=f?(r=this.g.Pa(p,this.ji),this.dd.set(r,-1),p=this.g.pd(p,!1),f==2&&(0<=(r=this.g.Pa(p,this.ji))&&this.dd.set(r,-1),this.g.pd(p,!1)),f=c,this.g.Jf(f,-1),this.g.$q(f)):(this.g.kn(c,!0),this.g.Vj(c,f),this.g.Jf(c,p),this.g.Wg(c,this.g.Ma(p)),this.g.cp(c,!1),a+=f,n++)}for(this.g.Rl(this.X,n),this.g.Tj(this.X,a),l=0,o=this.g.ld;o!=-1;o=this.g.ue(o))l+=this.g.I(o);this.g.bC(l)},g.By=function(l,o,r){return new g(o).Ay(l,r)},g.clip=function(l,o,r,n){if(l.B())return l;if(o.B())return l.Ia();if((r=l.getType())==33)return n=l.D(),o.contains(n)?l:l.Ia();if(r==197)return n=new h.l,l.A(n),n.Ea(o)?(o=new h.Fh,l.copyTo(o),o.Xo(n),o):l.Ia();var a=new h.l;if(l.xc(a),o.contains(a))return l;if(!o.isIntersecting(a))return l.Ia();if((a=l.Bb)!=null&&(a=a.Fk)!=null){if((a=a.Ro(o))==1){if(r!=1736)throw h.i.Qa();return(l=new h.Da(l.description)).tp(o),l}if(a==0)return l.Ia()}switch(r){case 550:r=null,a=l.I();for(var c=l.ub(0),p=0,f=0;f<a;f++)n=new h.h,c.tc(2*f,n),o.contains(n)||(p==0&&(r=l.Ia()),p<f&&r.Fd(l,p,f),p=f+1);return 0<p&&r.Fd(l,p,a),p==0?l:r;case 1736:case 1607:return g.By(l,o,n);default:throw h.i.Qa()}},g.prototype.Mh=function(l,o){var r=new h.h;return this.g.D(l,r),l=new h.h,this.g.D(o,l),r.compare(l)},g}();h.Ud=k}(q||(q={})),function(h){var k=function(){function g(l,o){this.Ca=l,this.g=new h.gd,this.dd=new h.ia(0),this.nd=o}return g.prototype.Lh=function(l,o,r){switch(o){case 0:if(l.v<r&&l.C<=r)break;return l.v>=r?1:-1;case 1:if(l.G<r&&l.H<=r)break;return l.G>=r?1:-1;case 2:if(l.v>=r&&l.C>r)break;return l.C<=r?1:-1;case 3:if(!(l.G>=r&&l.H>r))return l.H<=r?1:-1}return 0},g.prototype.Ay=function(l,o){return l.getType()==1736?this.Cy(l,o):this.Dy(l)},g.prototype.Cy=function(l,o){if(this.Ca.R()==0||this.Ca.ca()==0)return l.Ia();var r=new h.l;l.xc(r),this.X=this.g.Ib(l);var n=new h.l,a=new h.l,c=new h.h,p=new h.h,f=[0,0,0,0,0,0,0,0,0],m=[0,0,0,0,0,0,0,0,0],b=new h.yb,x=new h.ia(0);x.Jb(256);for(var T=!1,I=0;!T&&4>I;I++){var A=!1,P=(1&I)!=0,j=0;switch(I){case 0:j=this.Ca.v,A=r.v<=j&&r.C>=j;break;case 1:j=this.Ca.G,A=r.G<=j&&r.H>=j;break;case 2:j=this.Ca.C,A=r.v<=j&&r.C>=j;break;case 3:j=this.Ca.H,A=r.G<=j&&r.H>=j}if(A)for(T=!0,A=this.g.Ob(this.X);A!=-1;){var D=!0,F=-1,N=-1,z=this.g.Xa(A),W=z;do{var H=this.g.bc(W);H==null&&(H=b,this.g.D(W,c),H.Dc(c),this.g.D(this.g.U(W),p),H.Qc(p)),H.A(n);var Y=this.Lh(n,I,j),Z=0,se=-1;if(Y==-1){Z=0<(H=H.cq(P,j,f,m))?this.g.LX(W,m,H):0,Z+=1;var ce=W,ue=this.g.U(ce);for(H=0;H<Z;H++){if(this.g.D(ce,c),this.g.D(ue,p),(se=this.g.bc(ce))==null&&((se=b).Dc(c),se.Qc(p)),se.A(a),(se=this.Lh(a,I,j))==-1){if(P)(se=Math.abs(c.y-j))<($e=Math.abs(p.y-j))?(c.y=j,this.g.mf(ce,c)):(p.y=j,this.g.mf(ue,p));else{se=Math.abs(c.x-j);var $e=Math.abs(p.x-j);se<$e?(c.x=j,this.g.mf(ce,c)):(p.x=j,this.g.mf(ue,p))}(se=this.g.bc(ce))==null&&((se=b).Dc(c),se.Qc(p)),se.A(a),se=this.Lh(a,I,j)}$e=F,F=se,N==-1&&(N=F),$e==0&&F==1||$e==1&&F==0||$e!=0||F!=0||x.add(ce),F==1&&(D=T=!1),se=ce=ue,ue=this.g.U(ue)}}if(Z==0&&($e=F,F=Y,N==-1&&(N=F),$e==0&&F==1||$e==1&&F==0||$e!=0||F!=0||x.add(W),F==1&&(D=T=!1),se=this.g.U(W)),W=se,256<=x.size){for(H=1,Y=x.size-1;H<Y;H++)Z=x.get(H),this.g.pd(Z,!1);x.set(1,x.Fc()),x.Bh(2)}}while(W!=z);if(!D)for(N==0&&F==0&&x.add(z),H=0,Y=x.size;H<Y;H++)Z=x.get(H),this.g.pd(Z,!1);x.clear(!1),A=D||this.g.Ja(A)==0?this.g.Zq(A):this.g.Rb(A)}}return T?l.Ia():(this.FB(),0<o&&this.My(o),this.g.Ne(this.X))},g.prototype.Dy=function(l){var o=new h.l,r=new h.l,n=[0,0,0,0,0,0,0,0,0],a=[0,0,0,0,0,0,0,0,0],c=new h.ig,p=l,f=new h.l;l.xc(f);for(var m=new h.h,b=new h.h,x=null,T=null,I=0;4>I;I++){var A=!1,P=(1&I)!=0,j=0;switch(I){case 0:j=this.Ca.v,A=f.v<=j&&f.C>=j;break;case 1:j=this.Ca.G,A=f.G<=j&&f.H>=j;break;case 2:j=this.Ca.C,A=f.v<=j&&f.C>=j;break;case 3:j=this.Ca.H,A=f.G<=j&&f.H>=j}if(A)for(A=p,p=l.Ia(),(A=A.Ga()).Zi();A.$a();)for(var D,F=!0;A.Ha();){var N=A.ha();N.A(o);var z=this.Lh(o,I,j);if(z==-1){if(0<(z=N.cq(P,j,n,a))){var W=0;N.Yp(m);for(var H=0;H<=z;H++)if(W!=(D=H<z?a[H]:1)){N.ah(W,D,c);var Y=c.get();Y.Dc(m),H<z&&(P?(b.x=n[H],b.y=j):(b.x=j,b.y=n[H]),Y.Qc(b)),Y.A(r);var Z=this.Lh(r,I,j);Z==-1&&(x==null&&(x=new h.h),T==null&&(T=new h.h),Y.Yp(x),Y.Tr(T),P?(W=Math.abs(x.y-j))<(Z=Math.abs(T.y-j))?(x.y=j,Y.Dc(x)):(T.y=j,Y.Qc(T)):(W=Math.abs(x.x-j))<(Z=Math.abs(T.x-j))?(x.x=j,Y.Dc(x)):(T.x=j,Y.Qc(T)),Y.A(r),Z=this.Lh(r,I,j)),Y.Tr(m),W=D,(D=Z)==1?(p.oc(Y,F),F=!1):F=!0}}}else(D=z)==1?(p.oc(N,F),F=!1):F=!0}}return p},g.prototype.FB=function(){this.ji=-1,this.Vl(!1,this.Ca.v),this.Vl(!1,this.Ca.C),this.Vl(!0,this.Ca.G),this.Vl(!0,this.Ca.H),this.dd.resize(0),this.dd.Jb(100),this.ji=this.g.Gd();for(var l=new h.h,o=this.g.Ob(this.X);o!=-1;o=this.g.Rb(o))for(var r=this.g.Xa(o),n=0,a=this.g.Ja(o);n<a;n++,r=this.g.U(r))this.g.D(r,l),(this.Ca.v==l.x||this.Ca.C==l.x||this.Ca.G==l.y||this.Ca.H==l.y)&&(this.g.Ra(r,this.ji,this.dd.size),this.dd.add(r));this.Nl(!1,this.Ca.v),this.Nl(!1,this.Ca.C),this.Nl(!0,this.Ca.G),this.Nl(!0,this.Ca.H),this.Ty()},g.prototype.My=function(l){for(var o=new h.h,r=new h.h,n=null,a=null,c=h.O.lg(2048,0),p=this.g.Ob(this.X);p!=-1;p=this.g.Rb(p)){var f=this.g.Xa(p),m=f;do{var b=this.g.U(m);this.g.D(m,o);var x=-1;if(o.x==this.Ca.v?(this.g.D(b,r),r.x==this.Ca.v&&(x=1)):o.x==this.Ca.C&&(this.g.D(b,r),r.x==this.Ca.C&&(x=1)),o.y==this.Ca.G?(this.g.D(b,r),r.y==this.Ca.G&&(x=0)):o.y==this.Ca.H&&(this.g.D(b,r),r.y==this.Ca.H&&(x=0)),x!=-1){if(n==null&&(n=new h.h),a==null&&(a=new h.h),n.L(o),a.ma(0,0),x==0){var T=o.x-this.Ca.v;a.x=h.lc.sign(r.x-o.x),n.x=l*h.lc.Cn(Math.floor(Math.abs(T/l)),T)+this.Ca.v,0>n.x&&(n.x+=l)}else T=o.y-this.Ca.G,a.y=h.lc.sign(r.y-o.y),n.y=l*h.lc.Cn(Math.floor(Math.abs(T/l)),T)+this.Ca.G,0>n.y&&(n.y+=l);T=x!=0?r.y-o.y:r.x-o.x;var I=Math.abs(T);if(65536<I/l)throw h.i.fa("internal error");if(0<I){I=h.O.truncate(I/l)+2,c.length<I&&(c=h.O.lg(I));for(var A=I=0;;A++){var P=new h.h;if(P.x=n.x+a.x*A*l,P.y=n.y+a.y*A*l,1<=(P=(x!=0?P.y-o.y:P.x-o.x)/T))break;0>=P||(c[I]=P,I++)}I!=0&&this.g.Ul(m,c,I)}}m=b}while(m!=f)}},g.prototype.Vl=function(l,o){for(var r=-1,n=new h.h,a=null,c=this.g.Ob(this.X);c!=-1;c=this.g.Rb(c))for(var p=this.g.Xa(c),f=0,m=this.g.Ja(c);f<m;f++){var b=this.g.U(p);this.g.D(p,n),(l?n.y==o:n.x==o)&&(this.g.D(b,n),(l?n.y==o:n.x==o)&&(r==-1&&(r=this.g.Gd()),a==null&&(a=new h.ia(0)).Jb(100),this.g.Pa(p,r)!=1&&(a.add(p),this.g.Ra(p,r,1)),this.g.Pa(b,r)!=1&&(a.add(b),this.g.Ra(b,r,1)))),p=b}if(r!=-1&&this.g.Td(r),!(a==null||3>a.size)){var x=this;a.Vd(0,a.size,function(H,Y){return x.Mh(H,Y)}),r=new h.h,c=new h.h,p=new h.h,c.Rc();var T=-1;f=new h.ia(0),m=new h.ia(0),b=null;for(var I=this.g.Gd(),A=this.g.Gd(),P=0,j=a.size;P<j;P++){var D=a.get(P);if(this.g.D(D,n),!n.qb(c)){if(T!=-1){for(var F=T;F<P;F++){T=a.get(F);var N=this.g.U(T);D=this.g.Ma(T);var z=!1;this.g.D(N,r),0>c.compare(r)&&(l?r.y==o:r.x==o)&&(f.add(T),z=!0,this.g.Ra(T,A,1)),this.g.D(D,r),0>c.compare(r)&&(l?r.y==o:r.x==o)&&(z||f.add(T),this.g.Ra(T,I,1))}for(F=0,z=f.size;F<z;F++){if(T=f.get(F),D=this.g.Pa(T,I),N=this.g.Pa(T,A),D==1&&(D=this.g.Ma(T),this.g.D(D,p),!p.qb(n))){b==null&&(b=[]);var W=h.h.tb(c,p);b[0]=h.h.tb(p,n)/W,b[0]==0?b[0]=2220446049250313e-31:b[0]==1&&(b[0]=.9999999999999998),this.g.Ul(D,b,1),D=this.g.Ma(T),this.g.mf(D,n),m.add(D),this.g.Ra(D,I,1),this.g.Ra(D,A,-1)}N==1&&(N=this.g.U(T),this.g.D(N,p),p.qb(n)||(b==null&&(b=[]),W=h.h.tb(c,p),b[0]=h.h.tb(c,n)/W,b[0]==0?b[0]=2220446049250313e-31:b[0]==1&&(b[0]=.9999999999999998),this.g.Ul(T,b,1),D=this.g.U(T),this.g.mf(D,n),m.add(D),this.g.Ra(D,I,-1),this.g.Ra(D,A,1)))}T=f,f=m,(m=T).clear(!1)}T=P,c.L(n)}}this.g.Td(I),this.g.Td(A)}},g.prototype.Nl=function(l,o){for(var r=new h.h,n=null,a=-1,c=0,p=this.dd.size;c<p;c++){var f=this.dd.get(c);if(f!=-1){var m=this.g.U(f);this.g.D(f,r),(l?r.y==o:r.x==o)&&(this.g.D(m,r),(l?r.y==o:r.x==o)&&(a==-1&&(a=this.g.Gd()),n==null&&(n=new h.ia(0)).Jb(100),this.g.Pa(f,a)!=-2&&(n.add(f),this.g.Ra(f,a,-2)),this.g.Pa(m,a)!=-2&&(n.add(m),this.g.Ra(m,a,-2))))}}if(n==null)a!=-1&&this.g.Td(a);else{var b=this;for(n.Vd(0,n.size,function(Y,Z){return b.Mh(Y,Z)}),c=0,p=n.size;c<p;c++){var x=n.get(c);this.g.Ra(x,a,c)}f=new h.h,(m=new h.h).Rc();var T=-1;for(c=0,p=n.size;c<p;c++)if((x=n.get(c))!=-1&&(this.g.D(x,r),!r.qb(m))){if(T!=-1)for(;;){x=!1;for(var I=1<c-T?c-1:c,A=T;A<I;A++){var P=n.get(A);if(P!=-1){var j=-1,D=this.g.U(P);this.g.D(D,f),0>m.compare(f)&&(l?f.y==o:f.x==o)&&(j=D),D=-1;var F=this.g.Ma(P);if(this.g.D(F,f),0>m.compare(f)&&(l?f.y==o:f.x==o)&&(D=F),j!=-1&&D!=-1)this.Kh(P,n,a),this.g.pd(P,!1),this.Kh(j,n,a),this.g.pd(j,!1),x=!0;else if(j!=-1||D!=-1){for(F=A+1;F<c;F++){var N=n.get(F);if(N!=-1){var z=this.g.U(N),W=-1;this.g.D(z,f),0>m.compare(f)&&(l?f.y==o:f.x==o)&&(W=z),z=this.g.Ma(N);var H=-1;if(this.g.D(z,f),0>m.compare(f)&&(l?f.y==o:f.x==o)&&(H=z),W!=-1&&H!=-1){this.Kh(N,n,a),this.g.pd(N,!1),this.Kh(W,n,a),this.g.pd(W,!1),x=!0;break}if(j!=-1&&H!=-1){this.zt(n,P,j,N,H,a),x=!0;break}if(D!=-1&&W!=-1){this.zt(n,N,W,P,D,a),x=!0;break}}}if(x)break}}}if(!x)break}T=c,m.L(r)}this.g.Td(a)}},g.prototype.Kh=function(l,o,r){r=this.g.Pa(l,r),o.set(r,-1),r=this.g.Pa(l,this.ji),this.dd.set(r,-1),(o=this.g.bd(l))!=-1&&this.g.Xa(o)==l&&(this.g.Jf(o,-1),this.g.Wg(o,-1))},g.prototype.zt=function(l,o,r,n,a,c){this.g.Bc(o,n),this.g.Cc(n,o),this.g.Cc(r,a),this.g.Bc(a,r),this.Kh(n,l,c),this.g.mi(n,!1),this.Kh(a,l,c),this.g.mi(a,!0)},g.prototype.Ty=function(){for(var l=0,o=this.dd.size;l<o;l++){var r=this.dd.get(l);r!=-1&&this.g.aj(r,-1)}for(var n=0,a=0,c=this.g.Ob(this.X);c!=-1;){var p=this.g.Xa(c);if(p==-1||c!=this.g.bd(p)){var f=c;c=this.g.Rb(c),this.g.Jf(f,-1),this.g.$q(f)}else{r=p,f=0;do this.g.aj(r,c),f++,r=this.g.U(r);while(r!=p);this.g.cp(c,!1),this.g.Wg(c,this.g.Ma(p)),this.g.Vj(c,f),a+=f,n++,c=this.g.Rb(c)}}for(l=0,o=this.dd.size;l<o;l++)if((r=this.dd.get(l))!=-1&&(c=this.g.bd(r))==-1){c=this.g.vf(this.X,-1),f=0,p=r;do this.g.aj(r,c),f++,r=this.g.U(r);while(r!=p);2>=f?(r=this.g.Pa(p,this.ji),this.dd.set(r,-1),p=this.g.pd(p,!1),f==2&&(0<=(r=this.g.Pa(p,this.ji))&&this.dd.set(r,-1),this.g.pd(p,!1)),f=c,this.g.Jf(f,-1),this.g.$q(f)):(this.g.kn(c,!0),this.g.Vj(c,f),this.g.Jf(c,p),this.g.Wg(c,this.g.Ma(p)),this.g.cp(c,!1),a+=f,n++)}for(this.g.Rl(this.X,n),this.g.Tj(this.X,a),l=0,o=this.g.ld;o!=-1;o=this.g.ue(o))l+=this.g.I(o);this.g.bC(l)},g.By=function(l,o,r,n){return new g(o,n).Ay(l,r)},g.clip=function(l,o,r,n,a){return g.Nu(l,o,null,r,n,a)},g.Nu=function(l,o,r,n,a,c){var p=l.getType();if(p==33)return a=l.D(),o.contains(a)?l:l.Ia();if(p==197)return a=new h.l,l.A(a),a.Ea(o)?(o=new h.Fh,l.copyTo(o),o.Xo(a),o):l.Ia();if(l.B())return l;if(o.B())return l.Ia();var f=new h.l;if(l.xc(f),o.contains(f))return l;if(!o.isIntersecting(f))return l.Ia();if((r!=null||isNaN(n))&&h.ta.ty(r,o,!1),!h.aa.xj(p))throw h.i.N();if((r=l.Bb)!=null&&(r=r.Fk)!=null){if((r=r.Ro(o))==1){if(p!=1736)throw h.i.fa("internal error");return(l=new h.Da(l.description)).tp(o),l}if(r==0)return l.Ia()}switch(p){case 550:for(c=null,p=l.I(),r=l.ub(0),n=0,a=new h.h,f=0;f<p;f++)r.tc(2*f,a),o.contains(a)||(n==0&&(c=l.Ia()),n<f&&c.Fd(l,n,f),n=f+1);return 0<n&&c.Fd(l,n,p),n==0?l:c;case 1736:case 1607:return g.By(l,o,a,c);default:throw h.i.fa("internal error")}},g.prototype.Mh=function(l,o){var r=new h.h;return this.g.D(l,r),l=new h.h,this.g.D(o,l),r.compare(l)},g}();h.ri=k}(q||(q={})),function(h){var k=new h.h,g=function(){function o(r,n,a,c,p){this.Pm=new h.h,this.Dk=new h.h,this.Pi=new h.h,this.g=r,this.Aw=a,this.no=c,this.Pm=n,this.yl=p,this.Dk.Rc(),this.Pi.Rc()}return o.prototype.xE=function(r){this.g.D(r,this.Dk),r=h.O.truncate((this.Dk.x-this.Pm.x)*this.no+.5);var n=h.O.truncate((this.Dk.y-this.Pm.y)*this.no+.5);return l.jG(r,n)},o.prototype.jz=function(r){return this.g.Pa(r,this.yl)},o.prototype.Py=function(r,n){return this.g.D(r,this.Dk),this.g.D(n,this.Pi),l.Cv(this.Dk.x,this.Dk.y,this.Pi.x,this.Pi.y,this.Aw)},o}();h.sY=function(){};var l=function(){function o(){this.Pm=new h.h,this.pq=[0,0,0,0],this.xs=[0,0,0,0],this.qo=this.yl=-1}return o.iQ=function(r,n){var a=new o;return a.g=r,a.qa=n,a.Aw=n*n,a.$v=2*n,a.no=1/a.$v,a.BO()},o.Cv=function(r,n,a,c,p){return(r-=a)*r+(n-=c)*n<=p},o.jG=function(r,n){return h.O.Th(n,h.O.Th(r))},o.prototype.DO=function(r,n){this.g.Gc(r,k);for(var a=(k.y-this.Pm.y)*this.no,c=h.O.truncate((k.x-this.Pm.x)*this.no),p=h.O.truncate(a),f=a=0;1>=f;f+=1)for(var m=0;1>=m;m+=1){var b=o.jG(c+f,p+m),x=this.xl.rR(b);x!=-1&&(this.pq[a]=x,this.xs[a]=b,a++)}for(c=a-1;1<=c;c--)for(x=this.pq[c],p=c-1;0<=p;p--)if(x==this.pq[p]){this.xs[p]=-1,c!=--a&&(this.xs[c]=this.xs[a],this.pq[c]=this.pq[a]);break}for(p=0;p<a;p++)this.EO(r,this.xs[p],k,this.pq[p],n)},o.prototype.EO=function(r,n,a,c,p){for(var f=new h.h;c!=-1;c=this.xl.ER(c)){var m=this.xl.ja(c);r==m||n!=-1&&this.g.Pa(m,this.yl)!=n||(this.g.Gc(m,f),o.Cv(a.x,a.y,f.x,f.y,this.Aw)&&p.add(c))}},o.prototype.Xm=function(r,n,a){var c=this.g.Pa(r,this.qo),p=this.g.Pa(n,this.qo);return c==-1&&(c=this.zd.Ph(),this.zd.addElement(c,r),this.g.Ra(r,this.qo,c)),p==-1?this.zd.addElement(c,n):this.zd.Hy(c,p),this.g.Ra(n,this.qo,-2),n=this.YT(r,n),a&&(a=this.kw.xE(r),this.g.Ra(r,this.yl,a)),n},o.WT=function(r,n,a){r.Nb(n),a=r;var c=new h.h;o.XT(r.D(),n.D(),c),a.Cb(c)},o.XT=function(r,n,a){var c=r.x;r.x!=n.x&&(c=(1*r.x+1*n.x)/2);var p=r.y;r.y!=n.y&&(p=(1*r.y+1*n.y)/2),a.ma(c,p)},o.prototype.YT=function(r,n){var a=new h.h;this.g.D(r,a);var c=new h.h;this.g.D(n,c);var p=this.g.cG(r),f=p+(n=this.g.cG(n)),m=0,b=a.x;a.x!=c.x&&(b=(a.x*p+c.x*n)/f,m++);var x=a.y;return a.y!=c.y&&(x=(a.y*p+c.y*n)/f,m++),0<m&&this.g.Cb(r,b,x),this.g.vX(r,f),m!=0},o.prototype.BO=function(){var r=this.g.fd,n=this.g.IF();for(this.Pm=n.mz(),n=Math.max(n.ca(),n.R())/2147483646,this.$v<n&&(this.$v=n,this.no=1/this.$v),this.zd=new h.au,this.zd.At(h.O.truncate(this.g.fd/3+1)),this.zd.fn(h.O.truncate(this.g.fd/3+1)),this.yl=this.g.Gd(),this.qo=this.g.Gd(),this.kw=new g(this.g,this.Pm,this.Aw,this.no,this.yl),this.xl=new h.dL(h.O.truncate(4*r/3),this.kw),this.xl.AW(this.g.fd),r=!1,n=this.g.ld;n!=-1;n=this.g.ue(n))for(var a=this.g.Ob(n);a!=-1;a=this.g.Rb(a))for(var c=this.g.Xa(a),p=0,f=this.g.Ja(a);p<f;p++){var m=this.kw.xE(c);this.g.Ra(c,this.yl,m),this.xl.addElement(c,m),c=this.g.U(c)}var b=new h.ia(0);for(b.Jb(10),n=this.g.ld;n!=-1;n=this.g.ue(n))for(a=this.g.Ob(n);a!=-1;a=this.g.Rb(a))for(c=this.g.Xa(a),p=0,f=this.g.Ja(a);p<f;p++){if(this.g.Pa(c,this.qo)!=-2)for(m=this.g.Pa(c,this.yl),this.xl.jd(c,m);this.DO(c,b),b.size!=0;){m=!1;for(var x=0,T=b.size;x<T;x++){var I=b.get(x),A=this.xl.ja(I);this.xl.vd(I),m=this.Xm(c,A,x+1==T)||m}if(r=r||m,b.clear(!1),!m)break}c=this.g.U(c)}return r&&this.vN(),this.kw=this.xl=null,this.g.Td(this.yl),this.g.Td(this.qo),r},o.prototype.vN=function(){for(var r=new h.h,n=this.zd.je;n!=-1;n=this.zd.qz(n)){var a=this.zd.rc(n);for(this.g.D(this.zd.ja(a),r),a=this.zd.lb(a);a!=-1;a=this.zd.lb(a))this.g.mf(this.zd.ja(a),r)}},o}();h.Yt=l}(q||(q={})),function(h){var k=function(){function g(l){l===void 0&&(l=null),this.yg=null,this.Pb=!1,this.yg=l===null?[]:l}return g.prototype.copyTo=function(l){if(l.Pb)throw h.i.fa("CompositeGeographicTransformation is read-only");for(var o=0;o<this.yg.length;o++)l.yg.push(this.yg[o].Of())},g.prototype.count=function(){return this.yg.length},g.prototype.add=function(l){if(this.Pb)throw h.i.fa("CompositeGeographicTransformation is read-only");this.yg.push(l.Of())},g.prototype.clear=function(){if(this.Pb)throw h.i.fa("CompositeGeographicTransformation is read-only");this.yg.length=0},g.prototype.remove=function(l){if(this.Pb)throw h.i.fa("CompositeGeographicTransformation is read-only");this.yg.splice(l,1)},g.prototype.jg=function(){var l=new g;return this.copyTo(l),l},g.prototype.Of=function(){return this.jg()},g.prototype.transform=function(l,o,r,n){if(l.length<o)throw h.i.fa("invalid Argument");var a=r;for(r=0;r<this.yg.length;r++){var c=this.yg[r];if(c.qm()!=null){var p=c.Un,f=p?1:0,m=p?c.qm().getGeogcs2():c.qm().getGeogcs1();if(m=a/(m=m.getUnit().getUnitFactor()),3552713678800501e-30<Math.abs(m-1))for(a=0;a<o;a++)l[a][0]*=m,l[a][1]*=m;h.MC.geogToGeog(c.qm(),o,l,null,f),a=(p?c.qm().getGeogcs1():c.qm().getGeogcs2()).getUnit().getUnitFactor()}}if(m=a/n,3552713678800501e-30<Math.abs(m-1))for(a=0;a<o;a++)l[a][0]*=m,l[a][1]*=m;return o},g.prototype.Nb=function(l){if(l==this)return!0;if(!(l instanceof g)||this.yg.length!=l.yg.length)return!1;for(var o=0;o<this.yg.length;o++)if(!this.yg[o].Nb(l.yg[o]))return!1;return!0},g.prototype.ix=function(){this.Pb=!0},g.prototype.toString=function(){for(var l="CGT ("+this.count()+") ",o=0,r=this.count();o<r;++o)l+=this.yg[o].toString()+", ";return 200<l.length?l.substring(0,197)+"... ("+l.length.toString()+" characters)":l},g.create=function(){return new g},g}();h.wC=k}(q||(q={})),function(h){var k,g=Math.PI,l=2*Math.PI,o=Math.PI/2,r=function(){function c(){}return c.TO=function(p,f){var m=new c;return m.x=p,m.y=f,m.type=0,m.Uh=0,m},c.al=function(p){var f=new c;return f.x=p.x,f.y=p.y,f.type=0,f.Uh=0,f},c.SO=function(p){var f=new c;return f.x=p.x,f.y=p.y,f.type=p.type,f.Uh=p.Uh,f},c.Pd=function(p,f,m){var b=new c;return b.x=p.x+f*Math.cos(m),b.y=p.y+f*Math.sin(m),b.type=p.type,b.Uh=p.Uh,b},c.Pu=function(p,f){var m=new c;return m.x=.5*(p.x+f.x),m.y=.5*(p.y+f.y),m.type=p.type,m.Uh=p.Uh,m},c.TE=function(p,f){var m=new c;return m.x=p.x+.001*(f.x-p.x),m.y=p.y+.001*(f.y-p.y),m.type=p.type,m.Uh=p.Uh,m},c}(),n=function(){};(k=h.fL||(h.fL={}))[k.Round=0]="Round",k[k.Bevel=1]="Bevel",k[k.Miter=2]="Miter",k[k.Square=3]="Square";var a=function(){function c(p){this.NA=this.Yb=this.wg=null,this.nd=p}return c.V=function(p,f,m,b,x,T){if(p==null||1>p.Db())throw h.i.N();return f==0||p.B()?p:((T=new c(T)).ko=p,T.Ka=f,T.qa=x,T.Ki=m,T.CA=b,T.Rx())},c.prototype.eM=function(){var p=this.ko,f=p.ac(),m=p.wc(),b=new h.h;return b.uc(m,f),b.normalize(),b.Hv(),b.scale(this.Ka),f.add(b),m.add(b),b=p.Ia(),p.Dc(f),p.Qc(m),b},c.prototype.dM=function(){var p=this.ko;if(0<this.Ka&&this.Ki!=2){var f=new h.Da;return f.ad(p,!1),this.ko=f,this.Rx()}return(p=new h.Fh(p.$)).W(this.Ka,this.Ka),p},c.prototype.tJ=function(p,f,m,b){return(f.x-p.x)*(b.x-m.x)+(f.y-p.y)*(b.y-m.y)},c.prototype.fc=function(p,f){if(f===void 0)this.Yb.push(p),this.gf++;else if(this.gf==0)this.fc(p);else{var m=this.Bw,b=this.wg[f==0?m-1:f-1],x=this.wg[f],T=this.tJ(b,x,this.Yb[this.gf-1],p);0<T?this.fc(p):0>T&&(0<this.tJ(b,x,x,this.Yb[this.gf-1])?(x=this.wg[f==0?m-2:f==1?m-1:f-2],m=r.Pd(b,this.Ka,Math.atan2(b.y-x.y,b.x-x.x)-o),this.Yb[this.gf-1]=m,this.Ki==1||this.Ki==2?(m=r.Pu(m,b),this.fc(m),m=r.Pd(b,this.Ka,this.Jv+o),(b=r.Pu(m,b)).type|=256,this.fc(b)):(m=r.Pd(b,this.Ka,this.Jv+o)).type|=256,this.fc(m),this.fc(p,f)):(m=r.Pd(x,this.Ka,this.Jv+o),this.fc(m),this.Ki==1||this.Ki==2?(m=r.Pu(m,x),this.fc(m),m=r.Pd(x,this.Ka,this.aA-o),(b=r.Pu(m,x)).type|=256,this.fc(b)):(m=r.Pd(x,this.Ka,this.aA-o)).type|=256,this.fc(m)))}},c.prototype.mE=function(){var p,f=this.Bw;this.gf=0;var m=.5*this.qa,b=0,x=0;for(p=0;p<f;p++){var T=this.wg[p],I=p==0?this.wg[f-1]:this.wg[p-1],A=p==f-1?this.wg[0]:this.wg[p+1],P=I.x-T.x,j=I.y-T.y,D=A.x-T.x,F=A.y-T.y,N=Math.atan2(j,P),z=Math.atan2(F,D);if(this.Jv=N,this.aA=z,p==0&&(b=N,x=z),P=P*F-D*j,j=z,z<N&&(z+=l),0<P*this.Ka)this.Ki==1||this.Ki==2?(N=r.Pd(T,this.Ka,N+o),this.fc(N),N=r.TE(T,N),this.fc(N),N=r.Pd(T,this.Ka,z-o),(T=r.TE(T,N)).type|=256,this.fc(T),this.fc(N)):(P=.5*(z-N),P=this.Ka/Math.abs(Math.sin(P)),N=r.Pd(T,P,.5*(N+z)),this.fc(N,p));else if(512&T.type){for(P=1-m/Math.abs(this.Ka),I=1,A=0>this.Ka?-g:g,-1<P&&1>P&&(.017453292519943295>(j=2*Math.acos(P))&&(j=.017453292519943295),1<(I=h.O.truncate(g/j+1.5))&&(A/=I)),j=N+o,N=r.Pd(T,this.Ka,j),p==0&&(N.type|=1024),this.fc(N,p),P=this.Ka/Math.cos(A/2),j+=A/2,(N=r.Pd(T,P,j)).type|=1024,this.fc(N);0<--I;)j+=A,(N=r.Pd(T,P,j)).type|=1024,this.fc(N);(N=r.Pd(T,this.Ka,z-o)).type|=1024,this.fc(N)}else if(this.Ki==1)N=r.Pd(T,this.Ka,N+o),this.fc(N,p),N=r.Pd(T,this.Ka,z-o),this.fc(N);else if(this.Ki==0)for(P=1-m/Math.abs(this.Ka),I=1,A=z-o-(N+o),-1<P&&1>P&&(.017453292519943295>(j=2*Math.acos(P))&&(j=.017453292519943295),1<(I=h.O.truncate(Math.abs(A)/j+1.5))&&(A/=I)),P=this.Ka/Math.cos(.5*A),j=N+o+.5*A,N=r.Pd(T,P,j),this.fc(N,p);0<--I;)j+=A,N=r.Pd(T,P,j),this.fc(N);else this.Ki==2?(P=I.x-T.x,j=I.y-T.y,.99999999<(I=(P*(D=A.x-T.x)+j*(F=A.y-T.y))/Math.sqrt(P*P+j*j)/Math.sqrt(D*D+F*F))?(N=r.Pd(T,1.4142135623730951*this.Ka,z-.25*g),this.fc(N,p),N=r.Pd(T,1.4142135623730951*this.Ka,z+.25*g),this.fc(N)):(I=Math.abs(this.Ka/Math.sin(.5*Math.acos(I))))>(A=Math.abs(this.CA*this.Ka))?(P=.5*(z-N),P=this.Ka/Math.abs(Math.sin(P)),N=r.Pd(T,P,.5*(N+z)),z=h.h.construct(N.x,N.y),N=h.h.construct(T.x,T.y),(T=new h.h).uc(z,N),(z=new h.h).HW(A/T.length(),T,N),N=(I-A)*Math.abs(this.Ka)/Math.sqrt(I*I-this.Ka*this.Ka),0<this.Ka?T.Hv():T.ar(),T.scale(N/T.length()),(N=new h.h).add(z,T),(I=new h.h).uc(z,T),N=r.al(N),this.fc(N,p),N=r.al(I),this.fc(N)):(P=.5*(z-N),P=this.Ka/Math.abs(Math.sin(P)),N=r.Pd(T,P,.5*(N+z)),this.fc(N,p))):(z=j,0<this.Ka?(z>N&&(z-=l),I=N-z<o):(z<N&&(z+=l),I=z-N<o),I?(j=0>(P=1.4142135623730951*this.Ka)?N+.25*g:N+.75*g,N=r.Pd(T,P,j),this.fc(N,p),j=0>P?z-.25*g:z-.75*g,N=r.Pd(T,P,j),this.fc(N)):(P=.5*(z-N),P=this.Ka/Math.abs(Math.sin(P)),z<N&&(z+=l),N=r.Pd(T,P,(N+z)/2),this.fc(N,p)))}return this.Jv=b,this.aA=x,this.fc(this.Yb[0],0),T=r.SO(this.Yb[this.gf-1]),this.Yb[0]=T,this.wW()},c.prototype.Au=function(p,f){if(!(2>f))for(var m=0;m<f;m++){var b=this.Yb[p+m];m!=0?this.NA.Ci(h.h.construct(b.x,b.y)):this.NA.Lt(h.h.construct(b.x,b.y))}},c.prototype.fM=function(p,f,m){var b=p.Ba(f),x=p.Vc(f);if(this.Yb=[],this.NA=m,p.dc(f)){for(f=p.Na(b);p.Na(x-1).qb(f);)x--;if(2<=x-b){for(this.Bw=x-b,this.wg=[],f=b;f<x;f++)this.wg.push(r.al(p.Na(f)));this.mE()&&this.Au(0,this.gf-1)}}else{for(f=p.Na(b);b<x&&p.Na(b+1).qb(f);)b++;for(f=p.Na(x-1);b<x&&p.Na(x-2).qb(f);)x--;if(2<=x-b){for(this.Bw=2*(x-b)-2,this.wg=[],(m=r.al(p.Na(b))).type|=1536,this.wg.push(m),f=b+1;f<x-1;f++)m=r.al(p.Na(f)),this.wg.push(m);for((m=r.al(p.Na(x-1))).type|=512,this.wg.push(m),f=x-2;f>=b+1;f--)(m=r.al(p.Na(f))).type|=1024,this.wg.push(m);if(this.mE())if(2<=this.Yb.length){for(p=-1,(x=(1024&this.Yb[this.gf-1].type)!=0)||(p=0),f=1;f<this.gf;f++)(b=(1024&this.Yb[f].type)!=0)?x||1<(x=f-1)-p+1&&this.Au(p,x-p+1):x&&(p=f-1),x=b;x||1<(x=this.gf-1)-p+1&&this.Au(p,x-p+1)}else p=0,x=this.gf-1,0<=p&&1<=x-p&&this.Au(p,x-p+1)}}this.wg=null,this.Bw=0,this.Yb=null,this.gf=0},c.prototype.wW=function(){for(var p=!1,f=0;f<this.gf;f++){var m=this.Yb[f];m.qh=f+1,m.sh=f-1,this.Yb[f]=m}for((m=this.Yb[0]).sh=this.gf-2,this.Yb[0]=m,(m=this.Yb[this.gf-2]).qh=0,this.Yb[this.gf-2]=m,f=m=0;f<this.gf;f++)if(256&this.Yb[m].type){var b=this.GP(m);if(b==-1){p=!0;break}m=b}else m=this.Yb[m].qh;return!p&&(this.QO(m),!0)},c.prototype.GP=function(p){for(var f,m,b=this.gf-1,x=p,T=1;T<=b-2;T++){f=x=this.Yb[x].qh,m=p;for(var I=1;I<=T;I++){if(m=this.Yb[m].sh,(256&this.Yb[m].type)==0&&(256&this.Yb[f].type)==0){var A=this.gS(m,f);if(A!=-1)return A}f=this.Yb[f].sh}}return-1},c.prototype.gS=function(p,f){var m=this.Yb[this.Yb[p].sh],b=this.Yb[p],x=this.Yb[this.Yb[f].sh],T=this.Yb[f];if(!this.JW(m,b,x,T))return-1;var I=new n;return this.xQ(m,b,x,T,I)&&!I.bE&&h.O.bK((b.x-m.x)*(T.y-x.y)-(b.y-m.y)*(T.x-x.x))!=h.O.bK(this.Ka)?(m=this.Yb[p].sh,I.an.type=b.type,I.an.qh=f,I.an.sh=m,this.Yb[p]=I.an,I.an=this.Yb[f],I.an.sh=p,this.Yb[f]=I.an,f):-1},c.prototype.JW=function(p,f,m,b){return Math.max(p.x,f.x)>=Math.min(m.x,b.x)&&Math.max(m.x,b.x)>=Math.min(p.x,f.x)&&Math.max(p.y,f.y)>=Math.min(m.y,b.y)&&Math.max(m.y,b.y)>=Math.min(p.y,f.y)},c.prototype.xQ=function(p,f,m,b,x){x.bE=!1;var T=(f.y-p.y)*(b.x-m.x)-(f.x-p.x)*(b.y-m.y),I=(m.y-p.y)*(f.x-p.x)-(m.x-p.x)*(f.y-p.y);if(0<=(T=T==0?2:I/T)&&1>=T){var A=T;if(T=(b.y-m.y)*(f.x-p.x)-(b.x-m.x)*(f.y-p.y),I=(p.y-m.y)*(b.x-m.x)-(p.x-m.x)*(b.y-m.y),0<=(T=T==0?2:I/T)&&1>=T)return x.an=r.TO(p.x+T*(f.x-p.x),p.y+T*(f.y-p.y)),x.an.Uh=m.Uh+A*(b.Uh-m.Uh),A!=0&&A!=1||T!=0&&T!=1||(x.bE=!0),x.VY=T,x.WY=A,!((A==0||A==1)&&0<T&&1>T||(T==0||T==1)&&0<A&&1>A)}return!1},c.prototype.QO=function(p){for(;this.Yb[p].sh<p;)p=this.Yb[p].sh;var f=0,m=p;do m=this.Yb[m],this.Yb[f]=m,m=m.qh,f++;while(m!=p);this.Yb[f]=this.Yb[0],this.gf=f+1},c.prototype.$C=function(p){var f=this.ko,m=f.Ga();if(m!=null){m.Zi();for(var b=-1;m.$a();)b++,this.fM(f,b,p)}},c.prototype.Rx=function(){var p=this.ko.getType();return p==322?this.eM():p==197?this.dM():h.aa.yd(p)?((p=new h.Ta).oc(this.ko,!0),this.ko=p,this.Rx()):p==1607?(p=new h.Ta,this.$C(p),p):p==1736?(p=new h.Da,this.$C(p),p):null},c}();h.IK=a}(q||(q={})),function(h){var k=function(){function r(n){this.qk=n}return r.prototype.D=function(n,a){this.qk.g.D(n,a)},r.prototype.vd=function(n){var a=this.qk.Fa.ja(n);this.qk.Fa.vd(n,-1),this.qk.g.pd(a,!1)},r}(),g=function(){function r(n){this.qk=n}return r.prototype.D=function(n,a){this.qk.IT.D(n,a)},r.prototype.vd=function(n){this.qk.Fa.vd(n,-1)},r}(),l=function(){function r(n){this.qk=n}return r.prototype.D=function(n,a){a.L(this.qk.LT[n])},r.prototype.vd=function(n){this.qk.Fa.vd(n,-1)},r}(),o=function(){function r(n){n===void 0?(this.Fa=new h.Yj,this.Fa.De(20),this.g=new h.gd,this.xT=this.g.Ig(550),this.Ss=this.g.vf(this.xT,-1),this.Xh=new k(this)):n instanceof Array?(this.Fa=new h.Yj,this.Fa.De(20),this.LT=n,this.Xh=new l(this)):(this.Fa=new h.Yj,this.Fa.De(20),this.IT=n,this.Xh=new g(this))}return r.prototype.Ib=function(n){var a=n.getType();if(h.Gx.xj(a))this.jN(n);else if(h.Vk.yd(a))this.oN(n);else if(a==197)this.gN(n);else{if(a!=33)throw h.i.N("invalid shape type");this.nN(n)}},r.prototype.cR=function(){var n=new h.Sa,a=this.Fa.rc(-1),c=new h.Da(this.g.ht);for(this.g.Vi(this.Fa.ja(a),n),c.nf(n),a=this.Fa.lb(a);a!=-1;a=this.Fa.lb(a))this.g.Vi(this.Fa.ja(a),n),c.lineTo(n);return c},r.RO=function(n){var a=new r(n),c=n.I(),p=1,f=new h.h,m=new h.h,b=new h.h;for(n.D(0,f);n.D(p,m),m.Rz(f)&&p<c-1;)p++;for(a.Fa.addElement(0,-1),a.Fa.xn(p),c=p+1;c<n.I();c++)n.D(c,b),(p=a.pC(b))!=-1&&a.Fa.Sj(p,c);for(b=new h.Sa,p=a.Fa.rc(-1),c=new h.Da(n.description),n.ve(a.Fa.ja(p),b),c.nf(b),p=a.Fa.lb(p);p!=-1;p=a.Fa.lb(p))n.ve(a.Fa.ja(p),b),c.lineTo(b);return c},r.construct=function(n,a,c){for(var p=new r(n),f=1,m=n[0];n[f].Rz(m)&&f<a-1;)f++;for(p.Fa.addElement(0,-1),p.Fa.xn(f),f+=1;f<a;f++)(m=p.pC(n[f]))!=-1&&p.Fa.Sj(m,f);for(n=0,a=p.Fa.rc(-1);a!=-1;a=p.Fa.lb(a))c[n++]=p.Fa.ja(a);return n},r.JG=function(n,a){var c=n.Ba(a),p=n.Vc(a);if(a=!n.dc(a)&&n.Nn(a),n=n.ub(0),p*=2,a&&(p-=2),6>p-(c*=2))return!0;a=new h.h;var f=new h.h,m=new h.h;n.tc(c,a),n.tc(c+2,f),n.tc(c+4,m);var b=r.Wu(f,m,a);if(b.ps()||!r.um(b.value()))return!1;var x=h.h.construct(f.x,f.y),T=new h.h;for(c+=6;c<p;c+=2)if(T.L(f),f.L(m),n.tc(c,m),(b=r.Wu(f,m,a)).ps()||!r.um(b.value())||(b=r.Wu(x,m,a)).ps()||!r.um(b.value())||(b=r.Wu(f,m,T)).ps()||!r.um(b.value()))return!1;return!0},r.prototype.jN=function(n){for(var a=new h.Sa,c=new h.h,p=0;p<n.I();p++){n.D(p,c);var f=this.Cr(c);if(f!=-1){n.ve(p,a);var m=this.g.fc(this.Ss,a);this.Fa.Sj(f,m)}}},r.prototype.gN=function(n){for(var a=new h.Sa,c=new h.h,p=0;4>p;p++){n.mB(p,c);var f=this.Cr(c);if(f!=-1){n.Hf(p,a);var m=this.g.fc(this.Ss,a);this.Fa.Sj(f,m)}}},r.prototype.oN=function(n){var a=new h.Sa,c=n.ac();if((c=this.Cr(c))!=-1){n.To(a);var p=this.g.fc(this.Ss,a);this.Fa.Sj(c,p)}c=n.wc(),(c=this.Cr(c))!=-1&&(n.Po(a),n=this.g.fc(this.Ss,a),this.Fa.Sj(c,n))},r.prototype.nN=function(n){var a=n.D();(a=this.Cr(a))!=-1&&(n=this.g.fc(this.Ss,n),this.Fa.Sj(a,n))},r.prototype.Cr=function(n){var a=-1;if(this.Fa.size(-1)==0)return this.Fa.addElement(-4,-1);if(this.Fa.size(-1)==1){var c=this.g.Na(this.Fa.ja(this.Fa.rc(-1)));return n.Rz(c)||(a=this.Fa.xn(-5)),a}return this.pC(n)},r.prototype.pC=function(n){var a=-1;do{var c=this.Fa.rc(-1),p=this.Fa.Fc(-1),f=this.Fa.ja(c),m=this.Fa.ja(p),b=new h.h,x=new h.h;if(this.Xh.D(f,b),this.Xh.D(m,x),f=h.h.Uq(x,n,b),r.um(f))a=this.Fa.xn(-1),(b=this.nC(n,p,c))!=c&&this.oC(n,c,this.Fa.we(b));else if(r.CG(f)){x=this.Fa.sv(-1);var T=this.Fa.rc(-1),I=this.Fa.Fc(-1);for(f=new h.h,m=new h.h;T!=this.Fa.we(I);){var A=this.Fa.ja(x);this.Xh.D(A,f),A=h.h.Uq(f,n,b),r.CG(A)?(I=x,x=this.Fa.ll(x)):(T=x,x=this.Fa.Xp(x))}if(x=I,b=T,A=this.Fa.ja(x),T=this.Fa.ja(b),this.Xh.D(A,f),this.Xh.D(T,m),b!=c&&(f=h.h.Uq(m,n,f),!r.um(f)))continue;a=this.Fa.zu(b,x,-2,!1),this.oC(n,x,p),this.nC(n,b,c)}else this.sb==null&&(this.sb=new h.yb),this.sb.Dc(x),this.sb.Qc(b),0>(b=this.sb.fe(n,!0))?(b=this.Fa.we(p),this.Fa.vd(p,-1),a=this.Fa.xn(-3),this.nC(n,b,c)):1<b&&(b=this.Fa.lb(c),this.Fa.vd(c,-1),a=this.Fa.zu(-1,b,-3,!1),this.oC(n,b,p))}while(0);return a},r.prototype.oC=function(n,a,c){if(a!=c){var p=this.Fa.ja(a),f=this.Fa.lb(a),m=new h.h,b=new h.h;for(this.Xh.D(p,m);a!=c&&2<this.Fa.size(-1)&&(this.Xh.D(this.Fa.ja(f),b),p=h.h.Uq(b,n,m),!r.um(p));)p=a,a=f,m.L(b),f=this.Fa.lb(a),this.Xh.vd(p)}},r.prototype.nC=function(n,a,c){if(a==c)return c;var p=this.Fa.ja(a),f=this.Fa.we(a),m=new h.h,b=new h.h;for(this.Xh.D(p,m);a!=c&&2<this.Fa.size(-1)&&(this.Xh.D(this.Fa.ja(f),b),p=h.h.Uq(m,n,b),!r.um(p));)p=a,a=f,m.L(b),f=this.Fa.we(a),this.Xh.vd(p);return a},r.Wu=function(n,a,c){var p=new h.Wb;p.set(a.x),p.sub(n.x);var f=new h.Wb;f.set(c.y),f.sub(n.y);var m=new h.Wb;return m.set(a.y),m.sub(n.y),(a=new h.Wb).set(c.x),a.sub(n.x),p.Ag(f),m.Ag(a),p.sub(m),p},r.um=function(n){return 0>n},r.CG=function(n){return 0<n},r}();h.Zt=o}(q||(q={})),function(h){var k=function(){function g(l){this.g=null,this.tH=!0,this.nd=l}return g.zU=function(l,o,r){return l=h.ta.Er(l),h.Yt.Cv(o.Lg(),o.ih(),r.Lg(),r.ih(),h.lc.ox(l))},g.CO=function(l,o){var r=new h.Sa;return h.Yt.WT(l,o,r),r},g.V=function(l,o,r,n){return(r=new g(r)).g=l,r.qa=o,r.tH=n,r.EM()},g.prototype.nM=function(l){return h.Yt.iQ(this.g,l)},g.prototype.sM=function(l){return h.$t.V(this.g,l,this.nd)},g.prototype.EM=function(){var l=this.qa,o=h.ta.Er(l),r=1.00001*(l=h.ta.rN(l));l*=1.000001;for(var n=!1,a=30<this.g.fd+10?1e3:(this.g.fd+10)*(this.g.fd+10),c=0,p=this.g.jS();;c++){if(c>a)throw h.i.fa("Internal Error: max number of iterations exceeded");var f=this.nM(o);if(n=n||f,this.tH&&(f=this.g.Gp(o,!0,!1)!=0,n=n||f),f=!1,(c==0||p||h.$t.kI(!0,this.g,l,null,this.nd))&&(f=this.sM(r),n=n||f),!f)break;h.mp.zp(this.nd)}return n},g}();h.Tk=k}(q||(q={})),function(h){var k=function(){function l(o){this.$d=this.Mc=null,this.Ys=0,this.Ub=o,this.cA=!0}return l.prototype.uv=function(o,r){var n=this.g.bc(o);if(n==null){if(!this.g.ed(o,r))return null;n=r}return n},l.prototype.Xq=function(){var o;o===void 0&&(o=!1),this.Ys++,(o||!(4095&this.Ys))&&(this.Ys=0,h.mp.zp(this.Ub))},l.prototype.nP=function(){var o=this.g.Yq(!1),r=!1,n=new h.yb,a=new h.yb,c=new h.l;c.Oa();var p=new h.l;p.Oa();for(var f=new h.Sa,m=new h.TC,b=o.next();b!=-1;b=o.next()){h.mp.zp(this.Ub);var x=null,T=!1;if(!h.aa.Rn(this.g.ic(o.ck))){if((x=this.uv(b,n))==null)continue;if(x.A(c),c.W(this.qa,this.qa),x.Bi(this.qa)){if(!x.Bi(0))continue;T=!0,x=null}}var I=this.g.Yq(o),A=I.next();for(A!=-1&&(A=I.next());A!=-1;A=I.next()){var P=null,j=!1;if(!h.aa.Rn(this.g.ic(I.ck))){if((P=this.uv(A,a))==null)continue;if(P.A(p),P.Bi(this.qa)){if(!P.Bi(0))continue;j=!0,P=null}}var D=0,F=0;if(x!=null&&P!=null)c.HG(p)&&(m.Oo(x),m.Oo(P),m.Ea(this.qa,!1),0<(D=m.ol(0))+(F=m.ol(1))&&(this.g.jr(b,m,0,!0),this.g.jr(A,m,1,!0)),m.clear());else if(x!=null){var N=new h.h;if(this.g.D(A,N),c.contains(N)){if(m.Oo(x),this.g.Vi(A,f),m.Kz(this.qa,f,!1),0<(D=m.ol(0)))if(this.g.jr(b,m,0,!0),j){for(j=-1,N=this.g.U(A);N!=-1&&N!=A&&(j=N,(P=this.uv(N,a))!=null&&P.Bi(0));N=this.g.U(N));for(N=A;N!=-1&&(this.g.Dh(N,m.Bf),N!=j);N=this.g.U(N));}else this.g.Dh(A,m.Bf);m.clear()}}else{if(P==null)continue;if(N=new h.h,this.g.D(b,N),p.W(this.qa,this.qa),p.contains(N)){if(m.Oo(P),this.g.Vi(b,f),m.Kz(this.qa,f,!1),0<(F=m.ol(0)))if(this.g.jr(A,m,0,!0),T){for(j=-1,N=this.g.U(b);N!=-1&&N!=b&&(j=N,(P=this.uv(N,a))!=null&&P.Bi(0));N=this.g.U(N));for(N=b;N!=-1&&(this.g.Dh(N,m.Bf),N!=j);N=this.g.U(N));}else this.g.Dh(b,m.Bf);m.clear()}}if(D+F!=0){if(D!=0){if((x=this.g.bc(b))==null){if(!this.g.ed(b,n))continue;x=n,n.A(c)}else x.A(c);if(x.Bi(this.qa))break}r=!0}}}return r},l.prototype.oP=function(){return this.QU()},l.prototype.QU=function(){return new h.RC().PX(this.g,this.qa)},l.prototype.lI=function(){var o=!1;this.Mc==null&&(this.Mc=new h.Yj);var r=new h.ia(0);r.Jb(this.g.fd+1);for(var n=this.g.Yq(),a=n.next();a!=-1;a=n.next())r.add(a);this.g.nx(r,r.size),r.add(-1),n=this.g.Gd(),a=this.g.Gd(),this.$d=new h.UC(this.g,this.qa,!this.cA),this.Mc.Vo(this.$d);var c=new h.ia(0),p=new h.ia(0),f=0;new h.h;var m=this.g.td;this.g.vb.mc();for(var b,x,T=this.g.vb.za[0].o,I=r.get(f++);I!=-1;){var A=b=T[2*(x=m.T(I,0))],P=x=T[2*x+1];do{var j=m.T(I,2),D=m.T(I,1);if(j!=-1){var F=m.T(j,0),N=T[2*F];0>(P<(F=T[2*F+1])?-1:P>F?1:A<N?-1:A>N?1:0)&&(p.add(I),p.add(j))}D!=-1&&(N=T[2*(F=m.T(D,0))],0>(P<(F=T[2*F+1])?-1:P>F?1:A<N?-1:A>N?1:0)&&(p.add(D),p.add(D))),(N=this.g.Pa(I,n))!=-1&&(c.add(N),this.g.Ra(I,n,-1)),(N=this.g.Pa(I,a))!=-1&&(c.add(N),this.g.Ra(I,a,-1)),(I=r.get(f++))!==-1&&(A=T[2*(P=m.T(I,0))],P=T[2*P+1])}while(I!=-1&&A===b&&P===x);for(A=c.size==1&&p.size==2,N=P=-1,j=0,D=c.size;j<D;j++){F=c.get(j);var z=this.Mc.we(F);if(z==-1||c.hG(z)||(P=z),(F=this.Mc.lb(F))==-1||c.hG(F)||(N=F),P!=-1&&N!=-1)break}for(this.$d.$J(x,b),j=0,D=c.size;j<D;j++)F=c.get(j),this.Mc.vd(F,-1);if(c.clear(!1),!A&&P!=-1&&N!=-1&&this.qO(P,N)){o=!0,this.Ni=this.$d.rm();break}for(j=0,D=p.size;j<D;j+=2){if(x=p.get(j),b=p.get(j+1),A?(x=this.Mc.zu(P,N,x,!0),A=!1):x=this.Mc.addElement(x,-1),this.$d.rg){this.Ni=this.$d.rm(),o=!0;break}this.g.Pa(b,n)==-1?this.g.Ra(b,n,x):this.g.Ra(b,a,x)}if(o)break;p.Bh(0)}return this.g.Td(n),this.g.Td(a),o},l.prototype.qO=function(o,r){return this.$d.compare(this.Mc,this.Mc.ja(o),r),o=this.$d.rg,this.$d.Kr(),o},l.yE=function(o){for(var r=o.ld;r!=-1;r=o.ue(r))if(h.aa.Hc(o.ic(r)))return!0;return!1},l.fQ=function(o,r,n,a){return!!l.yE(o)&&((r=new l(a)).g=o,r.qa=n,15>o.fd?o=r.nP():r.oP())},l.V=function(o,r,n){return l.fQ(o,o.IF(),r,n)},l.kI=function(o,r,n,a,c){if(!l.yE(r))return!1;var p=new l(c);if(p.g=r,p.qa=n,p.cA=o,p.lI())return a!=null&&a.Wt(p.Ni),!0;var f=new h.Dd;return f.$B(),r.Oc(f),(p=new l(c)).g=r,p.qa=n,p.cA=o,o=p.lI(),f.$B(),r.Oc(f),!!o&&(a!=null&&a.Wt(p.Ni),!0)},l.Ml=function(o,r){return!(16>(o=o.I()))&&2*o+Math.log(o)*Math.LOG10E/Math.log(2)*r<1*o*r},l.lP=function(o,r,n,a){var c=r.getType();if(h.aa.Hc(c))return new l(a).mP(o,r,n);throw h.i.fa("crack_A_with_B")},l.prototype.mP=function(o,r,n){var a=new h.l;o.xc(a);var c=new h.l;if(r.xc(c),c.W(n,n),!c.isIntersecting(a))return o;var p=o.Bb,f=null;p!=null&&(f=p.Fb),l.Ml(o,o.I())&&(f=h.ta.jj(o,c));var m=f!=null?f.getIterator():null,b=r.Ga();r=o.Ga();var x=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(c=[];b.$a();)for(;b.Ha();){var T=b.ha();if(f!=null){for(m.Uo(T,n),p=m.next();p!=-1;p=m.next())if(this.Xq(),r.Vb(f.ja(p),-1),r.Ha()){var I=(p=r.ha()).Ea(T,null,x,null,n);for(p=0;p<I;++p){var A=x[p];if(A!=0&&A!=1){var P=r.wb(),j=new g;j.t=A,j.index=P,c.push(j)}}}}else{var D=new h.l;if(T.xc(D),D.W(n,n),a.isIntersecting(D)){for(r.Zi();r.$a();)for(;r.Ha();)if(this.Xq(),p=r.ha(),A=new h.l,p.xc(A),A.isIntersecting(D))for(I=p.Ea(T,null,x,null,n),p=0;p<I;++p)(A=x[p])!=0&&A!=1&&(P=r.wb(),(j=new g).t=A,j.index=P,c.push(j))}}}if(c.length==0)return o;for(c=c.sort(g.Ey),o=o.Ia(),r.Zi();r.$a()&&!r.Ha(););for(n=r.ha(),a=new h.ig,f=-1,p=0,m=c.length;p<m;){for(x=c[p].index,b=p+1;b<m&&c[b].index==x;)++b;for(;r.wb()<x;){if(this.Xq(),T=r.Ha(),A=r.gb,(D=T||!r.On()||r.Pn())&&o.oc(n,f!=A),f=A,!T)for(;r.$a()&&!r.Ha(););n=r.ha()}for(x=0;p<b;p++)(A=c[p].t)!=x&&(n.ah(x,A,a),x=A,A=r.gb,o.oc(a.get(),f!=A),f=A);if((D=(T=r.Ha())||!r.On()||r.Pn())&&(n.ah(x,1,a),o.oc(a.get(),!1)),T)n=r.ha();else{for(;r.$a()&&!r.Ha(););n=r.Ha()?r.ha():null}p=b}for(n!=null&&(A=r.gb,(D=(T=r.Ha())||!r.On()||r.Pn())&&o.oc(n,f!=A),f=A),T=r.Ha();;){if(!T){for(;r.$a()&&!(T=r.Ha()););if(!T)break}n=r.ha(),A=r.gb,(D=(T=r.Ha())||!r.On()||r.Pn())&&o.oc(n,f!=A),f=A}return o},l}();h.$t=k;var g=function(){function l(){}return l.Ey=function(o,r){return o.index==r.index?o.t>r.t?1:o.t<r.t?-1:0:o.index>r.index?1:-1},l}()}(q||(q={})),function(h){var k;(k=h.KK||(h.KK={}))[k.Left=0]="Left",k[k.Right=1]="Right",k[k.Coincident=2]="Coincident",k[k.Undefined=3]="Undefined",k[k.Uncut=4]="Uncut";var g=function(r,n,a,c,p,f,m,b,x,T,I){this.X=r,this.bt=n,this.Ns=a,this.tg=c,this.Lm=T,this.Al=I};h.uY=g;var l=function(){function r(n,a){this.JH=n,this.Hi=a}return r.prototype.qM=function(n,a){var c=new h.h;this.Hi.D(n,c);var p=new h.h;return this.Hi.D(a,p),(c=c.compare(p))!=0?c:(n=this.Hi.Pa(n,this.JH))<(a=this.Hi.Pa(a,this.JH))?-1:n==a?0:1},r}(),o=function(r,n,a,c,p,f,m,b,x){this.tg=r,this.Ns=n,this.OA=a,this.UH=c,this.Ei=p,this.Al=f,this.Lm=m,this.VH=b,this.OT=x};h.tY=o,h.LK=function(){function r(){}return r.JK=function(n,a,c,p,f,m){if(a.B())n=new g(a,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),f.push(n);else if(c.B())n=new g(a,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),f.push(n);else{var b=new h.gd;if(b.Ib(a),b.Ib(c),h.Tk.V(b,p,m,!0),b.fd==0)n=new g(a.Ia(),4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),f.push(n);else{for(a=0,c=b.Gd(),p=b.ld;p!=-1;p=b.ue(p))for(m=b.Ob(p);m!=-1;m=b.Rb(m))for(var x=b.Xa(m),T=0,I=b.Ja(m);T<I;x=b.U(x),T++)b.Ra(x,c,a++);a=r.HM(c,b),r.cM(n,a,b,f)}}},r.HM=function(n,a){for(var c=a.fd,p=new h.ia(0),f=a.ld;f!=-1;f=a.ue(f))for(var m=a.Ob(f);m!=-1;m=a.Rb(m))for(var b=a.Xa(m),x=0,T=a.Ja(m);x<T;b=a.U(b),x++)p.add(b);var I=new l(n,a);p.Vd(0,c,function(ce,ue){return I.qM(ce,ue)}),n=[];var A=[],P=a.Gd(),j=a.Gd();f=a.ld,m=a.ue(f),T=new h.h;var D=new h.h,F=p.get(0),N=a.bd(F),z=a.Qf(N);a.D(F,T);var W=1;for(b=0;W<c-1;){var H=!1;for(x=W;x<c;x++)if(x!=b){var Y=p.get(x),Z=a.bd(Y),se=a.Qf(Z);if(a.D(Y,D),!T.qb(D))break;z==f&&se==m&&(H=r.uM(P,j,a,n,A,N,F,Z,Y))}if(H||b==W-1){if(H&&b==W-1&&W--,++b==c)break;F=p.get(b),N=a.bd(F),z=a.Qf(N),a.D(F,T)}H||(W=b+1)}for(c=[],f=a.ld;f!=-1;f=a.ue(f))for(m=a.Ob(f);m!=-1;m=a.Rb(m))for(p=a.Xa(m),x=0,T=a.Ja(m);x<T;p=a.U(p),x++){if(0<=(b=a.Pa(p,j)))for(;b<A.length&&A[b].tg==p;)c.push(A[b++]);if(0<=(b=a.Pa(p,P)))for(;b<n.length&&n[b].tg==p;)c.push(n[b++])}return a.Td(P),a.Td(j),c},r.uM=function(n,a,c,p,f,m,b,x,T){var I=c.rj(m),A=c.rj(x),P=c.Xa(m),j=c.Xa(x),D=c.Ma(b),F=c.Ma(T),N=!1,z=!1,W=!1,H=!1;return b!=P&&(T!=j&&(N=r.vM(n,c,p,m,D,x,F)),T!=A&&(z=r.wM(n,c,p,m,D,x,T))),b!=I&&(T!=j&&(W=r.xM(a,c,f,m,b,x,F,P)),T!=A&&(H=r.yM(a,c,f,m,b,x,T,P))),N&&z&&W?(n=p.length-1,f[H?f.length-2:f.length-1].Ei==2&&(p[n-1]=p[n],--p.length)):N&&z&&H&&f[f.length-1].Ei==2&&(f=p[p.length-1],--p.length,c.Pa(f.tg,n)==p.length&&c.Ra(f.tg,n,-1)),N||z||W||H},r.vM=function(n,a,c,p,f,m,b){var x=new h.yb,T=new h.yb,I=[0,0],A=[0,0],P=a.bc(f);return P==null&&(a.ed(f,x),P=x),(x=a.bc(b))==null&&(a.ed(b,T),x=T),2>(P=P.Ea(x,null,I,A,0))&&(p=new o(f,p,I[0],NaN,P,b,m,A[0],NaN),c.push(p),0>(p=a.Pa(f,n))&&a.Ra(f,n,c.length-1)),!0},r.wM=function(n,a,c,p,f,m,b){var x=new h.yb,T=new h.yb,I=[0,0],A=[0,0],P=a.bc(f);return P==null&&(a.ed(f,x),P=x),(x=a.bc(b))==null&&(a.ed(b,T),x=T),2>(P=P.Ea(x,null,I,A,0))&&(p=new o(f,p,I[0],NaN,P,b,m,A[0],NaN),c.push(p),0>(p=a.Pa(f,n))&&a.Ra(f,n,c.length-1),!0)},r.xM=function(n,a,c,p,f,m,b,x){var T=new h.yb,I=new h.yb,A=[0,0],P=[0,0],j=a.bc(f);return j==null&&(a.ed(f,T),j=T),(T=a.bc(b))==null&&(a.ed(b,I),T=I),(j=j.Ea(T,null,A,P,0))==2?(p=new o(f,p,A[0],A[1],j,b,m,P[0],P[1]),c.push(p),0>(p=a.Pa(f,n))&&a.Ra(f,n,c.length-1),!0):(I=!1,f==x&&(p=new o(f,p,A[0],NaN,j,b,m,P[0],NaN),c.push(p),0>(p=a.Pa(f,n))&&a.Ra(f,n,c.length-1),I=!0),I)},r.yM=function(n,a,c,p,f,m,b,x){var T=new h.yb,I=new h.yb,A=[0,0],P=[0,0],j=a.bc(f);return j==null&&(a.ed(f,T),j=T),(T=a.bc(b))==null&&(a.ed(b,I),T=I),(j=j.Ea(T,null,A,P,0))==2?(p=new o(f,p,A[0],A[1],j,b,m,P[0],P[1]),c.push(p),0>(p=a.Pa(f,n))&&a.Ra(f,n,c.length-1),!0):(I=!1,f==x&&(p=new o(f,p,A[0],NaN,j,b,m,P[0],NaN),c.push(p),0>(p=a.Pa(f,n))&&a.Ra(f,n,c.length-1),I=!0),I)},r.cM=function(n,a,c,p){var f=[];f[0]=new h.h,f[1]=new h.h,f[2]=new h.h,f[3]=new h.h;var m=new h.h,b=new h.h,x=new h.h,T=new h.h,I=null;p!=null&&(I=new h.ig).Or();var A=0,P=null,j=new h.yb;new h.yb;for(var D=c.Ob(c.ld);D!=-1;D=c.Rb(D)){for(var F=4,N=-1,z=-1,W=-1,H=-1,Y=NaN,Z=!0,se=!1,ce=!0,ue=!0,$e=!0,fe=0,ze=D,Re=0,xe=c.Xa(D),gt=c.Ja(D),Bt=0;Bt<gt;xe=c.U(xe),Bt++){var vt=c.bc(xe);if(vt==null){if(!c.ed(xe,j))continue;vt=j}z==-1&&(z=xe);for(var rt=0;A<a.length&&xe==a[A].tg;){N=a[A].Ns;var st=a[A].tg,Ze=a[A].OA,It=a[A].Lm,We=a[A].Al,br=a[A].VH;if(a[A].Ei==2){if(se||(ze=N,z=st,Re=Ze,W=It,H=We,Y=br,F=2,p!=null?P=new h.Ta:fe=0,$e=!1,ue=!0),Ze=a[A].UH,br=a[A].OT,p!=null?(vt.ah(rt,a[A].UH,I),P.oc(I.get(),ue)):fe++,rt=Ze,se=!0,ue=Z=!1,A+1==a.length||a[A+1].Ei!=2||a[A+1].tg==st&&a[A+1].OA!=rt){if(p!=null){var Qe=new g(P,2,N,st,Ze,F,ze,z,Re,It,We);p.push(Qe)}else null.add(fe);ze=N,z=st,Re=Ze,W=It,H=We,Y=br,F=2,se=Z=!1,ue=$e=!0}}else{var Ti=c.U(st);if(A<a.length-1&&a[A+1].tg==Ti&&a[A+1].Al==We&&a[A+1].Ei==2)Ze!=rt&&($e&&(p!=null?P=new h.Ta:fe=0),Z=0<A&&a[A-1].Ns==N?F==1?0:F==0?1:3:3,p!=null?(vt.ah(rt,Ze,I),P.oc(I.get(),ue),Qe=new g(P,Z,N,st,Ze,F,ze,z,Re,It,We),p.push(Qe)):(fe++,null.add(fe)),rt=Ze,ze=N,z=st,Re=Ze,W=It,H=We,Y=br,F=Z,Z=ce=!1,ue=$e=!0);else if(!r.CM(n,c,a,A,m,b)){r.zM(c,a,A,D,xe,x,T);var ut=!1;if(Ti=!1,Qe=!0,!(m.qb(x)||b.qb(x)||m.qb(T)||b.qb(T))){f[0].L(m),f[1].L(b),f[2].L(x),f[3].L(T),f.sort(h.h.nu);var Ru=f[0],Lu=f[1],Du=f[2],Pi=f[3];Ru.qb(m)?Lu.qb(b)?n?(Ti=ut=!0,Qe=!1):ut=!1:Pi.qb(b)?n?Qe=Ti=ut=!0:ut=!1:(ut=!0,Qe=Lu.qb(x)):Lu.qb(m)?Du.qb(b)?n?(Ti=ut=!0,Qe=!1):ut=!1:Ru.qb(b)?n?Qe=Ti=ut=!0:ut=!1:(ut=!0,Qe=Du.qb(x)):Du.qb(m)?Pi.qb(b)?n?(Ti=ut=!0,Qe=!1):ut=!1:Lu.qb(b)?n?Qe=Ti=ut=!0:ut=!1:(ut=!0,Qe=Pi.qb(x)):Ru.qb(b)?n?(Ti=ut=!0,Qe=!1):ut=!1:Du.qb(b)?n?Qe=Ti=ut=!0:ut=!1:(ut=!0,Qe=Ru.qb(x))}ut&&(ut=xe==st,(Ze!=rt||ut&&rt==0)&&($e&&(p!=null?P=new h.Ta:fe=0),p!=null?(vt.ah(rt,Ze,I),P.oc(I.get(),ue)):fe++),Qe?F!=1?((Ze!=rt||ut&&rt==0)&&(p!=null?(Qe=new g(P,1,N,st,Ze,F,ze,z,Re,It,We),p.push(Qe)):null.add(fe)),Ti?(A>=a.length-2||a[A+2].Ns!=N)&&(F=0):F=1):((Ze!=rt||ut&&rt==0)&&(p!=null?(Qe=new g(P,3,N,st,Ze,F,ze,z,Re,It,We),p.push(Qe)):null.add(fe)),F=1):F!=0?((Ze!=rt||ut&&rt==0)&&(p!=null?(Qe=new g(P,0,N,st,Ze,F,ze,z,Re,It,We),p.push(Qe)):null.add(fe)),Ti?(A>=a.length-2||a[A+2].Ns!=N)&&(F=1):F=0):((Ze!=rt||ut&&rt==0)&&(p!=null?(Qe=new g(P,3,N,st,Ze,F,ze,z,Re,It,We),p.push(Qe)):null.add(fe)),F=0),(Ze!=rt||ut&&rt==0)&&(rt=Ze,ze=N,z=st,Re=Ze,W=It,H=We,Y=br,Z=ce=!1,ue=$e=!0))}}A++}rt!=1&&($e&&(p!=null?P=new h.Ta:fe=0),p!=null?(vt.ah(rt,1,I),P.oc(I.get(),ue)):fe++,ue=$e=!1,ce=!0)}ce&&(Ze=1,st=c.rj(D),st=c.Ma(st),We=It=-1,br=NaN,Z?p!=null?(Qe=new g(P,4,N,st,Ze,F,ze,z,Re,It,We),p.push(Qe)):null.add(fe):(Z=F==1?0:F==0?1:3,p!=null?(Qe=new g(P,Z,N,st,Ze,F,ze,z,Re,It,We),p.push(Qe)):null.add(fe)))}},r.CM=function(n,a,c,p,f,m){var b=c[p].VH;if(b==1)return r.AM(n,a,c,p,f,m);if(b==0)return r.BM(n,a,c,p,f,m);throw h.i.Qa()},r.AM=function(n,a,c,p,f,m){var b=new h.yb,x=c[p].tg,T=c[p].Lm,I=c[p].Al,A=-1,P=-1,j=-1,D=-1;if(!n&&0<p){var F=c[p-1];A=F.tg,P=F.Lm,j=F.Al,D=F.Ei}var N=-1,z=-1,W=-1,H=-1;p<c.length-1&&(N=(F=c[p+1]).tg,z=F.Lm,W=F.Al,H=F.Ei);var Y=a.U(x);return F=a.U(I),n?p==c.length-1||N!=x||z!=T||W!=F||H==2?((n=a.bc(I))==null&&(a.ed(I,b),n=b),m.L(n.kg()),f.mt(m),m.normalize(),f.normalize(),!1):((n=a.bc(I))==null&&(a.ed(I,b),n=b),f.L(n.kg()),(n=a.bc(F))==null&&(a.ed(F,b),n=b),m.L(n.kg()),f.Sq(),m.normalize(),f.normalize(),!1):0<p&&A==x&&P==T&&j==F&&D==2||p<c.length-1&&N==Y&&z==T&&W==F&&H==2?((n=a.bc(I))==null&&(a.ed(I,b),n=b),m.L(n.kg()),f.mt(m),m.normalize(),f.normalize(),!1):!(p<c.length-1&&N==x&&z==T&&W==F)||((n=a.bc(I))==null&&(a.ed(I,b),n=b),f.L(n.kg()),(n=a.bc(F))==null&&(a.ed(F,b),n=b),m.L(n.kg()),f.Sq(),m.normalize(),f.normalize(),!1)},r.BM=function(n,a,c,p,f,m){var b=new h.yb,x=c[p].tg,T=c[p].Lm,I=c[p].Al,A=-1,P=-1,j=-1,D=-1;if(!n&&p<c.length-1){var F=c[p+1];A=F.tg,P=F.Lm,j=F.Al,D=F.Ei}var N=-1,z=-1,W=-1;F=-1,0<p&&(N=(F=c[p-1]).tg,z=F.Lm,W=F.Al,F=F.Ei);var H=a.U(x),Y=a.Ma(I);return n?p!=0&&N==x&&z==T&&W==Y&&F!=2||((n=a.bc(I))==null&&(a.ed(I,b),n=b),m.L(n.kg()),f.mt(m),m.normalize(),f.normalize(),!1):!(0<p&&N==x&&z==T&&W==Y&&F==2||p<c.length-1&&A==H&&P==T&&j==Y&&D==2)||((n=a.bc(I))==null&&(a.ed(I,b),n=b),m.L(n.kg()),f.mt(m),m.normalize(),f.normalize(),!1)},r.zM=function(n,a,c,p,f,m,b){var x=new h.yb,T=n.bc(f);if(T==null&&(n.ed(f,x),T=x),a=(c=a[c]).tg,c=c.OA,f=n.U(a),c==1)m.L(T.kg()),f!=-1&&f!=n.rj(p)?((T=n.bc(f))==null&&(n.ed(f,x),T=x),b.L(T.kg()),(T=n.bc(a))==null&&n.ed(a,x)):b.L(m),m.Sq(),b.normalize(),m.normalize();else{if(c!=0)throw h.i.Qa();b.L(T.kg()),m.mt(b),b.normalize(),m.normalize()}},r}()}(q||(q={})),function(h){var k;(k=h.bM||(h.bM={}))[k.Linear=0]="Linear",k[k.Angular=1]="Angular",k[k.Area=2]="Area";var g=function(){function p(f,m,b){this.od=m,this.ai=b,this.vA=f}return p.prototype.Nb=function(f){return f instanceof p&&this.ai===f.ai},p.aG=function(f){return f.od!==0?null:f.vA===-1?new p(-1,2,f.ai*f.ai):p.Zg(a[f.vA])},p.Zg=function(f){return(f=n[f])===void 0?null:f},p.ZO=function(f,m,b){var x=null;if(b!=null)try{b.values[0]==="EPSG"&&(x=p.Zg(parseInt(b.values[1])))}catch{}return x===null&&(x=new p(-1,f,m)),x},p.prototype.Ec=function(){return this.vA},p.prototype.CF=function(f){if(f.od!=this.od)throw h.i.Hb();return this.ai/f.ai},p.Nh=function(f,m,b){return m.CF(b)*f},p.XE=function(f,m,b,x,T){for(b=b.CF(x),x=0;x<m;x++)T[x]=f[x]*b},p}();h.Tc=g;for(var l=[109401,1e4,109402,4046.8564224,109403,4046.87260987425,109404,1,109405,.09290304,109406,.09290341161327487,109407,.09290137299531805,109408,3.34450944,109409,3429904,109410,1.000027193184865,109411,404.6872609874253,109412,.04046872609874253,109413,2.5899984703195216e6,109414,1e6,109415,.8361123569578626,109416,404.67838076760535,109417,.04046783807676053,109418,.8361244606523066,109419,.09290271785025629,109420,404.68423895571647,109421,.04046842389557164,109422,.83612589696064,109423,.0929028774400711,109424,404.6849341289498,109425,.04046849341289498,109426,.836125904805842,109427,.09290287831176021,109428,404.68493792602754,109429,.04046849379260275,109430,.09290354800069446,109431,.09290274144751023,109432,.09290207073852812,109433,.09290279616016,109434,.09290273520025,109435,.836124673027592,109436,.836118636646753,109437,.8361251654414399,109438,.83612461680225,109439,2589988110336e-6,109440,.09290286332673177,109441,.09290349665192114,109442,.83612736,109443,.8361307045194736,109444,404.68564224000005,109445,.04046856422400001,109446,.8361237024040001,109447,.0929026336004445,109448,404.683871963536,109449,.0404683871963536,109450,.01,109451,1e-4,109452,1e-6,109453,64516e-8,109454,.0006451625806477421,109455,25.292852640000003,109456,25.29295381171408,109457,3.4345281495040003e6,109458,3434290937856e-6,109459,2.89612324,109460,25e8,109461,225e8,109462,.7168473118308245,109463,100,109464,1244521604938272e-22,109465,1e-12,109466,1e-18],o=[1031,484813681109536e-23,9101,1,9102,.0174532925199433,9103,.0002908882086657216,9104,484813681109536e-20,9105,.01570796326794897,9106,.01570796326794897,9109,1e-6,9112,.0001570796326794897,9113,1570796326794897e-21,9114,.0009817477042468104],r=[1025,.001,109452,1033,.01,109451,9001,1,109404,9002,.3048,109405,9003,.3048006096012192,109406,9005,.3047972654,109407,9014,1.8288,109408,9030,1852,109409,9031,1.0000135965,109410,9033,20.11684023368047,109411,9034,.2011684023368047,109412,9035,1609.3472186944375,109413,9036,1e3,109414,9037,.9143917962000001,109415,9038,20.1166195164,109416,9039,.201166195164,109417,9040,.9143984146160287,109418,9041,.304799471538676,109419,9042,20.116765121552632,109420,9043,.2011676512155263,109421,9050,.9143992,109422,9051,.3047997333333333,109423,9052,20.1167824,109424,9053,.201167824,109425,9060,.9143992042898124,109426,9061,.3047997347632708,109427,9062,20.116782494375872,109428,9063,.2011678249437587,109429,9070,.3048008333333334,109430,9080,.3047995102481469,109431,9081,.30479841,109432,9082,.3047996,109433,9083,.3047995,109434,9084,.9143985307444408,109435,9085,.91439523,109436,9086,.9143988,109437,9087,.9143985,109438,9093,1609.344,109439,9094,.3047997101815088,109440,9095,.3048007491,109441,9096,.9144,109442,9097,20.1168,109444,9098,.201168,109445,9099,.914398,109446,9300,.3047993333333334,109447,9301,20.116756,109448,9302,.20116756,109449,109001,.9144,109442,109002,.9144018288036576,109443,109003,20.1168,109444,109004,.201168,109445,109005,.1,109450,109006,.01,109451,109007,.001,109452,109008,.0254,109453,109009,.0254000508001016,109454,109010,5.0292,109455,109011,5.029210058420118,109456,109012,1853.248,109457,109013,1853.184,109458,109014,1.7018,109459,109015,.8466683600033867,109462,109016,.0003527777777777778,109464,109017,1e-6,109465,109018,1e-9,109466,109030,5e4,109460,109031,15e4,109461],n=[],a=[],c=0;c<l.length;c+=2)n[l[c]]=new g(l[c],2,l[c+1]);for(l=null,c=0;c<o.length;c+=2)n[o[c]]=new g(o[c],1,o[c+1]);for(o=null,c=0;c<r.length;c+=3)n[r[c]]=new g(r[c],0,r[c+1]),a[r[c]]=r[c+2];r=null}(q||(q={})),function(h){var k=function(){function g(){this.xb=this.pb=0}return g.prototype.set=function(l,o){o!==void 0?(this.pb=l,this.xb=o):typeof l=="number"?(this.pb=l,this.xb=0):(this.pb=l.pb,this.xb=l.xb)},g.prototype.value=function(){return this.pb},g.prototype.add=function(l){var o=this.pb+l.pb;l=this.xb+l.xb+2220446049250313e-31*Math.abs(o),this.pb=o,this.xb=l},g.prototype.kN=function(){var l=this.pb+1,o=this.xb+2220446049250313e-31*Math.abs(l);this.pb=l,this.xb=o},g.prototype.dN=function(l,o){this.pb=l.pb+o.pb,this.xb=l.xb+o.xb+2220446049250313e-31*Math.abs(this.pb)},g.prototype.sub=function(l){if(typeof l=="number"){var o=this.pb-l;l=this.xb+2220446049250313e-31*Math.abs(o)}else o=this.pb-l.pb,l=this.xb+l.xb+2220446049250313e-31*Math.abs(o);this.pb=o,this.xb=l},g.prototype.Ag=function(l){var o=this.pb*l.pb;this.xb=this.xb*Math.abs(l.pb)+l.xb*Math.abs(this.pb)+this.xb*l.xb+2220446049250313e-31*Math.abs(o),this.pb=o},g.prototype.No=function(l){var o=this.pb*l;this.xb=this.xb*Math.abs(l)+2220446049250313e-31*Math.abs(o),this.pb=o},g.prototype.Kl=function(l,o){var r=Math.abs(l.pb)*Math.abs(o.pb);this.xb=l.xb*Math.abs(o.pb)+o.xb*Math.abs(l.pb)+l.xb*o.xb+2220446049250313e-31*Math.abs(r),this.pb=r},g.prototype.jm=function(l){var o=Math.abs(l.pb),r=this.pb/l.pb,n=(this.xb+Math.abs(r)*l.xb)/o;l.xb>.01*o&&(n*=1+(1+(l=l.xb/o))*l),this.pb=r,this.xb=n+2220446049250313e-31*Math.abs(r)},g.prototype.sqrt=function(){if(0<=this.pb){var l=Math.sqrt(this.pb),o=this.pb>10*this.xb?.5*this.xb/l:this.pb>this.xb?l-Math.sqrt(this.pb-this.xb):Math.max(l,Math.sqrt(this.pb+this.xb)-l);o+=2220446049250313e-31*Math.abs(l)}else this.pb<-1*this.xb?o=l=NaN:(l=0,o=Math.sqrt(this.xb));this.pb=l,this.xb=o},g.prototype.sin=function(l){var o=Math.sin(l.pb),r=Math.cos(l.pb);this.pb=o,o=Math.abs(o),this.xb=(Math.abs(r)+.5*o*l.xb)*l.xb+2220446049250313e-31*o},g.prototype.cos=function(l){var o=Math.sin(l.pb),r=Math.cos(l.pb);this.pb=r,r=Math.abs(r),this.xb=(Math.abs(o)+.5*r*l.xb)*l.xb+2220446049250313e-31*r},g.prototype.qg=function(){return Math.abs(this.pb)<=this.xb},g.prototype.ps=function(){return this.qg()&&this.xb!=0},g}();h.Wb=k}(q||(q={}));var Ft=new q.h,os=new q.h,qs=new q.h,as=new q.h,Us=new q.h;(function(h){var k,g;(g=k||(k={}))[g.closedPath=1]="closedPath",g[g.exteriorPath=2]="exteriorPath",g[g.ringAreaValid=4]="ringAreaValid";var l=function(){function o(r,n,a,c,p,f,m){n!==void 0?(this.ib=r,this.ck=n,this.bl=a,this.ii=c,this.ya=f,this.hA=m,this.ew=p):(this.ib=r.ib,this.ck=r.ck,this.bl=r.bl,this.ii=r.ii,this.ya=r.ya,this.hA=r.hA,this.ew=r.ew),this.bH=!0}return o.prototype.next=function(){return this.bH?(this.bH=!1,this.ii):this.ii!=-1?(this.ii=this.ib.U(this.ii),this.ya++,this.ii!=-1&&this.ii!=this.ew?this.ii:this.$T()):-1},o.prototype.$T=function(){for(this.bl=this.ib.Rb(this.bl),this.ya=0;this.ck!=-1;){for(;this.bl!=-1;this.bl=this.ib.Rb(this.bl))if(this.ew=this.ii=this.ib.Xa(this.bl),this.ii!=-1)return this.ii;if(this.ck=this.ib.ue(this.ck),this.ck==-1)break;this.hA&&!h.aa.Hc(this.ib.ic(this.ck))||(this.bl=this.ib.Ob(this.ck))}return-1},o.AP=function(r,n,a,c,p,f,m){return new o(r,n,a,c,p,f,m)},o}();h.zY=l,k=function(){function o(){this.jo=this.Am=this.wk=this.cd=this.Ck=this.vo=this.Oi=this.md=this.bi=this.Sg=this.We=this.Il=null,this.qw=this.ld=-1,this.fd=0,this.fA=!1,this.ht=this.it=this.vb=null}return o.prototype.Sh=function(r){return this.We!=null?this.We[r]:null},o.prototype.Xg=function(r,n){if(this.We==null){if(n==null)return;this.We=[];for(var a=0,c=this.vb.I();a<c;a++)this.We.push(null)}this.We[r]=n},o.prototype.bp=function(r,n){this.md.S(r,1,n)},o.prototype.ap=function(r,n){this.md.S(r,2,n)},o.prototype.VB=function(r,n){this.md.S(r,6,n)},o.prototype.Sp=function(r){return this.md.T(r,6)},o.prototype.gx=function(r,n){this.md.S(r,7,n)},o.prototype.qv=function(r){return this.md.T(r,0)},o.prototype.OJ=function(r,n){this.cd.S(r,1,n)},o.prototype.SJ=function(r,n){this.cd.S(r,0,n)},o.prototype.JF=function(r){return this.cd.T(r,7)},o.prototype.Zo=function(r,n){this.cd.S(r,3,n)},o.prototype.$o=function(r,n){this.cd.S(r,4,n)},o.prototype.uU=function(r){this.cd==null&&(this.cd=new h.$c(8));var n=this.cd.Ce();return this.cd.S(n,2,r),this.cd.S(n,5,0),this.cd.S(n,6,0),this.cd.S(n,7,n),n},o.prototype.OQ=function(r){this.cd.jd(r)},o.prototype.wU=function(r){this.md==null&&(this.md=new h.$c(8),this.td=new h.$c(5),this.Oi=new h.be(0),this.vo=new h.be(0));var n=this.md.Ce();return this.md.S(n,0,n),this.md.S(n,3,0),this.md.S(n,6,0),this.gx(n,r),n>=this.Oi.size&&(r=16>n?16:h.O.truncate(3*n/2),this.Oi.resize(r),this.vo.resize(r)),this.Oi.set(n,0),this.vo.set(n,0),n},o.prototype.sF=function(r){this.md.jd(r)},o.prototype.Vy=function(r){this.td.jd(r),this.fd--},o.prototype.oI=function(r){this.md==null&&(this.md=new h.$c(8),this.td=new h.$c(5),this.Oi=new h.be(0),this.vo=new h.be(0));var n=this.td.Ce(),a=0<=r?r:n;if(this.td.S(n,0,a),0>r){if(a>=this.vb.I()){if(r=16>a?16:h.O.truncate(3*a/2),this.vb.resize(r),this.We!=null)for(var c=0;c<r;c++)this.We.push(null);this.Sg!=null&&this.Sg.resize(r),this.it=this.vb.ub(0)}this.vb.Cb(a,-1e38,-1e38),this.We!=null&&(this.We[a]=null),this.Sg!=null&&this.Sg.write(a,1)}return this.td.S(n,4,2*a),this.fd++,n},o.prototype.wj=function(r,n,a){var c=n!=-1?this.Ma(n):this.rj(r),p=c!=-1?this.U(c):-1,f=this.oI(a==null?this.fd:-1),m=this.Ua(f);return a!=null&&this.vb.Ht(m,a),this.aj(f,r),this.Bc(f,p),this.Cc(f,c),p!=-1&&this.Cc(p,f),c!=-1&&this.Bc(c,f),a=this.dc(r),c=this.Xa(r),n==-1&&this.Wg(r,f),n==c&&this.Jf(r,f),a&&p==-1&&(this.Bc(f,f),this.Cc(f,f)),this.Vj(r,this.Ja(r)+1),r=this.Qf(r),this.Tj(r,this.I(r)+1),f},o.prototype.nm=function(){return this.jo==null&&(this.jo=new h.Sa(this.vb.description)),this.jo},o.prototype.Yo=function(r,n){this.cd.S(r,2,-134217729&this.cd.T(r,2)||(n==1?134217728:0))},o.prototype.In=function(r){return 134217728&this.cd.T(r,2)?1:0},o.prototype.hN=function(r){var n=this.Ig(r.getType(),r.description);return r.getType()==1736&&this.Yo(n,r.In()),this.UD(n,r),n},o.prototype.iN=function(r){var n=this.Ig(r.getType(),r.description);return this.VD(n,r),n},o.prototype.XV=function(r,n){this.md==null&&(this.md=new h.$c(8),this.td=new h.$c(5),this.Oi=new h.be(0),this.vo=new h.be(0)),this.md.De(this.md.Hg+r),this.td.De(this.td.Hg+n),this.Oi.Jb(this.Oi.size+r),this.vo.Jb(this.vo.size+r)},o.prototype.UD=function(r,n){this.XV(n.da(),n.I()),this.Il.Fd(n,0,n.I()),this.it=this.vb.ub(0);for(var a=this.We!=null&&n.Ve!=null,c=0,p=n.da();c<p;c++)if(!(2>n.Ja(c))){var f=this.vf(r,-1);this.kn(f,n.dc(c));for(var m=n.Ba(c),b=n.Vc(c);m<b;m++){var x=this.wj(f,-1,null);if(a)if(x=this.Ua(x),(1&n.ZF(m))!=0)this.Xg(x,null);else{var T=new h.ig;n.bc(m,T,!0),this.Xg(x,T.get())}}}},o.prototype.VD=function(r,n){this.Il.Fd(n,0,n.I()),this.it=this.vb.ub(0),r=this.vf(r,-1);var a=0;for(n=n.I();a<n;a++)this.wj(r,-1,null)},o.prototype.NX=function(r,n,a){var c=this.U(r);if(c==-1)throw h.i.Qa();for(var p=this.nm(),f=this.bd(r),m=0,b=n.ol(a);m<b;m++){var x=this.Ua(r),T=this.U(r),I=n.Vp(a,m);m==0&&(I.To(p),this.Dh(r,p)),I.getType()==322?this.Xg(x,null):this.Xg(x,h.aa.jg(I)),I.Po(p),m<b-1?r=this.wj(f,T,p):this.Dh(c,p)}},o.prototype.MX=function(r,n,a){var c=this.U(r);if(c==-1)throw h.i.Qa();for(var p=this.nm(),f=this.bd(r),m=0,b=n.ol(a);m<b;m++){var x=this.Ua(r),T=this.U(r),I=n.Vp(a,b-m-1);m==0&&(I.Po(p),this.Dh(r,p)),I.getType()==322?this.Xg(x,null):this.Xg(x,h.aa.jg(I)),I.To(p),m<b-1?r=this.wj(f,T,p):this.Dh(c,p)}},o.prototype.IF=function(){var r=new h.l;r.Oa();for(var n=this.Yq(),a=new h.h,c=!0,p=n.next();p!=-1;p=n.next())this.D(p,a),c?r.Zb(a.x,a.y):r.Lk(a.x,a.y),c=!1;return r},o.prototype.Ib=function(r){var n=r.getType();if(h.aa.Hc(n))return this.hN(r);if(n==550)return this.iN(r);throw h.i.Qa()},o.prototype.uN=function(r,n){var a=n.getType();if(h.aa.Hc(a))this.UD(r,n);else{if(a!=550)throw h.i.Qa();this.VD(r,n)}},o.prototype.mN=function(r,n){var a=this.Ig(1736,r.description);if(2>r.Ja(n))return a;this.Il.Fd(r,r.Ba(n),r.Vc(n)),this.it=this.vb.ub(0);var c=this.vf(a,-1);this.kn(c,r.dc(n)||!0);var p=this.We!=null&&r.Ve!=null,f=r.Ba(n);for(n=r.Vc(n);f<n;f++){var m=this.wj(c,-1,null);if(p)if(m=this.Ua(m),(1&r.ZF(f))!=0)this.Xg(m,null);else{var b=new h.ig;r.bc(f,b,!0),this.Xg(m,b.get())}}return a},o.prototype.Ne=function(r){var n=this.ic(r),a=h.ZK.Ig(n,this.Il.description),c=this.I(r);if(c==0)return a;if(h.aa.Hc(n)){n=this.da(r);for(var p=h.Yc.Oh(n+1),f=h.Yc.Mr(n+1,0),m=a.description,b=0,x=m.Aa;b<x;b++){for(var T=m.kd(b),I=h.ra.Va(T),A=h.Yc.YE(T,c),P=this.vb.ub(T),j=0,D=0,F=0,N=this.Ob(r);N!=-1;N=this.Rb(N)){var z=0;this.dc(N)&&(z|=1),this.YS(N)&&(z|=4),z!=0&&f.zJ(D,z);var W=this.Ja(N);if(p.write(D++,F),F+=W,T==0){W=P;var H=A,Y=new h.h;for(z=this.Xa(N);j<F;z=this.U(z),j++){var Z=this.Ua(z);W.tc(2*Z,Y),H.Tt(2*j,Y)}}else for(z=this.Xa(N);j<F;z=this.U(z),j++)for(Z=this.Ua(z),H=0;H<I;H++)Y=P.eg(Z*I+H),A.pr(j*I+H,Y)}a.hn(T,A),p.write(n,c)}a.PJ(f),a.QJ(p),a.Pc(16777215)}else if(n==550){for(m=a.description,a.resize(c),b=0,x=m.Aa;b<x;b++){for(T=m.kd(b),I=h.ra.Va(T),A=a.ub(T),P=this.vb.ub(T),j=0,N=this.Ob(r),W=this.Ja(N),z=this.Xa(N);j<W;z=this.U(z),j++)for(Z=this.Ua(z),H=0;H<I;H++)Y=P.eg(Z*I+H),A.pr(j*I+H,Y);a.hn(T,A)}a.Pc(16777215)}return a},o.prototype.BB=function(r){for(var n=this.Ob(r);n!=-1;n=this.Zq(n));n=this.PR(r);var a=this.ue(r);n!=-1?this.OJ(n,a):this.ld=a,a!=-1?this.SJ(a,n):this.qw=n,this.OQ(r)},o.prototype.Ig=function(r,n){return n===void 0?this.$E(r,h.ee.og()):this.$E(r,n)},o.prototype.$E=function(r,n){return r=this.uU(r),this.vb==null?this.vb=this.Il=new h.de(n):this.Il.Jl(n),this.ht=this.Il.description,this.fA=1<this.ht.Aa,this.ld==-1?this.ld=r:(this.SJ(r,this.qw),this.OJ(this.qw,r)),this.qw=r},o.prototype.ue=function(r){return this.cd.T(r,1)},o.prototype.PR=function(r){return this.cd.T(r,0)},o.prototype.ic=function(r){return 2147483647&this.cd.T(r,2)},o.prototype.HJ=function(r,n,a){n=this.wk[n],(r=this.JF(r))>=n.size&&n.resize(Math.max(h.O.truncate(1.25*r),16),-1),n.write(r,a)},o.prototype.KF=function(r,n){return(r=this.JF(r))<(n=this.wk[n]).size?n.read(r):-1},o.prototype.aF=function(){this.wk==null&&(this.wk=[]);for(var r=0;r<this.wk.length;r++)if(this.wk[r]==null)return this.wk[r]=h.Yc.Oh(0),r;return this.wk.push(h.Yc.Oh(0)),this.wk.length-1},o.prototype.xW=function(r){this.wk[r]=null},o.prototype.Ob=function(r){return this.cd.T(r,3)},o.prototype.kv=function(r){return this.cd.T(r,4)},o.prototype.I=function(r){return this.cd.T(r,5)},o.prototype.da=function(r){return this.cd.T(r,6)},o.prototype.Gp=function(r,n,a){for(var c=0,p=this.ld;p!=-1;p=this.ue(p)){var f=this.ic(p);if(h.aa.Hc(f)&&(!a||f==1736)){f=this.ic(p)==1736;for(var m=this.Ob(p);m!=-1;){for(var b=0,x=this.Xa(m);b<h.O.truncate(this.Ja(m)/2);){var T=this.U(x);if(T==-1)break;var I=this.Ua(x),A=this.Sh(I);A!=null?I=A.Qb():(A=this.Ua(T),I=this.vb.yr(I,A)),I<=r?(I==0?c==0&&(c=-1):c=1,T!=this.rj(m)&&(this.lC(T,x),this.pd(T,!0))):x=this.U(x),b++}for(b=this.Xa(m),x=this.dc(m)?b:this.rj(m);0<this.Ja(m);){if((T=this.Ma(x))==-1){this.pd(x,!0),c==0&&(c=-1);break}var P=this.Ua(T);if((A=this.Sh(P))!=null?I=A.Qb():(I=this.Ua(x),I=this.vb.yr(I,P)),I<=r)I==0?c==0&&(c=-1):c=1,this.lC(T,x),this.pd(T,!1),b==T&&(b=this.Xa(m));else if((x=this.Ma(x))==b)break}x=this.Ja(m),n&&(f?3>x:2>x)?(m=this.Zq(m),c=0<x?1:c==0?-1:c):m=this.Rb(m)}}}return c},o.prototype.lC=function(r,n){var a=this.Ua(r),c=this.Ua(n);if(this.Sg!=null&&(a=this.Sg.read(a),this.Sg.write(c,a)),this.bi!=null){for(c=0,a=this.bi.length;c<a;c++)if(this.bi[c]!=null){var p=this.Pa(r,c);p!=-1&&this.Ra(n,c,p)}}},o.prototype.Ul=function(r,n,a){var c=0,p=this.U(r);if(p==-1)throw h.i.Qa();for(var f=this.Ua(r),m=this.Ua(p),b=this.Sh(f),x=b==null?this.vb.yr(f,m):b.Qb(),T=0;T<a;T++){var I=n[T];if(0<I&&1>I){var A=I;b!=null&&(A=0<x?b.Ux(I)/x:0),this.vb.kD(f,m,A,this.nm());var P=this.wj(this.bd(r),p,this.nm());if(c++,b!=null){var j=b.dl(0,I);A=this.Ua(this.Ma(P)),this.Xg(A,j),this.mf(P,j.wc()),T!=a-1&&n[T+1]!=1||(I=b.dl(I,1),this.Xg(A,I))}}}return c},o.prototype.LX=function(r,n,a){var c=0,p=this.U(r);if(p==-1)throw h.i.fa("internal error");var f=this.Ua(r),m=this.Ua(p),b=this.Sh(f),x=b==null?this.vb.yr(f,m):b.Qb(),T=0;r=this.bd(r);for(var I=0;I<a;I++){var A=n[I];if(T<A&&1>A){var P=A;if(b!=null&&(P=0<x?b.Ux(A)/x:0),this.vb.kD(f,m,P,this.nm()),P=this.yS(r,p,this.nm()),c++,b!=null){T=b.dl(T,A);var j=this.Ua(this.Ma(P));this.Xg(j,T),this.Cb(P,T.pa,T.la),I!=a-1&&n[I+1]!=1||(T=b.dl(A,1),P=this.Ua(P),this.Xg(P,T))}}T=A}return c},o.prototype.yS=function(r,n,a){var c=n!=-1?this.Ma(n):this.rj(r),p=c!=-1?this.U(c):-1,f=this.oI(a==null?this.fd:-1),m=this.Ua(f);return a!=null&&this.vb.Ht(m,a),this.aj(f,r),this.Bc(f,p),this.Cc(f,c),p!=-1&&this.Cc(p,f),c!=-1&&this.Bc(c,f),a=this.dc(r),c=this.Xa(r),n==-1&&this.Wg(r,f),n==c&&(a&&c!=-1||this.Jf(r,f)),a&&p==-1&&(this.Bc(f,f),this.Cc(f,f)),this.Vj(r,this.Ja(r)+1),r=this.Qf(r),this.Tj(r,this.I(r)+1),f},o.prototype.uE=function(r,n,a){var c=this.Ua(n),p=this.Ua(a);if(0>c||p>this.fd-1)throw h.i.N("invalid call");if(c>p&&!this.dc(r))throw h.i.N("cannot iterate across an open path");for(r=0;n!=a;n=this.U(n))c=this.Ua(n),(p=this.Sh(c))!=null?r+=p.Qb():(p=this.Ua(this.U(n)),r+=this.vb.yr(c,p));return r},o.prototype.Dh=function(r,n){var a=this.Ua(r);this.vb.Ht(a,n),(a=this.Sh(a))!=null&&a.setStart(n),(r=this.Ma(r))!=-1&&(r=this.Ua(r),this.Sh(r)!=null&&a.setEnd(n))},o.prototype.Vi=function(r,n){r=this.Ua(r),this.vb.ve(r,n)},o.prototype.mf=function(r,n){this.Cb(r,n.x,n.y)},o.prototype.Cb=function(r,n,a){var c=this.Ua(r);this.vb.Cb(c,n,a),(c=this.Sh(c))!=null&&c.ZB(n,a),(r=this.Ma(r))!=-1&&(r=this.Ua(r),this.Sh(r)!=null&&c.Ql(n,a))},o.prototype.D=function(r,n){this.vb.D(this.td.T(r,0),n)},o.prototype.Gc=function(r,n){this.vb.za[0].tc(2*this.td.T(r,0),n)},o.prototype.Na=function(r){var n=new h.h;return this.vb.D(this.td.T(r,0),n),n},o.prototype.dG=function(r,n){this.it.tc(2*r,n)},o.prototype.Uc=function(r,n,a){return this.vb.Uc(r,this.Ua(n),a)},o.prototype.setAttribute=function(r,n,a,c){this.vb.setAttribute(r,this.Ua(n),a,c)},o.prototype.Ua=function(r){return this.td.T(r,0)},o.prototype.ih=function(){var r=new h.h;return this.D(void 0,r),r.y},o.prototype.fq=function(r,n){r=this.Ua(r),n=this.Ua(n);var a=this.vb.za[0].o;return a[2*r]===a[2*n]&&a[2*r+1]===a[2*n+1]},o.prototype.Dv=function(r,n){r=this.Ua(r);var a=this.vb.za[0].o;return a[2*r]===n.x&&a[2*r+1]===n.y},o.prototype.vX=function(r,n){if(1>n&&(n=1),this.Sg==null){if(n==1)return;this.Sg=h.Yc.Dn(this.vb.I(),1)}(r=this.Ua(r))>=this.Sg.size&&this.Sg.resize(r+1,1),this.Sg.write(r,n)},o.prototype.cG=function(r){return r=this.Ua(r),this.Sg==null||r>=this.Sg.size?1:this.Sg.read(r)},o.prototype.Ra=function(r,n,a){n=this.bi[n],r=this.Ua(r),n.size<this.vb.I()&&n.resize(this.vb.I(),-1),n.write(r,a)},o.prototype.Pa=function(r,n){return(r=this.Ua(r))<(n=this.bi[n]).size?n.read(r):-1},o.prototype.Gd=function(){this.bi==null&&(this.bi=[]);for(var r=0;r<this.bi.length;r++)if(this.bi[r]==null)return this.bi[r]=h.Yc.Oh(0,-1),r;return this.bi.push(h.Yc.Oh(0,-1)),this.bi.length-1},o.prototype.Td=function(r){this.bi[r]=null},o.prototype.bc=function(r){return this.We!=null?(r=this.Ua(r),this.We[r]):null},o.prototype.ed=function(r,n){var a=this.td.T(r,2);if(a==-1)return!1;if(this.fA){var c=new h.Sa;this.Vi(r,c),n.setStart(c),this.Vi(a,c),n.setEnd(c)}else this.vb.Gc(this.td.T(r,0),Ft),n.em(0,Ft),this.vb.Gc(this.td.T(a,0),Ft),n.em(1,Ft);return!0},o.prototype.mW=function(r,n,a){if(this.fA){var c=new h.Sa;this.Vi(r,c),a.setStart(c),this.Vi(n,c),a.setEnd(c)}else this.vb.Gc(r,Ft),a.em(0,Ft),this.vb.Gc(n,Ft),a.em(1,Ft)},o.prototype.vf=function(r,n){if(n!=-1){if(r!=this.Qf(n))throw h.i.Qa();var a=this.cs(n)}else a=this.kv(r);var c=this.wU(r);return n!=-1&&this.bp(n,c),this.ap(c,n),this.bp(c,a),a!=-1?this.ap(a,c):this.Zo(r,c),n==-1&&this.$o(r,c),this.Rl(r,this.da(r)+1),c},o.prototype.nG=function(r,n,a,c){r=this.vf(r,-1);for(var p=0,f=n,m=!1;f==a&&(m=!0),this.aj(f,r),p++,(f=this.U(f))!=n;);return this.kn(r,!0),this.Vj(r,p),m&&(n=a),this.Jf(r,n),this.Wg(r,this.Ma(n)),this.cp(r,!1),c!=null&&(c[0]=m),r},o.prototype.Zq=function(r){var n=this.cs(r),a=this.Rb(r),c=this.Qf(r);return n!=-1?this.ap(n,a):this.Zo(c,a),a!=-1?this.bp(a,n):this.$o(c,n),this.AO(r),this.Rl(c,this.da(c)-1),this.sF(r),a},o.prototype.AO=function(r){var n=this.Xa(r);if(n!=-1){for(var a=0,c=this.Ja(r);a<c;a++){var p=n;n=this.U(n),this.Vy(p)}n=this.Qf(r),this.Tj(n,this.I(n)-this.Ja(r))}this.Vj(r,0)},o.prototype.Rb=function(r){return this.md.T(r,2)},o.prototype.cs=function(r){return this.md.T(r,1)},o.prototype.Ja=function(r){return this.md.T(r,3)},o.prototype.dc=function(r){return(1&this.Sp(r))!=0},o.prototype.kn=function(r,n){if(this.dc(r)!=n){if(0<this.Ja(r)){var a=this.Xa(r),c=this.rj(r);n?(this.Bc(c,a),this.Cc(a,c),a=this.Ua(c)):(this.Bc(c,-1),this.Cc(a,-1),a=this.Ua(c)),this.Xg(a,null)}this.VB(r,(1|this.Sp(r))-1|(n?1:0))}},o.prototype.Qf=function(r){return this.md.T(r,7)},o.prototype.YS=function(r){return(2&this.Sp(r))!=0},o.prototype.PB=function(r,n){this.VB(r,(2|this.Sp(r))-2|(n?2:0))},o.prototype.wz=function(r){if(this.cT(r))return this.Oi.get(this.qv(r));var n=new h.yb,a=this.Xa(r);if(a==-1)return 0;var c=new h.h;this.D(a,c);for(var p=0,f=0,m=this.Ja(r);f<m;f++,a=this.U(a)){var b=this.bc(a);if(b==null){if(!this.ed(a,n))continue;b=n}p+=b.Tx(c.x,c.y)}return this.cp(r,!0),this.Oi.set(this.qv(r),p),p},o.prototype.gr=function(r,n,a){n=this.Ck[n],r=this.qv(r),n.size<this.Oi.size&&n.resize(this.Oi.size,-1),n.write(r,a)},o.prototype.sj=function(r,n){return(r=this.qv(r))<(n=this.Ck[n]).size?n.read(r):-1},o.prototype.Ky=function(){this.Ck==null&&(this.Ck=[]);for(var r=0;r<this.Ck.length;r++)if(this.Ck[r]==null)return this.Ck[r]=h.Yc.Oh(0),r;return this.Ck.push(h.Yc.Oh(0)),this.Ck.length-1},o.prototype.CB=function(r){this.Ck[r]=null},o.prototype.ZT=function(r,n,a){if(a==-1)throw h.i.N();if(n!=a){var c=this.Rb(a),p=this.cs(a),f=this.Qf(a);p==-1?this.Zo(f,c):this.ap(p,c),c==-1?this.$o(f,p):this.bp(c,p),this.Tj(f,this.I(f)-this.Ja(a)),this.Rl(f,this.da(f)-1),p=n==-1?this.kv(r):this.cs(n),this.bp(a,p),this.ap(a,n),n==-1?this.$o(r,a):this.bp(n,a),p==-1?this.Zo(r,a):this.ap(p,a),this.Tj(r,this.I(r)+this.Ja(a)),this.Rl(r,this.da(r)+1),this.gx(a,r)}},o.prototype.ij=function(r,n){this.vb.ve(this.Ua(n),this.nm()),this.wj(r,-1,this.nm())},o.prototype.pd=function(r,n){var a=this.bd(r),c=this.Ma(r),p=this.U(r);c!=-1&&this.Bc(c,p);var f=this.Ja(a);if(r==this.Xa(a)&&this.Jf(a,1<f?p:-1),p!=-1&&this.Cc(p,c),r==this.rj(a)&&this.Wg(a,1<f?c:-1),c!=-1&&p!=-1){c=this.Ua(c);var m=this.Ua(p);n?(n=this.Sh(c))!=null&&(c=new h.h,this.vb.D(m,c),n.Qc(c)):(m=this.Ua(r),n=this.Sh(m),this.Xg(c,n),n!=null&&(c=this.vb.Na(c),n.Dc(c)))}return this.Vj(a,f-1),a=this.Qf(a),this.Tj(a,this.I(a)-1),this.Vy(r),p},o.prototype.Xa=function(r){return this.md.T(r,4)},o.prototype.rj=function(r){return this.md.T(r,5)},o.prototype.U=function(r){return this.td.T(r,2)},o.prototype.Ma=function(r){return this.td.T(r,1)},o.prototype.bd=function(r){return this.td.T(r,3)},o.prototype.fc=function(r,n){return this.wj(r,-1,n)},o.prototype.Yq=function(r){if(r===void 0)return this.Yq(!1);if(r instanceof l)return new l(r);var n,a=-1,c=-1,p=-1,f=0,m=!1;for(n=this.ld;n!=-1;n=this.ue(n))if(!r||h.aa.Hc(this.ic(n))){for(a=this.Ob(n);a!=-1;a=this.Rb(a))if(p=c=this.Xa(a),f=0,c!=-1){m=!0;break}if(m)break}return l.AP(this,n,a,c,p,f,r)},o.prototype.Oc=function(r){if(this.Il.Oc(r),this.We!=null)for(var n=0,a=this.We.length;n<a;n++)this.We[n]!=null&&this.We[n].Oc(r)},o.prototype.jr=function(r,n,a,c){c?this.NX(r,n,a):this.MX(r,n,a)},o.prototype.Cc=function(r,n){this.td.S(r,1,n)},o.prototype.Bc=function(r,n){this.td.S(r,2,n)},o.prototype.aj=function(r,n){this.td.S(r,3,n)},o.prototype.Vj=function(r,n){this.md.S(r,3,n)},o.prototype.Jf=function(r,n){this.md.S(r,4,n)},o.prototype.Wg=function(r,n){this.md.S(r,5,n)},o.prototype.Rl=function(r,n){this.cd.S(r,6,n)},o.prototype.Tj=function(r,n){this.cd.S(r,5,n)},o.prototype.pJ=function(r){var n=r;do{var a=this.U(n);this.Bc(n,this.Ma(n)),this.Cc(n,a),n=a}while(n!=r)},o.prototype.bC=function(r){this.fd=r},o.prototype.$q=function(r){var n=this.cs(r),a=this.Rb(r),c=this.Qf(r);n!=-1?this.ap(n,a):this.Zo(c,a),a!=-1?this.bp(a,n):this.$o(c,n),this.Jf(r,-1),this.Wg(r,-1),this.sF(r)},o.prototype.mi=function(r,n){var a=this.Ma(r),c=this.U(r);if(a!=-1&&this.Bc(a,c),c!=-1&&this.Cc(c,a),a!=-1&&c!=-1)if(a=this.Ua(a),c=this.Ua(c),n){if((n=this.Sh(a))!=null){var p=new h.h;this.vb.D(c,p),n.Qc(p)}}else n=this.Ua(r),n=this.Sh(n),this.Xg(a,n),n!=null&&(p=new h.h,this.vb.D(a,p),n.Dc(p));this.Vy(r)},o.prototype.cT=function(r){return(4&this.Sp(r))!=0},o.prototype.cp=function(r,n){this.VB(r,(4|this.Sp(r))-4|(n?4:0))},o.prototype.nx=function(r,n){var a=this.td.o;this.vb.mc();var c=this.vb.za[0].o;r.Vd(0,n,function(p,f){var m=a[5*p];p=a[5*f],f=c[2*m],m=c[2*m+1];var b=c[2*p];return m<(p=c[2*p+1])?-1:m>p?1:f<b?-1:f>b?1:0})},o.prototype.jS=function(){for(var r=this.ld;r!=-1;r=this.ue(r))if(!h.aa.Hc(this.ic(r)))return!0;return!1},o.prototype.hC=function(r,n){for(var a=this.Ob(r),c=this.Ob(n),p=this.kv(r),f=this.kv(n),m=this.Ob(r);m!=-1;m=this.Rb(m))this.gx(m,n);for(m=this.Ob(n);m!=-1;m=this.Rb(m))this.gx(m,r);this.Zo(r,c),this.Zo(n,a),this.$o(r,f),this.$o(n,p),a=this.I(r),c=this.da(r),p=this.da(n),this.Tj(r,this.I(n)),this.Tj(n,a),this.Rl(r,p),this.Rl(n,c),a=this.cd.T(r,2),this.cd.S(r,2,this.cd.T(n,2)),this.cd.S(n,2,a)},o}(),h.gd=k})(q||(q={})),function(h){var k=function(g){function l(o,r,n,a){var c=g.call(this)||this;return c.$=new h.l,o===void 0?c.UE():typeof o=="number"?c.VO(o,r,n,a):o instanceof h.Sa?r!==void 0?c.Qu(o,r,n):c.WO(o):o instanceof h.ra?r!==void 0?c.YO(o,r):c.XO(o):o instanceof h.l?c.UO(o):c.UE(),c}return nt(l,g),l.prototype.Qu=function(o,r,n){this.description=h.ee.og(),this.$.Oa(),o.B()||this.tu(o,r,n)},l.prototype.UO=function(o){this.description=h.ee.og(),this.$.K(o),this.$.normalize()},l.prototype.XO=function(o){if(o==null)throw h.i.N();this.description=o,this.$.Oa()},l.prototype.YO=function(o,r){if(o==null)throw h.i.N();this.description=o,this.$.K(r),this.$.normalize()},l.prototype.UE=function(){this.description=h.ee.og(),this.$.Oa()},l.prototype.WO=function(o){this.description=h.ee.og(),this.$.Oa(),o.B()||this.tu(o)},l.prototype.VO=function(o,r,n,a){this.description=h.ee.og(),this.K(o,r,n,a)},l.prototype.K=function(o,r,n,a){if(this.vc(),typeof o=="number")this.$.K(o,r,n,a);else for(this.Oa(),r=0,n=o.length;r<n;r++)this.Zb(o[r])},l.prototype.Xo=function(o){if(this.vc(),!o.fT())throw h.i.N();this.$.K(o)},l.prototype.Oa=function(){this.vc(),this.$.Oa()},l.prototype.B=function(){return this.$.B()},l.prototype.R=function(){return this.$.R()},l.prototype.ca=function(){return this.$.ca()},l.prototype.gk=function(){return this.$.gk()},l.prototype.Jp=function(){return this.$.Jp()},l.prototype.Ip=function(){return this.$.sf()},l.prototype.Zb=function(o){if(o instanceof h.h)this.vc(),this.$.Zb(o);else if(o instanceof h.l)this.vc(),this.$.Zb(o);else if(o instanceof h.Sa){if(this.vc(),!o.Ac()){var r=o.description;if(this.description!=r&&this.Jl(r),this.B())this.tu(o);else{this.$.Zb(o.D());for(var n=1,a=r.Aa;n<a;n++)for(var c=r.Ed(n),p=h.ra.Va(c),f=0;f<p;f++){var m=o.Uc(c,f),b=this.Tg(c,f);b.Zb(m),this.setInterval(c,f,b)}}}}else if(o instanceof l&&!o.B())for((r=o.description)!=this.description&&this.Jl(r),this.$.Zb(o.$),n=1,a=r.Aa;n<a;n++)for(c=r.kd(n),p=h.ra.Va(c),f=0;f<p;f++)m=o.Tg(c,f),(b=this.Tg(c,f)).Zb(m),this.setInterval(c,f,b)},l.prototype.tu=function(o,r,n){if(r!==void 0){this.$.K(o.D(),r,n),n=1;for(var a=(r=o.description).Aa;n<a;n++)for(var c=r.Ed(n),p=h.ra.Va(c),f=0;f<p;f++){var m=o.Uc(c,f);this.setInterval(c,f,m,m)}}else for(this.$.K(o.ka[0],o.ka[1]),n=1,a=(r=o.description).Aa;n<a;n++)for(c=r.Ed(n),p=h.ra.Va(c),f=0;f<p;f++)m=o.Uc(c,f),this.setInterval(c,f,m,m)},l.prototype.setInterval=function(o,r,n,a){if(n=typeof n=="number"?new h.Nc(n,a):n,this.vc(),o==0)if(r==0)this.$.v=n.oa,this.$.C=n.va;else{if(r!=1)throw h.i.ce();this.$.G=n.oa,this.$.H=n.va}else this.vD(0,o,r,n.oa),this.vD(1,o,r,n.va)},l.prototype.W=function(o,r){this.vc(),this.$.W(o,r)},l.prototype.Oc=function(o){if(o instanceof h.Dd)this.vc(),o.mC(this.$);else if(this.vc(),!this.$.B()){var r=new h.OK;this.Qo(r),r.XS()?r.Oa():o.mC(r)}},l.prototype.copyTo=function(o){if(o.getType()!=this.getType())throw h.i.N();if(o.vc(),o.description=this.description,o.$.K(this.$),o.ka=null,this.ka!=null){o.ou();for(var r=0;r<2*(this.description.Ae.length-2);r++)o.ka[r]=this.ka[r]}},l.prototype.Ia=function(){return new l(this.description)},l.prototype.Ke=function(){return this.$.wF()},l.prototype.Qb=function(){return this.$.yR()},l.prototype.getType=function(){return 197},l.prototype.Db=function(){return 2},l.prototype.bn=function(o){this.copyTo(o)},l.prototype.A=function(o){o.v=this.$.v,o.G=this.$.G,o.C=this.$.C,o.H=this.$.H},l.prototype.Qo=function(o){o.v=this.$.v,o.G=this.$.G,o.C=this.$.C,o.H=this.$.H,o.K(this.$.v,this.$.G,this.Od(0,1,0),this.$.C,this.$.H,this.Od(1,1,0))},l.prototype.Tg=function(o,r){var n=new h.Nc;return n.K(this.Od(0,o,r),this.Od(1,o,r)),n},l.prototype.Hf=function(o,r){r.Nf(this.description);var n=this.description.Aa-1;switch(o){case 0:for(o=0;o<n;o++)for(var a=this.description.kd(o),c=h.ra.Va(a),p=0;p<c;p++)r.setAttribute(a,p,this.Od(0,a,p));r.Cb(this.$.v,this.$.G);break;case 1:for(o=0;o<n;o++)for(a=this.description.kd(o),c=h.ra.Va(a),p=0;p<c;p++)r.setAttribute(a,p,this.Od(1,a,p));r.Cb(this.$.v,this.$.H);break;case 2:for(o=0;o<n;o++)for(a=this.description.kd(o),c=h.ra.Va(a),p=0;p<c;p++)r.setAttribute(a,p,this.Od(0,a,p));r.Cb(this.$.C,this.$.H);break;case 3:for(o=0;o<n;o++)for(a=this.description.kd(o),c=h.ra.Va(a),p=0;p<c;p++)r.setAttribute(a,p,this.Od(1,a,p));r.Cb(this.$.C,this.$.G);break;default:throw h.i.ce()}},l.prototype.mB=function(o,r){o=this.$.mB(o),r.ma(o.x,o.y)},l.prototype.kR=function(o,r){return r*(o.Oq-2)},l.prototype.xF=function(o,r,n){if(this.$.B())throw h.i.fa("empty geometry");if(r==0)return o!=0?n!=0?this.$.H:this.$.C:n!=0?this.$.G:this.$.v;if(n>=h.ra.Va(r))throw h.i.N();var a=this.description.Pf(r);return this.ou(),0<=a?this.ka[this.kR(this.description,o)+this.description.LR(a)-2+n]:h.ra.se(r)},l.prototype.ou=function(){if(this.vc(),this.ka==null&&2<this.description.Ae.length){this.ka=[];for(var o=l.Gg(this.description,0),r=l.Gg(this.description,1),n=0,a=1,c=this.description.Aa;a<c;a++){var p=this.description.kd(a),f=h.ra.Va(p);p=h.ra.se(p);for(var m=0;m<f;m++)this.ka[o+n]=p,this.ka[r+n]=p,n++}}},l.prototype.sn=function(o){if(this.ka!=null)if(2<o.Ae.length){for(var r=h.ee.Iw(o,this.description),n=[],a=l.Gg(this.description,0),c=l.Gg(this.description,1),p=l.Gg(o,0),f=l.Gg(o,1),m=0,b=1,x=o.Aa;b<x;b++){var T=o.kd(b),I=h.ra.Va(T);if(r[b]==-1){var A=h.ra.se(T);for(T=0;T<I;T++)n[p+m]=A,n[f+m]=A,m++}else for(A=this.description.$j(r[b])-2,T=0;T<I;T++)n[p+m]=this.ka[a+A],n[f+m]=this.ka[c+A],m++,A++}this.ka=n}else this.ka=null;this.description=o},l.prototype.Od=function(o,r,n){if(this.$.B())throw h.i.fa("This operation was performed on an Empty Geometry.");if(r==0)return o!=0?n!=0?this.$.H:this.$.C:n!=0?this.$.G:this.$.v;if(n>=h.ra.Va(r))throw h.i.ce();var a=this.description.Pf(r);return 0<=a?(this.ou(),this.ka[l.Gg(this.description,o)+this.description.$j(a)-2+n]):h.ra.se(r)},l.prototype.vD=function(o,r,n,a){if(this.vc(),r==0)o!=0?n!=0?this.$.H=a:this.$.C=a:n!=0?this.$.G=a:this.$.v=a;else{if(n>=h.ra.Va(r))throw h.i.ce();if(!this.hasAttribute(r)){if(h.ra.DG(r,a))return;this.re(r)}r=this.description.Pf(r),this.ou(),this.ka[l.Gg(this.description,o)+this.description.$j(r)-2+n]=a}},l.Gg=function(o,r){return r*(o.Ae.length-2)},l.prototype.Ea=function(o){this.vc();var r=new h.l;return o.A(r),this.$.Ea(r)},l.prototype.isIntersecting=function(o){return o instanceof h.l?this.$.isIntersecting(o):this.$.isIntersecting(o.$)},l.prototype.Ju=function(o,r){this.vc(),o.B()?this.Oa():r!==void 0?this.tu(o,r):this.$.Ju(o.Lg(),o.ih())},l.prototype.offset=function(o,r){this.vc(),this.$.offset(o,r)},l.prototype.normalize=function(){this.vc(),this.$.normalize()},l.prototype.sf=function(o){if(o===void 0){if(o=new h.Sa(this.description),this.B())return o;for(r=this.description.Aa,n=1;n<r;n++)for(a=this.description.Ed(n),c=h.ra.Va(a),p=0;p<c;p++)f=.5*(this.Od(0,a,p)+this.Od(1,a,p)),o.setAttribute(a,p,f);return o.Cb(this.$.gk(),this.$.Jp()),o}if(o.Nf(this.description),this.B())o.Oa();else{for(var r=this.description.Aa,n=1;n<r;n++)for(var a=this.description.kd(n),c=h.ra.Va(a),p=0;p<c;p++){var f=.5*(this.xF(0,a,p)+this.xF(1,a,p));o.setAttribute(a,p,f)}o.Cb(this.$.sf())}},l.prototype.mz=function(){return new h.Sa(this.$.mz())},l.prototype.contains=function(o){return o instanceof h.Sa?!o.B()&&this.$.contains(o.Lg(),o.ih()):this.$.contains(o.$)},l.prototype.dP=function(o){return this.$.contains(o)},l.prototype.Nb=function(o){if(o==this)return!0;if(!(o instanceof l)||this.description!=o.description)return!1;if(this.B())return!!o.B();if(!this.$.Nb(o.$))return!1;for(var r=0,n=2*(this.description.Ae.length-2);r<n;r++)if(this.ka[r]!=o.ka[r])return!1;return!0},l.prototype.cc=function(){var o=this.description.cc();if(o=h.O.Th(o,this.$.cc()),!this.B()&&this.ka!=null)for(var r=0,n=2*(this.description.Ae.length-2);r<n;r++)o=h.O.Th(o,this.ka[r]);return o},l.prototype.es=function(){return this.$.v},l.prototype.gs=function(){return this.$.G},l.prototype.ds=function(){return this.$.C},l.prototype.fs=function(){return this.$.H},l.prototype.mg=function(){return h.pi.gm(this,null)},l.prototype.toString=function(){return this.B()?"Envelope: []":"Envelope: ["+this.$.v+", "+this.$.G+", "+this.$.C+", "+this.$.H+"]"},l}(h.aa);h.Fh=k}(q||(q={})),function(h){var k=function(){function g(l,o,r,n){l===void 0?this.Oa():(this.v=l,this.G=o,this.C=r,this.H=n)}return g.construct=function(l,o,r,n){var a=new g;return a.v=l,a.G=o,a.C=r,a.H=n,a},g.prototype.K=function(l,o,r,n){typeof l=="number"?r!==void 0?(this.v=l,this.G=o,this.C=r,this.H=n,this.normalize()):(this.v=l,this.G=o,this.C=l,this.H=o):l instanceof h.h?o!==void 0?(this.v=l.x-.5*o,this.C=this.v+o,this.G=l.y-.5*r,this.H=this.G+r,this.normalize()):(this.v=l.x,this.G=l.y,this.C=l.x,this.H=l.y):l instanceof g?this.K(l.v,l.G,l.C,l.H):l instanceof h.Nc&&(l.B()||o.B()?this.Oa():(this.v=l.oa,this.C=l.va,this.G=o.oa,this.H=o.va))},g.prototype.Zw=function(l,o){if(o!==void 0)if(o==0)this.Oa();else{this.v=l[0].x,this.G=l[0].y,this.C=this.v,this.H=this.G;for(var r=1;r<o;r++){var n=l[r];n.x<this.v?this.v=n.x:n.x>this.C&&(this.C=n.x),n.y<this.G?this.G=n.y:n.y>this.H&&(this.H=n.y)}}else if(l==null||l.length==0)this.Oa();else for(n=l[0],this.K(n.x,n.y),r=1;r<l.length;r++)o=l[r],this.Lk(o.x,o.y)},g.prototype.Oa=function(){this.H=this.C=this.G=this.v=NaN},g.prototype.B=function(){return isNaN(this.v)},g.prototype.Zb=function(l,o){typeof l=="number"?this.B()?(this.v=l,this.G=o,this.C=l,this.H=o):(this.v>l?this.v=l:this.C<l&&(this.C=l),this.G>o?this.G=o:this.H<o&&(this.H=o)):l instanceof h.h||l instanceof h.Nd?this.Zb(l.x,l.y):l instanceof g&&!l.B()&&(this.Zb(l.v,l.G),this.Zb(l.C,l.H))},g.prototype.Lk=function(l,o){this.v>l?this.v=l:this.C<l&&(this.C=l),this.G>o?this.G=o:this.H<o&&(this.H=o)},g.prototype.W=function(l,o){this.B()||(this.v-=l,this.C+=l,this.G-=o,this.H+=o,(this.v>this.C||this.G>this.H)&&this.Oa())},g.prototype.scale=function(l){0>l&&this.Oa(),this.B()||(this.v*=l,this.C*=l,this.G*=l,this.H*=l)},g.prototype.zoom=function(l,o){this.B()||this.K(this.sf(),l*this.R(),o*this.ca())},g.prototype.isIntersecting=function(l){return!this.B()&&!l.B()&&(this.v<=l.v?this.C>=l.v:l.C>=this.v)&&(this.G<=l.G?this.H>=l.G:l.H>=this.G)},g.prototype.HG=function(l){return(this.v<=l.v?this.C>=l.v:l.C>=this.v)&&(this.G<=l.G?this.H>=l.G:l.H>=this.G)},g.prototype.Ea=function(l){return!this.B()&&!l.B()&&(l.v>this.v&&(this.v=l.v),l.C<this.C&&(this.C=l.C),l.G>this.G&&(this.G=l.G),l.H<this.H&&(this.H=l.H),(l=this.v<=this.C&&this.G<=this.H)||this.Oa(),l)},g.prototype.mB=function(l){switch(l){case 0:return h.h.construct(this.v,this.G);case 1:return h.h.construct(this.v,this.H);case 2:return h.h.construct(this.C,this.H);case 3:return h.h.construct(this.C,this.G);default:throw h.i.ce()}},g.prototype.nB=function(l){if(l==null||4>l.length)throw h.i.N();l[0]!=null?l[0].ma(this.v,this.G):l[0]=h.h.construct(this.v,this.G),l[1]!=null?l[1].ma(this.v,this.H):l[1]=h.h.construct(this.v,this.H),l[2]!=null?l[2].ma(this.C,this.H):l[2]=h.h.construct(this.C,this.H),l[3]!=null?l[3].ma(this.C,this.G):l[3]=h.h.construct(this.C,this.G)},g.prototype.wF=function(){return this.B()?0:this.R()*this.ca()},g.prototype.yR=function(){return this.B()?0:2*(this.R()+this.ca())},g.prototype.gk=function(){return(this.C+this.v)/2},g.prototype.Jp=function(){return(this.H+this.G)/2},g.prototype.R=function(){return this.C-this.v},g.prototype.ca=function(){return this.H-this.G},g.prototype.move=function(l,o){this.B()||(this.v+=l,this.G+=o,this.C+=l,this.H+=o)},g.prototype.Ju=function(l,o){if(o!==void 0)this.move(l-this.gk(),o-this.Jp());else if(l instanceof h.h)this.Ju(l.x,l.y);else{if(!(l instanceof h.Sa))throw h.i.N();o=(this.C-this.v)/2;var r=(this.H-this.G)/2;this.v=l.Lg()-o,this.C=l.Lg()+o,this.G=l.ih()-r,this.H=l.ih()+r}},g.prototype.offset=function(l,o){this.v+=l,this.C+=l,this.G+=o,this.H+=o},g.prototype.normalize=function(){if(!this.B()){var l=Math.min(this.v,this.C),o=Math.max(this.v,this.C);this.v=l,this.C=o,l=Math.min(this.G,this.H),o=Math.max(this.G,this.H),this.G=l,this.H=o}},g.prototype.dn=function(l){l.ma(this.v,this.G)},g.prototype.$I=function(l){l.ma(this.C,this.G)},g.prototype.cJ=function(l){l.ma(this.v,this.H)},g.prototype.en=function(l){l.ma(this.C,this.H)},g.prototype.fT=function(){return this.B()||this.v<=this.C&&this.G<=this.H},g.prototype.sf=function(){return h.h.construct((this.C+this.v)/2,(this.H+this.G)/2)},g.prototype.mz=function(){return h.h.construct(this.v,this.G)},g.prototype.contains=function(l,o){if(o!==void 0)return l>=this.v&&l<=this.C&&o>=this.G&&o<=this.H;if(l instanceof h.Sa)return this.contains(l.Lg(),l.ih());if(l instanceof h.h)return this.contains(l.x,l.y);if(l instanceof g)return l.v>=this.v&&l.C<=this.C&&l.G>=this.G&&l.H<=this.H;throw h.i.N()},g.prototype.hm=function(l,o){if(o!==void 0)return l>this.v&&l<this.C&&o>this.G&&o<this.H;if(l instanceof h.h)return this.hm(l.x,l.y);if(l instanceof g)return l.v>this.v&&l.C<this.C&&l.G>this.G&&l.H<this.H;throw h.i.N()},g.prototype.Nb=function(l){return l==this||l instanceof g&&(!(!this.B()||!l.B())||this.v==l.v&&this.G==l.G&&this.C==l.C&&this.H==l.H)},g.prototype.cc=function(){var l=this.v;l=h.O.truncate(l^l>>>32);var o=h.O.Th(l);return l=this.C,l=h.O.truncate(l^l>>>32),o=h.O.Th(l,o),l=this.G,l=h.O.truncate(l^l>>>32),o=h.O.Th(l,o),l=this.H,l=h.O.truncate(l^l>>>32),h.O.Th(l,o)},g.prototype.xr=function(){return this.B()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.v)+Math.abs(this.C)+Math.abs(this.G)+Math.abs(this.H)+1)},g.prototype.zy=function(l,o){var r=this.Zj(l),n=this.Zj(o);if(r&n)return 0;if(!(r|n))return 4;var a=(r!=0?1:0)|(n!=0?2:0);do{var c=o.x-l.x,p=o.y-l.y;if(c>p?r&g.YC?(r&g.ju?(l.y+=p*(this.v-l.x)/c,l.x=this.v):(l.y+=p*(this.C-l.x)/c,l.x=this.C),r=this.Zj(l)):n&g.YC?(n&g.ju?(o.y+=p*(this.v-o.x)/c,o.x=this.v):(o.y+=p*(this.C-o.x)/c,o.x=this.C),n=this.Zj(o)):r!=0?(r&g.ku?(l.x+=c*(this.G-l.y)/p,l.y=this.G):(l.x+=c*(this.H-l.y)/p,l.y=this.H),r=this.Zj(l)):(n&g.ku?(o.x+=c*(this.G-o.y)/p,o.y=this.G):(o.x+=c*(this.H-o.y)/p,o.y=this.H),n=this.Zj(o)):r&g.ZC?(r&g.ku?(l.x+=c*(this.G-l.y)/p,l.y=this.G):(l.x+=c*(this.H-l.y)/p,l.y=this.H),r=this.Zj(l)):n&g.ZC?(n&g.ku?(o.x+=c*(this.G-o.y)/p,o.y=this.G):(o.x+=c*(this.H-o.y)/p,o.y=this.H),n=this.Zj(o)):r!=0?(r&g.ju?(l.y+=p*(this.v-l.x)/c,l.x=this.v):(l.y+=p*(this.C-l.x)/c,l.x=this.C),r=this.Zj(l)):(n&g.ju?(o.y+=p*(this.v-o.x)/c,o.x=this.v):(o.y+=p*(this.C-o.x)/c,o.x=this.C),n=this.Zj(o)),(r&n)!=0)return 0}while(r|n);return a},g.prototype.Zj=function(l){return(l.x<this.v?1:0)|(l.x>this.C?1:0)<<1|(l.y<this.G?1:0)<<2|(l.y>this.H?1:0)<<3},g.prototype.Bi=function(l){return!this.B()&&(this.R()<=l||this.ca()<=l)},g.prototype.tb=function(l){return l instanceof h.h?Math.sqrt(this.iK(l)):Math.sqrt(this.px(l))},g.prototype.px=function(l){var o=0,r=0,n=this.v-l.C;return n>o&&(o=n),(n=this.G-l.H)>r&&(r=n),(n=l.v-this.C)>o&&(o=n),(n=l.G-this.H)>r&&(r=n),o*o+r*r},g.prototype.iK=function(l){var o=0,r=0,n=this.v-l.x;return n>o&&(o=n),(n=this.G-l.y)>r&&(r=n),(n=l.x-this.C)>o&&(o=n),(n=l.y-this.H)>r&&(r=n),o*o+r*r},g.prototype.cn=function(l){this.B()?l.Oa():l.K(this.v,this.C)},g.ju=1,g.ku=4,g.YC=3,g.ZC=12,g}();h.l=k}(q||(q={})),function(h){var k,g;(g=k||(k={}))[g.initialize=0]="initialize",g[g.initializeRed=1]="initializeRed",g[g.initializeBlue=2]="initializeBlue",g[g.initializeRedBlue=3]="initializeRedBlue",g[g.sweep=4]="sweep",g[g.sweepBruteForce=5]="sweepBruteForce",g[g.sweepRedBlueBruteForce=6]="sweepRedBlueBruteForce",g[g.sweepRedBlue=7]="sweepRedBlue",g[g.sweepRed=8]="sweepRed",g[g.sweepBlue=9]="sweepBlue",g[g.iterate=10]="iterate",g[g.iterateRed=11]="iterateRed",g[g.iterateBlue=12]="iterateBlue",g[g.iterateBruteForce=13]="iterateBruteForce",g[g.iterateRedBlueBruteForce=14]="iterateRedBlueBruteForce",g[g.resetRed=15]="resetRed",g[g.resetBlue=16]="resetBlue";var l=function(){function o(r,n){this.ci=r,this.dH=n}return o.prototype.nr=function(r,n,a){this.ci.JX(a,r,n,this.dH)},o.prototype.$p=function(r){return this.ci.Rr(r,this.dH)},o}();k=function(){function o(){this.ow=this.oo=this.ff=this.rd=null,this.wq=new h.l,this.Am=this.Hj=this.Ij=this.Ad=this.Ef=this.Ld=this.cw=this.fo=this.qd=this.Eb=null,this.Xb=-1,this.qa=0,this.Nk()}return o.prototype.kr=function(){this.Nk(),this.Pv=!0,this.Eb==null?(this.fo=new h.ia(0),this.Eb=[]):(this.fo.Bh(0),this.Eb.length=0)},o.prototype.ad=function(r,n){if(!this.Pv)throw h.i.Hb();var a=new h.l;a.K(n),this.fo.add(r),this.Eb.push(a)},o.prototype.Fp=function(){if(!this.Pv)throw h.i.Hb();this.Pv=!1,this.Eb!=null&&0<this.Eb.length&&(this.Xb=0,this.Ic=!1)},o.prototype.pK=function(){this.Nk(),this.Ov=!0,this.Eb==null?(this.fo=new h.ia(0),this.Eb=[]):(this.fo.Bh(0),this.Eb.length=0)},o.prototype.JD=function(r,n){if(!this.Ov)throw h.i.Hb();var a=new h.l;a.K(n),this.fo.add(r),this.Eb.push(a)},o.prototype.iF=function(){if(!this.Ov)throw h.i.Hb();this.Ov=!1,this.Eb!=null&&0<this.Eb.length&&this.qd!=null&&0<this.qd.length&&(this.Xb==-1||this.Xb==2?this.Xb=3:this.Xb!=3&&(this.Xb=1),this.Ic=!1)},o.prototype.oK=function(){this.Nk(),this.Nv=!0,this.qd==null?(this.cw=new h.ia(0),this.qd=[]):(this.cw.Bh(0),this.qd.length=0)},o.prototype.ED=function(r,n){if(!this.Nv)throw h.i.Hb();var a=new h.l;a.K(n),this.cw.add(r),this.qd.push(a)},o.prototype.hF=function(){if(!this.Nv)throw h.i.Hb();this.Nv=!1,this.Eb!=null&&0<this.Eb.length&&this.qd!=null&&0<this.qd.length&&(this.Xb==-1||this.Xb==1?this.Xb=3:this.Xb!=3&&(this.Xb=2),this.Ic=!1)},o.prototype.next=function(){if(this.Ic)return!1;for(var r=!0;r;)switch(this.Xb){case 0:r=this.Gz();break;case 1:r=this.rS();break;case 2:r=this.oS();break;case 3:r=this.qS();break;case 4:r=this.UX();break;case 5:r=this.QX();break;case 6:r=this.RX();break;case 7:r=this.SX();break;case 8:r=this.ux();break;case 9:r=this.iC();break;case 10:r=this.Uz();break;case 11:r=this.jT();break;case 12:r=this.gT();break;case 13:r=this.hT();break;case 14:r=this.iT();break;case 15:r=this.kJ();break;case 16:r=this.jJ();break;default:throw h.i.Qa()}return!this.Ic},o.prototype.aC=function(r){this.qa=r},o.prototype.uz=function(r){return this.Eb[r]},o.prototype.az=function(r){return this.qd[r]},o.prototype.nl=function(r){return this.fo.read(r)},o.prototype.hl=function(r){return this.cw.read(r)},o.Tz=function(r){return(1&r)==1},o.eq=function(r){return(1&r)==0},o.prototype.Nk=function(){this.Pv=this.Nv=this.Ov=!1,this.Cf=this.Df=this.Rg=this.pe=-1,this.Ic=!0},o.prototype.Gz=function(){if(this.Af=this.Vf=-1,10>this.Eb.length)return this.pe=this.Eb.length,this.Xb=5,!0;this.rd==null&&(this.rd=new h.sr(!0),this.oo=this.rd.getIterator(),this.Ld=new h.ia(0)),this.rd.kr();for(var r=0;r<this.Eb.length;r++){var n=this.Eb[r];this.rd.Br(n.v,n.C)}for(this.rd.Fp(),this.Ld.Jb(2*this.Eb.length),this.Ld.resize(0),r=0;r<2*this.Eb.length;r++)this.Ld.add(r);return this.Kt(this.Ld,2*this.Eb.length,!0),this.pe=2*this.Eb.length,this.Xb=4,!0},o.prototype.rS=function(){if(this.Af=this.Vf=-1,10>this.Eb.length||10>this.qd.length)return this.pe=this.Eb.length,this.Xb=6,!0;this.rd==null&&(this.rd=new h.sr(!0),this.oo=this.rd.getIterator(),this.Ld=new h.ia(0)),this.rd.kr();for(var r=0;r<this.Eb.length;r++){var n=this.Eb[r];this.rd.Br(n.v,n.C)}for(this.rd.Fp(),this.Ld.Jb(2*this.Eb.length),this.Ld.resize(0),r=0;r<2*this.Eb.length;r++)this.Ld.add(r);return this.Kt(this.Ld,this.Ld.size,!0),this.pe=this.Ld.size,this.Df!=-1&&(this.Ad.bh(this.Df),this.Ij.resize(0),this.Df=-1),this.Xb=7,this.jJ()},o.prototype.oS=function(){if(this.Af=this.Vf=-1,10>this.Eb.length||10>this.qd.length)return this.pe=this.Eb.length,this.Xb=6,!0;this.ff==null&&(this.ff=new h.sr(!0),this.ow=this.ff.getIterator(),this.Ef=new h.ia(0)),this.ff.kr();for(var r=0;r<this.qd.length;r++){var n=this.qd[r];this.ff.Br(n.v,n.C)}for(this.ff.Fp(),this.Ef.Jb(2*this.qd.length),this.Ef.resize(0),r=0;r<2*this.qd.length;r++)this.Ef.add(r);return this.Kt(this.Ef,this.Ef.size,!1),this.Rg=this.Ef.size,this.Cf!=-1&&(this.Ad.bh(this.Cf),this.Hj.resize(0),this.Cf=-1),this.Xb=7,this.kJ()},o.prototype.qS=function(){if(this.Af=this.Vf=-1,10>this.Eb.length||10>this.qd.length)return this.pe=this.Eb.length,this.Xb=6,!0;this.rd==null&&(this.rd=new h.sr(!0),this.oo=this.rd.getIterator(),this.Ld=new h.ia(0)),this.ff==null&&(this.ff=new h.sr(!0),this.ow=this.ff.getIterator(),this.Ef=new h.ia(0)),this.rd.kr();for(var r=0;r<this.Eb.length;r++){var n=this.Eb[r];this.rd.Br(n.v,n.C)}for(this.rd.Fp(),this.ff.kr(),r=0;r<this.qd.length;r++)n=this.qd[r],this.ff.Br(n.v,n.C);for(this.ff.Fp(),this.Ld.Jb(2*this.Eb.length),this.Ef.Jb(2*this.qd.length),this.Ld.resize(0),this.Ef.resize(0),r=0;r<2*this.Eb.length;r++)this.Ld.add(r);for(r=0;r<2*this.qd.length;r++)this.Ef.add(r);return this.Kt(this.Ld,this.Ld.size,!0),this.Kt(this.Ef,this.Ef.size,!1),this.pe=this.Ld.size,this.Rg=this.Ef.size,this.Df!=-1&&(this.Ad.bh(this.Df),this.Ij.resize(0),this.Df=-1),this.Cf!=-1&&(this.Ad.bh(this.Cf),this.Hj.resize(0),this.Cf=-1),this.Xb=7,!0},o.prototype.UX=function(){var r=this.Ld.get(--this.pe),n=r>>1;return o.eq(r)?(this.rd.remove(n),this.pe!=0||(this.Af=this.Vf=-1,this.Ic=!0,!1)):(this.oo.EB(this.Eb[n].v,this.Eb[n].C,this.qa),this.Vf=n,this.Xb=10,!0)},o.prototype.QX=function(){return--this.pe==-1?(this.Af=this.Vf=-1,this.Ic=!0,!1):(this.Rg=this.Vf=this.pe,this.Xb=13,!0)},o.prototype.RX=function(){return--this.pe==-1?(this.Af=this.Vf=-1,this.Ic=!0,!1):(this.Vf=this.pe,this.Rg=this.qd.length,this.Xb=14,!0)},o.prototype.SX=function(){var r=this.Ld.get(this.pe-1),n=this.Ef.get(this.Rg-1),a=this.Rr(r,!0),c=this.Rr(n,!1);return a>c?this.ux():a<c?this.iC():o.Tz(r)?this.ux():o.Tz(n)?this.iC():this.ux()},o.prototype.ux=function(){var r=this.Ld.get(--this.pe),n=r>>1;if(o.eq(r))return this.Df!=-1&&this.Ij.get(n)!=-1?(this.Ad.jd(this.Df,this.Ij.get(n)),this.Ij.set(n,-1)):this.rd.remove(n),this.pe!=0||(this.Af=this.Vf=-1,this.Ic=!0,!1);if(this.Cf!=-1&&0<this.Ad.bs(this.Cf))for(r=this.Ad.rc(this.Cf);r!=-1;){var a=this.Ad.getData(r);this.ff.vj(a),this.Hj.set(a,-1),a=this.Ad.lb(r),this.Ad.jd(this.Cf,r),r=a}return 0<this.ff.size()?(this.ow.EB(this.Eb[n].v,this.Eb[n].C,this.qa),this.Vf=n,this.Xb=12):(this.Df==-1&&(this.Ad==null&&(this.Ad=new h.jp),this.Ij=new h.ia(0),this.Ij.resize(this.Eb.length,-1),this.Ij.Wj(-1,0,this.Eb.length),this.Df=this.Ad.Ph(1)),this.Ij.set(n,this.Ad.addElement(this.Df,n)),this.Xb=7),!0},o.prototype.iC=function(){var r=this.Ef.get(--this.Rg),n=r>>1;if(o.eq(r))return this.Cf!=-1&&this.Hj.get(n)!=-1?(this.Ad.jd(this.Cf,this.Hj.get(n)),this.Hj.set(n,-1)):this.ff.remove(n),this.Rg!=0||(this.Af=this.Vf=-1,this.Ic=!0,!1);if(this.Df!=-1&&0<this.Ad.bs(this.Df))for(r=this.Ad.rc(this.Df);r!=-1;){var a=this.Ad.getData(r);this.rd.vj(a),this.Ij.set(a,-1),a=this.Ad.lb(r),this.Ad.jd(this.Df,r),r=a}return 0<this.rd.size()?(this.oo.EB(this.qd[n].v,this.qd[n].C,this.qa),this.Af=n,this.Xb=11):(this.Cf==-1&&(this.Ad==null&&(this.Ad=new h.jp),this.Hj=new h.ia(0),this.Hj.resize(this.qd.length,-1),this.Hj.Wj(-1,0,this.qd.length),this.Cf=this.Ad.Ph(0)),this.Hj.set(n,this.Ad.addElement(this.Cf,n)),this.Xb=7),!0},o.prototype.Uz=function(){if(this.Af=this.oo.next(),this.Af!=-1)return!1;var r=this.Ld.get(this.pe)>>1;return this.rd.vj(r),this.Xb=4,!0},o.prototype.jT=function(){if(this.Vf=this.oo.next(),this.Vf!=-1)return!1;this.Af=this.Vf=-1;var r=this.Ef.get(this.Rg)>>1;return this.ff.vj(r),this.Xb=7,!0},o.prototype.gT=function(){if(this.Af=this.ow.next(),this.Af!=-1)return!1;var r=this.Ld.get(this.pe)>>1;return this.rd.vj(r),this.Xb=7,!0},o.prototype.hT=function(){if(--this.Rg==-1)return this.Xb=5,!0;this.wq.K(this.Eb[this.pe]);var r=this.Eb[this.Rg];return this.wq.W(this.qa,this.qa),!this.wq.isIntersecting(r)||(this.Af=this.Rg,!1)},o.prototype.iT=function(){if(--this.Rg==-1)return this.Xb=6,!0;this.wq.K(this.Eb[this.pe]);var r=this.qd[this.Rg];return this.wq.W(this.qa,this.qa),!this.wq.isIntersecting(r)||(this.Af=this.Rg,!1)},o.prototype.kJ=function(){return this.rd==null?(this.Ic=!0,!1):(this.pe=this.Ld.size,0<this.rd.size()&&this.rd.reset(),this.Df!=-1&&(this.Ad.bh(this.Df),this.Ij.resize(0),this.Df=-1),this.Ic=!1,!0)},o.prototype.jJ=function(){return this.ff==null?(this.Ic=!0,!1):(this.Rg=this.Ef.size,0<this.ff.size()&&this.ff.reset(),this.Cf!=-1&&(this.Ad.bh(this.Cf),this.Hj.resize(0),this.Cf=-1),this.Ic=!1,!0)},o.prototype.Kt=function(r,n,a){this.Am==null&&(this.Am=new h.Xt),a=new l(this,a),this.Am.sort(r,0,n,a)},o.prototype.JX=function(r,n,a,c){var p=this;r.Vd(n,a,function(f,m){var b=p.Rr(f,c),x=p.Rr(m,c);return b<x||b==x&&o.eq(f)&&o.Tz(m)?-1:1})},o.prototype.Rr=function(r,n){var a=.5*this.qa;return n?(n=this.Eb[r>>1],o.eq(r)?n.G-a:n.H+a):(n=this.qd[r>>1],o.eq(r)?n.G-a:n.H+a)},o}(),h.xC=k}(q||(q={})),function(h){var k=function(){function g(){}return g.construct=function(l,o,r,n,a,c){var p=new g;return p.v=l,p.G=o,p.Ye=r,p.C=n,p.H=a,p.Bg=c,p},g.prototype.Oa=function(){this.Ye=this.v=NaN},g.prototype.B=function(){return isNaN(this.v)},g.prototype.XS=function(){return isNaN(this.Ye)},g.prototype.K=function(l,o,r,n,a,c){n!==void 0?typeof l=="number"?(this.v=l,this.G=o,this.Ye=r,this.C=n,this.H=a,this.Bg=c):(this.v=l.x-.5*o,this.C=this.v+o,this.G=l.y-.5*r,this.H=this.G+r,this.Ye=l.z-.5*n,this.Bg=this.Ye+n):(this.v=l,this.G=o,this.Ye=r,this.C=l,this.H=o,this.Bg=r)},g.prototype.move=function(l){this.v+=l.x,this.G+=l.y,this.Ye+=l.z,this.C+=l.x,this.H+=l.y,this.Bg+=l.z},g.prototype.copyTo=function(l){l.v=this.v,l.G=this.G,l.C=this.C,l.H=this.H},g.prototype.Lk=function(l,o,r){this.v>l?this.v=l:this.C<l&&(this.C=l),this.G>o?this.G=o:this.H<o&&(this.H=o),isNaN(this.Ye)==0?this.Ye>r?this.Ye=r:this.Bg<r&&(this.Bg=r):this.Bg=this.Ye=r},g.prototype.Zb=function(l,o,r){if(typeof l=="number")this.B()?(this.v=l,this.G=o,this.Ye=r,this.C=l,this.H=o,this.Bg=r):this.Lk(l,o,r);else if(l instanceof h.Nd)this.Zb(l.x,l.y,l.z);else{if(!(l instanceof g))throw h.i.N();l.B()||(this.Zb(l.v,l.G,l.Ye),this.Zb(l.C,l.H,l.Bg))}},g.prototype.construct=function(l,o,r){l.B()||o.B()?this.Oa():(this.v=l.oa,this.C=l.va,this.G=o.oa,this.H=o.va,this.Ye=r.oa,this.Bg=r.va)},g.prototype.nB=function(l){if(l==null||8>l.length)throw h.i.N();l[0]=new h.Nd(this.v,this.G,this.Ye),l[1]=new h.Nd(this.v,this.H,this.Ye),l[2]=new h.Nd(this.C,this.H,this.Ye),l[3]=new h.Nd(this.C,this.G,this.Ye),l[4]=new h.Nd(this.v,this.G,this.Bg),l[5]=new h.Nd(this.v,this.H,this.Bg),l[6]=new h.Nd(this.C,this.H,this.Bg),l[7]=new h.Nd(this.C,this.G,this.Bg)},g.prototype.Zw=function(l){if(l==null||l.length==0)this.Oa();else{var o=l[0];for(this.K(o.x,o.y,o.z),o=1;o<l.length;o++){var r=l[o];this.Lk(r.x,r.y,r.z)}}},g}();h.OK=k}(q||(q={})),function(h){(function(k){k.Qa=function(){var g=Error();return g.message="Internal Error",g},k.Ie=function(){var g=Error();return g.message="Not Implemented",g},k.Xk=function(){var g=Error();return g.message="The input unit and the spatial reference unit are not of the same unit type.ie Linear vs.Angular",g},k.Hb=function(){var g=Error();return g.message="Invalid Call",g},k.N=function(g){var l=Error();return l.message="Illegal Argument Exception",g!==void 0&&(l.message+=": "+g),l},k.fu=function(g){var l=Error();return l.message=g!==void 0?"Runtime Exception: "+g:"Runtime Exception.",l},k.fa=function(g){var l=Error();return l.message="Geometry Exception: "+g,l},k.GK=function(){var g=Error();return g.message="Assert Failed Exception",g},k.ce=function(){var g=Error();return g.message="IndexOutOfBoundsException",g},k.WC=function(){var g=Error();return g.message="UserCancelException",g}})(h.i||(h.i={}))}(q||(q={})),function(h){(h=h.bm||(h.bm={}))[h.forward=0]="forward",h[h.reverse=1]="reverse"}(q||(q={})),function(h){var k=function(){function o(r,n){this.Wa=r,this.FH=n,this.LH=-1,this.sl=!1}return o.prototype.qe=function(){},o.prototype.next=function(){if(++this.LH==this.FH.I())return null;var r=this.FH.Na(this.LH);r.scale(this.Wa.ec);var n=new h.Da;return this.Wa.sy(r,this.sl,n),n},o.prototype.La=function(){return 0},o}(),g=function(){function o(r,n,a){this.Wa=r,this.rw=n,this.Xn=!1,this.co=a,this.bw=[0],this.sk=[0],this.Nj=[0],this.Gs=[0],this.sl=!1,this.qq=new h.Da,this.uk=[]}return o.prototype.qe=function(){},o.prototype.next=function(){if(this.Xn){this.Xn=!1,this.sd.ha();var r=h.aa.jg(this.qq);return h.Fg.Mk(r,this.Wa.Aq,!0,!0,this.Wa.Ub)}if(this.sd==null&&(this.sd=this.rw.Ga(),this.sd.$a(),this.co!=null&&this.co.Yk(null,0)),!this.sd.Ha()){if(!this.sd.$a())return null;this.co!=null&&this.co.Yk(null,0)}r=null,this.sk[0]=0,this.FA=this.bw[0]=0,this.di=NaN,this.Xn=!1;for(var n=this.uk.length=0,a=new h.h,c=new h.h,p=[0];this.sd.Ha()&&8>this.FA;){var f=this.sd.ha();if(a.L(f.ac()),c.L(f.wc()),a.scale(this.Wa.ec),c.scale(this.Wa.ec),h.cj.Mu(a,c)?a.x=c.x:h.cj.Ku(a,c)&&(c.x=a.x),this.uk.length=0,h.cj.tF(this.Wa.Tb,this.Wa.kc,this.Wa.ze,a,c,this.Wa.QA,this.Wa.Zs,p,this.Nj,this.Gs,this.uk,this.bw),this.co!=null&&(f=this.uk.slice(0),this.co.qG(this.co.da()-1,f,f.length-1)),h.cj.Lu(a,c)?(this.qq.Oa(),this.Wa.sy(a,this.sl,this.qq),this.Xn=!0):(this.qq.Oa(),this.Xn=this.xy(p[0],this.qq)),this.Xn){if(this.sd.li(),this.sd.Ez()){this.sd.li(),this.sd.ha();break}this.sd.DW();break}r==null&&(r=new h.Da).Yk(null,0),this.OD(r),n++}if(this.bw[0]=0,0<n){for(p=this.sd.wb();0<n;)this.sd.li(),a.L(this.rw.Na(this.sd.wb())),c.L(this.rw.Na(this.sd.ik())),a.scale(this.Wa.ec),c.scale(this.Wa.ec),this.sl&&(h.cj.Mu(a,c)?a.x=c.x:h.cj.Ku(a,c)&&(c.x=a.x)),this.uk.length=0,h.cj.tF(this.Wa.Tb,this.Wa.kc,this.Wa.ze,c,a,this.Wa.QA,this.Wa.Zs,null,this.Nj,this.Gs,this.uk,this.bw),this.OD(r),n--;return a.L(this.rw.Na(this.sd.wb())),a.scale(this.Wa.ec),l.Hr(this.Wa.Tb,this.Wa.kc,this.Wa.ec,this.Wa.rb,a,this.di+1.570796326794897,this.di+4.71238898038469,this.Wa.ao,this.sl,this.sk,r,NaN,NaN),this.sd.Vb(p),this.sd.ha(),n=h.ta.kj(null,r,!0),h.Fg.Mk(r,n,!0,!0,this.Wa.Ub)}return this.Xn=!1,this.sd.ha(),r=h.aa.jg(this.qq),h.Fg.Mk(r,this.Wa.Aq,!0,!0,this.Wa.Ub)},o.prototype.OD=function(r){var n=this.uk[0],a=this.Nj[0]-1.570796326794897,c=this.Gs[0]+1.570796326794897;if(!isNaN(this.di)){if(this.di>=this.Nj[0]){var p=this.di+1.570796326794897;a=p+3.141592653589793-(this.di-this.Nj[0])}else a=(p=this.di+1.570796326794897)+3.141592653589793-(6.283185307179586-(this.Nj[0]-this.di));var f=!(this.di>=this.Nj[0]&&3.141592653589793>=this.di-this.Nj[0])&&!(this.di<this.Nj[0]&&3.141592653589793<=this.Nj[0]-this.di),m=!1;if(Math.abs(a-p)<=.5*this.Wa.ao)if(f){var b=r.Na(r.I()-2);b.scale(this.Wa.ec);var x=new h.ga(0);for(h.kb.Xy(this.Wa.Tb,this.Wa.kc,n.x,n.y,b.x,b.y,x),b=x.u;b<=p;)b+=6.283185307179586;for(;b>p;)b-=6.283185307179586;b<a&&(m=!0)}else m=!0;m?(r.DB(0,r.I()-1),this.sl||((n=new h.h).L(r.Na(r.I()-1)),n.scale(this.Wa.ec),-3.141592653589793>n.x-this.sk[0]?this.sk[0]-=6.283185307179586:3.141592653589793<n.x-this.sk[0]&&(this.sk[0]+=6.283185307179586)),f||(a=.5*(a+p))):(f?((p=new h.h).L(n),p.scale(1/this.Wa.ec),r.wf(0,-1,p)):l.Hr(this.Wa.Tb,this.Wa.kc,this.Wa.ec,this.Wa.rb,this.uk[0],p,a,this.Wa.ao,this.sl,this.sk,r,NaN,NaN),this.FA+=1)}l.qy(this.Wa.Tb,this.Wa.kc,this.Wa.ec,this.Wa.rb,this.Wa.ze,this.uk,a,c,this.sl,this.sk,r),this.di=this.Gs[0]},o.prototype.xy=function(r,n){return this.Wa.xy(this.uk,r,this.Nj[0],this.Gs[0],this.sl,n)},o.prototype.La=function(){return 0},o}(),l=function(){function o(){}return o.buffer=function(r,n,a,c,p,f){if(r==null)throw h.i.N("Geometry::Geodesic_bufferer::buffer");if(r.B())return new h.Da(r.description);var m=new o;m.Qg=n,m.Jc=h.cb.sc(n);var b=h.cb.vv(m.Jc);if(m.Ub=f,m.Tb=h.cb.ev(m.Jc),m.kc=b*(2-b),m.ec=m.Jc.Hd().ai,m.qa=m.Qg.Kn(),m.Aq=m.Jc.Kn(),m.Zs=m.Aq*m.ec,m.zq=1.570796326794897/m.ec,m.OY=3.141592653589793/m.ec,m.Js=6.283185307179586/m.ec,m.PY=m.Js/6,m.LA=0,m.NY=1.5707963267948966*m.Tb/m.LA,a==4?(m.ze=2,m.Wv=!0):(m.ze=a,m.Wv=!1),m.Ka=c,m.rb=Math.abs(c),isNaN(p)||.001>p?m.xX():m.$n=p,a=r.getType(),h.aa.yd(a)?((a=new h.Ta(r.description)).oc(r,!0),r=a,a=1607):a==197&&(a=new h.l,r.A(a),a.R()<=m.qa||a.ca()<=m.qa?((a=new h.Ta(r.description)).ad(r,!1),r=a,a=1607):((a=new h.Da(r.description)).ad(r,!1),r=a,a=1736)),m.yX(),h.aa.Rn(a)||m.zX(),m.rb<=.5*m.$n)return a!=1736?new h.Da(r.description):m.Wv?r:h.cj.Qr(r,m.Qg,m.ze,m.QA,-1,f);if(0>m.Ka&&a!=1736)return new h.Da(r.description);if(m.Wv&&h.aa.Hc(a)?(n=h.cj.Qr(r,n,4,NaN,m.$n,f),r=h.cb.zh(n,m.Qg,m.Jc)):r=h.cb.zh(r,m.Qg,m.Jc),(r=h.Hh.lj(r,m.Jc)).B())return new h.Da(r.description);switch(!m.Wv&&h.aa.Hc(a)&&(r=h.cj.pI(m.ec,r)),r=o.KX(r,m.Jc),a){case 1736:n=m.UN(r);break;case 1607:n=m.VN(r);break;case 550:n=m.SN(r);break;case 33:n=m.TN(r);break;default:throw h.i.fa("corrupted_geometry")}return(m=h.cb.zh(n,m.Jc,m.Qg)).Jl(r.description),m},o.prototype.UN=function(r){var n=new h.Da;r=new g(this,r,n),r=h.Gh.local().V(r,this.Jc,this.Ub).next(),r=h.ip.nj(r,this.Jc,2);var a=new h.Dd;return a.scale(1/this.ec,1/this.ec),n.Oc(a),n=h.ip.nj(n,this.Jc,2),0<=this.Ka?h.Gh.local().V(n,r,this.Jc,this.Ub):h.kp.local().V(n,r,this.Jc,this.Ub)},o.prototype.VN=function(r){return r=new g(this,r,null),r=h.Gh.local().V(r,this.Jc,this.Ub).next(),h.ip.nj(r,this.Jc,2)},o.prototype.SN=function(r){return r=new k(this,r),r=h.Gh.local().V(r,this.Jc,this.Ub).next(),h.ip.nj(r,this.Jc,2)},o.prototype.TN=function(r){(r=r.D()).scale(this.ec);var n=new h.Da;return this.sy(r,!1,n),h.ip.nj(n,this.Jc,2)},o.prototype.xy=function(r,n,a,c,p,f){var m=r[0],b=r[r.length-1],x=m.y>b.y?m.y:b.y,T=h.F.q(this.Tb,this.kc,m.y<b.y?m.y:b.y);if(x=h.F.q(this.Tb,this.kc,x),.001<this.LA-(T+n+this.rb)&&.001<this.LA+(x-n-this.rb))return!1;T=(n=a-1.570796326794897)-3.141592653589793,x=n+3.141592653589793;var I=(a=c+1.570796326794897)+3.141592653589793,A=[NaN],P=[NaN],j=[NaN],D=[NaN];if(c=!1,o.dJ(this.Tb,this.kc,this.rb,m,n,T,b,a,A,P),o.dJ(this.Tb,this.kc,this.rb,b,I,a,m,T,j,D),(a<A[0]&&A[0]<I||a<P[0]&&P[0]<I)&&(c=!0),c||(T<j[0]&&j[0]<n||T<D[0]&&D[0]<n)&&(c=!0),!c&&p)return!1;for(var F=[],N=r.length-1;0<=N;N--)F.push(r[N]);return f.Oa(),f.Yk(null,0),N=[0],o.qy(this.Tb,this.kc,this.ec,this.rb,this.ze,r,n,a,p,N,f),o.Hr(this.Tb,this.kc,this.ec,this.rb,b,a,I,this.ao,p,N,f,A[0],P[0]),o.qy(this.Tb,this.kc,this.ec,this.rb,this.ze,F,I,x,p,N,f),o.Hr(this.Tb,this.kc,this.ec,this.rb,m,T,n,this.ao,p,N,f,j[0],D[0]),r=!1,p||(r=this.IE(this.ec,f)),c||r},o.prototype.sy=function(r,n,a){a.Oa(),a.Yk(null,0),o.Hr(this.Tb,this.kc,this.ec,this.rb,r,-this.ao,6.283185307179586,this.ao,n,[0],a,NaN,NaN),n||this.IE(this.ec,a)},o.prototype.IE=function(r,n){var a=this.vO(r,n);return r=this.wO(r,n),a||r},o.prototype.vO=function(r,n){var a=n.I(),c=!1,p=new h.l;if(n.A(p),!h.s.Y(p.H*r,1.570796326794897)&&!h.s.Y(p.G*r,-1.570796326794897))return!1;var f=new h.h;for(--a;0<=a;a--)n.D(a,f),(f.y==p.H&&h.s.Y(f.y*r,1.570796326794897)||f.y==p.G&&h.s.Y(f.y*r,-1.570796326794897))&&(c=!0,this.OI(f,a,n));return c},o.prototype.wO=function(r,n){var a=n.Na(0),c=n.Na(n.I()-1);return 3.141592653589793<Math.abs(a.x-c.x)*r?(this.VV(n),!0):this.uO(n)},o.prototype.uO=function(r){return 0>r.Ke()&&(this.UV(r),!0)},o.prototype.OI=function(r,n,a){var c=a.I(),p=0<n?n-1:c-1;if(c=a.Na(n<c-1?n+1:0),p=a.Na(p),!h.s.Y(c.y,r.y)&&!h.s.Y(c.x,r.x)){var f=new h.h;f.ma(c.x,r.y),a.Cb(n,f)}h.s.Y(p.y,r.y)||h.s.Y(p.x,r.x)||((c=new h.h).ma(p.x,r.y),a.wf(0,n,c))},o.prototype.VV=function(r){var n=new h.Da,a=new h.Da,c=new h.Dd,p=r.Na(0),f=r.Na(r.I()-1),m=new h.h;p.x>f.x?(f=this.zq,c.gg(-this.Js,0)):(f=-this.zq,c.gg(this.Js,0)),n.add(r,!1),r.Oa(),a.add(n,!1),a.Oc(c),p=new h.l,a.A(p),p.W((this.Js-p.R())/2,0),p.G=-this.zq,p.H=this.zq;for(var b=0;b<a.I();b++)a.D(b,m),n.wf(0,-1,m);for(a.Oc(c),b=0;b<a.I();b++)a.D(b,m),n.wf(0,-1,m);a=n.Na(0),c=n.Na(n.I()-1),m.ma(c.x,f),n.wf(0,-1,m),m.ma(.5*(c.x+a.x),f),n.wf(0,-1,m),m.ma(a.x,f),n.wf(0,-1,m),n=h.Hh.ks(n,this.Jc,2,!0,p.v),n=h.Hh.ks(n,this.Jc,2,!0,p.C),n=h.Ud.clip(n,p,this.Aq,NaN),r.add(n,!1)},o.prototype.UV=function(r){var n=new h.l;r.A(n),n.W((this.Js-n.R())/2,0),n.G=-this.zq,n.H=this.zq,r.Yk(null,0);var a=new h.h;a.ma(n.v,n.G),r.wf(1,-1,a),a.ma(n.v,n.H),r.wf(1,-1,a),a.ma(.5*(n.v+n.C),n.H),r.wf(1,-1,a),a.ma(n.C,n.H),r.wf(1,-1,a),a.ma(n.C,n.G),r.wf(1,-1,a),a.ma(.5*(n.v+n.C),n.G),r.wf(1,-1,a)},o.qy=function(r,n,a,c,p,f,m,b,x,T,I){var A=null;x||((A=new h.h).Rc(),0<I.I()&&(A.L(I.Na(I.I()-1)),A.scale(a)));var P=new h.ga(0),j=new h.ga(0),D=new h.ga(0),F=new h.h,N=new h.h,z=f[f.length-1];a=1/a;for(var W=0;W<f.length;W++){var H=f[W];if(W==0)var Y=m;else W==f.length-1?Y=b:(h.kb.wd(r,n,z.x,z.y,H.x,H.y,null,null,P,p),Y=P.u-1.570796326794897);h.kb.yi(r,n,H.x,H.y,c,Y,j,D),x?N.ma(j.u,D.u):(F.ma(j.u,D.u),o.gJ(H.x,F.x,A.x,T),N.ma(T[0]+F.x,F.y),A.L(N)),N.scale(a),I.wf(0,-1,N)}},o.Hr=function(r,n,a,c,p,f,m,b,x,T,I,A,P){if(!(m-f<b)){var j=new h.ga(0),D=new h.ga(0),F=new h.h,N=new h.h,z=null;x||((z=new h.h).Rc(),0<I.I()&&(z.L(I.Na(I.I()-1)),z.scale(a)));var W=h.O.truncate(Math.ceil(f/b)),H=W++*b;for(H==f&&(H=W++*b),a=1/a;H<m+b&&(f<A&&A<H?(H=A,W--):f<P&&P<H&&(H=P,W--),!(H>=m));)h.kb.yi(r,n,p.x,p.y,c,H,j,D),x?N.ma(j.u,D.u):(F.ma(j.u,D.u),o.gJ(p.x,F.x,z.x,T),N.ma(T[0]+F.x,F.y),z.L(N)),N.scale(a),I.wf(0,-1,N),f=H,H=W++*b}},o.dJ=function(r,n,a,c,p,f,m,b,x,T){var I=new h.h,A=new h.h,P=new h.ga(0),j=new h.ga(0);for(h.kb.yi(r,n,c.x,c.y,a,p,P,j),I.ma(P.u,j.u),h.kb.yi(r,n,c.x,c.y,a,f,P,j),A.ma(P.u,j.u),a=new h.ga(0),h.kb.Xy(r,n,m.x,m.y,I.x,I.y,a),x[0]=a.u,h.kb.Xy(r,n,m.x,m.y,A.x,A.y,a),T[0]=a.u;x[0]<=T[0];)x[0]+=6.283185307179586;for(;x[0]>T[0];)x[0]-=6.283185307179586;for(;x[0]>=b;)x[0]-=6.283185307179586,T[0]-=6.283185307179586;for(;x[0]<b;)x[0]+=6.283185307179586,T[0]+=6.283185307179586},o.gJ=function(r,n,a,c){if(isNaN(a)){for(;3.141592653589793<c[0]+n-r;)c[0]-=6.283185307179586;for(;3.141592653589793<r-(c[0]+n);)c[0]+=6.283185307179586}else 3.141592653589793<c[0]+n-a?c[0]-=6.283185307179586:3.141592653589793<a-(c[0]+n)&&(c[0]+=6.283185307179586)},o.KX=function(r,n){var a=r.getType(),c=h.aa.Hc(a)?r.da():a==550?r.I():1;if(c==1)return r;var p=new h.ia(0);p.resize(c);for(var f=[],m=new h.l,b=0;b<c;b++){if(p.write(b,b),h.aa.Hc(a)){r.Rj(b,m);var x=m.sf()}else x=r.Na(b);x=h.XK.$X(n,x),f[b]=x}for(p.Vd(0,p.size,function(T,I){return f[T]<f[I]?-1:f[T]>f[I]?1:0}),n=r.Ia(),b=0;b<c;b++)m=p.read(b),h.aa.Hc(a)?n.addPath(r,m,!0):n.Fd(r,m,m+1);return n},o.prototype.yX=function(){var r=Math.min(3.141592653589793*this.Tb-this.rb,this.rb);r=Math.min(r,.39269908169872414*this.Tb);var n=new h.h;n.ma(0,10*this.ec);var a=45*this.ec,c=new h.ga(0),p=new h.ga(0),f=new h.ga(0),m=new h.ga(0),b=new h.ga(0),x=new h.ga(0),T=new h.ga(0),I=new h.ga(0),A=new h.h,P=new h.h,j=new h.h,D=new h.h;h.kb.yi(this.Tb,this.kc,n.x,n.y,r,0,c,p),A.ma(c.u,p.u),h.kb.yi(this.Tb,this.kc,n.x,n.y,r,a,f,m),P.ma(f.u,m.u),c=new h.ga(0),p=new h.ga(0);for(var F=new h.ga(0);h.kb.yi(this.Tb,this.kc,n.x,n.y,r,.5*(0+a),b,x),j.ma(b.u,x.u),h.kb.wd(this.Tb,this.kc,A.x,A.y,P.x,P.y,c,p,null,2),h.kb.oj(this.Tb,this.kc,A.x,A.y,.5*c.u,p.u,T,I,2),D.ma(T.u,I.u),h.kb.wd(this.Tb,this.kc,j.x,j.y,D.x,D.y,F,null,null,2),!(F.u<=this.$n);)a*=.9,h.kb.yi(this.Tb,this.kc,n.x,n.y,r,a,f,m),P.ma(f.u,m.u);this.ao=6.283185307179586/Math.ceil(6.283185307179586/(a-0))},o.prototype.zX=function(){var r=Math.min(3.141592653589793*this.Tb-this.rb,this.rb);r=Math.min(r,.39269908169872414*this.Tb);var n=new h.h,a=new h.h;n.ma(0,10*this.ec),a.ma(10*this.ec,10*this.ec);var c=new h.ga(0),p=new h.ga(0),f=new h.ga(0);h.kb.wd(this.Tb,this.kc,n.x,n.y,a.x,a.y,f,c,p,this.ze);var m=new h.ga(0),b=new h.ga(0),x=new h.ga(0),T=new h.ga(0),I=new h.h,A=new h.ga(0),P=new h.ga(0),j=new h.ga(0),D=new h.ga(0),F=new h.ga(0),N=new h.ga(0),z=new h.ga(0),W=new h.ga(0),H=new h.ga(0),Y=new h.h,Z=new h.h,se=new h.h,ce=new h.h,ue=1;c=c.u,p=p.u+1.570796326794897,f=f.u,h.kb.yi(this.Tb,this.kc,n.x,n.y,r,c-1.570796326794897,P,j),Y.ma(P.u,j.u),h.kb.yi(this.Tb,this.kc,a.x,a.y,r,p,D,F),Z.ma(D.u,F.u),P=new h.ga(0),j=new h.ga(0),p=new h.ga(0);for(var $e=new h.ga(0);h.kb.oj(this.Tb,this.kc,n.x,n.y,.5*(0+ue)*f,c,m,b,this.ze),I.ma(m.u,b.u),h.kb.wd(this.Tb,this.kc,n.x,n.y,I.x,I.y,null,null,A,this.ze),h.kb.yi(this.Tb,this.kc,I.x,I.y,r,A.u+1.570796326794897,N,z),se.ma(N.u,z.u),h.kb.wd(this.Tb,this.kc,Y.x,Y.y,Z.x,Z.y,P,j,null,2),h.kb.oj(this.Tb,this.kc,Y.x,Y.y,.5*P.u,j.u,W,H,2),ce.ma(W.u,H.u),h.kb.wd(this.Tb,this.kc,se.x,se.y,ce.x,ce.y,p,null,null,2),!(p.u<=this.$n);)ue*=.9,h.kb.oj(this.Tb,this.kc,n.x,n.y,ue*f,c,x,T,this.ze),a.ma(x.u,T.u),h.kb.wd(this.Tb,this.kc,n.x,n.y,a.x,a.y,null,null,$e,this.ze),h.kb.yi(this.Tb,this.kc,a.x,a.y,r,$e.u+1.570796326794897,D,F),Z.ma(D.u,F.u);1e5<(r=ue*f)&&(r=1e5),this.QA=r},o.prototype.xX=function(){var r=5e4<this.rb?100:1e4<this.rb?10:1;500>this.rb/r&&(r=this.rb/500),.01>r&&(r=.01),this.$n=r},o}();h.VK=l}(q||(q={})),function(h){var k=function(){function g(){}return g.Mf=function(l,o){var r=new h.h;r.L(o),l.push(r)},g.up=function(l,o){l.add(o.x),l.add(o.y)},g.hB=function(l){l.Bh(l.size-2)},g.oB=function(l,o){o.ma(l.get(l.size-2),l.get(l.size-1))},g.Qr=function(l,o,r,n,a,c){if(l==null)throw h.i.N();var p=l.getType();if(l.B()||h.aa.Rn(p))return l;var f=new g;f.Qg=o,f.Jc=h.cb.sc(o);var m=h.cb.vv(f.Jc);if(f.Ub=c,f.Tb=h.cb.ev(f.Jc),f.kc=m*(2-m),f.ec=f.Jc.Hd().ai,f.Aq=f.Jc.Kn(),f.Zs=f.Aq*f.ec,f.AA=n,f.zA=a,f.ze=r,p==197?(r=new h.Da(l.description)).ad(l,!1):h.aa.yd(p)?(r=new h.Ta(l.description)).oc(l,!0):r=l,f.ze!=4){if((o=f.Qg.Nb(f.Jc)==0?h.cb.zh(r,f.Qg,f.Jc):h.Hh.lj(r,f.Jc)).B())return o;o=g.pI(f.ec,o),o=f.Zy(o),o=h.ip.nj(o,f.Jc,f.ze),f=h.cb.zh(o,f.Jc,f.Qg)}else{if(h.Eg.Sb(o)==2?(l=h.cb.ml(),(o=h.Xj.local().V(r,l,o,c))==l&&(o=new h.Da,l.copyTo(o))):o=h.Hh.lj(r,f.Jc),o.B())return o;f=f.CX(o)}return f},g.pI=function(l,o){var r=new h.l;if(o.xc(r),3.141592653589793>r.R()*l)return o;var n=!1;r=o.Ga();for(var a=new h.h,c=new h.h;r.$a();)for(;r.Ha();){var p=r.ha();if(a.L(p.ac()),c.L(p.wc()),a.scale(l),c.scale(l),3.141592653589793<Math.abs(a.x-c.x)){var f=g.Lu(a,c);if(!f){n=!0;break}if(6.283185307179586<Math.abs(a.x-c.x)){n=!0;break}}}if(!n)return o;n=o.Ia();var m=1<o.description.Aa,b=new h.h,x=new h.h,T=new h.h,I=new h.h,A=new h.Sa;for(r.Zi();r.$a();)for(var P=NaN,j=[0];r.Ha();){if(p=r.ha(),a.L(p.ac()),c.L(p.wc()),a.scale(l),c.scale(l),isNaN(P)?(g.Wi(a.x,NaN,j),x.L(a)):x.L(T),P=x.x,f=g.Lu(a,c)){if(6.283185307179586<c.x-a.x)for(;6.283185307179586<c.x-a.x;)c.x-=6.283185307179586;if(-6.283185307179586>c.x-a.x)for(;-6.283185307179586>c.x-a.x;)c.x+=6.283185307179586;g.Wi(c.x,NaN,j),T.L(c)}else b.L(c),g.AU(b),g.Wi(b.x,P,j),T.ma(j[0]+b.x,b.y);.5>Math.abs(T.x-c.x)&&T.L(c),m?(p.Tw(0,A),I.L(x),I.scale(1/l),A.Cb(I),(f=r.vm())?n.nf(A):n.lineTo(A),r.Qn()&&!o.dc(r.gb)&&(p.Tw(1,A),I.L(T),I.scale(1/l),A.Cb(I),n.lineTo(A))):((f=r.vm())&&n.Hz(null,0),p=n.da()-1,I.L(x),I.scale(1/l),n.wf(p,-1,I),r.Qn()&&!o.dc(r.gb)&&(I.L(T),I.scale(1/l),n.wf(p,-1,I)))}return n},g.tF=function(l,o,r,n,a,c,p,f,m,b,x,T){var I=new h.h,A=new h.h,P=0<n.compare(a);g.fJ(P,n,a,I,A),g.uF(l,o,r,I,A,c,NaN,p,f,m,b,null,x,T),P&&g.fC(m,b,null,x)},g.prototype.Zy=function(l){var o=l.Ia(),r=l.Ga(),n=[],a=null,c=null,p=1<l.description.Aa;p&&(a=new h.be(0),c=new h.ig);for(var f=[0],m=new h.h,b=new h.h,x=new h.h,T=new h.h;r.$a();)for(f[0]=0;r.Ha();){var I=r.ha();m.L(I.ac()),b.L(I.wc()),m.scale(this.ec),b.scale(this.ec);var A=0<m.compare(b);g.fJ(A,m,b,x,T),n.length=0,a!=null&&a.Bh(0),0<this.AA?g.uF(this.Tb,this.kc,this.ze,x,T,this.AA,this.zA,this.Zs,null,null,null,p?a:null,n,f):g.aR(this.Tb,this.kc,this.ze,x,T,this.zA,this.Zs,p?a:null,n,f),A&&g.fC(null,null,p?a:null,n),n[0].L(I.ac()),n[n.length-1].L(I.wc());for(var P=1;P<n.length-1;P++)n[P].scale(1/this.ec);p?(A=g.eJ(A,I,c),g.TD(r.vm(),r.Qn()&&!l.dc(r.gb),I,A,a,n,o)):g.SD(r.vm(),r.Qn()&&!l.dc(r.gb),n,o)}return o},g.prototype.CX=function(l){var o=l.Ia(),r=l.Ga(),n=[],a=null,c=new h.ig,p=1<l.description.Aa;for(p&&(a=new h.be(0));r.$a();)for(;r.Ha();){var f=r.ha(),m=f.ac(),b=f.wc();m=0<m.compare(b),b=g.eJ(m,f,c),n.length=0,a!=null&&a.Bh(0),g.BX(this.Tb,this.kc,this.ec,b,this.Qg,this.AA,this.zA,p?a:null,n),m&&g.fC(null,null,p?a:null,n),p?g.TD(r.vm(),r.Qn()&&!l.dc(r.gb),f,b,a,n,o):g.SD(r.vm(),r.Qn()&&!l.dc(r.gb),n,o)}return o},g.SD=function(l,o,r,n){l&&n.Hz(null,0),l=n.da()-1;var a=r.slice(0);n.qG(l,a,a.length-1),o&&n.wf(l,-1,r[r.length-1])},g.TD=function(l,o,r,n,a,c,p){var f=new h.Sa;if(r.To(f),l?p.nf(f):p.lineTo(f),2<c.length){l=n.Qb();for(var m=1;m<c.length-1;m++){var b=n.NG(a.get(m)*l);n.Tw(b,f),f.Cb(c[m]),p.lineTo(f)}}o&&(r.Po(f),p.lineTo(f))},g.uF=function(l,o,r,n,a,c,p,f,m,b,x,T,I,A){var P=new h.ga(0),j=new h.ga(0),D=new h.ga(0);h.kb.wd(l,o,n.x,n.y,a.x,a.y,D,P,j,r),D=D.u;var F=P=P.u;0>F&&(F+=6.283185307179586),0>(j=j.u)&&(j+=6.283185307179586),m!=null&&(m[0]=D),b!=null&&(b[0]=F),x!=null&&(x[0]=j),b=m=NaN,T!=null&&(m=((b=h.F.Ah(l,o))-(x=h.F.q(l,o,n.y)))/D,b=(b+x)/D),x=g.Mu(n,a),j=g.Ku(n,a),F=x||j;var N=g.FE(n,a,f),z=new h.ga(0),W=new h.ga(0),H=new h.h,Y=new h.h,Z=new h.h;g.Wi(n.x,NaN,A);var se=[A[0]];if(D<=c)g.Mf(I,n),g.Wi(a.x,NaN,A),T!=null&&T.add(0),F?(x&&g.kB(n,a,T,I),j&&g.iB(n,a,T,I)):N?g.jB(n,a,P,m,b,T,I):0<p&&(Y.ma(n.x-se[0],n.y),H.ma(a.x-A[0],a.y),g.Yy(l,o,r,n,D,P,Y,H,0,1,p,T,I,se)),g.Mf(I,a);else{var ce=D/((c=1+h.O.truncate(Math.ceil(D/c)))-1),ue=new h.h,$e=0;g.Mf(I,n),ue.L(n),Y.ma(n.x-A[0],n.y),T!=null&&T.add(0);for(var fe=1;fe<c;fe++){if(fe<c-1){h.kb.oj(l,o,n.x,n.y,fe*ce,P,z,W,r),H.ma(z.u,W.u),g.Wi(H.x,ue.x,A),Z.ma(A[0]+H.x,H.y);var ze=fe/(c-1)}else g.Wi(a.x,NaN,A),H.ma(a.x-A[0],a.y),Z.L(a),ze=1;F?(fe==1&&x&&g.kB(n,Z,T,I),fe==c-1&&j&&g.iB(ue,a,T,I)):N?g.EE(ue,Z,f)&&(n.x<a.x?ue.x>Z.x&&(A[0]+=6.283185307179586,Z.ma(A[0]+H.x,H.y)):ue.x<Z.x&&(A[0]-=6.283185307179586,Z.ma(A[0]+H.x,H.y)),g.jB(ue,Z,P,m,b,T,I)):0<p&&g.Yy(l,o,r,n,D,P,Y,H,$e,ze,p,T,I,se),g.Mf(I,Z),T!=null&&T.add(ze),ue.L(Z),Y.L(H),se[0]=A[0],$e=ze}}},g.aR=function(l,o,r,n,a,c,p,f,m,b){var x=new h.ga(0),T=new h.ga(0),I=new h.ga(0);h.kb.wd(l,o,n.x,n.y,a.x,a.y,I,x,T,r),T=I.u,x=x.u;var A=I=NaN;if(f!=null){A=h.F.Ah(l,o);var P=h.F.q(l,o,n.y);I=(A-P)/T,A=(A+P)/T}P=g.Mu(n,a);var j=g.Ku(n,a),D=P||j;p=g.FE(n,a,p);var F=g.Lu(n,a);F=D||p||F,g.Wi(n.x,NaN,b);var N=new h.h;g.Mf(m,n),N.L(n),f!=null&&f.add(0),F?(D?(P&&g.kB(n,a,f,m),j&&g.iB(n,a,f,m)):p&&g.jB(n,a,x,I,A,f,m),g.Wi(a.x,NaN,b),g.Mf(m,a)):T<=c?(g.Wi(a.x,NaN,b),g.Mf(m,a)):(I=new h.h,p=new h.h,I.L(n),p.L(a),I.x-=b[0],p.x-=b[0],-3.141592653589793>p.x?p.x+=6.283185307179586:3.141592653589793<p.x&&(p.x-=6.283185307179586),g.Yy(l,o,r,n,T,x,I,p,0,1,c,f,m,b),g.Mf(m,a),g.Wi(a.x,NaN,b)),f!=null&&f.add(1)},g.Yy=function(l,o,r,n,a,c,p,f,m,b,x,T,I,A){var P=new h.h,j=new h.h;P.ma(p.x+A[0],p.y),new h.ga(0),new h.ga(0),new h.ga(0),new h.ga(0);var D=new h.ga(0),F=new h.ga(0),N=new h.ga(0),z=new h.h,W=new h.h,H=new h.h,Y=new h.h;z.L(p),W.L(f),p=new h.be(0),f=new h.be(0),g.up(p,W),f.add(b);var Z=new h.h,se=new h.yb,ce=[];for(g.YJ(4,ce);0<p.size;){for(var ue,$e=!1,fe=NaN,ze=0;3>ze;ze++)if(ue=ce[ze]*b+(1-ce[ze])*m,h.kb.oj(l,o,n.x,n.y,ue*a,c,D,F,r),H.ma(D.u,F.u),ze==0&&(fe=ue,Y.L(H)),g.WW(z,H,W,se),se.hc(se.fe(H,!0),Z),h.kb.wd(l,o,H.x,H.y,Z.x,Z.y,N,null,null,2),N.u>x){$e=!0;break}$e?(W.L(Y),b=fe,g.up(p,W),f.add(b)):(g.hB(p),f.En(f.size-1,1,f.size-1),0<p.size&&(g.Wi(W.x,P.x,A),j.ma(A[0]+W.x,W.y),g.Mf(I,j),P.L(j),T!=null&&T.add(b),z.L(W),m=b,g.oB(p,W),b=f.get(f.size-1)))}},g.BX=function(l,o,r,n,a,c,p,f,m){var b=new h.h,x=new h.h,T=new h.h,I=new h.h,A=new h.h,P=new h.h,j=new h.h,D=new h.h,F=new h.h,N=new h.h,z=new h.ga(0),W=new h.ga(0),H=new h.h,Y=[[],[]],Z=h.Eg.Sb(a)==1;a=a.Xd(0);var se=n.ac(),ce=n.wc();Z?(P.ma(se.x*r,se.y*r),j.ma(ce.x*r,ce.y*r)):(Y[0][0]=se.x,Y[0][1]=se.y,Y[1][0]=ce.x,Y[1][1]=ce.y,h.cb.vt(),P.x=Y[0][0]*r,P.y=Y[0][1]*r,j.x=Y[1][0]*r,j.y=Y[1][1]*r);var ue=0,$e=0,fe=1,ze=n.Pn();b.L(se),x.L(ce),ce=new h.be(0);var Re=new h.be(0),xe=new h.be(0);g.up(ce,x),g.up(Re,j),xe.add(fe),g.Mf(m,b),f!=null&&f.add($e);var gt=[],Bt=0<p?ze?5:3:ze?5:1;g.YJ(Bt,gt);for(var vt=new h.ga(0),rt=new h.ga(0),st=new h.ga(0),Ze=new h.ga(0),It=new h.ga(0),We=new h.ga(0),br=new h.ga(0);0<Re.size;){var Qe=!1,Ti=NaN;for(h.kb.wd(l,o,P.x,P.y,j.x,j.y,vt,rt,null,2),se=0;se<Bt&&!(se==0&&(!ze&&0>=p&&vt.u<=c&&3.141592653589793>Math.abs(P.x-j.x)||n.Ux($e,fe)<=a));se++){var ut=gt[se]*fe+(1-gt[se])*$e;if(n.hc(ut,T),Z?D.ma(T.x*r,T.y*r):(Y[0][0]=T.x,Y[0][1]=T.y,h.cb.vt(),D.x=Y[0][0]*r,D.y=Y[0][1]*r),se==0&&(Ti=ut,A.L(T),N.L(D),0<c&&(vt.u>c||3.141592653589793<=Math.abs(P.x-j.x)))){Qe=!0;break}if(ze&&0<c){if(h.kb.wd(l,o,P.x,P.y,D.x,D.y,st,null,null,2),st.u>c||3.141592653589793<=Math.abs(P.x-D.x)){Qe=!0;break}}else if(0<p){if(ze?(I.NS(b,x,gt[se]),Z?F.ma(I.x*r,I.y*r):(Y[0][0]=I.x,Y[0][1]=I.y,h.cb.vt(),F.x=Y[0][0]*r,F.y=Y[0][1]*r)):(I.L(T),F.L(D)),h.kb.wd(l,o,P.x,P.y,F.x,F.y,Ze,null,null,2),!(Ze.u<=vt.u)){Qe=!0;break}if(h.kb.oj(l,o,P.x,P.y,Ze.u,rt.u,z,W,2),H.ma(z.u,W.u),h.kb.wd(l,o,H.x,H.y,D.x,D.y,It,null,null,2),It.u>p){Qe=!0;break}if(ze){if(h.kb.wd(l,o,H.x,H.y,F.x,F.y,We,null,null,2),We.u>p){Qe=!0;break}if(h.kb.wd(l,o,F.x,F.y,D.x,D.y,br,null,null,2),br.u>p){Qe=!0;break}}}}Qe?(x.L(A),j.L(N),fe=Ti,g.up(ce,x),g.up(Re,j),xe.add(fe)):(g.hB(ce),g.hB(Re),xe.En(xe.size-1,1,xe.size-1),g.Mf(m,x),ue+=vt.u,f!=null&&f.add(ue),0<Re.size&&(b.L(x),P.L(j),$e=fe,g.oB(ce,x),g.oB(Re,j),fe=xe.get(xe.size-1)))}if(f!=null)for(l=1/ue,se=0;se<f.size;se++)f.write(se,f.read(se)*l)},g.fC=function(l,o,r,n){n.reverse(),r!=null&&r.ni(0,r.size,1),r=l!=null?l[0]:NaN,n=o!=null?o[0]:NaN,l!=null&&(l[0]=n),o!=null&&(o[0]=r)},g.fJ=function(l,o,r,n,a){l?(n.L(r),a.L(o)):(n.L(o),a.L(r))},g.eJ=function(l,o,r){return l?(r.create(o.getType()),o.copyTo(r.get()),r.get().reverse(),r.get()):o},g.Wi=function(l,o,r){if(isNaN(o)){for(;3.141592653589793<r[0]-l;)r[0]-=6.283185307179586;for(;3.141592653589793<l-r[0];)r[0]+=6.283185307179586}else 3.141592653589793<r[0]+l-o?r[0]-=6.283185307179586:3.141592653589793<o-(r[0]+l)&&(r[0]+=6.283185307179586)},g.WW=function(l,o,r,n){3.141592653589793>Math.abs(o.x-l.x)?(n.Dc(l),3.141592653589793<=r.x-l.x?n.Ql(r.x-6.283185307179586,r.y):3.141592653589793<=l.x-r.x?n.Ql(r.x+6.283185307179586,r.y):n.Ql(r.x,r.y)):(n.Dc(r),3.141592653589793<=l.x-r.x?n.Ql(l.x-6.283185307179586,l.y):3.141592653589793<=r.x-l.x?n.Ql(l.x+6.283185307179586,l.y):n.Ql(l.x,l.y))},g.YJ=function(l,o){for(var r=0;r<l;r++){var n=Math.ceil(r/2)/(l+1);r%2!=0&&(n=-n),o[r]=.5+n}},g.Mu=function(l,o){return!!(h.s.Y(l.y,1.570796326794897)&&!h.s.Y(o.y,1.570796326794897)||h.s.Y(l.y,-1.570796326794897)&&!h.s.Y(o.y,-1.570796326794897))},g.Ku=function(l,o){return!!(h.s.Y(o.y,1.570796326794897)&&!h.s.Y(l.y,1.570796326794897)||h.s.Y(o.y,-1.570796326794897)&&!h.s.Y(l.y,-1.570796326794897))},g.FE=function(l,o,r){return!(!g.EE(l,o,r)||h.s.Y(l.y,1.570796326794897)||h.s.Y(l.y,-1.570796326794897)||h.s.Y(o.y,1.570796326794897)||h.s.Y(o.y,-1.570796326794897))},g.EE=function(l,o,r){return Math.abs(Math.abs(l.x-o.x)-3.141592653589793)<=r},g.Lu=function(l,o){return!!(h.s.Y(l.y,1.570796326794897)&&h.s.Y(o.y,1.570796326794897)||h.s.Y(l.y,-1.570796326794897)&&h.s.Y(o.y,-1.570796326794897))},g.kB=function(l,o,r,n){if(0<l.y){var a=new h.h;a.ma(o.x,1.570796326794897)}else(a=new h.h).ma(o.x,-1.570796326794897);h.s.Y(l.x,a.x)||h.s.Y(o.y,a.y)||(g.Mf(n,a),r!=null&&r.add(0))},g.iB=function(l,o,r,n){if(0<o.y){var a=new h.h;a.ma(l.x,1.570796326794897)}else(a=new h.h).ma(l.x,-1.570796326794897);h.s.Y(o.x,a.x)||h.s.Y(l.y,a.y)||(g.Mf(n,a),r!=null&&r.add(1))},g.jB=function(l,o,r,n,a,c,p){h.s.Cd(r)?(0<1.570796326794897-l.y&&((r=new h.h).ma(l.x,1.570796326794897),g.Mf(p,r),c!=null&&c.add(n)),0<1.570796326794897-o.y&&((r=new h.h).ma(o.x,1.570796326794897),g.Mf(p,r),c!=null&&c.add(n))):(0<1.570796326794897+l.y&&((r=new h.h).ma(l.x,-1.570796326794897),g.Mf(p,r),c!=null&&c.add(a)),0<1.570796326794897+o.y&&((r=new h.h).ma(o.x,-1.570796326794897),g.Mf(p,r),c!=null&&c.add(a)))},g.AU=function(l){if(-3.141592653589793>l.x)for(;-3.141592653589793>l.x;)l.x+=6.283185307179586;if(3.141592653589793<l.x)for(;3.141592653589793<l.x;)l.x-=6.283185307179586},g}();h.cj=k}(q||(q={})),function(h){h.ip=function(){function k(){}return k.nj=function(g,l,o){if(g==null||l==null||!h.cb.Wc(l))throw h.i.N();if(g.B())return g;var r=g,n=r.getType();if(h.aa.Hc(n)){r=h.Hh.lj(g,l),g=new h.l,r.A(g),n=h.ta.Wd(l,g,!1);for(var a=h.cb.gh(l),c=Math.floor((g.v-a.v)/a.R())*a.R()+a.v;c<g.C;)c>g.v+n&&c<g.C-n&&(r=h.Hh.ks(r,l,o,!0,c)),c+=a.R()}else{if(n==197)return(g=new h.Da(r.description)).ad(r,!1),k.nj(g,l,o);if(h.aa.yd(n))return(g=new h.Ta(r.description)).oc(r,!0),k.nj(g,l,o)}return k.Uy(r,l)},k.Uy=function(g,l){if(g==null||l==null||!h.cb.Wc(l))throw h.i.N();if(g.B())return g;var o=g.getType();return o==197?(o=new h.Da(g.description)).ad(g,!1):h.aa.yd(o)?(o=new h.Ta(g.description)).oc(g,!0):o=g,(o=h.Hh.lj(o,l)).B()?o:h.Eg.Sb(l)==1?h.Hh.Fn(o,l,0,o!=g,0):k.NQ(o,l,o!=g)},k.NQ=function(g,l,o){if(!h.cb.Wc(l))throw h.i.N();if(g.B())return g;var r=h.cb.bf(l),n=-180*r;return r*=360,h.Eg.Sb(l)==2&&(r=(n=h.cb.gh(l)).C,r-=n=n.v),h.Hh.Hp(g,n,r,l,o,0,!0)},k}()}(q||(q={})),function(h){h.BY=function(){function k(){}return k.P=function(g){return 0>g?-g:g},k.Mb=function(g,l){return 0<=l?k.P(g):-k.P(g)},k.Y=function(g,l){return g==l||k.P(g-l)<=k.JC*(1+(k.P(g)+k.P(l))/2)},k.Cd=function(g){return g==0||k.P(g)<=k.JC},k.Ah=function(g,l){var o=(l=(1-(l=Math.sqrt(1-l)))/(1+l))*l;return g/(1+l)*(1+o*(.25+o*(.015625+1/256*o)))*k.EL},k.EL=1.5707963267948966,k.JC=3552713678800501e-30,k}()}(q||(q={})),function(h){var k=function(l){this.Wf=l,this.Kk=this.Wf.getCode(),0>this.Kk&&(this.Kk=0)};h.DY=k;var g=function(){function l(o){o===void 0&&(o=null),this.Cj=null,this.Un=!1,o!==null&&(this.Cj=new k(o))}return l.prototype.Ec=function(){return this.Cj!=null?this.Cj.Kk:0},l.prototype.Of=function(){var o=new l;return this.copyTo(o),o},l.prototype.copyTo=function(o){o.Cj=this.Cj,o.Un=this.Un},l.prototype.Qz=function(){this.Un=!this.Un},l.prototype.qm=function(){return this.Cj!=null?this.Cj.Wf:null},l.prototype.LJ=function(o){if(0>=o)throw h.i.N();if(o!=this.Ec()){if((o=h.pf.geogtran(o))==null)throw h.i.N("Geogtran not found.");this.Cj=new k(o)}},l.prototype.Bz=function(){return this.Cj==null?null:this.Cj.Wf.toString()},l.prototype.tX=function(o){if(o==null)throw h.i.N();var r=null;try{r=h.pf.fromString(h.Sc.PE_TYPE_GEOGTRAN,o)}catch{throw h.i.N()}this.Cj=new k(r)},l.prototype.Nb=function(o){return o==this||!(!(o instanceof l)||(0>=this.Ec()||this.Ec()!=o.Ec())&&!this.qm().isEqual(o.qm()))&&this.Un==o.Un},l.prototype.toString=function(){var o="GeographicTransformation: "+this.Bz();return 200<o.length?o.substring(0,197)+"... ("+o.length.toString()+" characters)":o},l.create=function(o,r){var n=new l;return n.LJ(o),r&&n.Qz(),n},l.uP=function(o,r){var n=new l;return n.tX(o),r&&n.Qz(),n},l}();h.Dx=g}(q||(q={})),function(h){var k=function(){function l(){}return l.construct=function(o,r,n,a){var c=new l;return c.hw=o,c.iw=r,c.QY=n,c.RY=a,c},l.Ey=function(o,r){return o.hw==r.hw?o.iw==r.iw?0:o.iw<r.iw?-1:1:o.hw<r.hw?-1:1},l}(),g=function(){function l(){this.yT=[],this.zT=[],this.qp()}return l.kz=function(){return l.jK==null&&(l.jK=new l),l.jK},l.prototype.qp=function(){this.iD(this.yT),this.iD(this.zT)},l.prototype.iD=function(o){try{var r=[];r=r.sort(k.Ey);for(var n=0;n<r.length;n++)o.push(r[n])}catch{}},l}();h.CY=g}(q||(q={})),function(h){var k=function(){function g(){}return g.prototype.yD=function(l){this.Fk=l},g.prototype.WM=function(l){this.Fb=l},g.prototype.xD=function(l){this.zo=l},g.CE=function(l){return!(l.B()||l.getType()!=1607&&l.getType()!=1736)},g.AE=function(l){return!(l.B()||l.getType()!=1607&&l.getType()!=1736||20>l.I())},g.BE=function(l){return!(l.B()||l.getType()!=1607&&l.getType()!=1736||20>l.I())},g}();h.Uk=k}(q||(q={})),function(h){h.$b=function(){function k(){}return k.TT=function(g){var l=new h.Da;return l.sx(g.es(),g.gs()),l.yj(g.es(),g.fs()),l.yj(g.ds(),g.fs()),l.yj(g.ds(),g.gs()),l},k.zh=function(g,l){return g===null?null:h.Hx.local().V(g,l,null)},k.jY=function(g,l){var o=h.Gh.local();return g=new h.Zc(g),o.V(g,l,null).next()},k.im=function(g,l,o){return h.kp.local().V(g,l,o,null)},k.ep=function(g,l,o){return h.Kx.local().V(g,l,o,null)},k.VX=function(g,l,o){var r=h.Kx.local();for(g=new h.Zc(g),l=new h.Zc(l),o=r.V(g,l,o,null),r=[];(l=o.next())!=null;)r.push(l);return r},k.Nb=function(g,l,o){return h.dj.local().V(3,g,l,o,null)},k.TP=function(g,l,o){return h.dj.local().V(4,g,l,o,null)},k.RS=function(g,l,o){var r=h.Xj.local();for(g=new h.Zc(g),l=new h.Zc(l),o=r.V(g,l,o,null),r=[];(l=o.next())!=null;)r.push(l);return r},k.QP=function(g,l,o){var r=h.kp.local();for(g=new h.Zc(g),l=new h.Zc(l),o=r.V(g,l,o,null),r=[];(l=o.next())!=null;)r.push(l);return r},k.Ea=function(g,l,o){return h.Xj.local().V(g,l,o,null)},k.QS=function(g,l,o){if((g=h.Xj.local().V(g,l,o,null,1))===null)return[];if(g.getType()===550){for(l=[],o=0;o<g.wa;o++)l.push(g.KR(o));return l}return g.getType()===33?[g]:[]},k.qY=function(g,l,o){return h.dj.local().V(2,g,l,o,null)},k.contains=function(g,l,o){return h.dj.local().V(1,g,l,o,null)},k.BP=function(g,l,o){return h.dj.local().V(16,g,l,o,null)},k.touches=function(g,l,o){return h.dj.local().V(8,g,l,o,null)},k.DU=function(g,l,o){return h.dj.local().V(32,g,l,o,null)},k.TS=function(g,l,o){return h.dj.local().V(1073741824,g,l,o,null)},k.yB=function(g,l,o,r){return h.zL.local().V(g,l,o,r,null)},k.tb=function(g,l,o,r){var n=null;if(o!=null){if(n=o.Hd(),r!=null&&n.Ec()!=r.Ec()&&n.od!=r.od)throw h.i.Xk()}else if(r!=null)throw h.i.N();return g=h.rL.local().V(g,l,null),n!==null&&r!==null&&(g=h.Tc.Nh(g,n,r)),g},k.clip=function(g,l,o){return h.kL.local().V(g,h.l.construct(l.es(),l.gs(),l.ds(),l.fs()),o,null)},k.dl=function(g,l,o){if(g==null||l==null)return null;for(g=h.mL.local().V(!0,g,l,o,null),l=[];(o=g.next())!=null;)o.B()||l.push(o);return l.slice(0)},k.MN=function(g,l,o,r,n,a,c,p){if(n===!0)return k.NN(g,l,o,r,a,c,p);if(n=o,l!=null){if(c=l.Hd(),r!=null&&c.Ec()!=r.Ec()){if(c.od!=r.od)throw h.i.Xk();n=[],h.Tc.XE(o,o.length,r,c,n)}}else if(r!=null)throw h.i.N();if(o=h.AC.local(),a){for(g=new h.Zc(g),l=o.V(g,l,n,a,null),g=[];(a=l.next())!=null;)g.push(a);a=g.slice(0)}else for(a=[],r=0;r<g.length;r++)a[r]=o.V(g[r],l,n[r],null);return a},k.NN=function(g,l,o,r,n,a,c){if(l===null||(r==null&&(r=l.Ec()!==4326?l.Hd():h.Tc.Zg(9001)),r.od!==0))throw h.i.N();if(h.Tc.XE(o,o.length,r,h.Tc.Zg(9001),o),r=h.FC.local(),n){for(g=new h.Zc(g),l=r.V(g,l,a,o,c,!1,n,null),o=[];(a=l.next())!=null;)o.push(a);n=o.slice(0)}else{n=[];for(var p=0;p<g.length;p++)n[p]=r.V(g[p],l,a,o[p],c,!1,null)}return n},k.buffer=function(g,l,o,r,n,a,c){var p=o;if(n===!1){if(l!=null){if(n=l.Hd(),r!=null&&n.Ec()!=r.Ec()){if(n.od!=r.od)throw h.i.Xk();p=h.Tc.Nh(o,r,n)}}else if(r!=null)throw h.i.N();g=h.AC.local().V(g,l,p,null)}else{if(l===null||(r==null&&(r=l.Ec()!==4326?l.Hd():h.Tc.Zg(9001)),r.od!==0))throw h.i.N();p=h.Tc.Nh(o,r,h.Tc.Zg(9001)),g=h.FC.local().V(g,l,a,p,c,!1,null)}return g},k.BU=function(g,l,o,r,n,a,c){if(l!=null){var p=l.Hd();if(c!=null&&p.Ec()!=c.Ec()){if(p.od!=c.od)throw h.i.Xk();o=h.Tc.Nh(o,c,p)}}else if(c!=null)throw h.i.N();for(g=new h.Zc(g),l=h.IC.local().V(g,l,o,r,n,a,null),o=[];(r=l.next())!=null;)o.push(r);return o.slice(0)},k.offset=function(g,l,o,r,n,a,c){if(l!=null){var p=l.Hd();if(c!=null&&p.Ec()!=c.Ec()){if(p.od!=c.od)throw h.i.Xk();o=h.Tc.Nh(o,c,p)}}else if(c!=null)throw h.i.N();return h.IC.local().V(g,l,o,r,n,a,null)},k.iP=function(g){return h.CC.local().V(g,null)},k.jP=function(g,l){var o=h.CC.local();for(g=new h.Zc(g),l=o.V(g,l,null),o=[];(g=l.next())!=null;)o.push(g);return o},k.nz=function(g,l,o){return h.Ix.local().nz(g,l,o)},k.oz=function(g,l){return h.Ix.local().oz(g,l)},k.pz=function(g,l,o,r){return h.Ix.local().pz(g,l,o,r)},k.eC=function(g,l){return h.Yl.local().V(g,l,!1,null)},k.dT=function(g,l){return h.Yl.local().rs(g,l,null)},k.QQ=function(g,l,o,r,n){var a=h.EC.local();if(l!=null){if(l=l.Hd(),n!=null&&l.Ec()!=n.Ec()){if(l.od!=n.od)throw h.i.Xk();o=h.Tc.Nh(o,n,l)}}else if(n!=null)throw h.i.N();return a.V(g,o,r,null)},k.Qr=function(g,l,o,r){var n=h.Xl.local();if(l!=null){if(l=l.Hd(),r!=null&&l.Ec()!=r.Ec()){if(l.od!=r.od)throw h.i.Xk();o=h.Tc.Nh(o,r,l)}}else if(r!=null)throw h.i.N();return n.V(g,o,null)},k.Wy=function(g,l,o,r,n){n===void 0&&(n=0);var a=h.tL.local();if(n==4||n!==0)throw h.i.Ie();if(r!==null){if(r.od!==0)throw h.i.N("Unit must be a linear unit type");o=h.Tc.Nh(o,r,h.Tc.Zg(9001))}return a.V(g,o,l,n,null)},k.WQ=function(g,l,o,r){if(g===null)return 0;if(r==4||r!==0)throw h.i.Ie();if(g.getType()==197)g=k.TT(g);else if(g.getType()!=1736)return 0;if(r=h.cb.sc(l),g=h.cb.zh(g,l,r),g=h.UK.XQ([g])[0],o!==null){if(o.od!==2)throw h.i.N("Unit must be a area unit type");g=h.Tc.Nh(g,h.Tc.Zg(109404),o)}return g},k.ZQ=function(g,l,o,r){if(g=h.vL.local().V(g,l,r,null),o!==null){if(o.od!==0)throw h.i.N("Unit must be a linear unit type");g=h.Tc.Nh(g,h.Tc.Zg(9001),o)}return g},k.JU=function(g,l,o){if(g===null)return 0;var r=null;if(l!=null){if((r=l.Hd()).od==0&&(r=h.Tc.aG(r))==null&&o!==null)throw h.i.N();if(o!=null&&r.Ec()!=o.Ec()&&r.od!=o.od)throw h.i.Xk()}else if(o!=null)throw h.i.N();return g.getType()==1736||g.getType()==197?(g=g.Ke(),o!==null?h.Tc.Nh(g,r,o):g):0},k.KU=function(g,l,o){if(g===null||g.B()||1>g.Db())return 0;var r=null;if(l!=null){if(r=l.Hd(),o!=null&&r.Ec()!=o.Ec()&&r.od!=o.od)throw h.i.Xk()}else if(o!=null)throw h.i.N();g.getType()==1736||g.getType()==197?l=g.mg():h.aa.yd(g.getType())?(l=new h.Ta(g.description)).oc(g,!0):l=g,g=0,l=l.Ga();for(var n=new h.h,a=new h.h;l.$a();)for(;l.Ha();){var c=l.ha();c.Yp(n),c.Tr(a),g+=h.h.tb(n,a)}return r!==null&&o!==null&&(g=h.Tc.Nh(g,r,o)),g},k.fP=function(g){return g.points!==void 0?k.mS(g,g.hasZ!==void 0&&g.hasZ,g.hasM!==void 0&&g.hasM):g.rings!==void 0?k.lG(g.rings,g.hasZ!==void 0&&g.hasZ,g.hasM!==void 0&&g.hasM,"P"):g.paths!==void 0?k.lG(g.paths,g.hasZ!==void 0&&g.hasZ,g.hasM!==void 0&&g.hasM,"L"):g.x!==void 0?k.nS(g):g.xmin!==void 0?k.lS(g):null},k.nS=function(g){if(g.x==null||g.x=="NaN")return new h.Sa;var l=new h.Sa(g.x,g.y);return g.z!==void 0&&g.z!==null&&l.wX(g.z),g.m!==void 0&&g.m!==null&&l.hX(g.m),l},k.lS=function(g){if(g.xmin==null||g.xmin=="NaN")return new h.Fh;var l=new h.Fh(g.xmin,g.ymin,g.xmax,g.ymax);return g.zmin!==void 0&&g.zmin!==null&&l.setInterval(1,0,g.zmin,g.zmax),g.mmin!==void 0&&g.mmin!==null&&l.setInterval(2,0,g.mmin,g.mmax),l},k.mS=function(g,l,o){var r=0,n=new h.de,a=3*g.points.length;a%2!=0&&a++,2>a&&(a=2);var c=h.O.truncate(3*g.points.length/2);4>c?c=4:16>c&&(c=16),a=h.Yc.Dn(a,0);var p=h.Yc.Dn(c);c=h.Yc.Dn(c);for(var f=0;f<g.points.length;f++)a.write(2*f,g.points[f][0]),a.write(2*f+1,g.points[f][1]),p.write(f,l||o?g.points[f][2]:NaN),c.write(f,o&&l?g.points[f][3]:NaN),r++;return r!=0&&(n.resize(r),n.hn(0,a)),l&&(n.re(1),n.hn(1,p)),o&&(n.re(2),n.hn(2,l==0?p:c)),n.Pc(16777215),n},k.lG=function(g,l,o,r){var n=0,a=2;if(r=="P"){var c=new h.Da;n=1,a=3}else c=new h.Ta;for(var p=h.Yc.Oh(0),f=h.Yc.Mr(0),m=0,b=0,x=[],T=[],I=0;I<g.length;I++){var A=g[I].length;if(x[I]=!1,r==="P"&&g[I][0][0]===g[I][g[I].length-1][0]&&g[I][0][1]===g[I][g[I].length-1][1]){var P=o==0||g[I][0][3]===g[I][g[I].length-1][3]||g[I][0][3]===void 0&&g[I][g[I].length-1][3]===void 0;(l==0||g[I][0][2]===g[I][g[I].length-1][2]||g[I][0][2]===void 0&&g[I][g[I].length-1][2]===void 0)&&P&&(x[I]=!0,--A)}A>=a?(T[I]=!1,b+=1,p.add(m),f.add(n),m+=A):T[I]=!0}for((r=3*m)%2!=0&&r++,2>r&&(r=2),4>(I=h.O.truncate(3*m/2))?I=4:16>I&&(I=16),r=h.Yc.Dn(r,0),n=h.Yc.Dn(I),a=h.Yc.Dn(I),I=A=0;I<g.length;I++)if(T[I]===!1)for(P=0;P<g[I].length;P++){var j=!1;P===g[I].length-1&&x[I]===!0&&(j=!0),j||(r.write(2*A,g[I][P][0]),r.write(2*A+1,g[I][P][1]),n.write(A,l||o?g[I][P][2]:NaN),a.write(A,o&&l?g[I][P][3]:NaN),A++)}return m!=0&&(g=c,p.resize(b),f.resize(b),0<m&&(p.add(m),f.add(0)),g.hn(0,r),g.PJ(f),g.QJ(p)),l&&(c.re(1),c.hn(1,n)),o&&(c.re(2),c.hn(2,l==0?n:a)),c.Pc(16777215),c},k}()}(q||(q={})),function(h){h.Ex=function(){function k(){}return k.br=function(g){var l,o=0,r=g.length,n=g[0];for(l=0;l<r-1;l++){var a=g[l+1];o+=(a[0]-n[0])*(a[1]+n[1]),n=a}return 0<=o},k.rotate=function(g,l,o){l=l*Math.PI/180;var r=Math.cos(l),n=Math.sin(l);if(g.paths!==void 0){l={paths:[]};for(var a=0;a<g.paths.length;a++){for(var c=g.paths[a],p=[],f=0;f<c.length;f++){var m=c[f].slice(0);p.push(m);var b=r*(c[f][0]-o.x)-n*(c[f][1]-o.y)+o.x,x=n*(c[f][0]-o.x)+r*(c[f][1]-o.y)+o.y;m[0]=b,m[1]=x}l.paths.push(p),g.hasZ!==void 0&&(l.hasZ=g.hasZ),g.hasM!==void 0&&(l.hasM=g.hasM)}return l}if(g.rings!==void 0){for(l={rings:[]},a=0;a<g.rings.length;a++){c=g.rings[a],p=[];var T=k.br(c);for(f=0;f<c.length;f++)m=c[f].slice(0),p.push(m),b=r*(c[f][0]-o.x)-n*(c[f][1]-o.y)+o.x,x=n*(c[f][0]-o.x)+r*(c[f][1]-o.y)+o.y,m[0]=b,m[1]=x;k.br(p)!==T&&p.reverse(),l.rings.push(p),g.hasZ!==void 0&&(l.hasZ=g.hasZ),g.hasM!==void 0&&(l.hasM=g.hasM)}return l}if(g.x!==void 0)return l={x:r*(g.x-o.x)-n*(g.y-o.y)+o.x,y:n*(g.x-o.x)+r*(g.y-o.y)+o.y},g.z!==void 0&&(l.z=g.z),g.m!==void 0&&(l.m=g.m),g.hasZ!==void 0&&(l.hasZ=g.hasZ),g.hasM!==void 0&&(l.hasM=g.hasM),l;if(g.points!==void 0){for(l={points:[]},a=g.points,f=0;f<a.length;f++)(c=a[f].slice(0))[0]=r*(a[f][0]-o.x)-n*(a[f][1]-o.y)+o.x,c[1]=n*(a[f][0]-o.x)+r*(a[f][1]-o.y)+o.y,l.points.push(c);return g.hasZ!==void 0&&(l.hasZ=g.hasZ),g.hasM!==void 0&&(l.hasM=g.hasM),l}return null},k.JQ=function(g,l){if(g.paths!==void 0){for(var o={paths:[]},r=0;r<g.paths.length;r++){for(var n=g.paths[r],a=[],c=0;c<n.length;c++){var p=n[c].slice(0);a.push(p);var f=l.x-n[c][0];p[0]=n[c][0]+2*f}o.paths.push(a)}return g.hasZ!==void 0&&(o.hasZ=g.hasZ),g.hasM!==void 0&&(o.hasM=g.hasM),o}if(g.rings!==void 0){for(o={rings:[]},r=0;r<g.rings.length;r++){n=g.rings[r];var m=k.br(n);for(a=[],c=0;c<n.length;c++)p=n[c].slice(0),a.push(p),f=l.x-n[c][0],p[0]=n[c][0]+2*f;k.br(a)!==m&&a.reverse(),o.rings.push(a)}return g.hasZ!==void 0&&(o.hasZ=g.hasZ),g.hasM!==void 0&&(o.hasM=g.hasM),o}if(g.x!==void 0)return f=l.x-g.x,o={x:g.x+2*f,y:g.y},g.z!==void 0&&(o.z=g.z),g.m!==void 0&&(o.m=g.m),g.hasZ!==void 0&&(o.hasZ=g.hasZ),g.hasM!==void 0&&(o.hasM=g.hasM),o;if(g.points!==void 0){for(o={points:[]},r=g.points,c=0;c<r.length;c++)n=r[c].slice(0),f=l.x-n[0],n[0]+=2*f,o.points.push(n);return g.hasZ!==void 0&&(o.hasZ=g.hasZ),g.hasM!==void 0&&(o.hasM=g.hasM),o}return g.xmin!==void 0?(o={v:g.xmin,G:g.ymin,C:g.xmax,H:g.ymax},g.zmin!==void 0&&(o.zmin=g.zmin,o.zmax=g.zmax),g.mmin!==void 0&&(o.mmin=g.mmin,o.mmax=g.mmax),f=l.x-g.xmin,o.xmax=g.xmin+2*f,f=l.x-g.xmax,o.xmin=g.xmax+2*f,g.zmin!==void 0&&(o.zmin=g.zmin),g.zmax!==void 0&&(o.zmax=g.zmax),g.mmin!==void 0&&(o.mmin=g.mmin),g.mmax!==void 0&&(o.mmax=g.mmax),g.hasZ!==void 0&&(o.hasZ=g.hasZ),g.hasM!==void 0&&(o.hasM=g.hasM),o):null},k.KQ=function(g,l){if(g.paths!==void 0){for(var o={paths:[]},r=0;r<g.paths.length;r++){for(var n=g.paths[r],a=[],c=0;c<n.length;c++){var p=n[c].slice(0);a.push(p);var f=l.y-n[c][1];p[1]=n[c][1]+2*f}o.paths.push(a)}return g.hasZ!==void 0&&(o.hasZ=g.hasZ),g.hasM!==void 0&&(o.hasM=g.hasM),o}if(g.rings!==void 0){for(o={rings:[]},r=0;r<g.rings.length;r++){n=g.rings[r];var m=k.br(n);for(a=[],c=0;c<n.length;c++)p=n[c].slice(0),a.push(p),f=l.y-n[c][1],p[1]=n[c][1]+2*f;k.br(a)!==m&&a.reverse(),o.rings.push(a)}return g.hasZ!==void 0&&(o.hasZ=g.hasZ),g.hasM!==void 0&&(o.hasM=g.hasM),o}if(g.x!==void 0)return f=l.y-g.y,o={y:g.y+2*f,x:g.x},g.z!==void 0&&(o.z=g.z),g.m!==void 0&&(o.m=g.m),g.hasZ!==void 0&&(o.hasZ=g.hasZ),g.hasM!==void 0&&(o.hasM=g.hasM),o;if(g.points!==void 0){for(o={points:[]},r=g.points,c=0;c<r.length;c++)n=r[c].slice(0),f=l.y-n[1],n[1]+=2*f,o.points.push(n);return g.hasZ!==void 0&&(o.hasZ=g.hasZ),g.hasM!==void 0&&(o.hasM=g.hasM),o}return g.xmin!==void 0?(o={v:g.xmin,G:g.ymin,C:g.xmax,H:g.ymax},g.zmin!==void 0&&(o.zmin=g.zmin,o.zmax=g.zmax),g.mmin!==void 0&&(o.mmin=g.mmin,o.mmax=g.mmax),f=l.y-g.ymin,o.ymax=g.ymin+2*f,f=l.y-g.ymax,o.ymin=g.ymax+2*f,g.zmin!==void 0&&(o.zmin=g.zmin),g.zmax!==void 0&&(o.zmax=g.zmax),g.mmin!==void 0&&(o.mmin=g.mmin),g.mmax!==void 0&&(o.mmax=g.mmax),g.hasZ!==void 0&&(o.hasZ=g.hasZ),g.hasM!==void 0&&(o.hasM=g.hasM),o):null},k}()}(q||(q={})),function(h){h.ZK=function(){function k(){}return k.Ig=function(g,l){switch(l==null&&(l=h.ee.og()),g){case 33:return new h.Sa(l);case 322:return new h.yb(l);case 197:return new h.Fh(l);case 550:return new h.de(l);case 1607:return new h.Ta(l);case 1736:return new h.Da(l);default:throw h.i.fa("invalid argument.")}},k}()}(q||(q={})),function(h){var k=function(){function g(l,o){this.Te=h.ia.qf(l,-1),this.ua=new h.au,this.wl=o}return g.prototype.AW=function(l){this.ua.At(Math.min(this.Te.size,l)),this.ua.fn(l)},g.prototype.addElement=function(l,o){if(o===void 0)return this.eN(l);o=h.O.truncate(o%this.Te.size);var r=this.Te.get(o);return r==-1&&(r=this.ua.Ph(),this.Te.set(o,r)),this.ua.addElement(r,l)},g.prototype.eN=function(l){var o=this.wl.jz(l);o=h.O.truncate(o%this.Te.size);var r=this.Te.get(o);return r==-1&&(r=this.ua.Ph(),this.Te.set(o,r)),this.ua.addElement(r,l)},g.prototype.jd=function(l,o){if(o===void 0)this.KP(l);else{o=h.O.truncate(o%this.Te.size);var r=this.Te.get(o);if(r==-1)throw h.i.N();for(var n=this.ua.rc(r),a=-1;n!=-1;){var c=this.ua.lb(n);this.ua.ja(n)==l?(this.ua.jd(r,a,n),this.ua.rc(r)==-1&&(this.ua.bh(r),this.Te.set(o,-1))):a=n,n=c}}},g.prototype.KP=function(l){var o=this.wl.jz(l);o=h.O.truncate(o%this.Te.size);var r=this.Te.get(o);if(r==-1)throw h.i.N();for(var n=this.ua.rc(r),a=-1;n!=-1;){var c=this.ua.lb(n);this.ua.ja(n)==l?(this.ua.jd(r,a,n),this.ua.rc(r)==-1&&(this.ua.bh(r),this.Te.set(o,-1))):a=n,n=c}},g.prototype.rR=function(l){return l=h.O.truncate(l%this.Te.size),(l=this.Te.get(l))==-1?-1:this.ua.rc(l)},g.prototype.ER=function(l){return this.ua.lb(l)},g.prototype.vd=function(l){var o=this.wl.jz(this.ja(l));o=h.O.truncate(o%this.Te.size);var r=this.Te.get(o);if(r==-1)throw h.i.N();for(var n=this.ua.rc(r),a=-1;n!=-1;){if(n==l)return this.ua.jd(r,a,n),void(this.ua.rc(r)==-1&&(this.ua.bh(r),this.Te.set(o,-1)));a=n,n=this.ua.lb(n)}throw h.i.N()},g.prototype.ja=function(l){return this.ua.ja(l)},g.prototype.clear=function(){this.Te=h.ia.qf(this.Te.size,-1),this.ua.clear()},g.prototype.size=function(){return this.ua.TF()},g}();h.dL=k}(q||(q={})),function(h){var k=function(){function g(){this.Li=new h.$c(3),this.ua=new h.$c(6),this.sT=!1,this.je=-1}return g.prototype.fl=function(l){this.Li.jd(l)},g.prototype.Pw=function(){return this.Li.Ce()},g.prototype.bv=function(l){this.ua.jd(l)},g.prototype.$A=function(){return this.ua.Ce()},g.prototype.WB=function(l,o){this.Li.S(l,1,o)},g.prototype.ex=function(l,o){this.Li.S(l,2,o)},g.prototype.gX=function(l,o){this.Li.S(l,3,o)},g.prototype.UB=function(l,o){this.ua.S(l,4,o)},g.prototype.jX=function(l,o){this.ua.S(l,3,o)},g.prototype.TJ=function(l,o){this.ua.S(l,2,o)},g.prototype.Ph=function(l){var o=this.$A();return this.ua.S(o,3,this.je),this.ua.S(o,4,0),this.ua.S(o,5,l),this.je!=-1&&this.TJ(this.je,o),this.je=o},g.prototype.bh=function(l){this.LE(l);var o=this.ua.T(l,2),r=this.ua.T(l,3);return o!=-1?this.jX(o,r):this.je=r,r!=-1&&this.TJ(r,o),this.bv(l),r},g.prototype.At=function(l){this.ua.De(l)},g.prototype.PF=function(l){return this.ua.T(l,5)},g.prototype.fX=function(l,o){this.ua.S(l,5,o)},g.prototype.addElement=function(l,o){return this.tS(l,o)},g.prototype.tS=function(l,o){var r=this.Pw();this.ex(r,-1),this.ua.T(l,0)==-1&&this.ua.S(l,0,r);var n=this.ua.T(l,1);return this.WB(r,n),n!=-1&&this.ex(n,r),this.ua.S(l,1,r),this.setData(r,o),this.UB(l,this.bs(l)+1),this.sT&&this.gX(r,l),r},g.prototype.jd=function(l,o){var r=this.we(o),n=this.lb(o);return r!=-1?this.ex(r,n):this.ua.S(l,0,n),n!=-1?this.WB(n,r):this.ua.S(l,1,r),this.fl(o),this.UB(l,this.bs(l)-1),n},g.prototype.fn=function(l){this.Li.De(l)},g.prototype.getData=function(l){return this.Li.T(l,0)},g.prototype.setData=function(l,o){this.Li.S(l,0,o)},g.prototype.lb=function(l){return this.Li.T(l,2)},g.prototype.we=function(l){return this.Li.T(l,1)},g.prototype.rc=function(l){return this.ua.T(l,0)},g.prototype.Fc=function(l){return this.ua.T(l,1)},g.prototype.clear=function(){for(var l=this.je;l!=-1;)l=this.bh(l)},g.prototype.LE=function(l){for(var o=this.Fc(l);o!=-1;){var r=o;o=this.we(r),this.fl(r)}this.ua.S(l,0,-1),this.ua.S(l,1,-1),this.UB(l,0)},g.prototype.B=function(){return this.Li.size==0},g.prototype.TF=function(){return this.Li.size},g.prototype.bs=function(l){return this.ua.T(l,4)},g.prototype.qz=function(l){return this.ua.T(l,3)},g}();h.jp=k}(q||(q={})),function(h){var k=function(){function g(l){l===void 0?(this.ug=new h.$c(2),this.ua=new h.$c(4),this.je=-1,this.Qv=!0):(this.ug=new h.$c(2),this.ua=new h.$c(l?4:2),this.je=-1,this.Qv=l)}return g.prototype.fl=function(l){this.ug.jd(l)},g.prototype.Pw=function(){return this.ug.Ce()},g.prototype.bv=function(l){this.ua.jd(l)},g.prototype.$A=function(){return this.ua.Ce()},g.prototype.Ph=function(){var l=this.$A();return this.Qv&&(this.ua.S(l,3,this.je),this.je!=-1&&this.ua.S(this.je,2,l),this.je=l),l},g.prototype.bh=function(l){for(var o=this.rc(l);o!=-1;){var r=o;o=this.lb(o),this.fl(r)}this.Qv&&(o=this.ua.T(l,2),r=this.ua.T(l,3),o!=-1?this.ua.S(o,3,r):this.je=r,r!=-1&&this.ua.S(r,2,o)),this.bv(l)},g.prototype.At=function(l){this.ua.De(l)},g.prototype.addElement=function(l,o){var r=this.ua.T(l,1),n=this.Pw();return r!=-1?this.ug.S(r,1,n):this.ua.S(l,0,n),this.ua.S(l,1,n),this.ug.S(n,0,o),n},g.prototype.fn=function(l){this.ug.De(l)},g.prototype.jd=function(l,o,r){o!=-1?(this.ug.S(o,1,this.ug.T(r,1)),this.ua.T(l,1)==r&&this.ua.S(l,1,o)):(this.ua.S(l,0,this.ug.T(r,1)),this.ua.T(l,1)==r&&this.ua.S(l,1,-1)),this.fl(r)},g.prototype.Hy=function(l,o){var r=this.ua.T(l,1),n=this.ua.T(o,0);n!=-1&&(r!=-1?this.ug.S(r,1,n):this.ua.S(l,0,n),this.ua.S(l,1,this.ua.T(o,1))),this.Qv&&(l=this.ua.T(o,2),r=this.ua.T(o,3),l!=-1?this.ua.S(l,3,r):this.je=r,r!=-1&&this.ua.S(r,2,l)),this.bv(o)},g.prototype.ja=function(l){return this.ug.T(l,0)},g.prototype.Sj=function(l,o){this.ug.S(l,0,o)},g.prototype.lb=function(l){return this.ug.T(l,1)},g.prototype.rc=function(l){return this.ua.T(l,0)},g.prototype.Jn=function(l){return this.ja(this.rc(l))},g.prototype.clear=function(){this.ug.mj(!0),this.ua.mj(!0),this.je=-1},g.prototype.B=function(){return this.ug.size==0},g.prototype.TF=function(){return this.ug.size},g.prototype.qz=function(l){return this.ua.T(l,3)},g}();h.au=k}(q||(q={})),function(h){h.ta=function(){function k(){}return k.Wd=function(g,l,o){return l=l.xr(),g=g!=null&&g.Xd!==void 0?g.Xd(0):0,o&&(l*=4,g*=1.1),Math.max(g,l)},k.Er=function(g){return 2*Math.sqrt(2)*g},k.rN=function(g){return Math.sqrt(2)*g},k.kj=function(g,l,o){var r=new h.l;return l.A(r),k.Wd(g,r,o)},k.wE=function(g,l,o){return l=l.Tg(1,0).xr(),g=g!=null?g.Xd(1):0,o&&(l*=4,g*=1.1),Math.max(g,l)},k.mv=function(g,l){var o=new h.l;return g.xc(o),g=new h.l,l.xc(g),o.Zb(g),o},k.YN=function(g){var l=new h.l;if(g.xc(l),l.B())return null;var o=new h.du(l,8),r=-1,n=new h.l,a=!1;do for(var c=0,p=g.da();c<p;c++){if(g.Rj(c,n),(r=o.Jz(c,n,r))==-1){if(a)throw h.i.fa("internal error");g.yp(l,!1),a=!0,o.reset(l,8);break}a=!1}while(a);return o},k.nE=function(g){var l=new h.l;g.xc(l);for(var o=new h.du(l,8),r=-1,n=g.Ga(),a=new h.l,c=!1;n.$a();)for(;n.Ha();){var p=n.ha(),f=n.wb();if(p.A(a),(r=o.Jz(f,a,r))==-1){if(c)throw h.i.Qa();g.yp(l,!1),c=!0,o.reset(l,8),n.Zi();break}}return o},k.jj=function(g,l){var o=new h.l;g.xc(o);for(var r=new h.du(o,8),n=-1,a=new h.l,c=g.Ga(),p=!1;c.$a();)for(;c.Ha();){var f=c.ha(),m=c.wb();if(f.A(a),a.isIntersecting(l)&&(n=r.Jz(m,a,n))==-1){if(p)throw h.i.fa("internal error.");g.yp(o,!1),p=!0,r.reset(o,8),c.Zi();break}}return r},k.oE=function(g,l){for(var o=new h.du(l,8),r=new h.h,n=!1,a=new h.l,c=0;c<g.I();c++)if(g.D(c,r),l.contains(r)&&(a.K(r),o.vj(c,a)==-1)){if(n)throw h.i.Qa();n=!0,c=new h.l,g.yp(c,!1),o.reset(c,8),c=-1}return o},k.lR=function(g,l,o){var r=new h.l,n=new h.l;g.xc(r),l.xc(n),r.W(o,o),n.W(o,o);var a=new h.l;a.K(r),a.Ea(n),g=g.Ga(),l=l.Ga();var c=new h.xC;c.aC(o);var p=!1;for(c.pK();g.$a();)for(;g.Ha();)g.ha().A(r),r.isIntersecting(a)&&(p=!0,(o=new h.l).K(r),c.JD(g.wb(),o));if(c.iF(),!p)return null;for(r=!1,c.oK();l.$a();)for(;l.Ha();)l.ha().A(n),n.isIntersecting(a)&&(r=!0,(o=new h.l).K(n),c.ED(l.wb(),o));return c.hF(),r?c:null},k.mR=function(g,l,o,r,n){var a=g.getType(),c=l.getType(),p=new h.l,f=new h.l;g.xc(p),l.xc(f),p.W(o,o),f.W(o,o);var m=new h.l;m.K(p),m.Ea(f);var b=new h.xC;b.aC(o);var x=!1;b.pK();var T=0;for(o=g.da();T<o;T++)r&&a==1736&&!g.Ev(T)||(g.Rj(T,p),p.isIntersecting(m)&&(x=!0,b.JD(T,p)));if(b.iF(),!x)return null;for(g=!1,b.oK(),r=0,o=l.da();r<o;r++)n&&c==1736&&!l.Ev(r)||(l.Rj(r,f),f.isIntersecting(m)&&(g=!0,b.ED(r,f)));return b.hF(),g?b:null},k.Ru=function(g,l,o){if(g!=l)for(var r=0;r<o;r++)g[r]==null?g[r]=h.h.al(l[r]):g[r].L(l[r])},k.Jy=function(g,l,o,r){var n=0;for(r+=0;n<r;o++,n++)g[n]==null&&(g[n]=[0,0]),g[n][0]=l[o].x,g[n][1]=l[o].y},k.Iy=function(g,l,o,r){var n=l,a=0;for(l=r+l;n<l;a++,n++)g[n]==null?g[n]=h.h.construct(o[a][0],o[a][1]):g[n].ma(o[a][0],o[a][1])},k.kP=function(g,l,o){if(g!=l)for(var r=0;r<o;r++)g[r]==null?g[r]=new h.Sa(l[r]):l[r].copyTo(g[r])},k.vE=function(g,l,o,r){var n=0;return g!=null&&(n=g.Xd(0),r&&!o||g==null||(n+=1.01*g.vz(0))),o&&(l*=4,n*=1.01),Math.max(n,l)},k.ty=function(g,l,o){return k.vE(g,l.xr(),o,!1)},k.gO=function(g,l){var o=new h.l;return l.A(o),k.ty(g,o,!0)},k.uy=function(g,l){return k.vE(g,l.xr(),!1,!0)},k.Hu=function(g,l){var o=new h.l;return l.A(o),k.uy(g,o)},k.AG=function(g,l,o,r){r*=r;var n=new h.h;if(n.uc(g,l),(g=new h.h).uc(o,l),l=n.Sk(),o=g.Sk(),l<=r&&o<=r)return!0;var a=h.lc.ox(n.wi(g));return(a<=r*l||a<=r*o)&&0<=n.Qh(g)},k.dK=function(g,l,o,r){for(var n=0;n<l;n++){var a=g[n].y,c=h.O.Rk(a,o,r);c!=a&&(g[n].y=c)}},k}()}(q||(q={})),function(h){var k,g,l=function(){function a(c){this.Ya=c}return a.prototype.compare=function(c,p,f){c=c.ja(f),f=this.Ya.nk(p);var m=this.Ya.nk(c);return f<m?-1:f==m?n.gq(p)&&n.Gv(c)?-1:n.gq(c)&&n.Gv(p)?1:0:1},a}(),o=function(){function a(c){this.Ya=c}return a.prototype.nr=function(c,p,f){this.Ya.GX(f,c,p)},a.prototype.$p=function(c){return this.Ya.nk(c)},a}();(g=k||(k={}))[g.initialize=0]="initialize",g[g.pIn=1]="pIn",g[g.pL=2]="pL",g[g.pR=3]="pR",g[g.pT=4]="pT",g[g.right=5]="right",g[g.left=6]="left",g[g.all=7]="all";var r=function(){function a(){this.Ya=null,this.Qi=new h.Nc,this.hi=new h.ia(0),this.sg=[0,0]}return a.prototype.Xi=function(c,p){this.Qi.oa=c.oa-p,this.Qi.va=c.va+p,this.hi.resize(0),this.he=0,this.sg[0]=0},a.prototype.EB=function(c,p,f){if(c>p)throw h.i.N();this.Qi.oa=c-f,this.Qi.va=p+f,this.hi.resize(0),this.he=0,this.sg[0]=0},a.prototype.Uo=function(c,p){this.Qi.oa=c-p,this.Qi.va=c+p,this.hi.resize(0),this.he=0,this.sg[0]=0},a.prototype.next=function(){if(!this.Ya.lq)throw h.i.Hb();if(0>this.he)return-1;for(var c=!0;c;)switch(this.sg[this.he]){case 1:c=this.FU();break;case 2:c=this.GU();break;case 3:c=this.HU();break;case 4:c=this.IU();break;case 5:c=this.GW();break;case 6:c=this.kT();break;case 7:c=this.tN();break;case 0:c=this.Gz();break;default:throw h.i.Qa()}return this.Og!=-1?this.Mp()>>1:-1},a.construct=function(c){var p=new a;return p.Ya=c,p.hi.Jb(20),p.he=-1,p},a.prototype.Gz=function(){return this.Og=this.vH=this.Mi=this.Lc=-1,this.Ya.me!=null&&0<this.Ya.me.size?(this.sg[0]=1,this.Mi=this.Ya.kf,!0):(this.he=-1,!1)},a.prototype.FU=function(){if(this.Lc=this.Mi,this.Lc==-1)return this.Og=this.he=-1,!1;var c=this.Ya.Np(this.Lc);return this.Qi.va<c?(c=this.Ya.mk(this.Lc),this.Mi=this.Ya.qj(this.Lc),c!=-1&&(this.ei=this.Ya.kl(c),this.sg[++this.he]=6),!0):c<this.Qi.oa?(c=this.Ya.mk(this.Lc),this.Mi=this.Ya.lk(this.Lc),c!=-1&&(this.ei=this.Ya.Zr(c),this.sg[++this.he]=5),!0):(this.sg[this.he]=2,this.vH=this.Lc,c=this.Ya.mk(this.Lc),this.Mi=this.Ya.qj(this.Lc),c!=-1&&(this.ei=this.Ya.kl(c),this.sg[++this.he]=7),!0)},a.prototype.GU=function(){if(this.Lc=this.Mi,this.Lc==-1)return this.sg[this.he]=3,this.Mi=this.Ya.lk(this.vH),!0;if(this.Ya.Np(this.Lc)<this.Qi.oa){var c=this.Ya.mk(this.Lc);return this.Mi=this.Ya.lk(this.Lc),c!=-1&&(this.ei=this.Ya.Zr(c),this.sg[++this.he]=5),!0}return c=this.Ya.mk(this.Lc),this.Mi=this.Ya.qj(this.Lc),c!=-1&&(this.ei=this.Ya.kl(c),this.sg[++this.he]=7),(c=this.Ya.lk(this.Lc))!=-1&&this.hi.add(c),!0},a.prototype.HU=function(){if(this.Lc=this.Mi,this.Lc==-1)return this.sg[this.he]=4,!0;if(this.Qi.va<this.Ya.Np(this.Lc)){var c=this.Ya.mk(this.Lc);return this.Mi=this.Ya.qj(this.Lc),c!=-1&&(this.ei=this.Ya.kl(c),this.sg[++this.he]=6),!0}return c=this.Ya.mk(this.Lc),this.Mi=this.Ya.lk(this.Lc),c!=-1&&(this.ei=this.Ya.kl(c),this.sg[++this.he]=7),(c=this.Ya.qj(this.Lc))!=-1&&this.hi.add(c),!0},a.prototype.IU=function(){if(this.hi.size==0)return this.Og=this.he=-1,!1;this.Lc=this.hi.get(this.hi.size-1),this.hi.resize(this.hi.size-1);var c=this.Ya.mk(this.Lc);return c!=-1&&(this.ei=this.Ya.kl(c),this.sg[++this.he]=7),this.Ya.qj(this.Lc)!=-1&&this.hi.add(this.Ya.qj(this.Lc)),this.Ya.lk(this.Lc)!=-1&&this.hi.add(this.Ya.lk(this.Lc)),!0},a.prototype.kT=function(){return this.Og=this.ei,this.Og!=-1&&n.gq(this.Mp())&&this.Ya.nk(this.Mp())<=this.Qi.va?(this.ei=this.SF(),!1):(this.he--,!0)},a.prototype.GW=function(){return this.Og=this.ei,this.Og!=-1&&n.Gv(this.Mp())&&this.Ya.nk(this.Mp())>=this.Qi.oa?(this.ei=this.QR(),!1):(this.he--,!0)},a.prototype.tN=function(){return this.Og=this.ei,this.Og!=-1&&n.gq(this.Mp())?(this.ei=this.SF(),!1):(this.he--,!0)},a.prototype.SF=function(){return this.Ya.Sf?this.Ya.$f.lb(this.Og):this.Ya.Ti.lb(this.Og)},a.prototype.QR=function(){return this.Ya.Sf?this.Ya.$f.we(this.Og):this.Ya.Ti.we(this.Og)},a.prototype.Mp=function(){return this.Ya.Sf?this.Ya.$f.ja(this.Og):this.Ya.Ti.getData(this.Og)},a}();h.EY=r;var n=function(){function a(c){this.Am=this.$h=this.$f=this.Ti=this.Km=this.Ej=this.me=this.Fj=null,this.Sf=c,this.lq=this.Sv=!1}return a.prototype.kr=function(){this.Nk(!0)},a.prototype.Br=function(c,p){if(!this.Sv)throw h.i.Hb();this.Fj.push(new h.Nc(c,p))},a.prototype.Fp=function(){if(!this.Sv)throw h.i.fa("invalid call");this.Sv=!1,this.lq=!0,this.Sf||(this.vS(),this.Zv=this.Fj.length)},a.prototype.vj=function(c){if(!this.Sf||!this.lq)throw h.i.N("invalid call");if(this.kf==-1){var p=this.Fj.length;if(this.iA){var f=new h.ia(0);f.Jb(2*p),this.bJ(f),this.$h.Jb(2*p),this.$h.resize(0),this.aJ(f),this.Km.resize(p,-1),this.Km.Wj(-1,0,p),this.iA=!1}else this.Km.Wj(-1,0,p);this.kf=this.Tu()}p=this.pG(c<<1,this.kf),f=this.$f.addElement(1+(c<<1),this.xz(p)),this.VJ(p,f),this.Km.set(c,p),this.Zv++},a.prototype.remove=function(c){if(!this.Sf||!this.lq)throw h.i.fa("invalid call");var p=this.Km.get(c);if(p==-1)throw h.i.N("the interval does not exist in the interval tree");this.Km.set(c,-1),this.Zv--;var f=this.xz(p),m=this.$f.ZR(f);this.$f.vd(this.wR(p),f),this.$f.vd(this.TR(p),f),(c=this.$f.size(f))==0&&(this.$f.MP(f),this.ZJ(m,-1)),this.Ej.jd(p),f=this.UF(m);var b=this.qj(m),x=this.lk(m);for(p=0;!(0<c||m==this.kf||b!=-1&&x!=-1);)m==this.qj(f)?b!=-1?(this.Ok(f,b),this.Uj(b,f),this.Ok(m,-1)):x!=-1?(this.Ok(f,x),this.Uj(x,f),this.Qk(m,-1)):this.Ok(f,-1):b!=-1?(this.Qk(f,b),this.Uj(b,f),this.Ok(m,-1)):x!=-1?(this.Qk(f,x),this.Uj(x,f),this.Qk(m,-1)):this.Qk(f,-1),this.Uj(m,-1),p++,m=f,c=(f=this.mk(m))!=-1?this.$f.size(f):0,b=this.qj(m),x=this.lk(m),f=this.UF(m)},a.prototype.reset=function(){if(!this.Sf||!this.lq)throw h.i.N("invalid call");this.Nk(!1)},a.prototype.size=function(){return this.Zv},a.prototype.getIterator=function(){return r.construct(this)},a.prototype.bJ=function(c){for(var p=this.Fj.length,f=0;f<2*p;f++)c.add(f);this.HX(c,2*p)},a.prototype.aJ=function(c){for(var p=NaN,f=0;f<c.size;f++){var m=c.get(f),b=this.nk(m);b!=p&&(this.$h.add(m),p=b)}},a.prototype.vS=function(){var c=this.Fj.length,p=new h.ia(0);p.Jb(2*c),this.bJ(p),this.$h.Jb(2*c),this.$h.resize(0),this.aJ(p),this.Ej.De(c),this.Ti.fn(2*c);var f=h.Yc.Oh(c);for(f.Wj(-1,0,c),this.kf=this.Tu(),c=0;c<p.size;c++){var m=p.get(c),b=f.get(m>>1);b!=-1?this.VJ(b,this.Ti.addElement(this.xz(b),m)):(b=this.pG(m,this.kf),f.set(m>>1,b))}},a.prototype.pG=function(c,p){var f=p,m=p,b=-1,x=0,T=this.$h.size-1,I=0,A=c>>1,P=NaN,j=NaN,D=!0,F=this.DR(A);for(A=this.AR(A);D;){x<T?(I=x+h.O.truncate((T-x)/2),this.gz(f)==-1&&this.FJ(f,this.$h.get(I),this.$h.get(I+1))):this.gz(f)==-1&&this.FJ(f,this.$h.get(x),this.$h.get(x));var N=this.Np(f);if(A<N)p!=-1&&(p==f?(m=f,P=N,j=(p=this.qj(f))!=-1?this.Np(p):NaN):j>N&&(N<P?this.Ok(m,f):this.Qk(m,f),this.Qk(f,p),this.Sf&&(this.Uj(f,m),this.Uj(p,f)),m=f,P=N,p=-1,j=NaN)),(T=this.xR(f))==-1&&(T=this.Tu(),this.dX(f,T)),f=T,T=I;else if(F>N)p!=-1&&(p==f?(m=f,P=N,j=(p=this.lk(f))!=-1?this.Np(p):NaN):j<N&&(N<P?this.Ok(m,f):this.Qk(m,f),this.Ok(f,p),this.Sf&&(this.Uj(f,m),this.Uj(p,f)),m=f,P=N,p=-1,j=NaN)),(x=this.UR(f))==-1&&(x=this.Tu(),this.oX(f,x)),f=x,x=I+1;else{(D=this.mk(f))==-1&&(D=this.zP(f),this.ZJ(f,D));var z=this.fN(D,c);b=this.xP(),this.qX(b,D),this.cX(b,z),f!=p&&(N<P?this.Ok(m,f):this.Qk(m,f),this.Sf&&this.Uj(f,m),p!=-1&&(j<N?this.Ok(f,p):this.Qk(f,p),this.Sf&&this.Uj(p,f))),D=!1}}return b},a.prototype.Tu=function(){return this.me.Ce()},a.prototype.zP=function(c){return this.Sf?this.$f.Pr(c):this.Ti.Ph(c)},a.prototype.xP=function(){return this.Ej.Ce()},a.prototype.Nk=function(c){c?(this.Sv=this.iA=!0,this.lq=!1,this.$h==null?this.$h=h.Yc.Oh(0):this.$h.resize(0),this.Fj==null?this.Fj=[]:this.Fj.length=0):this.iA=!1,this.Sf?this.Km==null?(this.Km=h.Yc.Oh(0),this.$f=new h.Yj,this.$f.Vo(new l(this))):this.$f.clear():this.Ti==null?this.Ti=new h.jp:this.Ti.clear(),this.me==null?(this.Ej=new h.$c(3),this.me=new h.$c(this.Sf?8:7)):(this.Ej.mj(!1),this.me.mj(!1)),this.kf=-1,this.Zv=0},a.prototype.FJ=function(c,p,f){this.XW(c,p),this.YW(c,f)},a.prototype.Np=function(c){var p=this.gz(c);return p==-1?NaN:(p=this.nk(p))==(c=this.nk(this.gR(c)))?p:.5*(p+c)},a.prototype.XW=function(c,p){this.me.S(c,0,p)},a.prototype.YW=function(c,p){this.me.S(c,1,p)},a.prototype.dX=function(c,p){this.me.S(c,3,p)},a.prototype.oX=function(c,p){this.me.S(c,4,p)},a.prototype.ZJ=function(c,p){this.me.S(c,2,p)},a.prototype.Ok=function(c,p){this.me.S(c,5,p)},a.prototype.Qk=function(c,p){this.me.S(c,6,p)},a.prototype.Uj=function(c,p){this.me.S(c,7,p)},a.prototype.qX=function(c,p){this.Ej.S(c,0,p)},a.prototype.fN=function(c,p){return this.Sf?this.$f.addElement(p,c):this.Ti.addElement(c,p)},a.prototype.cX=function(c,p){this.Ej.S(c,1,p)},a.prototype.VJ=function(c,p){this.Ej.S(c,2,p)},a.prototype.kl=function(c){return this.Sf?this.$f.rc(c):this.Ti.rc(c)},a.prototype.Zr=function(c){return this.Sf?this.$f.Fc(c):this.Ti.Fc(c)},a.gq=function(c){return(1&c)==0},a.Gv=function(c){return(1&c)==1},a.prototype.gz=function(c){return this.me.T(c,0)},a.prototype.gR=function(c){return this.me.T(c,1)},a.prototype.mk=function(c){return this.me.T(c,2)},a.prototype.xR=function(c){return this.me.T(c,3)},a.prototype.UR=function(c){return this.me.T(c,4)},a.prototype.qj=function(c){return this.me.T(c,5)},a.prototype.lk=function(c){return this.me.T(c,6)},a.prototype.UF=function(c){return this.me.T(c,7)},a.prototype.xz=function(c){return this.Ej.T(c,0)},a.prototype.wR=function(c){return this.Ej.T(c,1)},a.prototype.TR=function(c){return this.Ej.T(c,2)},a.prototype.DR=function(c){return this.Fj[c].oa},a.prototype.AR=function(c){return this.Fj[c].va},a.prototype.HX=function(c,p){this.Am==null&&(this.Am=new h.Xt);var f=new o(this);this.Am.sort(c,0,p,f)},a.prototype.GX=function(c,p,f){var m=this;c.Vd(p,f,function(b,x){var T=m.nk(b),I=m.nk(x);return T<I||T==I&&a.gq(b)&&a.Gv(x)?-1:1})},a.prototype.nk=function(c){var p=this.Fj[c>>1];return a.gq(c)?p.oa:p.va},a}();h.sr=n}(q||(q={})),function(h){var k=function(){function g(l){if(l==null)throw h.i.fa("Invalid arguement");this.hf=l;var o=l.nR();o.hS()?l.ef.IG()?this.lo=h.si.PannableFold:this.lo=h.si.Clip:this.lo=h.si.DontClip,o.iS()?l.Yf.IG()?this.Qm=h.si.PannableFold:this.Qm=h.si.Clip:this.Qm=h.si.DontClip,this.Bm=o.Jr,this.mH=o.Vu,l=this.hf.sH,this.aH=l.hs(2147483648),this.Uv=l.hs(1073741824)}return g.zh=function(l,o,r){return o.ww.zh(l,r)},g.Rt=function(l,o,r,n){return l.ww.Rt(o,r,n)},g.Qt=function(l,o,r,n){if(r=0>r?o.length:r,(l=l.ww.Rt(o,r,n))==r)return l;for(var a=o=0;a<r;a++){var c=n[a];c.isNaN()||(o<a&&n[o].L(c),o++)}for(;o<r;o++)n[o].Rc();return l},g.transform=function(l,o,r,n,a){if(l.isIdentity())return h.ta.kP(n,o,r),r;for(var c=[],p=0,f=0;f<r;){for(var m=Math.min(c.length,r-f),b=f,x=0;b<m;b++,x++)c[x]==null?c[x]=o[b].D():o[b].D(c[x]);var T=a?g.Qt(l,c,m,c):g.Rt(l,c,m,c);for(x=b=0;b<T;b++,x++)n[f]==null&&(n[f]=new h.Sa(o[f])),n[f].Cb(c[x]);f+=m,p+=T}return p},g.prototype.Rt=function(l,o,r){if(this.hf.isIdentity())return l!=r&&h.ta.Ru(r,l,o),o;var n=this.hf.ef,a=this.hf.Yf,c=n.Sb(),p=a.Sb();if(c==0&&c===p){var f=n.Qp();return a=f/(a=a.Qp()),(f=new h.Dd).setScale(a,a),f.eY(l,o,r),o}if(f=h.O.Fu(Math.min(o,64)),c==3){var m=n.Ji;c=(n=m.fk()).Sb(),r!=l&&h.ta.Ru(r,l,o),h.zb.$k(m,r,o,!0),m.Qt(h.bm.forward,r,o),h.zb.Zk(m,r,o,!0)}if(c==3||p===3)throw h.i.fa("image: transform_in_place_");if(c==2)this.lo==h.si.Clip?(r!=l&&h.ta.Ru(r,l,o),l=n.ml(),h.zb.OS(l,n,r,o)):(r!=l&&h.ta.Ru(r,l,o),n.Wc()&&(c=n.Xd(0),m=n.Oe(),h.zb.EX(r,o,m,c),h.zb.qF(r,o,n,0))),h.zb.IL(n,r,o,f);else for(c=n.Xd(0),m=n.Oe(),n=0;n<o;n++)h.zb.FX(l[n],m,c,r[n]);for(h.zb.GL(this.hf,r,o,f),l=0,(p=p==2)?l=a.zi():isNaN(this.Bm)||(l=this.Bm),p&&this.Qm!=h.si.Clip||h.zb.qF(r,o,a.sc(),l),p&&(h.zb.yG(r,o,a,this.Qm),h.zb.HL(a,r,o,f)),l=o,n=0;n<o;++n)r[n].isNaN()&&l--;return l},g.prototype.zh=function(l,o){if(this.hf.isIdentity()||l.B())return l;if(l.getType()==33)return this.XI(l);var r=this.hf.ef,n=this.hf.Yf,a=r.Sb(),c=n.Sb();if(a==0&&a==c)return o=r.Qp(),o/=n=n.Qp(),(n=new h.Dd).setScale(o,o),(l=h.aa.jg(l)).Oc(n),l;switch(l.getType()){case 1607:case 1736:l=this.VI(l,o);break;case 550:l=this.fW(l,o);break;case 197:l=this.eW(l,o);break;default:throw h.i.fa("")}return l},g.prototype.XI=function(l){var o=l.D(),r=[];return r[0]=o,this.Rt(r,1,r),(l=new h.Sa(l)).Cb(r[0]),l},g.prototype.VI=function(l,o){if(l.tm())throw h.i.fa("curves not supported");var r=l.getType();if(r==1736)return this.gW(l,o);if(r==1607)return this.hW(l,o);throw h.i.fa("projectMultiPath")},g.prototype.gW=function(l,o){var r=this.hf.ef,n=this.hf.Yf,a=r.Sb(),c=n.Sb(),p=h.O.Fu(Math.min(l.I(),64)),f=h.Da.jg(l);a==3&&(a=(r=(l=r.Ji).fk()).Sb(),f=l.$k(f,!0),this.wp(l,h.bm.forward,f),f=l.Zk(f,!0)),l=null,c==3&&(c=(n=(l=n.Ji).fk()).Sb());var m=a==2,b=c==2,x=b?n.sc():n,T=!b&&!this.Uv;c=!1;var I=f;if(m){if((I=h.zb.UI(I,r,this.lo,o)).B())return I}else{if(f=new h.l,I.xc(f),a=r.Oe(),f.G<a.G||f.H>a.H){var A=h.l.construct(f.v-1,a.G,f.C+1,a.H);if((I=h.ri.Nu(I,A,r,NaN,0,o)).B())return I}f.R()>2*a.R()&&(I=h.zb.Hp(I,-2*a.R(),2*a.R(),r,!0,0,!0,o))}f=this.mH,(a=!isNaN(f))&&(I=h.Xl.local().V(I,f,o)),A=b?n.kk():null;var P=NaN;m&&(P=r.zi());var j=n.Wr()!=null;if(this.aH)m&&(h.zb.ur(r,P,I,p),a&&(m=r.hh(),f*=(P=r.sc().hh())/m)),h.zb.tr(this.hf,I,T,p),a&&(m=r.sc().hh(),f*=(P=n.sc().hh())/m),r=I;else{var D=new h.Ta(I.description);D.DD(I),m&&(h.zb.ur(r,P,D,p),a&&(m=r.hh(),f*=(P=r.sc().hh())/m)),h.zb.tr(this.hf,D,T,p),a&&(m=r.sc().pm(),f*=(P=n.sc().pm())/m),T=NaN,b?(A=n.kk(),T=n.zi()):isNaN(this.Bm)||(T=this.Bm),m=g.tv(r)|g.tv(n),P=10*x.Xd(0),this.Uv&&(m=3,P=0),r=h.zb.UQ(I,r,D,x,T,o,m,P)}return j&&(r=h.zb.XD(r,n,o)),b&&(c||(b=x.Oe().R(),r.Tg(0,0).R()>=b-x.Xd(0)&&(x=A.getNorthPoleLocation(),b=A.getSouthPoleLocation(),I=A.getNorthPoleGeometry(),A=A.getSouthPoleGeometry(),T=0,I==h.Cg.PE_POLE_POINT&&x!=h.Cg.PE_POLE_OUTSIDE_BOUNDARY&&(T=1),A==h.Cg.PE_POLE_POINT&&b!=h.Cg.PE_POLE_OUTSIDE_BOUNDARY&&(T|=2),T!==0&&(c=!0))),r=h.zb.Mz(r,n,this.Qm,o),a&&(r=h.Xl.local().V(r,f,o)),h.zb.Lx(n,r,p)),r.B()||(c&&(r=h.Yl.local().V(r,n,!1,o)),l!=null&&(r=l.Zk(r,!1),this.wp(l,h.bm.reverse,r),r=l.$k(r,!1))),r},g.tv=function(l){if(l.Sb()!=2)return 0;var o=0,r=l.kk();l=r.getNorthPoleLocation();var n=r.getSouthPoleLocation(),a=r.getNorthPoleGeometry();return r=r.getSouthPoleGeometry(),a==h.Cg.PE_POLE_POINT&&l!=h.Cg.PE_POLE_OUTSIDE_BOUNDARY&&(o=1),r==h.Cg.PE_POLE_POINT&&n!=h.Cg.PE_POLE_OUTSIDE_BOUNDARY&&(o|=2),o},g.prototype.hW=function(l,o){var r=this.hf.ef,n=this.hf.Yf,a=r.Sb(),c=n.Sb(),p=h.O.Fu(Math.min(l.I(),64)),f=h.Ta.jg(l);a==3&&(a=(r=(l=r.Ji).fk()).Sb(),f=l.$k(f,!0),this.wp(l,h.bm.forward,f),f=l.Zk(f,!0)),l=null,c==3&&(c=(n=(l=n.Ji).fk()).Sb());var m=a==2;a=(c=c==2)?n.sc():n;var b=!c&&!this.Uv;if(m){if((f=h.zb.UI(f,r,this.lo,o)).B())return f}else{var x=new h.l;f.xc(x);var T=r.Oe();if((x.G<T.G||x.H>T.H)&&(x=h.l.construct(x.v-1,T.G,x.C+1,T.H),(f=h.ri.Nu(f,x,r,NaN,0,o)).B()))return f}var I=NaN;m&&(I=r.zi()),x=n.Wr()!=null,T=this.mH;var A=!isNaN(T);if(A&&(f=h.Xl.local().V(f,T,o)),this.aH)m&&h.zb.ur(r,I,f,p),A&&(m=r.hh(),T*=(I=r.sc().hh())/m),h.zb.tr(this.hf,f,b,p),A&&(m=r.sc().hh(),T*=(I=n.sc().hh())/m),r=f;else{var P=new h.Ta(f.description);P.DD(f),m&&(h.zb.ur(r,I,P,p),A&&(m=r.hh(),T*=(I=r.sc().hh())/m)),h.zb.tr(this.hf,P,b,p),A&&(m=r.sc().hh(),T*=(I=n.sc().hh())/m),b=NaN,c?b=n.zi():isNaN(this.Bm)||(b=this.Bm),m=g.tv(r)|g.tv(n),I=10*a.Xd(0),this.Uv&&(m=3,I=0),r=h.zb.VQ(f,r,P,a,b,o,m,I)}return x&&(r=h.zb.XD(r,n,o)),c&&(r=h.zb.Mz(r,n,this.Qm,o),A&&(r=h.Xl.local().V(r,T,o)),h.zb.Lx(n,r,p)),r.B()||l!=null&&(r=l.Zk(r,!1),this.wp(l,h.bm.reverse,r),r=l.$k(r,!1)),r},g.prototype.eW=function(l,o){var r=(l.ca()+l.R())/400;return r!=0?(r=h.Xl.local().V(l,r,o),r=this.VI(r,o),o=l.Ia(),r.bn(o)):(o=new h.Sa(l.Ip()),r=this.XI(o),o=l.Ia(),r.B()?o.Oa():(l.copyTo(o),l=r.D(),o.K(l.x,l.y,l.x,l.y))),o},g.prototype.fW=function(l,o){l=h.aa.jg(l);var r=this.hf.ef,n=this.hf.Yf,a=r.Sb(),c=n.Sb(),p=h.O.Fu(Math.min(l.I(),64));if(a==3){var f=r.Ji;a=(r=f.fk()).Sb(),l=f.Zk(l,!0),this.wp(f,h.bm.forward,l),l=f.$k(l,!0)}if(a==2){if(this.lo==h.si.Clip?l=h.Xj.local().V(l,r.ml(),r,o):r.Wc()&&(a=new h.l,l.xc(a),r.Oe().contains(a)||(this.lo==h.si.PannableFold&&(l=h.zb.lj(l,r)),h.zb.Jt(l,r.Oe(),r.Xd(0),!0),l=h.zb.Fn(l,r,0,!0,0,o))),l.B())return l;h.zb.ur(r,0,l,p)}else h.zb.Jt(l,r.Oe(),r.Xd(0),!0);return h.zb.tr(this.hf,l,!1,p),r=0,a=!1,f=null,c==3&&(a=!0,c=(n=(f=n.Ji).fk()).Sb()),(c=c==2)?r=n.zi():isNaN(this.Bm)||(r=this.Bm),c&&this.Qm!=h.si.Clip||(l=h.zb.Fn(l,n.sc(),r,!1,0,o)),c&&(l=h.zb.Mz(l,n,this.Qm,o),h.zb.Lx(n,l,p),l.B())||a&&(l=f.Zk(l,!0),this.wp(f,h.bm.reverse,l),l=f.$k(l,!0)),l},g.prototype.wp=function(l,o,r){var n=r.I();if(n!=0){for(var a=r.ub(0),c=h.O.lg(200,0),p=[],f=0;f<n;){var m=Math.min(100,n-f);a.Vw(2*f,2*m,c,2,!0);for(var b=0;b<m;++b)p[b]=h.h.construct(c[2*f],c[2*f+1]);l.Qt(o,p,m),f+=m}r.Pc(1993)}},g.Uy=function(l,o,r){if(l==null||o==null||!o.Wc())throw h.i.fa("Invalid Arguement");if(l.B())return l;var n=l.getType();return n==197?(n=new h.Da(l.description)).ad(l,!1):h.aa.yd(n)?(n=new h.Ta(l.description)).oc(l,!0):n=l,(n=h.zb.lj(n,o)).B()?n:h.zb.Fn(n,o,0,n!=l,0,r)},g.nj=function(l,o,r,n){if(l==null||o==null||!o.Wc())throw h.i.fa("Invalid Arguement");if(l.B())return l;var a=l.getType();if(h.aa.Hc(a)){l=h.zb.lj(l,o),a=new h.l,l.A(a);for(var c=h.ta.ty(o,a,!1),p=o.gh(),f=Math.floor((a.v-p.v)/p.R())*p.R()+p.v;f<a.C;)f>a.v+c&&f<a.C-c&&(l=h.zb.uS(l,o,r,f)),f+=p.R()}else{if(a==197)return(a=new h.Da(l.description)).ad(l,!1),g.nj(a,o,r,n);if(h.aa.yd(a))return(a=new h.Ta(l.description)).oc(l,!0),g.nj(a,o,r,n)}return g.Uy(l,o,n)},g}();h.bu=k}(q||(q={})),function(h){var k=function(g){function l(o,r,n,a){var c=g.call(this)||this;return o===void 0?c.description=h.ee.og():n===void 0?c.description=o:(c.description=h.ee.og(),c.ZB(o,r),c.Ql(n,a)),c}return nt(l,g),l.prototype.getType=function(){return 322},l.prototype.Qb=function(){var o=this.sa-this.pa,r=this.na-this.la;return Math.sqrt(o*o+r*r)},l.prototype.Bi=function(o){var r=this.sa-this.pa,n=this.na-this.la;return Math.sqrt(r*r+n*n)<=o},l.prototype.Pn=function(){return!1},l.prototype.kg=function(){var o=new h.h;return o.uc(this.wc(),this.ac()),o},l.cP=function(o,r){return new l(o.x,o.y,r.x,r.y)},l.prototype.bn=function(o){o.Oa(),o.Nf(this.description);var r=new h.l;this.A(r),o.Xo(r),r=1;for(var n=this.description.Aa;r<n;r++)for(var a=this.description.kd(r),c=h.ra.Va(a);r<c;r++){var p=this.Tg(a,0);o.setInterval(a,0,p)}},l.prototype.A=function(o){o.K(this.sa,this.na,this.pa,this.la),o.normalize()},l.prototype.Qo=function(o){o.Oa(),o.Zb(this.sa,this.na,this.Od(0,1,0)),o.Zb(this.pa,this.la,this.Od(1,1,0))},l.prototype.Oc=function(o){if(o instanceof h.Dd){this.vc();var r=new h.h;r.x=this.sa,r.y=this.na,o.Eh(r,r),this.sa=r.x,this.na=r.y,r.x=this.pa,r.y=this.la,o.Eh(r,r),this.pa=r.x,this.la=r.y}else this.vc(),(r=new h.Nd).x=this.sa,r.y=this.na,r.z=this.Od(0,1,0),r=o.fp(r),this.sa=r.x,this.na=r.y,this.tn(0,1,0,r.z),r.x=this.pa,r.y=this.la,r.z=this.Od(1,1,0),r=o.fp(r),this.pa=r.x,this.la=r.y,this.tn(1,1,0,r.z)},l.prototype.Ia=function(){return new l(this.description)},l.prototype.Tx=function(o,r){return(this.pa-o-(this.sa-o))*(this.la-r+(this.na-r))*.5},l.prototype.vx=function(o){return o*this.Qb()},l.prototype.NG=function(o){return o/this.Qb()},l.prototype.DF=function(o){return h.lc.hq(this.sa,this.pa,o)},l.prototype.fR=function(o){return h.lc.hq(this.na,this.la,o)},l.prototype.dl=function(o,r){var n=new h.ig;return this.ah(o,r,n),n.get()},l.prototype.ah=function(o,r,n){if(n==null)throw h.i.N();n.Or(),(n=n.get()).Nf(this.description);var a=new h.h;this.hc(o,a),n.ZB(a.x,a.y),this.hc(r,a),n.Ql(a.x,a.y),a=1;for(var c=this.description.Aa;a<c;a++)for(var p=this.description.Ed(a),f=h.ra.Va(p),m=0;m<f;m++){var b=this.Uc(o,p,m);n.YB(p,m,b),b=this.Uc(r,p,m),n.OB(p,m,b)}},l.prototype.Uc=function(o,r,n){if(r==0)return n==0?this.hc(o).x:this.hc(o).y;switch(h.ra.lz(r)){case 0:return .5>o?this.wv(r,n):this.gv(r,n);case 1:var a=this.wv(r,n);return r=this.gv(r,n),h.lc.hq(a,r,o);case 2:throw h.i.fa("not implemented")}throw h.i.Qa()},l.prototype.fe=function(o,r){var n=this.pa-this.sa,a=this.la-this.na,c=n*n+a*a;return c==0?.5:(o=((o.x-this.sa)*n+(o.y-this.na)*a)/c,r||(0>o?o=0:1<o&&(o=1)),o)},l.prototype.cq=function(o,r,n,a){if(o){if((o=this.la-this.na)==0)return r==this.la?-1:0;if(0>(r=(r-this.na)/o)||1<r)return 0;n!=null&&(n[0]=this.DF(r))}else{if((o=this.pa-this.sa)==0)return r==this.pa?-1:0;if(0>(r=(r-this.sa)/o)||1<r)return 0;n!=null&&(n[0]=this.fR(r))}return a!=null&&(a[0]=r),1},l.prototype.Pe=function(o,r){var n=this.la-this.na;return n==0?o==this.la?r:NaN:(o=(o-this.na)/n,r=this.DF(o),o==1&&(r=this.pa),r)},l.prototype.ru=function(o,r,n){return 0<=this.rp(o.x,o.y,r,n)},l.prototype.vi=function(o,r,n){return 0<=this.rp(o,r,n,!0)},l.prototype.qs=function(o,r){return this.ru(o,r,!1)},l.prototype.rI=function(){if(this.la<this.na||this.la==this.na&&this.pa<this.sa){var o=this.sa;this.sa=this.pa,this.pa=o,o=this.na,this.na=this.la,this.la=o,o=0;for(var r=this.description.Oq-2;o<r;o++){var n=this.ka[o];this.ka[o]=this.ka[o+r],this.ka[o+r]=n}}},l.prototype.uu=function(o,r){(r=h.h.construct(o,r)).sub(this.ac());var n=new h.h;return n.uc(this.wc(),this.ac()),(o=n.wi(r))>(r=8881784197001252e-31*(Math.abs(n.x*r.y)+Math.abs(n.y*r.x)))?-1:o<-r?1:0},l.prototype.rp=function(o,r,n,a){var c=this.sa,p=this.na,f=o-c,m=r-p;if((f=Math.sqrt(f*f+m*m))<=Math.max(n,6661338147750939e-31*f))return a&&f==0?NaN:0;if(f=o-this.pa,m=r-this.la,(f=Math.sqrt(f*f+m*m))<=Math.max(n,6661338147750939e-31*f))return a&&f==0?NaN:1;if(f=this.pa-this.sa,m=this.la-this.na,0<(a=Math.sqrt(f*f+m*m))){var b=1/a,x=o-c,T=r-p,I=x*(f*=b)+T*(m*=b),A=17763568394002505e-31*(Math.abs(x*f)+Math.abs(T*m)),P=f;if(f=-m,m=P,I<-(A=Math.max(n,A))||I>a+A)return NaN;if(Math.abs(x*f+T*m)<=Math.max(n,17763568394002505e-31*(Math.abs(x*f)+Math.abs(T*m)))&&(.5>=(f=h.O.Rk(I*b,0,1))?(m=this.sa+(this.pa-this.sa)*f,a=this.na+(this.la-this.na)*f):(m=this.pa-(this.pa-this.sa)*(1-f),a=this.la-(this.la-this.na)*(1-f)),h.h.Oy(m,a,o,r)<=n)){if(.5>f){if(h.h.Oy(m,a,c,p)<=n)return 0}else if(h.h.Oy(m,a,this.pa,this.la)<=n)return 1;return f}}return NaN},l.prototype.Nb=function(o){return o!=null&&(o==this||o.constructor===this.constructor&&this.FM(o))},l.prototype.rD=function(o,r,n){var a=n?this.sa:this.pa;n=n?this.na:this.la;var c=new h.h;return c.x=o.pa-a,c.y=o.la-n,!(r.Qh(c)>6661338147750939e-31*r.fD(c))||(c.x=o.sa-a,c.y=o.na-n,r.Qh(c)<=6661338147750939e-31*r.fD(c))},l.prototype.qD=function(o){var r=new h.h;return r.x=this.pa-this.sa,r.y=this.la-this.na,!!this.rD(o,r,!1)&&(r.Sq(),!!this.rD(o,r,!0))},l.NM=function(o,r){var n=o.uu(r.sa,r.na),a=o.uu(r.pa,r.la);return!(0>n&&0>a||0<n&&0<a)&&(n=r.uu(o.sa,o.na),a=r.uu(o.pa,o.la),!(0>n&&0>a||0<n&&0<a)&&((n=o.Qb())>(a=r.Qb())?o.qD(r):r.qD(o)))},l.LM=function(o,r,n){var a=h.h.construct(NaN,NaN),c=o.pa-o.sa,p=o.la-o.na,f=r.pa-r.sa,m=r.la-r.na,b=f*p-c*m;if(b==0)return a;var x=8881784197001252e-31*(Math.abs(f*p)+Math.abs(c*m)),T=r.sa-o.sa,I=r.na-o.na,A=f*I-T*m,P=A/b,j=Math.abs(b);return P<-(f=(8881784197001252e-31*(Math.abs(f*I)+Math.abs(T*m))*j+x*Math.abs(A))/(b*b)+2220446049250313e-31*Math.abs(P))||P>1+f||(f=(m=c*I-T*p)/b)<-(c=(8881784197001252e-31*(Math.abs(c*I)+Math.abs(T*p))*j+x*Math.abs(m))/(b*b)+2220446049250313e-31*Math.abs(f))||f>1+c||(P=h.O.Rk(P,0,1),c=h.O.Rk(f,0,1),p=o.hc(P),b=r.hc(c),(x=new h.h).uc(p,b),x.length()>n&&(x.add(p,b),x.scale(.5),P=o.fe(x,!1),c=r.fe(x,!1),o=o.hc(P),r=r.hc(c),o.sub(r),o.length()>n)||a.ma(P,c)),a},l.OM=function(o,r,n,a){var c=0;if((o.sa==r.sa&&o.na==r.na||o.sa==r.pa&&o.na==r.la)&&(c++,!a))return 1;if(o.pa==r.sa&&o.la==r.na||o.pa==r.pa&&o.la==r.la){if(++c==2)return 2;if(!a)return 1}return r.vi(o.sa,o.na,n)||r.vi(o.pa,o.la,n)||o.vi(r.sa,r.na,n)||o.vi(r.pa,r.la,n)?1:a&&c!=0||l.NM(o,r)==0?0:1},l.Zx=function(o,r,n,a,c,p){var f=0,m=o.rp(r.sa,r.na,p,!1),b=o.rp(r.pa,r.la,p,!1),x=r.rp(o.sa,o.na,p,!1),T=r.rp(o.pa,o.la,p,!1);return isNaN(m)||(a!=null&&(a[f]=m),c!=null&&(c[f]=0),n!=null&&(n[f]=h.h.construct(r.sa,r.na)),f++),isNaN(b)||(a!=null&&(a[f]=b),c!=null&&(c[f]=1),n!=null&&(n[f]=h.h.construct(r.pa,r.la)),f++),f==2||isNaN(x)||m==0&&x==0||b==0&&x==1||(a!=null&&(a[f]=0),c!=null&&(c[f]=x),n!=null&&(n[f]=h.h.construct(o.sa,o.na)),f++),f==2||isNaN(T)||m==1&&T==0||b==1&&T==1||(a!=null&&(a[f]=1),c!=null&&(c[f]=T),n!=null&&(n[f]=h.h.construct(r.pa,r.la)),f++),0<f?(f==2&&a!=null&&a[0]>a[1]&&(o=a[0],a[0]=a[1],a[1]=o,c!=null&&(a=c[0],c[0]=c[1],c[1]=a),n!=null&&(c=h.h.construct(n[0].x,n[0].y),n[0]=n[1],n[1]=c)),f):(f=l.LM(o,r,p),isNaN(f.x)?0:(n!=null&&(n[0]=o.hc(f.x)),a!=null&&(a[0]=f.x),c!=null&&(c[0]=f.y),1))},l.prototype.eG=function(){return 0},l.prototype.op=function(){},l.prototype.toString=function(){return"Line: ["+this.sa.toString()+", "+this.na.toString()+", "+this.pa.toString()+", "+this.la.toString()+"]"},l}(h.SC);h.yb=k}(q||(q={})),function(h){var k=function(){function g(){this.Jm=[],this.ya=-1}return g.prototype.La=function(){return this.ya},g.prototype.next=function(){if(this.Jm!=null&&this.Jm.length!=0){this.ya++;var l=this.Jm[0];return this.Jm=1>=this.Jm.length?[]:this.Jm.slice(1),l}return this.Jm=null},g.prototype.ZX=function(l){this.Jm.push(l)},g.prototype.qe=function(){},g}();h.gL=k}(q||(q={})),function(h){var k;(k=h.SL||(h.SL={}))[k.enumFillRuleOddEven=0]="enumFillRuleOddEven",k[k.enumFillRuleWinding=1]="enumFillRuleWinding";var g=function(l){function o(r,n){var a=l.call(this)||this;if(a.xf=!1,a.Eq=null,a.sq=0,a.rq=0,a.Aj=null,a.Mg=!1,a.nb=null,a.mb=null,a.Ve=null,a.Lj=null,a.Sd=null,a.tq=0,a.gb=0,a.xq=0,n===void 0)a.xf=r,a.Mg=!1,a.tq=0,a.sq=0,a.rq=0,a.wa=0,a.description=h.ee.og();else{if(n==null)throw h.i.N();a.xf=r,a.Mg=!1,a.tq=0,a.sq=0,a.rq=0,a.wa=0,a.description=n}return a.Aj=null,a.gb=0,a}return nt(o,l),o.prototype.tm=function(){return 0<this.tq},o.prototype.Yx=function(){this.vc(),this.Eq==null?this.Eq=new h.Sa(this.description):this.Eq.Nf(this.description)},o.prototype.sx=function(r,n){var a=new h.h;a.x=r,a.y=n,this.Lt(a)},o.prototype.Lt=function(r){this.Yx(),this.Eq.Cb(r),this.Mg=!0},o.prototype.nf=function(r){if(r.B())throw h.i.N();this.Jl(r.description),this.Yx(),r.copyTo(this.Eq),this.Mg=!0},o.prototype.Sx=function(){var r=1;this.Mg&&(this.Yx(),this.nb==null?(this.nb=h.Yc.Oh(2),this.nb.write(0,0),this.mb=h.Yc.Mr(2,0)):(this.nb.resize(this.nb.size+1,0),this.mb.resize(this.mb.size+1,0)),this.xf&&this.mb.write(this.mb.size-2,1),r++);var n=this.wa;this.nb.write(this.nb.size-1,this.wa+r),this.dm(n+r),this.mb.write(this.nb.size-1,0),this.Mg&&(this.Ht(n,this.Eq),this.Mg=!1)},o.prototype.yj=function(r,n){this.Sx(),this.Cb(this.wa-1,r,n)},o.prototype.Ci=function(r){this.Sx(),this.Cb(this.wa-1,r)},o.prototype.lineTo=function(r){this.Sx(),this.Ht(this.wa-1,r)},o.prototype.CU=function(r){if(this.vc(),this.xf)throw h.i.Qa();var n=this.da();if(r>n)throw h.i.Qa();if(this.dc(r)){if(this.mb==null)throw h.i.Qa();var a=this.wa,c=this.Ba(r),p=this.Vc(r);this.dm(this.wa+1),this.mc();for(var f=0,m=this.description.Aa;f<m;f++)if(this.za[f]!=null){var b=h.ra.Va(this.description.Ed(f));this.za[f].Mn(b*p,this.za[f],b*c,b,!0,1,b*a)}for(;n>r;n--)a=this.nb.read(n),this.nb.write(n,a+1);this.mb.KE(r,1)}},o.prototype.Ap=function(){if(this.wx(),r===void 0){this.Mg=!1;var r=this.da()-1}var n=this.mb.read(r);this.mb.write(r,1|n),this.Ve!=null&&(r=this.Vc(r)-1,this.Ve.write(r,1),this.Lj.write(r,-1))},o.prototype.dc=function(r){return(1&this.mb.read(r))!=0},o.prototype.Nn=function(r){if(this.dc(r))return!0;var n=this.Ba(r);return!(n>(r=this.Vc(r)-1))&&(n=this.Na(n),r=this.Na(r),n.qb(r))},o.prototype.yv=function(r){return(2&this.mb.read(r))!=0},o.prototype.oc=function(r,n){if(this.Jl(r.description),r.getType()!=322)throw h.i.Qa();var a=new h.Sa;(n||this.B())&&(r.To(a),this.nf(a)),r.Po(a),this.lineTo(a)},o.prototype.tp=function(r){var n=this.wa==0;this.sx(r.v,r.G),this.yj(r.v,r.H),this.yj(r.C,r.H),this.yj(r.C,r.G),this.Ap(),this.Mg=!1,n&&this.Lf(256,!1)},o.prototype.ad=function(r,n){if(!r.B()){for(var a=this.wa==0,c=new h.Sa(this.description),p=0;4>p;p++)r.Hf(n?4-p-1:p,c),p==0?this.nf(c):this.lineTo(c);this.Ap(),this.Mg=!1,a&&!n&&this.Lf(256,!1)}},o.prototype.add=function(r,n){for(var a=0;a<r.da();a++)this.addPath(r,a,!n)},o.prototype.addPath=function(r,n,a){this.vf(-1,r,n,a)},o.prototype.Yk=function(r,n){this.Hz(r,n)},o.prototype.Dr=function(r,n,a,c,p){if(p||this.da()!=0||(p=!0),0>n&&(n=r.da()-1),n>=r.da()||0>a||0>c||c>r.rv(n))throw h.i.fa("index out of bounds");if(c!=0){var f=r.dc(n)&&a+c==r.rv(n);if(!f||c!=1){if(this.Mg=!1,this.Jl(r.description),a=r.Ba(n)+a+1,p&&(c++,a--),f&&c--,f=this.wa,this.dm(this.wa+c),this.mc(),p){if(c==0)return;this.nb.add(this.wa),p=r.mb.read(n),p&=-5,this.xf&&(p|=1),this.mb.write(this.mb.size-1,p),this.mb.add(0)}else this.nb.write(this.mb.size-1,this.wa);p=0;for(var m=this.description.Aa;p<m;p++){var b=this.description.kd(p),x=h.ra.Va(b),T=r.description.Pf(b);0>T||r.za[T]==null?this.za[p].Ln(x*f,h.ra.se(b),c*x,x*f):this.za[p].Mn(x*f,r.za[T],x*a,c*x,!0,x,x*f)}if(this.tm()||r.yv(n))throw h.i.Qa();this.Pc(1993)}}},o.prototype.oJ=function(){for(var r=0,n=this.da();r<n;r++)this.FW(r)},o.prototype.FW=function(r){if(this.mc(),r>=this.da())throw h.i.N();var n=this.Ba(r),a=this.Ja(r);r=this.dc(r)?1:0;for(var c=0,p=this.description.Aa;c<p;c++)if(this.za[c]!=null){var f=h.ra.Va(this.description.Ed(c));this.za[c].ni(f*(n+r),f*(a-r),f)}this.Pc(1993)},o.prototype.Zq=function(r){this.mc();var n=this.da();if(0>r&&(r=n-1),r>=n)throw h.i.N();for(var a=this.Ba(r),c=this.Ja(r),p=0,f=this.description.Aa;p<f;p++)if(this.za[p]!=null){var m=h.ra.Va(this.description.Ed(p));this.za[p].En(m*a,m*c,m*this.wa)}for(a=r+1;a<=n;a++)p=this.nb.read(a),this.nb.write(a-1,p-c);if(this.mb==null)for(a=r+1;a<=n;a++)r=this.mb.read(a),this.mb.write(a-1,r);this.nb.resize(n),this.mb.resize(n),this.wa-=c,this.Pg-=c,this.Pc(1993)},o.prototype.vf=function(r,n,a,c){if(n==this||a>=n.da())throw h.i.N();var p=this.da();if(r>p)throw h.i.N();0>r&&(r=p),0>a&&(a=n.da()-1),this.Mg=!1,this.Jl(n.description),n.mc();var f=n.Ba(a),m=n.Ja(a),b=this.wa,x=n.dc(a)&&!c?1:0;this.dm(this.wa+m),this.mc();for(var T=r<p?this.Ba(r):b,I=0,A=this.description.Aa;I<A;I++){var P=this.description.Ed(I),j=n.description.Pf(P),D=h.ra.Va(P);0<=j&&n.za[j]!=null?(x!=0&&this.za[I].Mn(T*D,n.za[j],D*f,D,!0,D,D*b),this.za[I].Mn((T+x)*D,n.za[j],D*(f+x),D*(m-x),c,D,D*(b+x))):this.za[I].Ln(T*D,h.ra.se(P),D*m,D*b)}for(this.nb.add(b+m),c=p;c>=r+1;c--)f=this.nb.read(c-1),this.nb.write(c,f+m);for(n.yv(a),this.mb.add(0),c=p-1;c>=r+1;c--)p=this.mb.read(c),p&=-5,this.mb.write(c+1,p);p=n.JR().read(a),p&=-5,this.xf&&(p|=1),this.mb.write(r,p)},o.prototype.Hz=function(r,n){var a=-1,c=this.da();if(a>c)throw h.i.N();0>a&&(a=c),this.Mg=!1;var p=this.wa;this.dm(this.wa+n),this.mc();var f=a<c?this.Ba(a):p;if(r!=null)this.za[0].Iz(2*f,r,0,n,!0,2*p);else{var m=h.ra.se(0);this.za[0].Ln(2*f,m,2*n,2*p)}r=1;for(var b=this.description.Aa;r<b;r++){m=this.description.kd(r);var x=h.ra.Va(m);m=h.ra.se(m),this.za[r].Ln(f*x,m,x*n,x*p)}for(this.nb.add(this.wa),p=c;p>=a+1;p--)f=this.nb.read(p-1),this.nb.write(p,f+n);for(this.mb.add(0),p=c-1;p>=a+1;p--)n=this.mb.read(p),n&=-5,this.mb.write(p+1,n);this.xf&&this.mb.write(a,1)},o.prototype.qG=function(r,n,a){var c=-1;if(0>r&&(r=this.da()),r>this.da()||c>this.Ja(r)||a>n.length)throw h.i.fa("index out of bounds");if(a!=0){r==this.da()&&(this.nb.add(this.wa),this.xf?this.mb.add(1):this.mb.add(0)),0>c&&(c=this.Ja(r)),this.mc();var p=this.wa;this.dm(this.wa+a),this.mc();for(var f=0,m=this.description.Aa;f<m;f++){var b=this.description.Ed(f),x=h.ra.Va(b);this.za[f].Ut(x*(this.Ba(r)+c+a),(p-this.Ba(r)-c)*x,this.za[f],x*(this.Ba(r)+c),!0,x),f==0?this.za[f].vC(x*(this.Ba(r)+c),a,n,0,!0):this.za[f].Wj(h.ra.se(b),(this.Ba(r)+c)*x,a*x)}for(this.tm()&&(this.Ve.Ut(this.Ba(r)+c+a,p-this.Ba(r)-c,this.Ve,this.Ba(r)+c,!0,1),this.Lj.Ut(this.Ba(r)+c+a,p-this.Ba(r)-c,this.Lj,this.Ba(r)+c,!0,1),this.Ve.Wj(1,this.Ba(r)+c,a),this.Lj.Wj(-1,this.Ba(r)+c,a)),r+=1,n=this.da();r<=n;r++)this.nb.write(r,this.nb.read(r)+a)}},o.prototype.wf=function(r,n,a){var c=this.da();if(0>r&&(r=this.da()),r>=c||n>this.Ja(r))throw h.i.fa("index out of bounds");r==this.da()&&(this.nb.add(this.wa),this.xf?this.mb.add(1):this.mb.add(0)),0>n&&(n=this.Ja(r));var p=this.wa;this.dm(this.wa+1),this.mc();var f=this.Ba(r);this.za[0].vj(2*(f+n),a,2*p),a=1;for(var m=this.description.Aa;a<m;a++){var b=this.description.Ed(a),x=h.ra.Va(b);this.za[a].Ln(x*(f+n),h.ra.se(b),x,x*p)}for(r+=1;r<=c;r++)this.nb.write(r,this.nb.read(r)+1)},o.prototype.DB=function(r,n){var a=this.da();if(0>r&&(r=a-1),r>=a||n>=this.Ja(r))throw h.i.fa("index out of bounds");this.mc();var c=this.Ba(r);0>n&&(n=this.Ja(r)-1),n=c+n,c=0;for(var p=this.description.Aa;c<p;c++)if(this.za[c]!=null){var f=h.ra.Va(this.description.Ed(c));this.za[c].En(f*n,f,f*this.wa)}for(;a>=r+1;a--)n=this.nb.read(a),this.nb.write(a,n-1);this.wa--,this.Pg--,this.Pc(1993)},o.prototype.uE=function(r,n,a){var c=this.Ba(r)+n;if((a=this.Ba(a)+void 0)<c||0>c||a>this.I()-1)throw h.i.N();n=0,(r=this.Ga()).Vb(c);do{for(;r.Ha()&&(c=r.ha(),r.wb()!=a);)n+=c=c.Qb();if(r.wb()==a)break}while(r.$a());return n},o.prototype.fO=function(r,n,a){if(n=this.Ba(r)+n,a=this.Ba(r)+a,0>n||a>this.I()-1)throw h.i.N();var c=this.Ga();if(n>a){if(!this.dc(r))throw h.i.N("cannot iterate across an open path");c.JB()}var p=r=0;c.Vb(n);do p+=r,r=c.ha().Qb();while(c.wb()!=a);return p},o.prototype.mg=function(){return h.pi.gm(this,null)},o.prototype.KS=function(r,n,a){for(var c=r;c<a-1;c++)if(this.dc(c))throw h.i.N("cannot interpolate across closed paths");if((c=this.description.Aa)!=1){var p=this.uE(r,n,a);if(p!=0)for(var f=1;f<c;f++){var m=this.description.kd(f);if(h.ra.lz(m)!=2)for(var b=h.ra.Va(m),x=0;x<b;x++)this.MS(m,r,n,a,p,x)}}},o.prototype.JS=function(r,n,a){var c=this.description.Aa;if(c!=1){var p=this.fO(r,n,a);if(p!=0)for(var f=1;f<c;f++){var m=this.description.kd(f);if(h.ra.lz(m)!=2)for(var b=h.ra.Va(m),x=0;x<b;x++)this.LS(m,r,n,a,p,x)}}},o.prototype.MS=function(r,n,a,c,p,f){var m=this.Ga(),b=this.Ba(n)+a;c=this.Ba(c)+void 0,n=this.Uc(r,b,f),a=this.Uc(r,c,f);var x=n,T=0;m.Vb(b);do if(m.Ha()){if(m.ha(),m.wb()==c)break;this.setAttribute(r,m.wb(),f,x),m.li();do{if(b=m.ha(),m.ik()==c)return;T+=b=b.Qb(),x=h.lc.hq(n,a,T/p),m.On()||this.setAttribute(r,m.ik(),f,x)}while(m.Ha())}while(m.$a())},o.prototype.LS=function(r,n,a,c,p,f){var m=this.Ga(),b=this.Ba(n)+a;if((n=this.Ba(n)+c)!=b){c=this.Uc(r,b,f),a=this.Uc(r,n,f);var x=0;m.Vb(b),m.JB(),b=c;do{var T=m.ha();this.setAttribute(r,m.wb(),f,b),x+=b=T.Qb(),b=h.lc.hq(c,a,x/p)}while(m.ik()!=n)}},o.prototype.Oa=function(){this.tq=0,this.Mg=!1,this.Sd=this.Ve=this.Lj=this.mb=this.nb=null,this.wD()},o.prototype.Oc=function(r){r instanceof h.Dd?this.YD(r,-1):this.wN(r)},o.prototype.YD=function(r,n){if(!this.B()&&!r.isIdentity()){this.mc();var a=this.za[0],c=new h.h,p=new h.h;if(0>n){var f=this.tm(),m=0;n=this.wa}else f=this.yv(n),m=this.Ba(n),n=this.Vc(n);for(;m<n;m++){if(c.x=a.read(2*m),c.y=a.read(2*m+1),f){var b=this.Lj.read(m);if(0<=b)switch(7&this.Ve.read(m)){case 2:p.x=this.Sd.read(b),p.y=this.Sd.read(b+1),r.Eh(p,p),this.Sd.write(b,p.x),this.Sd.write(b+1,p.y),p.x=this.Sd.read(b+3),p.y=this.Sd.read(b+4),r.Eh(p,p),this.Sd.write(b+3,p.x),this.Sd.write(b+4,p.y);break;case 4:throw h.i.Qa()}}r.Eh(c,c),a.write(2*m,c.x),a.write(2*m+1,c.y)}this.Pc(1993)}},o.prototype.wN=function(r){if(!this.B()){this.re(1),this.mc();for(var n=this.za[0],a=this.za[1],c=new h.Nd,p=new h.Nd,f=this.tm(),m=0;m<this.wa;m++){if(c.x=n.read(2*m),c.y=n.read(2*m+1),c.z=a.read(m),f){var b=this.Lj.read(m);if(0<=b)switch(7&this.Ve.read(m)){case 2:p.x=this.Sd.read(b),p.y=this.Sd.read(b+1),p.z=this.Sd.read(b+2),p=r.fp(p),this.Sd.write(b,p.x),this.Sd.write(b+1,p.y),this.Sd.write(b+1,p.z),p.x=this.Sd.read(b+3),p.y=this.Sd.read(b+4),p.z=this.Sd.read(b+5),p=r.fp(p),this.Sd.write(b+3,p.x),this.Sd.write(b+4,p.y),this.Sd.write(b+5,p.z);break;case 4:throw h.i.Qa()}}c=r.fp(c),n.write(2*m,c.x),n.write(2*m+1,c.y),a.write(m,c.z)}this.Pc(1993)}},o.prototype.iy=function(){this.nb==null&&(this.nb=h.Yc.Oh(1,0),this.mb=h.Yc.Mr(1,0)),this.Ve!=null&&(this.Ve.resize(this.Pg,1),this.Lj.resize(this.Pg,-1))},o.prototype.op=function(r){r.Mg=!1,r.tq=this.tq,r.xq=this.xq,r.nb=this.nb!=null?h.ia.Bn(this.nb):null,r.mb=this.mb!=null?h.pn.Bn(this.mb):null,r.Lj=this.Lj!=null?h.ia.Bn(this.Lj):null,r.Ve=this.Ve!=null?h.pn.Bn(this.Ve):null,r.Sd=this.Sd!=null?h.be.Bn(this.Sd):null,r.sq=this.sq,r.rq=this.rq,r.Aj=this.ak(1024)?null:this.Aj},o.prototype.Qb=function(){if(!this.ak(512))return this.sq;for(var r=this.Ga(),n=new h.Fx(0);r.$a();)for(;r.Ha();)n.add(r.ha().Qb());return this.sq=n.rm(),this.Lf(512,!1),n.rm()},o.prototype.Nb=function(r){if(r==this)return!0;if(!(r instanceof o&&l.prototype.Nb.call(this,r)))return!1;var n=this.da();return!(n!=r.da()||this.nb!=null&&!this.nb.Nb(r.nb,0,n+1)||this.xq!=r.xq||this.mb!=null&&!this.mb.Nb(r.mb,0,n))&&l.prototype.Nb.call(this,r)},o.prototype.Ga=function(){return new h.YL(this)},o.prototype.hy=function(r){if(l.prototype.hy.call(this,r),this.tm())for(r=this.Ga();r.$a();)r.Ha()},o.prototype.yp=function(r,n){if(l.prototype.yp.call(this,r,n),this.tm())for(r=this.Ga();r.$a();)r.Ha()},o.prototype.$x=function(){this.wa=this.nb==null||this.nb.size==0?0:this.nb.read(this.nb.size-1)},o.prototype.Ke=function(){return this.xf?(this.xu(),this.rq):0},o.prototype.Ev=function(r){return!!this.xf&&(this.ak(8)?(this.xu(),0<this.Aj.read(r)):(4&this.mb.read(r))!=0)},o.prototype.Ir=function(r){return this.xf?(this.xu(),this.Aj.read(r)):0},o.prototype.xu=function(){if(this.ak(1024)){var r=this.da();this.Aj==null?this.Aj=new h.be(r):this.Aj.size!=r&&this.Aj.resize(r),r=new h.Fx(0);for(var n=new h.Fx(0),a=new h.h,c=0,p=this.Ga();p.$a();){for(n.reset(),this.D(this.Ba(p.gb),a);p.Ha();)n.add(p.ha().Tx(a.x,a.y));r.add(n.rm());var f=c++;this.Aj.write(f,n.rm())}this.rq=r.rm(),this.Lf(1024,!1)}},o.prototype.FR=function(){if(this.xf){this.fm();for(var r=this.da(),n=0;n<r;n++)4&this.mb.read(n)}},o.prototype.fm=function(){if(this.ak(8)){this.xu();var r=this.da();(this.mb==null||this.mb.size<r)&&(this.mb=h.Yc.Mr(r+1));for(var n=1,a=0;a<r;a++){var c=this.Aj.read(a);a==0&&(n=0<c?1:-1),0<c*n?this.mb.zJ(a,4):this.mb.KE(a,4)}this.Lf(8,!1)}},o.prototype.sz=function(r){var n=this.gb,a=this.da();if(0<=n&&n<a){if(r<this.Vc(n)){if(r>=this.Ba(n))return n;n--}else n++;if(0<=n&&n<a&&r>=this.Ba(n)&&r<this.Vc(n))return this.gb=n}if(5>a){for(n=0;n<a;n++)if(r<this.Vc(n))return this.gb=n;throw h.i.fa("corrupted geometry")}for(n=0,--a;a>n;){var c=n+(a-n>>1);if(r<this.Ba(c))a=c-1;else{if(!(r>=(n=this.Vc(c))))return this.gb=c;n=c+1}}return this.gb=n},o.prototype.yz=function(){var r=this.I();if(!this.xf){r-=this.da();for(var n=0,a=this.da();n<a;n++)this.dc(n)&&r++}return r},o.prototype.rv=function(r){var n=this.Ja(r);return this.dc(r)||n--,n},o.prototype.Ia=function(){return new o(this.xf,this.description)},o.prototype.Db=function(){return this.xf?2:1},o.prototype.getType=function(){return this.xf?1736:1607},o.prototype.QJ=function(r){this.nb=r,this.Pc(16777215)},o.prototype.VR=function(){return this.wx(),this.Ve},o.prototype.JR=function(){return this.wx(),this.mb},o.prototype.PJ=function(r){this.mb=r,this.Pc(16777215)},o.prototype.da=function(){return this.nb!=null?this.nb.size-1:0},o.prototype.Vc=function(r){return this.nb.read(r+1)},o.prototype.Ja=function(r){return this.nb.read(r+1)-this.nb.read(r)},o.prototype.Ba=function(r){return this.nb.read(r)},o.prototype.lu=function(r,n){this.Bb==null&&(this.Bb=new h.Uk),n=h.Nx.pW(n);var a=this.Bb.Fk;if(a!=null){if(!(a.Ik<r||n>a.RR()))return!0;this.Bb.yD(null)}return a=h.Nx.create(this,r,n),this.Bb.yD(a),!0},o.prototype.cc=function(){var r=l.prototype.cc.call(this);if(!this.Ac()){var n=this.da();this.nb!=null&&this.nb.An(r,0,n+1),this.mb!=null&&this.mb.An(r,0,n)}return r},o.prototype.ZF=function(r){return this.Ve!=null?this.Ve.read(r):1},o.prototype.bc=function(r,n,a){var c=this.sz(r);if(r==this.Vc(c)-1&&!this.dc(c))throw h.i.fa("index out of bounds");this.mc();var p=this.Ve,f=1;if(p!=null&&(f=7&p.read(r)),f!==1)throw h.i.Qa();if(n.Or(),n=n.get(),a?n.Nf(h.ee.og()):n.Nf(this.description),c=r==this.Vc(c)-1&&this.dc(c)?this.Ba(c):r+1,p=new h.h,this.D(r,p),n.Dc(p),this.D(c,p),n.Qc(p),!a)for(a=1,p=this.description.Aa;a<p;a++){f=this.description.Ed(a);for(var m=h.ra.Va(f),b=0;b<m;b++){var x=this.Uc(f,r,b);n.YB(f,b,x),x=this.Uc(f,c,b),n.OB(f,b,x)}}},o.prototype.Rj=function(r,n){if(r>=this.da())throw h.i.N();if(this.B())n.Oa();else{if(this.yv(r))throw h.i.fa("not implemented");var a=this.ub(0),c=new h.h,p=new h.l;p.Oa();var f=this.Ba(r);for(r=this.Vc(r);f<r;f++)a.tc(2*f,c),p.Zb(c);n.K(p)}},o.prototype.fj=function(r){return this.Bb==null&&(this.Bb=new h.Uk),!(r==0||16>this.I())&&(r=h.ta.nE(this),this.Bb.WM(r),!0)},o.prototype.hM=function(){if(this.Bb==null&&(this.Bb=new h.Uk),this.Bb.zo==null){this.Bb.xD(null);var r=h.ta.YN(this);this.Bb.xD(r)}},o.prototype.Yo=function(r){this.xq=r},o.prototype.In=function(){return this.xq},o.prototype.DD=function(r){if(this==r)throw h.i.fa("MultiPathImpl.add");for(var n=this.da(),a=0;a<r.da();a++)this.addPath(r,a,!0),this.CU(n),n++},o.prototype.kO=function(r){var n=this.sz(r),a=this.Ba(n);if(a!=r){if(r>=(n=this.Vc(n))||r<a)throw h.i.fa("change_ring_start_point");for(var c=0,p=this.description.Aa;c<p;c++){var f=this.description.kd(c);f=h.ra.Va(f),this.za[c].rotate(a*f,r*f,n*f)}}},o}(h.Gx);h.Vk=g}(q||(q={})),function(h){var k=function(g){function l(o){var r=g.call(this)||this;if(o!==void 0){if(o==null)throw h.i.N();r.description=o}else r.description=h.ee.og();return r.wa=0,r}return nt(l,g),l.prototype.Ia=function(){return new l(this.description)},l.prototype.add=function(o){this.resize(this.wa+1),this.Dh(this.wa-1,o)},l.prototype.Bu=function(o,r){this.resize(this.wa+1);var n=new h.h;n.ma(o,r),this.Cb(this.wa-1,n)},l.prototype.Fd=function(o,r,n){if(n=0>n?o.I():n,0>r||r>o.I()||n<r)throw h.i.N();if(r!=n){this.Jl(o.description),n-=r;var a=this.wa;this.resize(this.wa+n),this.mc();for(var c=0,p=o.description.Aa;c<p;c++){var f=o.description.Ed(c),m=h.ra.Va(f),b=this.ub(f);f=o.ub(f),b.Mn(a*m,f,r*m,n*m,!0,1,a*m)}}},l.prototype.HD=function(o,r){var n=o.length;if(r=0>r?n:r,0>n||0>r)throw h.i.N();if(r!=0){n=r-0,r=this.wa,this.resize(this.wa+n);for(var a=0;a<n;a++)this.Cb(r+a,o[0+a])}},l.prototype.DB=function(o){if(0>o||o>=this.I())throw h.i.fa("index out of bounds");this.mc();for(var r=0,n=this.description.Aa;r<n;r++)if(this.za[r]!=null){var a=h.ra.Va(this.description.Ed(r));this.za[r].En(a*o,a,a*this.wa)}this.wa--,this.Pg--,this.Pc(1993)},l.prototype.resize=function(o){this.dm(o)},l.prototype.op=function(){},l.prototype.Oa=function(){g.prototype.wD.call(this)},l.prototype.Oc=function(o){if(o instanceof h.Dd){if(this.B())return;this.mc();for(var r=this.za[0],n=new h.h,a=0;a<this.wa;a++)n.x=r.read(2*a),n.y=r.read(2*a+1),o.Eh(n,n),r.write(2*a,n.x),r.write(2*a+1,n.y)}else{if(this.B())return;this.mc(),this.re(1),this.mc(),r=this.za[0],n=this.za[1];var c=new h.Nd;for(a=0;a<this.wa;a++){c.x=r.read(2*a),c.y=r.read(2*a+1),c.z=n.read(a);var p=o.fp(c);r.write(2*a,p.x),r.write(2*a+1,p.y),n.write(a,p.z)}}this.Pc(1993)},l.prototype.Db=function(){return 0},l.prototype.getType=function(){return 550},l.prototype.Ke=function(){return 0},l.prototype.Qb=function(){return 0},l.prototype.Nb=function(o){return o==this||o instanceof l&&g.prototype.Nb.call(this,o)},l.prototype.lW=function(o,r){var n=this.wa;if(n=Math.min(n,r+1e3),0>r||r>=this.wa||n<r||o.length!=1e3)throw h.i.N();var a=n-r,c=[];for(this.ub(0).Vw(2*r,2*a,c,0,!0),r=0;r<a;r++)o[r]=h.h.construct(c[2*r],c[2*r+1]);return n},l.prototype.$x=function(){},l.prototype.iy=function(){},l.prototype.lu=function(){return!1},l.prototype.fj=function(){return!1},l.prototype.mg=function(){return null},l}(h.Gx);h.de=k}(q||(q={})),function(h){var k;(k=h.iL||(h.iL={}))[k.NotDetermined=0]="NotDetermined",k[k.Structure=1]="Structure",k[k.DegenerateSegments=2]="DegenerateSegments",k[k.Clustering=3]="Clustering",k[k.Cracking=4]="Cracking",k[k.CrossOver=5]="CrossOver",k[k.RingOrientation=6]="RingOrientation",k[k.RingOrder=7]="RingOrder",k[k.OGCPolylineSelfTangency=8]="OGCPolylineSelfTangency",k[k.OGCPolygonSelfTangency=9]="OGCPolygonSelfTangency",k[k.OGCDisconnectedInterior=10]="OGCDisconnectedInterior";var g=function(){function l(o,r,n){o===void 0?(this.Jj=0,this.Ko=this.Jo=-1):(this.Jj=o,this.Jo=r,this.Ko=n)}return l.prototype.Wt=function(o){this.Jj=o.Jj,this.Jo=o.Jo,this.Ko=o.Ko},l}();h.Md=g}(q||(q={})),function(h){h.O=function(){function k(){}return k.assert=function(g){if(g===!1)throw h.i.GK()},k.bK=function(g){return isNaN(g)?NaN:g===0?g:0<g?1:-1},k.Fu=function(g){var l;l===void 0&&(l=0);for(var o=[],r=0;r<g;r++)o[r]=k.lg(2,l);return o},k.lg=function(g,l){l===void 0&&(l=0);for(var o=[],r=0;r<g;r++)o[r]=l;return o},k.$u=function(g,l){var o,r;for(o===void 0&&(o=0),r===void 0&&(r=g.length-1);o<=r;o++)g[o]=l},k.Rk=function(g,l,o){return g<l?l:g>o?o:g},k.Th=function(g,l){var o=5381;return((o=((o=((o=l!==void 0?(l<<5)+l+(255&g):(o<<5)+o+(255&g))<<5)+o+(g>>8&255))<<5)+o+(g>>16&255))<<5)+o+(g>>24&255)&2147483647},k.uj=function(){throw Error("Not Implemented")},k.bB=function(g){return k.aU(g)+12345&2147483647},k.XG=function(g){var l=32,o=g%k.Qx|0,r=g/k.Qx|0;return(l&=63)==0?g:(32>l?(g=o>>>l|r<<32-l,l=r>>l):(g=r>>l-32,l=0<=r?0:-1),l*k.Qx+(g>>>0))},k.aU=function(g){var l=1103515245,o=65535&l;return((l-o)*(g|=0)|0)+(o*g|0)|0},k.truncate=function(g){return 0>g?-1*Math.floor(Math.abs(g)):Math.floor(g)},k.MAX_SAFE_INTEGER=Math.pow(2,53)-1,k.MIN_SAFE_INTEGER=-k.MAX_SAFE_INTEGER,k.VC=65536,k.Qx=k.VC*k.VC,k}()}(q||(q={})),function(h){var k;(k=h.CL||(h.CL={}))[k.Project=0]="Project",k[k.Union=1]="Union",k[k.Difference=2]="Difference",k[k.Proximity2D=3]="Proximity2D",k[k.Relate=4]="Relate",k[k.Equals=5]="Equals",k[k.Disjoint=6]="Disjoint",k[k.Intersects=7]="Intersects",k[k.Within=8]="Within",k[k.Contains=9]="Contains",k[k.Crosses=10]="Crosses",k[k.Touches=11]="Touches",k[k.Overlaps=12]="Overlaps",k[k.Buffer=13]="Buffer",k[k.Distance=14]="Distance",k[k.Intersection=15]="Intersection",k[k.Clip=16]="Clip",k[k.Cut=17]="Cut",k[k.DensifyByLength=18]="DensifyByLength",k[k.DensifyByAngle=19]="DensifyByAngle",k[k.LabelPoint=20]="LabelPoint",k[k.GeodesicBuffer=21]="GeodesicBuffer",k[k.GeodeticDensifyByLength=22]="GeodeticDensifyByLength",k[k.ShapePreservingDensify=23]="ShapePreservingDensify",k[k.GeodeticLength=24]="GeodeticLength",k[k.GeodeticArea=25]="GeodeticArea",k[k.Simplify=26]="Simplify",k[k.SimplifyOGC=27]="SimplifyOGC",k[k.Offset=28]="Offset",k[k.Generalize=29]="Generalize",k[k.SymmetricDifference=30]="SymmetricDifference",k[k.ConvexHull=31]="ConvexHull",k[k.Boundary=32]="Boundary",k[k.SimpleRelation=33]="SimpleRelation";var g=function(){function l(){}return l.prototype.getType=function(){return null},l.prototype.wn=function(){},l.prototype.Iu=function(){return!1},l}();h.Je=g}(q||(q={})),function(h){var k=function(g){function l(){return g!==null&&g.apply(this,arguments)||this}return nt(l,g),l.prototype.getType=function(){return 13},l.local=function(){return l.instance===null&&(l.instance=new l),l.instance},l.prototype.V=function(o,r,n,a,c){return o instanceof h.aa?(c=new h.Zc(o),this.V(c,r,[n],!1,a).next()):a===!0?(n=new h.BC(o,r,n,!1,c),h.Gh.local().V(n,r,c)):new h.BC(o,r,n,!1,c)},l.instance=null,l}(h.Je);h.AC=k}(q||(q={})),function(h){var k=function(){function g(l,o,r,n,a){this.ya=-1,this.Rd=l,this.$z=o,this.Cs=r,this.tT=new h.l,this.tT.Oa(),this.eo=-1,this.Ub=a}return g.prototype.next=function(){for(var l;(l=this.Rd.next())!=null;)return this.ya=this.Rd.La(),this.eo+1<this.Cs.length&&this.eo++,this.buffer(l,this.Cs[this.eo]);return null},g.prototype.La=function(){return this.ya},g.prototype.buffer=function(l,o){return h.HK.buffer(l,o,this.$z,NaN,96,this.Ub)},g.prototype.qe=function(){},g}();h.BC=k}(q||(q={})),function(h){var k=function(g){function l(){return g!==null&&g.apply(this,arguments)||this}return nt(l,g),l.prototype.getType=function(){return 16},l.local=function(){return l.instance===null&&(l.instance=new l),l.instance},l.prototype.V=function(o,r,n,a){return o instanceof h.aa?(o=new h.Zc(o),this.V(o,r,n,a).next()):new h.lL(o,r,n,a)},l.instance=null,l}(h.Je);h.kL=k}(q||(q={})),function(h){var k=function(){function g(l,o,r){if(this.ya=-1,l==null)throw h.i.N();this.$=o,this.yk=l,this.qa=h.ta.Wd(r,o,!1)}return g.prototype.next=function(){var l;return(l=this.yk.next())!=null?(this.ya=this.yk.La(),h.Ud.clip(l,this.$,this.qa,0)):null},g.prototype.La=function(){return this.ya},g.prototype.qe=function(){},g}();h.lL=k}(q||(q={})),function(h){var k=function(g){function l(){return g!==null&&g.apply(this,arguments)||this}return nt(l,g),l.prototype.getType=function(){return 31},l.local=function(){return l.instance===null&&(l.instance=new l),l.instance},l.prototype.V=function(o,r,n){return o instanceof h.aa?h.DC.rE(o):new h.DC(r,o,n)},l.instance=null,l}(h.Je);h.CC=k}(q||(q={})),function(h){var k=function(){function g(l,o,r){if(this.uA=new h.Zt,this.ya=-1,o==null)throw h.i.N();this.cH=l,this.Ic=!1,this.yk=o,this.Ub=r}return g.prototype.next=function(){if(this.cH){if(!this.Ic){var l=this.dO(this.yk);return this.Ic=!0,l}return null}if(!this.Ic){if((l=this.yk.next())!=null)return this.ya=this.yk.La(),g.rE(l);this.Ic=!0}return null},g.prototype.La=function(){return this.ya},g.prototype.dO=function(l){for(var o;(o=l.next())!=null;)this.uA.Ib(o);return this.uA.cR()},g.prototype.qe=function(){if(!this.Ic){if(!this.cH)throw h.i.fa("Invalid call for non merging convex hull.");var l=this.yk.next();if(l==null)throw h.i.fa("Expects a non-null geometry.");this.uA.Ib(l)}},g.rE=function(l){if(g.VS(l))return l;var o=l.getType();if(h.Vk.yd(o))return(o=new h.Ta(l.description)).oc(l,!0),o;if(o==550&&l.I()==2){var r=new h.Sa;return o=new h.Ta(l.description),l.ve(0,r),o.nf(r),l.ve(1,r),o.lineTo(r),o}return h.Zt.RO(l)},g.VS=function(l){if(l.B())return!0;var o=l.getType();return o==33||o==197||!h.Vk.yd(o)&&(o==550?l.I()==1:o==1607?l.da()==1&&2>=l.I():l.da()==1&&(2>=l.I()||h.Zt.JG(l,0)))},g}();h.DC=k}(q||(q={})),function(h){var k=function(g){function l(){return g!==null&&g.apply(this,arguments)||this}return nt(l,g),l.prototype.getType=function(){return 17},l.local=function(){return l.instance===null&&(l.instance=new l),l.instance},l.prototype.V=function(o,r,n,a,c){return new h.nL(o,r,n,a,c)},l.instance=null,l}(h.Je);h.mL=k}(q||(q={})),function(h){var k=function(){function g(l,o,r,n,a){if(this.Tf=null,o==null||r==null)throw h.i.fa("invalid argument");this.qT=l,this.nA=o,this.lH=r,l=h.ta.mv(o,r),this.qa=h.ta.Wd(n,l,!0),this.kH=-1,this.nd=a}return g.prototype.La=function(){return 0},g.prototype.next=function(){return this.RQ(),++this.kH<this.Tf.length?this.Tf[this.kH]:null},g.prototype.RQ=function(){if(this.Tf==null)switch(this.Tf=[],this.nA.getType()){case 1607:this.TQ();break;case 1736:this.SQ()}},g.prototype.TQ=function(){var l=new h.Ta,o=new h.Ta,r=new h.Ta;this.Tf.push(l),this.Tf.push(o);var n=[];h.LK.JK(this.qT,this.nA,this.lH,this.qa,n,this.nd);for(var a=0;a<n.length;a++){var c=n[a];if(c.bt==0)l.add(c.X,!1);else if(c.bt==1||c.bt==2)o.add(c.X,!1);else if(c.bt==3)this.Tf.push(c.X);else{if(c.bt!=4)throw h.i.fa("internal");r.add(c.X,!1)}}r.B()||l.B()&&o.B()&&!(3<=this.Tf.length)||this.Tf.push(r),l.B()&&o.B()&&3>this.Tf.length&&(this.Tf.length=0)},g.prototype.SQ=function(){var l=new h.ia(0),o=new h.gd,r=o.aF(),n=o.Ib(this.nA),a=o.Ib(this.lH),c=new h.Fg;try{c.Ft(o,this.qa,this.nd),c.dl(r,n,a,l);var p=o.Ne(n),f=new h.Da,m=new h.Da;for(this.Tf.length=0,this.Tf.push(f),this.Tf.push(m),n=0;n<l.size;n++){var b=new h.gd,x=b.Ib(p),T=b.Ib(o.Ne(l.get(n)));c.dr(b,this.nd);var I=c.Av(x,T),A=b.Ne(I);if(!A.B()){var P=o.KF(l.get(n),r);P==2?f.add(A,!1):P==1?m.add(A,!1):this.Tf.push(A);var j=new h.gd;x=j.Ib(p),T=j.Ib(o.Ne(l.get(n))),c.dr(j,this.nd),p=j.Ne(c.im(x,T))}}!p.B()&&0<l.size&&this.Tf.push(p),f.B()&&m.B()&&(this.Tf.length=0)}finally{c.Ug()}},g.prototype.qe=function(){},g}();h.nL=k}(q||(q={})),function(h){var k=function(g){function l(){return g!==null&&g.apply(this,arguments)||this}return nt(l,g),l.prototype.getType=function(){return 18},l.local=function(){return l.instance===null&&(l.instance=new l),l.instance},l.prototype.V=function(o,r,n){if(o instanceof h.aa)return o=new h.Zc(o),this.V(o,r,n).next();if(0>=r)throw h.i.N();return new h.oL(o,r,n)},l.instance=null,l}(h.Je);h.Xl=k}(q||(q={})),function(h){var k=function(){function g(l,o){this.ya=-1,this.Rd=l,this.Ps=o}return g.prototype.La=function(){return this.ya},g.prototype.next=function(){var l;return(l=this.Rd.next())!=null?(this.ya=this.Rd.La(),this.NP(l)):null},g.prototype.NP=function(l){if(l.B()||1>l.Db())return l;var o=l.getType();if(o==1736||o==1607)return this.Ny(l);if(h.aa.yd(o))return this.PP(l);if(o==197)return this.OP(l);throw h.i.Qa()},g.prototype.PP=function(l){if(l.Qb()<=this.Ps)return l;var o=new h.Ta(l.description);return o.oc(l,!0),this.Ny(o)},g.prototype.OP=function(l){var o=new h.Da(l.description);o.ad(l,!1);var r=new h.l;return l.A(r),l=r.ca(),r.R()<=this.Ps&&l<=this.Ps?o:this.Ny(o)},g.prototype.Ny=function(l){for(var o=l.Ia(),r=l.Ga();r.$a();)for(var n=!0;r.Ha();){var a=r.ha();if(a.getType()!=322)throw h.i.fa("not implemented");var c=r.On(),p=a.Qb();if(p>this.Ps){var f=Math.ceil(p/this.Ps);p=new h.Sa(l.description),n&&(a.To(p),o.nf(p));var m=n=1/f,b=0;for(--f;b<f;b++)a.Tw(m,p),o.lineTo(p),m+=n;c?o.Ap():(a.Po(p),o.lineTo(p))}else c?o.Ap():o.oc(a,n);n=!1}return o},g.prototype.qe=function(){},g}();h.oL=k}(q||(q={})),function(h){var k=function(g){function l(){return g!==null&&g.apply(this,arguments)||this}return nt(l,g),l.local=function(){return l.instance===null&&(l.instance=new l),l.instance},l.prototype.getType=function(){return 2},l.prototype.V=function(o,r,n,a){return o instanceof h.aa?(o=new h.Zc(o),r=new h.Zc(r),this.V(o,r,n,a).next()):new h.qL(o,r,n,a)},l.im=function(o,r,n,a){if(o.B()||r.B())return o;var c=o.Db(),p=r.Db();if(c>p)return o;var f=o.getType(),m=r.getType(),b=new h.l,x=new h.l,T=new h.l;o.A(b),r.A(x),T.K(b),T.Zb(x);var I=(T=h.ta.Wd(n,T,!0))*Math.sqrt(2)*1.00001,A=new h.l;if(A.K(b),A.W(I,I),!A.isIntersecting(x))return o;if(c==1&&p==2)return l.KV(o,r,m,n,a);if(f==33)switch(h.Vk.yd(m)?(n=new h.Ta(r.description),n.oc(r,!0)):n=r,m){case 1736:return l.XU(o,n,T);case 1607:return l.YU(o,n,T);case 550:return l.VU(o,n,T);case 197:return l.UU(o,n,T);case 33:return l.WU(o,n,T);default:throw h.i.N()}else if(f==550)switch(m){case 1736:return l.nU(o,r,T);case 197:return l.lU(o,r,T);case 33:return l.mU(o,r,T)}return h.Fg.im(o,r,n,a)},l.XU=function(o,r,n){return h.hd.KG(r,o,n)==0?o:o.Ia()},l.YU=function(o,r,n){var a=o.D();r=r.Ga();for(var c=n*Math.sqrt(2)*1.00001,p=c*c,f=new h.l;r.$a();)for(;r.Ha();){var m=r.ha();if(m.A(f),f.W(c,c),f.contains(a)){if(m.qs(a,n))return o.Ia();var b=m.ac();if(h.h.yc(a,b)<=p||(b=m.wc(),h.h.yc(a,b)<=p))return o.Ia()}}return o},l.VU=function(o,r,n){var a=r.ub(0);r=r.I();var c=o.D(),p=new h.h;n=n*Math.sqrt(2)*1.00001,n*=n;for(var f=0;f<r;f++)if(a.tc(2*f,p),h.h.yc(p,c)<=n)return o.Ia();return o},l.UU=function(o,r,n){var a=new h.l;return r.A(a),a.W(n,n),r=o.D(),a.contains(r)?o.Ia():o},l.WU=function(o,r,n){n=n*Math.sqrt(2)*1.00001,n*=n;var a=o.D();return r=r.D(),h.h.yc(a,r)<=n?o.Ia():o},l.nU=function(o,r,n){var a=new h.l;r.A(a),a.W(n,n);for(var c=o.I(),p=!1,f=[],m=0;m<c;m++)f[m]=!1;var b=new h.h;for(m=0;m<c;m++)o.D(m,b),a.contains(b)&&h.hd.Yd(r,b,n)!=0&&(p=!0,f[m]=!0);if(!p)return o;for(r=o.Ia(),m=0;m<c;m++)f[m]||r.Fd(o,m,m+1);return r},l.lU=function(o,r,n){var a=new h.l;r.A(a),a.W(n,n),r=o.I();var c=!1;n=[];for(var p=0;p<r;p++)n[p]=!1;var f=new h.h;for(p=0;p<r;p++)o.D(p,f),a.contains(f)&&(c=!0,n[p]=!0);if(!c)return o;for(a=o.Ia(),p=0;p<r;p++)n[p]||a.Fd(o,p,p+1);return a},l.mU=function(o,r,n){var a=o.ub(0),c=o.I(),p=r.D(),f=new h.h,m=!1;r=[];for(var b=0;b<c;b++)r[b]=!1;for(n=(b=n*Math.sqrt(2)*1.00001)*b,b=0;b<c;b++)a.tc(2*b,f),h.h.yc(f,p)<=n&&(m=!0,r[b]=!0);if(!m)return o;for(a=o.Ia(),b=0;b<c;b++)r[b]||a.Fd(o,b,b+1);return a},l.KV=function(o,r,n,a,c){var p=new h.Fh;o.bn(p);var f=new h.l;return r.A(f),p.Zb(f),p.W(.1*p.R(),.1*p.ca()),(f=new h.Da).ad(p,!1),n==1736?f.add(r,!0):f.ad(r,!0),h.Xj.local().V(o,f,a,c)},l.instance=null,l}(h.Je);h.kp=k}(q||(q={})),function(h){var k=function(){function g(l,o,r,n){this.ts=o==null,this.ya=-1,this.Rd=l,this.$z=r,this.wT=o.next(),this.Ub=n}return g.prototype.next=function(){return this.ts?null:(l=this.Rd.next())!=null?(this.ya=this.Rd.La(),h.kp.im(l,this.wT,this.$z,this.Ub)):null;var l},g.prototype.La=function(){return this.ya},g.prototype.qe=function(){},g}();h.qL=k}(q||(q={})),function(h){var k=function(){function l(o){this.nd=o,this.Bj=new h.l,this.Bj.Oa(),this.oh=new h.l,this.oh.Oa()}return l.prototype.Nt=function(){var o=this.Bj.v;this.Bj.v=this.oh.v,this.oh.v=o,o=this.Bj.C,this.Bj.C=this.oh.C,this.oh.C=o,o=this.Bj.G,this.Bj.G=this.oh.G,this.oh.G=o,o=this.Bj.H,this.Bj.H=this.oh.H,this.oh.H=o},l.prototype.eQ=function(o,r){if(this.nd!=null&&!this.nd.progress(-1,-1))throw h.i.fu("user_canceled");var n=!this.Bj.isIntersecting(this.oh);return h.aa.Hc(o.getType())&&h.aa.Hc(r.getType())?o.I()>r.I()?this.gE(o,r,n):(this.Nt(),o=this.gE(r,o,n),this.Nt(),o):o.getType()==550&&h.aa.Hc(r.getType())?(o=this.hE(r,o,n),this.Nt(),o):r.getType()==550&&h.aa.Hc(o.getType())?this.hE(o,r,n):o.getType()==550&&r.getType()==550?o.I()>r.I()?this.iE(o,r):(this.Nt(),o=this.iE(r,o),this.Nt(),o):0},l.prototype.gE=function(o,r,n){var a=o.Ga(),c=r.Ga(),p=new h.l,f=new h.l,m=17976931348623157e292;if(!n&&this.pY(o,r,a,c))return 0;for(;a.$a();)for(;a.Ha();)if((o=a.ha()).A(p),!(p.px(this.oh)>m)){for(;c.$a();)for(;c.Ha();)if((r=c.ha()).A(f),p.px(f)<m&&(r=o.tb(r,n),(r*=r)<m)){if(r==0)return 0;m=r}c.Zi()}return Math.sqrt(m)},l.prototype.hE=function(o,r,n){var a=o.Ga(),c=new h.l,p=17976931348623157e292,f=new h.h,m=r.I();for(n=!n&&o.getType()==1736;a.$a();)for(;a.Ha();){var b=a.ha();if(b.A(c),!(1<m&&c.px(this.oh)>p)){for(var x=0;x<m;x++){if(r.D(x,f),n&&h.hd.Yd(o,f,0)!=0)return 0;var T=b.fe(f,!1);if(f.sub(b.hc(T)),(T=f.Sk())<p){if(T==0)return 0;p=T}}n=!1}}return Math.sqrt(p)},l.prototype.iE=function(o,r){for(var n,a=17976931348623157e292,c=new h.h,p=new h.h,f=o.I(),m=r.I(),b=0;b<f;b++)if(o.D(b,c),!(1<m&&this.oh.iK(c)>a)){for(var x=0;x<m;x++)if(r.D(x,p),(n=h.h.yc(c,p))<a){if(n==0)return 0;a=n}}return Math.sqrt(a)},l.prototype.pY=function(o,r,n,a){if(o.getType()==1736){for(;a.$a();)if(a.Ha()){var c=a.ha();if(h.hd.Yd(o,c.wc(),0)!=0)return!0}a.Zi()}if(r.getType()==1736){for(;n.$a();)if(n.Ha()&&(o=n.ha(),h.hd.Yd(r,o.wc(),0)!=0))return!0;n.Zi()}return!1},l.prototype.gm=function(o,r){return o.B()||r.B()?NaN:(o.A(this.Bj),r.A(this.oh),this.eQ(o,r))},l}(),g=function(l){function o(){return l!==null&&l.apply(this,arguments)||this}return nt(o,l),o.prototype.V=function(r,n,a){if(r==null||n==null)throw h.i.N();if(r.B()||n.B())return NaN;var c=r.getType(),p=n.getType();if(c==33){if(p==33)return h.h.tb(r.D(),n.D());if(p==197)return a=new h.l,n.A(a),a.tb(r.D());(c=new h.de).add(r),r=c}else if(c==197){if(p==197)return p=new h.l,r.A(p),a=new h.l,n.A(a),a.tb(p);(c=new h.Da).ad(r,!1),r=c}return p==33?((p=new h.de).add(n),n=p):p==197&&((p=new h.Da).ad(n,!1),n=p),new k(a).gm(r,n)},o.local=function(){return o.instance===null&&(o.instance=new o),o.instance},o.prototype.getType=function(){return 14},o.instance=null,o}(h.Je);h.rL=g}(q||(q={})),function(h){var k=function(){function g(l,o,r,n){this.zH=l,this.DH=o,this.nd=n,this.$G=r}return g.prototype.next=function(){var l=this.zH.next();return l==null?null:this.zC(l)},g.prototype.La=function(){return this.zH.La()},g.prototype.zC=function(l){var o=l.getType();if(h.aa.Rn(o))return l;if(o==197)return(o=new h.Da(l.description)).ad(l,!1),this.zC(o);if(l.B())return l;if(l==null)throw h.i.Qa();o=l.Ia();for(var r=new h.yb,n=0,a=l.da();n<a;n++)this.TK(l,n,o,r);return o},g.prototype.TK=function(l,o,r,n){if(!(2>l.Ja(o))){var a=l.Ba(o),c=l.Vc(o)-1,p=l.ub(0),f=l.dc(o),m=new h.ia(0);m.Jb(l.Ja(o)+1);var b=new h.ia(0);for(b.Jb(l.Ja(o)+1),m.add(f?a:c),m.add(a),a=new h.h;1<m.size;){var x=m.Fc();m.If();var T=m.Fc();l.D(x,a),n.Dc(a),l.D(T,a),n.Qc(a),0<=(T=this.SK(n,a,p,x,T,c))?(m.add(T),m.add(x)):b.add(x)}if(f||b.add(m.get(0)),b.size==m.size)r.addPath(l,o,!0);else if(2<=b.size&&(!this.$G||b.size!=2||!(f||h.h.tb(l.Na(b.get(0)),l.Na(b.get(1)))<=this.DH))){for(o=new h.Sa,n=0,c=b.size;n<c;n++)l.ve(b.get(n),o),n==0?r.nf(o):r.lineTo(o);f&&(this.$G||b.size!=2||r.lineTo(o),r.Ap())}}},g.prototype.SK=function(l,o,r,n,a,c){var p=a-1;for(a<=n&&(p=c),c=a=-1,n+=1;n<=p;n++){r.tc(2*n,o);var f=o.x,m=o.y;l.hc(l.fe(o,!1),o),o.x-=f,o.y-=m,(f=o.length())>this.DH&&f>c&&(a=n,c=f)}return a},g.prototype.qe=function(){},g}();h.sL=k}(q||(q={})),function(h){var k=function(g){function l(){return g!==null&&g.apply(this,arguments)||this}return nt(l,g),l.prototype.getType=function(){return 29},l.prototype.V=function(o,r,n,a){return o instanceof h.aa?(o=new h.Zc(o),this.V(o,r,n,a).next()):new h.sL(o,r,n,a)},l.local=function(){return l.instance===null&&(l.instance=new l),l.instance},l.instance=null,l}(h.Je);h.EC=k}(q||(q={})),function(h){var k=function(g){function l(){return g!==null&&g.apply(this,arguments)||this}return nt(l,g),l.prototype.getType=function(){return 21},l.local=function(){return l.instance===null&&(l.instance=new l),l.instance},l.prototype.V=function(o,r,n,a,c,p,f,m){return o instanceof h.aa?(m=new h.Zc(o),this.V(m,r,n,[a],c,p,!1,f).next()):f===!0?(n=new h.GC(o,r,n,a,c,!1,!1,m),h.Gh.local().V(n,r,m)):new h.GC(o,r,n,a,c,!1,!1,m)},l.instance=null,l}(h.Je);h.FC=k}(q||(q={})),function(h){var k=function(){function g(l,o,r,n,a,c,p,f){if(c)throw h.i.Ie();if(o==null)throw h.i.N();this.ya=-1,this.Ms=l,this.vg=o,this.ze=r,this.Cs=n,this.$n=a,this.eo=-1,this.Ub=f,this.uT=new h.l,this.uT.Oa()}return g.prototype.next=function(){for(var l;(l=this.Ms.next())!=null;)return this.ya=this.Ms.La(),this.eo+1<this.Cs.length&&this.eo++,this.$Q(l,this.Cs[this.eo]);return null},g.prototype.La=function(){return this.ya},g.prototype.$Q=function(l,o){return h.VK.buffer(l,this.vg,this.ze,o,this.$n,this.Ub)},g.prototype.qe=function(){},g}();h.GC=k}(q||(q={})),function(h){var k=function(g){function l(){return g!==null&&g.apply(this,arguments)||this}return nt(l,g),l.prototype.getType=function(){return 24},l.local=function(){return l.instance===null&&(l.instance=new l),l.instance},l.prototype.V=function(o,r,n){if(r==null)throw h.i.N();if(o.B()||1>o.Db())return 0;if(n==4)throw h.i.Ie();var a=h.cb.sc(r),c=h.cb.vv(a),p=h.cb.ev(a);c*=2-c;var f=a.Hd().ai,m=o.getType();if(m==1736||m==197)var b=o.mg();else h.aa.yd(m)?(b=new h.Ta(o.description)).oc(o,!0):b=o;if(a.Nb(r)==0){if(h.cb.Wc(r)){b=h.Hh.lj(b,r),m==1607&&b==o&&(b=h.aa.jg(o)),o=new h.Nc,h.cb.gh(r).cn(o),m=0;for(var x=b.I();m<x;m++){var T=b.Na(m);T.x=h.Hh.Zm(T.x,o),b.Cb(m,T)}}o=b.Ia(),b=h.Hh.WI(r,a,b,o)?o:h.cb.zh(b,r,a)}return this.hQ(b,n,p,c,f)},l.prototype.hQ=function(o,r,n,a,c){var p=new h.ga(0),f=0;for(o=o.Ga();o.$a();)for(;o.Ha();){var m=o.ha(),b=m.ac();m=m.wc(),b.scale(c),m.scale(c),h.kb.wd(n,a,b.x,b.y,m.x,m.y,p,null,null,r),f+=p.u}return f},l.instance=null,l}(h.Je);h.vL=k}(q||(q={})),function(h){var k=function(g){function l(){return g!==null&&g.apply(this,arguments)||this}return nt(l,g),l.prototype.getType=function(){return 18},l.local=function(){return l.instance===null&&(l.instance=new l),l.instance},l.prototype.V=function(o,r,n,a,c){return o instanceof h.aa?(o=new h.Zc(o),this.V(o,r,n,a,c).next()):new h.uL(o,n,a,r,-1,-1,c)},l.instance=null,l}(h.Je);h.tL=k}(q||(q={})),function(h){var k=function(){function g(l,o,r,n,a,c){if(0<c||r!=4&&0<a)throw h.i.Ie();if(o==null)throw h.i.N();this.ya=-1,this.Ms=l,this.vg=o,this.ze=r,this.DT=n,this.CT=a}return g.prototype.next=function(){for(var l;(l=this.Ms.next())!=null;)return this.ya=this.Ms.La(),this.Zy(l);return null},g.prototype.La=function(){return this.ya},g.prototype.Zy=function(l){return h.cj.Qr(l,this.vg,this.ze,this.DT,this.CT,this.Ub)},g.prototype.qe=function(){},g}();h.uL=k}(q||(q={})),function(h){(function(k){k[k.Unknown=0]="Unknown",k[k.Contains=1]="Contains",k[k.Within=2]="Within",k[k.Equals=3]="Equals",k[k.Disjoint=4]="Disjoint",k[k.Touches=8]="Touches",k[k.Crosses=16]="Crosses",k[k.Overlaps=32]="Overlaps",k[k.NoThisRelation=64]="NoThisRelation",k[k.Intersects=1073741824]="Intersects",k[k.IntersectsOrDisjoint=1073741828]="IntersectsOrDisjoint"})(h.cL||(h.cL={})),h.wL=function(){function k(){}return k.nW=function(g,l){var o=g.getType(),r=l.getType();if(h.aa.xj(o)){var n=g.Bb;if(n!=null&&(n=n.Fk)!=null){if(r==33){var a=l.D();n=n.So(a.x,a.y)}else a=new h.l,l.A(a),n=n.Ro(a);if(n==1)return 1;if(n==0)return 4}}if(h.aa.xj(r)&&(n=l.Bb)!=null&&(n=n.Fk)!=null){if(o==33?(g=g.D(),n=n.So(g.x,g.y)):(l=new h.l,g.A(l),n=n.Ro(l)),n==1)return 2;if(n==0)return 4}return 0},k}()}(q||(q={})),function(h){var k=function(g){function l(){return g!==null&&g.apply(this,arguments)||this}return nt(l,g),l.local=function(){return l.instance===null&&(l.instance=new l),l.instance},l.prototype.getType=function(){return 15},l.prototype.V=function(o,r,n,a,c){return o instanceof h.aa?(o=new h.Zc(o),r=new h.Zc(r),this.V(o,r,n,a,c===void 0?-1:c).next()):c===void 0?new h.HC(o,r,n,a,-1):new h.HC(o,r,n,a,c)},l.prototype.wn=function(o,r,n){this.Iu(o)&&(r=h.ta.kj(r,o,!1),o.fj(n)||o.lu(r,n))},l.prototype.Iu=function(o){return h.Nx.zE(o)},l.instance=null,l}(h.Je);h.Xj=k}(q||(q={})),function(h){var k=function(){function g(l,o,r,n,a){if(this.ts=o==null,this.ya=-1,this.Rd=l,this.vg=r,this.Se=o.next(),this.Dj=this.Se.getType(),this.Ub=n,this.Fi=a,this.Fi!=-1&&(0>=this.Fi||7<this.Fi))throw h.i.N("bad dimension mask")}return g.prototype.next=function(){if(this.ts)return null;if(this.zw!=null){var l=this.zw.next();if(l!=null)return l;this.zw=null}for(;(l=this.Rd.next())!=null;)return this.ya=this.Rd.La(),this.Fi==-1?l=this.Ea(l):(this.zw=this.PS(l),l=this.zw.next()),l;return null},g.prototype.La=function(){return this.ya},g.prototype.Ea=function(l){var o=this.zK(l);if(o!=null)return o;o=h.ta.mv(this.Se,l);var r=h.ta.Wd(this.vg,o,!0);o=new h.l,this.Se.A(o);var n=new h.l;return l.A(n),o.W(2*r,2*r),o.Ea(n),o.W(100*r,100*r),r=h.Ud.clip(this.Se,o,0,0),l=h.Ud.clip(l,o,0,0),h.Fg.Av(l,r,this.vg,this.Ub)},g.prototype.QI=function(l,o,r){var n=0;if(1&o)r[0]==null&&(r[0]=new h.de(l)),n++;else for(var a=0;a<r.length-1;a++)r[a]=r[a+1];if(2&o)r[n]==null&&(r[n]=new h.Ta(l)),n++;else for(a=n;a<r.length-1;a++)r[a]=r[a+1];if(4&o)r[n]==null&&(r[n]=new h.Da(l)),n++;else for(a=n;a<r.length-1;a++)r[a]=r[a+1];if(n!=3){for(l=[],a=0;a<n;a++)l[a]=r[a];return new h.Zc(l)}return new h.Zc(r)},g.prototype.PS=function(l){var o=this.zK(l);if(o!=null){var r=[null,null,null];return r[o.Db()]=o,this.QI(l.description,this.Fi,r)}o=h.ta.mv(this.Se,l),r=h.ta.Wd(this.vg,o,!0),o=new h.l,this.Se.A(o),o.W(2*r,2*r);var n=new h.l;return l.A(n),o.Ea(n),o.W(100*r,100*r),r=h.Ud.clip(this.Se,o,0,0),o=h.Ud.clip(l,o,0,0),r=h.Fg.Pz(o,r,this.vg,this.Ub),this.QI(l.description,this.Fi,r)},g.prototype.zK=function(l){var o=h.ta.mv(l,this.Se),r=h.ta.Wd(this.vg,o,!0);o=l.getType();var n=l.B(),a=this.Se.B();if(!(a=n||a)){a=new h.l,l.A(a);var c=new h.l;this.Se.A(c),c.W(2*r,2*r),a=!a.isIntersecting(c)}if(!a)if((c=h.wL.nW(this.Se,l))==4)a=!0;else{if(2&c)return this.Se;if(1&c)return l}if(a)return(r=h.aa.tf(o))<(a=h.aa.tf(this.Dj))?g.HB(l,n):r>a||r==0&&o==550&&this.Dj==33?this.nJ():g.HB(l,n);if((this.Fi==-1||this.Fi==4)&&o==197&&this.Dj==197)return r=this.Se,o=new h.l,l.A(o),n=new h.l,r.A(n),o.Ea(n),r=new h.Fh,l.copyTo(r),r.Xo(o),r;if(o==197&&h.aa.tf(this.Dj)==0||this.Dj==197&&h.aa.tf(o)==0)return n=o==197?l:this.Se,l=o==197?this.Se:l,o=new h.l,n.A(o),h.Ud.clip(l,o,r,0);if(h.aa.tf(o)==0&&0<h.aa.tf(this.Dj)||0<h.aa.tf(o)&&h.aa.tf(this.Dj)==0){if(r=h.ta.kj(this.vg,l,!1),o==550||o==33)return h.Fg.zG(l,this.Se,r);if(this.Dj==550||this.Dj==33)return h.Fg.zG(this.Se,l,r);throw h.i.Qa()}return this.Fi!=-1&&this.Fi!=2||o!=1607||this.Dj!=1736?this.Fi!=-1&&this.Fi!=2||o!=1736||this.Dj!=1607?null:this.wK(this.Se,l):this.wK(l,this.Se)},g.prototype.wK=function(l,o){var r=l,n=o,a=h.ta.kj(this.vg,o,!1),c=new h.l;n.A(c);var p=new h.l;r.A(p),p.W(2*a,2*a),c.Ea(p),c.W(10*a,10*a),r=l=h.Ud.clip(l,c,0,0),p=new h.ia(0);var f=-1,m=n.Bb;if(m!=null){var b=m.Fk;if(b!=null){f=0,p.Jb(r.I()+r.da());for(var x=new h.l,T=r.Ga();T.$a();)for(;T.Ha();){T.ha().A(x);var I=b.Ro(x);I==1?p.add(1):I==0?p.add(0):(p.add(-1),f++)}}}if(5<o.I()&&(m=(n=o=h.Ud.clip(o,c,0,0)).Bb),0>f&&(f=r.yz()),c=r.I()+n.I(),f*n.I()>Math.log(c)*c*4)return null;c=null,f=n.Ga(),m!=null&&m.Fb!=null&&(c=m.Fb),c==null&&20<n.I()&&(c=h.ta.nE(n)),l=l.Ia(),n=null,m=r.Ga(),b=[0,0,0,0,0,0,0,0,0],x=new h.be(0),T=new h.ig,I=-1;for(var A=0,P=0,j=0<p.size,D=-1;m.$a();){D=m.gb;var F=0;for(I=-1,A=0;m.Ha();){var N=j?h.O.truncate(p.get(P)):-1;P++;var z=m.ha();if(0>N){if(c!=null)for(n==null?n=c.vR(z,a):n.Uo(z,a),N=n.next();N!=-1;N=n.next()){f.Vb(c.ja(N)),N=f.ha();var W=z.Ea(N,null,b,null,a);for(N=0;N<W;N++)x.add(b[N])}else for(f.Zi();f.$a();)for(;f.Ha();)for(N=f.ha(),W=z.Ea(N,null,b,null,a),N=0;N<W;N++)x.add(b[N]);if(0<x.size){x.Vd(0,x.size,function(ce,ue){return ce-ue});var H=0;x.add(1),W=-1,N=0;for(var Y=x.size;N<Y;N++){var Z=x.get(N);if(Z!=H){var se=!1;if(H!=0||Z!=1?(z.ah(H,Z,T),H=T.get()):(H=z,se=!0),2<=F){if(l.Dr(r,D,I,A,F==3),this.QD(o,H.ac(),a)!=1&&this.RD(o,H,a)!=1)return null;l.oc(H,!1),F=1,A=0}else switch(W=this.RD(o,H,a),W){case 1:se?2>F?(I=m.wb()-r.Ba(D),A=1,F=F==0?3:2):A++:(l.oc(H,F==0),F=1);break;case 0:F=0,I=-1,A=0;break;default:return null}H=Z}}}else{if(0>(N=this.QD(o,z.ac(),a)))return null;N==1?(2>F&&(I=m.wb()-r.Ba(D),F=F==0?3:2),A++):(I=-1,A=0)}x.clear(!1)}else N!=0&&N==1&&(F==0?(F=3,I=m.wb()-r.Ba(D)):F==1?(F=2,I=m.wb()-r.Ba(D)):A++)}2<=F&&(l.Dr(r,D,I,A,F==3),I=-1)}return l},g.prototype.QD=function(l,o,r){return h.Dg.wm(l,o,r)},g.prototype.RD=function(l,o,r){var n=o.ac();o=o.wc();var a=h.Dg.wm(l,n,r),c=h.Dg.wm(l,o,r);return a==1&&c==0||a==0&&c==1?-1:a==0||c==0?0:a==1||c==1?1:((a=new h.h).add(n,o),a.scale(.5),(l=h.Dg.wm(l,a,r))==0?0:l==1?1:-1)},g.HB=function(l,o){return o?l:l.Ia()},g.prototype.nJ=function(){return this.yH==null&&(this.yH=this.Se.Ia()),this.yH},g.prototype.qe=function(){},g}();h.HC=k}(q||(q={})),function(h){var k=function(g){function l(){return g!==null&&g.apply(this,arguments)||this}return nt(l,g),l.prototype.getType=function(){return 28},l.local=function(){return l.instance===null&&(l.instance=new l),l.instance},l.prototype.V=function(o,r,n,a,c,p,f){return o instanceof h.aa?(o=new h.Zc(o),this.V(o,r,n,a,c,p,f).next()):new h.xL(o,r,n,a,c,p,f)},l.instance=null,l}(h.Je);h.IC=k}(q||(q={})),function(h){var k=function(){function g(l,o,r,n,a,c,p){this.ya=-1,this.Rd=l,this.Mj=o,this.Ka=r,this.Ki=n,this.CA=a,this.uH=c,this.nd=p}return g.prototype.next=function(){var l=this.Rd.next();return l!=null?(this.ya=this.Rd.La(),this.jL(l)):null},g.prototype.La=function(){return this.ya},g.prototype.jL=function(l){var o=0>=this.uH?h.ta.kj(this.Mj,l,!1):this.uH;return h.IK.V(l,this.Ka,this.Ki,this.CA,o,this.nd)},g.prototype.qe=function(){},g}();h.xL=k}(q||(q={})),function(h){var k;(k=h.NK||(h.NK={}))[k.clipToDomainOnly=1]="clipToDomainOnly",k[k.clipWithHorizon=2]="clipWithHorizon",k[k.foldAndClipWithHorizon=3]="foldAndClipWithHorizon";var g=function(l){function o(){return l!==null&&l.apply(this,arguments)||this}return nt(o,l),o.prototype.getType=function(){return 0},o.local=function(){return o.instance===null&&(o.instance=new o),o.instance},o.prototype.V=function(r,n,a){return r instanceof h.aa?(r=new h.Zc(r),this.V(r,n,a).next()):new h.yL(r,n,a)},o.prototype.transform=function(r,n,a,c){return h.bu.transform(r,n,a,c,!0)},o.prototype.Qt=function(r,n,a,c){return h.bu.Qt(r,n,a,c)},o.instance=null,o}(h.Je);h.Hx=g}(q||(q={})),function(h){var k=function(){function g(l,o,r){this.ya=-1,this.Rd=l,this.MT=o,this.nd=r}return g.prototype.next=function(){var l=this.Rd.next();return l!=null?(this.ya=this.Rd.La(),h.bu.zh(l,this.MT,this.nd)):null},g.prototype.La=function(){return this.ya},g.prototype.qe=function(){},g}();h.yL=k}(q||(q={})),function(h){var k=function(){function l(){}return l.prototype.reset=function(){this.ph=this.xk=-1,this.us=this.kq=!1},l.prototype.AQ=function(o,r,n){for(o.Vb(r,n);o.Ha();){var a=o.ha();if((a=a.Qb())!=0)return o.wb()}for(o.Vb(r,n);o.Ez();)if((a=(a=o.li()).Qb())!=0)return o.wb();return-1},l.prototype.BQ=function(o,r){for(o.Vb(r,-1);o.Ez();)if(o.li().Qb()!=0)return o.wb();return-1},l.prototype.zQ=function(o,r){for(o.Vb(r,-1),o.ha();o.Ha();)if(o.ha().Qb()!=0)return o.wb();return-1},l.prototype.yQ=function(o,r,n,a){if(this.xk=this.AQ(r,n,a),this.xk!=-1){r.Vb(this.xk,-1);var c=r.ha(),p=c.hc(c.fe(o,!1));if(n=h.h.yc(p,o),(a=new h.h).L(p),a.sub(c.ac()),(p=new h.h).L(o),p.sub(c.ac()),this.kq=0>a.wi(p),this.ph=this.zQ(r,this.xk),this.ph!=-1){r.Vb(this.ph,-1);var f=(c=r.ha()).fe(o,!1);f=c.hc(f);var m=h.h.yc(f,o);m>n?this.ph=-1:(a.L(f),a.sub(c.ac()),p.L(o),p.sub(c.ac()),this.us=0>a.wi(p))}this.ph==-1&&(this.ph=this.BQ(r,this.xk),this.ph!=-1&&(r.Vb(this.ph,-1),f=(c=r.ha()).fe(o,!1),f=c.hc(f),(m=h.h.yc(f,o))>n?this.ph=-1:(a.L(f),a.sub(c.ac()),p.L(o),p.sub(c.ac()),this.us=0>a.wi(p),o=this.xk,this.xk=this.ph,this.ph=o,o=this.kq,this.kq=this.us,this.us=o)))}},l.prototype.cO=function(o,r,n,a,c){return n=n.Ga(),this.yQ(o,n,a,c),this.xk!=-1&&this.ph==-1?this.kq:this.xk!=-1&&this.ph!=-1?this.kq==this.us?this.kq:(n.Vb(this.xk,-1),o=n.ha().kg(),n.Vb(this.ph,-1),r=n.ha().kg(),0<=o.wi(r)):r},l}(),g=function(l){function o(){return l!==null&&l.apply(this,arguments)||this}return nt(o,l),o.local=function(){return o.instance===null&&(o.instance=new o),o.instance},o.prototype.getType=function(){return 3},o.prototype.nz=function(r,n,a){var c;if(c===void 0&&(c=!1),r.B())return new h.$l;n=n.D();var p=r,f=r.getType();switch(f==197&&((p=new h.Da).ad(r,!1),f=1736),f){case 33:return this.xI(p,n);case 550:return this.jI(p,n);case 1607:case 1736:return this.bU(p,n,a,c);default:throw h.i.fa("not implemented")}},o.prototype.oz=function(r,n){if(r.B())return new h.$l;n=n.D();var a=r,c=r.getType();switch(c==197&&((a=new h.Da).ad(r,!1),c=1736),c){case 33:return this.xI(a,n);case 550:case 1607:case 1736:return this.jI(a,n);default:throw h.i.fa("not implemented")}},o.prototype.pz=function(r,n,a,c){if(0>c)throw h.i.N();if(r.B())return[];n=n.D();var p=r,f=r.getType();switch(f==197&&((p=new h.Da).ad(r,!1),f=1736),f){case 33:return this.TU(p,n,a,c);case 550:case 1607:case 1736:return this.tU(p,n,a,c);default:throw h.i.fa("not implemented")}},o.prototype.bU=function(r,n,a,c){if(r.getType()==1736&&a&&(a=new h.l,r.A(a),a=h.ta.Wd(null,a,!1),(c?h.hd.Yd(r,n,0):h.hd.Yd(r,n,a))!=0)){var p=new h.$l(n,0,0);return c&&p.WJ(!0),p}var f=r.Ga();p=new h.h;for(var m=a=-1,b=17976931348623157e292,x=0;f.$a();)for(;f.Ha();){var T=f.ha();T=T.hc(T.fe(n,!1));var I=h.h.yc(T,n);I<b?(x=1,p=T,a=f.wb(),m=f.gb,b=I):I==b&&x++}return p=new h.$l(p,a,Math.sqrt(b)),c&&(f.Vb(a,m),T=f.ha(),c=0>h.h.Uq(n,T.ac(),T.wc()),1<x&&((x=new k).reset(),c=x.cO(n,c,r,a,m)),p.WJ(c)),p},o.prototype.xI=function(r,n){return r=r.D(),n=h.h.tb(r,n),new h.$l(r,0,n)},o.prototype.jI=function(r,n){for(var a=r.ub(0),c=r.I(),p=r=0,f=0,m=17976931348623157e292,b=0;b<c;b++){var x=new h.h;a.tc(2*b,x);var T=h.h.yc(x,n);T<m&&(p=x.x,f=x.y,r=b,m=T)}return(n=new h.$l).ey(p,f,r,Math.sqrt(m)),n},o.prototype.TU=function(r,n,a,c){return c==0?[]:(a*=a,r=r.D(),(n=h.h.yc(r,n))<=a?(a=[],(c=new h.$l).ey(r.x,r.y,0,Math.sqrt(n)),a[0]=c):a=[],a)},o.prototype.tU=function(r,n,a,c){if(c==0)return[];var p=r.ub(0),f=r.I();r=[],a*=a;for(var m=0;m<f;m++){var b=p.read(2*m),x=p.read(2*m+1),T=n.x-b,I=n.y-x;(T=T*T+I*I)<=a&&((I=new h.$l).ey(b,x,m,Math.sqrt(T)),r.push(I))}return n=r.length,r.sort(function(A,P){return A.Ka<P.Ka?-1:A.Ka==P.Ka?0:1}),c>=n||(r.length=c),r.slice(0)},o.instance=null,o}(h.Je);h.Ix=g}(q||(q={})),function(h){var k=function(g){function l(){return g!==null&&g.apply(this,arguments)||this}return nt(l,g),l.prototype.getType=function(){return 4},l.prototype.V=function(o,r,n,a,c){return h.am.yB(o,r,n,a,c)},l.local=function(){return l.instance===null&&(l.instance=new l),l.instance},l.prototype.Iu=function(o){return h.Vt.wy(o)},l.prototype.wn=function(o,r,n){h.Vt.CD(o,r,n)},l.instance=null,l}(h.Je);h.zL=k}(q||(q={})),function(h){var k=function(g){function l(){return g!==null&&g.apply(this,arguments)||this}return nt(l,g),l.prototype.getType=function(){return 33},l.prototype.V=function(o,r,n,a,c){return o===1073741824?!h.ud.zB(r,n,a,4,c):h.ud.zB(r,n,a,o,c)},l.local=function(){return l.instance===null&&(l.instance=new l),l.instance},l.prototype.Iu=function(o){return h.Vt.wy(o)},l.prototype.wn=function(o,r,n){h.Vt.CD(o,r,n)},l.instance=null,l}(h.Je);h.dj=k}(q||(q={})),function(h){var k=function(){function g(l,o,r,n){if(this.nd=n,this.rT=r,this.ya=-1,l==null)throw h.i.N();this.yk=l,this.Mj=o}return g.prototype.next=function(){var l;if((l=this.yk.next())!=null){if(this.ya=this.yk.La(),this.nd!=null&&!this.nd.progress(-1,-1))throw h.i.fu("user_canceled");return this.eC(l)}return null},g.prototype.La=function(){return this.ya},g.prototype.eC=function(l){if(l==null)throw h.i.N();return h.Jx.cK(l,this.Mj,this.rT,this.nd)},g.prototype.qe=function(){},g}();h.AL=k}(q||(q={})),function(h){var k=function(g){function l(){return g!==null&&g.apply(this,arguments)||this}return nt(l,g),l.prototype.getType=function(){return 26},l.prototype.V=function(o,r,n,a){return o instanceof h.aa?(o=new h.Zc(o),this.V(o,r,n,a).next()):new h.AL(o,r,n,a)},l.prototype.rs=function(o,r,n,a,c){return 0<(a!==void 0?h.Jx.rs(o,r,n,a,c):h.Jx.rs(o,r,!1,null,n))},l.local=function(){return l.instance===null&&(l.instance=new l),l.instance},l.instance=null,l}(h.Je);h.Yl=k}(q||(q={})),function(h){var k=function(){function c(){this.yq=0}return c.prototype.nX=function(p){this.yq&=-2,this.yq|=p?1:0},c.prototype.Wp=function(){return(1&this.yq)!=0},c.prototype.XF=function(){return this.Wp()?0:1},c}();h.xY=k;var g=function(){},l=function(c,p,f,m){this.x=c,this.y=p,this.Ai=f,this.xm=m},o=function(){function c(p){this.Be=p}return c.prototype.compare=function(p,f,m){return p=p.ja(m),f=this.Be.lf.read(2*f),0>(f-=p=this.Be.lf.read(2*p))?-1:0<f?1:0},c}(),r=function(){function c(p){this.Be=p}return c.prototype.compare=function(p,f,m){f=this.Be.hb[f],p=this.Be.hb[p.ja(m)];var b=f.Wp(),x=p.Wp();m=f.ne.Pe(this.Be.Mo,0);var T=p.ne.Pe(this.Be.Mo,0);return m==T&&((b=.5*((m=Math.min(b?f.ne.na:f.ne.la,x?p.ne.na:p.ne.la))-this.Be.Mo)+this.Be.Mo)==this.Be.Mo&&(b=m),m=f.ne.Pe(b,0),T=p.ne.Pe(b,0)),m<T?-1:m>T?1:0},c}(),n=function(){function c(p,f){this.YI=new h.h,this.parent=p,this.dS=f}return c.prototype.nr=function(p,f,m){var b=this.parent,x=this.dS;m.Vd(p,f,function(T,I){return b.Mh(T,I,x)})},c.prototype.$p=function(p){return p=this.parent.gi.get(p),this.parent.lf.tc(2*(p>>1),this.YI),this.YI.y+(1&p?this.parent.Oj:-this.parent.Oj)},c}(),a=function(){function c(p,f,m,b,x){this.nH=p.description,this.X=p,this.Qg=f,this.Oj=h.ta.kj(this.Qg,p,!1),this.Bo=h.ta.kj(this.Qg,p,!0),this.xA=m,this.oT=this.nH.Aa,this.hb=[],this.po=[],this.mh=new h.jp,this.fb=new h.Yj,this.ke=new h.Md,this.ZG=this.ql=x}return c.prototype.eT=function(){return this.ZG=!0,(!h.aa.Hc(this.X.getType())||this.GE()&&this.DE(!1))&&this.mO()?h.aa.Hc(this.X.getType())?this.pO()?this.X.getType()==1607?this.rO()?2:0:this.sO()?this.tO():0:0:2:0},c.prototype.kC=function(p,f){var m=this.lf.read(2*p);p=this.lf.read(2*p+1);var b=this.lf.read(2*f);f=this.lf.read(2*f+1);var x=!h.Yt.Cv(m,p,b,f,this.Oj*this.Oj);return x||this.X.Db()!=0&&m==b&&p==f},c.prototype.GE=function(){for(var p=this.X,f=p.xf?3:2,m=0,b=p.da();m<b;m++)if(p.Ja(m)<f)return this.ke=new h.Md(1,m,0),!1;return!0},c.prototype.DE=function(p){var f=this.X,m=f.Ga(),b=f.hasAttribute(1);for(f=b?h.ta.wE(this.Qg,f,!1):0;m.$a();)for(;m.Ha();){var x=m.ha();if(!(x.Qb()>this.Oj)){if(p&&b){var T=x.wv(1,0);if(x=x.wv(1,0),Math.abs(x-T)>f)continue}return this.ke=new h.Md(2,m.wb(),-1),!1}}return!0},c.prototype.mO=function(){var p=this.X,f=null;h.aa.Hc(this.X.getType())&&(f=this.X);var m=(this.ZG||this.ql)&&f!=null,b=p.I();this.lf=p.ub(0),this.gi=new h.ia(0),this.gi.Jb(2*b),this.fi=new h.ia(0),this.fi.Jb(2*b),m&&(this.Fl==null&&(this.Fl=new h.ia(0)),this.Fl.Jb(b));for(var x=p=0;x<b;x++)if(this.gi.add(2*x),this.gi.add(2*x+1),this.fi.add(2*x),this.fi.add(2*x+1),m){for(;x>=f.Vc(p);)p++;this.Fl.add(p)}for(new h.Xt().sort(this.fi,0,2*b,new n(this,m)),this.fb.clear(),this.fb.Vo(new o(this)),this.fb.De(b),f=0,b*=2;f<b;f++)if(m=this.fi.get(f),m=(p=this.gi.get(m))>>1,(1&p)==0){if(p=this.fb.addElement(m,-1),(x=this.fb.we(p))!=-1&&!this.kC(this.fb.ja(x),m))return this.ke=new h.Md(3,m,this.fb.ja(x)),!1;var T=this.fb.lb(p);if(T!=-1&&!this.kC(this.fb.ja(T),m))return this.ke=new h.Md(3,m,this.fb.ja(T)),!1}else if(p=this.fb.search(m,-1),x=this.fb.we(p),T=this.fb.lb(p),this.fb.vd(p,-1),x!=-1&&T!=-1&&!this.kC(this.fb.ja(x),this.fb.ja(T)))return this.ke=new h.Md(3,this.fb.ja(x),this.fb.ja(T)),!1;return!0},c.prototype.pO=function(){return 10>this.X.I()?this.nO():this.oO()},c.prototype.oO=function(){var p=new h.gd;p.Ib(this.X);var f=new h.Md;return!h.$t.kI(!1,p,this.Oj,f,this.nd)||(f.Jo=p.Ua(f.Jo),f.Ko=p.Ua(f.Ko),this.ke.Wt(f),!1)},c.prototype.nO=function(){var p=this.X,f=p.Ga();for(p=p.Ga();f.$a();)for(;f.Ha();){var m=f.ha();if(!f.Qn()||!f.$S()){p.BW(f);do for(;p.Ha();){var b=p.ha();if((b=m.zr(b,this.Oj,!0))!=0)return this.ke=new h.Md(b==2?5:4,f.wb(),p.wb()),!1}while(p.$a())}}return!0},c.prototype.sO=function(){var p=this.X;this.hb.length=0,this.po.length=0,this.Zf=p.Ga(),this.Zf.JB();var f=new h.ia(0);f.Jb(10);var m=NaN,b=0,x=0;for(p=2*p.I();x<p;x++){var T=this.fi.get(x);if(!(1&(T=this.gi.get(T)))){T>>=1;var I=this.lf.read(2*T),A=this.lf.read(2*T+1);if(f.size!=0&&(I!=m||A!=b)){if(!this.RI(f))return!1;f!=null&&f.clear(!1)}f.add(T),m=I,b=A}}return!!this.RI(f)},c.prototype.rO=function(){for(var p=this.X,f=Array(p.da()),m=0,b=p.da();m<b;m++)f[m]=p.Nn(m);b=new g;var x=new h.h;m=this.fi.get(0);var T=(m=this.gi.get(m))>>1;this.lf.tc(2*T,x);var I=f[m=this.Fl.get(T)],A=p.Ba(m),P=p.Vc(m)-1;b.el=T==A||T==P,b.ny=this.ql?!I&&b.el:b.el,b.Ai=m,b.x=x.x,b.y=x.y,b.xm=T;for(var j=new g,D=1,F=this.fi.size;D<F;D++)if(m=this.fi.get(D),(1&(m=this.gi.get(m)))==0){T=m>>1,this.lf.tc(2*T,x),(m=this.Fl.get(T))!=b.Ai&&(I=f[m],A=p.Ba(m),P=p.Vc(m)-1);var N=T==A||T==P,z=this.ql?!I&&b.el:b.el;if(j.x=x.x,j.y=x.y,j.Ai=m,j.xm=T,j.ny=z,j.el=N,j.x==b.x&&j.y==b.y){if(this.ql){if(!(j.ny&&b.ny||j.Ai==b.Ai&&(j.el||b.el)))return this.ke=new h.Md(8,j.xm,b.xm),!1}else if(!j.el||!b.el)return this.ke=new h.Md(5,j.xm,b.xm),!1}m=b,b=j,j=m}return!0},c.prototype.JE=function(){for(var p=this.X,f=[],m=-1,b=!1,x=0,T=p.da();x<T;x++)p.Ev(x)&&(b=!1,m++,x<T-1&&(p.Ev(x+1)||(b=!0))),f[x]=b?m:-1;b=new h.h,x=this.fi.get(0);var I=(x=this.gi.get(x))>>1;this.lf.tc(2*I,b),x=this.Fl.get(I),m=new l(b.x,b.y,x,I,f[x]),p=[];var A=1;for(T=this.fi.size;A<T;A++)if(x=this.fi.get(A),(1&(x=this.gi.get(x)))==0){if(I=x>>1,this.lf.tc(2*I,b),x=this.Fl.get(I),(x=new l(b.x,b.y,x,I,f[x])).x==m.x&&x.y==m.y){if(x.Ai==m.Ai)return this.ke=new h.Md(9,x.xm,m.xm),!1;0<=f[x.Ai]&&f[x.Ai]==f[m.Ai]&&(p.length!=0&&p[p.length-1]==m||p.push(m),p.push(x))}m=x}if(p.length==0)return!0;for(x=new h.jp(!0),h.O.$u(f,-1),b=-1,(A=new h.h).Rc(),m=0,T=p.length;m<T;m++){(I=p[m]).x==A.x&&I.y==A.y||(b=x.Ph(0),A.x=I.x,A.y=I.y);var P=f[I.Ai];P==-1&&(P=x.Ph(2),f[I.Ai]=P),x.addElement(P,b),x.addElement(b,P)}for((T=new h.ia(0)).Jb(10),m=x.je;m!=-1;m=x.qz(m))if(!(1&(p=x.PF(m)))&&2&p){for(p=-1,T.add(m),T.add(-1);0<T.size;){if(b=T.Fc(),T.If(),A=T.Fc(),T.If(),(1&(I=x.PF(A)))!=0){p=2&I?A:b;break}for(x.fX(A,1|I),I=x.rc(A);I!=-1;I=x.lb(I))(P=x.getData(I))!=b&&(T.add(P),T.add(A))}if(p!=-1){for(x=-1,m=0,T=f.length;m<T;m++)if(f[m]==p){x=m;break}return this.ke=new h.Md(10,x,-1),!1}}return!0},c.prototype.tO=function(){var p=this.X;if(0>=p.Ke())return this.ke=new h.Md(6,p.da()==1?1:-1,-1),0;if(p.da()==1)return this.ql&&!this.JE()?0:2;this.to=h.ia.qf(p.da(),0),this.JA=h.ia.qf(p.da(),-1);for(var f=-1,m=0,b=0,x=p.da();b<x;b++){var T=p.Ir(b);if(this.to.write(b,0>T?0:256),0<T)f=b,m=T;else{if(T==0)return this.ke=new h.Md(6,b,-1),0;if((0>f||m<Math.abs(T))&&(this.ke=new h.Md(7,b,-1),this.ql))return 0;this.JA.write(b,f)}}for(this.dt=p.da(),this.Om=new h.ia(0),this.Om.Jb(10),x=p.I(),this.Mo=NaN,(p=new h.ia(0)).Jb(10),this.Qq=h.ia.qf(x,-1),this.Hw=h.ia.qf(x,-1),this.zj!=null?this.zj.clear(!1):this.zj=new h.ia(0),this.zj.Jb(10),this.fb.clear(),this.fb.Vo(new r(this)),f=0,x*=2;0<this.dt&&f<x;f++)if(m=this.fi.get(f),(1&(m=this.gi.get(m)))==0){if(m>>=1,(b=this.lf.read(2*m+1))!=this.Mo&&p.size!=0){if(!this.ut(p))return 0;p!=null&&p.clear(!1)}p.add(m),this.Mo=b}return 0<this.dt&&!this.ut(p)?0:this.ql?this.ke.Jj==0&&this.JE()?2:0:this.ke.Jj==0?2:1},c.prototype.RI=function(p){if(p.size==1)return!0;for(var f=0,m=p.size;f<m;f++){var b=p.get(f);this.Zf.Vb(b);var x=this.Zf.li();this.hb.push(this.Su(x,b,this.Zf.gb,!0)),this.Zf.ha(),x=this.Zf.ha(),this.hb.push(this.Su(x,b,this.Zf.gb,!1))}var T=this;for(this.hb.sort(function(P,j){return T.XP(P,j)}),(b=this.mh.je)==-1&&(b=this.mh.Ph(0)),this.mh.fn(this.hb.length),f=0,m=this.hb.length;f<m;f++)this.mh.addElement(b,f);f=!0;for(var I=m=-1;f&&(f=!1,(x=this.mh.rc(b))!=-1);)for(var A=this.mh.lb(x);A!=-1;)if(m=this.mh.getData(x),I=this.mh.getData(A),(m=this.hb[m].Io)!=(I=this.hb[I].Io))x=A,A=this.mh.lb(x);else if(f=!0,this.mh.jd(b,x),x=this.mh.we(A),(A=this.mh.jd(b,A))==-1||x==-1)break;if(f=this.mh.bs(b),this.mh.LE(b),0<f)return this.ke=new h.Md(5,m,I),!1;for(f=0,m=p.size;f<m;f++)this.vB(this.hb[f]);return this.hb.length=0,!0},c.prototype.ut=function(p){for(var f=0,m=p.size;f<m;f++){var b=p.get(f),x=this.Qq.read(b);if(x!=-1){var T=this.fb.ja(x);this.zj.add(T),this.fb.vd(x,-1),this.vB(this.hb[T]),this.hb[T]=null,this.Qq.write(b,-1)}(x=this.Hw.read(b))!=-1&&(T=this.fb.ja(x),this.zj.add(T),this.fb.vd(x,-1),this.vB(this.hb[T]),this.hb[T]=null,this.Hw.write(b,-1))}for(f=0,m=p.size;f<m;f++){if(b=p.get(f),this.Zf.Vb(b),(x=this.Zf.li()).na>x.la){var I=this.Zf.wb(),A=this.Su(x,b,this.Zf.gb,!0);0<this.zj.size?(T=this.zj.Fc(),this.zj.If(),this.hb[T]=A):(T=this.hb.length,this.hb.push(A)),x=this.fb.addElement(T,-1),this.Qq.read(I)==-1?this.Qq.write(I,x):this.Hw.write(I,x),!(3&this.to.read(this.Zf.gb))&&this.Om.add(x)}this.Zf.ha(),(x=this.Zf.ha()).na<x.la&&(I=this.Zf.ik(),A=this.Su(x,b,this.Zf.gb,!1),0<this.zj.size?(T=this.zj.Fc(),this.zj.If(),this.hb[T]=A):(T=this.hb.length,this.hb.push(A)),x=this.fb.addElement(T,-1),this.Qq.read(I)==-1?this.Qq.write(I,x):this.Hw.write(I,x),!(3&this.to.read(this.Zf.gb))&&this.Om.add(x))}for(f=0,m=this.Om.size;f<m&&0<this.dt;f++)if(x=this.Om.get(f),(3&this.to.read(this.hb[this.fb.ja(x)].IA))==0){p=-1,b=this.fb.we(x);var P=x;A=null,T=-1;for(var j=0;b!=-1&&(T=this.fb.ja(b),T=(A=this.hb[T]).IA,(3&(j=this.to.read(T)))==0);)P=b,b=this.fb.we(b);b==-1?(I=1,b=P):(p=(3&j)==1?T:this.JA.read(T),I=A.XF()!=0?0:1,b=this.fb.lb(b));do{if(T=this.fb.ja(b),T=(A=this.hb[T]).IA,(3&(P=this.to.read(T)))==0){if(I!=A.XF())return this.ke=new h.Md(6,T,-1),!1;if(P=252&P|(j=I==0||A.Wp()?2:1),this.to.write(T,j),j==2&&this.ke.Jj==0&&this.JA.read(T)!=p&&(this.ke=new h.Md(7,T,-1),this.ql))return!1;if(this.dt--,this.dt==0)return!0}(3&P)==1&&(p=T),P=b,b=this.fb.lb(b),I=I!=0?0:1}while(P!=x)}return this.Om!=null?this.Om.clear(!1):this.Om=new h.ia(0),!0},c.prototype.Su=function(p,f,m,b){if(p.getType()!=322)throw h.i.Qa();return(p=this.sP(p)).Io=f,p.IA=m,p.yq=0,p.nX(b),p},c.prototype.sP=function(p){if(0<this.po.length){var f=this.po[this.po.length-1];--this.po.length,p.copyTo(f.ne)}else(f=new k).ne=h.SC.jg(p);return f},c.prototype.vB=function(p){p.ne.getType()==322&&this.po.push(p)},c.prototype.kU=function(){for(var p=this.X.I(),f=new h.ia(0),m=0;m<p;m++)f.add(m);var b=this;for(f.Vd(0,p,function(x,T){return b.Ou(x,T)}),m=1;m<p;m++)if(this.Ou(f.get(m-1),f.get(m))==0)return this.ke=new h.Md(3,f.get(m-1),f.get(m)),0;return 2},c.prototype.JV=function(){return this.GE()&&this.DE(!0)?2:0},c.prototype.oV=function(){return this.eT()},c.prototype.pU=function(){for(var p=this.X.I(),f=new h.ia(0),m=0;m<p;m++)f.add(m);var b=this;f.Vd(0,p,function(P,j){return b.PO(P,j)});var x=Array(p);for(h.O.$u(x,!1),x[f.get(0)]=!0,m=1;m<p;m++){var T=f.get(m-1),I=f.get(m);this.Ou(T,I)==0?x[I]=!1:x[I]=!0}f=this.X.Ia(),T=this.X,I=0;var A=1;for(m=0;m<p;m++)x[m]?A=m+1:(I<A&&f.Fd(T,I,A),I=m+1);return I<A&&f.Fd(T,I,A),f.Ch(2,this.Bo),f},c.prototype.NV=function(){var p=this.X,f=p.Ga(),m=p.Ga(),b=this.X.Ia(),x=this.X,T=p.hasAttribute(1),I=T?h.ta.wE(this.Qg,p,!0):0,A=new h.ia(0),P=new h.ia(0);for(A.Jb(h.O.truncate(p.I()/2+1)),P.Jb(h.O.truncate(p.I()/2+1));f.$a();)if(m.$a(),!(2>p.Ja(f.gb))){m.EW();for(var j,D,F=!0;f.Ha();){var N=f.ha(),z=m.li();if(f.wb()>m.wb())break;F&&(A.add(f.wb()),P.add(m.ik()),F=!1),D=A.Fc();var W=f.ik();if(1<W-D){var H=new h.h;H.uc(p.Na(D),p.Na(W)),j=H.length()}else j=N.Qb();D=P.Fc(),1<(W=m.wb())-D?((H=new h.h).uc(p.Na(D),p.Na(W)),D=H.length()):D=z.Qb(),j>this.Bo?A.add(f.ik()):T&&(j=p.Uc(1,A.Fc(),0),N=N.gv(1,0),Math.abs(N-j)>I&&A.add(f.ik())),D>this.Bo?P.add(m.wb()):T&&(j=p.Uc(1,P.Fc(),0),N=z.gv(1,0),Math.abs(N-j)>I&&P.add(m.wb()))}if(A.Fc()<P.Fc()?A.size>P.size?A.If():P.If():(A.Fc()!=P.Fc()&&P.If(),P.If()),2<=P.size+A.size){for(F=new h.Sa,z=0,N=A.size;z<N;z++)x.ve(A.get(z),F),z==0?b.nf(F):b.lineTo(F);for(z=P.size-1;0<z;z--)x.ve(P.get(z),F),b.lineTo(F);x.dc(f.gb)?b.Ap():0<P.size&&(x.ve(P.get(0),F),b.lineTo(F))}A!=null&&A.clear(!1),P!=null&&P.clear(!1)}return b.Ch(2,this.Bo),b},c.prototype.rV=function(){return this.DX()},c.prototype.DX=function(){return this.X.getType()==1736&&this.X.In()==1?h.Fg.Mk(this.X,this.Bo,!0,!1,this.nd):(this.Hi=new h.gd,this.Hi.Ib(this.X),this.Hi.fd!=0&&(this.xA!=1&&h.Tk.V(this.Hi,this.Bo,this.nd,!0),this.X.getType()==1736&&h.rn.V(this.Hi,this.Hi.ld,this.xA,!1,this.nd)),this.X=this.Hi.Ne(this.Hi.ld),this.X.getType()==1736&&(this.X.fm(),this.X.Yo(0)),this.X.Ch(2,this.Bo),this.X)},c.rs=function(p,f,m,b,x){if(b!=null&&(b.Jj=0,b.Jo=-1,b.Ko=-1),p.B())return 1;var T=p.getType();if(T==33)return 1;var I=h.ta.kj(f,p,!1);if(T==197)return f=new h.l,p.A(f),f.Bi(I)?(b!=null&&(b.Jj=2,b.Jo=-1,b.Ko=-1),0):1;if(h.aa.yd(T))return(I=new h.Ta(p.description)).oc(p,!0),c.rs(I,f,m,b,x);var A=p.om(I);if((m=m?-1:A)!=-1)return m;if(f=new c(p,f,m,x,!1),T==550)m=f.kU();else if(T==1607)m=f.JV();else{if(T!=1736)throw h.i.Qa();m=f.oV()}return p.Ch(m,I),b!=null&&m==0&&b.Wt(f.ke),m},c.cK=function(p,f,m,b){if(p.B())return p;var x=p.getType();if(x==33)return p;var T=h.ta.kj(f,p,!1);if(x==197)return f=new h.l,p.A(f),f.Bi(T)?p.Ia():p;if(h.aa.yd(x))return(x=new h.Ta(p.description)).oc(p,!0),c.cK(x,f,m,b);if(T=p.om(T),(m=m?-1:T)==2)return p;if(p=new c(p,f,m,b,!1),x==550)p=p.pU();else if(x==1607)p=p.NV();else{if(x!=1736)throw h.i.Qa();p=p.rV()}return p},c.prototype.Mh=function(p,f,m){if(p==f)return 0;p=this.gi.get(p);var b=this.gi.get(f);f=p>>1;var x=b>>1,T=new h.h,I=new h.h;return this.lf.tc(2*f,T),T.y+=1&p?this.Oj:-this.Oj,this.lf.tc(2*x,I),I.y+=1&b?this.Oj:-this.Oj,(p=T.compare(I))==0&&m?0>(m=this.Fl.get(f)-this.Fl.get(x))?-1:0<m?1:0:p},c.prototype.Ou=function(p,f){if(p==f)return 0;var m=this.X,b=m.Na(p),x=m.Na(f);if(b.x<x.x)return-1;if(b.x>x.x)return 1;if(b.y<x.y)return-1;if(b.y>x.y)return 1;for(b=1;b<this.oT;b++){x=this.nH.kd(b);for(var T=h.ra.Va(x),I=0;I<T;I++){var A=m.Uc(x,p,I),P=m.Uc(x,f,I);if(A<P)return-1;if(A>P)return 1}}return 0},c.prototype.PO=function(p,f){var m=this.Ou(p,f);return m==0?p<f?-1:1:m},c.prototype.XP=function(p,f){if(p===f)return 0;var m=p.ne.kg();p.Wp()&&m.Sq(),p=f.ne.kg(),f.Wp()&&p.Sq(),f=m.qu();var b=p.qu();return b==f?(f=m.wi(p),Math.abs(f)<=8881784197001252e-31*(Math.abs(p.x*m.y)+Math.abs(p.y*m.x))&&(f--,f++),0>f?1:0<f?-1:0):f<b?-1:1},c}();h.Jx=a}(q||(q={})),function(h){var k=function(g){function l(){return g!==null&&g.apply(this,arguments)||this}return nt(l,g),l.prototype.getType=function(){return 30},l.local=function(){return l.instance===null&&(l.instance=new l),l.instance},l.prototype.V=function(o,r,n,a){return o instanceof h.aa?(o=new h.Zc(o),r=new h.Zc(r),this.V(o,r,n,a).next()):new h.BL(o,r,n,a)},l.ep=function(o,r,n,a){var c=o.Db(),p=r.Db();if(o.B()&&r.B())return c>p?o:r;if(o.B())return r;if(r.B())return o;var f=new h.l,m=new h.l,b=new h.l;return o.A(f),r.A(m),b.K(f),b.Zb(m),f=h.ta.Wd(n,b,!0),m=o.getType(),b=r.getType(),m==33&&b==33?l.aV(o,r,f):m!=b?0<c||0<p?c>p?o:r:m==550?l.iI(o,r,f):l.iI(r,o,f):h.Fg.ep(o,r,n,a)},l.aV=function(o,r,n){n=n*Math.sqrt(2)*1.00001,n*=n;var a=o.D(),c=r.D(),p=new h.de(o.description);return h.h.yc(a,c)>n&&(p.add(o),p.add(r)),p},l.iI=function(o,r,n){var a=o.ub(0),c=o.I(),p=r.D(),f=o.Ia();n=n*Math.sqrt(2)*1.00001;var m=new h.l;if(o.A(m),m.W(n,n),m.contains(p)){n*=n,m=!1;for(var b=[],x=0;x<c;x++)b[x]=!1;for(x=0;x<c;x++){var T=a.read(2*x),I=a.read(2*x+1);(T-=p.x)*T+(I-=p.y)*I<=n&&(m=!0,b[x]=!0)}if(m)for(x=0;x<c;x++)b[x]||f.Fd(o,x,x+1);else f.Fd(o,0,c),f.add(r)}else f.Fd(o,0,c),f.add(r);return f},l.instance=null,l}(h.Je);h.Kx=k}(q||(q={})),function(h){var k=function(){function g(l,o,r,n){this.ts=o==null,this.ya=-1,this.Rd=l,this.vg=r,this.NT=o.next(),this.Ub=n}return g.prototype.next=function(){return this.ts?null:(l=this.Rd.next())!=null?(this.ya=this.Rd.La(),h.Kx.ep(l,this.NT,this.vg,this.Ub)):null;var l},g.prototype.La=function(){return this.ya},g.prototype.qe=function(){},g}();h.BL=k}(q||(q={})),function(h){var k=function(){function o(){}return o.prototype.Fz=function(){this.$y=null,this.Ax=-1,this.AK=!1},o}(),g=function(){function o(){this.Gr=0,this.pj=[]}return o.prototype.pN=function(r){this.Gr+=r.Ax,this.pj.push(r)},o.prototype.TV=function(){this.Gr-=this.pj[this.pj.length-1].Ax,--this.pj.length},o.prototype.my=function(){return this.pj[this.pj.length-1]},o.prototype.Nb=function(r){return r===this},o}(),l=function(){function o(r,n,a){this.ya=-1,this.Ic=!1,this.AH=[!1,!1,!1,!1],this.uq=[0,0,0,0],this.jA=!1,this.zk=-1,this.iq=0,this.bo=-1,this.Do=[],this.Rd=r,this.vg=n,this.Ub=a}return o.dE=function(r){var n=[],a=0;for(r=Object.keys(r);a<r.length;a++)n.push(Number(r[a]));return n.sort(function(c,p){return c-p}),n},o.prototype.fG=function(r){var n=this.Do[r],a=o.dE(n)[0],c=n[a],p=c.my().$y;return c=c.my().AK,delete n[a],c&&(p=h.Yl.local().V(p,this.vg,!1,this.Ub),r==0&&p.getType()==33&&(r=new h.de(p.description),p.B()||r.add(p),p=r)),p},o.prototype.next=function(){if(this.Ic&&this.bo==this.zk)return null;for(;!this.qK(););if(this.zk==-1)return null;if(this.jA){for(this.bo++;;){if(this.bo>this.zk||0>this.bo)throw h.i.Qa();if(this.AH[this.bo])break}return this.ya++,this.fG(this.bo)}return this.ya=0,this.bo=this.zk,this.fG(this.zk)},o.prototype.La=function(){return this.ya},o.prototype.qK=function(){if(this.Ic)return!0;var r=null;if(this.Rd!=null&&(r=this.Rd.next())==null&&(this.Ic=!0,this.Rd=null),h.mp.zp(this.Ub),r!=null){var n=r.Db();this.AH[n]=!0,n>=this.zk&&!this.jA&&(this.ND(n,!1,r),n>this.zk&&!this.jA&&this.zW(n))}if(0<this.iq)for(n=0;n<=this.zk;n++)for(;1<this.uq[n]&&(r=this.FO(n)).length!=0;)r=h.Fg.VP(r,this.vg,this.Ub),this.ND(n,!0,r);return this.Ic},o.prototype.FO=function(r){for(var n=[],a=[],c=this.Do[r],p=o.dE(c),f=0;f<p.length;f++){var m=p[f],b=c[m];if(this.Ic||1e4<b.Gr&&1<b.pj.length){for(this.uq[r]-=b.pj.length,this.iq-=b.pj.length;0<b.pj.length;)n.push(b.my().$y),b.TV();a.push(m)}}for(f=0;f<a.length;f++)delete c[a[f]];return n},o.prototype.zW=function(r){for(var n=0;n<r;n++)this.Do[n]=[],this.iq-=this.uq[n],this.uq[n]=0},o.prototype.ND=function(r,n,a){var c=new k;if(c.Fz(),c.$y=a,a=o.eS(a),c.Ax=a,a=o.cS(a),r+1>this.Do.length)for(var p=0,f=Math.max(2,r+1);p<f;p++)this.Do.push([]);(p=this.Do[r][a])===void 0&&(p=new g,this.Do[r][a]=p),c.AK=n,p.pN(c),this.uq[r]++,this.iq++,this.zk=Math.max(this.zk,r)},o.cS=function(r){return 0<r?h.O.truncate(Math.log(r)/Math.log(4)+.5):0},o.eS=function(r){var n=r.getType();if(h.aa.xj(n))return r.I();if(n==33)return 1;if(n==197)return 4;if(h.aa.yd(n))return 2;throw h.i.Qa()},o.prototype.qe=function(){this.qK()},o}();h.DL=l}(q||(q={})),function(h){var k=function(g){function l(){return g!==null&&g.apply(this,arguments)||this}return nt(l,g),l.prototype.getType=function(){return 1},l.prototype.V=function(o,r,n,a){return a===void 0?new h.DL(o,r,n):this.gQ(o,r,n,a)},l.prototype.gQ=function(o,r,n,a){return o=new h.Zc([o,r]),this.V(o,n,a).next()},l.local=function(){return l.instance===null&&(l.instance=new l),l.instance},l.instance=null,l}(h.Je);h.Gh=k}(q||(q={})),function(h){var k,g;(g=k||(k={}))[g.nextPath=0]="nextPath",g[g.nextSegment=1]="nextSegment",g[g.iterate=2]="iterate",k=function(){function l(o,r,n,a){this.Ts=new h.l,this.GT=o,this.HT=r,this.mq=a,this.uo=-1,this.rl=!1;var c=o.Bb;c!=null&&(c=a?c.zo:c.Fb)!=null&&(this.Ic=!1,this.qa=n,this.Fb=c,this.xw=this.Fb.getIterator(),this.nq=this.rl=!0,this.Xb=0,a?this.uo=r.da():this.sd=r.Ga()),this.rl||(c=r.Bb)!=null&&(c=a?c.zo:c.Fb)!=null&&(this.Ic=!1,this.qa=n,this.Fb=c,this.xw=this.Fb.getIterator(),this.rl=!0,this.nq=!1,this.Xb=0,a?this.uo=o.da():this.sd=o.Ga()),this.rl||(this.ci=a?h.ta.mR(o,r,n,1<=o.om(0),1<=r.om(0)):h.ta.lR(o,r,n))}return l.prototype.next=function(){if(this.rl){if(this.Ic)return!1;for(var o=!0;o;)switch(this.Xb){case 0:o=this.xU();break;case 1:o=this.yU();break;case 2:o=this.Uz();break;default:throw h.i.fa("internal error")}return!this.Ic}return this.ci!=null&&this.ci.next()},l.prototype.nl=function(){return this.rl?this.nq?this.Fb.ja(this.Fs):this.mq?this.uo:this.sd.wb():this.ci.nl(this.ci.Vf)},l.prototype.hl=function(){return this.rl?this.nq?this.mq?this.uo:this.sd.wb():this.Fb.ja(this.Fs):this.ci.hl(this.ci.Af)},l.prototype.uz=function(){if(!this.mq)throw h.i.fa("internal error");return this.rl?this.nq?this.Fb.GF(this.Fs):this.Ts:this.ci.uz(this.ci.Vf)},l.prototype.az=function(){if(!this.mq)throw h.i.fa("internal error");return this.rl?this.nq?this.Ts:this.Fb.GF(this.Fs):this.ci.az(this.ci.Af)},l.prototype.xU=function(){return this.mq?--this.uo==-1?(this.Ic=!0,!1):(this.nq?this.HT.Rj(this.uo,this.Ts):this.GT.Rj(this.uo,this.Ts),this.xw.Xi(this.Ts,this.qa),this.Xb=2,!0):this.sd.$a()?(this.Xb=1,!0):(this.Ic=!0,!1)},l.prototype.yU=function(){if(!this.sd.Ha())return this.Xb=0,!0;var o=this.sd.ha();return this.xw.Uo(o,this.qa),this.Xb=2,!0},l.prototype.Uz=function(){return this.Fs=this.xw.next(),this.Fs==-1&&(this.Xb=this.mq?0:1,!0)},l}(),h.Zl=k}(q||(q={})),function(h){(h=h.OL||(h.OL={}))[h.enumClosed=1]="enumClosed",h[h.enumHasNonlinearSegments=2]="enumHasNonlinearSegments",h[h.enumOGCStartPolygon=4]="enumOGCStartPolygon",h[h.enumCalcMask=4]="enumCalcMask"}(q||(q={})),function(h){h.QC=function(){function k(){}return k.tb=function(g,l,o,r,n,a,c,p,f){var m=[0,0,0],b=[0,0,0],x=[0,0,0],T=[0,0,0,0],I=new h.ga(0),A=new h.ga(0),P=new h.ga(0);if(c!=null||p!=null||f!=null)if(h.s.ti(l))h.Yg.tb(g,o,r,n,a,c,p,f);else{n=h.F.ba(n),o=h.F.ba(o);var j=h.F.ba(n-o);if(h.s.Y(r,a)&&(h.s.Y(o,n)||h.s.Y(h.s.P(r),1.570796326794897)))c!=null&&(c.u=0),p!=null&&(p.u=0),f!=null&&(f.u=0);else{if(h.s.Y(r,-a)){if(h.s.Y(h.s.P(r),1.570796326794897))return c!=null&&(c.u=2*h.F.Ah(g,l)),p!=null&&(p.u=0<r?h.F.ba(3.141592653589793-h.F.ba(n)):h.F.ba(n)),void(f!=null&&(f.u=0<r?h.F.ba(n):h.F.ba(3.141592653589793-h.F.ba(n))));h.s.Y(h.s.P(j),3.141592653589793)&&(c!=null&&(c.u=2*h.F.Ah(g,l)),p!=null&&(p.u=0),f!=null&&(f.u=0))}else if(h.s.Y(h.s.P(r),1.570796326794897)||h.s.Y(h.s.P(a),1.570796326794897)||h.s.Y(o,n)||h.s.Y(h.s.P(j),3.141592653589793)||h.s.Cd(r))return void h.Wk.tb(g,l,o,r,n,a,c,p,f);var D=Math.sqrt(1-l);n=h.F.ba(n-o),o=0,h.F.cl(1,l,r,o,0,I,A,P),m[0]=I.u,m[1]=A.u,m[2]=P.u,h.F.cl(1,l,a,n,0,I,A,P),b[0]=I.u,b[1]=A.u,b[2]=P.u,x[0]=0,x[1]=0,x[2]=-1*l*h.F.n(1,l,r)*Math.sin(r),0>n?h.F.Wq(x,b,m,T,0):h.F.Wq(x,m,b,T,0),A=[0,0,0],P=[0,0,0];var F=[0,0,0];m=[0,0,0],I=[0,0,0];var N=Math.acos(T[2]/1),z=1-l,W=Math.tan(N),H=1+W*W/z,Y=2*x[2]*W/z;for(z=(-Y+(W=Math.sqrt(Y*Y-4*H*(x[2]*x[2]/z-1))))/(H*=2),Y=(-Y-W)/H,W=Math.tan(N),N=(z+Y)/2,x=((H=W*z+x[2])+(W*Y+x[2]))/2,W=h.F.gp(z-N,H-x),z=x/D*1.570796326794897,Y=0;100>Y&&(H=(H=h.F.w(l,z))*H/Math.cos(z)*(Math.sin(z)-x*H/(1-l)),!h.s.Cd(H));Y++)z-=H;x=h.F.n(1,l,z)*Math.cos(z),W=1-W/(x=Math.sqrt((x-N)*(x+N))),W*=2-W,H=h.F.on(A),N=h.F.on(P),z=h.F.on(F);var Z=h.F.St(F,A);Y=h.F.St(F,P),h.F.zx(F,A,m),h.F.zx(F,P,I),A=Math.acos(Z/(z*H)),P=Math.acos(Y/(z*N)),P*=h.s.Mb(1,h.F.St(m,I)),(1.570796326794897<=h.s.P(A)&&1.570796326794897<=h.s.P(P)||3.141592653589793<h.s.P(A-P))&&(A=(3.141592653589793-h.s.P(A))*h.s.Mb(1,A),P=(3.141592653589793-h.s.P(P))*h.s.Mb(1,P)),m=h.F.Qj(W,P),I=h.F.q(x,W,h.F.Qj(W,A)),m=h.F.q(x,W,m),m=h.s.P(m-I)*g,A=new h.ga(0),P=new h.ga(0),F=T[1]/1,F*=-h.s.Mb(1,j),I=Math.acos(F)*h.s.Mb(1,j),k.rf(g,l,o,r,m,I,A,P),h.s.Y(n,A.u)&&h.s.Y(a,P.u)||(W=h.F.gp(h.F.ba(n-A.u),a-P.u),k.rf(g,l,o,r,m,h.F.ba(I+3.141592653589793),A,P),(H=h.F.gp(h.F.ba(n-A.u),a-P.u))<W&&(I=h.F.ba(I+3.141592653589793))),A=[0,0,0,0],P=[0,0,0,0],W=[0,0,0],g=[0,0,0],o=[0,0,0],r=[0,0,0],F=[0,0,0],(x=[0,0,0])[0]=0,x[1]=0,x[2]=D,W[0]=0,W[1]=0,W[2]=0,h.F.Wq(W,x,b,A,0),h.s.Cd(a)?(g[0]=b[0],g[1]=b[1],g[2]=1,o[0]=1*Math.cos(n)-1*Math.sin(n),o[1]=1*Math.sin(n)+1*Math.cos(n)):(l=h.F.n(1,l,a)*Math.cos(a),g[0]=0,g[1]=0,b[2]+=Math.tan(1.570796326794897-h.s.P(a))*l*h.s.Mb(1,a),o[0]=l*Math.cos(n)-l*Math.sin(n),o[1]=l*Math.sin(n)+l*Math.cos(n)),o[2]=b[2],h.F.Wq(b,o,g,P,1),h.F.zx(P,A,r),h.F.zx(P,T,F),F=h.F.St(r,F)/(h.F.on(r)*h.F.on(F)),F*=h.s.Mb(1,j),n=Math.acos(F)*-h.s.Mb(1,j),(0<I&&0<n||0>I&&0>n)&&(n=h.F.ba(n+3.141592653589793)),c!=null&&(c.u=m),p!=null&&(p.u=I),f!=null&&(f.u=n)}}},k.rf=function(g,l,o,r,n,a,c,p){var f=[0,0,0],m=[0,0,0],b=[0,0,0],x=[0,0,0],T=[0,0,0],I=[0,0,0],A=[0,0,0],P=[0,0,0,0],j=new h.ga(0),D=new h.ga(0),F=new h.ga(0),N=new h.ga(0),z=new h.ga(0),W=new h.ga(0);if(c!=null&&p!=null)if(h.s.ti(l))h.Yg.rf(g,o,r,n,a,c,p);else if(h.s.Cd(n))c!=null&&(c.u=o),p!=null&&(p.u=r);else if(a=h.F.ba(a),0>n&&(n=h.s.P(n),a=h.F.ba(a+3.141592653589793)),o=h.F.ba(o),r=h.F.ba(r),1.570796326794897<h.s.P(r)&&(o=h.F.ba(o+3.141592653589793),r=h.s.Mb(3.141592653589793,r)-r),h.s.Y(h.s.P(r),1.570796326794897)||h.s.Cd(r)||h.s.Cd(a)||h.s.Y(h.s.P(a),3.141592653589793))h.Wk.rf(g,l,o,r,n,a,c,p);else{var H=Math.sqrt(1-l);for(g=n/g,h.F.cl(1,l,r,0,0,N,z,W),f[0]=N.u,f[1]=z.u,f[2]=z.u,A[0]=0,A[1]=0,A[2]=-1*l*h.F.n(1,l,r)*Math.sin(r),N=h.F.n(1,l,r),z=h.F.ba(1.570796326794897-a),W=Math.sin(z),n=Math.cos(r),r=Math.sin(r),T[0]=N*n-r*W,T[1]=Math.cos(z),T[2]=(1-l)*N*r+n*W,0>a?h.F.Wq(A,T,f,P,0):h.F.Wq(A,f,T,P,0),f=Math.acos(P[2]/1),P=Math.atan2(-P[1],-P[0]),r=1-l,z=1+(T=Math.tan(f))*T/r,r=(-(N=2*A[2]*T/r)+(T=Math.sqrt(N*N-4*z*(A[2]*A[2]/r-1))))/(z*=2),N=(-N-T)/z,T=Math.tan(f),f=(r+N)/2,A=((z=T*r+A[2])+(T*N+A[2]))/2,T=h.F.gp(r-f,z-A),H=A/H*1.570796326794897,r=0;100>r&&(N=(N=h.F.w(l,H))*N/Math.cos(H)*(Math.sin(H)-A*N/(1-l)),!h.s.Cd(N));r++)H-=N;H=h.F.n(1,l,H)*Math.cos(H),A=1-T/(H=Math.sqrt((H-f)*(H+f))),A*=2-A,I=Math.acos(h.F.St(I,m)/(h.F.on(I)*h.F.on(m))),I*=h.s.Mb(1,m[0]),a=(h.F.q(H,A,h.F.Qj(A,I))+g*h.s.Mb(1,a))/h.F.Ah(H,A),a=h.F.ba(1.570796326794897*a),a=h.F.Rq(A,a),h.F.n(H,A,a),T=h.F.ba(P+o),o=Math.cos(T),a=Math.sin(T),b[0]=x[0]*o+x[1]*-a,b[1]=x[0]*a+x[1]*o,b[2]=x[2],h.F.jO(l,b[0],b[1],b[2],F,D,j),c!=null&&(c.u=D.u),p!=null&&(p.u=F.u)}},k}()}(q||(q={})),function(h){var k=function(){function n(a){this.Ya=null,this.wt=new h.h,this.xt=new h.h,this.g=a}return n.prototype.compare=function(a,c,p){return this.g.Gc(c,this.wt),this.g.Gc(a.ja(p),this.xt),this.wt.compare(this.xt)},n}(),g=function(){function n(a){this.Bf=new h.h,this.Dk=new h.h,this.g=a}return n.prototype.Dh=function(a){this.Bf.L(a)},n.prototype.compare=function(a,c){return this.g.Gc(a.ja(c),this.Dk),this.Bf.compare(this.Dk)},n}(),l=function(n){function a(c){var p=n.call(this,c.g,c.qa,!1)||this;return p.ib=c,p}return nt(a,n),a.prototype.compare=function(c,p,f){if(this.rg)return-1;var m=this.ib.Qd.Jn(this.ib.Rh(p));c=c.ja(f);var b=this.ib.Qd.Jn(this.ib.Rh(c));return this.Dm=f,this.RE(p,m,c,b)},a}(h.UC),o=function(n){function a(c){var p=n.call(this,c.g,c.qa)||this;return p.ib=c,p}return nt(a,n),a.prototype.compare=function(c,p){return this.rg?-1:(c=this.ib.Qd.Jn(this.ib.Rh(c.ja(p))),this.Dm=p,this.SE(p,c))},a}(h.aM),r=function(){function n(){this.Mc=this.df=this.jo=this.Qd=this.lh=this.zd=this.hb=this.g=null,this.Ng=!1,this.vh=this.Nm=this.ie=this.Gk=this.nh=this.Ak=this.Ff=this.$d=null,this.xh=this.Jq=this.UA=this.qa=0,this.Xv=this.Wn=!1,this.yo=new h.h,this.Pi=new h.h,this.hb=new h.$c(8),this.zd=new h.$c(5),this.lh=new h.au,this.Qd=new h.au,this.Ng=!1,this.vh=new h.h,this.vh.ma(0,0),this.qa=0,this.xh=-1,this.Wn=!1,this.g=null,this.df=new h.Yj,this.Mc=new h.Yj,this.nh=new h.ia(0),this.Gk=new h.TC,this.Ff=new h.ia(0),this.Ak=new h.ia(0),this.jo=new h.Sa}return n.prototype.PX=function(a,c){var p=new h.Dd;return p.$B(),a.Oc(p),this.er(a),this.Wn=!1,this.qa=c,this.UA=c*c,c=this.jC(),a.Oc(p),c||(this.qQ(),c||this.jC()),this.xh!=-1&&(this.g.Td(this.xh),this.xh=-1),this.g=null,this.Wn},n.prototype.TX=function(a,c){this.er(a),this.Wn=!1,this.qa=c,this.UA=c*c,this.Ng=!1,this.jC(),this.Ng||(this.Ng=a.Gp(c,!0,!1)==1),this.xh!=-1&&(this.g.Td(this.xh),this.xh=-1),this.g=null},n.prototype.pg=function(a,c){return this.hb.T(a,0+c)},n.prototype.LB=function(a,c,p){this.hb.S(a,0+c,p)},n.prototype.Rh=function(a){return this.hb.T(a,2)},n.prototype.ZW=function(a,c){this.hb.S(a,2,c)},n.prototype.RF=function(a,c){return this.hb.T(a,3+c)},n.prototype.Pp=function(a){return this.hb.T(a,7)},n.prototype.Pl=function(a,c){this.hb.S(a,7,c)},n.prototype.Rp=function(a,c){return this.hb.T(a,3+this.Op(a,c))},n.prototype.fr=function(a,c,p){this.hb.S(a,3+this.Op(a,c),p)},n.prototype.NR=function(a,c){return this.hb.T(a,5+this.Op(a,c))},n.prototype.hr=function(a,c,p){this.hb.S(a,5+this.Op(a,c),p)},n.prototype.Sr=function(a){return this.zd.T(a,0)},n.prototype.UW=function(a,c){this.zd.S(a,0,c)},n.prototype.ez=function(a){return this.zd.T(a,4)},n.prototype.cr=function(a,c){this.zd.S(a,4,c)},n.prototype.il=function(a){return this.zd.T(a,1)},n.prototype.ln=function(a,c){this.zd.S(a,1,c)},n.prototype.dz=function(a){return this.zd.T(a,3)},n.prototype.Et=function(a,c){this.zd.S(a,3,c)},n.prototype.Ym=function(a){var c=this.zd.Ce(),p=this.lh.Ph();return this.UW(c,p),a!=-1?(this.lh.addElement(p,a),this.g.Ra(a,this.xh,c),this.cr(c,this.g.Ua(a))):this.cr(c,-1),c},n.prototype.HP=function(a){this.zd.jd(a)},n.prototype.LD=function(a,c){this.lh.addElement(this.Sr(a),c),this.g.Ra(c,this.xh,a)},n.prototype.nt=function(a){var c=this.hb.Ce(),p=this.Qd.Ph();return this.ZW(c,p),a!=-1&&this.Qd.addElement(p,a),c},n.prototype.MD=function(a,c){this.Qd.addElement(this.Rh(a),c)},n.prototype.Uu=function(a){this.hb.jd(a),0<=(a=this.nh.lF(a))&&this.nh.SV(a)},n.prototype.hj=function(a,c){if(this.pg(a,0)==-1)this.LB(a,0,c);else{if(this.pg(a,1)!=-1)throw h.i.Qa();this.LB(a,1,c)}this.ky(a,c)},n.prototype.ky=function(a,c){var p=this.il(c);if(p!=-1){var f=this.Rp(p,c);this.hr(f,c,a),this.fr(a,c,f),this.fr(p,c,a),this.hr(a,c,p)}else this.hr(a,c,a),this.fr(a,c,a),this.ln(c,a)},n.prototype.Op=function(a,c){return this.pg(a,0)==c?0:1},n.prototype.Xm=function(a,c){var p,f=this.dz(c);if(f!=-1&&(this.df.vd(f,-1),this.Et(c,-1)),(f=this.il(c))!=-1){var m=p=f;do{var b=!1,x=this.Op(p,c),T=this.RF(p,x);if(this.pg(p,x+1&1)==a){if(this.Xu(p),this.Qd.bh(this.Rh(p)),this.Uu(p),p==T){f=-1;break}f==p&&(f=this.il(c),m=T,b=!0)}p=T}while(p!=m||b);if(f!=-1){do x=this.Op(p,c),T=this.RF(p,x),this.LB(p,x,a),p=T;while(p!=m);(p=this.il(a))!=-1?(m=this.Rp(p,a),b=this.Rp(f,a),m==p?(this.ln(a,f),this.ky(p,a),this.ln(a,p)):b==f&&this.ky(f,a),this.fr(f,a,m),this.hr(m,a,f),this.fr(p,a,b),this.hr(b,a,p)):this.ln(a,f)}}for(f=this.Sr(a),p=this.Sr(c),m=this.lh.rc(p);m!=-1;m=this.lh.lb(m))this.g.Ra(this.lh.ja(m),this.xh,a);this.lh.Hy(f,p),this.HP(c)},n.prototype.UT=function(a,c){var p=this.pg(a,0),f=this.pg(a,1),m=this.pg(c,0),b=this.pg(c,1);this.Qd.Hy(this.Rh(a),this.Rh(c)),c==this.il(p)&&this.ln(p,a),c==this.il(f)&&this.ln(f,a),this.Xu(c),this.Uu(c),p==m&&f==b||f==m&&p==b||(this.Hn(p,this.yo),this.Hn(m,this.Pi),this.yo.qb(this.Pi)?(p!=m&&this.Xm(p,m),f!=b&&this.Xm(f,b)):(f!=m&&this.Xm(f,m),p!=b&&this.Xm(p,b)))},n.prototype.Xu=function(a){var c=this.pg(a,1);this.dF(a,this.pg(a,0)),this.dF(a,c)},n.prototype.dF=function(a,c){var p=this.Rp(a,c),f=this.NR(a,c),m=this.il(c);p!=a?(this.fr(f,c,p),this.hr(p,c,f),m==a&&this.ln(c,p)):this.ln(c,-1)},n.prototype.WD=function(a,c,p){var f=this.Qd.rc(a),m=this.Qd.ja(f);a=this.Le(m);var b=this.Le(this.g.U(m));for(this.g.jr(m,c,p,!0),f=this.Qd.lb(f);f!=-1;f=this.Qd.lb(f)){m=this.Qd.ja(f);var x=this.Le(m)==a;this.g.jr(m,c,p,x)}f=c.Vp(p,0).ac(),c=c.Vp(p,c.ol(p)-1).wc(),this.BK(a,f),this.BK(b,c)},n.prototype.ZE=function(a,c,p){var f=this.Rh(a),m=this.pg(a,0),b=this.pg(a,1),x=this.nt(-1);for(this.nh.add(x),this.Pl(x,-3),this.Ff.add(x),this.hj(x,m),a=1,c=c.ol(p);a<c;a++)p=this.Ym(-1),this.Ak.add(p),this.Ff.add(p),this.hj(x,p),x=this.nt(-1),this.nh.add(x),this.Pl(x,-3),this.Ff.add(x),this.hj(x,p);for(this.hj(x,b),f=this.Qd.rc(f);f!=-1;f=this.Qd.lb(f))if(b=this.Qd.ja(f),this.Le(b)==m){a=0;do 0<a&&(x=this.Ff.get(a-1),this.LD(x,b),this.ez(x)==-1&&this.cr(x,this.g.Ua(b))),x=this.Ff.get(a),a+=2,this.MD(x,b),b=this.g.U(b);while(a<this.Ff.size)}else{a=this.Ff.size-1;do a<this.Ff.size-2&&(x=this.Ff.get(a+1),this.LD(x,b),0>this.ez(x)&&this.cr(x,this.g.Ua(b))),x=this.Ff.get(a),a-=2,this.MD(x,b),b=this.g.U(b);while(0<=a)}this.Ff.clear(!1)},n.prototype.Le=function(a){return this.g.Pa(a,this.xh)},n.prototype.TI=function(a,c,p){var f=this.pg(c,0),m=new h.h;this.Hn(f,m);var b=new h.h,x=this.pg(c,1);this.Hn(x,b);var T=p.ol(a),I=p.Vp(a,0),A=new h.h;if(I.Yp(A),!m.qb(A)){if(!this.Ng){var P=m.compare(this.vh);0>P*(A=A.compare(this.vh))&&(this.Ng=!0)}this.vF(f,this.Ff),this.Ak.add(f)}for(!this.Ng&&1<T&&(P=m.compare(b),I=I.wc(),(m.compare(I)!=P||I.compare(b)!=P||0>I.compare(this.vh))&&(this.Ng=!0)),a=(I=p.Vp(a,T-1)).wc(),b.qb(a)||(this.Ng||0>(P=b.compare(this.vh))*(A=a.compare(this.vh))&&(this.Ng=!0),this.vF(x,this.Ff),this.Ak.add(x)),this.Ff.add(c),b=0,x=this.Ff.size;b<x;b++)a=this.Ff.get(b),p=this.Pp(a),h.$c.LG(p)&&(this.Mc.vd(p,-1),this.Pl(a,-1)),a!=c&&this.Pp(a)!=-3&&(this.nh.add(a),this.Pl(a,-3));this.Ff.clear(!1)},n.prototype.lO=function(a,c){this.$d.compare(this.Mc,this.Mc.ja(a),c),this.$d.rg&&(this.$d.Kr(),this.oF(a,c))},n.prototype.oF=function(a,c){this.Wn=!0,a=this.Mc.ja(a),c=this.Mc.ja(c);var p=this.Qd.Jn(this.Rh(a)),f=this.Qd.Jn(this.Rh(c)),m=this.g.bc(p);m==null&&(this.ie==null&&(this.ie=new h.yb),this.g.ed(p,this.ie),m=this.ie),(p=this.g.bc(f))==null&&(this.Nm==null&&(this.Nm=new h.yb),this.g.ed(f,this.Nm),p=this.Nm),this.Gk.Oo(m),this.Gk.Oo(p),this.Gk.Ea(this.qa,!0)&&(this.Ng=!0),this.hK(a,c,-1,this.Gk),this.Gk.clear()},n.prototype.GQ=function(a,c){this.Wn=!0,c=this.Mc.ja(c);var p=this.Qd.Jn(this.Rh(c)),f=this.g.bc(p);f==null&&(this.ie==null&&(this.ie=new h.yb),this.g.ed(p,this.ie),f=this.ie),p=this.BF(a),this.Gk.Oo(f),this.g.Vi(p,this.jo),this.Gk.Kz(this.qa,this.jo,!0),this.hK(c,-1,a,this.Gk),this.Gk.clear()},n.prototype.xS=function(){if(this.nh.size!=0)for(;this.nh.size!=0;){if(this.nh.size>Math.max(100,this.g.fd)){this.nh.clear(!1),this.Ng=!0;break}var a=this.nh.Fc();this.nh.If(),this.Pl(a,-1),this.WS(a)!=-1&&this.wS(a),this.Vn=!1}},n.prototype.wS=function(a){if(this.Vn){var c=this.Mc.zu(this.MH,this.GH,a,!0);this.Vn=!1}else c=this.Mc.KD(a);c==-1?this.UT(this.Mc.ja(this.Mc.FF()),a):(this.Pl(a,c),this.$d.rg&&(this.$d.Kr(),this.oF(this.$d.Dm,c)))},n.prototype.WS=function(a){var c=this.pg(a,0);if(a=this.pg(a,1),this.Hn(c,this.yo),this.Hn(a,this.Pi),h.h.yc(this.yo,this.Pi)<=this.UA)return this.Ng=!0,-1;var p=this.yo.compare(this.vh),f=this.Pi.compare(this.vh);return 0>=p&&0<f?a:0>=f&&0<p?c:-1},n.prototype.oQ=function(){var a=new h.ia(0);a.Jb(this.g.fd);for(var c=this.g.Yq(),p=c.next();p!=-1;p=c.next())this.g.Pa(p,this.xh)!=-1&&a.add(p);this.g.nx(a,a.size),this.pQ(a)},n.prototype.pQ=function(a){this.df.clear(),this.df.De(a.size),this.df.Vo(new k(this.g));var c=new h.h;c.Rc();for(var p=-1,f=new h.h,m=0,b=a.size;m<b;m++){var x=a.get(m);this.g.Gc(x,f),f.qb(c)?(x=this.g.Pa(x,this.xh),this.Xm(p,x)):(p=this.Le(x),this.g.Gc(x,c),x=this.df.xn(x),this.Et(p,x))}},n.prototype.qQ=function(){var a=new h.ia(0);a.Jb(this.g.fd);for(var c=this.df.rc(-1);c!=-1;c=this.df.lb(c))a.add(this.df.ja(c));this.df.clear(),this.g.nx(a,a.size),c=0;for(var p=a.size;c<p;c++){var f=a.get(c),m=this.Le(f);f=this.df.xn(f),this.Et(m,f)}},n.prototype.vF=function(a,c){var p=this.il(a);if(p!=-1){var f=p;do h.$c.LG(this.Pp(f))&&c.add(f),f=this.Rp(f,a);while(f!=p)}},n.prototype.BK=function(a,c){for(a=this.lh.rc(this.Sr(a));a!=-1;a=this.lh.lb(a))this.g.mf(this.lh.ja(a),c)},n.prototype.hK=function(a,c,p,f){this.Xu(a),c!=-1&&this.Xu(c),this.TI(0,a,f),c!=-1&&this.TI(1,c,f),p!=-1&&(f.Bf.D(this.yo),this.Hn(p,this.Pi),this.Pi.qb(this.yo)||this.Ak.add(p)),p=0;for(var m=this.Ak.size;p<m;p++){var b=this.Ak.get(p),x=this.dz(b);x!=-1&&(this.df.vd(x,-1),this.Et(b,-1))}for(p=this.Rh(a),m=c!=-1?this.Rh(c):-1,this.WD(p,f,0),c!=-1&&this.WD(m,f,1),this.ZE(a,f,0),c!=-1&&this.ZE(c,f,1),this.Qd.bh(p),this.Uu(a),c!=-1&&(this.Qd.bh(m),this.Uu(c)),p=0,m=this.Ak.size;p<m;p++)(b=this.Ak.get(p))==this.Jq&&(this.Xv=!0),(x=this.dz(b))==-1&&((x=this.df.KD(this.BF(b)))==-1?(a=this.Le(this.df.ja(this.df.FF())),this.Xm(a,b)):this.Et(b,x));this.Ak.clear(!1)},n.prototype.Hn=function(a,c){this.g.dG(this.ez(a),c)},n.prototype.BF=function(a){return this.lh.Jn(this.Sr(a))},n.prototype.jC=function(){this.Xv=!1,this.Jq=-1,this.$d==null&&(this.Mc.Rv=!1,this.$d=new l(this),this.Mc.Zn=this.$d);var a=new h.ia(0),c=null,p=null;this.GH=this.MH=-1,this.Vn=!1;for(var f=this.df.rc(-1);f!=-1;){this.Vn=!1;var m=this.df.ja(f);this.Jq=this.Le(m),this.g.Gc(m,this.vh),this.$d.$J(this.vh.y,this.vh.x);var b=this.il(this.Jq),x=b==-1;if(!x){m=b;do{var T=this.Pp(m);T==-1?(this.nh.add(m),this.Pl(m,-3)):T!=-3&&a.add(T),m=this.Rp(m,this.Jq)}while(m!=b)}if(0<a.size){for(this.Vn=a.size==1&&this.nh.size==1,x=0,b=a.size;x<b;x++)m=this.Mc.ja(a.get(x)),this.Pl(m,-2);var I=-2,A=-2;for(x=0,b=a.size;x<b;x++){if(T=a.get(x),I==-2){var P=this.Mc.we(T);P!=-1?(m=this.Mc.ja(P),(m=this.Pp(m))!=-2&&(I=P)):I=-1}if(A==-2&&((T=this.Mc.lb(T))!=-1?(m=this.Mc.ja(T),(m=this.Pp(m))!=-2&&(A=T)):A=-1),I!=-2&&A!=-2)break}for(x=0,b=a.size;x<b;x++)T=a.get(x),m=this.Mc.ja(T),this.Mc.vd(T,-1),this.Pl(m,-1);a.clear(!1),this.MH=I!=-1?I:-1,this.GH=A!=-1?A:-1,I!=-1&&A!=-1?this.Vn||this.lO(I,A):I==-1&&A==-1&&(this.Vn=!1)}else x&&(c==null&&(c=new o(this)),c.Dh(this.vh),this.Mc.uJ(c),c.rg&&(c.Kr(),this.GQ(this.Jq,c.Dm)));this.xS(),this.Xv?(this.Xv=!1,p==null&&(p=new g(this.g)),p.Dh(this.vh),f=this.df.uJ(p)):f=this.df.lb(f)}return this.Wn},n.prototype.er=function(a){for(this.g=a,this.xh=this.g.Gd(),this.hb.De(a.fd+32),this.zd.De(a.fd),this.lh.At(a.fd),this.lh.fn(a.fd),this.Qd.At(a.fd+32),this.Qd.fn(a.fd+32),a=this.g.ld;a!=-1;a=this.g.ue(a))if(h.aa.Hc(this.g.ic(a)))for(T=this.g.Ob(a);T!=-1;T=this.g.Rb(T)){var c=this.g.Ja(T),p=this.g.Xa(T),f=this.Ym(p),m=this.nt(p);for(this.hj(m,f),I=this.g.U(p),p=0,c-=2;p<c;p++){var b=this.g.U(I),x=this.Ym(I);this.hj(m,x),m=this.nt(I),this.hj(m,x),I=b}this.g.dc(T)?(x=this.Ym(I),this.hj(m,x),m=this.nt(I),this.hj(m,x),this.hj(m,f)):(x=this.Ym(I),this.hj(m,x))}else for(var T=this.g.Ob(a);T!=-1;T=this.g.Rb(T)){var I=this.g.Xa(T);for(f=0,c=this.g.Ja(T);f<c;f++)this.Ym(I),I=this.g.U(I)}this.oQ()},n}();h.RC=r}(q||(q={})),function(h){var k=function(g){function l(o,r,n){var a=g.call(this)||this;if(o!==void 0)if(n!==void 0){a.description=h.ee.og();var c=new h.Nd;c.K(o,r,n),a.dC(c)}else if(r!==void 0)a.description=h.ee.og(),a.Cb(o,r);else if(o instanceof h.ra)a.description=o;else if(o instanceof h.h)a.description=h.ee.og(),a.Cb(o);else{if(!(o instanceof l))throw h.i.N();a.description=o.description,a.Cb(o.Lg(),o.ih()),o.ka!==null&&(a.ka=o.ka.slice(0))}else a.description=h.ee.og();return a}return nt(l,g),l.prototype.D=function(o){if(o===void 0){if(this.Ac())throw h.i.fa("This operation should not be performed on an empty geometry.");return(o=new h.h).ma(this.ka[0],this.ka[1]),o}if(this.Ac())throw h.i.fa("This operation should not be performed on an empty geometry.");o.ma(this.ka[0],this.ka[1])},l.prototype.Cb=function(o,r){typeof o=="number"?(this.vc(),this.ka==null&&this.un(),this.ka[0]=o,this.ka[1]=r):(this.vc(),this.Cb(o.x,o.y))},l.prototype.Cz=function(){if(this.Ac())throw h.i.fa("This operation should not be performed on an empty geometry.");var o=new h.Nd;return o.x=this.ka[0],o.y=this.ka[1],o.z=this.description.iG()?this.ka[2]:h.ra.se(1),o},l.prototype.dC=function(o){this.vc();var r=this.hasAttribute(1);r||h.ra.DG(1,o.z)||(this.re(1),r=!0),this.ka==null&&this.un(),this.ka[0]=o.x,this.ka[1]=o.y,r&&(this.ka[2]=o.z)},l.prototype.Lg=function(){if(this.Ac())throw h.i.fa("This operation should not be performed on an empty geometry.");return this.ka[0]},l.prototype.cC=function(o){this.setAttribute(0,0,o)},l.prototype.ih=function(){if(this.Ac())throw h.i.fa("This operation should not be performed on an empty geometry.");return this.ka[1]},l.prototype.aK=function(o){this.setAttribute(0,1,o)},l.prototype.bS=function(){return this.Uc(1,0)},l.prototype.wX=function(o){this.setAttribute(1,0,o)},l.prototype.zR=function(){return this.Uc(2,0)},l.prototype.hX=function(o){this.setAttribute(2,0,o)},l.prototype.Ec=function(){return this.yF(3,0)},l.prototype.LJ=function(o){this.setAttribute(3,0,o)},l.prototype.Uc=function(o,r){var n=this.description.Pf(o);return 0<=n?this.ka[this.description.$j(n)+r]:h.ra.se(o)},l.prototype.yF=function(o,r){var n=this.description.Pf(o);return 0<=n?this.ka[this.description.$j(n)+r]:h.ra.se(o)},l.prototype.setAttribute=function(o,r,n){this.vc();var a=this.description.Pf(o);0>a&&(this.re(o),a=this.description.Pf(o)),this.ka==null&&this.un(),this.ka[this.description.$j(a)+r]=n},l.prototype.getType=function(){return 33},l.prototype.Db=function(){return 0},l.prototype.Oa=function(){this.vc(),this.ka!=null&&(this.ka[0]=NaN,this.ka[1]=NaN)},l.prototype.sn=function(o){if(this.ka!=null){for(var r=h.ee.Iw(o,this.description),n=[],a=0,c=0,p=o.Aa;c<p;c++){var f=o.kd(c),m=h.ra.Va(f);if(r[c]==-1){var b=h.ra.se(f);for(f=0;f<m;f++)n[a]=b,a++}else for(b=this.description.$j(r[c]),f=0;f<m;f++)n[a]=this.ka[b],a++,b++}this.ka=n}this.description=o},l.prototype.un=function(){this.lJ(this.description.Ae.length),l.cE(this.description.Ae,this.ka,this.description.Ae.length),this.ka[0]=NaN,this.ka[1]=NaN},l.prototype.Oc=function(o){if(o instanceof h.Dd){if(!this.Ac()){var r=this.D();o.Eh(r,r),this.Cb(r)}}else this.Ac()||(this.re(1),r=this.Cz(),this.dC(o.fp(r)))},l.prototype.copyTo=function(o){if(o.getType()!=33)throw h.i.N();o.vc(),this.ka==null?(o.Oa(),o.ka=null,o.Nf(this.description)):(o.Nf(this.description),o.lJ(this.description.Ae.length),l.cE(this.ka,o.ka,this.description.Ae.length))},l.prototype.Ia=function(){return new l(this.description)},l.prototype.B=function(){return this.Ac()},l.prototype.Ac=function(){return this.ka==null||isNaN(this.ka[0])||isNaN(this.ka[1])},l.prototype.bn=function(o){o.Oa(),this.description!=o.description&&o.Nf(this.description),o.Zb(this)},l.prototype.A=function(o){this.Ac()?o.Oa():(o.v=this.ka[0],o.G=this.ka[1],o.C=this.ka[0],o.H=this.ka[1])},l.prototype.Qo=function(o){if(this.Ac())o.Oa();else{var r=this.Cz();o.v=r.x,o.G=r.y,o.Ye=r.z,o.C=r.x,o.H=r.y,o.Bg=r.z}},l.prototype.Tg=function(o,r){var n=new h.Nc;return this.Ac()?(n.Oa(),n):(o=this.Uc(o,r),n.oa=o,n.va=o,n)},l.prototype.lJ=function(o){if(this.ka==null)this.ka=h.O.lg(o);else if(this.ka.length<o){for(var r=this.ka.slice(0),n=this.ka.length;n<o;n++)r[n]=0;this.ka=r}},l.cE=function(o,r,n){if(0<n)for(n=0;n<o.length;n++)r[n]=o[n]},l.prototype.Nb=function(o){if(o==this)return!0;if(!(o instanceof l)||this.description!=o.description)return!1;if(this.Ac())return!!o.Ac();for(var r=0,n=this.description.Ae.length;r<n;r++)if(this.ka[r]!=o.ka[r])return!1;return!0},l.prototype.cc=function(){var o=this.description.cc();if(!this.Ac())for(var r=0,n=this.description.Ae.length;r<n;r++){var a=this.ka[r];a=h.O.truncate(a^a>>>32),o=h.O.Th(a,o)}return o},l.prototype.mg=function(){return null},l}(h.aa);h.Sa=k}(q||(q={})),function(h){var k=function(){function g(l,o,r){l!==void 0&&(this.x=l,this.y=o,this.z=r)}return g.construct=function(l,o,r){var n=new g;return n.x=l,n.y=o,n.z=r,n},g.prototype.K=function(l,o,r){this.x=l,this.y=o,this.z=r},g.prototype.lx=function(){this.z=this.y=this.x=0},g.prototype.normalize=function(){var l=this.length();l==0&&(this.x/=l,this.y/=l,this.z/=l)},g.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},g.prototype.sub=function(l){return new g(this.x-l.x,this.y-l.y,this.z-l.z)},g.prototype.Ag=function(l){new g(this.x*l,this.y*l,this.z*l)},g.prototype.Qh=function(l){return this.x*l.x+this.y*l.y+this.z*l.z},g}();h.Nd=k}(q||(q={})),function(h){var k=function(){function g(l,o,r){this.Gw=this.DA=null,this.Xf=o,this.FT=o.y-r,this.ET=o.y+r,this.Ew=0,this.dA=l,this.qa=r,this.RT=r*r,this.eA=r!=0,this.Lv=!1}return g.prototype.result=function(){return this.Ew!=0?1:0},g.prototype.ZM=function(l){return l=l.hc(l.fe(this.Xf,!1)),h.h.yc(l,this.Xf)<=this.RT},g.prototype.fF=function(l){if(!this.eA&&(this.dA&&this.Xf.qb(l.ac())||this.Xf.qb(l.wc())))this.Lv=!0;else if(l.na==this.Xf.y&&l.na==l.la){if(this.dA&&!this.eA){var o=Math.max(l.sa,l.pa);this.Xf.x>Math.min(l.sa,l.pa)&&this.Xf.x<o&&(this.Lv=!0)}}else{var r=!1;if(o=Math.max(l.sa,l.pa),this.Xf.x>o?r=!0:this.Xf.x>=Math.min(l.sa,l.pa)&&(r=0<l.cq(!0,this.Xf.y,this.Gw,null)&&this.Gw[0]<=this.Xf.x),r){if(this.Xf.y==l.ac().y){if(this.Xf.y<l.wc().y)return}else if(this.Xf.y==l.wc().y&&this.Xf.y<l.ac().y)return;this.Ew=this.dA?1^this.Ew:this.Ew+(l.ac().y>l.wc().y?1:-1)}}},g.prototype.SI=function(l){var o=l.Tg(0,1);if(o.oa>this.ET||o.va<this.FT)return!1;if(this.eA&&this.ZM(l))return!0;if(o.oa>this.Xf.y||o.va<this.Xf.y)return!1;if(this.DA==null&&(this.DA=[null,null,null,null,null]),this.Gw==null&&(this.Gw=[0,0,0]),0<(o=l.eG()))for(l=0;l<o;l++){var r=this.DA[l].get();if(this.fF(r),this.Lv)return!0}else if(this.fF(l),this.Lv)return!0;return!1},g.PM=function(l,o,r){for(o=new g(l.In()==0,o,r),l=l.Ga();l.$a();)for(;l.Ha();)if(r=l.ha(),o.SI(r))return-1;return o.result()},g.QM=function(l,o,r,n){var a=new h.l;l.xc(a),a.W(n,n);var c=new g(l.In()==0,r,n);l=l.Ga();var p=new h.l;for(p.K(a),p.C=r.x+n,p.G=r.y-n,p.H=r.y+n,n=(r=o.MF(p,n)).next();n!=-1;n=r.next())if(l.Vb(o.ja(n)),l.Ha()&&(n=l.ha(),c.SI(n)))return-1;return c.result()},g.wm=function(l,o,r){if(l.B())return 0;var n=new h.l;if(l.xc(n),n.W(r,r),!n.contains(o))return 0;if((n=l.Bb)!=null){var a=n.Fk;if(a!=null){if((a=a.So(o.x,o.y))==1)return 1;if(a==0)return 0}if((n=n.Fb)!=null)return g.QM(l,n,o,r)}return g.PM(l,o,r)},g.bT=function(l,o,r){return o.B()?0:g.wm(l,o.D(),r)},g.Ml=function(l,o){return!(16>(l=l.I()))&&2*l+Math.log(l)/Math.log(2)*o<1*l*o},g}();h.Dg=k}(q||(q={})),function(h){var k=function(g){function l(o){return g.call(this,!0,o)||this}return nt(l,g),l.prototype.Ia=function(){return new l(this.description)},l.prototype.Db=function(){return 2},l.prototype.getType=function(){return 1736},l.prototype.xG=function(o,r,n){this.JS(o,r,n)},l.prototype.qR=function(){this.FR()},l}(h.Vk);h.Da=k}(q||(q={})),function(h){(function(k){k[k.PiPOutside=0]="PiPOutside",k[k.PiPInside=1]="PiPInside",k[k.PiPBoundary=2]="PiPBoundary"})(h.RL||(h.RL={})),h.hd=function(){function k(){}return k.KG=function(g,l,o){return(g=h.Dg.bT(g,l,o))==0?0:g==1?1:2},k.Yd=function(g,l,o){return(g=h.Dg.wm(g,l,o))==0?0:g==1?1:2},k.WX=function(g,l,o,r,n){if(l.length<o||n.length<o)throw h.i.N();for(var a=0;a<o;a++)n[a]=k.Yd(g,l[a],r)},k.sK=function(g,l,o,r,n){if(g.getType()==1736)k.WX(g,l,o,r,n);else{if(g.getType()!=197)throw h.i.fa("invalid_call");var a=new h.l;g.A(a),k.$M(a,l,o,r,n)}},k.$M=function(g,l,o,r,n){if(l.length<o||n.length<o)throw h.i.N();if(g.B())for(r=0;r<o;r++)n[r]=0;else for(g.W(.5*-r,.5*-r),g.W(.5*r,.5*r),r=0;r<o;r++)g.contains(l[r])?n[r]=1:g.contains(l[r])?n[r]=2:n[r]=0},k.YX=function(g,l,o,r,n){for(var a=0;a<o;a++)n[a]=g.qs(l[a],r)?2:0},k.XX=function(g,l,o,r,n){var a=g.Bb,c=null;a!=null&&(c=a.Fk),a=o;for(var p=0;p<o;p++)if(n[p]=1,c!=null){var f=l[p];c.So(f.x,f.y)==0&&(n[p]=0,a--)}if(a!=0)for(g=g.Ga();g.$a()&&a!=0;)for(;g.Ha()&&a!=0;)for(c=g.ha(),p=0;p<o&&a!=0;p++)n[p]==1&&c.qs(l[p],r)&&(n[p]=2,a--);for(p=0;p<o;p++)n[p]==1&&(n[p]=0)},k.tK=function(g,l,o,r,n){var a=g.getType();if(a==1607)k.XX(g,l,o,r,n);else{if(!h.aa.yd(a))throw h.i.fa("Invalid call.");k.YX(g,l,o,r,n)}},k}()}(q||(q={})),function(h){var k=function(g){function l(o,r){if(arguments.length==2){var n=g.call(this,!1,o.description)||this;n.nf(o),n.lineTo(r)}else n=g.call(this,!1,o)||this;return n}return nt(l,g),l.prototype.Ia=function(){return new l(this.description)},l.prototype.Db=function(){return 1},l.prototype.getType=function(){return 1607},l.prototype.xG=function(o,r,n){this.KS(o,r,n)},l}(h.Vk);h.Ta=k}(q||(q={})),function(h){var k=function(){function g(){}return g.prototype.progress=function(){return!0},g.zp=function(l){if(l!=null&&!l.progress(-1,-1))throw h.i.WC()},g}();h.mp=k}(q||(q={})),function(h){var k;(k=h.PK||(h.PK={}))[k.clipWithInputHorizon=1]="clipWithInputHorizon",k[k.clipWithOutputHorizon=2]="clipWithOutputHorizon";var g=function(){function r(){this.Kg=3,this.Vu=this.Jr=NaN}return r.prototype.PW=function(n){this.QB(1,n)},r.prototype.QW=function(n){this.QB(2,n)},r.prototype.hS=function(){return this.hs(1)},r.prototype.iS=function(){return this.hs(2)},r.prototype.QB=function(n,a){this.Kg=a?this.Kg|n:this.Kg&~n},r.prototype.hs=function(n){return(this.Kg&n)!=0},r.prototype.Of=function(){var n=new r;return n.Jr=this.Jr,n.Vu=this.Vu,n.Kg=this.Kg,n},r}();h.yC=g,function(r){r[r.Dont_Geonomalize_Polygon=2147483648]="Dont_Geonomalize_Polygon",r[r.Dont_Adjust_At_Poles=1073741824]="Dont_Adjust_At_Poles"}(h.QK||(h.QK={}));var l=function(){function r(){this.Kg=0}return r.prototype.QB=function(n,a){this.Kg=a?this.Kg|n:this.Kg&~n},r.prototype.hs=function(n){return(this.Kg&n)!=0},r.jg=function(n){var a=new r;return a.Kg=n.Kg,a},r.prototype.mM=function(n){this.Kg=n.Kg},r}();h.AY=l;var o=function(){function r(n,a,c){this.ef=n,this.Yf=a,this.Uf=new h.l,this.Uf.K(c),this.AT=n.cc()+a.cc()+this.Uf.cc().toString()}return r.prototype.cc=function(){return this.AT},r.prototype.Nb=function(n){return this==n||this.ef.Nb(n.ef)&&this.Yf.Nb(n.Yf)&&this.Uf.Nb(n.Uf)},r}();h.FY=o,o=function(){function r(){this.Yf=this.ef=null,this.rH=new g,this.sH=new l,this.ww=this.Wf=null,this.mw=this.Tn=!0}return r.Nr=function(n,a,c,p){var f;p===void 0&&(p=null),f===void 0&&(f=null);var m=new r;return m.qp(n,a,c,p,f),m},r.prototype.qp=function(n,a,c,p,f){if(n==null||a==null)throw h.i.fa("invalidArgument");if(this.ef=n,this.Yf=a,this.mw=this.Tn=!1,p!=null&&(this.rH=p.Of()),f!=null&&this.sH.mM(f),f=!1,a.Sb()==1&&p!=null&&(p=p.Jr,isNaN(p)||p==0||(f=!0)),n==a)this.Tn=!f,this.mw=!0;else{p=n.Sb();var m=a.Sb();if(p==0||m==0){if(c!=null)throw h.i.N();n.Hd()!=null&&a.Hd()!=null&&(this.Tn=n.Hd().Nb(a.Hd()))}else p==3||m==3?this.Tn=n.Nb(a):this.ef.kS(this.Yf)?this.Tn=!f:this.Tn=!1,this.Wf=c,this.Wf!=null&&this.Wf.ix(),this.mw=(this.Wf==null||this.Wf.count()==0)&&this.ef.sc().Nb(this.Yf.sc())}this.oY()},r.prototype.isIdentity=function(){return this.Tn},r.prototype.nR=function(){return this.rH.Of()},r.prototype.Nb=function(n){return n==this||!!(n instanceof r&&this.ef.Nb(n.ef)&&this.Yf.Nb(n.Yf))&&(this.Wf==n.Wf||!(this.Wf==null||n.Wf==null||!this.Wf.Nb(n.Wf)))},r.prototype.oY=function(){this.ww=new h.bu(this)},r}(),h.vr=o}(q||(q={})),function(h){var k=function(){function g(){}return g.Cp=function(l){return l*g.oW},g.mx=function(l,o){return g.gP(o-l)},g.hP=function(l){return-360<=l&&720>l?(0>l?l+=360:360<=l&&(l-=360),l):(0>(l=h.lc.RK(l))&&(l+=360),l)},g.gP=function(l){return 180<(l=g.hP(l))&&(l-=360),l},g.oW=57.29577951308232,g}();h.qr=k,h.Hh=function(){function g(){}return g.lj=function(l,o){var r=new h.l;l.A(r);var n=h.cb.gh(o),a=new h.l;return a.K(n),a.v=r.v,a.C=r.C,a.W(.01*a.ca(),0),o=h.ta.Wd(o,r,!1),a.contains(r)?l:h.Ud.clip(l,a,o,0)},g.ks=function(l,o,r,n,a){if(!h.cb.Wc(o))throw h.i.N();var c=h.ta.kj(o,l,!1),p=h.cb.gh(o),f=h.cb.sc(o),m=f.Hd().ai,b=h.cb.vv(f);f=h.cb.ev(f),b*=2-b;var x=new h.Nc;p.cn(x);var T=[[0,0],[0,0]];if(h.Eg.Sb(o)==2?n?(T[0][0]=g.Zm(a,x),T[0][1]=p.Jp(),h.cb.vt(),p=T[0][0]*m):(T[0][0]=p.gk(),T[0][1]=a,h.cb.vt(),p=T[0][1]*m):p=a*m,!n&&p!=0)throw h.i.N();var I=new h.ga,A=new h.gd;l=A.Ib(l);for(var P=[0],j=new h.h,D=new h.h,F=new h.h,N=new h.h,z=new h.h,W=new h.h,H=A.Ob(l);H!=-1;H=A.Rb(H)){var Y=A.Xa(H);A.D(Y,F);for(var Z=!1,se=Y=A.U(Y);se!=-1;se=A.U(se)){if(se==Y){if(Z)break;Z=!0}if(A.D(se,N),n&&c<a-F.x&&N.x-a>c||c<a-N.x&&F.x-a>c||!n&&c<-F.y&&N.y>c||c<-N.y&&F.y>c)do if(!(Math.abs(F.x-N.x)>=.5*x.R())){if(h.Eg.Sb(o)==2?(T[0][0]=g.Zm(F.x,x),T[0][1]=F.y,T[1][0]=g.Zm(N.x,x),T[1][1]=N.y,h.cb.dW(),z.x=T[0][0]*m,z.y=T[0][1]*m,W.x=T[1][0]*m,W.y=T[1][1]*m):(z.x=F.x*m,z.y=F.y*m,W.x=N.x*m,W.y=N.y*m),W.x=6.283185307179586*(N.x-F.x)/x.R()+z.x,n){if(D.x=p,D.y=g.Nz(f,b,z,W,p,r),isNaN(D.y))break}else{if(D.x=g.Lz(f,b,z,W,r),isNaN(D.x))break;D.y=0}h.kb.wd(f,b,z.x,z.y,W.x,W.y,I,null,null,r);var ce=I.u;h.kb.wd(f,b,z.x,z.y,D.x,D.y,I,null,null,r);var ue=I.u;h.Eg.Sb(o)==2?(T[0][0]=D.x/m,T[0][1]=D.y/m,h.cb.bR(),n?(j.y=T[0][1],j.x=a):(j.x=g.os(T[0][0],F.x,N.x,x),j.y=a)):n?(j.x=a,j.y=D.y/m):(j.x=g.os(D.x/m,F.x,N.x,x),j.y=a),P[0]=0<ce?h.O.Rk(ue/ce,0,1):.5,P[0]!=0&&P[0]!=1&&(ce=A.Ma(se),A.Ul(ce,P,1),A.Cb(A.U(ce),j.x,j.y))}while(0);F.L(N)}}return A.Ne(l)},g.Fn=function(l,o,r,n,a){if(l.B())return l;var c=h.cb.bf(o);return g.Hp(l,r-180*c,360*c,o,n,a,!0)},g.Nz=function(l,o,r,n,a,c){if(3.141592653589793<=Math.abs(r.x-n.x)||!g.Sn(r.x,n.x,a))return NaN;if(r.x>n.x)var p=n;else p=r,r=n;n=new h.ga(0);var f=new h.ga(0),m=new h.ga(0);h.kb.wd(l,o,p.x,p.y,r.x,r.y,f,n,null,c);var b=f.u,x=0,T=1,I=new h.h;for(I.L(p);b*(T-x)>1e-12*l;){var A=.5*(x+T);if(h.kb.oj(l,o,p.x,p.y,b*A,n.u,f,m,c),I.x=f.u,I.y=m.u,I.x==a)break;if(g.Sn(p.x,I.x,a))T=A;else{if(!g.Sn(r.x,I.x,a))return NaN;x=A}}return I.y},g.Sn=function(l,o,r){return l=k.Cp(l),o=k.mx(l,k.Cp(o)),(r=k.mx(l,k.Cp(r)))==0||0<o&&0<r&&r<=o||0>o&&0>r&&r>=o},g.Zm=function(l,o){var r=o.va-o.oa;return o.It(l-Math.floor((l-o.oa)/r)*r)},g.os=function(l,o,r,n){var a=new h.Nc;for(a.K(o,r),r=n.R(),l=Math.floor((l-o)/r)*r+l,a=a.sf();Math.abs(l-a)>Math.abs(l+r-a);)l+=r;return l},g.Lz=function(l,o,r,n,a){if(r.y>n.y)var c=n;else c=r,r=n;if((n=new h.Nc).K(c.y,r.y),!n.contains(0)||3.141592653589793<=Math.abs(c.x-r.x))return NaN;if(c.x==r.x)return c.x;var p=new h.ga(0),f=new h.ga(0),m=new h.ga(0);h.kb.wd(l,o,c.x,c.y,r.x,r.y,f,p,null,a);var b=f.u,x=0,T=1,I=new h.h;for(I.L(c);b*(T-x)>1e-12*l;){var A=.5*(x+T);if(h.kb.oj(l,o,c.x,c.y,b*A,p.u,f,m,a),I.x=f.u,I.y=m.u,n.K(c.y,I.y),I.y==0)break;if(n.contains(0))T=A;else{if(n.K(r.y,I.y),!n.contains(0))return NaN;x=A}}return I.x},g.Hp=function(l,o,r,n,a,c,p){var f=new h.l;if(l.A(f),f.B())return l;var m=new h.Nc;f.cn(m);var b=new h.Nc;if(b.K(o,o+r),b.contains(m)&&b.va!=m.va)return l;var x=new h.l;x.K(f);var T=l.getType();if(T==33)return((f=(x=a?l:l.Of()).Lg())<b.oa||f>=b.va||p&&f==b.va)&&(f+=Math.ceil((b.oa-f)/r)*r,f=b.It(f),x.cC(f)),x;if(T==550){for(n=(x=a?l:l.Of()).ub(0),T=2*x.I(),l=!1,a=0;a<T;a+=2)((f=n.read(a))<b.oa||f>=b.va||p&&f==b.va)&&(l=!0,f+=Math.ceil((b.oa-f)/r)*r,f=b.It(f),n.write(a,f));return l&&x.Pc(1993),x}if(b.contains(m))return l;if(T==197)return r=a?l:l.Of(),f.Ea(x),r.Xo(f),r;var I=.1*Math.max(f.ca(),f.R());for(x.W(0,I),p=l,b=n.Xd(0),l=h.Gh.local(),a=new h.Dd;;){var A=Math.floor((m.oa-o)/r),P=Math.ceil((m.va-o)/r);if(!(3<P-A))break;A=Math.floor(.5*(P+A)),x.v=f.v-I,x.C=o+r*A;var j=h.Ud.clip(p,x,b,c);x.v=x.C,x.C=f.C+I;var D=h.Ud.clip(p,x,b,c);a.gg((A-P)*r,0),D.Oc(a),T==1736?p=l.V(j,D,n,null):(p=j).add(D,!1),p.A(f),f.cn(m)}for(x.v=o,x.C=o+r,(o=new h.l).K(x),o.W(b,0),(o=Math.floor((f.v-x.v)/r)*r)!=0?(x.move(o,0),a.gg(-o,0)):a.RB(),o=T==1607?new h.Ta(p.description):new h.Da(p.description),c=new h.l,m=new h.l;f.C>x.v;)(I=h.Ud.clip(p,x,b,0)).A(m),(T==1607?!I.B()&&(m.R()>b||m.ca()>b):!I.B()&&(T!=1736||m.R()>b))&&(I.Oc(a),I.A(m),o.A(c),c.W(b,b),c.isIntersecting(m)&&T==1736?o=l.V(o,I,n,null):o.add(I,!1)),x.move(r,0),a.shift(-r,0);return o},g.WI=function(l,o,r,n){var a=new h.de(r.description);a.Fd(r,0,-1),a=h.cb.zh(a,l,o);var c=r.I();if(n.Oa(),!h.cb.Wc(l)||c!=a.I())return!1;var p=new h.l;r.A(p);var f=new h.l;if(a.A(f),p=p.R(),f=f.R(),p!=0&&f!=0){if(f/=p,l=h.cb.gh(o).R()/h.cb.gh(l).R(),1e-10<Math.abs(f/l-1))return!1}else if(p!=0||f!=0)return!1;for(n.add(r,!1),r=0;r<c;r++)l=a.Na(r),n.Cb(r,l);return!0},g.Oz=function(){throw h.i.Ie()},g}()}(q||(q={})),function(h){var k,g,l;(g=k=h.si||(h.si={}))[g.Clip=0]="Clip",g[g.DontClip=1]="DontClip",g[g.PannableFold=2]="PannableFold",function(o){o[o.Geodesic=0]="Geodesic",o[o.Loxodrome=1]="Loxodrome",o[o.GreatElliptic=2]="GreatElliptic",o[o.NormalSection=3]="NormalSection",o[o.ShapePreserving=4]="ShapePreserving"}(l=h.WK||(h.WK={})),h.zb=function(){function o(){}return o.xv=function(r,n,a){if(a||0<n){for(r=r.toString(h.Sc.PE_STR_NAME_CANON|h.Sc.PE_STR_AUTH_NONE),n=[],a=0;a<r.length;a++)n[a]="a"<=r[a]&&"z">=r[a]?n[a]=r[a].toUpperCase():r[a];return n.join()}return r.toString(h.Sc.PE_STR_AUTH_TOP)},o.ur=function(r,n,a,c){var p=c.length,f=a.I();if(f!=0){var m=a.ub(0),b=Math.min(f,p),x=0,T=r.eh();isNaN(n)&&(n=0);for(var I=r.Wc(),A=179*(r=I?r.sc().Oe().R():0)/360;0<f;){if(m.uB(x<<1,b,c),h.ej.projToGeogCenter(T,b,c,n),I)for(var P=0;P<b;P++){var j=c[P][0]-n,D=h.lc.sign(j),F=m.read(2*(x+P));0>D*h.lc.sign(F)&&Math.abs(j)>A&&(c[P][0]+=-D*r)}m.uC(x<<1,b,c),x+=b,f-=b,b=Math.min(f,p)}a.Pc(1993)}},o.IL=function(r,n,a,c){var p=0,f=r.eh();isNaN(p)&&(p=0);var m=r.Wc(),b=r.bf();r=360*b,b*=179;for(var x=c.length,T=0;T<a;){for(var I=T;I<a&&n[I].isNaN();++I)T++;var A=Math.min(x,a-T);if(0<A){I=1;for(var P=T+1;I<A;++I,++P)if(n[P].isNaN()){A=I;break}if(h.ta.Jy(c,n,T,A),h.ej.projToGeogCenter(f,A,c,p),m)for(I=0,P=T;I<A;++I,++P){var j=n[P].x,D=c[I][0]-p,F=h.lc.sign(D);0>F*h.lc.sign(j)&&Math.abs(D)>b&&(c[I][0]-=F*r)}h.ta.Iy(n,T,c,A),T+=A}}},o.Lx=function(r,n,a){var c=a.length,p=n.I();if(!(1>p)){var f=n.ub(0),m=Math.min(p,c),b=0,x=r.eh(),T=r.Wc(),I=T?r.Oe().R():0,A=179*I/360,P=0;for(T&&(P=r.zi());0<p;){if(f.uB(b<<1,m,a),h.ej.geogToProj(x,m,a),T)for(r=0;r<m;r++){var j=a[r][0],D=h.lc.sign(j),F=f.read(2*(b+r))-P;0>D*h.lc.sign(F)&&Math.abs(j)>A&&(a[r][0]+=-D*I)}f.uC(b<<1,m,a),b+=m,p-=m,m=Math.min(p,c)}n.Pc(1993)}},o.HL=function(r,n,a,c){if(a!=0){var p=r.eh(),f=r.Wc(),m=f?r.Oe().R():0,b=179*m/360,x=0;for(f&&(x=r.zi()),r=0;r<a;){for(var T=r;T<a&&n[T].isNaN();++T)r++;var I=Math.min(c.length,a-r);if(0<I){T=1;for(var A=r+1;T<I;++T,++A)if(n[A].isNaN()){I=T;break}if(h.ta.Jy(c,n,r,I),h.ej.geogToProj(p,I,c),f)for(T=0,A=r;T<I;T++){var P=c[T][0],j=h.lc.sign(P);0>j*h.lc.sign(n[A].x-x)&&Math.abs(P)>b&&(c[T][0]-=j*m)}h.ta.Iy(n,r,c,I),r+=I}}}},o.tr=function(r,n,a,c){var p=n.I();if(p!=0){var f=n.ub(0),m=r.ef,b=r.Yf,x=m.sc().Qp(),T=b.sc().Qp(),I=m.bf(),A=b.bf();if((r=r.Wf)==null||r.count()==0){for(a=x/T,c=(m.Up()-b.Up())*A,T=-90*I,r=90*I,x=!1,A=1,m=2*p;A<m;)I=f.get(A),(b=h.O.Rk(I,T,r))!=I&&(f.set(A,b),x=!0),A+=2;if(c!=0||a!=1)for(x=!0,T=new h.h,A=0;A<p;A++)f.tc(2*A,T),T.x*=a,T.x+=c,T.y*=a,f.Tt(2*A,T);x&&n.Pc(1993)}else{m=c.length,b=Math.min(p,m);var P=h.O.lg(b),j=null,D=0,F=NaN,N=NaN,z=360*A,W=A/I;a&&(N=90*A,F=89.9*I,j=h.O.lg(b));for(var H=!0,Y=0;p!=0;){for(I=!1,f.uB(D<<1,b,c),A=0;A<b;A++)P[A]=c[A][0];if(a)for(A=0;A<b;A++){var Z=Math.abs(c[A][1])-F;0<Z&&(I=c[A][1],c[A][1]=h.lc.Cn(F,I),j[A]=h.lc.Cn(Z,I),I=!0)}for(A=c[0][0],r.transform(c,b,x,T),H&&(Y=c[0][0]-W*A,H=!1),A=0;A<b;A++)Z=c[A][0]-P[A]*W-Y,200<Math.abs(Z)&&(c[A][0]=0<Z?c[A][0]-z:c[A][0]+z);if(I){for(A=0;A<b;A++)j[A]!=0&&(c[A][1]+=W*j[A],c[A][1]>N?c[A][1]=N:c[A][1]<-N&&(c[A][1]=-N));for(I=0;I<b;I++)j[I]=0}f.uC(D<<1,b,c),D+=b,p-=b,b=Math.min(p,m)}n.Pc(1993)}}},o.GL=function(r,n,a,c){if(r.mw)c=90*r.ef.bf(),h.ta.dK(n,a,-c,c);else{var p=r.Wf,f=r.ef,m=r.Yf;r=f.Xr();var b=m.Xr(),x=f.bf(),T=90*x,I=m.bf();if(p==null||p.count()==0){if(c=r/b,p=(f.Up()-m.Up())*I,h.ta.dK(n,a,-T,T),p!=0||c!=1)for(I=0;I<a;I++)n[I].x*=c,n[I].x+=p,n[I].y*=c}else{f=Math.min(a,c.length),T=h.O.lg(f),m=360*I,x=I/x;for(var A=!0,P=0,j=0;a!=0;){for(I=0;I<f;I++)T[I]=n[I+j].x;for(I=n[0].x,h.ta.Jy(c,n,j,f),p.transform(c,f,r,b),h.ta.Iy(n,j,c,f),A&&(P=n[0].x-x*I,A=!1),I=0;I<f;I++){var D=n[j+I].x-T[I]*x-P;200<Math.abs(D)&&(n[j+I].x=0<D?n[j+I].x-m:n[j+I].x+m)}j+=f,a-=f,f=Math.min(a,c.length)}}}},o.dv=function(r,n){return r=r.gh(),isNaN(n)||r.Ju(n,0),r},o.UQ=function(r,n,a,c,p,f,m,b){for(var x=o.dv(c,p),T=x.R(),I=T/360,A=o.pE*I,P=r.ub(0),j=n.Wc(),D=j?T/n.Oe().R():0,F=!1,N=new h.Da(a.description),z=0,W=a.da();z<W;++z){var H=j,Y=new h.Ta(a.description);if(Y.addPath(a,z,!0),m!=0){var Z=o.PD(!0,Y,x.H-b,x.H,m);(F=F||Z)&&(H=!1)}var se=-1;H&&(se=r.Ba(z));var ce=Y.ub(0),ue=Y.I(),$e=0,fe=ce.read(0),ze=0;Z=3*c.Xd(0);var Re=!1,xe=new h.h;xe.Rc();var gt=new h.h;gt.Rc();for(var Bt=!1,vt=1;vt<ue;++vt){var rt=h.h.construct(ce.eg(2*vt),ce.eg(2*vt+1)),st=rt.x,Ze=st+$e,It=Ze-fe;if(rt.x=Ze,Math.abs(It)>A){if(H){var We=se+(vt+1<ue?vt:0),br=P.read(2*(se+vt-1));We=(P.read(2*We)-br)*D,Math.abs(It-We)>1*I&&(H=!1)}H||(Ze=st+($e-=h.lc.Cn(T,Ze-fe)),++ze,Bt=$e!=0,rt.x=Ze)}else Re||h.ta.AG(gt,xe,rt,Z)&&(Re=!0);Bt&&ce.write(2*vt,Ze),fe=Ze,gt.L(xe),xe.L(rt)}0<ze&&Y.Pc(1993),H=Y.Na(0),ue=Y.Na(ue-1),Y=h.h.tb(H,ue)<Z?o.uQ(Y,c,p,f,Re):o.vQ(r,z,Y,c,p),N.add(Y,!1)}return p=c.Xd(0),a=x.R()/180,o.Jt(N,x,.1*p,!1),N=N!=(p=h.ri.clip(N,x,p,a,f)),r=r.Ke(),m=0,0<(b=p.Ke())&&0>r?m=1:0>=b&&0<r&&(b==0?(b=NaN,n.Sb()==2?b=n.ml().Ke():n.Sb()==1&&(b=n.Oe().wF()),r>.99*b&&(m=-1)):m=-1),m!=0&&((n=new h.Da(p.description)).tp(x),(n=h.Xl.local().V(n,a,f)).add(p,!1),N=!0,p=n),N&&(p=h.Yl.local().V(p,c,!1,f)),p},o.vQ=function(r,n,a,c,p){var f=a.I(),m=a.Na(0),b=a.Na(f-1);p=(c=o.dv(c,p)).R(),m=h.lc.sign(b.x-m.x);var x=new h.l;a.xc(x);var T=c.gk();if(b=T-p,T+=p,0<=m){var I=Math.ceil((b-x.v)/p);for(I*=p;b>x.v+I;)I+=p;for(;b<x.C+I;)I-=p;var A=I;720<x.R()&&(T=b+360*Math.ceil(x.R()/360))}else{for(I=Math.ceil((T-x.C)/p),I*=p;T<x.C+I;)I-=p;for(;T>x.v+I;)I+=p;A=I,720<x.R()&&(b=T-360*Math.ceil(x.R()/360))}I=m*p;var P=h.l.construct(x.v,x.G,x.C,x.H);P.move(A,0);var j=new h.Dd;j.gg(A,0),a.Oc(j),(x=new h.Ta(a.description)).add(a,!1),A=a.Na(f-1),p=0;for(var D=x.Na(0).x,F=0;0<m?P.C<T:P.v>b;)1024<=F&&(F=0),P.move(I,0),j.Gb=I,a.Oc(j),D+=I,c.v<=D&&c.C>=D&&(p=x.I()-1),a.Cb(0,A),A=a.Na(f-1),x.Dr(a,0,0,f-1,!1);return a=new h.Da(x.description),f=0<r.Ir(n),a.add(x,!1),r=x.Na(0),b=x.Na(x.I()-1),n=a.da()-1,(0>m?f:!f)?(m=h.h.construct(b.x,c.H),a.Ci(m),m=h.h.construct(c.gk(),c.H),a.Ci(m),c=h.h.construct(r.x,c.H)):(m=h.h.construct(b.x,c.G),a.Ci(m),m=h.h.construct(c.gk(),c.G),a.Ci(m),c=h.h.construct(r.x,c.G)),a.Ci(c),a.xG(0,n,0),a.kO(p),a},o.uQ=function(r,n,a,c,p){var f=new h.Da(r.description);f.add(r,!1),f.DB(0,f.I()-1);var m=new h.l;f.xc(m);var b=(a=o.dv(n,a)).R(),x=Math.ceil((a.v-m.v)/b);for(x*=b;a.v>m.v+x;)x+=b;for(;a.v<m.C+x;)x-=b;if((x+=b)!=0){m.move(x,0);var T=new h.Dd;T.gg(x,0),f.Oc(T)}if(a.v<=m.v&&a.C>m.C)return p&&(p=f.Ke(),n=(f=h.Yl.local().V(f,n,!0,c)).Ke(),(n=h.lc.sign(p)!=h.lc.sign(n))&&f.oJ()),f;for((r=new h.Da(r.description)).add(f,!1),p=p||m.R()>b-n.Xd(0);m.v<a.C;)m.move(b,0),(T=new h.Dd).gg(b,0),f.Oc(T),r.add(f,!1);return p&&(p=r.Ke(),r.Yo(1),n=(r=h.Yl.local().V(r,n,!0,c)).Ke(),(n=h.lc.sign(p)!=h.lc.sign(n))&&r.oJ()),r},o.PD=function(r,n,a,c,p){for(var f=n.ub(0),m=n.I(),b=!1,x=0;x<m;x++){var T=h.h.construct(f.eg(2*x),f.eg(2*x+1));if(1&p&&T.y>=a){b=!0;break}if(2&p&&T.y<=-a){b=!0;break}}if(!b)return!1;f=!1,r&&(f=n.Nn(0)),m=(r=new h.gd).Ib(n),b=r.Ob(m);var I=-1,A=!0,P=new h.h;P.Rc(),x=new h.Sa;for(var j=-1,D=r.Xa(b);D!=-1;D=r.U(D)){T=r.Na(D);var F=1&p&&90<=T.y?1:0;if(F|=2&p&&T.y<=-a?2:0,0<I&&I!=F){if(P.x!=T.x){P.x=T.x,r.Vi(r.Ma(D),x);var N=r.wj(b,D,x);r.mf(N,P)}if(f)for(j=j!=-1?r.U(j):r.Xa(b),N=r.Ma(D);j!=N;)j=r.pd(j,!1);j=-1}0<F&&(T.y=h.lc.Cn(c,T.y),r.mf(D,T),A||I==F||(T.x!=P.x?(r.Vi(D,x),N=r.wj(b,D,x),r.Cb(N,P.x,T.y),j=N):j=D)),I=F,P=T,A=!1}if(f){if(j!=-1)for(j=r.U(j);j!=-1;)j=r.pd(j,!1);a=r.Xa(b),r.fq(a,r.rj(b))||(r.Vi(a,x),r.wj(b,-1,x))}return r.Ne(m).copyTo(n),!0},o.Mz=function(r,n,a,c){var p=r;if(p.B()||a==k.DontClip)return p;var f=p.getType();if(f==33)return p=[(c=p).D()],o.yG(p,1,n,a),p[0].isNaN()?c.Oa():c.Cb(p[0]),r;var m=(r=n.sc()).bf(),b=90*m,x=180*m,T=360*m,I=n.zi(),A=.5*m,P=new h.l;p.A(P);var j=n.Vr(),D=n.PQ(),F=j.getType()==197;if(n=new h.l,j.A(n),a==k.PannableFold&&(a=r.Oe().R(),n.v=I-.5*a,n.C=n.v+a),P.G<-b||P.H>b){if(new h.l().K(P.v-m,-b,P.C+m,b),(p=h.ri.Nu(p,n,r,NaN,0,c)).B())return p;p.A(P)}if(D&&(n.H<P.G||n.G>P.H))return p.Ia();if(P.R()>T&&(p=o.Hp(p,I-x,T,r,!0,0,!0,c)).A(P),(b=o.eO(P.v,P.C,n.v,n.C,T))!=0&&P.move(b,0),P.C>n.C||P.v<n.v){if(P.C>n.C)for(;P.v>=n.C;)P.move(-T,0),b-=T;for(;P.v<n.C-T;)P.move(T,0),b+=T}if(a=h.ta.Hu(r,j),b!=0&&((m=new h.Dd).gg(b,0),p.Oc(m)),D){if(F&&n.contains(P))return p;for(D=[null,null],b=0;2>b;b++){if(F?m=h.aa.Hc(f)?h.ri.clip(p,n,a,A,c):h.ri.clip(p,n,a,0,c):(m=h.Xj.local().V(p,j,r,c))==j&&(m=h.aa.jg(m)),n.v<=P.v&&n.C>=P.C||n.v>=P.v&&n.C<=P.C)return m;D[b]=m,b==0&&(P.move(-T,0),(m=new h.Dd).gg(-T,0),p.Oc(m))}if(f==550)D[0].Fd(D[1],0,-1);else if(h.aa.Hc(f))D[0].add(D[1],!1);else{if(f!=33)throw h.i.fa("intersect_with_GCS_horizon: unexpected geometry type");D[0].B()&&(D[0]=D[1])}return D[0]}if(n.H<P.G||n.G>P.H)return p;for(f=0;!p.B()&&P.C>n.v;)f!=0&&((m=new h.Dd).gg(f,0),p.Oc(m)),h.dj.local().V(4,p,j,r,c)||j==(p=h.kp.local().V(p,j,r,c))&&(p=h.aa.jg(p)),f!=0&&((A=new h.Dd).gg(-f,0),p.Oc(A)),f-=T,P.move(-T,0);return p},o.yG=function(r,n,a,c){if(n!=0&&c!=k.DontClip)if(c==k.PannableFold){c=a.HR();for(var p=n,f=0;f<n;f++)(r[f].y>c.H||r[f].y<c.G)&&(r[f].Rc(),p--);p!=0&&o.av(r,n,c.v,c.R())}else{var m=90*(c=a.bf()),b=180*c;for(c*=360,p=n,f=0;f<n;f++)(r[f].y>m||r[f].y<-m)&&(r[f].Rc(),p--);if(p!=0){(p=new h.l).Zw(r,n),m=a.Vr();var x=a.hv();f=m.getType()==197;var T=new h.l;if(m.A(T),!x||!(T.H<p.G||T.G>p.H))if(x)if(o.av(r,n,T.gk()-b,c),p=n,f)for(f=0;f<n;f++)T.contains(r[f])||(r[f].Rc(),p--);else for(a=h.ta.Hu(a.sc(),m),f=0;f<n;f++)(b=h.hd.Yd(m,r[f],a)!=0)||(r[f].Rc(),p--);else for(o.av(r,n,-b,c),p=n,a=h.ta.Hu(a.sc(),m),f=0;f<n;f++)(b=r[f]).isNaN()&&p--,x=o.tE(b.x,T.v,T.C,c),b.x+=x,(b=h.hd.Yd(m,b,a)!=0)&&(r[f].Rc(),p--)}}},o.Hp=function(r,n,a,c,p,f,m,b){var x=r.getType(),T=n+a;if(x===33){var I=(c=p?r:r.Of()).Lg();return(I<n||I>=T||m&&I==T)&&(I+=Math.ceil((n-I)/a)*a,I=h.O.Rk(I,n,T),c.cC(I)),c}if(r.B()||(I=new h.l,r.A(I),I.B()))return r;var A=new h.Nc;I.cn(A);var P=new h.Nc;if(P.K(n,T),P.contains(A))return r;if((T=new h.l).K(I),x===550){for(b=(c=p?r:r.Of()).ub(0),x=2*c.I(),T=!1,n=0;n<x;n+=2)((I=b.read(n))<P.oa||I>=P.va||m&&I==P.va)&&(T=!0,I+=Math.ceil((P.oa-I)/a)*a,I=P.It(I),b.write(n,I));return T&&c.Pc(1993),c}if(x==197)return a=p?r:r.Of(),I.Ea(T),a.Xo(I),a;var j=.1*Math.max(I.ca(),I.R());for(T.W(0,j),m=r,P=c.Xd(0),r=h.Gh.local(),p=new h.Dd;;){var D=Math.floor((A.oa-n)/a),F=Math.ceil((A.va-n)/a);if(!(3<F-D))break;D=Math.floor(.5*(F+D)),T.v=I.v-j,T.C=n+a*D;var N=h.ri.clip(m,T,P,f,b);T.v=T.C,T.C=I.C+j;var z=h.ri.clip(m,T,P,f,b);p.gg((D-F)*a,0),z.Oc(p),x==1736?m=r.V(N,z,c,null):(m=N).add(z,!1),m.A(I),I.cn(A)}for(T.v=n,T.C=n+a,(n=new h.l).K(T),n.W(P,0),(n=Math.floor((I.v-T.v)/a)*a)!=0?(T.move(n,0),p.gg(-n,0)):p.RB(),n=x==1607?new h.Ta(m.description):new h.Da(m.description),f=new h.l,A=new h.l;I.C>T.v;)(j=h.ri.clip(m,T,P,0,b)).A(A),(x==1607?!j.B()&&(A.R()>P||A.ca()>P):!j.B()&&(x!=1736||A.R()>P))&&(j.Oc(p),j.A(A),n.A(f),f.W(P,P),f.isIntersecting(A)&&x==1736?n=r.V(n,j,c,null):n.add(j,!1)),T.move(a,0),p.shift(-a,0);return n},o.av=function(r,n,a,c){for(var p=a+c,f=0;f<n;f++){var m=r[f].x;a<=m&&m<p||!(m<a||m>p||m==p)||(m+=Math.ceil((a-m)/c)*c,m=h.O.Rk(m,a,p),r[f].x=m)}},o.Fn=function(r,n,a,c,p,f){if(!n.Wc())throw h.i.fa("fold_into_360_degree_range");if(r.B())return r;if(n.Sb()==2){a=n.pv();var m=n.ov()-a}else{var b=n.bf();m=360*b,a-=180*b}return o.Hp(r,a,m,n,c,p,!0,f)},o.qF=function(r,n,a,c){if(a.Sb()==2)c=a.pv(),a=a.ov()-c;else{var p=a.bf();a=360*p,c-=180*p}o.av(r,n,c,a)},o.lj=function(r,n){var a=n.Oe();if(r.getType()==33){var c=r.ih();return a.G<=c&&c<=a.H?r:r.Ia()}c=new h.l,r.A(c);var p=new h.l;return p.K(a),p.v=c.v,p.C=c.C,p.W(.01*p.ca(),0),a=h.ta.uy(n,c),p.contains(c)?r:h.ri.clip(r,p,a,0,null)},o.ir=function(r,n,a){return r>n.C&&r-n.C<a?n.C:r<n.v&&n.v-r<a?n.v:r},o.FX=function(r,n,a,c){c.x=o.ir(r.x,n,a),c.y=r.y},o.EX=function(r,n,a,c){for(var p=0;p<n;p++)r[p].y<a.G||r[p].y>a.H?r[p].Rc():r[p].x=o.ir(r[p].x,a,c)},o.Jt=function(r,n,a,c){if(!r.B()){var p=r.getType();if(!c||p!=1736)if(h.aa.xj(p)){c=r.ub(0),p=0;for(var f=r.I();p<f;p++){var m=c.read(2*p),b=o.ir(m,n,a);b!=m&&c.write(2*p,b)}r.Pc(1993)}else if(p==197)c=new h.l,r.A(c),c.v=o.ir(c.v,n,a),c.C=o.ir(c.C,n,a),r.Xo(c);else{if(p!=33)throw h.i.fa("internal error");r.cC(o.ir(r.Lg(),n,a))}}},o.uS=function(r,n,a,c){var p=new h.gd,f=p.Ib(r);return r=h.ta.Hu(n,r),o.ks(p,f,n,r,a,!0,c),p.Ne(f)},o.ks=function(r,n,a,c,p,f,m){if(!a.Wc())throw h.i.N("invalid call");var b=a.Oe(),x=a.sc(),T=x.eh().getDatum().getSpheroid();x=x.Hd().ai;var I=T.getFlattening();T=T.getAxis(),I*=2-I;var A=new h.Nc;b.cn(A);var P=null,j=[[0,0],[0,0]];if(a.Sb()==2?(P=a.eh(),f?(j[0][0]=o.Zm(m,A),j[0][1]=b.Jp(),h.ej.projToGeog(P,1,j),b=j[0][0]*x):(j[0][0]=b.gk(),j[0][1]=m,h.ej.projToGeog(P,1,j),b=j[0][1]*x)):b=m*x,!f&&b!=0&&p!=l.GreatElliptic)throw h.i.fa("invalid argument");var D=new h.ga,F=[0],N=new h.h,z=new h.h,W=new h.h,H=[null,null],Y=new h.h,Z=new h.h,se=new h.h,ce=new h.h;for(n=r.Ob(n);n!=-1;n=r.Rb(n)){var ue=r.Xa(n);r.D(ue,Y);for(var $e=!1,fe=ue=r.U(ue);fe!=-1;fe=r.U(fe)){if(fe==ue){if($e)break;$e=!0}if(r.D(fe,Z),f&&(c<m-Y.x&&Z.x-m>c||c<m-Z.x&&Y.x-m>c)||!f&&(m!=0||c<-Y.y&&Z.y>c||c<-Z.y&&Y.y>c))do if(!(Math.abs(Y.x-Z.x)>=.5*A.R())){if(a.Sb()==2?(j[0][0]=o.Zm(Y.x,A),j[0][1]=Y.y,j[1][0]=o.Zm(Z.x,A),j[1][1]=Z.y,h.ej.projToGeogCenter(P,2,j,0),se.x=j[0][0]*x,se.y=j[0][1]*x,ce.y=j[1][1]*x):(se.x=Y.x*x,se.y=Y.y*x,ce.y=Z.y*x),ce.x=2*(Z.x-Y.x)*Math.PI/A.R()+se.x,f){if(z.x=b,z.y=o.Nz(T,I,se,ce,b,p),isNaN(z.y))break;H[0]=z;var ze=1}else if(p==l.GreatElliptic){var Re=[0,0];if((ze=h.Ox.Oz(I,se,ce,b,Re))==0)break;z.x=Re[0],z.y=b,H[0]=z,ze==2&&(W.x=Re[1],W.y=b,H[1]=W)}else{if(z.x=o.Lz(T,I,se,ce,p),isNaN(z.x))break;z.y=0,H[0]=z,ze=1}var xe=-1;for(Re=0;Re<ze;Re++){h.kb.wd(T,I,se.x,se.y,ce.x,ce.y,D,null,null,p);var gt=D.u;h.kb.wd(T,I,se.x,se.y,H[Re].x,H[Re].y,D,null,null,p);var Bt=D.u;if(a.Sb()==2?(j[0][0]=H[Re].x/x,j[0][1]=H[Re].y/x,h.ej.geogToProj(P,1,j),f?(N.y=j[0][1],N.x=m):(N.x=o.os(j[0][0],Y.x,Z.x,A),N.y=m)):f?(N.x=m,N.y=H[Re].y/x):(N.x=o.os(H[Re].x/x,Y.x,Z.x,A),N.y=m),F[0]=0<gt?h.O.Rk(Bt/gt,0,1):.5,F[0]==0||F[0]==1)break;xe>F[0]||(xe=r.Ma(fe),r.Ul(xe,F,1),r.Cb(r.U(xe),N.x,N.y),xe=F[0])}}while(0);Y.L(Z)}}},o.Zm=function(r,n){var a=n.va-n.oa;return n.It(r-Math.floor((r-n.oa)/a)*a)},o.os=function(r,n,a,c){var p=new h.Nc;for(p.K(n,a),a=c.R(),r=Math.floor((r-n)/a)*a+r,p=p.sf();Math.abs(r-p)>Math.abs(r+a-p);)r+=a;return r},o.Sn=function(r,n,a){return r=h.qr.Cp(r),n=h.qr.mx(r,h.qr.Cp(n)),(a=h.qr.mx(r,h.qr.Cp(a)))==0||0<n&&0<a&&a<=n||0>n&&0>a&&a>=n},o.Nz=function(r,n,a,c,p,f){if(f==l.GreatElliptic)return h.Ox.SS(n,a,c,p);if(Math.abs(a.x-c.x)>=Math.PI||!o.Sn(a.x,c.x,p))return NaN;if(a.x>c.x)var m=c;else m=a,a=c;c=new h.ga;var b=new h.ga,x=new h.ga;h.kb.wd(r,n,m.x,m.y,a.x,a.y,b,c,null,f);var T=b.u,I=0,A=1,P=new h.h;for(P.L(m);T*(A-I)>1e-12*r;){var j=.5*(I+A);if(h.kb.oj(r,n,m.x,m.y,T*j,c.u,b,x,f),P.x=b.u,P.y=x.u,P.x==p)break;if(o.Sn(m.x,P.x,p))A=j;else{if(!o.Sn(a.x,P.x,p))return NaN;I=j}}return P.y},o.Lz=function(r,n,a,c,p){if(p==l.GreatElliptic)return r=[0,0],h.Ox.Oz(n,a,c,0,r),r[0];if(a.y>c.y)var f=c;else f=a,a=c;if((c=new h.Nc).K(f.y,a.y),!c.contains(0)||Math.abs(f.x-a.x)>=Math.PI)return NaN;if(f.x==a.x)return f.x;var m=new h.ga,b=new h.ga,x=new h.ga;h.kb.wd(r,n,f.x,f.y,a.x,a.y,b,m,null,p);var T=b.u,I=0,A=1,P=new h.h;for(P.L(f);T*(A-I)>1e-12*r;){var j=.5*(I+A);if(h.kb.oj(r,n,f.x,f.y,T*j,m.u,b,x,p),P.x=b.u,P.y=x.u,c.K(f.y,P.y),P.y==0)break;if(c.contains(0))A=j;else{if(c.K(a.y,P.y),!c.contains(0))return NaN;I=j}}return P.x},o.WI=function(r,n,a,c){if(!r.ef.Wc())return!1;var p=new h.de(n.description);if(p.Fd(n,0,-1),c=h.Hx.local().V(p,r,c),p=n.I(),a.Oa(),p!=c.I())return!1;var f=new h.l;n.A(f);var m=new h.l;if(c.A(m),f=f.R(),m=m.R(),f!=0&&m!=0){if(m/=f,r=r.Yf.gh().R()/r.ef.gh().R(),1e-10<Math.abs(m/r-1))return!1}else if(f!=0||m!=0)return!1;for(a.add(n,!1),n=new h.h,r=0;r<p;r++)c.D(r,n),a.Cb(r,n);return!0},o.qN=function(r,n){return(r%=360*n)>=180*n&&(r-=360*n),r},o.UI=function(r,n,a,c){if(a==k.Clip){var p=n.ml();p.getType()==197?(a=new h.l,p.A(a),p=h.ta.uy(n,a),r=h.ri.clip(r,a,p,5e4*n.pm(),c)):h.dj.local().V(1,p,r,n,c)||(r=h.Xj.local().V(r,p,n,c))==p&&(r=h.Vk.jg(r))}else n.Wc()&&(c=new h.l,r.xc(c),n.Oe().contains(c)||(o.Jt(r,n.Oe(),n.Xd(0),!0),a==k.PannableFold&&(r=o.lj(r,n)),r=o.Fn(r,n,0,!0,1e5*n.pm(),null)));return r},o.XD=function(r,n,a){var c=n.Wr();if(c==null)return r;var p=(n=n.sc()).Oe().R(),f=new h.l;r.xc(f);var m=new h.Nc;f.cn(m),f=c.Ga(),c=null;for(var b=new h.Dd;f.$a();)for(;f.Ha();){var x=f.ha(),T=x.Tg(0,0),I=new h.Nc;for(I.K(T.oa,T.va),T=0;I.va>m.oa;)I.move(-p),--T;for(;I.oa<=m.va;){if(I.isIntersecting(m)){c==null&&(c=new h.Ta);var A=h.yb.cP(x.ac(),x.wc());T!=0&&(b.gg(T*p,0),A.Oc(b)),c.oc(A,!0)}I.move(p),++T}}return c!=null?(n=h.ta.gO(n,c),n=h.ta.Er(n),h.$t.lP(r,c,n,a)):r},o.eO=function(r,n,a,c,p){return r>=a&&n<=c?0:o.tE(.5*(n+r),a,c,p)},o.tE=function(r,n,a,c){return h.lc.round((.5*(a+n)-r)/c)*c},o.VQ=function(r,n,a,c,p,f,m,b){var x=o.dv(c,p),T=x.R(),I=T/360,A=o.pE*I,P=r.ub(0),j=n.Wc(),D=j?T/n.Oe().R():0;n=r.Ia();for(var F=0,N=a.da();F<N;++F){var z=j,W=new h.Ta(a.description);W.addPath(a,F,!0);var H=a.dc(F);m!=0&&(H=o.PD(H,W,x.H-b,x.H,m))&&(z=!1);var Y=-1;H=W.I();var Z=!1;z&&(Y=r.Ba(F),Z=r.dc(F));var se=W.ub(0),ce=0,ue=se.read(0),$e=0,fe=3*c.Xd(0),ze=!1,Re=new h.h;Re.Rc();var xe=new h.h;xe.Rc();for(var gt=!1,Bt=1;Bt<H;++Bt){var vt=h.h.construct(se.eg(2*Bt),se.eg(2*Bt+1)),rt=vt.x,st=rt+ce,Ze=st-ue;if(vt.x=st,Math.abs(Ze)>A){if(z){var It=Y+Bt-1,We=Y;(!Z||Bt+1<H)&&(We+=Bt),It=P.read(2*It),We=(P.read(2*We)-It)*D,Math.abs(Ze-We)>1*I&&(j=!1)}z||(st=rt+(ce-=h.lc.Cn(T,st-ue)),++$e,gt=ce!=0,vt.x=st)}else ze||h.ta.AG(Re,xe,vt,fe)&&(ze=!0);gt&&se.write(2*Bt,st),ue=st,Re.L(xe),xe.L(vt)}$e!=0&&W.Pc(1993),z=W.Na(0),H=W.Na(H-1),h.h.tb(z,H),W=o.wQ(W,c,isNaN(p)?0:p,f),n.add(W,!1)}return r=c.Xd(0),a=x.R()/180,o.Jt(n,x,.1*r,!1),h.ri.clip(n,x,r,a,f)},o.wQ=function(r,n,a,c){return o.Fn(r,n,a,!0,0,c)},o.OS=function(r,n,a,c){var p=r.getType();if(p==1736)for(n=n!=null?n.Xd(0):0,p=0;p<c;p++)h.hd.Yd(r,a[p],n)!=1&&a[p].Rc();else{if(p!=197)throw h.i.N();for(p=0;p<c;p++)r.dP(a[p])||a[p].Rc()}},o.$k=function(r,n,a,c){if(32>a)for(var p=new h.Sa,f=0;f<a;f++)p.Cb(n[f]),r.$k(p,c).D(n[f]);else{var m=new h.de;for(m.re(3),m.HD(n,a),p=m.ub(3),f=0;f<a;f++)p.write(f,f);for(f=r.$k(m,c),r=f.ub(0),p=f.ub(3),c=h.h.construct(NaN,NaN),m=0;m<a;m++)n[m]=c;for(a=f.I(),f=0;f<a;f++)c=p.read(f),r.tc(2*f,n[c])}},o.Zk=function(r,n,a,c){if(32>a)for(var p=new h.Sa,f=0;f<a;f++)p.Cb(n[f]),r.Zk(p,c).D(n[f]);else{var m=new h.de;for(m.re(3),m.HD(n,a),p=m.ub(3),f=0;f<a;f++)p.write(f,f);for(f=r.Zk(m,c),r=f.ub(0),p=f.ub(3),c=h.h.construct(NaN,NaN),m=0;m<a;m++)n[m]=c;for(a=f.I(),f=0;f<a;f++)c=p.read(f),r.tc(2*f,n[c])}},o.pE=210,o}()}(q||(q={})),function(h){var k;(k=h.UL||(h.UL={}))[k.rightSide=1]="rightSide";var g=function(){function l(o,r,n){this.Bs=new h.h,o===void 0?this.Io=-1:(this.Bs.L(o),this.Io=r,this.Ka=n,this.nw=0)}return l.prototype.WJ=function(o){this.nw=o?1|this.nw:-2&this.nw},l.prototype.B=function(){return 0>this.Io},l.prototype.fz=function(){if(this.B())throw h.i.fa("invalid call");return new h.Sa(this.Bs.x,this.Bs.y)},l.prototype.Ua=function(){if(this.B())throw h.i.fa("invalid call");return this.Io},l.prototype.hz=function(){if(this.B())throw h.i.fa("invalid call");return this.Ka},l.prototype.Sz=function(){return(1&this.nw)!=0},l.prototype.ey=function(o,r,n,a){this.Bs.x=o,this.Bs.y=r,this.Io=n,this.Ka=a},l}();h.$l=g}(q||(q={})),function(h){var k=function(){function l(){}return l.prototype.Uo=function(o,r){if(this.th.resize(0),this.Ii.length=0,this.tk=-1,o.xc(this.Ek),this.Ek.W(r,r),this.Ek.isIntersecting(this.Fb.Ca)){var n=o.getType();(this.vs=h.aa.yd(n))?(this.TH=o.ac(),this.SH=o.wc(),this.qa=r):this.qa=NaN,this.th.add(this.Fb.kf),this.Ii.push(this.Fb.Ca),this.Qs=this.Fb.Ur(this.Fb.kf)}else this.Qs=-1},l.prototype.Xi=function(o,r){this.th.resize(0),this.Ii.length=0,this.tk=-1,this.Ek.K(o),this.Ek.W(r,r),this.qa=NaN,this.Ek.isIntersecting(this.Fb.Ca)?(this.th.add(this.Fb.kf),this.Ii.push(this.Fb.Ca),this.Qs=this.Fb.Ur(this.Fb.kf),this.vs=!1):this.Qs=-1},l.prototype.next=function(){if(this.th.size==0)return-1;this.tk=this.Qs;var o=null,r=null,n=null,a=null;this.vs&&(o=new h.h,r=new h.h,n=new h.l);for(var c=!1;!c;){for(;this.tk!=-1;){var p=this.Fb.bz(this.Fb.fv(this.tk));if(p.isIntersecting(this.Ek)){if(!this.vs){c=!0;break}if(o.L(this.TH),r.L(this.SH),n.K(p),n.W(this.qa,this.qa),0<n.zy(o,r)){c=!0;break}}this.tk=this.Fb.nv(this.tk)}if(this.tk==-1){p=this.th.Fc();var f=this.Ii[this.Ii.length-1];for(a==null&&((a=[])[0]=new h.l,a[1]=new h.l,a[2]=new h.l,a[3]=new h.l),g.EJ(f,a),this.th.If(),--this.Ii.length,f=0;4>f;f++){var m=this.Fb.Lp(p,f);if(m!=-1&&0<this.Fb.WR(m)&&a[f].isIntersecting(this.Ek))if(this.vs){if(o.L(this.TH),r.L(this.SH),n.K(a[f]),n.W(this.qa,this.qa),0<n.zy(o,r)){var b=new h.l;b.K(a[f]),this.th.add(m),this.Ii.push(b)}}else(b=new h.l).K(a[f]),this.th.add(m),this.Ii.push(b)}if(this.th.size==0)return-1;this.tk=this.Fb.Ur(this.th.get(this.th.size-1))}}return this.Qs=this.Fb.nv(this.tk),this.tk},l.bP=function(o,r,n){var a=new l;return a.Fb=o,a.Ek=new h.l,a.th=new h.ia(0),a.Ii=[],a.Uo(r,n),a},l.aP=function(o,r,n){var a=new l;return a.Fb=o,a.Ek=new h.l,a.th=new h.ia(0),a.Ii=[],a.Xi(r,n),a},l.$O=function(o){var r=new l;return r.Fb=o,r.Ek=new h.l,r.th=new h.ia(0),r.Ii=[],r},l}();h.GY=k;var g=function(){function l(o,r){this.jf=new h.$c(11),this.Zh=new h.$c(5),this.ws=[],this.gw=new h.ia(0),this.Ca=new h.l,this.Nk(o,r)}return l.prototype.reset=function(o,r){this.jf.mj(!1),this.Zh.mj(!1),this.ws.length=0,this.gw.clear(!1),this.Nk(o,r)},l.prototype.vj=function(o,r){return this.zv(o,r,0,this.Ca,this.kf,!1,-1)},l.prototype.Jz=function(o,r,n){n=n==-1?this.kf:this.WF(n);var a=this.ca(n),c=this.oR(n);return this.zv(o,r,a,c,n,!1,-1)},l.prototype.ja=function(o){return this.jR(o)},l.prototype.GF=function(o){return this.bz(this.fv(o))},l.prototype.ca=function(o){return this.jv(o)},l.prototype.oR=function(o){var r=new h.l;r.K(this.Ca);var n=this.jv(o);o=this.QF(o);for(var a=0;a<2*n;a+=2){var c=h.O.truncate(3&o>>a);c==0?(r.v=.5*(r.v+r.C),r.G=.5*(r.G+r.H)):c==1?(r.C=.5*(r.v+r.C),r.G=.5*(r.G+r.H)):(c==2?r.C=.5*(r.v+r.C):r.v=.5*(r.v+r.C),r.H=.5*(r.G+r.H))}return r},l.prototype.WR=function(o){return this.Az(o)},l.prototype.vR=function(o,r){return k.bP(this,o,r)},l.prototype.MF=function(o,r){return k.aP(this,o,r)},l.prototype.getIterator=function(){return k.$O(this)},l.prototype.Nk=function(o,r){if(0>r||32<2*r)throw h.i.N("invalid height");this.BT=r,this.Ca.K(o),this.kf=this.jf.Ce(),this.jx(this.kf,0),this.ax(this.kf,0),this.NJ(this.kf,0),this.KJ(this.kf,0)},l.prototype.zv=function(o,r,n,a,c,p,f){if(!a.contains(r))return n==0?-1:this.zv(o,r,0,this.Ca,this.kf,p,f);if(!p)for(var m=c;m!=-1;m=this.IR(m))this.jx(m,this.Az(m)+1);(m=new h.l).K(a),a=c;var b=[];for(b[0]=new h.l,b[1]=new h.l,b[2]=new h.l,b[3]=new h.l;n<this.BT&&this.iO(a);n++){l.EJ(m,b);for(var x=!1,T=0;4>T;T++)if(b[T].contains(r)){x=!0;var I=this.Lp(a,T);I==-1&&(I=this.rP(a,T)),this.jx(I,this.Az(I)+1),a=I,m.K(b[T]);break}if(!x)break}return this.sS(o,r,n,m,a,p,c,f)},l.prototype.sS=function(o,r,n,a,c,p,f,m){var b=this.NF(c);if(p){if(c==f)return m;this.SP(m),p=m}else p=this.tP(),this.NB(p,o),this.KW(this.fv(p),r);return this.mX(p,c),b!=-1?(this.hx(p,b),this.bx(b,p)):this.GJ(c,p),this.SB(c,p),this.ax(c,this.lv(c)+1),this.hO(c)&&this.MQ(n,a,c),p},l.prototype.SP=function(o){var r=this.WF(o),n=this.NF(r),a=this.OR(o),c=this.nv(o);this.Ur(r)==o?(c!=-1?this.hx(c,-1):this.SB(r,-1),this.GJ(r,c)):n==o?(this.bx(a,-1),this.SB(r,a)):(this.hx(c,a),this.bx(a,c)),this.hx(o,-1),this.bx(o,-1),this.ax(r,this.lv(r)-1)},l.EJ=function(o,r){var n=.5*(o.v+o.C),a=.5*(o.G+o.H);r[0].K(n,a,o.C,o.H),r[1].K(o.v,a,n,o.H),r[2].K(o.v,o.G,n,a),r[3].K(n,o.G,o.C,a)},l.prototype.hO=function(o){return this.lv(o)==8&&!this.gG(o)},l.prototype.MQ=function(o,r,n){var a=this.Ur(n);do{var c=this.fv(a),p=this.Zh.T(a,0);c=this.bz(c),this.zv(p,c,o,r,n,!0,a),a=p=this.nv(a)}while(a!=-1)},l.prototype.iO=function(o){return 8<=this.lv(o)||this.gG(o)},l.prototype.gG=function(o){return this.Lp(o,0)!=-1||this.Lp(o,1)!=-1||this.Lp(o,2)!=-1||this.Lp(o,3)!=-1},l.prototype.rP=function(o,r){var n=this.jf.Ce();return this.OW(o,r,n),this.jx(n,0),this.ax(n,0),this.Pk(n,o),this.KJ(n,this.jv(o)+1),this.NJ(n,r<<2*this.jv(o)|this.QF(o)),n},l.prototype.tP=function(){var o=this.Zh.Ce();if(0<this.gw.size){var r=this.gw.Fc();this.gw.If()}else r=this.ws.length,this.ws.push(new h.l);return this.LW(o,r),o},l.prototype.Lp=function(o,r){return this.jf.T(o,r)},l.prototype.OW=function(o,r,n){this.jf.S(o,r,n)},l.prototype.Ur=function(o){return this.jf.T(o,4)},l.prototype.GJ=function(o,r){this.jf.S(o,4,r)},l.prototype.NF=function(o){return this.jf.T(o,5)},l.prototype.SB=function(o,r){this.jf.S(o,5,r)},l.prototype.QF=function(o){return this.jf.T(o,6)},l.prototype.NJ=function(o,r){this.jf.S(o,6,r)},l.prototype.lv=function(o){return this.jf.T(o,7)},l.prototype.Az=function(o){return this.jf.T(o,8)},l.prototype.ax=function(o,r){this.jf.S(o,7,r)},l.prototype.jx=function(o,r){this.jf.S(o,8,r)},l.prototype.IR=function(o){return this.jf.T(o,9)},l.prototype.Pk=function(o,r){this.jf.S(o,9,r)},l.prototype.jv=function(o){return this.jf.T(o,10)},l.prototype.KJ=function(o,r){this.jf.S(o,10,r)},l.prototype.jR=function(o){return this.Zh.T(o,0)},l.prototype.NB=function(o,r){this.Zh.S(o,0,r)},l.prototype.OR=function(o){return this.Zh.T(o,1)},l.prototype.nv=function(o){return this.Zh.T(o,2)},l.prototype.hx=function(o,r){this.Zh.S(o,1,r)},l.prototype.bx=function(o,r){this.Zh.S(o,2,r)},l.prototype.WF=function(o){return this.Zh.T(o,3)},l.prototype.mX=function(o,r){this.Zh.S(o,3,r)},l.prototype.fv=function(o){return this.Zh.T(o,4)},l.prototype.LW=function(o,r){this.Zh.S(o,4,r)},l.prototype.bz=function(o){return this.ws[o]},l.prototype.KW=function(o,r){this.ws[o].K(r)},l}();h.du=g}(q||(q={})),function(h){var k;(k=h.aL||(h.aL={}))[k.Outside=0]="Outside",k[k.Inside=1]="Inside",k[k.Border=2]="Border";var g=function(){function o(r,n){this.PT=n,this.Vh=r}return o.prototype.setColor=function(r,n){this.iH!=n&&r.flush(),this.iH=n},o.prototype.gF=function(r,n){for(var a=0;a<n;)for(var c=r[a++],p=r[a++],f=r[a++]*this.PT;c<p;c++)this.Vh[f+(c>>4)]|=this.iH<<2*(15&c)},o}();h.HY=g;var l=function(){function o(r,n,a){this.Vh=null,this.SA=this.Ik=this.cI=this.aI=this.Es=this.qH=this.Gf=this.Um=0,this.Ri=this.Jk=this.vl=null,this.Fz(r,n,a)}return o.create=function(r,n,a){if(!o.zE(r))throw h.i.N();return o.wP(r,n,a)},o.pW=function(r){switch(r){case 0:r=1024;break;case 1:r=16384;break;case 2:r=262144;break;default:throw h.i.fa("Internal Error")}return r},o.zE=function(r){return!(r.B()||r.getType()!=1607&&r.getType()!=1736)},o.prototype.rQ=function(r,n){n=n.Ga();for(var a=new h.h,c=new h.h;n.$a();)for(;n.Ha();){var p=n.ha();if(p.getType()!=322)throw h.i.fa("Internal Error");r.Eh(p.ac(),a),r.Eh(p.wc(),c),this.Ri.jy(a.x,a.y,c.x,c.y)}this.Ri.iJ(h.Px.Cx)},o.prototype.sQ=function(){throw h.i.fa("Internal Error")},o.prototype.Ry=function(r,n){for(var a=1;4>a;a++)r.jy(n[a-1].x,n[a-1].y,n[a].x,n[a].y);r.jy(n[3].x,n[3].y,n[0].x,n[0].y),this.Ri.iJ(h.Px.Cx)},o.prototype.rK=function(r,n,a){for(var c=[null,null,null,null],p=0;p<c.length;p++)c[p]=new h.h;n=n.Ga(),a=this.Jk.dY(a)+1.5,p=new h.h;for(var f=new h.h,m=new h.h,b=new h.h,x=new h.h,T=new h.l,I=new h.h;n.$a();){var A=!1,P=!0;for(I.ma(0,0);n.Ha();){var j=n.ha();if(b.x=j.sa,b.y=j.na,x.x=j.pa,x.y=j.la,T.Oa(),T.Zb(b.x,b.y),T.Lk(x.x,x.y),this.vl.HG(T)){this.Jk.Eh(x,x),P?(this.Jk.Eh(b,b),I.L(b),P=!1):b.L(I),p.uc(x,b);var D=.5>(j=p.length());j==0?p.ma(1,0):(D||I.L(x),p.scale(a/j),f.ma(-p.y,p.x),m.ma(p.y,-p.x),b.sub(p),x.add(p),c[0].add(b,f),c[1].add(b,m),c[2].add(x,m),c[3].add(x,f),D?A=!0:this.Ry(r,c))}else A&&(this.Ry(r,c),A=!1),P=!0}A&&this.Ry(r,c)}},o.prototype.sC=function(r){return h.O.truncate(r*this.qH+this.aI)},o.prototype.tC=function(r){return h.O.truncate(r*this.Es+this.cI)},o.wP=function(r,n,a){return new o(r,n,a)},o.prototype.Fz=function(r,n,a){this.Gf=Math.max(h.O.truncate(2*Math.sqrt(a)+.5),64),this.Um=h.O.truncate((2*this.Gf+31)/32),this.vl=new h.l,this.Ik=n,a=0;for(var c=this.Gf,p=this.Um;8<=c;)a+=c*p,c=h.O.truncate(c/2),p=h.O.truncate((2*c+31)/32);this.Vh=h.O.lg(a,0),this.Ri=new h.Px,a=new g(this.Vh,this.Um,this),this.Ri.AX(this.Gf,this.Gf,a),r.A(this.vl),this.vl.W(n,n),c=new h.l;var f=n*(p=h.l.construct(1,1,this.Gf-2,this.Gf-2)).R();switch(n*=p.ca(),c.K(this.vl.sf(),Math.max(f,this.vl.R()),Math.max(n,this.vl.ca())),this.SA=this.Ik,this.Jk=new h.Dd,this.Jk.pS(c,p),new h.Dd,r.getType()){case 550:a.setColor(this.Ri,2),this.sQ();break;case 1607:a.setColor(this.Ri,2),this.rK(this.Ri,r,this.SA);break;case 1736:a.setColor(this.Ri,1),this.rQ(this.Jk,r),a.setColor(this.Ri,2),this.rK(this.Ri,r,this.SA)}this.qH=this.Jk.bb,this.Es=this.Jk.ab,this.aI=this.Jk.Gb,this.cI=this.Jk.Lb,this.XN()},o.prototype.XN=function(){this.Ri.flush();for(var r=0,n=this.Gf*this.Um,a=this.Gf,c=h.O.truncate(this.Gf/2),p=this.Um,f=h.O.truncate((2*c+31)/32);8<a;){for(a=0;a<c;a++)for(var m=2*a,b=2*a+1,x=0;x<c;x++){var T=2*x,I=2*x+1,A=T>>4;T=2*(15&T);var P=I>>4;I=2*(15&I);var j=this.Vh[r+p*m+A]>>T&3;j|=this.Vh[r+p*m+P]>>I&3,j|=this.Vh[r+p*b+A]>>T&3,j|=this.Vh[r+p*b+P]>>I&3,this.Vh[n+f*a+(x>>4)]|=j<<2*(15&x)}a=c,p=f,r=n,c=h.O.truncate(a/2),f=h.O.truncate((2*c+31)/32),n=r+p*a}},o.prototype.So=function(r,n){return this.vl.contains(r,n)?(r=this.sC(r),n=this.tC(n),0>r||r>=this.Gf||0>n||n>=this.Gf||(n=this.Vh[this.Um*n+(r>>4)]>>2*(15&r)&3)==0?0:n==1?1:2):0},o.prototype.Ro=function(r){if(!r.Ea(this.vl))return 0;var n=this.sC(r.v),a=this.sC(r.C),c=this.tC(r.G);if(r=this.tC(r.H),0>n&&(n=0),0>c&&(c=0),a>=this.Gf&&(a=this.Gf-1),r>=this.Gf&&(r=this.Gf-1),n>a||c>r)return 0;for(var p=Math.max(a-n,1)*Math.max(r-c,1),f=0,m=this.Um,b=this.Gf,x=0;;){if(32>p||16>b){for(p=c;p<=r;p++)for(var T=n;T<=a;T++)if(1<(x=this.Vh[f+m*p+(T>>4)]>>2*(15&T)&3))return 2;if(x==0)return 0;if(x==1)return 1}f+=m*b,b=h.O.truncate(b/2),m=h.O.truncate((2*b+31)/32),n=h.O.truncate(n/2),c=h.O.truncate(c/2),a=h.O.truncate(a/2),r=h.O.truncate(r/2),p=Math.max(a-n,1)*Math.max(r-c,1)}},o.prototype.RR=function(){return this.Gf*this.Um},o}();h.Nx=l}(q||(q={})),function(h){var k;(k=h.VL||(h.VL={}))[k.contains=1]="contains",k[k.within=2]="within",k[k.equals=3]="equals",k[k.disjoint=4]="disjoint",k[k.touches=8]="touches",k[k.crosses=16]="crosses",k[k.overlaps=32]="overlaps",k[k.unknown=0]="unknown",k[k.intersects=1073741824]="intersects";var g=function(){function o(){}return o.construct=function(r,n,a,c,p,f,m,b){var x=new o;return x.pw=r,x.Mm=n,x.Kj=a,x.Si=c,x.BH=p,x.SY=f,x.TY=m,x.UY=b,x},o}();h.Vt=function(){function o(){}return o.CD=function(r,n,a){if(o.wy(r)){var c=h.ta.kj(n,r,!1);n=!1,h.Uk.CE(r)&&(n=n||r.lu(c,a)),(c=r.getType())!=1736&&c!=1607||!h.Uk.AE(r)||a==0||(n=n||r.fj(a)),c!=1736&&c!=1607||!h.Uk.BE(r)||a==0||n||r.hM()}},o.wy=function(r){return h.Uk.CE(r)||h.Uk.AE(r)||h.Uk.BE(r)},o}();var l=function(){function o(){this.rh=[]}return o.zB=function(r,n,a,c,p){var f=r.getType(),m=n.getType();if(f==197){if(m==197)return o.tW(r,n,a,c);if(m==33)return c==2?c=1:c==1&&(c=2),o.hJ(n,r,a,c)}else if(f==33){if(m==197)return o.hJ(r,n,a,c);if(m==33)return o.vW(r,n,a,c)}if(r.B()||n.B())return c==4;var b=new h.l;r.A(b);var x=new h.l;n.A(x);var T=new h.l;if(T.K(b),T.Zb(x),a=h.ta.Wd(a,T,!1),o.dk(b,x,a))return c==4;switch(b=!1,h.Vk.yd(f)&&((f=new h.Ta(r.description)).oc(r,!0),r=f,f=1607),h.Vk.yd(m)&&((m=new h.Ta(n.description)).oc(n,!0),n=m,m=1607),f!=197&&m!=197?(r.Db()<n.Db()||f==33&&m==550)&&(c==2?c=1:c==1&&(c=2)):f!=1736&&m!=197&&(c==2?c=1:c==1&&(c=2)),f){case 1736:switch(m){case 1736:b=o.rt(r,n,a,c,p);break;case 1607:b=o.$m(r,n,a,c,p);break;case 33:b=o.qt(r,n,a,c);break;case 550:b=o.pt(r,n,a,c,p);break;case 197:b=o.GI(r,n,a,c,p)}break;case 1607:switch(m){case 1736:b=o.$m(n,r,a,c,p);break;case 1607:b=o.gB(r,n,a,c,p);break;case 33:b=o.tt(r,n,a,c,p);break;case 550:b=o.st(r,n,a,c,p);break;case 197:b=o.MI(r,n,a,c)}break;case 33:switch(m){case 1736:b=o.qt(n,r,a,c);break;case 1607:b=o.tt(n,r,a,c,p);break;case 550:b=o.lt(n,r,a,c)}break;case 550:switch(m){case 1736:b=o.pt(n,r,a,c,p);break;case 1607:b=o.st(n,r,a,c,p);break;case 550:b=o.ZA(r,n,a,c,p);break;case 33:b=o.lt(r,n,a,c);break;case 197:b=o.hI(r,n,a,c)}break;case 197:switch(m){case 1736:b=o.GI(n,r,a,c,p);break;case 1607:b=o.MI(n,r,a,c);break;case 550:b=o.hI(n,r,a,c)}}return b},o.tW=function(r,n,a,c){if(r.B()||n.B())return c==4;var p=new h.l,f=new h.l,m=new h.l;switch(r.A(p),n.A(f),m.K(p),m.Zb(f),r=h.ta.Wd(a,m,!1),c){case 4:return o.dk(p,f,r);case 2:return o.jF(f,p,r);case 1:return o.jF(p,f,r);case 3:return o.ek(p,f,r);case 8:return o.cQ(p,f,r);case 32:return o.bQ(p,f,r);case 16:return o.aQ(p,f,r)}return!1},o.hJ=function(r,n,a,c){if(r.B()||n.B())return c==4;r=r.D();var p=new h.l,f=new h.l;switch(n.A(p),f.K(r),f.Zb(p),n=h.ta.Wd(a,f,!1),c){case 4:return o.Rw(r,p,n);case 2:return o.eB(r,p,n);case 1:return o.RU(r,p,n);case 3:return o.vI(r,p,n);case 8:return o.dB(r,p,n)}return!1},o.vW=function(r,n,a,c){if(r.B()||n.B())return c==4;r=r.D(),n=n.D();var p=new h.l;switch(p.K(r),p.Zb(n),a=h.ta.Wd(a,p,!1),c){case 4:return o.SU(r,n,a);case 2:return o.uI(n,r,a);case 1:return o.uI(r,n,a);case 3:return o.wI(r,n,a)}return!1},o.rt=function(r,n,a,c,p){switch(c){case 4:return o.kV(r,n,a);case 2:return o.Sw(n,r,a,p);case 1:return o.Sw(r,n,a,p);case 3:return o.nV(r,n,a);case 8:return o.vV(r,n,a);case 32:return o.qV(r,n,a,p)}return!1},o.$m=function(r,n,a,c,p){switch(c){case 4:return o.lV(r,n,a);case 1:return o.fB(r,n,a,p);case 8:return o.wV(r,n,a,p);case 16:return o.gV(r,n,a)}return!1},o.qt=function(r,n,a,c){switch(c){case 4:return o.jV(r,n,a);case 1:return o.dV(r,n,a);case 8:return o.uV(r,n,a)}return!1},o.pt=function(r,n,a,c){switch(c){case 4:return o.iV(r,n,a);case 1:return o.cV(r,n,a);case 8:return o.tV(r,n,a);case 16:return o.fV(r,n,a)}return!1},o.GI=function(r,n,a,c,p){if(o.hV(r,n,a))return c==4;if(c==4)return!1;switch(c){case 2:return o.xV(r,n,a);case 1:return o.bV(r,n,a);case 3:return o.mV(r,n,a);case 8:return o.sV(r,n,a,p);case 32:return o.pV(r,n,a,p);case 16:return o.eV(r,n,a,p)}return!1},o.gB=function(r,n,a,c){switch(c){case 4:return o.GV(r,n,a);case 2:return o.KI(n,r,a);case 1:return o.KI(r,n,a);case 3:return o.IV(r,n,a);case 8:return o.NI(r,n,a);case 32:return o.MV(r,n,a);case 16:return o.LI(r,n,a)}return!1},o.tt=function(r,n,a,c){switch(c){case 4:return o.FV(r,n,a);case 1:return o.AV(r,n,a);case 8:return o.QV(r,n,a)}return!1},o.st=function(r,n,a,c){switch(c){case 4:return o.EV(r,n,a);case 1:return o.zV(r,n,a);case 8:return o.PV(r,n,a);case 16:return o.CV(r,n,a)}return!1},o.MI=function(r,n,a,c){if(o.DV(r,n,a))return c==4;if(c==4)return!1;switch(c){case 2:return o.RV(r,n,a);case 1:return o.yV(r,n,a);case 3:return o.HV(r,n,a);case 8:return o.OV(r,n,a);case 32:return o.LV(r,n,a);case 16:return o.BV(r,n,a)}return!1},o.ZA=function(r,n,a,c){switch(c){case 4:return o.gU(r,n,a);case 2:return o.eI(n,r,a);case 1:return o.eI(r,n,a);case 3:return o.iU(r,n,a);case 32:return o.oU(r,n,a)}return!1},o.lt=function(r,n,a,c){switch(c){case 4:return o.fI(r,n,a);case 2:return o.sU(r,n,a);case 1:return o.dU(r,n,a);case 3:return o.Nw(r,n,a)}return!1},o.hI=function(r,n,a,c){switch(c){case 4:return o.fU(r,n,a);case 2:return o.rU(r,n,a);case 1:return o.cU(r,n,a);case 3:return o.hU(r,n,a);case 8:return o.qU(r,n,a);case 16:return o.eU(r,n,a)}return!1},o.nV=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!!o.ek(c,p,a)&&(c=o.qc(r,n,!1))!=4&&c!=1&&c!=2&&(!!o.dI(r,n,a)||(c=r.Qb(),p=n.Qb(),!(Math.abs(c-p)>4*Math.max(r.I(),n.I())*a)&&o.Wz(r,n,a,!0)))},o.kV=function(r,n,a){var c=o.qc(r,n,!0);return c==4||c!=1&&c!=2&&c!=1073741824&&o.EI(r,n,a)},o.vV=function(r,n,a){var c=o.qc(r,n,!1);return c!=4&&c!=1&&c!=2&&o.II(r,n,a,null)},o.qV=function(r,n,a,c){var p=o.qc(r,n,!1);return p!=4&&p!=1&&p!=2&&o.FI(r,n,a,c)},o.Sw=function(r,n,a,c){var p=new h.l,f=new h.l;return r.A(p),n.A(f),!!o.zc(p,f,a)&&(p=o.qc(r,n,!1))!=4&&p!=2&&(p==1||o.BI(r,n,a,c))},o.lV=function(r,n,a){var c=o.qc(r,n,!0);return c==4||c!=1&&c!=1073741824&&o.EI(r,n,a)},o.wV=function(r,n,a,c){var p=o.qc(r,n,!1);return p!=4&&p!=1&&o.JI(r,n,a,c)},o.gV=function(r,n,a){var c=o.qc(r,n,!1);return c!=4&&c!=1&&o.DI(r,n,a,null)},o.fB=function(r,n,a,c){var p=new h.l,f=new h.l;return r.A(p),n.A(f),!!o.zc(p,f,a)&&(p=o.qc(r,n,!1))!=4&&(p==1||o.CI(r,n,a,c))},o.jV=function(r,n,a){return h.hd.KG(r,n,a)==0},o.uV=function(r,n,a){return n=n.D(),o.HI(r,n,a)},o.dV=function(r,n,a){return n=n.D(),o.AI(r,n,a)},o.iV=function(r,n,a){var c=o.qc(r,n,!1);if(c==4)return!0;if(c==1)return!1;c=new h.l,r.A(c),c.W(a,a);for(var p=new h.h,f=0;f<n.I();f++)if(n.D(f,p),c.contains(p)){var m=h.hd.Yd(r,p,a);if(m==1||m==2)return!1}return!0},o.tV=function(r,n,a){var c=this.qc(r,n,!1);if(c==4||c==1)return!1;c=new h.l,r.A(c),c.W(a,a);for(var p=!1,f=r,m=!1,b=0;b<n.I();b++){var x=n.Na(b);if(c.contains(x)){if((x=h.hd.Yd(f,x,a))==2)p=!0;else if(x==1)return!1}m||(!h.Dg.Ml(r,n.I()-1)||r.Bb!=null&&r.Bb.Fb!=null?f=r:(f=new h.Da,r.copyTo(f),f.fj(1)),m=!0)}return!!p},o.fV=function(r,n,a){var c=this.qc(r,n,!1);if(c==4||c==1)return!1;var p=new h.l;c=new h.l;var f=new h.l;r.A(p),n.A(f),c.K(p),c.W(a,a),f=p=!1;for(var m=r,b=!1,x=0;x<n.I();x++){var T=n.Na(x);if(c.contains(T)?(T=h.hd.Yd(m,T,a))==0?f=!0:T==1&&(p=!0):f=!0,p&&f)return!0;b||(!h.Dg.Ml(r,n.I()-1)||r.Bb!=null&&r.Bb.Fb!=null?m=r:(m=new h.Da,r.copyTo(m),m.fj(1)),b=!0)}return!1},o.cV=function(r,n,a){var c=new h.l,p=new h.l;if(r.A(c),n.A(p),!this.zc(c,p,a)||(p=this.qc(r,n,!1))==4)return!1;if(p==1)return!0;p=!1;for(var f=r,m=!1,b=0;b<n.I();b++){var x=n.Na(b);if(!c.contains(x))return!1;if((x=h.hd.Yd(f,x,a))==1)p=!0;else if(x==0)return!1;m||(!h.Dg.Ml(r,n.I()-1)||r.Bb!=null&&r.Bb.Fb!=null?f=r:(f=new h.Da,r.copyTo(f),f.fj(1)),m=!0)}return p},o.mV=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!!o.ek(c,p,a)&&((c=new h.Da).ad(n,!1),o.Wz(r,c,a,!0))},o.hV=function(r,n,a){var c=o.qc(r,n,!1);if(c==4)return!0;if(c==1||c==2)return!1;var p=new h.l;if(c=new h.l,r.A(p),n.A(c),o.zc(c,p,a)||(p=new h.h,c.dn(p),(n=h.hd.Yd(r,p,a))!=0)||(c.$I(p),(n=h.hd.Yd(r,p,a))!=0)||(c.en(p),(n=h.hd.Yd(r,p,a))!=0)||(c.cJ(p),(n=h.hd.Yd(r,p,a))!=0))return!1;n=r.ub(0),(p=new h.l).K(c),p.W(a,a);for(var f=0,m=r.I();f<m;f++){var b=n.read(2*f),x=n.read(2*f+1);if(p.contains(b,x))return!1}return!o.TG(r,c,a)},o.sV=function(r,n,a,c){var p=o.qc(r,n,!1);if(p==4||p==1||p==2)return!1;p=new h.l;var f=new h.l;return r.A(p),n.A(f),!o.zc(f,p,a)&&(f.R()<=a&&f.ca()<=a?(n=n.Ip(),o.HI(r,n,a)):f.R()<=a||f.ca()<=a?(p=new h.Ta,f=new h.Sa,n.Hf(0,f),p.nf(f),n.Hf(2,f),p.lineTo(f),o.JI(r,p,a,c)):((p=new h.Da).ad(n,!1),o.II(r,p,a,c)))},o.pV=function(r,n,a,c){var p=o.qc(r,n,!1);if(p==4||p==1||p==2)return!1;p=new h.l;var f=new h.l;return r.A(p),n.A(f),!(o.zc(f,p,a)||f.R()<=a||f.ca()<=a)&&((p=new h.Da).ad(n,!1),o.FI(r,p,a,c))},o.xV=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),o.zc(p,c,a)},o.bV=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!!o.zc(c,p,a)&&(c=o.qc(r,n,!1))!=4&&c!=2&&(c==1||(p.R()<=a&&p.ca()<=a?(n=n.Ip(),o.AI(r,n,a)):p.R()<=a||p.ca()<=a?(p=new h.Ta,c=new h.Sa,n.Hf(0,c),p.nf(c),n.Hf(2,c),p.lineTo(c),o.CI(r,p,a,null)):((p=new h.Da).ad(n,!1),o.BI(r,p,a,null))))},o.eV=function(r,n,a,c){var p=new h.l,f=new h.l;return r.A(p),n.A(f),!(o.zc(f,p,a)||f.ca()>a&&f.R()>a||f.ca()<=a&&f.R()<=a)&&(p=new h.Ta,f=new h.Sa,n.Hf(0,f),p.nf(f),n.Hf(2,f),p.lineTo(f),o.DI(r,p,a,c))},o.IV=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!(!o.ek(c,p,a)||o.qc(r,n,!1)==4)&&(!!o.dI(r,n,a)||o.Wz(r,n,a,!1))},o.GV=function(r,n,a){return this.qc(r,n,!1)==4||!!new h.Zl(r,n,a,!0).next()&&!this.UG(r,n,a)},o.NI=function(r,n,a){if(o.qc(r,n,!1)==4)return!1;var c=new h.be(0);if(o.Xz(r,n,a,c)!=0)return!1;for(var p=new h.de,f=0;f<c.size;f+=2){var m=c.read(f),b=c.read(f+1);p.Bu(m,b)}return r=r.mg(),n=n.mg(),r.Fd(n,0,n.I()),o.Mw(r,p,a)},o.LI=function(r,n,a){if(o.qc(r,n,!1)==4)return!1;var c=new h.be(0);if(o.Xz(r,n,a,c)!=0)return!1;for(var p=new h.de,f=0;f<c.size;f+=2){var m=c.read(f),b=c.read(f+1);p.Bu(m,b)}return r=r.mg(),n=n.mg(),r.Fd(n,0,n.I()),!o.Mw(r,p,a)},o.MV=function(r,n,a){return o.qc(r,n,!1)!=4&&o.WG(r,n,a)},o.KI=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!(!o.zc(c,p,a)||o.qc(r,n,!1)==4)&&o.ym(n,r,a,!1)},o.FV=function(r,n,a){return o.qc(r,n,!1)==4||(n=n.D(),!o.Yz(r,n,a))},o.QV=function(r,n,a){return o.qc(r,n,!1)!=4&&(n=n.D(),o.Zz(r,n,a))},o.AV=function(r,n,a){return o.qc(r,n,!1)!=4&&(n=n.D(),o.SG(r,n,a))},o.EV=function(r,n,a){return o.qc(r,n,!1)==4||!o.VG(r,n,a,!1)},o.PV=function(r,n,a){if(this.qc(r,n,!1)==4)return!1;var c=r.Ga(),p=new h.l,f=new h.l,m=new h.l;r.A(p),n.A(f),p.W(a,a),f.W(a,a),m.K(p),m.Ea(f),p=null;var b=r.Bb;if(b!=null){var x=b.Fb;p=b.zo,x==null&&(x=b=h.ta.jj(r,m))}else x=b=h.ta.jj(r,m);var T=x.getIterator(),I=null;p!=null&&(I=p.getIterator());var A=new h.h,P=new h.h,j=!1,D=a*a;for(p=new h.pn(n.I()),b=0;b<n.I();b++)p.write(b,0);for(b=0;b<n.I();b++)if(n.D(b,A),m.contains(A)){if(f.K(A.x,A.y,A.x,A.y),I!=null&&(I.Xi(f,a),I.next()==-1))continue;T.Xi(f,a);for(var F=T.next();F!=-1;F=T.next())if(c.Vb(x.ja(F)),(F=c.ha()).hc(F.fe(A,!1),P),h.h.yc(A,P)<=D){p.write(b,1),j=!0;break}}if(!j)return!1;for(r=r.mg(),c=new h.de,f=new h.h,b=0;b<n.I();b++)p.read(b)!=0&&(n.D(b,f),c.Bu(f.x,f.y));return this.Mw(r,c,a)},o.CV=function(r,n,a){if(this.qc(r,n,!1)==4)return!1;var c=r.Ga(),p=new h.l,f=new h.l,m=new h.l;r.A(p),n.A(f),p.W(a,a),f.W(a,a),m.K(p),m.Ea(f),p=null;var b=r.Bb;if(b!=null){var x=b.Fb;p=b.zo,x==null&&(x=b=h.ta.jj(r,m))}else x=b=h.ta.jj(r,m);var T=x.getIterator(),I=null;p!=null&&(I=p.getIterator());var A=new h.h,P=new h.h,j=!1,D=!1,F=a*a;for(p=new h.pn(n.I()),b=0;b<n.I();b++)p.write(b,0);for(b=0;b<n.I();b++)if(n.D(b,A),m.contains(A)){if(f.K(A.x,A.y,A.x,A.y),I!=null&&(I.Xi(f,a),I.next()==-1)){D=!0;continue}T.Xi(f,a);for(var N=!1,z=T.next();z!=-1;z=T.next())if(c.Vb(x.ja(z)),(z=c.ha()).hc(z.fe(A,!1),P),h.h.yc(A,P)<=F){p.write(b,1),N=j=!0;break}N||(D=!0)}else D=!0;if(!j||!D)return!1;for(r=r.mg(),c=new h.de,f=new h.h,b=0;b<n.I();b++)p.read(b)!=0&&(n.D(b,f),c.Bu(f.x,f.y));return!this.Mw(r,c,a)},o.zV=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!(!o.zc(c,p,a)||o.qc(r,n,!1)==4||!o.VG(r,n,a,!0))&&(r=r.mg(),!o.gI(r,n,a))},o.HV=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!(p.ca()>a&&p.R()>a)&&o.ek(c,p,a)},o.DV=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!o.zc(p,c,a)&&!o.TG(r,p,a)},o.OV=function(r,n,a){var c=new h.l,p=new h.l;if(r.A(c),n.A(p),p.ca()<=a&&p.R()<=a)return p=n.Ip(),o.Zz(r,p,a);if(p.ca()<=a||p.R()<=a)return p=new h.Ta,c=new h.Sa,n.Hf(0,c),p.nf(c),n.Hf(2,c),p.lineTo(c),o.NI(r,p,a);r=r.Ga(),n=new h.l,c=new h.l,n.K(p),c.K(p),n.W(-a,-a),c.W(a,a),p=!1;for(var f=new h.l,m=new h.l;r.$a();)for(;r.Ha();){if(r.ha().A(f),m.K(n),m.Ea(f),!m.B()&&(m.ca()>a||m.R()>a))return!1;m.K(c),m.Ea(f),m.B()||(p=!0)}return p},o.LV=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!(o.zc(c,p,a)||o.zc(p,c,a)||o.zc(p,c,a)||p.ca()>a&&p.R()>a||p.ca()<=a&&p.R()<=a)&&(c=new h.Ta,p=new h.Sa,n.Hf(0,p),c.nf(p),n.Hf(2,p),c.lineTo(p),o.WG(r,c,a))},o.RV=function(r,n,a){var c=new h.l,p=new h.l;if(r.A(c),n.A(p),!o.zc(p,c,a)||p.ca()<=a&&p.R()<=a)return!1;if(p.ca()<=a||p.R()<=a)return o.zc(p,c,a);r=r.Ga(),(n=new h.l).K(p),n.W(-a,-a),p=!1,c=new h.l;for(var f=new h.l;r.$a();)for(;r.Ha();)r.ha().A(c),n.hm(c)?p=!0:(f.K(n),f.Ea(c),!f.B()&&(f.ca()>a||f.R()>a)&&(p=!0));return p},o.yV=function(r,n,a){var c=new h.l,p=new h.l;return n.A(p),r.A(c),!(!o.zc(c,p,a)||p.ca()>a&&p.R()>a)&&(p.ca()<=a&&p.R()<=a?(n=n.Ip(),o.SG(r,n,a)):(c=new h.Ta,p=new h.Sa,n.Hf(0,p),c.nf(p),n.Hf(2,p),c.lineTo(p),o.ym(c,r,a,!1)))},o.BV=function(r,n,a){var c=new h.l,p=new h.l;if(r.A(c),n.A(p),o.zc(p,c,a)||p.ca()<=a&&p.R()<=a)return!1;if(p.ca()<=a||p.R()<=a)return c=new h.Ta,p=new h.Sa,n.Hf(0,p),c.nf(p),n.Hf(2,p),c.lineTo(p),o.LI(r,c,a);r=r.Ga(),n=new h.l,(c=new h.l).K(p),n.K(p),c.W(-a,-a),n.W(a,a);for(var f=p=!1,m=new h.l,b=new h.l;r.$a();)for(;r.Ha();)if(r.ha().A(m),f||n.contains(m)||(f=!0),p||(b.K(c),b.Ea(m),!b.B()&&(b.ca()>a||b.R()>a)&&(p=!0)),p&&f)return!0;return!1},o.iU=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!!o.ek(c,p,a)&&(!!o.jU(r,n,a)||o.YA(r,n,a,!1,!0,!1))},o.gU=function(r,n,a){return!o.gI(r,n,a)},o.oU=function(r,n,a){return o.YA(r,n,a,!1,!1,!0)},o.eI=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!!o.zc(c,p,a)&&o.YA(n,r,a,!0,!1,!1)},o.Mw=function(r,n,a){a*=a;for(var c=new h.h,p=new h.h,f=0;f<n.I();f++){n.D(f,p);for(var m=!1,b=0;b<r.I();b++)if(r.D(b,c),h.h.yc(c,p)<=a){m=!0;break}if(!m)return!1}return!0},o.Nw=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),o.ek(c,p,a)},o.fI=function(r,n,a){return n=n.D(),o.kt(r,n,a)},o.sU=function(r,n,a){return o.Nw(r,n,a)},o.dU=function(r,n,a){return!o.fI(r,n,a)},o.hU=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!(p.ca()>a||p.R()>a)&&o.ek(c,p,a)},o.fU=function(r,n,a){var c=new h.l,p=new h.l;if(r.A(c),n.A(p),o.zc(p,c,a))return!1;for((n=new h.l).K(p),n.W(a,a),a=new h.h,p=0;p<r.I();p++)if(r.D(p,a),n.contains(a))return!1;return!0},o.qU=function(r,n,a){var c=new h.l,p=new h.l,f=new h.l;if(n.A(c),c.ca()<=a&&c.R()<=a)return!1;if(c.ca()<=a||c.R()<=a){n=new h.h;var m=!1;p.K(c),f.K(c),p.W(a,a),c.ca()>a?f.W(0,-a):f.W(-a,0);for(var b=0;b<r.I();b++)if(r.D(b,n),p.contains(n)){if(c.ca()>a){if(n.y>f.G&&n.y<f.H)return!1}else if(n.x>f.v&&n.x<f.C)return!1;m=!0}return m}for(p.K(c),f.K(c),p.W(a,a),f.W(-a,-a),n=new h.h,m=!1,b=0;b<r.I();b++)if(r.D(b,n),p.contains(n)){if(f.hm(n))return!1;m=!0}return m},o.rU=function(r,n,a){var c=new h.l,p=new h.l;if(r.A(c),n.A(p),!o.zc(p,c,a))return!1;if(p.ca()<=a&&p.R()<=a)return o.ek(c,p,a);if(p.ca()<=a||p.R()<=a){n=!1,c=new h.l;var f=new h.l;c.K(p),f.K(p),p.ca()>a?c.W(0,-a):c.W(-a,0),f.W(a,a);for(var m=new h.h,b=0;b<r.I();b++){if(r.D(b,m),!f.contains(m))return!1;p.ca()>a?m.y>c.G&&m.y<c.H&&(n=!0):m.x>c.v&&m.x<c.C&&(n=!0)}return n}for(n=!1,c=new h.l,f=new h.l,c.K(p),f.K(p),c.W(-a,-a),f.W(a,a),m=new h.h,b=0;b<r.I();b++){if(r.D(b,m),!f.contains(m))return!1;c.hm(m)&&(n=!0)}return n},o.cU=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!(!o.zc(c,p,a)||p.ca()>a||p.R()>a)&&(n=n.Ip(),!o.kt(r,n,a))},o.eU=function(r,n,a){var c=new h.l,p=new h.l;if(r.A(c),n.A(p),o.zc(p,c,a)||p.ca()<=a&&p.R()<=a)return!1;if(p.ca()<=a||p.R()<=a){n=new h.l,c=new h.l,n.K(p),p.ca()>a?n.W(0,-a):n.W(-a,0),c.K(p),c.W(a,a);for(var f=new h.h,m=!1,b=!1,x=0;x<r.I();x++)if(r.D(x,f),m||(p.ca()>a?f.y>n.G&&f.y<n.H&&(m=!0):f.x>n.v&&f.x<n.C&&(m=!0)),b||c.contains(f)||(b=!0),m&&b)return!0;return!1}for(n=new h.l,c=new h.l,n.K(p),n.W(-a,-a),c.K(p),c.W(a,a),f=new h.h,b=m=!1,x=0;x<r.I();x++)if(r.D(x,f),!m&&n.hm(f)&&(m=!0),b||c.contains(f)||(b=!0),m&&b)return!0;return!1},o.wI=function(r,n,a){return h.h.yc(r,n)<=a*a},o.SU=function(r,n,a){return h.h.yc(r,n)>a*a},o.uI=function(r,n,a){return o.wI(r,n,a)},o.vI=function(r,n,a){var c=new h.l;return c.K(r),o.ek(c,n,a)},o.Rw=function(r,n,a){var c=new h.l;return c.K(n),c.W(a,a),!c.contains(r)},o.dB=function(r,n,a){if(n.ca()<=a&&n.R()<=a)return!1;var c=new h.l,p=new h.l;if(c.K(n),c.W(a,a),!c.contains(r))return!1;if(n.ca()<=a||n.R()<=a){if(p.K(n),n.ca()>a?p.W(0,-a):p.W(-a,0),n.ca()>a){if(r.y>p.G&&r.y<p.H)return!1}else if(r.x>p.v&&r.x<p.C)return!1;return!0}return p.K(n),p.W(-a,-a),!p.hm(r)},o.eB=function(r,n,a){if(n.ca()<=a&&n.R()<=a)return!0;if(n.ca()<=a||n.R()<=a){var c=new h.l;c.K(n),n.ca()>a?c.W(0,-a):c.W(-a,0);var p=!1;return n.ca()>a?r.y>c.G&&r.y<c.H&&(p=!0):r.x>c.v&&r.x<c.C&&(p=!0),p}return(c=new h.l).K(n),c.W(-a,-a),c.hm(r)},o.RU=function(r,n,a){return o.vI(r,n,a)},o.ek=function(r,n,a){return o.zc(r,n,a)&&o.zc(n,r,a)},o.dk=function(r,n,a){var c=new h.l;return c.K(n),c.W(a,a),!r.isIntersecting(c)},o.cQ=function(r,n,a){if(r.ca()<=a&&r.R()<=a){var c=r.sf();return o.dB(c,n,a)}if(n.ca()<=a&&n.R()<=a)return c=n.sf(),o.dB(c,r,a);if(r.ca()>a&&r.R()>a&&(n.ca()<=a||n.R()<=a)?c=n:(c=r,r=n),c.ca()<=a||c.R()<=a){if(r.ca()<=a||r.R()<=a){n=new h.yb;var p=new h.yb,f=[0,0],m=[0,0],b=new h.h;return c.dn(b),n.Dc(b),c.en(b),n.Qc(b),r.dn(b),p.Dc(b),r.en(b),p.Qc(b),n.Ea(p,null,f,m,a),n.Ea(p,null,null,null,a)==1&&(f[0]==0||f[1]==1||m[0]==0||m[1]==1)}return n=new h.l,p=new h.l,n.K(r),n.W(-a,-a),p.K(n),p.Ea(c),!(!p.B()&&(p.ca()>a||p.R()>a))}return r.W(a,a),(p=new h.l).K(c),p.Ea(r),!(p.B()||!p.B()&&p.ca()>a&&p.R()>a)},o.bQ=function(r,n,a){if(o.zc(r,n,a)||o.zc(n,r,a)||r.ca()<=a&&r.R()<=a||n.ca()<=a&&n.R()<=a)return!1;if(r.ca()<=a||r.R()<=a){if(n.ca()>a&&n.R()>a)return!1;var c=new h.yb,p=new h.yb,f=[0,0],m=[0,0],b=new h.h;return r.dn(b),c.Dc(b),r.en(b),c.Qc(b),n.dn(b),p.Dc(b),n.en(b),p.Qc(b),c.Ea(p,null,f,m,a),c.Ea(p,null,null,null,a)==2&&(0<f[0]||1>f[1])&&(0<m[0]||1>m[1])}return!(n.ca()<=a||n.R()<=a)&&((c=new h.l).K(r),c.Ea(n),!(c.B()||c.ca()<=a||c.R()<=a))},o.jF=function(r,n,a){if(!o.zc(r,n,a))return!1;if(r.ca()<=a&&r.R()<=a)return r=r.sf(),o.eB(r,n,a);if(n.ca()<=a&&n.R()<=a)return n=n.sf(),o.eB(n,r,a);if(r.ca()<=a||r.R()<=a)return o.zc(r,n,a);if(n.ca()<=a||n.R()<=a){var c=new h.l;return c.K(r),c.W(-a,-a),c.hm(n)?!0:((r=new h.l).K(c),r.Ea(n),!(r.B()||r.ca()<=a&&r.R()<=a))}return o.zc(r,n,a)},o.aQ=function(r,n,a){if(o.zc(r,n,a)||o.zc(n,r,a)||r.ca()<=a&&r.R()<=a||n.ca()<=a&&n.R()<=a||n.ca()>a&&n.R()>a&&r.ca()>a&&r.R()>a)return!1;if(r.ca()>a&&r.R()>a)var c=n;else c=r,r=n;if(r.ca()>a&&r.R()>a){n=new h.l;var p=new h.l;return p.K(r),p.W(-a,-a),n.K(p),n.Ea(c),!(n.B()||n.ca()<=a&&n.R()<=a)}n=new h.yb,p=new h.yb;var f=[0,0],m=[0,0],b=new h.h;return c.dn(b),n.Dc(b),c.en(b),n.Qc(b),r.dn(b),p.Dc(b),r.en(b),p.Qc(b),n.Ea(p,null,f,m,a),n.Ea(p,null,null,null,a)==1&&0<f[0]&&1>f[1]&&0<m[0]&&1>m[1]},o.EI=function(r,n,a){var c=new h.l,p=new h.l,f=new h.Zl(r,n,a,!0);if(!f.next())return!0;if(this.UG(r,n,a))return!1;var m=r,b=null;n.getType()==1736&&(b=n);var x=!1,T=!1;do{var I=f.nl(),A=f.hl();if(A=n.Na(n.Ba(A)),c.K(f.uz()),c.W(a,a),c.contains(A)&&(A=h.hd.Yd(m,A,0))!=0||n.getType()==1736&&(I=r.Na(r.Ba(I)),p.K(f.az()),p.W(a,a),p.contains(I)&&(A=h.hd.Yd(b,I,0))!=0))return!1;x||(!h.Dg.Ml(r,n.da()-1)||r.Bb!=null&&r.Bb.Fb!=null?m=r:(m=new h.Da,r.copyTo(m),m.fj(1)),x=!0),n.getType()!=1736||T||(T=n,!h.Dg.Ml(T,r.da()-1)||n.Bb!=null&&n.Bb.Fb!=null?b=n:(b=new h.Da,T.copyTo(b),b.fj(1)),T=!0)}while(f.next());return!0},o.zc=function(r,n,a){var c=new h.l;return c.K(r),c.W(a,a),c.contains(n)},o.ls=function(r,n,a){var c=new h.l;return c.K(n),c.W(a,a),n=new h.h,r.dn(n),!c.contains(n)||(r.$I(n),!c.contains(n)||(r.cJ(n),!c.contains(n)||(r.en(n),!c.contains(n))))},o.dI=function(r,n,a){if(r.da()!=n.da()||r.I()!=n.I())return!1;var c=new h.h,p=new h.h,f=!0;a*=a;for(var m=0;m<r.da();m++){if(r.Vc(m)!=n.Vc(m)){f=!1;break}for(var b=r.Ba(m);b<n.Vc(m);b++)if(r.D(b,c),n.D(b,p),h.h.yc(c,p)>a){f=!1;break}if(!f)break}return!!f},o.jU=function(r,n,a){if(r.I()!=n.I())return!1;var c=new h.h,p=new h.h,f=!0;a*=a;for(var m=0;m<r.I();m++)if(r.D(m,c),n.D(m,p),h.h.yc(c,p)>a){f=!1;break}return!!f},o.YA=function(r,n,a,c,p,f){var m=!1;if(r.I()>n.I()){c&&(c=!1,m=!0);var b=n}else b=r,r=n;if(n=null,p||f||m){n=new h.pn(r.I());for(var x=0;x<r.I();x++)n.write(x,0)}x=new h.l;var T=new h.l,I=new h.l;b.A(x),r.A(T),x.W(a,a),T.W(a,a),I.K(x),I.Ea(T),T=new h.h;for(var A=new h.h,P=!0,j=h.ta.oE(r,I),D=j.getIterator(),F=a*a,N=0;N<b.I();N++)if(b.D(N,T),I.contains(T)){var z=!1;x.K(T.x,T.y,T.x,T.y),D.Xi(x,a);for(var W=D.next();W!=-1&&(W=j.ja(W),r.D(W,A),!(h.h.yc(T,A)<=F&&((p||f||m)&&n.write(W,1),z=!0,c)));W=D.next());if(!z&&(P=!1,p||c))return!1}else{if(p||c)return!1;P=!1}if(f&&P)return!1;if(c)return!0;for(x=0;x<r.I();x++)if(n.read(x)==1){if(f)return!0}else if(p||m)return!1;return!f},o.gI=function(r,n,a){if(r.I()>n.I())var c=n;else c=r,r=n;n=new h.l;var p=new h.l,f=new h.l;c.A(n),r.A(p),n.W(a,a),p.W(a,a),f.K(n),f.Ea(p),p=new h.h;for(var m=new h.h,b=a*a,x=h.ta.oE(r,f),T=x.getIterator(),I=0;I<c.I();I++)if(c.D(I,p),f.contains(p)){n.K(p.x,p.y,p.x,p.y),T.Xi(n,a);for(var A=T.next();A!=-1;A=T.next())if(r.D(x.ja(A),m),h.h.yc(p,m)<=b)return!0}return!1},o.Wz=function(r,n,a,c){return o.ym(r,n,a,c)&&o.ym(n,r,a,c)},o.ym=function(r,n,a,c){function p($e,fe){return A.QE($e,fe)}var f,m=!0,b=[0,0],x=[0,0],T=0,I=new h.ia(0),A=new o,P=new h.l,j=new h.l,D=new h.l;r.A(P),n.A(j),P.W(a,a),j.W(a,a),D.K(P),D.Ea(j),r=r.Ga(),j=n.Ga();var F=null,N=F=null,z=n.Bb;for(z!=null?(F=z.Fb,N=z.zo,F==null&&(F=h.ta.jj(n,D))):F=h.ta.jj(n,D),n=F.getIterator(),z=null,N!=null&&(z=N.getIterator());r.$a();)for(;r.Ha();){var W=!1,H=r.ha();if(H.A(P),!P.isIntersecting(D)||z!=null&&(z.Xi(P,a),z.next()==-1))return!1;for(N=H.Qb(),n.Uo(H,a),f=n.next();f!=-1;f=n.next()){j.Vb(F.ja(f)),f=j.ha();var Y=H.Ea(f,null,b,x,a);if(Y==2&&(!c||x[0]<=x[1])){Y=b[0];var Z=b[1],se=x[0],ce=x[1];if(Y*N<=a&&(1-Z)*N<=a){W=!0,T=0,I.resize(0),A.rh.length=0;var ue=r.wb();for(se=!0;se;){if(r.Ha()){if(N=(H=r.ha()).Qb(),(Y=H.Ea(f,null,b,x,a))==2&&(!c||x[0]<=x[1])&&(Y=b[0],Z=b[1],Y*N<=a&&(1-Z)*N<=a)){ue=r.wb();continue}if(j.Ha()&&(f=j.ha(),(Y=H.Ea(f,null,b,x,a))==2&&(!c||x[0]<=x[1])&&(Y=b[0],Z=b[1],Y*N<=a&&(1-Z)*N<=a))){ue=r.wb();continue}}se=!1}ue!=r.wb()&&(r.Vb(ue),r.ha());break}ue=r.wb(),f=g.construct(ue,r.gb,Y,Z,j.wb(),j.gb,se,ce),A.rh.push(f),I.add(I.size)}}if(!W){if(T==A.rh.length)return!1;for(1<I.size-T&&I.Vd(T,I.size,p),W=0;T<A.rh.length;T++)if(!((f=A.rh[I.get(T)]).Kj<W&&f.Si<W)){if(N*(f.Kj-W)>a)return!1;if(N*(1-(W=f.Si))<=a||W==1)break}if(N*(1-W)>a)return!1;T=0,I.resize(0),A.rh.length=0}}return m},o.WG=function(r,n,a){if(1>o.Xz(r,n,a,null))return!1;var c=new h.l,p=new h.l;r.A(c),n.A(p);var f=o.ls(c,p,a);return c=o.ls(p,c,a),!(!f||!c)||(f&&!c?!o.ym(n,r,a,!1):c&&!f?!o.ym(r,n,a,!1):!o.ym(r,n,a,!1)&&!o.ym(n,r,a,!1))},o.Xz=function(r,n,a,c){function p(xe,gt){return P.QE(xe,gt)}if(r.yz()>n.yz())var f=n,m=r;else f=r,m=n;r=f.Ga(),n=m.Ga();var b=[0,0],x=[0,0],T=-1,I=0,A=new h.ia(0),P=new o,j=new h.l,D=new h.l,F=new h.l;f.A(j),m.A(D),j.W(a,a),D.W(a,a),F.K(j),F.Ea(D),f=null,c!=null&&(f=new h.h);var N=D=D=null,z=m.Bb;for(z!=null?(D=z.Fb,N=z.zo,D==null&&(D=h.ta.jj(m,F))):D=h.ta.jj(m,F),m=D.getIterator(),z=null,N!=null&&(z=N.getIterator());r.$a();)for(N=0;r.Ha();){var W=r.ha();if(W.A(j),j.isIntersecting(F)){if(z!=null&&(z.Xi(j,a),z.next()==-1))continue;var H=W.Qb();m.Uo(W,a);for(var Y=m.next();Y!=-1;Y=m.next()){var Z=D.ja(Y);n.Vb(Z);var se=n.ha(),ce=se.Qb(),ue=W.Ea(se,null,b,x,a);if(0<ue){Y=b[0],T=x[0];var $e=ue==2?b[1]:NaN,fe=ue==2?x[1]:NaN;if(ue==2){if(H*($e-Y)>a)return 1;var ze=H*($e-Y);if(n.Ha()){if(se=n.ha(),(ue=W.Ea(se,null,b,null,a))==2){ue=b[0];var Re=b[1];if(ze+(ue=H*(Re-ue))>a)return 1}n.Vb(Z),n.ha()}if(!n.vm()){if(n.li(),se=n.li(),(ue=W.Ea(se,null,b,null,a))==2&&(ue=b[0],ze+(ue=H*((Re=b[1])-ue))>a))return 1;n.Vb(Z),n.ha()}if(r.Ha()){if(Z=r.wb(),(ue=(W=r.ha()).Ea(se,null,b,null,a))==2&&(ue=b[0],ze+(ue=H*((Re=b[1])-ue))>a))return 1;r.Vb(Z),r.ha()}if(!r.vm()){if(Z=r.wb(),r.li(),(ue=(W=r.li()).Ea(se,null,b,null,a))==2&&(ue=b[0],ze+(ue=ce*((Re=b[1])-ue))>a))return 1;r.Vb(Z),r.ha()}se=g.construct(r.wb(),r.gb,Y,$e,n.wb(),n.gb,T,fe),P.rh.push(se),A.add(A.size)}T=0,c!=null&&(W.hc(Y,f),c.add(f.x),c.add(f.y))}}if(I<P.rh.length){for(A.Vd(I,A.size,p),W=0,Y=P.rh[A.get(I)].Mm;I<P.rh.length;I++)if(!((se=P.rh[A.get(I)]).Kj<W&&se.Si<W))if(H*(se.Kj-W)>a)N=H*(se.Si-se.Kj),W=se.Si,Y=se.Mm;else{if(se.Mm!=Y?(N=H*(se.Si-se.Kj),Y=se.Mm):N+=H*(se.Si-se.Kj),N>a)return 1;if((W=se.Si)==1)break}H*(1-W)>a&&(N=0),I=0,A.resize(0),P.rh.length=0}}}return T},o.UG=function(r,n,a){var c=r.Ga(),p=n.Ga();for(r=new h.Zl(r,n,a,!1);r.next();){n=r.nl();var f=r.hl();if(c.Vb(n),p.Vb(f),n=c.ha(),0<p.ha().Ea(n,null,null,null,a))return!0}return!1},o.VG=function(r,n,a,c){var p=r.Ga(),f=new h.l,m=new h.l,b=new h.l;r.A(f),n.A(m),f.W(a,a),f.contains(m),m.W(a,a),b.K(f),b.Ea(m),(f=r.Bb)!=null?(f=f.Fb)==null&&(f=h.ta.jj(r,b)):f=h.ta.jj(r,b),r=f.getIterator();for(var x=new h.h,T=new h.h,I=a*a,A=0;A<n.I();A++)if(n.D(A,x),b.contains(x)){m.K(x.x,x.y,x.x,x.y),r.Xi(m,a);for(var P=!1,j=r.next();j!=-1;j=r.next())if(p.Vb(f.ja(j)),(j=p.ha()).hc(j.fe(x,!1),T),h.h.yc(T,x)<=I){P=!0;break}if(c){if(!P)return!1}else if(P)return!0}return!!c},o.Yz=function(r,n,a){var c=new h.h,p=a*a,f=r.Ga();if((r=r.Bb)!=null&&(r=r.Fb)!=null){var m=new h.l;for(m.K(n),m=(a=r.MF(m,a)).next();m!=-1;m=a.next())if(f.Vb(r.ja(m)),f.Ha()){var b=(m=f.ha()).fe(n,!1);if(m.hc(b,c),h.h.yc(n,c)<=p)return!0}return!1}for(r=new h.l;f.$a();)for(;f.Ha();)if((m=f.ha()).A(r),r.W(a,a),r.contains(n)&&(b=m.fe(n,!1),m.hc(b,c),h.h.yc(n,c)<=p))return!0;return!1},o.SG=function(r,n,a){return o.Yz(r,n,a)&&!o.Zz(r,n,a)},o.Zz=function(r,n,a){return r=r.mg(),!o.kt(r,n,a)},o.TG=function(r,n,a){if(r.tm()){var c=new h.yb(n.v,n.G,n.v,n.H),p=new h.yb(n.v,n.H,n.C,n.H),f=new h.yb(n.C,n.H,n.C,n.G);for(n=new h.yb(n.C,n.G,n.v,n.G),r=r.Ga();r.$a();)for(;r.Ha();){var m=r.ha();if(m.isIntersecting(c,a)||m.isIntersecting(p,a)||m.isIntersecting(f,a)||m.isIntersecting(n,a))return!0}}else{(c=new h.l).K(n),c.W(a,a),a=r.ub(0),p=new h.h,f=new h.h,n=new h.h,m=new h.h;for(var b=0,x=r.da();b<x;b++)for(var T=!0,I=r.Ba(b),A=r.Vc(b);I<A;I++)if(T)a.tc(2*I,f),T=!1;else{if(a.tc(2*I,p),n.L(f),m.L(p),c.zy(n,m)!=0)return!0;f.L(p)}}return!1},o.qc=function(r,n,a){var c=r.getType(),p=n.getType();if(h.aa.xj(c)){var f=r.Bb;if(f!=null&&(f=f.Fk)!=null)if(p==33){var m=n.D();if((m=f.So(m.x,m.y))==1)return 1;if(m==0)return 4}else{if(m=new h.l,n.A(m),(m=f.Ro(m))==1)return 1;if(m==0)return 4;if(a&&h.aa.xj(p)&&o.HE(n,f))return 1073741824}}if(h.aa.xj(p)&&(f=n.Bb)!=null&&(f=f.Fk)!=null)if(c==33){if(r=r.D(),(m=f.So(r.x,r.y))==1)return 2;if(m==0)return 4}else{if(n=new h.l,r.A(n),(m=f.Ro(n))==1)return 2;if(m==0)return 4;if(a&&h.aa.xj(c)&&o.HE(r,f))return 1073741824}return 0},o.HE=function(r,n){for(var a=r.I(),c=new h.h,p=0;p<a;p++)if(r.D(p,c),n.So(c.x,c.y)==1)return!0;return!1},o.II=function(r,n,a,c){for(var p=1<=r.om(0)&&1<=n.om(0),f=r.Ga(),m=n.Ga(),b=[0,0],x=[0,0],T=new h.Zl(r,n,a,!1),I=!1;T.next();){var A=T.nl(),P=T.hl();if(f.Vb(A),m.Vb(P),A=f.ha(),(P=m.ha().Ea(A,null,x,b,a))==2){if(I=b[0],P=b[1],A=A.Qb(),p&&(P-I)*A>a)return!1;I=!0}else if(P!=0){if(I=b[0],A=x[0],0<I&&1>I&&0<A&&1>A)return!1;I=!0}}return!!I&&(f=new h.l,m=new h.l,p=new h.l,r.A(f),n.A(m),f.W(1e3*a,1e3*a),m.W(1e3*a,1e3*a),p.K(f),p.Ea(m),!(10<r.I()&&(r=h.Ud.clip(r,p,a,0),r.B())||10<n.I()&&(n=h.Ud.clip(n,p,a,0),n.B()))&&h.am.rt(r,n,a,"F********",c))},o.FI=function(r,n,a,c){var p=1<=r.om(0)&&1<=n.om(0),f=new h.l,m=new h.l,b=new h.l;r.A(f),n.A(m);for(var x=!1,T=o.ls(f,m,a),I=o.ls(m,f,a),A=r.Ga(),P=n.Ga(),j=[0,0],D=[0,0],F=new h.Zl(r,n,a,!1);F.next();){var N=F.nl(),z=F.hl();if(A.Vb(N),P.Vb(z),z=A.ha(),(N=P.ha().Ea(z,null,D,j,a))==2){N=j[0];var W=j[1];if(z=z.Qb(),p&&(W-N)*z>a&&(x=!0,T&&I))return!0}else if(N!=0&&(N=j[0],z=D[0],0<N&&1>N&&0<z&&1>z))return!0}if(p=new h.l,A=new h.l,p.K(f),p.W(1e3*a,1e3*a),A.K(m),A.W(1e3*a,1e3*a),b.K(p),b.Ea(A),f="",f=x?f+"**":f+"T*",T){if(10<n.I()&&(n=h.Ud.clip(n,b,a,0)).B())return!1;f+="****"}else f+="T***";if(I){if(10<r.I()&&(r=h.Ud.clip(r,b,a,0)).B())return!1;f+="***"}else f+="T**";return h.am.rt(r,n,a,f.toString(),c)},o.BI=function(r,n,a,c){var p=[!1],f=o.zI(r,n,a,p);return p[0]?f:(p=new h.l,n.A(p),p.W(1e3*a,1e3*a),!(10<r.I()&&(r=h.Ud.clip(r,p,a,0),r.B()))&&h.am.Sw(r,n,a,c))},o.zI=function(r,n,a,c){c[0]=!1;for(var p=r.Ga(),f=n.Ga(),m=[0,0],b=[0,0],x=new h.Zl(r,n,a,!1),T=!1;x.next();){var I=x.nl(),A=x.hl();if(p.Vb(I,-1),f.Vb(A,-1),I=p.ha(),(I=f.ha().Ea(I,null,b,m,a))!=0&&(T=!0,I==1&&(I=m[0],A=b[0],0<I&&1>I&&0<A&&1>A)))return c[0]=!0,!1}if(!T){for(c[0]=!0,m=new h.l,r.A(m),m.W(a,a),x=r,T=!1,b=new h.l,c=0,p=n.da();c<p;c++)if(0<n.Ja(c)){if(n.Rj(c,b),!m.isIntersecting(b)||(f=n.Na(n.Ba(c)),(f=h.Dg.wm(x,f,0))==0))return!1;T||(!h.Dg.Ml(r,n.da()-1)||r.Bb!=null&&r.Bb.Fb!=null?x=r:(f=new h.Da,r.copyTo(f),f.fj(1),x=f),T=!0)}if(r.da()==1||n.getType()==1607)return!0;for(m=new h.l,n.A(m),m.W(a,a),b=n,x=!1,a=new h.l,c=0,p=r.da();c<p;c++)if(0<r.Ja(c)){if(r.Rj(c,a),m.isIntersecting(a)&&(f=r.Na(r.Ba(c)),(f=h.Dg.wm(b,f,0))==1))return!1;x||(!h.Dg.Ml(n,r.da()-1)||n.Bb!=null&&n.Bb.Fb!=null?b=n:(f=new h.Da,n.copyTo(f),f.fj(1),b=f),x=!0)}return!0}return!1},o.JI=function(r,n,a,c){for(var p=r.Ga(),f=n.Ga(),m=[0,0],b=[0,0],x=new h.Zl(r,n,a,!1),T=!1;x.next();){var I=x.nl(),A=x.hl();if(p.Vb(I),f.Vb(A),I=p.ha(),(I=f.ha().Ea(I,null,b,m,a))==2)T=!0;else if(I!=0){if(T=m[0],I=b[0],0<T&&1>T&&0<I&&1>I)return!1;T=!0}}return!!T&&(f=new h.l,m=new h.l,p=new h.l,r.A(f),n.A(m),f.W(1e3*a,1e3*a),m.W(1e3*a,1e3*a),p.K(f),p.Ea(m),!(10<r.I()&&(r=h.Ud.clip(r,p,a,0),r.B())||10<n.I()&&(n=h.Ud.clip(n,p,a,0),n.B()))&&h.am.$m(r,n,a,"F********",c))},o.DI=function(r,n,a,c){for(var p=r.Ga(),f=n.Ga(),m=[0,0],b=[0,0],x=new h.Zl(r,n,a,!1),T=!1;x.next();){var I=x.nl(),A=x.hl();if(p.Vb(I),f.Vb(A),I=p.ha(),(I=f.ha().Ea(I,null,b,m,a))==2)T=!0;else if(I!=0){if(T=m[0],I=b[0],0<T&&1>T&&0<I&&1>I)return!0;T=!0}}return!!T&&(f=new h.l,m=new h.l,b=new h.l,x=new h.l,p=new h.l,r.A(f),n.A(m),o.ls(m,f,a)?(b.K(f),b.W(1e3*a,1e3*a),x.K(m),x.W(1e3*a,1e3*a),p.K(b),p.Ea(x),!(10<r.I()&&(r=h.Ud.clip(r,p,a,0),r.B())||10<n.I()&&(n=h.Ud.clip(n,p,a,0),n.B()))&&(a=h.am.$m(r,n,a,"T********",c))):a=h.am.$m(r,n,a,"T*****T**",c))},o.CI=function(r,n,a,c){var p=[!1],f=o.zI(r,n,a,p);return p[0]?f:(p=new h.l,n.A(p),p.W(1e3*a,1e3*a),!(10<r.I()&&(r=h.Ud.clip(r,p,a,0),r.B()))&&h.am.fB(r,n,a,c))},o.AI=function(r,n,a){return h.hd.Yd(r,n,a)==1},o.HI=function(r,n,a){return h.hd.Yd(r,n,a)==2},o.kt=function(r,n,a){var c=new h.h;a*=a;for(var p=0;p<r.I();p++)if(r.D(p,c),h.h.yc(c,n)<=a)return!1;return!0},o.prototype.QE=function(r,n){return r=this.rh[r],n=this.rh[n],r.Mm<n.Mm||r.Mm==n.Mm&&(r.pw<n.pw||r.pw==n.pw&&(r.Kj<n.Kj||r.Kj==n.Kj&&(r.Si<n.Si||r.Si==n.Si&&r.BH<n.BH)))?-1:1},o}();h.ud=l}(q||(q={})),function(h){var k,g,l;(g=k||(k={}))[g.InteriorInterior=0]="InteriorInterior",g[g.InteriorBoundary=1]="InteriorBoundary",g[g.InteriorExterior=2]="InteriorExterior",g[g.BoundaryInterior=3]="BoundaryInterior",g[g.BoundaryBoundary=4]="BoundaryBoundary",g[g.BoundaryExterior=5]="BoundaryExterior",g[g.ExteriorInterior=6]="ExteriorInterior",g[g.ExteriorBoundary=7]="ExteriorBoundary",g[g.ExteriorExterior=8]="ExteriorExterior",function(o){o[o.AreaAreaPredicates=0]="AreaAreaPredicates",o[o.AreaLinePredicates=1]="AreaLinePredicates",o[o.LineLinePredicates=2]="LineLinePredicates",o[o.AreaPointPredicates=3]="AreaPointPredicates",o[o.LinePointPredicates=4]="LinePointPredicates",o[o.PointPointPredicates=5]="PointPointPredicates"}(l||(l={})),k=function(){function o(){this.le=0,this.j=new h.iu,this.J=[0,0,0,0,0,0,0,0,0],this.Za=[0,0,0,0,0,0,0,0,0],this.ea=[!1,!1,!1,!1,!1,!1,!1,!1,!1],this.Sm=this.vw=-1}return o.yB=function(r,n,a,c,p){if(c.length!=9)throw h.i.fa("relation string length has to be 9 characters");for(var f=0;9>f;f++){var m=c.charAt(f);if(m!="*"&&m!="T"&&m!="F"&&m!="0"&&m!="1"&&m!="2")throw h.i.fa("relation string")}if((f=this.MR(c,r.Db(),n.Db()))!=0)return h.ud.zB(r,n,a,f,p);f=new h.l,r.A(f),m=new h.l,n.A(m);var b=new h.l;if(b.K(f),b.Zb(m),a=h.ta.Wd(a,b,!1),r=this.WE(r,a),n=this.WE(n,a),r.B()||n.B())return this.uW(r,n,c);switch(f=r.getType(),m=n.getType(),b=!1,f){case 1736:switch(m){case 1736:b=this.rt(r,n,a,c,p);break;case 1607:b=this.$m(r,n,a,c,p);break;case 33:b=this.qt(r,n,a,c);break;case 550:b=this.pt(r,n,a,c,p)}break;case 1607:switch(m){case 1736:b=this.$m(n,r,a,this.Zp(c),p);break;case 1607:b=this.gB(r,n,a,c,p);break;case 33:b=this.tt(r,n,a,c,p);break;case 550:b=this.st(r,n,a,c,p)}break;case 33:switch(m){case 1736:b=this.qt(n,r,a,this.Zp(c));break;case 1607:b=this.tt(n,r,a,this.Zp(c),p);break;case 33:b=this.$U(r,n,a,c);break;case 550:b=this.lt(n,r,a,this.Zp(c))}break;case 550:switch(m){case 1736:b=this.pt(n,r,a,this.Zp(c),p);break;case 1607:b=this.st(n,r,a,this.Zp(c),p);break;case 550:b=this.ZA(r,n,a,c,p);break;case 33:b=this.lt(r,n,a,c)}break;default:b=!1}return b},o.rt=function(r,n,a,c,p){var f=new o;f.Yi(),f.bj(c),f.xJ();var m=new h.l,b=new h.l;return r.A(m),n.A(b),c=!1,h.ud.dk(m,b,a)&&(f.Cu(r,n),c=!0),c||((m=h.ud.qc(r,n,!1))==4?(f.Cu(r,n),c=!0):m==1?(f.ly(n),c=!0):m==2&&(f.ZD(r),c=!0)),c||(r=(c=new h.gd).Ib(r),n=c.Ib(n),f.Wo(c,a,p),f.Bp(r,n),f.j.Ug()),o.fg(f.J,f.Xc)},o.Sw=function(r,n,a,c){var p=new o;p.Yi(),p.bj("T*****F**"),p.xJ();var f=new h.l,m=new h.l;r.A(f),n.A(m);var b=!1;return h.ud.dk(f,m,a)&&(p.Cu(r,n),b=!0),b||((f=h.ud.qc(r,n,!1))==4?(p.Cu(r,n),b=!0):f==1?(p.ly(n),b=!0):f==2&&(p.ZD(r),b=!0)),b?this.fg(p.J,p.Xc):(r=(b=new h.gd).Ib(r),f=b.Ib(n),h.Tk.V(b,a,c,!1),a=b.Ne(f).mg(),b.Gp(0,!0,!0),h.rn.V(b,r,-1,!1,c),b.I(r)!=0&&(h.rn.V(b,f,-1,!1,c),p.er(b,c),(n=b.I(f)==0)||(p.Bp(r,f),p.j.Ug(),f=this.fg(p.J,p.Xc))?(r=b.Ne(r),r=(b=new h.gd).Ib(r),f=b.Ib(a),p.er(b,c),p.le=0,p.Yi(),p.bj(n?"T*****F**":"******F**"),p.IB(),p.Bp(r,f),p.j.Ug(),this.fg(p.J,p.Xc)):f))},o.$m=function(r,n,a,c,p){var f=new o;f.Yi(),f.bj(c),f.IB();var m=new h.l,b=new h.l;return r.A(m),n.A(b),c=!1,h.ud.dk(m,b,a)&&(f.Du(r,n),c=!0),c||((m=h.ud.qc(r,n,!1))==4?(f.Du(r,n),c=!0):m==1&&(f.$D(n),c=!0)),c||(r=(c=new h.gd).Ib(r),n=c.Ib(n),f.Wo(c,a,p),f.kh=f.j.Dp(),o.Jw(n,f.j,f.kh),f.Bp(r,n),f.j.Ep(f.kh),f.j.Ug()),o.fg(f.J,f.Xc)},o.fB=function(r,n,a,c){var p=new o;p.Yi(),p.bj("T*****F**"),p.IB();var f=new h.l,m=new h.l;r.A(f),n.A(m);var b=!1;return h.ud.dk(f,m,a)&&(p.Du(r,n),b=!0),b||((f=h.ud.qc(r,n,!1))==4?(p.Du(r,n),b=!0):f==1&&(p.$D(n),b=!0)),b?this.fg(p.J,p.Xc):(r=(b=new h.gd).Ib(r),n=b.Ib(n),p.Wo(b,a,c),b.I(r)!=0&&(p.Bp(r,n),p.j.Ug(),this.fg(p.J,p.Xc)))},o.pt=function(r,n,a,c,p){var f=new o;f.Yi(),f.bj(c),f.yJ();var m=new h.l,b=new h.l;return r.A(m),n.A(b),c=!1,h.ud.dk(m,b,a)&&(f.Eu(r),c=!0),c||((m=h.ud.qc(r,n,!1))==4?(f.Eu(r),c=!0):m==1&&(f.zN(),c=!0)),c||(r=(c=new h.gd).Ib(r),n=c.Ib(n),f.Wo(c,a,p),f.Gy(r,n),f.j.Ug()),o.fg(f.J,f.Xc)},o.gB=function(r,n,a,c,p){var f=new o;f.Yi(),f.bj(c),f.eX(),c=new h.l;var m=new h.l;r.A(c),n.A(m);var b=!1;return h.ud.dk(c,m,a)&&(f.PG(r,n),b=!0),b||h.ud.qc(r,n,!1)!=4||(f.PG(r,n),b=!0),b||(r=(c=new h.gd).Ib(r),n=c.Ib(n),f.Wo(c,a,p),f.Yh=f.j.Dp(),f.kh=f.j.Dp(),o.Jw(r,f.j,f.Yh),o.Jw(n,f.j,f.kh),f.Bp(r,n),f.j.Ep(f.Yh),f.j.Ep(f.kh),f.j.Ug()),o.fg(f.J,f.Xc)},o.st=function(r,n,a,c,p){var f=new o;f.Yi(),f.bj(c),f.MJ(),c=new h.l;var m=new h.l;r.A(c),n.A(m);var b=!1;return h.ud.dk(c,m,a)&&(f.Vz(r),b=!0),b||h.ud.qc(r,n,!1)!=4||(f.Vz(r),b=!0),b||(r=(c=new h.gd).Ib(r),n=c.Ib(n),f.Wo(c,a,p),f.Yh=f.j.Dp(),o.Jw(r,f.j,f.Yh),f.Gy(r,n),f.j.Ep(f.Yh),f.j.Ug()),o.fg(f.J,f.Xc)},o.ZA=function(r,n,a,c,p){var f=new o;f.Yi(),f.bj(c),f.RJ(),c=new h.l;var m=new h.l;r.A(c),n.A(m);var b=!1;return h.ud.dk(c,m,a)&&(f.yI(),b=!0),b||(r=(c=new h.gd).Ib(r),n=c.Ib(n),f.Wo(c,a,p),f.Gy(r,n),f.j.Ug()),o.fg(f.J,f.Xc)},o.qt=function(r,n,a,c){var p=new o;p.Yi(),p.bj(c),p.yJ();var f=new h.l;r.A(f),n=n.D();var m=!1;return h.ud.Rw(n,f,a)&&(p.Eu(r),m=!0),m||((a=h.hd.Yd(r,n,a))==1?(p.J[0]=0,p.J[2]=2,p.J[3]=-1,p.J[5]=1,p.J[6]=-1):a==2?(p.J[6]=-1,r.Ke()!=0?(p.J[0]=-1,p.J[3]=0,p.J[2]=2,p.J[5]=1):(p.J[0]=0,p.J[3]=-1,p.J[5]=-1,a=new h.l,r.A(a),p.J[2]=a.ca()==0&&a.R()==0?-1:1)):p.Eu(r)),this.fg(p.J,c)},o.tt=function(r,n,a,c,p){var f=new o;f.Yi(),f.bj(c),f.MJ();var m=new h.l;r.A(m),c=n.D();var b=!1;if(h.ud.Rw(c,m,a)&&(f.Vz(r),b=!0),!b){m=null;var x=b=!1;(f.ea[0]||f.ea[6])&&(h.ud.Yz(r,c,a)?(f.ea[0]&&(m=h.pi.gm(r,p),x=!h.ud.kt(m,c,a),b=!0,f.J[0]=x?-1:0),f.J[6]=-1):(f.J[0]=-1,f.J[6]=0)),f.ea[3]&&(m!=null&&m.B()?f.J[3]=-1:(b||(m==null&&(m=h.pi.gm(r,p)),x=!h.ud.kt(m,c,a),b=!0),f.J[3]=x?0:-1)),f.ea[5]&&(m!=null&&m.B()?f.J[5]=-1:b&&!x?f.J[5]=0:(m==null&&(m=h.pi.gm(r,p)),p=h.ud.Nw(m,n,a),f.J[5]=p?-1:0)),f.ea[2]&&(r.Qb()!=0?f.J[2]=1:((p=new h.de(r.description)).Fd(r,0,r.I()),r=h.ud.Nw(p,n,a),f.J[2]=r?-1:0))}return this.fg(f.J,f.Xc)},o.lt=function(r,n,a,c){var p=new o;p.Yi(),p.bj(c),p.RJ();var f=new h.l;r.A(f),n=n.D();var m=!1;if(h.ud.Rw(n,f,a)&&(p.yI(),m=!0),!m){f=!1,m=!0,a*=a;for(var b=0;b<r.I();b++){var x=r.Na(b);if(h.h.yc(x,n)<=a?f=!0:m=!1,f&&!m)break}f?(p.J[0]=0,p.J[2]=m?-1:0,p.J[6]=-1):(p.J[0]=-1,p.J[2]=0,p.J[6]=0)}return o.fg(p.J,c)},o.$U=function(r,n,a,c){r=r.D(),n=n.D();for(var p=[],f=0;9>f;f++)p[f]=-1;return h.h.yc(r,n)<=a*a?p[0]=0:(p[2]=0,p[6]=0),p[8]=2,o.fg(p,c)},o.fg=function(r,n){for(var a=0;9>a;a++)switch(n.charAt(a)){case"T":if(r[a]==-1)return!1;break;case"F":if(r[a]!=-1)return!1;break;case"0":if(r[a]!=0)return!1;break;case"1":if(r[a]!=1)return!1;break;case"2":if(r[a]!=2)return!1}return!0},o.uW=function(r,n,a){var c=[-1,-1,-1,-1,-1,-1,-1,-1,-1];if(r.B()&&n.B()){for(var p=0;9>p;p++)c[p]=-1;return this.fg(c,a)}return p=!1,r.B()&&(r=n,p=!0),c[0]=-1,c[1]=-1,c[3]=-1,c[4]=-1,c[6]=-1,c[7]=-1,c[8]=2,n=r.getType(),h.aa.Hc(n)?n==1736?r.Ke()!=0?(c[2]=2,c[5]=1):(c[5]=-1,n=new h.l,r.A(n),c[2]=n.ca()==0&&n.R()==0?0:1):(n=r.Qb()!=0,c[2]=n?1:0,c[5]=h.pi.aq(r)?0:-1):(c[2]=0,c[5]=-1),p&&this.vK(c),this.fg(c,a)},o.MR=function(r,n,a){return o.dQ(r)?3:o.UP(r)?4:o.cY(r,n,a)?8:o.CP(r,n,a)?16:o.eP(r)?1:o.EU(r,n,a)?32:0},o.dQ=function(r){return r.charAt(0)=="T"&&r.charAt(1)=="*"&&r.charAt(2)=="F"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="F"&&r.charAt(6)=="F"&&r.charAt(7)=="F"&&r.charAt(8)=="*"},o.UP=function(r){return r.charAt(0)=="F"&&r.charAt(1)=="F"&&r.charAt(2)=="*"&&r.charAt(3)=="F"&&r.charAt(4)=="F"&&r.charAt(5)=="*"&&r.charAt(6)=="*"&&r.charAt(7)=="*"&&r.charAt(8)=="*"},o.cY=function(r,n,a){return(n!=0||a!=0)&&((n!=2||a!=2)&&(r.charAt(0)=="F"&&r.charAt(1)=="*"&&r.charAt(2)=="*"&&r.charAt(3)=="T"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="*"&&r.charAt(7)=="*"&&r.charAt(8)=="*"||n==1&&a==1&&r.charAt(0)=="F"&&r.charAt(1)=="T"&&r.charAt(2)=="*"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="*"&&r.charAt(7)=="*"&&r.charAt(8)=="*")||a!=0&&r.charAt(0)=="F"&&r.charAt(1)=="*"&&r.charAt(2)=="*"&&r.charAt(3)=="*"&&r.charAt(4)=="T"&&r.charAt(5)=="*"&&r.charAt(6)=="*"&&r.charAt(7)=="*"&&r.charAt(8)=="*")},o.CP=function(r,n,a){return n>a?r.charAt(0)=="T"&&r.charAt(1)=="*"&&r.charAt(2)=="*"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="T"&&r.charAt(7)=="*"&&r.charAt(8)=="*":n==1&&a==1&&r.charAt(0)=="0"&&r.charAt(1)=="*"&&r.charAt(2)=="*"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="*"&&r.charAt(7)=="*"&&r.charAt(8)=="*"},o.eP=function(r){return r.charAt(0)=="T"&&r.charAt(1)=="*"&&r.charAt(2)=="*"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="F"&&r.charAt(7)=="F"&&r.charAt(8)=="*"},o.EU=function(r,n,a){if(n==a){if(n!=1)return r.charAt(0)=="T"&&r.charAt(1)=="*"&&r.charAt(2)=="T"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="T"&&r.charAt(7)=="*"&&r.charAt(8)=="*";if(r.charAt(0)=="1"&&r.charAt(1)=="*"&&r.charAt(2)=="T"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="T"&&r.charAt(7)=="*"&&r.charAt(8)=="*")return!0}return!1},o.Jw=function(r,n,a){r=n.La(r);for(var c=n.Re;c!=-1;c=n.Rf(c))if(n.xd(c)&r){var p=n.Me(c);if(p==-1)n.nn(c,a,0);else{var f=p,m=0;do n.dh(f)&r&&m++,f=n.jc(n.xa(f));while(f!=p);n.nn(c,a,m)}}},o.Zp=function(r){var n=""+r.charAt(0);return n+=r.charAt(3),n+=r.charAt(6),n+=r.charAt(1),n+=r.charAt(4),n+=r.charAt(7),n+=r.charAt(2),(n+=r.charAt(5))+r.charAt(8)},o.prototype.Yi=function(){for(var r=0;9>r;r++)this.J[r]=-2,this.Za[r]=-2},o.vK=function(r){var n=r[1],a=r[2],c=r[5];r[1]=r[3],r[2]=r[6],r[5]=r[7],r[3]=n,r[6]=a,r[7]=c},o.prototype.bj=function(r){for(this.Xc=r,r=0;9>r;r++)this.Xc.charAt(r)!="*"?(this.ea[r]=!0,this.le++):this.ea[r]=!1},o.prototype.UJ=function(){for(var r=0;9>r;r++)this.ea[r]&&this.J[r]==-2&&(this.J[r]=-1,this.ea[r]=!1)},o.prototype.pc=function(r){return this.J[r]!=-2&&(this.J[r]==-1?(this.ea[r]=!1,this.le--,!0):this.Xc.charAt(r)!="T"&&this.Xc.charAt(r)!="F"?!(this.J[r]<this.Za[r])&&(this.ea[r]=!1,this.le--,!0):(this.ea[r]=!1,this.le--,!0))},o.prototype.xJ=function(){this.vw=0,this.Za[0]=2,this.Za[1]=1,this.Za[2]=2,this.Za[3]=1,this.Za[4]=1,this.Za[5]=1,this.Za[6]=2,this.Za[7]=1,this.Za[8]=2,this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},o.prototype.IB=function(){this.vw=1,this.Sm=3,this.Za[0]=1,this.Za[1]=0,this.Za[2]=2,this.Za[3]=1,this.Za[4]=0,this.Za[5]=1,this.Za[6]=1,this.Za[7]=0,this.Za[8]=2,this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},o.prototype.eX=function(){this.vw=2,this.Sm=4,this.Za[0]=1,this.Za[1]=0,this.Za[2]=1,this.Za[3]=0,this.Za[4]=0,this.Za[5]=0,this.Za[6]=1,this.Za[7]=0,this.Za[8]=2,this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},o.prototype.yJ=function(){this.Sm=3,this.Za[0]=0,this.Za[1]=-1,this.Za[2]=2,this.Za[3]=0,this.Za[4]=-1,this.Za[5]=1,this.Za[6]=0,this.Za[7]=-1,this.Za[8]=2,this.ea[1]&&(this.J[1]=-1,this.ea[1]=!1,this.le--),this.ea[4]&&(this.J[4]=-1,this.ea[4]=!1,this.le--),this.ea[7]&&(this.J[7]=-1,this.ea[7]=!1,this.le--),this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},o.prototype.MJ=function(){this.Sm=4,this.Za[0]=0,this.Za[1]=-1,this.Za[2]=1,this.Za[3]=0,this.Za[4]=-1,this.Za[5]=0,this.Za[6]=0,this.Za[7]=-1,this.Za[8]=2,this.ea[1]&&(this.J[1]=-1,this.ea[1]=!1,this.le--),this.ea[4]&&(this.J[4]=-1,this.ea[4]=!1,this.le--),this.ea[7]&&(this.J[7]=-1,this.ea[7]=!1,this.le--),this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},o.prototype.RJ=function(){this.Sm=5,this.Za[0]=0,this.Za[1]=-1,this.Za[2]=0,this.Za[3]=-1,this.Za[4]=-1,this.Za[5]=-1,this.Za[6]=0,this.Za[7]=-1,this.Za[8]=2,this.ea[1]&&(this.J[1]=-1,this.ea[1]=!1,this.le--),this.ea[3]&&(this.J[3]=-1,this.ea[3]=!1,this.le--),this.ea[4]&&(this.J[4]=-1,this.ea[4]=!1,this.le--),this.ea[5]&&(this.J[5]=-1,this.ea[5]=!1,this.le--),this.ea[7]&&(this.J[7]=-1,this.ea[7]=!1,this.le--),this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},o.prototype.xN=function(r,n,a){var c=!0;return this.ea[0]&&(this.CS(r,n,a),c=c&&this.pc(0)),this.ea[1]&&(this.sG(r,n,1),c=c&&this.pc(1)),this.ea[2]&&(this.tG(r,n,a,2),c=c&&this.pc(2)),this.ea[3]&&(this.sG(r,a,3),c=c&&this.pc(3)),this.ea[4]&&(this.BN(r,n,a),c=c&&this.pc(4)),this.ea[5]&&(this.eE(r,a,5),c=c&&this.pc(5)),this.ea[6]&&(this.tG(r,a,n,6),c=c&&this.pc(6)),this.ea[7]&&(this.eE(r,n,7),c=c&&this.pc(7)),c},o.prototype.Cu=function(r,n){this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.Fr(r,this.ea[2]?2:-1,this.Xc.charAt(2),this.ea[5]?5:-1,this.Xc.charAt(5)),this.Fr(n,this.ea[6]?6:-1,this.Xc.charAt(6),this.ea[7]?7:-1,this.Xc.charAt(7))},o.prototype.Fr=function(r,n,a,c,p){n==-1&&c==-1||((a!="T"&&a!="F"&&n!=-1||p!="T"&&p!="F"&&c!=-1)&&r.Ke()==0?(c!=-1&&(this.J[c]=-1),n!=-1&&(a=new h.l,r.A(a),this.J[n]=a.ca()==0&&a.R()==0?0:1)):(n!=-1&&(this.J[n]=2),c!=-1&&(this.J[c]=1)))},o.prototype.ly=function(r){this.J[2]=2,this.J[3]=-1,this.J[4]=-1,this.J[5]=1,this.J[6]=-1,this.J[7]=-1,this.Fr(r,this.ea[0]?0:-1,this.Xc.charAt(0),this.ea[1]?1:-1,this.Xc.charAt(1))},o.prototype.ZD=function(r){this.ly(r),o.vK(this.J)},o.prototype.Du=function(r,n){if(this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.ea[6]){var a=this.Xc.charAt(6);a=a=="T"||a=="F"||n.Qb()!=0,this.J[6]=a?1:0}this.ea[7]&&(n=h.pi.aq(n),this.J[7]=n?0:-1),this.Fr(r,this.ea[2]?2:-1,this.Xc.charAt(2),this.ea[5]?5:-1,this.Xc.charAt(5))},o.prototype.$D=function(r){if(this.ea[0]){var n=this.Xc.charAt(0);n=n=="T"||n=="F"||r.Qb()!=0,this.J[0]=n?1:0}this.ea[1]&&(r=h.pi.aq(r),this.J[1]=r?0:-1),this.J[2]=2,this.J[3]=-1,this.J[4]=-1,this.J[5]=1,this.J[6]=-1,this.J[7]=-1},o.prototype.Eu=function(r){this.J[0]=-1,this.J[3]=-1,this.J[6]=0,this.Fr(r,this.ea[2]?2:-1,this.Xc.charAt(2),this.ea[5]?5:-1,this.Xc.charAt(5))},o.prototype.zN=function(){this.J[0]=0,this.J[2]=2,this.J[3]=-1,this.J[5]=1,this.J[6]=-1},o.prototype.PG=function(r,n){if(this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.ea[2]){var a=this.Xc.charAt(2);a=a=="T"||a=="F"||r.Qb()!=0,this.J[2]=a?1:0}this.ea[5]&&(r=h.pi.aq(r),this.J[5]=r?0:-1),this.ea[6]&&(a=(a=this.Xc.charAt(6))=="T"||a=="F"||n.Qb()!=0,this.J[6]=a?1:0),this.ea[7]&&(n=h.pi.aq(n),this.J[7]=n?0:-1)},o.prototype.Vz=function(r){if(this.J[0]=-1,this.J[3]=-1,this.ea[2]){var n=this.Xc.charAt(2);n=n=="T"||n=="F"||r.Qb()!=0,this.J[2]=n?1:0}this.ea[5]&&(r=h.pi.aq(r),this.J[5]=r?0:-1),this.J[6]=0},o.prototype.yI=function(){this.J[0]=-1,this.J[2]=0,this.J[6]=0},o.prototype.yN=function(r,n,a){var c=!0;return this.ea[0]&&(this.DS(r,n),c=c&&this.pc(0)),this.ea[1]&&(this.zS(r,n,a,this.kh),c=c&&this.pc(1)),this.ea[2]&&(this.AS(r,n),c=c&&this.pc(2)),this.ea[3]&&(this.FN(r,n,a,this.kh),c=c&&this.pc(3)),this.ea[4]&&(this.CN(r,n,a,this.kh),c=c&&this.pc(4)),this.ea[5]&&(this.DN(r,n,a),c=c&&this.pc(5)),this.ea[6]&&(this.lQ(r,n),c=c&&this.pc(6)),this.ea[7]&&(this.kQ(r,n,a,this.kh),c=c&&this.pc(7)),c},o.prototype.mT=function(r,n,a){var c=!0;return this.ea[0]&&(this.GS(r,n,a,this.Yh,this.kh),c=c&&this.pc(0)),this.ea[1]&&(this.uG(r,n,a,this.Yh,this.kh,1),c=c&&this.pc(1)),this.ea[2]&&(this.vG(r,n,a,2),c=c&&this.pc(2)),this.ea[3]&&(this.uG(r,a,n,this.kh,this.Yh,3),c=c&&this.pc(3)),this.ea[4]&&(this.HN(r,n,a,this.Yh,this.kh),c=c&&this.pc(4)),this.ea[5]&&(this.fE(r,a,this.Yh,5),c=c&&this.pc(5)),this.ea[6]&&(this.vG(r,a,n,6),c=c&&this.pc(6)),this.ea[7]&&(this.fE(r,n,this.kh,7),c=c&&this.pc(7)),c},o.prototype.aE=function(r,n,a){var c=!0;return this.ea[0]&&(this.ES(r,n),c=c&&this.pc(0)),this.ea[2]&&(this.BS(r,n),c=c&&this.pc(2)),this.ea[3]&&(this.GN(r,n,a),c=c&&this.pc(3)),this.ea[5]&&(this.EN(r,n),c=c&&this.pc(5)),this.ea[6]&&(this.mQ(r,n),c=c&&this.pc(6)),c},o.prototype.QG=function(r,n,a){var c=!0;return this.ea[0]&&(this.HS(r,n,a,this.Yh),c=c&&this.pc(0)),this.ea[2]&&(this.FS(r,a),c=c&&this.pc(2)),this.ea[3]&&(this.JN(r,n,a,this.Yh),c=c&&this.pc(3)),this.ea[5]&&(this.IN(r,n,a,this.Yh),c=c&&this.pc(5)),this.ea[6]&&(this.nQ(r,n,a),c=c&&this.pc(6)),c},o.prototype.ZU=function(r,n,a){var c=!0;return this.ea[0]&&(this.IS(r,n,a),c=c&&this.pc(0)),this.ea[2]&&(this.wG(r,n,a,2),c=c&&this.pc(2)),this.ea[6]&&(this.wG(r,a,n,6),c=c&&this.pc(6)),c},o.prototype.CS=function(r,n,a){this.J[0]!=2&&(r=this.j.af(r))&n&&r&a&&(this.J[0]=2)},o.prototype.sG=function(r,n,a){if(this.J[a]!=1){var c=this.j.af(this.j.xa(r));this.j.af(r)&n&&c&n&&(this.J[a]=1)}},o.prototype.tG=function(r,n,a,c){this.J[c]!=2&&(r=this.j.af(r))&n&&!(r&a)&&(this.J[c]=2)},o.prototype.BN=function(r,n,a){if(this.J[4]!=1){var c=this.j.dh(r);c&n&&c&a?this.J[4]=1:this.J[4]!=0&&this.j.Ab(this.j.te(this.j.xa(r)),this.Ui)!=1&&(r=this.j.xd(this.j.uf(r)))&n&&r&a&&(this.J[4]=0)}},o.prototype.eE=function(r,n,a){if(this.J[a]!=1){var c=this.j.af(this.j.xa(r));!(this.j.af(r)&n)&&!(c&n)&&(this.J[a]=1)}},o.prototype.DS=function(r,n){if(this.J[0]!=1){var a=this.j.af(this.j.xa(r));this.j.af(r)&n&&a&n&&(this.J[0]=1)}},o.prototype.zS=function(r,n,a,c){if(this.J[1]!=0&&this.j.Ab(this.j.te(this.j.xa(r)),this.Ui)!=1){var p=this.j.uf(r),f=this.j.xd(p);!(f&n)&&this.j.af(r)&n&&(r=this.j.ng(p,c),f&a&&r%2!=0&&(this.J[1]=0))}},o.prototype.AS=function(r,n){this.J[2]!=2&&this.j.dh(r)&n&&(this.J[2]=2)},o.prototype.FN=function(r,n,a,c){if(this.J[3]!=1){var p=this.j.dh(r);p&n&&p&a?this.J[3]=1:this.J[3]!=0&&this.j.Ab(this.j.te(this.j.xa(r)),this.Ui)!=1&&(p=this.j.uf(r),(r=this.j.xd(p))&n&&(n=this.j.ng(p,c),r&a&&n%2==0&&(this.J[3]=0)))}},o.prototype.CN=function(r,n,a,c){if(this.J[4]!=0&&this.j.Ab(this.j.te(this.j.xa(r)),this.Ui)!=1){var p=this.j.uf(r);(r=this.j.xd(p))&n&&(n=this.j.ng(p,c),r&a&&n%2!=0&&(this.J[4]=0))}},o.prototype.DN=function(r,n,a){this.J[5]!=1&&(r=this.j.dh(r))&n&&!(r&a)&&(this.J[5]=1)},o.prototype.lQ=function(r,n){if(this.J[6]!=1){var a=this.j.af(this.j.xa(r));!(this.j.af(r)&n)&&!(a&n)&&(this.J[6]=1)}},o.prototype.kQ=function(r,n,a,c){if(this.J[7]!=0&&this.j.Ab(this.j.te(this.j.xa(r)),this.Ui)!=1){var p=this.j.uf(r),f=this.j.xd(p);!(f&n)&&!(this.j.af(r)&n)&&(r=this.j.ng(p,c),f&a&&r%2!=0&&(this.J[7]=0))}},o.prototype.GS=function(r,n,a,c,p){if(this.J[0]!=1){var f=this.j.dh(r);f&n&&f&a?this.J[0]=1:this.J[0]!=0&&this.j.Ab(this.j.te(this.j.xa(r)),this.Ui)!=1&&(r=this.j.uf(r),(f=this.j.xd(r))&n&&f&a&&(n=this.j.ng(r,c),p=this.j.ng(r,p),n%2==0&&p%2==0&&(this.J[0]=0)))}},o.prototype.uG=function(r,n,a,c,p,f){if(this.J[f]!=0&&this.j.Ab(this.j.te(this.j.xa(r)),this.Ui)!=1){r=this.j.uf(r);var m=this.j.xd(r);m&n&&m&a&&(n=this.j.ng(r,c),p=this.j.ng(r,p),n%2==0&&p%2!=0&&(this.J[f]=0))}},o.prototype.vG=function(r,n,a,c){this.J[c]!=1&&(r=this.j.dh(r))&n&&!(r&a)&&(this.J[c]=1)},o.prototype.HN=function(r,n,a,c,p){if(this.J[4]!=0&&this.j.Ab(this.j.te(this.j.xa(r)),this.Ui)!=1){r=this.j.uf(r);var f=this.j.xd(r);f&n&&f&a&&(n=this.j.ng(r,c),p=this.j.ng(r,p),n%2!=0&&p%2!=0&&(this.J[4]=0))}},o.prototype.fE=function(r,n,a,c){this.J[c]!=0&&this.j.Ab(this.j.te(this.j.xa(r)),this.Ui)!=1&&(r=this.j.uf(r),!(this.j.xd(r)&n)&&this.j.ng(r,a)%2!=0&&(this.J[c]=0))},o.prototype.ES=function(r,n){this.J[0]!=0&&!(this.j.xd(r)&n)&&this.j.hk(this.j.cz(r))&n&&(this.J[0]=0)},o.prototype.BS=function(r,n){this.J[2]!=2&&this.j.xd(r)&n&&(this.J[2]=2)},o.prototype.GN=function(r,n,a){this.J[3]!=0&&(r=this.j.xd(r))&n&&r&a&&(this.J[3]=0)},o.prototype.EN=function(r,n){this.J[5]!=1&&this.j.xd(r)&n&&(this.J[5]=1)},o.prototype.mQ=function(r,n){this.J[6]!=0&&!(this.j.xd(r)&n)&&!(this.j.hk(this.j.cz(r))&n)&&(this.J[6]=0)},o.prototype.HS=function(r,n,a,c){if(this.J[0]!=0){var p=this.j.xd(r);p&n&&p&a&&this.j.ng(r,c)%2==0&&(this.J[0]=0)}},o.prototype.FS=function(r,n){this.J[2]!=1&&(this.j.Me(r)!=-1?this.J[2]=1:this.J[2]!=0&&!(this.j.xd(r)&n)&&(this.J[2]=0))},o.prototype.JN=function(r,n,a,c){if(this.J[3]!=0){var p=this.j.xd(r);p&n&&p&a&&this.j.ng(r,c)%2!=0&&(this.J[3]=0)}},o.prototype.IN=function(r,n,a,c){if(this.J[5]!=0){var p=this.j.xd(r);p&n&&!(p&a)&&this.j.ng(r,c)%2!=0&&(this.J[5]=0)}},o.prototype.nQ=function(r,n,a){this.J[6]!=0&&!((r=this.j.xd(r))&n)&&r&a&&(this.J[6]=0)},o.prototype.IS=function(r,n,a){this.J[0]!=0&&(r=this.j.xd(r))&n&&r&a&&(this.J[0]=0)},o.prototype.wG=function(r,n,a,c){this.J[c]!=0&&(r=this.j.xd(r))&n&&!(r&a)&&(this.J[c]=0)},o.prototype.Bp=function(r,n){var a=!1;r=this.j.La(r),n=this.j.La(n),this.Ui=this.j.$g();for(var c=this.j.Re;c!=-1;c=this.j.Rf(c)){var p=this.j.Me(c);if(p==-1){if(this.Sm!=-1)switch(this.Sm){case 3:a=this.aE(c,r,n);break;case 4:a=this.QG(c,r,n);break;default:throw h.i.fa("internal error")}}else{var f=p;do{var m=f;if(this.j.Ab(m,this.Ui)!=1)do{switch(this.vw){case 0:a=this.xN(m,r,n);break;case 1:a=this.yN(m,r,n);break;case 2:a=this.mT(m,r,n);break;default:throw h.i.fa("internal error")}if(a)break;this.j.Kb(m,this.Ui,1),m=this.j.jc(m)}while(m!=f&&!a);if(a)break;f=this.j.jc(this.j.xa(m))}while(f!=p);if(a)break}}a||this.UJ(),this.j.Jg(this.Ui)},o.prototype.Gy=function(r,n){var a=!1;r=this.j.La(r),n=this.j.La(n);for(var c=this.j.Re;c!=-1;c=this.j.Rf(c)){switch(this.Sm){case 3:a=this.aE(c,r,n);break;case 4:a=this.QG(c,r,n);break;case 5:a=this.ZU(c,r,n);break;default:throw h.i.Qa()}if(a)break}a||this.UJ()},o.prototype.er=function(r,n){this.j.dr(r,n)},o.prototype.Wo=function(r,n,a){this.YP(r,n,a),this.er(r,a)},o.prototype.YP=function(r,n,a){for(h.Tk.V(r,n,a,!1),r.Gp(0,!0,!0),n=r.ld;n!=-1;n=r.ue(n))r.ic(n)==1736&&h.rn.V(r,n,-1,!1,a)},o.WE=function(r,n){var a=r.getType();return h.aa.yd(a)?((n=new h.Ta(r.description)).oc(r,!0),n):a==197?(a=new h.l,r.A(a),a.ca()<=n&&a.R()<=n?(n=new h.Sa(r.description),r.sf(n),n):a.ca()<=n||a.R()<=n?(n=new h.Ta(r.description),a=new h.Sa,r.Hf(0,a),n.nf(a),r.Hf(2,a),n.lineTo(a),n):((n=new h.Da(r.description)).ad(r,!1),n)):r},o}(),h.am=k}(q||(q={})),function(h){var k=function(){function o(r){this.Em=new h.ia(0),this.dw=new h.ia(0),this.wt=new h.h,this.xt=new h.h,this.g=r,this.Hs=-1}return o.prototype.bc=function(r){return this.g.bc(this.zz(r))},o.prototype.Bv=function(r){var n=this.iz(r);if(r=this.HF(r),this.g.Ma(n)==r){var a=n;n=r,r=a}return this.g.Gc(n,this.wt),this.g.Gc(r,this.xt),this.wt.y<this.xt.y},o.prototype.zz=function(r){var n=this.iz(r);return r=this.HF(r),this.g.U(n)==r?n:r},o.prototype.iz=function(r){return this.Em.get(r)},o.prototype.HF=function(r){return this.dw.get(r)},o.prototype.rF=function(r){this.Em.set(r,this.Hs),this.Hs=r},o.prototype.nI=function(r){if(this.Hs!=-1){var n=this.Hs;return this.Hs=this.Em.get(n),this.Em.set(n,r),this.dw.set(n,this.g.U(r)),n}return this.Em==null&&(this.Em=new h.ia(0),this.dw=new h.ia(0)),n=this.Em.size,this.Em.add(r),this.dw.add(this.g.U(r)),n},o.prototype.rz=function(r){return this.g.bd(this.iz(r))},o}();h.yY=k;var g=function(){function o(r){this.Be=r,this.ie=new h.yb,this.Nm=new h.yb,this.CH=0,this.Ao=null,this.yA=-1}return o.prototype.compare=function(r,n,a){a=r.ja(a);var c=this.Be.hb;if(this.yA==n)var p=this.CH;else this.Ao=c.bc(n),this.Ao==null?((r=c.g).ed(c.zz(n),this.ie),this.Ao=this.ie,p=this.ie.Pe(this.Be.yh,0)):p=this.Ao.Pe(this.Be.yh,0),this.CH=p,this.yA=n;if((r=c.bc(a))==null){(r=c.g).ed(c.zz(a),this.Nm),r=this.Nm;var f=this.Nm.Pe(this.Be.yh,0)}else f=r.Pe(this.Be.yh,0);return p==f&&(n=c.Bv(n),a=c.Bv(a),(n=.5*((a=Math.min(n?this.Ao.la:this.Ao.na,a?r.la:r.na))+this.Be.yh))==this.Be.yh&&(n=a),p=this.Ao.Pe(n,0),f=r.Pe(n,0)),p<f?-1:p>f?1:0},o.prototype.reset=function(){this.yA=-1},o}(),l=function(){function o(){this.Wm=this.Gl=null,this.fb=new h.Yj,this.fb.RP(),this.$d=new g(this),this.fb.Vo(this.$d)}return o.prototype.HQ=function(){var r=!1;if(this.fw&&(r=this.IQ()),this.g.da(this.X)==1){var n=this.g.Ob(this.X);return r=this.g.wz(n),this.g.PB(n,!0),0>r&&(r=this.g.Xa(n),this.g.pJ(r),this.g.Wg(n,this.g.Ma(r)),!0)}for(this.El=this.g.Ky(),this.wo=this.g.Ky(),n=this.g.Ob(this.X);n!=-1;n=this.g.Rb(n))this.g.gr(n,this.El,0),this.g.gr(n,this.wo,-1);n=new h.ia(0),this.yh=NaN;var a=new h.h;this.et=this.g.da(this.X),this.ro=this.g.Gd(),this.Rs=this.g.Gd();for(var c=this.Gl.rc(this.Gl.je);c!=-1;c=this.Gl.lb(c)){var p=this.Gl.getData(c);if(this.g.Gc(p,a),a.y!=this.yh&&n.size!=0&&(r=this.ut(n)||r,this.$d.reset(),n.clear(!1)),n.add(p),this.yh=a.y,this.et==0)break}for(0<this.et&&(r=this.ut(n)||r,n.clear(!1)),this.g.Td(this.ro),this.g.Td(this.Rs),n=this.g.Ob(this.X);n!=-1;)if(this.g.sj(n,this.El)==3){for(this.g.PB(n,!0),a=n,n=this.g.sj(n,this.wo);n!=-1;)c=this.g.sj(n,this.wo),this.g.ZT(this.X,this.g.Rb(a),n),a=n,n=c;n=this.g.Rb(a)}else this.g.PB(n,!1),n=this.g.Rb(n);return this.g.CB(this.El),this.g.CB(this.wo),r},o.prototype.ut=function(r){return this.$V(r)},o.prototype.$V=function(r){var n=!1;this.hb==null&&(this.hb=new k(this.g)),this.Wm==null?(this.Wm=new h.ia(0),this.Wm.Jb(16)):this.Wm.clear(!1),this.ZV(r);for(var a=0,c=r.size;a<c;a++){var p=r.get(a);p!=-1&&this.oG(p,-1)}for(a=0;a<this.Wm.size&&0<this.et;a++)if(r=this.Wm.get(a),p=this.hb.rz(this.fb.ja(r)),c=-1,this.g.sj(p,this.El)==0){p=this.fb.we(r);for(var f,m=r;p!=-1;){var b=this.fb.ja(p),x=this.hb.rz(b),T=this.g.sj(x,this.El);if(T!=0){c=x;break}m=p,p=this.fb.we(p)}p==-1?(f=!0,p=m):(b=this.fb.ja(p),f=this.hb.Bv(b),p=this.fb.lb(p),f=!f);do{if(b=this.fb.ja(p),x=this.hb.rz(b),(T=this.g.sj(x,this.El))==0&&(f!=this.hb.Bv(b)&&(n=this.g.Xa(x),this.g.pJ(n),this.g.Wg(x,this.g.Ma(n)),n=!0),this.g.gr(x,this.El,f?3:2),f||(m=this.g.sj(c,this.wo),this.g.gr(c,this.wo,x),this.g.gr(x,this.wo,m)),this.et--,this.et==0))return n;c=x,m=p,p=this.fb.lb(p),f=!f}while(m!=r)}return n},o.prototype.ZV=function(r){for(var n=0,a=r.size;n<a;n++){var c=r.get(n),p=this.g.Pa(c,this.ro),f=this.g.Pa(c,this.Rs);if(p!=-1){var m=this.fb.ja(p);this.hb.rF(m),this.g.Ra(c,this.ro,-1)}f!=-1&&(m=this.fb.ja(f),this.hb.rF(m),this.g.Ra(c,this.Rs,-1)),m=-1,p!=-1&&f!=-1?(this.fb.vd(p,-1),this.fb.vd(f,-1),r.set(n,-1)):m=p!=-1?p:f,m!=-1&&(this.oG(c,m)||this.fb.vd(m,-1),r.set(n,-1))}},o.prototype.oG=function(r,n){var a=new h.h,c=new h.h;this.g.Gc(r,a);var p=this.g.U(r);this.g.Gc(p,c);var f=!1;if(a.y<c.y){f=!0;var m=this.hb.nI(r);if(n==-1)var b=this.fb.addElement(m,-1);else b=n,this.fb.Sj(b,m);(m=this.g.Pa(p,this.ro))==-1?this.g.Ra(p,this.ro,b):this.g.Ra(p,this.Rs,b),p=this.g.bd(r),this.g.sj(p,this.El)==0&&this.Wm.add(b)}return p=this.g.Ma(r),this.g.Gc(p,c),a.y<c.y&&(f=!0,m=this.hb.nI(p),n==-1?b=this.fb.addElement(m,-1):(b=n,this.fb.Sj(b,m)),(m=this.g.Pa(p,this.ro))==-1?this.g.Ra(p,this.ro,b):this.g.Ra(p,this.Rs,b),p=this.g.bd(r),this.g.sj(p,this.El)==0&&this.Wm.add(b)),f},o.V=function(r,n,a,c){var p=new o;return p.g=r,p.X=n,p.Gl=a,p.fw=c,p.HQ()},o.prototype.IQ=function(){var r=new h.ia(0),n=new h.ia(0),a=-1,c=-1,p=new h.h;p.Rc();for(var f=-1,m=-1,b=-1,x=new h.h,T=this.Gl.rc(this.Gl.je);T!=-1;T=this.Gl.lb(T)){var I=this.Gl.getData(T);this.g.Gc(I,x);var A=this.g.bd(I);p.qb(x)&&m==A?(c==-1&&(a=this.g.Ky(),c=this.g.Gd()),b==-1&&(b=n.size,this.g.Ra(f,c,b),n.add(1),this.g.sj(A,a)==-1&&(this.g.gr(A,a,f),r.add(A))),this.g.Ra(I,c,b),n.bX(n.Fc()+1)):(b=-1,p.L(x)),f=I,m=A}if(r.size==0)return!1;for(p=new h.ia(0),f=new h.ia(0),m=0,b=r.size;m<b;m++){A=r.get(m);var P=this.g.sj(A,a);for(I=this.g.Pa(P,c),p.clear(!1),f.clear(!1),p.add(P),f.add(I),I=this.g.U(P);I!=P;I=this.g.U(I)){var j=I;if((x=this.g.Pa(j,c))!=-1)if(f.size==0)f.add(x),p.add(j);else if(f.Fc()==x){T=p.Fc();var D=this.g.U(T);P=this.g.U(j),this.g.Bc(T,P),this.g.Cc(P,T),this.g.Bc(j,D),this.g.Cc(D,j),j=[!1],D=this.g.nG(this.X,D,this.g.Xa(A),j),this.g.Ra(I,c,-1),j[0]&&this.g.Jf(A,P),I=this.g.Ja(A),I-=P=this.g.Ja(D),this.g.Vj(A,I),n.set(x,n.get(x)-1),n.get(x)==1&&(n.set(x,0),f.If(),p.If()),I=P=T}else p.add(I),f.add(x)}}return this.g.CB(a),this.g.Td(c),!0},o}();h.WL=l}(q||(q={})),function(h){var k=function(){function g(){}return g.prototype.ig=function(){this.PA=this.sb=null},g.prototype.get=function(){return this.PA},g.prototype.set=function(l){if(this.PA=l,l!=null)throw l.getType()==322&&(this.sb=l),h.i.Qa()},g.prototype.create=function(l){if(l!=322)throw h.i.fa("Not Implemented");this.Or()},g.prototype.Or=function(){this.sb==null&&(this.sb=new h.yb),this.PA=this.sb},g}();h.ig=k}(q||(q={})),function(h){(h=h.XL||(h.XL={}))[h.enumLineSeg=1]="enumLineSeg",h[h.enumBezierSeg=2]="enumBezierSeg",h[h.enumArcSeg=4]="enumArcSeg",h[h.enumNonlinearSegmentMask=6]="enumNonlinearSegmentMask",h[h.enumSegmentMask=7]="enumSegmentMask",h[h.enumDensified=8]="enumDensified"}(q||(q={})),function(h){var k=function(l){this.$i=l,this.qC=this.rC=1,this.sB=this.rB=this.tB=0},g=function(){function l(){this.Fq=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Bk=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Bf=new h.Sa,this.qa=this.Cw=0,this.mo=[],this.$s=[],this.yw=[],this.Iq=[],this.MA=[]}return l.prototype.wB=function(o){if(o!=null){for(var r=0,n=o.length;r<n;r++)this.rW(o[r]);o.length=0}},l.prototype.rW=function(o){o.$i=null,this.Iq.push(o)},l.prototype.Ow=function(o){if(this.Iq.length===0)var r=new k(o);else(r=this.Iq[this.Iq.length-1]).$i=o,--this.Iq.length;return r},l.prototype.SR=function(o,r){return o==0?this.$s[r]:this.yw[r]},l.prototype.aB=function(){this.Cw>=this.MA.length&&this.MA.push(new h.ig);var o=this.MA[this.Cw];return this.Cw++,o},l.prototype.clear=function(){this.wB(this.mo),this.wB(this.$s),this.wB(this.yw),this.Cw=0},l.prototype.Oo=function(o){this.mo.push(this.Ow(o))},l.prototype.ol=function(o){return o==0?this.$s.length:this.yw.length},l.prototype.Vp=function(o,r){return this.SR(o,r).$i},l.prototype.Ea=function(o,r){if(this.mo.length!=2)throw h.i.Qa();this.qa=o;var n=h.lc.ox(.01*o),a=!1,c=this.mo[0],p=this.mo[1];if(r||5&c.$i.zr(p.$i,o,!0)){if(c.$i.getType()==322){var f=c.$i;if(p.$i.getType()==322){r=p.$i;var m=h.yb.Zx(f,r,null,this.Fq,this.Bk,o);if(m==0)throw h.yb.Zx(f,r,null,this.Fq,this.Bk,o),h.i.Qa();o=Array(9),h.O.$u(o,null);for(var b=0;b<m;b++){var x=this.Fq[b],T=this.Bk[b],I=c.sB,A=1;x==0?(I=c.tB,A=c.rC):x==1&&(I=c.rB,A=c.qC);var P=p.sB,j=1;T==0?(P=p.tB,j=p.rC):T==1&&(P=p.rB,j=p.qC);var D=new h.h;I==P?(I=new h.h,f.hc(x,I),x=new h.h,r.hc(T,x),j/=T=A+j,h.lc.OG(I,x,j,D),h.h.yc(D,I)+h.h.yc(D,x)>n&&(a=!0)):I>P?(f.hc(x,D),x=new h.h,r.hc(T,x),h.h.yc(D,x)>n&&(a=!0)):(r.hc(T,D),I=new h.h,f.hc(x,I),h.h.yc(D,I)>n&&(a=!0)),o[b]=D}for(c=0,p=-1,b=0;b<=m;b++)(j=b<m?this.Fq[b]:1)!=c&&(n=this.aB(),f.ah(c,j,n),p!=-1&&n.get().Dc(o[p]),b!=m&&n.get().Qc(o[b]),c=j,this.$s.push(this.Ow(n.get()))),p=b;for(f=[0,0,0,0,0,0,0,0,0],b=0;b<m;b++)f[b]=b;for(1<m&&this.Bk[0]>this.Bk[1]&&(j=this.Bk[0],this.Bk[0]=this.Bk[1],this.Bk[1]=j,b=f[0],f[0]=f[1],f[1]=b),c=0,p=-1,b=0;b<=m;b++)(j=b<m?this.Bk[b]:1)!=c&&(n=this.aB(),r.ah(c,j,n),p!=-1&&(c=f[p],n.get().Dc(o[c])),b!=m&&(c=f[b],n.get().Qc(o[c])),c=j,this.yw.push(this.Ow(n.get()))),p=b;return a}}throw h.i.Qa()}return!1},l.prototype.Kz=function(o,r,n){if(r.copyTo(this.Bf),this.mo.length!=1)throw h.i.Qa();this.qa=o;var a=this.mo[0];if(n||a.$i.ru(r.D(),o,!0)){if(a.$i.getType()!=322)throw h.i.Qa();var c=(o=a.$i).fe(r.D(),!1);this.Fq[0]=c;var p=a.sB;for(n=1,c==0?(p=a.tB,n=a.rC):c==1&&(p=a.rB,n=a.qC),a=new h.h,p==0?(p=new h.h,o.hc(c,p),r=r.D(),h.lc.OG(p,r,1/(n+1),a)):0<p?(a=new h.h,o.hc(c,a)):a=r.D(),n=0,c=-1,p=0;1>=p;p++){if((r=1>p?this.Fq[p]:1)!=n){var f=this.aB();o.ah(n,r,f),c!=-1&&f.get().Dc(a),p!=1&&f.get().Qc(a),n=r,this.$s.push(this.Ow(f.get()))}c=p}this.Bf.Cb(a)}},l}();h.TC=g}(q||(q={})),function(h){var k=function(){function g(l){this.Ds=this.rk=this.sb=null,this.ag=0,this.zm=!1,this.zf=-1,this.Cl=this.Jd=0,this.gb=-1,this.ib=l,this.ag=this.Wx(this.Cl),this.zm=!1,this.rk=null,this.Ds=new h.h}return g.prototype.BW=function(l){if(this.ib!=l.ib)throw h.i.Hb();this.zf=l.zf,this.Jd=l.Jd,this.gb=l.gb,this.Cl=l.Cl,this.ag=l.ag,this.zm=l.zm,this.rk=null},g.prototype.ha=function(){if(this.zf!=this.Jd&&this.BD(),this.zm)this.Jd=(this.Jd+1)%this.ag;else{if(this.Jd==this.ag)throw h.i.ce();this.Jd++}return this.rk},g.prototype.li=function(){if(this.zm)this.Jd=(this.ag+this.Jd-1)%this.ag;else{if(this.Jd==0)throw h.i.ce();this.Jd--}return this.Jd!=this.zf&&this.BD(),this.rk},g.prototype.DW=function(){this.zf=-1,this.Jd=0},g.prototype.EW=function(){this.Jd=this.ag,this.zf=-1},g.prototype.Vb=function(l,o){if(o===void 0&&(o=-1),0<=this.gb&&this.gb<this.ib.da()){var r=this.IM();if(l>=r&&l<this.ib.Vc(this.gb))return this.zf=-1,void(this.Jd=l-r)}o=0<=o&&o<this.ib.da()&&l>=this.ib.Ba(o)&&l<this.ib.Vc(o)?o:this.ib.sz(l),this.Cl=o+1,this.gb=o,this.zf=-1,this.Jd=l-this.ib.Ba(o),this.ag=this.Wx(o),this.ib.Ba(this.gb),this.ib.dc(this.gb)},g.prototype.$a=function(){return this.gb=this.Cl,!(this.gb>=this.ib.da())&&(this.zf=-1,this.Jd=0,this.ag=this.Wx(this.gb),this.ib.Ba(this.gb),this.ib.dc(this.gb),this.Cl++,!0)},g.prototype.Zi=function(){this.ag=this.Jd=this.zf=-1,this.Cl=0,this.gb=-1},g.prototype.Wx=function(l){if(this.ib.Ac())return 0;var o=1;return this.ib.dc(l)&&(o=0),this.ib.Ja(l)-o},g.prototype.On=function(){return this.zf==this.ag-1&&this.ib.dc(this.gb)},g.prototype.JB=function(){this.zm=!0},g.prototype.wb=function(){return this.ib.nb.o[this.gb]+this.zf},g.prototype.IM=function(){return this.ib.Ba(this.gb)},g.prototype.ik=function(){return this.On()?this.ib.Ba(this.gb):this.wb()+1},g.prototype.vm=function(){return this.zf==0},g.prototype.Qn=function(){return this.zf==this.ag-1},g.prototype.Ha=function(){return this.Jd<this.ag},g.prototype.Ez=function(){return 0<this.Jd},g.prototype.Of=function(){var l=new g(this.ib);return l.zf=this.zf,l.Jd=this.Jd,l.ag=this.ag,l.gb=this.gb,l.Cl=this.Cl,l.ib=this.ib,l.zm=this.zm,l},g.prototype.BD=function(){if(0>this.Jd||this.Jd>=this.ag)throw h.i.ce();this.zf=this.Jd;var l=this.wb();this.ib.mc();var o=this.ib.Ve,r=1;switch(o!=null&&(r=7&o.read(l)),o=this.ib.description,r){case 1:this.sb==null&&(this.sb=new h.yb),this.rk=this.sb;break;case 2:throw h.i.fa("internal error");default:throw h.i.Qa()}this.rk.Nf(o),r=this.ik(),this.ib.Gc(l,this.Ds),this.rk.Dc(this.Ds),this.ib.Gc(r,this.Ds),this.rk.Qc(this.Ds);for(var n=1,a=o.Aa;n<a;n++)for(var c=o.kd(n),p=h.ra.Va(c),f=0;f<p;f++){var m=this.ib.Uc(c,l,f);this.rk.YB(c,f,m),m=this.ib.Uc(c,r,f),this.rk.OB(c,f,m)}},g.prototype.$S=function(){return this.gb==this.ib.da()-1},g.prototype.Pn=function(){var l=this.ib.VR();return l!=null&&(7&l.read(this.zf))!=1},g}();h.YL=k}(q||(q={})),function(h){var k=function(){function g(l){l instanceof h.aa?(this.xH=l,this.ya=-1,this.Ei=1):(this.vT=l.slice(0),this.ya=-1,this.Ei=l.length)}return g.prototype.La=function(){return this.ya},g.prototype.next=function(){return this.ya<this.Ei-1?(this.ya++,this.xH!=null?this.xH:this.vT[this.ya]):null},g.prototype.qe=function(){},g}();h.Zc=k}(q||(q={})),function(h){var k=function(){this.next=null},g=function(){function l(){this.Tq=this.Kw=this.Lw=0,this.kF=!1,this.gK=0,this.gn=this.Kf=this.Wl=this.Jh=null,this.Ol=0,this.vy=null,this.pl=this.oi=-1}return l.prototype.AX=function(o,r,n){this.oi=o,this.pl=r,this.Jh=this.Wl=null,this.Tq=0,this.vy=n,this.gn==null&&(this.gn=h.O.lg(384,0)),this.nK()},l.prototype.R=function(){return this.oi},l.prototype.ca=function(){return this.pl},l.prototype.flush=function(){0<this.Ol&&(this.vy.gF(this.gn,this.Ol),this.Ol=0)},l.prototype.nK=function(){if(0<this.Tq){for(var o=0;o<this.pl;o++){for(var r=this.Wl[o];r!=null;){var n=r;r=r.next,n.next=null}this.Wl[o]=null}this.Jh=null}this.Lw=this.pl,this.Kw=-1,this.Tq=0},l.prototype.iJ=function(o){for(this.kF=o==l.Cx,o=this.Lw;o<=this.Kw;o++)this.sN(),this.lN(o),this.ZP();this.nK()},l.prototype.jy=function(o,r,n,a){if(r!=a){var c=1;if(r>a&&(c=o,o=n,n=c,c=r,r=a,a=c,c=-1),!(0>a||r>=this.pl)){0>o&&0>n?n=o=-1:o>=this.oi&&n>=this.oi&&(n=o=this.oi);var p=(n-o)/(a-r);a>this.pl&&(n=p*((a=this.pl)-r)+o),0>r&&(o=p*(0-r)+o,r=0);var f=Math.max(this.oi+1,8388607);-8388607>o?(r=(0-o)/p+r,o=0):o>f&&(r=(this.oi-o)/p+r,o=this.oi),-8388607>n?a=(0-o)/p+r:n>f&&(a=(this.oi-o)/p+r),(r=h.O.truncate(r))!=(a=h.O.truncate(a))&&((n=new k).x=h.O.truncate(4294967296*o),n.y=r,n.H=a,n.WP=h.O.truncate(4294967296*p),n.dir=c,this.Wl==null&&(this.Wl=h.O.lg(this.pl,null)),n.next=this.Wl[n.y],this.Wl[n.y]=n,n.y<this.Lw&&(this.Lw=n.y),n.H>this.Kw&&(this.Kw=n.H),this.Tq++)}}},l.prototype.sN=function(){if(this.Jh!=null){for(var o=!1,r=null,n=this.Jh;n!=null;)if(n.y++,n.y==n.H){var a=n;n=n.next,r!=null?r.next=n:this.Jh=n,a.next=null}else n.x+=n.WP,r!=null&&r.x>n.x&&(o=!0),r=n,n=n.next;o&&(this.Jh=this.fK(this.Jh))}},l.prototype.lN=function(o){if(!(o>=this.pl)){var r=this.Wl[o];if(r!=null){this.Wl[o]=null,r=this.fK(r),this.Tq-=this.gK,o=this.Jh;for(var n=!0,a=r,c=null;o!=null&&a!=null;)o.x>a.x?(n&&(this.Jh=a),n=a.next,a.next=o,c!=null&&(c.next=a),c=a,a=n):(n=o.next,o.next=a,c!=null&&(c.next=o),c=o,o=n),n=!1;this.Jh==null&&(this.Jh=r)}}},l.eK=function(o,r){return 0>o?0:o>r?r:o},l.prototype.ZP=function(){if(this.Jh!=null){for(var o=0,r=this.Jh,n=h.O.truncate(h.O.XG(r.x)),a=r.next;a!=null;a=a.next)if(o=this.kF?1^o:o+a.dir,a.x>r.x){var c=h.O.truncate(h.O.XG(a.x));o!=0&&(r=l.eK(n,this.oi),(n=l.eK(c,this.oi))>r&&r<this.oi&&(this.gn[this.Ol++]=r,this.gn[this.Ol++]=n,this.gn[this.Ol++]=a.y,this.Ol==this.gn.length&&(this.vy.gF(this.gn,this.Ol),this.Ol=0))),r=a,n=c}}},l.prototype.fK=function(o){for(var r=0,n=o;n!=null;n=n.next)r++;if(this.gK=r,r==1)return o;this.Kf==null?this.Kf=h.O.lg(Math.max(r,16),null):this.Kf.length<r&&(this.Kf=h.O.lg(Math.max(r,2*this.Kf.length),null));var a=0;for(n=o;n!=null;n=n.next)this.Kf[a++]=n;for(r==2?this.Kf[0].x>this.Kf[1].x&&(o=this.Kf[0],this.Kf[0]=this.Kf[1],this.Kf[1]=o):l.AN(this.Kf,r,function(c,p){return c==p?0:c.x<p.x?-1:c.x>p.x?1:0}),o=this.Kf[0],this.Kf[0]=null,n=o,a=1;a<r;a++)n.next=this.Kf[a],n=this.Kf[a],this.Kf[a]=null;return n.next=null,o},l.AN=function(o,r,n){if(r==o.length)o.sort(n);else{var a=o.slice(0,0),c=o.slice(r);r=o.slice(0,r).sort(n),o.length=0,o.push.apply(o,a.concat(r).concat(c))}},l.Cx=0,l}();h.Px=g}(q||(q={})),function(h){var k=function(){function g(){}return g.prototype.ui=function(l,o){var r=this.g.Pa(l,this.Pq);if(this.Dl==r&&(this.Dl=this.oe.lb(this.Dl)),this.ho==r&&(this.ho=this.oe.lb(this.ho)),this.oe.jd(this.RA,r),this.bk(l),o&&(o=this.g.bd(l))!=-1&&this.g.Xa(o)==l){var n=this.g.U(l);if(n!=l){if((r=this.g.bd(n))==o)return void this.g.Jf(o,n);if((n=this.g.Ma(l))!=l&&(r=this.g.bd(n))==o)return void this.g.Jf(o,n)}this.g.Jf(o,-1),this.g.Wg(o,-1)}},g.prototype.pD=function(){for(var l=!1,o=new h.h;;){this.Wh==null?(this.Wh=new h.ia(0),this.zs=new h.ia(0),this.xe=new h.ia(0)):(this.Wh.clear(!1),this.zs.clear(!1),this.xe.clear(!1));for(var r=this.ho,n=0,a=!0;r!=this.Dl;){var c=this.oe.getData(r),p=new h.h;this.g.Gc(c,p),a&&(this.g.Gc(c,o),a=!1),p=this.g.Ma(c);var f=this.g.U(c);this.g.Pa(p,this.zg)!=-559038737&&(this.Wh.add(p),this.g.Ra(p,this.zg,-559038737),this.zs.add(c),this.xe.add(n++)),this.g.Pa(f,this.zg)!=-559038737&&(this.Wh.add(f),this.g.Ra(f,this.zg,-559038737),this.zs.add(c),this.xe.add(n++)),r=this.oe.lb(r)}if(2>this.Wh.size)break;var m=this;for(this.xe.Vd(0,this.xe.size,function(b,x){return m.pM(b,x)}),r=0,n=this.xe.size;r<n;r++)a=this.xe.get(r),a=this.Wh.get(a),this.g.Ra(a,this.zg,r),p=new h.h,this.g.Gc(a,p);for(p=this.TM(o),r=0,n=this.xe.size;r<n;r++)(a=this.xe.get(r))!=-1&&(a=this.Wh.get(a),this.g.Ra(a,this.zg,-1));if(!p)break;l=!0}return l},g.prototype.TM=function(l){for(var o=!1,r=!0;r;){r=!1;var n=0;this.xe.get(n)==-1&&(n=this.cm(n));for(var a=this.cm(n),c=0,p=this.xe.size;c<p&&n!=-1&&a!=-1&&n!=a;c++){var f=this.xe.get(n);a=this.xe.get(a),f=this.Wh.get(f),a=this.Wh.get(a);var m=this.g.U(f);this.g.Dv(m,l)||(m=this.g.Ma(f));var b=this.g.U(a);this.g.Dv(b,l)||(b=this.g.Ma(a));var x=this.pu(m,f),T=this.pu(b,a),I=x?this.g.Ma(m):this.g.U(m),A=T?this.g.Ma(b):this.g.U(b),P=!1;(this.sp(m)||this.sp(b)||this.sp(f)||this.sp(a)||this.sp(I)||this.sp(A))&&(P=!0),!P&&this.g.fq(f,a)&&(P=!0,this.tD(x,T,m,f,b,a)),!P&&this.g.fq(I,A)&&(P=!0,this.tD(!x,!T,m,I,b,A)),P&&(o=!0),r=r||P,n=this.cm(n),a=this.cm(n)}}if(!o)for(n=0,this.xe.get(n)==-1&&(n=this.cm(n)),a=this.cm(n),c=0,p=this.xe.size;c<p&&n!=-1&&a!=-1&&n!=a;c++)f=this.xe.get(n),a=this.xe.get(a),f=this.Wh.get(f),a=this.Wh.get(a),m=this.g.U(f),this.g.Dv(m,l)||(m=this.g.Ma(f)),b=this.g.U(a),this.g.Dv(b,l)||(b=this.g.Ma(a)),x=this.pu(m,f),T=this.pu(b,a),I=x?this.g.Ma(m):this.g.U(m),A=T?this.g.Ma(b):this.g.U(b),this.DM(x,T,f,m,I,a,b,A)&&(o=!0),n=this.cm(n),a=this.cm(n);return o},g.prototype.XM=function(){this.g.ic(this.X)==1736&&this.g.In(this.X)==1&&new h.Fg().MU(this.fw,this.g,this.X,this.nd);var l=!1,o=!0;this.zg=this.Pq=-1;var r=this.g.I(this.X),n=new h.ia(0);n.Jb(r);for(var a=this.g.Ob(this.X);a!=-1;a=this.g.Rb(a))for(var c=this.g.Xa(a),p=0,f=this.g.Ja(a);p<f;p++)n.add(c),c=this.g.U(c);var m=this.g.td.o,b=this.g.td.stride;this.g.vb.mc();var x=this.g.vb.za[0].o;for(n.Vd(0,r,function(I,A){var P=m[b*I],j=m[b*A],D=x[2*P];P=x[2*P+1];var F=x[2*j];return(D=P<(j=x[2*j+1])?-1:P>j?1:D<F?-1:D>F?1:0)==0&&(D=(I=m[b*I+3])<(A=m[b*A+3])?-1:I==A?0:1),D}),this.Pq=this.g.Gd(),this.oe=new h.jp,this.RA=this.oe.Ph(0),this.oe.fn(r),a=0;a<r;a++)c=n.get(a),p=this.oe.addElement(this.RA,c),this.g.Ra(c,this.Pq,p);for(this.zg=this.g.Gd(),this.Dl=-1,this.cD()&&(l=!0);o;){o=!1,r=0,n=!1;do{n=!1,this.ho=-1,f=0,a=new h.h,p=new h.h;for(var T=this.oe.rc(this.RA);T!=-1;)c=this.oe.getData(T),this.ho!=-1?(this.g.Gc(c,p),a.qb(p)?f++:(a.L(p),this.Dl=T,0<f&&(c=this.pD())&&(n=!0,this.Dl!=-1&&(c=this.oe.getData(this.Dl),this.g.Gc(c,a))),this.ho=T=this.Dl,f=0)):(this.ho=T,this.g.Gc(this.oe.getData(T),a),f=0),T!=-1&&(T=this.oe.lb(T));if(this.Dl=-1,0<f&&(c=this.pD())&&(n=!0),10<r++)throw h.i.Qa();n&&this.GM(),this.cD()&&(n=!0),o=o||n&&!1,l=l||n}while(n)}return this.g.Td(this.Pq),this.g.Td(this.zg),h.WL.V(this.g,this.X,this.oe,this.fw)||l},g.prototype.pu=function(l,o){return this.g.U(o)!=l},g.prototype.DM=function(l,o,r,n,a,c,p,f){if(n==p)return this.bk(r),this.bk(c),!1;var m=this.g.Pa(r,this.zg),b=this.g.Pa(a,this.zg),x=this.g.Pa(c,this.zg),T=this.g.Pa(f,this.zg),I=[0,0,0,0];for((r=[0,0,0,0,0,0,0,0])[0]=0,I[0]=m,r[1]=0,I[1]=b,r[2]=1,I[2]=x,r[3]=1,I[3]=T,m=1;4>m;m++){for(b=I[m],x=r[m],T=m-1;0<=T&&I[T]>b;)I[T+1]=I[T],r[T+1]=r[T],T--;I[T+1]=b,r[T+1]=x}return I=0,r[0]!=0&&(I|=1),r[1]!=0&&(I|=2),r[2]!=0&&(I|=4),r[3]!=0&&(I|=8),(I==5||I==10)&&(l==o?l?(this.g.Bc(f,n),this.g.Cc(n,f),this.g.Bc(a,p),this.g.Cc(p,a)):(this.g.Cc(f,n),this.g.Bc(n,f),this.g.Cc(a,p),this.g.Bc(p,a)):l?(this.g.Cc(n,c),this.g.Bc(c,n),this.g.Cc(p,a),this.g.Bc(a,p)):(this.g.Bc(n,c),this.g.Cc(c,n),this.g.Bc(p,a),this.g.Cc(a,p)),!0)},g.prototype.tD=function(l,o,r,n,a,c){this.MY?this.VM():this.UM(l,o,r,n,a,c)},g.prototype.VM=function(){throw h.i.fa("not implemented.")},g.prototype.UM=function(l,o,r,n,a,c){if(l!=o)l?(this.g.Bc(r,a),this.g.Cc(a,r),this.g.Bc(c,n),this.g.Cc(n,c),this.vn(a,r),this.ui(a,!0),this.g.mi(a,!0),this.bk(r),this.vn(c,n),this.ui(c,!0),this.g.mi(c,!1)):(this.g.Bc(a,r),this.g.Cc(r,a),this.g.Bc(n,c),this.g.Cc(c,n),this.vn(a,r),this.ui(a,!0),this.g.mi(a,!1),this.bk(r),this.vn(c,n),this.ui(c,!0),this.g.mi(c,!0)),this.bk(n);else{var p=l?r:n,f=o?a:c;for(l=l?n:r,o=o?c:a,a=!1,this.g.Bc(p,f),this.g.Bc(f,p),this.g.Cc(l,o),this.g.Cc(o,l),c=o;c!=f;)r=this.g.Ma(c),n=this.g.U(c),this.g.Cc(c,n),this.g.Bc(c,r),a=a||c==p,c=n;a||(r=this.g.Ma(f),n=this.g.U(f),this.g.Cc(f,n),this.g.Bc(f,r)),this.vn(f,p),this.ui(f,!0),this.g.mi(f,!1),this.bk(p),this.vn(o,l),this.ui(o,!0),this.g.mi(o,!1),this.bk(l)}},g.prototype.cD=function(){for(var l=!1,o=this.g.Ob(this.X);o!=-1;){for(var r=this.g.Xa(o),n=0,a=this.g.Ja(o);n<a&&1<a;){var c=this.g.Ma(r),p=this.g.U(r);this.g.fq(c,p)?(l=!0,this.ui(r,!1),this.g.pd(r,!0),this.ui(p,!1),this.g.pd(p,!0),r=c,n=0,a=this.g.Ja(o)):(r=p,n++)}if(2>this.g.Ja(o)){for(l=this.g.Xa(o),n=0,a=this.g.Ja(o);n<a;n++)this.ui(l,!1),l=this.g.U(l);o=this.g.Zq(o),l=!0}else o=this.g.Rb(o)}return l},g.prototype.sp=function(l){for(var o=!1;;){var r=this.g.U(l),n=this.g.Ma(l);if(r==l)return this.ui(l,!0),this.g.mi(l,!1),!0;if(!this.g.fq(r,n)||(o=!0,this.bk(n),this.bk(r),this.ui(l,!0),this.g.mi(l,!1),this.vn(r,n),this.ui(r,!0),this.g.mi(r,!0),r==n))break;l=n}return o},g.prototype.GM=function(){for(var l=0,o=this.oe.rc(this.oe.je);o!=-1;o=this.oe.lb(o)){var r=this.oe.getData(o);this.g.aj(r,-1)}for(var n=0,a=this.g.Ob(this.X);a!=-1;)if((o=this.g.Xa(a))==-1||this.g.bd(o)!=-1)r=a,a=this.g.Rb(a),this.g.$q(r);else{this.g.aj(o,a);var c=1;for(r=this.g.U(o);r!=o;r=this.g.U(r))this.g.aj(r,a),c++;this.g.cp(a,!1),this.g.Vj(a,c),this.g.Wg(a,this.g.Ma(o)),n+=c,l++,a=this.g.Rb(a)}for(o=this.oe.rc(this.oe.je);o!=-1;o=this.oe.lb(o))r=this.oe.getData(o),this.g.bd(r)==-1&&(a=this.g.nG(this.X,r,r,null),n+=this.g.Ja(a),l++);for(this.g.Rl(this.X,l),this.g.Tj(this.X,n),l=0,n=this.g.ld;n!=-1;n=this.g.ue(n))l+=this.g.I(n);this.g.bC(l)},g.prototype.cm=function(l){for(var o=0,r=this.xe.size-1;o<r;o++)if(l=(l+1)%this.xe.size,this.xe.get(l)!=-1)return l;return-1},g.prototype.vn=function(l,o){var r=this.g.Pa(o,this.Pq),n=this.g.Pa(o,this.zg);this.g.lC(l,o),this.g.Ra(o,this.Pq,r),this.g.Ra(o,this.zg,n)},g.prototype.bk=function(l){var o=this.g.Pa(l,this.zg);o!=-1&&(this.xe.set(o,-1),this.g.Ra(l,this.zg,-1))},g.V=function(l,o,r,n,a){var c=new g;return c.g=l,c.X=o,c.xA=r,c.fw=n,c.nd=a,c.XM()},g.prototype.pM=function(l,o){var r=this.Wh.get(l),n=new h.h;this.g.Gc(r,n),r=new h.h;var a=this.Wh.get(o);return this.g.Gc(a,r),n.qb(r)?0:(a=this.zs.get(l),l=new h.h,this.g.Gc(a,l),a=this.zs.get(o),o=new h.h,this.g.Gc(a,o),(a=new h.h).uc(n,l),(n=new h.h).uc(r,o),h.h.nu(a,n))},g}();h.rn=k}(q||(q={})),function(h){var k;(k=h.$L||(h.$L={}))[k.Local=0]="Local",k[k.Geographic=1]="Geographic",k[k.Projected=2]="Projected",k[k.Image=3]="Image",k[k.Unknown=4]="Unknown",function(l){l[l.Integer32=0]="Integer32",l[l.Integer64=1]="Integer64",l[l.FloatingPoint=2]="FloatingPoint"}(h.TL||(h.TL={}));var g=function(){function l(){this.mA=null,this.pp="",this.su=null,this.dg=0,this.ZH=this.Ho=-1,this.wh=null}return l.prototype.Ec=function(){return this.dg},l.prototype.VF=function(){return 1},l.prototype.VW=function(o){this.mA=o},l.prototype.Xd=function(){if(this.mA!==null)return this.mA;var o=.001;return this.dg!=0?o=h.wr.CQ(this.dg):this.wh!=null&&(o=h.XC.DQ(this.wh)),o},l.prototype.Bz=function(){return this.wh},l.prototype.Hd=function(){return this.dg!=0?h.Tc.Zg(h.wr.Sy(this.dg)):this.wh!=null?h.XC.EQ(this.wh):void 0},l.Sb=function(o){if(o.dg!=0){if(h.wr.ZS(o.dg)===!0)return 1;if(h.wr.aT(o.dg)===!0)return 2}return 4},l.prototype.$r=function(){var o=this.Ec();return this.Ho!=-1?this.Ho:(this.Ho=h.wr.FK(o),this.Ho!=-1?this.Ho:o)},l.create=function(o){if(0>=o)throw h.i.N("Invalid or unsupported wkid: "+o);var r=new l;return r.dg=o,r},l.qP=function(o){if(o==null||o.length==0)throw h.i.N("Cannot create SpatialReference from null or empty text.");var r=new l;return r.wh=o,r},l.prototype.Nb=function(o){return this==o||o!=null&&this.constructor==o.constructor&&this.dg==o.dg&&(this.dg!=0||this.wh===o.wh)},l.prototype.toString=function(){return"[ tol: "+this.Kn()+"; wkid: "+this.Ec()+"; wkt: "+this.Bz()+"]"},l.prototype.cc=function(){if(this.pp!=="")return this.pp;var o=this.toString();if(Array.prototype.reduce)return this.pp="S"+o.split("").reduce(function(a,c){return(a=(a<<5)-a+c.charCodeAt(0))&a},0);var r=0;if(o.length===0)return"";for(var n=0;n<o.length;n++)r=(r<<5)-r+o.charCodeAt(n),r&=r;return this.pp="S"+r},l.prototype.Kn=function(){return this.Xd(0)},l.prototype.fh=function(){return this.su!==null?this.su:this.su=h.gu.yP(this)},l.ZN=2147483645,l.$N=9007199254740990,l}();h.Eg=g}(q||(q={})),function(h){var k=function(g){function l(){var o=g!==null&&g.apply(this,arguments)||this;return o.Ji=null,o.ST=null,o.Hq=new h.ZL,o.Eo=null,o.jw=null,o}return nt(l,g),l.yP=function(o){var r=new l;if(r.dg=o.dg,r.Ho=o.Ho,r.ZH=o.ZH,r.wh=o.wh,r.wh!==""&&r.wh!==null){o=l.kM(r.wh);var n=l.iM(r.wh);r.Hq.Xx(o,n,h.hu.Integer64),r.by(o),r.gy(n),r.dg=o.$r()}else o=l.jM(r.dg),r.by(o),r.gy(null),r.Hq.Xx(o,null,h.hu.Integer64);return r},l.prototype.Xd=function(o){return this.Hq.Kn(o)},l.iM=function(o){if(0>=o.length)throw h.i.N();var r=null;try{r=h.NC.fromString(o)}catch{r=null}return r==null?null:l.bD(r,!0)},l.prototype.by=function(o){this.Kd=o,this.Eo=this.Kd.Hd()},l.prototype.gy=function(o){this.KH=o,this.ST=this.KH!=null?this.KH.Eo:null},l.prototype.Wc=function(){return this.Sb()!=0&&this.Sb()!=3&&this.Kd.Wc()},l.prototype.IG=function(){return this.Sb()!=0&&(this.Sb()==3?this.Ji.fk().Wc():this.Kd.Wc())},l.prototype.eh=function(){return this.Kd!=null?this.Kd.Ue:null},l.prototype.pm=function(){return this.Kd.pm()},l.prototype.bf=function(){return this.Kd.bf()},l.prototype.hh=function(){return this.Kd!=null?this.Kd.sw:NaN},l.prototype.Up=function(){return this.Kd.Up()},l.prototype.Wr=function(){return this.Kd.Wr()},l.prototype.kk=function(){return this.Kd.kk()},l.prototype.kS=function(o){return h.OC.Py(this.Kd,o.Kd)},l.prototype.ml=function(){return this.Kd.ml()},l.prototype.Vr=function(){return this.Kd.Vr()},l.prototype.zi=function(){return this.Sb()==3?this.Ji.fk().zi():this.Kd.zi()},l.prototype.gh=function(){if(!this.Wc())throw h.i.N("!isPannable()");var o=new h.l;return this.Kd.gh(o),o},l.prototype.Oe=function(){if(!this.Wc())throw h.i.N("!isPannable()");return this.Kd.so},l.prototype.HR=function(){if(!this.Wc())throw h.i.N("!isPannable()");var o=new h.l;return this.Kd.GR(o),o},l.prototype.pv=function(){if(!this.Wc())throw h.i.N("!isPannable()");return this.Kd.pv()},l.prototype.ov=function(){if(!this.Wc())throw h.i.N("!isPannable()");return this.Kd.ov()},l.prototype.Xr=function(){return this.Ji!=null?this.Ji.fk().Xr():this.Kd.Xr()},l.prototype.PQ=function(){return this.Kd.hv()},l.prototype.Qp=function(){return this.Eo.getUnitFactor()},l.prototype.vz=function(o){return this.Hq.vz(o)},l.prototype.sc=function(){var o=this.Sb();if(o==1)return this;if(o==3)return this.Ji.fk().sc();if(o==0||o===4)throw h.i.fa("invalid call");if(this.jw!==null)return this.jw;if((o=this.eh().getGeogcs())==null)throw h.i.Qa();return this.jw=l.bF(o,this.Hq.VF())},l.bF=function(o,r){if(o==null)throw h.i.N("null pointer.");var n=new l;return o=l.mu(o,!0),n.Hq.Xx(o,null,r),n.by(o),n.gy(null),n.dg=o.$r(),n},l.prototype.Sb=function(){var o=this.eh();if(o!=null)switch(o.getType()){case h.Sc.PE_TYPE_GEOGCS:return 1;case h.Sc.PE_TYPE_PROJCS:return 2}return 4},l.prototype.hv=function(){return this.Kd.hv()},l.mu=function(o,r){var n=o.getCode();if(0>=n&&0<(n=h.pf.getCode(o))){if((o=h.pf.coordsys(n))==null)throw h.i.N("Text to wkid mapping had failed: "+n);return l.mu(o,r)}if(r&&0<n&&(r=l.qx[n]))return r;r=h.zb.xv(o,n,!1);var a=l.lK[r];return a||(o=0>=n?o:h.pf.coordsys(n),o=new h.OC(o),l.lK[r]=o,0<n&&(l.qx[n]=o),o)},l.jM=function(o){if(0>=o)throw h.i.N("Invalid or unsupported wkid: "+o);var r=l.qx[o];if(r!=null)return r;if((r=h.pf.coordsys(o))==null)throw h.i.N("Invalid or unsupported wkid: "+o);return(r=l.mu(r,!1)).$r()!=o&&(l.qx[o]=r),r},l.kM=function(o){if(o==null||o===void 0||o.length==0)throw h.i.N("Cannot create SpatialReference from null or empty text.");var r=null;try{r=h.pf.fromString(h.Sc.PE_TYPE_COORDSYS,o)}catch(n){throw h.i.N("Cannot create SpatialReference from text. "+n.message)}if(r===null)throw h.i.N("Cannot create SpatialReference from text. ");return l.mu(r,!0)},l.bD=function(o,r){var n,a=o.getCode();if(0>=a&&0<(a=h.pf.getCode(o))){if((a=h.pf.vertcs(a))===null)throw h.i.N();return l.bD(a,r)}if(r&&0<a&&(r=l.kK[a])||(o=h.zb.xv(o,a,!1),r=l.mK[o]))return r;if(0>=a||(n=h.pf.vertcs(a)),n===null)throw h.i.N();return n=new h.PL(n),l.mK[o]=n,0<a&&(l.kK[a]=n),n},l.sI=function(o,r){if(r===null||r.B())return null;var n=new h.l;if(r!==null&&o.Sb()!=1){var a=o.sc(),c=a.eh();o=h.vr.Nr(o,a,null,null),(r=h.Hx.local().V(r,o,null)).A(n)}else c=o.eh(),r.A(n);return r=c.getPrimem().getLongitude(),c=c.getUnit().getUnitFactor(),new h.LC(n.v,n.G,n.C,n.H,r,c)},l.lD=function(o){var r={name:"",steps:[],_pt:null,_entry:null},n=0;for(o=o.getEntries();n<o.length;n++){var a=o[n],c={LY:!1,ZY:"",YY:-1,geogtran:null};a.getDirection()===0?c.isInverse=!1:c.isInverse=!0;var p=a.getGeogtran().getCode();-1<p?c.wkid=p:c.wkt=a.getGeogtran().toString(),r.steps.push(c)}return r},l.XR=function(o,r,n,a){return n===void 0&&(n=null),n=l.sI(a,n),o=h.lp.getGTlist(o.eh(),r.eh(),2,h.lp.PE_GTLIST_OPTS_COMMON,n,1),r=null,o&&0<o.length&&(r=this.lD(o[0]),h.Mx.destroy(o)),n!==null&&n.destroy(),r},l.YR=function(o,r,n,a){var c;if(n===void 0&&(n=null),a===void 0&&(a=null),c===void 0&&(c=30),n=l.sI(a,n),o=h.lp.getGTlist(o.eh(),r.eh(),2,h.lp.PE_GTLIST_OPTS_COMMON,n,c),r=[],o&&0<o.length){for(c=0;c<o.length;c++)r.push(this.lD(o[c]));h.Mx.destroy(o)}return n!==null&&n.destroy(),r},l.qx={},l.lK={},l.kK={},l.mK={},l}(h.Eg);h.gu=k}(q||(q={})),function(h){var k,g;(g=k=h.hu||(h.hu={}))[g.Integer32=0]="Integer32",g[g.Integer64=1]="Integer64",g[g.FloatingPoint=2]="FloatingPoint";var l=function(){function o(){this.qp()}return o.prototype.assign=function(r){this.Fm=r.Fm,this.Gm=r.Gm,this.Pj=r.Pj,this.sA=r.sA,this.Fo=r.Fo,this.rA=r.rA,this.Ik=r.Ik,this.Mq=r.Mq,this.Lq=r.Lq,this.Rm=r.Rm},o.prototype.VF=function(){return this.Rm},o.prototype.qp=function(){this.Gm=this.Fm=0,this.Pj=1,this.sA=0,this.Fo=1,this.rA=0,this.Lq=this.Mq=this.Ik=2220446049250313e-29,this.Rm=k.FloatingPoint},o.prototype.Xx=function(r,n,a){if(this.qp(),this.Rm=a,a!=k.FloatingPoint){var c=new h.l;r.hR(c),this.Fm=c.v,this.Gm=c.G}else this.Gm=this.Fm=-17976931348623157e292;(c=r.Ue.getType())==h.Sc.PE_TYPE_GEOGCS?(c=(a==k.Integer64?1e-9:1/18e5)*r.bf(),this.Pj=1/c):c==h.Sc.PE_TYPE_PROJCS&&(c=(a==k.Integer64?1e-4:.001)*r.pm(),this.Pj=1/c),n!=null?(c=(a==k.Integer32?.001:1e-4)*n.IH,this.Fo=1/c):this.Fo=1e4,this.YM(),this.Ik=r.sw,this.Mq=n!=null?.001*n.IH:.001,this.Lq=2220446049250313e-29},o.prototype.YM=function(){if(this.Rm!=k.FloatingPoint){var r=this.Rm==k.Integer64?h.Eg.$N:h.Eg.ZN,n=r/this.Pj,a=this.Fm+n,c=h.O.truncate((a-this.Fm)*this.Pj);c>r&&(this.Pj=r/(a-this.Fm)),n=this.Gm+n,(c=h.O.truncate((n-this.Gm)*this.Pj))>r&&(this.Pj=r/(n-this.Gm))}},o.prototype.aC=function(r){switch(r){case 0:this.Ik=void 0;case 1:this.Mq=void 0;case 2:this.Lq=void 0}},o.prototype.Kn=function(r){switch(r){case 0:return this.Ik;case 1:return this.Mq;case 2:return this.Lq}return 0},o.prototype.vz=function(r){if(this.Rm==k.FloatingPoint)return 0;switch(r){case 0:return 1/this.Pj;case 1:case 2:return 1/this.Fo;default:return 0}},o.prototype.toString=function(){var r="SRPD [m_toleranceXY: "+this.Ik.toString();return(r=(r=(r=(r=(r=(r=(r=(r=(r=r+";m_falseX: "+this.Fm.toString())+";m_falseY: "+this.Gm.toString())+";m_unitsXY: "+this.Pj.toString())+";m_falseZ: "+this.sA.toString())+";m_unitsZ: "+this.Fo.toString())+";m_falseM: "+this.rA.toString())+";m_toleranceZ: "+this.Mq.toString())+";m_toleranceM: "+this.Lq.toString())+";m_precision: "+this.Rm.toString())+"] "},o}();h.ZL=l}(q||(q={})),function(h){function k(a,c){return 89.99999<c?c=89.99999:-89.99999>c&&(c=-89.99999),c*=.017453292519943,[111319.49079327169*a,31890685e-1*Math.log((1+Math.sin(c))/(1-Math.sin(c)))]}function g(a,c,p){return a=a/6378137*57.29577951308232,p?[a,57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*c/6378137)))]:[a-360*Math.floor((a+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*c/6378137)))]}function l(a,c,p){var f=a.Of();if(a.getType()===33)c=c(f.Lg(),f.ih()),f.Cb(c[0],c[1]);else if(a.getType()===197){var m=c(a.es(),a.gs(),p);c=c(a.ds(),a.fs(),p),f.K(m[0],m[1],c[0],c[1])}else for(m=new h.h,a=0;a<f.I();a++){f.D(a,m);var b=c(m.x,m.y,p);m.ma(b[0],b[1]),f.Cb(a,m)}return f}function o(a){return l(a,g,!0)}function r(a){return l(a,k,!0)}var n=Math.PI/180;h.UK=function(){function a(){}return a.vu=function(c){var p=Math.sqrt(.006694379990197414),f=Math.sin(c.y*n);return h.h.construct(6378137*c.x*n,3.1677196636462314e6*(f/(1-.006694379990197414*f*f)-1/(2*p)*Math.log((1-p*f)/(1+p*f))))},a.Vx=function(c,p,f,m){var b=.0033528106647474805,x=Math.sin(f);f=Math.cos(f);var T=(1-b)*Math.tan(c),I=T*(c=1/Math.sqrt(1+T*T)),A=Math.atan2(T,f),P=(T=c*x)*T,j=1-P,D=27233160610754688e-5*j/4040829998466145e-2,F=1+D/16384*(4096+D*(D*(320-175*D)-768)),N=D/1024*(256+D*(D*(74-47*D)-128));D=m/(635675231424518e-8*F);for(var z,W,H,Y=2*Math.PI;1e-12<Math.abs(D-Y);)H=Math.cos(2*A+D),Y=D,D=m/(635675231424518e-8*F)+N*(z=Math.sin(D))*(H+N/4*((W=Math.cos(D))*(2*H*H-1)-N/6*H*(4*z*z-3)*(4*H*H-3)));return m=I*z-c*W*f,j=b/16*j*(4+b*(4-3*j)),h.h.construct((p+(Math.atan2(z*x,c*W-I*z*f)-(1-j)*b*T*(D+j*z*(H+j*W*(2*H*H-1)))))/n,Math.atan2(I*W+c*z*f,(1-b)*Math.sqrt(P+m*m))/n)},a.MM=function(c,p,f,m){var b=.0033528106647474805,x=m-p,T=Math.atan((1-b)*Math.tan(c)),I=Math.atan((1-b)*Math.tan(f)),A=Math.sin(T);T=Math.cos(T);var P=Math.sin(I);I=Math.cos(I);var j=x,D=1e3;do{var F=Math.sin(j),N=Math.cos(j),z=Math.sqrt(I*F*I*F+(T*P-A*I*N)*(T*P-A*I*N));if(z===0)return 0;N=A*P+T*I*N;var W=Math.atan2(z,N),H=T*I*F/z,Y=1-H*H;F=N-2*A*P/Y,isNaN(F)&&(F=0);var Z=b/16*Y*(4+b*(4-3*Y)),se=j;j=x+(1-Z)*b*H*(W+Z*z*(F+Z*N*(2*F*F-1)))}while(1e-12<Math.abs(j-se)&&0<--D);return D===0?(A=m-p,{azimuth:Math.atan2(Math.sin(A)*Math.cos(f),Math.cos(c)*Math.sin(f)-Math.sin(c)*Math.cos(f)*Math.cos(A)),geodesicDistance:6371008771415059e-9*Math.acos(Math.sin(c)*Math.sin(f)+Math.cos(c)*Math.cos(f)*Math.cos(m-p))}):(p=(c=27233160610754688e-5*Y/4040829998466145e-2)/1024*(256+c*(c*(74-47*c)-128)),{azimuth:Math.atan2(I*Math.sin(j),T*P-A*I*Math.cos(j)),YQ:635675231424518e-8*(1+c/16384*(4096+c*(c*(320-175*c)-768)))*(W-p*z*(F+p/4*(N*(2*F*F-1)-p/6*F*(4*z*z-3)*(4*F*F-3)))),XY:Math.atan2(T*Math.sin(j),T*P*Math.cos(j)-A*I)})},a.jQ=function(c){var p=c.hasAttribute(1),f=c.hasAttribute(2),m=[],b=c.da(),x=null,T=null;p&&(x=c.ub(1)),f&&(T=c.ub(2));for(var I=new h.h,A=0;A<b;A++){for(var P=c.Ba(A),j=c.Ja(A),D=0,F=0,N=NaN,z=NaN,W=NaN,H=NaN,Y=c.dc(A),Z=[],se=P;se<P+j;se++){c.D(se,I),H=W=NaN;var ce=[I.x,I.y];p&&(W=x.get(se),ce.push(W)),f&&(b=T.get(se),ce.push(H)),se==P&&Y&&(D=I.x,F=I.y,N=W,z=H),Z.push(ce)}!Y||D==I.x&&F==I.y&&(!p||isNaN(N)&&isNaN(W)||N==W)&&(!f||isNaN(z)&&isNaN(H)||z==H)||Z.push(Z[0].slice(0)),m.push(Z)}return m},a.Wy=function(c,p){c=a.jQ(c),637.100877141506>p&&(p=637.100877141506);for(var f,m=[],b=0;b<c.length;b++){var x,T,I=c[b];m.push(f=[]),f.push([I[0][0],I[0][1]]);var A=I[0][0]*n,P=I[0][1]*n;for(x=0;x<I.length-1;x++){var j=I[x+1][0]*n,D=I[x+1][1]*n;if(A!==j||P!==D){j=(D=a.MM(P,A,D,j)).azimuth;var F=(D=D.YQ)/p;if(1<F){for(T=1;T<=F-1;T++){var N=a.Vx(P,A,j,T*p);f.push([N.x,N.y])}T=a.Vx(P,A,j,(D+Math.floor(F-1)*p)/2),f.push([T.x,T.y])}P=a.Vx(P,A,j,D),f.push([P.x,P.y]),A=P.x*n,P=P.y*n}}}return{qJ:m}},a.XQ=function(c){for(var p=[],f=0;f<c.length;f++){var m=c[f];m=a.Wy(m,1e4),p.push(m)}c=[];for(var b=0;b<p.length;b++){m=p[b];var x=0;for(f=0;f<m.qJ.length;f++){var T,I=m.qJ[f],A=a.vu(h.h.construct(I[0][0],I[0][1])),P=a.vu(h.h.construct(I[I.length-1][0],I[I.length-1][1])),j=P.x*A.y-A.x*P.y;for(T=0;T<I.length-1;T++)A=a.vu(h.h.construct(I[T+1][0],I[T+1][1])),j+=(P=a.vu(h.h.construct(I[T][0],I[T][1]))).x*A.y-A.x*P.y;x+=j}x/=1,c.push(x/-2)}return c},a}(),h.cb=function(){function a(){}return a.xB=function(c,p,f,m,b,x,T){a.gD[c.cc()]=p,isNaN(f)==0&&(a.mD[c.cc()]=f),isNaN(m)==0&&(a.zD[c.cc()]=m),isNaN(b)==0&&(a.aD[c.cc()]=b),a.nD[c.cc()]=x,T!==null&&(a.oD[c.cc()]=T)},a.Ww=function(c,p,f){a.sD[c.cc()+"-"+p.cc()]=f},a.sc=function(c){if((c=a.gD[c.cc()])==null)throw h.i.Ie();return c},a.bf=function(c){if((c=a.mD[c.cc()])==null)throw h.i.Ie();return c},a.vv=function(c){if((c=a.zD[c.cc()])==null)throw h.i.Ie();return c},a.ev=function(c){if((c=a.aD[c.cc()])==null)throw h.i.Ie();return c},a.gh=function(c){if((c=a.oD[c.cc()])==null)throw h.i.Ie();return h.l.construct(c[0],c[1],c[2],c[3])},a.Wc=function(c){if((c=a.nD[c.cc()])==null)throw h.i.Ie();return c},a.zh=function(c,p,f){if(p.Nb(f))return c;var m=a.sD[p.cc()+"-"+f.cc()];if(m!==void 0)return m(c,p,f);throw h.i.Ie()},a.vt=function(){throw h.i.Ie()},a.bR=function(){throw h.i.Ie()},a.dW=function(){throw h.i.Ie()},a.ml=function(){throw h.i.Ie()},a.sW=function(){var c=h.Eg.create(102100),p=h.Eg.create(3857),f=h.Eg.create(4326);h.cb.xB(c,f,NaN,NaN,NaN,!1,null),h.cb.xB(f,f,1,.0033528106647474805,6378137,!0,[-180,-90,180,90]),h.cb.xB(p,f,NaN,NaN,NaN,!1,null),h.cb.Ww(c,f,o),h.cb.Ww(f,c,r),h.cb.Ww(p,f,o),h.cb.Ww(f,p,r)},a.gD=[],a.mD=[],a.zD=[],a.aD=[],a.nD=[],a.oD=[],a.sD=[],a}()}(q||(q={})),q.cb.sW(),function(h){var k=function(){function g(l){this.o=new Int32Array(0),this.io=-1,this.Hg=this.size=this.Bl=0,this.stride=l}return g.prototype.jd=function(l){l<this.Bl?(this.o[l*this.stride]=this.io,this.io=l):this.Bl--,this.size--},g.prototype.T=function(l,o){return this.o[l*this.stride+o]},g.prototype.S=function(l,o,r){this.o[l*this.stride+o]=r},g.prototype.Ce=function(){var l=this.io;if(l==-1){if(this.Bl==this.Hg){if(2147483647<(l=this.Hg!=0?h.O.truncate(3*(this.Hg+1)/2):1)&&(l=2147483647),l==this.Hg)throw h.i.ce();this.Dz(l)}l=this.Bl,this.Bl++}else this.io=this.o[l*this.stride];this.size++;for(var o=l*this.stride;o<l*this.stride+this.stride;o++)this.o[o]=-1;return l},g.prototype.Ll=function(l){var o=this.io;if(o==-1){if(this.Bl==this.Hg){if(2147483647<(o=this.Hg!=0?h.O.truncate(3*(this.Hg+1)/2):1)&&(o=2147483647),o==this.Hg)throw h.i.ce();this.Dz(o)}o=this.Bl,this.Bl++}else this.io=this.o[o*this.stride];this.size++;for(var r=o*this.stride,n=0;n<l.length;n++)this.o[r+n]=l[n];return o},g.prototype.mj=function(l){this.io=-1,this.size=this.Bl=0,l&&(this.o=null,this.Hg=0)},g.prototype.De=function(l){l>this.Hg&&this.Dz(l)},g.prototype.tx=function(l,o){l*=this.stride,o*=this.stride;for(var r=0;r<this.stride;r++){var n=this.o[o+r];this.o[o+r]=this.o[l+r],this.o[l+r]=n}},g.prototype.gC=function(l,o,r){var n=this.o[this.stride*o+r];this.o[this.stride*o+r]=this.o[this.stride*l+r],this.o[this.stride*l+r]=n},g.LG=function(l){return 0<=l},g.prototype.Dz=function(l){this.o==null&&(this.o=new Int32Array(0));var o=new Int32Array(this.stride*l);o.set(this.o,0),this.o=o,this.Hg=l},g}();h.$c=k}(q||(q={})),function(h){var k,g;(g=k||(k={}))[g.enumInputModeBuildGraph=0]="enumInputModeBuildGraph",g[g.enumInputModeSimplifyAlternate=4]="enumInputModeSimplifyAlternate",g[g.enumInputModeSimplifyWinding=5]="enumInputModeSimplifyWinding",g[g.enumInputModeIsSimplePolygon=7]="enumInputModeIsSimplePolygon";var l=function(){function r(n){this.Be=n,this.yh=NaN,this.eH=new h.ig,this.fH=new h.ig,this.ms=new h.Nc,this.ns=new h.Nc}return r.prototype.compare=function(n,a,c){if(n=n.ja(c),this.Be.pB(a,this.eH),this.Be.pB(n,this.fH),a=this.eH.get(),n=this.fH.get(),this.ms.K(a.sa,a.pa),this.ns.K(n.sa,n.pa),this.ms.va<this.ns.oa)return-1;if(this.ms.oa>this.ns.va)return 1;c=a.na==a.la;var p=n.na==n.la;if(c||p){if(c&&p)return 0;if(a.na==n.na&&a.sa==n.sa)return c?1:-1;if(a.la==n.la&&a.pa==n.pa)return c?-1:1}return(c=a.Pe(this.yh,this.ms.oa))==(p=n.Pe(this.yh,this.ns.oa))&&((p=.5*((c=Math.min(a.la,n.la))+this.yh))==this.yh&&(p=c),c=a.Pe(p,this.ms.oa),p=n.Pe(p,this.ns.oa)),c<p?-1:c>p?1:0},r.prototype.aK=function(n){this.yh=n},r}(),o=function(){function r(n){this.ib=n,this.WH=new h.ig,this.Bf=new h.h,this.wA=new h.Nc}return r.prototype.kX=function(n){this.Bf.L(n)},r.prototype.compare=function(n,a){return this.ib.pB(n.ja(a),this.WH),n=this.WH.get(),this.wA.K(n.sa,n.pa),this.Bf.x<this.wA.oa?-1:this.Bf.x>this.wA.va?1:(n=n.Pe(this.Bf.y,this.Bf.x),this.Bf.x<n?-1:this.Bf.x>n?1:0)},r}();k=function(){function r(){this.hH=this.Di=this.Gi=this.kA=this.Yn=this.ye=this.Kc=this.jh=this.ge=null,this.Go=this.xg=-1,this.gH=!0,this.pA=!1,this.lA=NaN,this.Ni=new h.Md,this.bO=2147483647,this.aO=h.O.truncate(-2147483648),this.cg=this.ae=this.Hl=this.Cq=this.Cm=this.Bq=this.Os=this.Re=-1,this.wa=0}return r.prototype.yy=function(n){this.lA=n},r.prototype.Ym=function(){this.ge==null&&(this.ge=new h.$c(8));var n=this.ge.Ce();return this.ge.S(n,1,0),n},r.prototype.vU=function(){this.Kc==null&&(this.Kc=new h.$c(8));var n=this.Kc.Ce();this.Kc.S(n,2,0),this.Kc.S(n,3,0);var a=this.Kc.Ce();return this.Kc.S(a,2,0),this.Kc.S(a,3,0),this.JJ(n,a),this.JJ(a,n),n},r.prototype.mI=function(){this.ye==null&&(this.ye=new h.$c(8));var n=this.ye.Ce();return this.ye.S(n,2,0),n},r.prototype.TW=function(n,a){this.ge.S(n,7,a)},r.prototype.mn=function(n,a){this.ge.S(n,2,a)},r.prototype.SW=function(n,a){this.ge.S(n,1,a)},r.prototype.lX=function(n,a){this.ge.S(n,3,a)},r.prototype.iX=function(n,a){this.ge.S(n,4,a)},r.prototype.cr=function(n,a){this.ge.S(n,5,a)},r.prototype.eR=function(n){return this.ge.T(n,5)},r.prototype.RW=function(n,a){this.ge.S(n,6,a)},r.prototype.cN=function(n,a){this.RW(a,n)},r.prototype.IJ=function(n,a){this.Kc.S(n,1,a)},r.prototype.JJ=function(n,a){this.Kc.S(n,4,a)},r.prototype.Tl=function(n,a){this.Kc.S(n,5,a)},r.prototype.Sl=function(n,a){this.Kc.S(n,6,a)},r.prototype.$W=function(n,a){this.Kc.S(n,2,a)},r.prototype.$w=function(n,a){this.Kc.S(n,3,a)},r.prototype.LF=function(n){return this.Kc.T(n,3)},r.prototype.Gt=function(n,a){this.Kc.S(n,7,a)},r.prototype.EK=function(n,a){if(this.mm(n)!=-1)for(a=a?-1:n,n=this.mm(n);n!=-1;n=this.js(n))this.g.Ra(this.tj(n),this.Cq,a)},r.prototype.yx=function(n,a){n!=-1&&(this.EK(n,a),this.EK(this.xa(n),a))},r.prototype.Dt=function(n,a){this.ye.S(n,1,a)},r.prototype.Vg=function(n,a){this.ye.S(n,2,a)},r.prototype.jn=function(n,a){this.ye.S(n,3,a),this.NW(n,this.dR(a)),this.MW(a,n)},r.prototype.MW=function(n,a){this.ye.S(n,4,a)},r.prototype.NW=function(n,a){this.ye.S(n,5,a)},r.prototype.DJ=function(n,a){this.ye.S(n,6,a)},r.prototype.BJ=function(n,a){this.ye.S(n,7,a)},r.prototype.AJ=function(n,a){this.Yn.write(n,a)},r.prototype.CJ=function(n,a){this.kA.write(n,a)},r.prototype.kY=function(n){var a=0,c=0,p=this.AF(n),f=new h.h,m=new h.h,b=new h.h;this.Yr(p,f),m.L(f);var x=p;do this.lm(x,b),c+=h.h.tb(m,b),this.$e(this.xa(x))!=n&&(a+=(b.x-f.x-(m.x-f.x))*(b.y-f.y+(m.y-f.y))*.5),m.L(b),x=this.jc(x);while(x!=p);this.Yn.write(n,a),this.kA.write(n,c)},r.prototype.PU=function(n,a){var c=new l(this),p=new h.Yj;p.De(h.O.truncate(this.wa/2)),p.Vo(c);for(var f=new h.ia(0),m=this.$g(),b=null,x=0,T=new h.h,I=this.Re;I!=-1;I=this.Rf(I)){if(!(255&++x)&&a!=null&&!a.progress(-1,-1))throw h.i.WC();var A=this.Me(I);if(A!=-1){if(f.Bh(0),!this.gY(p,m,f,A)){this.D(I,T),c.aK(T.y);var P=A;do{var j=this.Ab(P,m);j!=-1&&(p.vd(j,-1),this.Kb(P,m,-2)),P=this.jc(this.xa(P))}while(A!=P);P=A;do(j=this.Ab(P,m))==-1&&(j=p.addElement(P,-1),f.add(j)),P=this.jc(this.xa(P));while(A!=P)}for(A=f.size-1;0<=A;A--)j=f.get(A),P=p.ja(j),this.Kb(this.xa(P),m,j),this.OU(p,j,n)}else this.cz(I)==-1&&(b==null&&(b=new o(this)),this.D(I,T),b.kX(T),P=p.IW(b),A=this.Hl,P!=-1&&(j=p.ja(P),this.$e(j)==this.$e(this.xa(j))&&(j=this.OF(p,P)),j!=-1&&(A=this.$e(j))),this.cN(A,I))}this.Jg(m)},r.prototype.OU=function(n,a,c){var p=n.ja(a),f=this.$e(p);if(this.Gn(f)==-1){var m=this.OF(n,a),b=this.xa(p),x=this.$e(b);this.Kp(f),this.Kp(x);var T=this.Gn(f),I=this.Gn(x);if(m==-1&&T==-1&&(x==f?(this.jn(x,this.Hl),T=I=this.Hl):(I==-1&&(this.jn(x,this.Hl),I=this.Hl),this.jn(f,x),T=x)),m!=-1){var A=this.$e(m);I==-1&&(0>=this.Kp(A)?(I=this.Gn(A),this.jn(x,I)):(this.jn(x,A),I=A),x==f&&(T=I))}T==-1&&this.hY(f,x),c==0?this.jW(n,a,p,m,f,x):c==5?this.kW(n,a,p,b,f,x):c==4&&this.iW(p,m,f,x)}},r.prototype.jW=function(n,a,c,p,f,m){var b=this.hk(f);if(p!=-1){var x=this.hk(m),T=this.hk(this.$e(p));p=b&x&T,T^=T&this.dh(c),(T|=p)!=0&&(this.Vg(m,x|T),this.Vg(f,T|b),b=b||T)}for(a=n.lb(a);a!=-1&&(p=n.ja(a),c=this.$e(this.xa(p)),f=this.hk(c),m=this.dh(p),x=this.$e(p),p=f&(T=this.hk(x))&b,b^=b&m,(b|=p)!=0);a=n.lb(a))this.Vg(c,f|b),this.Vg(x,T|b)},r.prototype.kW=function(n,a,c,p,f,m){if(f!=m){c=this.Ab(c,this.cg),c+=this.Ab(p,this.cg),p=0;var b=new h.ia(0),x=new h.ia(0);x.add(0);for(var T=n.rc(-1);T!=a;T=n.lb(T)){var I=n.ja(T),A=this.xa(I),P=this.$e(I),j=this.$e(A);if(P!=j){if(I=this.Ab(I,this.cg),p+=I+=this.Ab(A,this.cg),A=!1,b.size!=0&&b.Fc()==j&&(x.If(),b.If(),A=!0),this.Gn(j)==-1)throw h.i.Qa();A&&this.Gn(j)==P||(x.add(p),b.add(P))}}p+=c,b.size!=0&&b.Fc()==m&&(x.If(),b.If()),p!=0?x.Fc()==0&&(n=this.g.ld,n=this.La(n),this.Vg(f,n)):x.Fc()!=0&&(n=this.g.ld,n=this.La(n),this.Vg(f,n))}},r.prototype.iW=function(n,a,c,p){var f=this.La(this.g.ld);if(a==-1)this.Vg(p,this.Go),1&(n=this.Ab(n,this.xg))?this.Vg(c,f):this.Vg(c,this.Go);else{var m=this.hk(p);m==0?(m=this.hk(this.$e(a)),this.Vg(p,m),1&(n=this.Ab(n,this.xg))?this.Vg(c,m==f?this.Go:f):this.Vg(c,m)):1&(n=this.Ab(n,this.xg))?this.Vg(c,m==f?this.Go:f):this.Vg(c,m)}},r.prototype.gY=function(n,a,c,p){var f=p,m=-1,b=-1,x=0;do{if(x==2)return!1;var T=this.Ab(f,a);if(T!=-1){if(m!=-1)return!1;m=T}else{if(b!=-1)return!1;b=f}x++,f=this.jc(this.xa(f))}while(p!=f);return b!=-1&&m!=-1&&(this.Kb(n.ja(m),a,-2),n.Sj(m,b),c.add(m),!0)},r.prototype.hY=function(n,a){var c=this.Kp(n);if(c!=0){var p=this.Kp(a);0<c&&0>p||0>c&&0<p?this.jn(n,a):(a=this.Gn(a))!=-1&&this.jn(n,a)}},r.prototype.vP=function(n,a){this.Cq=this.g.Gd();for(var c=0,p=a.size;c<p;c++){var f=a.get(c),m=this.g.Pa(f,this.Cm),b=this.g.Qf(this.g.bd(f)),x=this.g.ic(b);if(h.aa.Hc(x)){var T=this.g.U(f);if(T!=-1){var I=this.g.Pa(T,this.Cm);if(m!=I){var A=this.vU(),P=this.xa(A),j=this.jh.Ce();this.jh.S(j,0,f),this.jh.S(j,1,-1),this.Gt(A,j),this.IJ(A,m),(j=this.Me(m))==-1?(this.mn(m,A),this.Tl(A,P),this.Sl(P,A)):(m=this.te(j),this.Tl(j,P),this.Sl(P,j),this.Sl(m,A),this.Tl(A,m)),this.IJ(P,I),(m=this.Me(I))==-1?(this.mn(I,P),this.Sl(A,P),this.Tl(P,A)):(I=this.te(m),this.Tl(m,A),this.Sl(A,m),this.Sl(I,P),this.Tl(P,I)),b=this.La(b),n==0?(this.Kb(P,this.ae,0),this.Kb(A,this.ae,x==1736?b:0)):n==5?(I=new h.h,this.g.D(f,I),f=new h.h,this.g.D(T,f),m=T=0,0>I.compare(f)?T=1:m=-1,this.Kb(P,this.ae,0),this.Kb(A,this.ae,0),this.Kb(A,this.cg,T),this.Kb(P,this.cg,m)):n==7?(this.Kb(P,this.ae,this.Go),this.Kb(A,this.ae,x==1736?b:0)):n==4&&(this.Kb(P,this.ae,0),this.Kb(A,this.ae,0),this.Kb(A,this.xg,1),this.Kb(P,this.xg,1)),x=x==1736?this.aO:0,this.$w(A,b|x),this.$w(P,b|x)}}}}},r.prototype.VT=function(n,a){var c=this.mm(a);if(c!=-1){var p=this.mm(n);this.jh.S(c,1,p),this.Gt(n,c),this.Gt(a,-1)}n=this.xa(n),a=this.xa(a),(c=this.mm(a))!=-1&&(p=this.mm(n),this.jh.S(c,1,p),this.Gt(n,c),this.Gt(a,-1))},r.prototype.IX=function(n){function a(W,H){return p.HO(W,H)}var c=new h.ia(0);c.Jb(10);for(var p=this,f=this.Re;f!=-1;f=this.Rf(f)){c.clear(!1);var m=this.Me(f);if(m!=-1){var b=m;do c.add(b),b=this.jc(this.xa(b));while(b!=m);if(1<c.size){if(b=!0,2<c.size)c.Vd(0,c.size,a),c.add(c.get(0));else if(0<this.GO(c.get(0),c.get(1))){var x=c.get(0);c.set(0,c.get(1)),c.set(1,x)}else b=!1;for(var T=x=c.get(0),I=this.uf(T),A=this.xa(T),P=-1,j=1,D=c.size;j<D;j++){var F=c.get(j),N=this.xa(F),z=this.jk(N);if(z==I&&F!=T){if(n==0)P=this.LF(T)|this.LF(F),this.$w(T,P),this.$w(A,P),this.Kb(T,this.ae,this.Ab(T,this.ae)|this.Ab(F,this.ae)),this.Kb(A,this.ae,this.Ab(A,this.ae)|this.Ab(N,this.ae));else if(this.cg!=-1)P=this.Ab(T,this.cg)+this.Ab(F,this.cg),N=this.Ab(A,this.cg)+this.Ab(N,this.cg),this.Kb(T,this.cg,P),this.Kb(A,this.cg,N);else{if(n==7)return void(this.Ni=new h.Md(5,f,-1));this.xg!=-1&&(P=this.Ab(T,this.xg)+this.Ab(F,this.xg),N=this.Ab(A,this.xg)+this.Ab(N,this.xg),this.Kb(T,this.xg,P),this.Kb(A,this.xg,N))}this.VT(T,F),this.Ly(F),P=T,c.set(j,-1),F==x&&(c.set(0,-1),x=-1)}else this.yx(P,!1),P=-1,T=F,I=z,A=N}if(this.yx(P,!1),P=-1,b){for(x=-1,j=0,D=c.size;j<D;j++)if((F=c.get(j))!=-1){if(x==-1)T=x=F,I=this.uf(T),A=this.xa(T);else if(F!=T&&(N=this.xa(F),z=this.jk(N),this.Sl(A,F),this.Tl(F,A),T=F,I=z,A=N,n==7&&(this.Ab(F,this.ae)|this.Ab(this.te(F),this.ae))==(1|this.Go)))return void(this.Ni=new h.Md(5,f,-1))}this.mn(f,x)}else{for(x=-1,j=0,D=c.size;j<D;j++)if((F=c.get(j))!=-1){x=F;break}m!=x&&this.mn(f,x)}}}}},r.prototype.WN=function(){for(var n=-1,a=this.$g(),c=this.Re;c!=-1;c=this.Rf(c)){var p=this.Me(c);if(p!=-1){var f=p;do{if(this.Ab(f,a)!=1){var m=this.mI();this.Dt(m,f),this.BJ(m,n),n!=-1&&this.DJ(n,m),n=m;var b=0,x=f;do b|=this.Ab(x,this.ae),this.$W(x,m),this.Kb(x,a,1),x=this.jc(x);while(x!=f);this.Vg(m,b)}f=this.jc(this.xa(f))}while(f!=p)}}m=this.mI(),this.Dt(m,-1),this.BJ(m,n),n!=-1&&this.DJ(n,m),this.Hl=m,this.Yn=h.be.qf(this.ye.size,NaN),this.kA=h.be.qf(this.ye.size,NaN),this.AJ(this.Hl,1/0),this.CJ(this.Hl,1/0),this.Jg(a)},r.prototype.sR=function(n,a,c){if((a=a!=-1?a:this.Me(n))==-1)return-1;for(n=a;;){if(this.Ab(a,c)!=1)return a;if((a=this.jc(this.xa(a)))==n)return-1}},r.prototype.yW=function(){for(var n=this.$g(),a=this.Re;a!=-1;a=this.Rf(a))for(var c=-1;;){var p=this.sR(a,c,n);if(p==-1)break;c=this.jc(this.xa(p));for(var f=p;;){var m=this.jc(f),b=this.te(f),x=this.xa(f);if(b==x){if(this.IP(f),c!=f&&c!=x||(c=-1),f==p||b==p){if(f==(p=m)||b==p)break;f=m;continue}}else this.Kb(f,n,1);if((f=m)==p)break}}this.Jg(n)},r.prototype.MB=function(n,a,c,p,f){this.Ug(),this.gH=f,this.g=n,this.Bq=this.g.aF(),(n=new h.ia(0)).Jb(c!=null?this.g.I(c.get(0)):this.g.fd);var m=0,b=1,x=c!=null?c.get(0):this.g.ld;for(f=1;x!=-1;){this.g.HJ(x,this.Bq,b),b<<=1;for(var T=this.g.Ob(x);T!=-1;T=this.g.Rb(T))for(var I=this.g.Xa(T),A=0,P=this.g.Ja(T);A<P;A++)n.add(I),I=this.g.U(I);h.aa.Rn(this.g.ic(x))||(m+=this.g.da(x)),c!=null?(x=f<c.size?c.get(f):-1,f++):x=this.g.ue(x)}for(this.Go=b,this.wa=n.size,this.g.nx(n,this.wa),this.jh==null&&(this.jh=new h.$c(2),this.ge=new h.$c(8),this.Kc=new h.$c(8),this.ye=new h.$c(8)),this.jh.De(this.wa),h.mp.zp(p),this.ge.De(this.wa+10),this.Kc.De(2*this.wa+32),this.ye.De(Math.max(32,m)),this.Cm=this.g.Gd(),c=new h.h,f=0,m=new h.h,c.Rc(),b=0;b<=this.wa;b++)if(b<this.wa?(I=n.get(b),this.g.D(I,m)):m.Rc(),!c.qb(m)){if(f<b){for(I=this.Ym(),P=A=-1;f<b;f++)P=n.get(f),this.g.Ra(P,this.Cm,I),x=this.jh.Ce(),this.jh.S(x,0,P),this.jh.S(x,1,A),A=x,T=this.g.bd(P),x=this.g.Qf(T),x=this.La(x),this.SW(I,this.xd(I)|x);this.TW(I,A),this.cr(I,this.g.Ua(P)),this.Os!=-1&&this.iX(this.Os,I),this.lX(I,this.Os),this.Os=I,this.Re==-1&&(this.Re=I)}f=b,c.L(m)}h.mp.zp(p),this.ae=this.$g(),a==5&&(this.cg=this.$g()),a==4&&(this.xg=this.$g()),this.vP(a,n),this.Ni.Jj==0&&(this.IX(a),this.Ni.Jj==0&&(isNaN(this.lA)||this.xO()?(this.WN(),this.Ni.Jj==0&&(this.Jg(this.ae),this.ae=-1,this.gH&&this.PU(a,p))):this.pA=!0))},r.prototype.Ly=function(n){var a=this.jc(n),c=this.te(n),p=this.xa(n),f=this.jc(p),m=this.te(p);a!=p&&(this.Sl(m,a),this.Tl(a,m)),c!=p&&(this.Sl(c,f),this.Tl(f,c)),c=this.jk(n),this.Me(c)==n&&(f!=n?this.mn(c,f):this.mn(c,-1)),f=this.jk(p),this.Me(f)==p&&(a!=p?this.mn(f,a):this.mn(f,-1)),this.Kc.jd(n),this.Kc.jd(p)},r.prototype.OF=function(n,a){for(;;){if((a=n.we(a))==-1)return-1;var c=n.ja(a);if(this.$e(c)!=this.$e(this.xa(c)))return c}},r.prototype.dr=function(n,a){var c;c===void 0&&(c=!0),this.MB(n,0,null,a,c)},r.prototype.vJ=function(n,a,c){var p=new h.ia(0);p.add(a),this.MB(n,4,p,c,n.ic(a)==1736)},r.prototype.wJ=function(n,a,c){var p=new h.ia(0);p.add(a),this.MB(n,5,p,c,!0)},r.prototype.Ug=function(){this.g!=null&&(this.Bq!=-1&&(this.g.xW(this.Bq),this.Bq=-1),this.Cm!=-1&&(this.g.Td(this.Cm),this.Cm=-1),this.Cq!=-1&&(this.g.Td(this.Cq),this.Cq=-1),this.ae!=-1&&(this.Jg(this.ae),this.ae=-1),this.cg!=-1&&(this.Jg(this.cg),this.cg=-1),this.xg!=-1&&(this.Jg(this.xg),this.xg=-1),this.g=null,this.ge.mj(!0),this.jh.mj(!0),this.Os=this.Re=-1,this.Kc!=null&&this.Kc.mj(!0),this.Gi!=null&&(this.Gi.length=0),this.Di!=null&&(this.Di.length=0),this.hH!=null&&(this.hH.length=0),this.ye!=null&&this.ye.mj(!0),this.Hl=-1,this.Yn=null)},r.prototype.Me=function(n){return this.ge.T(n,2)},r.prototype.D=function(n,a){this.g.dG(this.eR(n),a)},r.prototype.xd=function(n){return this.ge.T(n,1)},r.prototype.Rf=function(n){return this.ge.T(n,4)},r.prototype.cz=function(n){return this.ge.T(n,6)},r.prototype.km=function(n){return this.ge.T(n,7)},r.prototype.js=function(n){return this.jh.T(n,1)},r.prototype.tj=function(n){return this.jh.T(n,0)},r.prototype.ng=function(n,a){return(a=this.Di[a]).size<=n?-1:a.read(n)},r.prototype.nn=function(n,a,c){(a=this.Di[a]).size<=n&&a.resize(this.ge.size,-1),a.write(n,c)},r.prototype.Dp=function(){this.Di==null&&(this.Di=[]);for(var n=h.ia.qf(this.ge.Hg,-1),a=0,c=this.Di.length;a<c;a++)if(this.Di[a]==null)return this.Di[a]=n,a;return this.Di.push(n),this.Di.length-1},r.prototype.Ep=function(n){this.Di[n]=null},r.prototype.jk=function(n){return this.Kc.T(n,1)},r.prototype.uf=function(n){return this.jk(this.xa(n))},r.prototype.xa=function(n){return this.Kc.T(n,4)},r.prototype.te=function(n){return this.Kc.T(n,5)},r.prototype.jc=function(n){return this.Kc.T(n,6)},r.prototype.$e=function(n){return this.Kc.T(n,2)},r.prototype.af=function(n){return this.hk(this.Kc.T(n,2))},r.prototype.mm=function(n){return this.Kc.T(n,7)},r.prototype.Yr=function(n,a){this.D(this.jk(n),a)},r.prototype.lm=function(n,a){this.D(this.uf(n),a)},r.prototype.dh=function(n){return this.Kc.T(n,3)&this.bO},r.prototype.Ab=function(n,a){return(a=this.Gi[a]).size<=n?-1:a.read(n)},r.prototype.Kb=function(n,a,c){(a=this.Gi[a]).size<=n&&a.resize(this.Kc.size,-1),a.write(n,c)},r.prototype.$g=function(){this.Gi==null&&(this.Gi=[]);for(var n=h.ia.qf(this.Kc.Hg,-1),a=0,c=this.Gi.length;a<c;a++)if(this.Gi[a]==null)return this.Gi[a]=n,a;return this.Gi.push(n),this.Gi.length-1},r.prototype.Jg=function(n){this.Gi[n]=null},r.prototype.IP=function(n){var a=this.$e(n),c=this.xa(n),p=this.jc(n);p==c&&(p=this.jc(p))==n&&(p=-1);var f=this.AF(a);f!==n&&f!=c||this.Dt(a,p),c=this.Yn.read(a),isNaN(c)||(this.AJ(a,NaN),this.CJ(a,NaN)),this.yx(n,!0),this.Ly(n)},r.prototype.JP=function(n){for(var a=0,c=n.size;a<c;a++){var p=n.get(a),f=this.$e(this.xa(p));this.Dt(this.$e(p),-1),this.Dt(f,-1),this.yx(p,!0),this.Ly(p)}},r.prototype.AF=function(n){return this.ye.T(n,1)},r.prototype.hk=function(n){return this.ye.T(n,2)},r.prototype.Gn=function(n){return this.ye.T(n,3)},r.prototype.dR=function(n){return this.ye.T(n,4)},r.prototype.Kp=function(n){var a=this.Yn.read(n);return isNaN(a)&&(this.kY(n),a=this.Yn.read(n)),a},r.prototype.La=function(n){return this.g.KF(n,this.Bq)},r.prototype.Le=function(n){return this.g.Pa(n,this.Cm)},r.prototype.uR=function(n){return this.g.Pa(n,this.Cq)},r.prototype.tR=function(n,a){var c=this.Me(n);if(c==-1)return-1;var p=c,f=-1,m=-1;do{if(this.uf(p)==a)return p;if(f==-1){if((f=this.Me(a))==-1)break;m=f}if(this.uf(m)==n)return this.xa(m);p=this.jc(this.xa(p)),m=this.jc(this.xa(m))}while(p!=c&&m!=f);return-1},r.prototype.pB=function(n,a){a.Or(),a=a.get();var c=new h.h;this.Yr(n,c),a.Dc(c),this.lm(n,c),a.Qc(c)},r.prototype.HO=function(n,a){if(n==a)return 0;var c=new h.h;this.lm(n,c);var p=new h.h;return this.lm(a,p),c.qb(p)?0:(a=new h.h,this.Yr(n,a),(n=new h.h).uc(c,a),(c=new h.h).uc(p,a),h.h.nu(n,c))},r.prototype.GO=function(n,a){if(n==a)return 0;var c=new h.h;this.lm(n,c);var p=new h.h;return this.lm(a,p),c.qb(p)?0:(a=new h.h,this.Yr(n,a),(n=new h.h).uc(c,a),(c=new h.h).uc(p,a),0<=c.y&&0<n.y?h.h.nu(n,c):0)},r.prototype.xO=function(){for(var n=h.lc.ox(this.lA),a=new h.h,c=new h.h,p=new h.h,f=new h.h,m=new h.h,b=this.Re;b!=-1;b=this.Rf(b)){var x=this.Me(b);if(x!=-1){var T=x;this.Yr(T,a),this.lm(T,c),m.uc(c,a);var I=m.Sk();do{var A=T;if((T=this.jc(this.xa(T)))!=A){this.lm(T,p),f.uc(p,a),A=f.Sk();var P=f.wi(m);if(P*P/(A*I)*Math.min(A,I)<=n)return!1;m.L(f),I=A,c.L(p)}}while(T!=x)}}return!0},r}(),h.iu=k}(q||(q={})),function(h){var k=function(){function g(){this.j=null,this.oH=new h.h,this.pH=new h.h,this.Gj=null,this.Mv=!1,this.tl=-1}return g.prototype.cf=function(l){return l<this.Gj.length&&this.Gj[l]},g.prototype.dl=function(l,o,r,n){var a=h.aa.tf(this.j.g.ic(r));if(h.aa.tf(this.j.g.ic(o))!=2||a!=1)throw h.i.Qa();this.FP(l,o,r,n)},g.prototype.dr=function(l,o){this.j==null&&(this.j=new h.iu),this.j.dr(l,o)},g.prototype.Ft=function(l,o,r){for(h.Tk.V(l,o,r,!0),o=l.ld;o!=-1;o=l.ue(o))l.ic(o)==1736&&h.rn.V(l,o,-1,this.Mv,r);this.dr(l,r)},g.prototype.ME=function(l,o,r,n,a){var c=this.j.g;if(c.ic(l)==1736)for(l=c.Ob(l);l!=-1;l=c.Rb(l)){var p=c.Xa(l);this.j.Le(p),this.j.Le(c.U(p));var f=this.j.uR(p);if(f!=-1){var m=this.j.Ab(f,r);if(m!=1&&m!=2)if(this.cf(this.j.af(f))){this.j.Kb(f,r,1),m=c.vf(o,-1);var b=f,x=this.j.Le(p),T=1;do{var I=this.sm(p,a);c.ij(m,I),n!=-1&&this.j.nn(x,n,1),this.j.Kb(b,r,1),b=this.j.jc(b);do var A=(I=T==1?c.U(p):c.Ma(p))!=-1?this.j.Le(I):-1;while(A==x);var P=this.j.jk(b);if(P!=A){do A=(I=T==1?c.Ma(p):c.U(p))!=-1?this.j.Le(I):-1;while(A==x);P!=A?(A=P,I=this.j.tj(this.j.km(A))):T=-T}x=A,p=I}while(b!=f);c.kn(m,!0)}else this.j.Kb(f,r,2)}}},g.prototype.eF=function(){for(var l=this.j.$g(),o=new h.ia(0),r=this.j.Re;r!=-1;r=this.j.Rf(r)){var n=this.j.Me(r),a=n;if(n!=-1)do{if(this.j.Ab(a,l)!=1){var c=this.j.xa(a);this.j.Kb(c,l,1),this.j.Kb(a,l,1),this.cf(this.j.af(a))&&this.cf(this.j.af(c))&&o.add(a)}a=this.j.jc(this.j.xa(a))}while(a!=n)}this.j.Jg(l),this.j.JP(o)},g.prototype.sm=function(l,o){return o==-1?l:this.aS(l,o)},g.prototype.aS=function(l,o){var r=this.j.g,n=this.j.km(this.j.Le(l));do{var a=this.j.tj(n);if(r.Qf(r.bd(a))==o)return a;n=this.j.js(n)}while(n!=-1);return l},g.prototype.Ot=function(l,o,r){this.eF();var n=this.j.g,a=n.Ig(1736),c=this.j.$g();return this.uK(l,o,a,r,c,-1),this.j.Jg(c),h.rn.V(n,a,1,this.Mv,null),a},g.prototype.uK=function(l,o,r,n,a,c){for(this.ME(l,r,a,c,n),o!=-1&&this.ME(o,r,a,c,n),l=this.j.g,o=this.j.Re;o!=-1;o=this.j.Rf(o)){var p=this.j.Me(o);if(p!=-1){var f=p;do{var m=this.j.Ab(f,a);if(m!=1&&m!=2)if(this.cf(this.j.af(f))){m=l.vf(r,-1);var b=f;do{var x=this.j.mm(b);x!=-1?x=this.j.tj(x):(x=this.j.tj(this.j.mm(this.j.xa(b))),x=this.j.g.U(x)),x=this.sm(x,n),l.ij(m,x),this.j.Kb(b,a,1),c!=-1&&(x=this.j.Le(x),this.j.nn(x,c,1)),b=this.j.jc(b)}while(b!=f);l.kn(m,!0)}else this.j.Kb(f,a,2);f=this.j.jc(this.j.xa(f))}while(f!=p)}}},g.prototype.aY=function(l,o,r){var n=this.j.g,a=n.Ig(1736),c=n.Ig(1607),p=n.Ig(550);this.eF();var f=-1,m=this.j.$g(),b=this.j.Dp();for(this.uK(l,o,a,r,m,b),l=this.j.Re;l!=-1;l=this.j.Rf(l))if((o=this.j.Me(l))!=-1){var x=o;do{var T=this.j.Ab(x,m),I=this.j.Ab(this.j.xa(x),m);if((T|=I)==2)if(T=this.j.dh(x),this.cf(T)){var A=n.vf(c,-1),P=x;T=this.Yw(l,n),T=this.sm(T,r),n.ij(A,T),this.j.nn(l,b,1);do{if(T=this.j.uf(P),I=this.Yw(T,n),I=this.sm(I,r),n.ij(A,I),this.j.Kb(P,m,1),this.j.Kb(this.j.xa(P),m,1),this.j.nn(T,b,1),P=this.j.jc(P),T=this.j.Ab(P,m),(T|=I=this.j.Ab(this.j.xa(P),m))!=2)break;if(T=this.j.dh(P),!this.cf(T)){this.j.Kb(P,m,1),this.j.Kb(this.j.xa(P),m,1);break}}while(P!=x)}else this.j.Kb(x,m,1),this.j.Kb(this.j.xa(x),m,1);x=this.j.jc(this.j.xa(x))}while(x!=o)}for(l=this.j.Re;l!=-1;l=this.j.Rf(l))(T=this.j.ng(l,b))!=1&&(T=this.j.xd(l),this.cf(T)&&(f==-1&&(f=n.vf(p,-1)),(o=this.j.km(l))!=-1&&(o=this.j.tj(o),T=this.sm(o,r),n.ij(f,T))));return this.j.Ep(b),this.j.Jg(m),h.rn.V(n,a,1,this.Mv,null),(r=[])[0]=p,r[1]=c,r[2]=a,r},g.prototype.Yw=function(l,o){var r=-1;for(l=this.j.km(l);l!=-1;l=this.j.js(l)){var n=this.j.tj(l);r==-1&&(r=n);var a=this.j.La(o.Qf(o.bd(n)));if(this.cf(a)){r=n;break}}return r},g.prototype.lB=function(l,o){for(var r=this.jl(o),n=this.j.jk(o),a=this.j.uf(o),c=0,p=0,f=this.j.km(n);f!=-1;f=this.j.js(f)){var m=this.j.tj(f),b=l.bd(m),x=this.j.La(l.Qf(b));b=l.Xa(b),(x=(x&r)!=0)&&b==m&&(this.tl=o);var T=l.U(m);T!=-1&&this.j.Le(T)==a?(c++,x&&(this.tl===-1&&b==T&&(m=this.j.jc(o),this.cf(this.jl(m))&&(this.tl=m)),p++)):(m=l.Ma(m))!=-1&&this.j.Le(m)==a&&(c--,x&&(this.tl===-1&&b===m&&(m=this.j.jc(o),this.cf(this.jl(m))&&(this.tl=m)),p--))}return this.j.D(n,this.oH),this.j.D(a,this.pH),(p!=0?p:c)*(l=h.h.tb(this.oH,this.pH))},g.prototype.jl=function(l){return this.j.dh(l)|this.j.af(l)|this.j.af(this.j.xa(l))},g.prototype.xK=function(l){for(var o=this.j.xa(this.j.te(l)),r=-1;o!=l;){if(this.cf(this.jl(o))){if(r!=-1)return-1;r=o}o=this.j.xa(this.j.te(o))}return r!=-1?this.j.xa(r):-1},g.prototype.yK=function(l){for(var o=this.j.xa(this.j.jc(l)),r=-1;o!=l;){if(this.cf(this.jl(o))){if(r!=-1)return-1;r=o}o=this.j.xa(this.j.jc(o))}return r!=-1?this.j.xa(r):-1},g.prototype.mJ=function(l,o,r,n,a){var c=this.j.g,p=l,f=this.j.xa(p);this.j.Kb(p,r,1),this.j.Kb(f,r,1),this.tl=-1;for(var m=this.lB(c,p),b=p,x=-1,T=!1,I=1;;){var A=this.j.te(p);if(A==f)break;if(f=this.j.jc(f),this.j.xa(A)!=f){if((p=this.xK(p))==-1){T=!0;break}f=this.j.xa(p)}else p=A;if(p==l){x=l;break}if(A=this.jl(p),!this.cf(A))break;this.j.Kb(p,r,1),this.j.Kb(f,r,1),b=p,m+=this.lB(c,p),I++}if(x==-1)for(p=l,f=this.j.xa(p),x=p;(l=this.j.jc(p))!=f;){if(f=this.j.te(f),this.j.xa(l)!=f){if((p=this.yK(p))==-1){T=!0;break}f=this.j.xa(p)}else p=l;if(A=this.jl(p),!this.cf(A))break;this.j.Kb(p,r,1),this.j.Kb(f,r,1),x=p,m+=this.lB(c,p),I++}else if(this.tl!=-1&&(b=this.tl,x=this.j.te(this.tl),this.j.xa(x)!=this.j.jc(this.j.xa(b))&&(x=this.xK(b))==-1))throw h.i.Qa();for(0<=m||(p=x,x=this.j.xa(b),b=this.j.xa(p)),r=c.vf(o,-1),p=b,b=this.j.jk(b),T=this.j.uf(x)==b&&T,m=this.Yw(b,c),m=this.sm(m,a),c.ij(r,m),n!=-1&&this.j.nn(b,n,1),b=0,I=T?h.O.truncate((I+1)/2):-1;l=this.j.uf(p),m=this.Yw(l,c),m=this.sm(m,a),c.ij(r,m),b++,n!=-1&&this.j.nn(l,n,1),T&&b==I&&(r=c.vf(o,-1),c.ij(r,m)),p!=x;)if(l=this.j.jc(p),this.j.te(this.j.xa(p))!=this.j.xa(l)){if((p=this.yK(p))==-1)throw h.i.Qa()}else p=l},g.prototype.Pt=function(l){for(var o=this.j.g.Ig(1607),r=this.j.$g(),n=this.j.Re;n!=-1;n=this.j.Rf(n)){var a=this.j.Me(n),c=a;do this.j.Ab(c,r)!=1&&this.cf(this.jl(c))&&this.mJ(c,o,r,-1,l),c=this.j.jc(this.j.xa(c));while(c!=a)}return this.j.Jg(r),o},g.prototype.bY=function(l){for(var o=this.j.g,r=o.Ig(1607),n=o.Ig(550),a=this.j.$g(),c=this.j.Dp(),p=-1,f=this.j.Re;f!=-1;f=this.j.Rf(f)){var m=this.j.Me(f),b=m;do{var x=this.j.Ab(b,a);x!=1&&(x=this.jl(b),this.cf(x)&&this.mJ(b,r,a,c,l)),b=this.j.jc(this.j.xa(b))}while(b!=m)}for(f=this.j.Re;f!=-1;f=this.j.Rf(f))(x=this.j.ng(f,c))!=1&&(x=this.j.xd(f),this.cf(x)&&(p==-1&&(p=o.vf(n,-1)),(m=this.j.km(f))!=-1&&(m=this.j.tj(m),m=this.sm(m,l),o.ij(p,m))));return this.j.Jg(a),this.j.Ep(c),(l=[])[0]=n,l[1]=r,l},g.prototype.mr=function(){for(var l=this.j.g,o=l.Ig(550),r=l.vf(o,-1),n=this.j.Re;n!=-1;n=this.j.Rf(n))if(this.cf(this.j.xd(n))){for(var a=-1,c=this.j.km(n);c!=-1;c=this.j.js(c)){var p=this.j.tj(c);a==-1&&(a=p);var f=this.j.La(l.Qf(l.bd(p)));if(this.cf(f)){a=p;break}}l.ij(r,a)}return o},g.prototype.bq=function(l){this.Gj=[];for(var o=0;o<l;o++)this.Gj[o]=!1},g.aW=function(l,o,r){var n=l.Ia(),a=Array(1e3);h.O.$u(a,null);var c=h.O.lg(1e3,0),p=l.I(),f=!0,m=o.Db()==2;if(o.Db()!=1&&o.Db()!=2)throw h.i.Qa();for(var b=0;b<p;){var x=h.O.truncate(l.lW(a,b)-b);m?h.hd.sK(o,a,x,r,c):h.hd.tK(o,a,x,r,c);for(var T=0,I=0;I<x;I++)c[I]==0&&(f&&(f=!1,n.Fd(l,0,b)),T!=I&&n.Fd(l,b+T,b+I),T=I+1);f||T==x||n.Fd(l,b+T,b+x),b+=x}return f?l:n},g.zG=function(l,o,r){return l instanceof h.de?g.aW(l,o,r):o instanceof h.Sa?l.B()||o.B()?l.Ia():h.Tk.zU(r,l,o)?h.Tk.CO(l,o):l.Ia():g.bW(l,o,r)},g.Av=function(l,o,r,n){var a=new h.l;l.A(a);var c=new h.l;o.A(c);var p=new h.l;if(p.K(a),p.Zb(c),r=h.ta.Wd(r,p,!0),(p=new h.l).K(c),c=h.ta.Er(r),p.W(c,c),!a.isIntersecting(p)){if(l.Db()<=o.Db())return g.ki(g.Xe(l.Ia()),l,"&");if(l.Db()>o.Db())return g.ki(g.Xe(o.Ia()),l,"&")}return c=new g,p=(a=new h.gd).Ib(g.Xe(l)),o=a.Ib(g.Xe(o)),c.Ft(a,r,n),n=c.Av(p,o),l=g.ki(a.Ne(n),l,"&"),h.aa.Hc(l.getType())&&(l.Ch(2,r),l.getType()==1736&&l.fm()),l},g.bW=function(l,o,r){if(l.B()||o.B())return l.Ia();var n=[null],a=[0],c=o.Db()==2;if(o.Db()!=1&&o.Db()!=2)throw h.i.Qa();return n[0]=l.D(),c?h.hd.sK(o,n,1,r,a):h.hd.tK(o,n,1,r,a),a[0]==0?l.Ia():l},g.prototype.LU=function(l,o,r,n,a){if(l.B())return l;var c=new h.gd;return l=c.Ib(l),this.Mk(c,l,o,r,n,a)},g.prototype.NU=function(l,o,r,n,a,c){if(a&&l.ic(o)!=550){var p=new h.RC;p.TX(l,r),p.Ng?(h.Tk.V(l,r,c,!0),a=!1):this.j.yy(r)}else h.Tk.V(l,r,c,!0),a=!1;if(n&&l.ic(o)!=550?this.j.wJ(l,o,c):this.j.vJ(l,o,c),this.j.pA)return this.j.Ug(),this.j=null,this.Mk(l,o,r,n,!1,c);if(this.j.yy(NaN),c=this.j.La(o),this.bq(c+1),this.Gj[c]=!0,l.ic(o)==1736||n&&l.ic(o)!=550)return l.Yo(o,0),o=this.Ot(o,-1,-1),(l=l.Ne(o)).Yo(0),a?l.Ch(1,0):(l.Ch(2,r),l.fm()),l;if(l.ic(o)==1607)return o=this.Pt(-1),l=l.Ne(o),a||l.Ch(2,r),l;if(l.ic(o)==550)return o=this.mr(),l=l.Ne(o),a||l.Ch(2,r),l;throw h.i.Qa()},g.prototype.Mk=function(l,o,r,n,a,c){this.j=new h.iu;try{return this.NU(l,o,r,n,a,c)}finally{this.j.Ug()}},g.Mk=function(l,o,r,n,a){return new g().LU(l,o,r,n,a)},g.prototype.MU=function(l,o,r,n){this.Mv=l,this.j=new h.iu,l=o.In(r);var a=o.ic(r);if(l!=1||a==550?this.j.vJ(o,r,n):this.j.wJ(o,r,n),!this.j.pA)if(this.j.yy(NaN),n=this.j.La(r),this.bq(n+1),this.Gj[n]=!0,o.ic(r)==1736||l==1&&o.ic(r)!=550)o.Yo(r,0),n=this.Ot(r,-1,-1),o.hC(n,r),o.BB(n);else if(o.ic(r)==1607)n=this.Pt(-1),o.hC(n,r),o.BB(n);else{if(o.ic(r)!=550)throw h.i.fa("internal error");n=this.mr(),o.hC(n,r),o.BB(n)}},g.prototype.im=function(l,o){var r=h.aa.tf(this.j.g.ic(l)),n=h.aa.tf(this.j.g.ic(o));if(r>n)return l;var a=this.j.La(l),c=this.j.La(o);if(this.bq(1+(a|c)),this.Gj[this.j.La(l)]=!0,r==2&&n==2)return this.Ot(l,o,-1);if(r==1&&n==2||r==1&&n==1)return this.Pt(-1);if(r==0)return this.mr();throw h.i.Qa()},g.prototype.Av=function(l,o){var r=h.aa.tf(this.j.g.ic(l)),n=h.aa.tf(this.j.g.ic(o)),a=this.j.La(l),c=this.j.La(o);if(this.bq(1+(a|c)),this.Gj[this.j.La(l)|this.j.La(o)]=!0,a=-1,1<this.j.g.ht.Aa&&(a=l),r==2&&n==2)return this.Ot(l,o,a);if(r==1&&0<n||n==1&&0<r)return this.Pt(a);if(r==0||n==0)return this.mr();throw h.i.Qa()},g.prototype.Pz=function(l,o){var r=h.aa.tf(this.j.g.ic(l)),n=h.aa.tf(this.j.g.ic(o)),a=this.j.La(l),c=this.j.La(o);if(this.bq(1+(a|c)),this.Gj[this.j.La(l)|this.j.La(o)]=!0,a=-1,1<this.j.g.ht.Aa&&(a=l),r==2&&n==2)return this.aY(l,o,a);if(r==1&&0<n||n==1&&0<r)return this.bY(a);if(r==0||n==0)return(l=[])[0]=this.mr(),l;throw h.i.Qa()},g.prototype.ep=function(l,o){var r=h.aa.tf(this.j.g.ic(l)),n=h.aa.tf(this.j.g.ic(o)),a=this.j.La(l),c=this.j.La(o);if(this.bq(1+(a|c)),this.Gj[this.j.La(l)]=!0,this.Gj[this.j.La(o)]=!0,r==2&&n==2)return this.Ot(l,o,-1);if(r==1&&n==1)return this.Pt(-1);if(r==0&&n==0)return this.mr();throw h.i.Qa()},g.Xe=function(l){var o=l.getType();return o==197?(o=new h.Da(l.description),l.B()||o.ad(l,!1),o):o==33?(o=new h.de(l.description),l.B()||o.add(l),o):o==322?(o=new h.Ta(l.description),l.B()||o.oc(l,!0),o):l},g.ki=function(l,o,r){var n=l.getType();return n==197?(o=new h.Da(l.description),l.B()||o.ad(l,!1),o):n!=33||r!="|"&&r!="^"?n==322?(o=new h.Ta(l.description),l.B()||o.oc(l,!0),o):n==33&&r=="-"&&o.getType()==33||n==550&&r=="&"&&o.getType()==33?(o=new h.Sa(l.description),l.B()||l.ve(0,o),o):l:(o=new h.de(l.description),l.B()||o.add(l),o)},g.im=function(l,o,r,n){if(l.B()||o.B()||l.Db()>o.Db())return g.ki(g.Xe(l),l,"-");var a=new h.l;l.A(a);var c=new h.l;if(o.A(c),!a.isIntersecting(c))return g.ki(g.Xe(l),l,"-");var p=new h.l;return p.K(a),p.Zb(c),r=h.ta.Wd(r,p,!0),c=new g,p=(a=new h.gd).Ib(g.Xe(l)),o=a.Ib(g.Xe(o)),c.Ft(a,r,n),n=c.im(p,o),n=a.Ne(n),l=g.ki(n,l,"-"),h.aa.Hc(l.getType())&&(l.Ch(2,r),l.getType()==1736&&l.fm()),l},g.VP=function(l,o,r){if(2>l.length)throw h.i.N("not enough geometries to dissolve");for(var n=0,a=0,c=l.length;a<c;a++)n=Math.max(l[a].Db(),n);var p=new h.l;p.Oa();var f=new h.gd,m=-1,b=0,x=-1;for(a=0,c=l.length;a<c;a++)if(l[a].Db()==n)if(l[a].B())x==-1&&(x=a);else{x=a,m==-1?m=f.Ib(g.Xe(l[a])):f.uN(m,g.Xe(l[a]));var T=new h.l;l[a].xc(T),p.Zb(T),b++}return 2>b?g.Xe(l[x]):(l=n==2,o=h.ta.Wd(n==0?o:null,p,!0),new g().Mk(f,m,o,l,!0,r))},g.Pz=function(l,o,r,n){var a=[null,null,null],c=new h.l;l.A(c);var p=new h.l;o.A(p);var f=new h.l;if(f.K(c),f.Zb(p),r=h.ta.Wd(r,f,!0),(f=new h.l).K(p),p=h.ta.Er(r),f.W(p,p),!c.isIntersecting(f)){if(l.Db()<=o.Db())return a[(l=g.ki(g.Xe(l.Ia()),l,"&")).Db()]=l,a;if(l.Db()>o.Db())return a[(l=g.ki(g.Xe(o.Ia()),l,"&")).Db()]=l,a}for(p=new g,f=(c=new h.gd).Ib(g.Xe(l)),o=c.Ib(g.Xe(o)),p.Ft(c,r,n),n=p.Pz(f,o),o=0;o<n.length;o++)p=g.ki(c.Ne(n[o]),l,"&"),h.aa.Hc(p.getType())&&(p.Ch(2,r),p.getType()==1736&&p.fm()),a[p.Db()]=p;return a},g.ep=function(l,o,r,n){if(l.Db()>o.Db())return g.ki(g.Xe(l),l,"^");if(l.Db()<o.Db()||l.B())return g.ki(g.Xe(o),l,"^");if(o.B())return g.ki(g.Xe(l),l,"^");var a=new h.l;l.A(a);var c=new h.l;o.A(c);var p=new h.l;return p.K(a),p.Zb(c),r=h.ta.Wd(r,p,!0),c=new g,p=(a=new h.gd).Ib(g.Xe(l)),o=a.Ib(g.Xe(o)),c.Ft(a,r,n),n=c.ep(p,o),l=g.ki(a.Ne(n),l,"^"),h.aa.Hc(l.getType())&&(l.Ch(2,r),l.getType()==1736&&l.fm()),l},g.prototype.LQ=function(l,o){var r=this.j.g;l=r.vf(l,-1);for(var n=o.size,a=0;a<n;a++){var c=o.get(a);r.ij(l,c)}r.kn(l,!0)},g.prototype.aX=function(l,o){for(var r=this.j.g,n=r.ld;n!=-1;n=r.ue(n))if(n==o)for(var a=r.Ob(n);a!=-1;a=r.Rb(a)){var c=r.Xa(a);if(c!=-1)for(var p=r.U(c);p!=-1;){c=this.j.Le(c);var f=this.j.Le(p);(c=this.j.tR(c,f))!=-1&&(f=this.j.xa(c),this.j.Kb(c,l,1),this.j.Kb(f,l,2)),c=p,p=r.U(c)}}},g.prototype.cW=function(l,o,r,n){r=this.j.La(r),n=this.j.La(n);var a=new h.ia(0);a.Jb(256);for(var c=this.j.g,p=this.j.$g(),f=this.j.Re;f!=-1;f=this.j.Rf(f)){var m=this.j.Me(f);if(m!=-1){var b=m;do{if(this.j.Ab(b,p)!=1){var x=b,T=b,I=!1,A=0;do{if(this.j.Kb(x,p,1),!I){var P=this.j.dh(x);P&n&&this.j.af(x)&r&&(T=x,I=!0)}I&&(a.add(this.j.tj(this.j.km(this.j.jk(x)))),l!=-1&&(P=this.j.dh(x))&n&&(A|=P=this.j.Ab(x,l))),x=this.j.jc(x)}while(x!=T);I&&0<this.j.Kp(this.j.$e(T))&&(x=c.Ig(1736),this.LQ(x,a),o!=-1&&c.HJ(x,o,A)),a.clear(!1)}b=this.j.jc(this.j.xa(b))}while(b!=m)}}this.j.Jg(p)},g.prototype.FP=function(l,o,r,n){this.j.yW();var a=-1;l!=-1&&(a=this.j.$g(),this.aX(a,r)),this.cW(a,l,o,r),a!=-1&&(this.j.Jg(a),a=-1);var c=this.j.g;for(l=0,a=c.ld;a!=-1;a=c.ue(a))a!=o&&a!=r&&(n.add(a),l++);n.Vd(0,l,function(p,f){return(p=c.wz(c.Ob(p)))<(f=c.wz(c.Ob(f)))?-1:p==f?0:1})},g.prototype.Ug=function(){this.j!=null&&(this.j.Ug(),this.j=null)},g}();h.Fg=k}(q||(q={})),function(h){var k=function(){function g(l){l!==void 0?this.setScale(l):this.RB()}return g.prototype.lx=function(){this.Lb=this.Gb=this.jb=this.eb=this.ab=this.bb=0},g.prototype.Nb=function(l){return this==l||l instanceof g&&this.bb==l.bb&&this.eb==l.eb&&this.Gb==l.Gb&&this.jb==l.jb&&this.ab==l.ab&&this.Lb==l.Lb},g.prototype.cc=function(){return h.O.uj(),h.O.uj(),h.O.uj(),h.O.uj(),h.O.uj(),h.O.uj()},g.prototype.Eh=function(l,o){var r=this.jb*l.x+this.ab*l.y+this.Lb;o.x=this.bb*l.x+this.eb*l.y+this.Gb,o.y=r},g.prototype.eY=function(l,o,r){for(var n=0;n<o;n++){var a=l[n].x,c=l[n].y,p=this.bb*a+this.eb*c+this.Gb;a=this.jb*a+this.ab*c+this.Lb,r[n]!=null?r[n].ma(p,a):r[n]=h.h.construct(p,a)}},g.prototype.multiply=function(l){g.multiply(this,l,this)},g.multiply=function(l,o,r){var n=l.bb*o.bb+l.jb*o.eb,a=l.eb*o.bb+l.ab*o.eb,c=l.Gb*o.bb+l.Lb*o.eb+o.Gb,p=l.bb*o.jb+l.jb*o.ab,f=l.eb*o.jb+l.ab*o.ab;l=l.Gb*o.jb+l.Lb*o.ab+o.Lb,r.bb=n,r.eb=a,r.Gb=c,r.jb=p,r.ab=f,r.Lb=l},g.prototype.Of=function(){var l=new g;return l.bb=this.bb,l.eb=this.eb,l.Gb=this.Gb,l.jb=this.jb,l.ab=this.ab,l.Lb=this.Lb,l},g.prototype.mC=function(l){if(!l.B()){for(var o=[],r=0;4>r;r++)o[r]=new h.h;l.nB(o),this.fY(o,o),l.Zw(o,4)}},g.prototype.fY=function(l,o){for(var r=0;r<l.length;r++){var n=new h.h,a=l[r];n.x=this.bb*a.x+this.eb*a.y+this.Gb,n.y=this.jb*a.x+this.ab*a.y+this.Lb,o[r]=n}},g.prototype.pS=function(l,o){l.B()||o.B()||l.R()==0||l.ca()==0?this.lx():(this.eb=this.jb=0,this.bb=o.R()/l.R(),this.ab=o.ca()/l.ca(),this.Gb=o.v-l.v*this.bb,this.Lb=o.G-l.G*this.ab)},g.prototype.dY=function(l){var o=new h.h,r=new h.h;o.ma(this.bb,this.jb),r.ma(this.eb,this.ab),o.sub(o);var n=.5*o.Sk();return o.ma(this.bb,this.jb),r.ma(this.eb,this.ab),o.add(r),l*(n>(o=.5*o.Sk())?Math.sqrt(n):Math.sqrt(o))},g.prototype.RB=function(){this.bb=1,this.jb=this.Gb=this.eb=0,this.ab=1,this.Lb=0},g.prototype.isIdentity=function(l){if(l!==void 0){var o=h.h.construct(0,1);return this.Eh(o,o),o.sub(h.h.construct(0,1)),o.Sk()>l*l?!1:(o.ma(0,0),this.Eh(o,o),!(o.Sk()>l*l)&&(o.ma(1,0),this.Eh(o,o),o.sub(h.h.construct(1,0)),o.Sk()<=l*l))}return this.bb==1&&this.ab==1&&this.eb==0&&this.Gb==0&&this.jb==0&&this.Lb==0},g.prototype.Bi=function(l){return Math.abs(this.bb*this.ab-this.jb*this.eb)<=2*l*(Math.abs(this.bb*this.ab)+Math.abs(this.jb*this.eb))},g.prototype.gg=function(l,o){this.bb=1,this.eb=0,this.Gb=l,this.jb=0,this.ab=1,this.Lb=o},g.prototype.setScale=function(l,o){o!==void 0?(this.bb=l,this.jb=this.Gb=this.eb=0,this.ab=o,this.Lb=0):this.setScale(l,l)},g.prototype.$B=function(){this.bb=0,this.eb=1,this.Gb=0,this.jb=1,this.Lb=this.ab=0},g.prototype.setRotate=function(l){this.pX(Math.cos(l),Math.sin(l))},g.prototype.pX=function(l,o){this.bb=l,this.eb=-o,this.Gb=0,this.jb=o,this.ab=l,this.Lb=0},g.prototype.shift=function(l,o){this.Gb+=l,this.Lb+=o},g.prototype.scale=function(l,o){this.bb*=l,this.eb*=l,this.Gb*=l,this.jb*=o,this.ab*=o,this.Lb*=o},g.prototype.flipX=function(l,o){this.bb=-this.bb,this.eb=-this.eb,this.Gb=l+o-this.Gb},g.prototype.flipY=function(l,o){this.jb=-this.jb,this.ab=-this.ab,this.Lb=l+o-this.Lb},g.prototype.rotate=function(l){var o=new g;o.setRotate(l),this.multiply(o)},g.prototype.inverse=function(l){if(l!==void 0){var o=this.bb*this.ab-this.eb*this.jb;o==0?l.lx():(o=1/o,l.Gb=(this.eb*this.Lb-this.Gb*this.ab)*o,l.Lb=(this.Gb*this.jb-this.bb*this.Lb)*o,l.bb=this.ab*o,l.eb=-this.eb*o,l.jb=-this.jb*o,l.ab=this.bb*o)}else this.inverse(this)},g}();h.Dd=k}(q||(q={})),function(h){var k=function(){function g(){}return g.prototype.lx=function(){this.hg=this.Lb=this.Gb=this.He=this.Fe=this.Ee=this.Ge=this.ab=this.eb=this.Ze=this.jb=this.bb=0},g.prototype.setScale=function(l,o,r){this.bb=l,this.eb=this.Ze=this.jb=0,this.ab=o,this.Fe=this.Ee=this.Ge=0,this.He=r,this.hg=this.Lb=this.Gb=0},g.prototype.setTranslate=function(l,o,r){this.bb=1,this.eb=this.Ze=this.jb=0,this.ab=1,this.Fe=this.Ee=this.Ge=0,this.He=1,this.Gb=l,this.Lb=o,this.hg=r},g.prototype.translate=function(l,o,r){this.Gb+=l,this.Lb+=o,this.hg+=r},g.prototype.mC=function(l){if(!l.B()){for(var o=new h.Nd[8],r=0;8>r;r++)o[r]=new h.Nd;l.nB(o),this.transform(o,8,o),l.Zw(o)}},g.prototype.transform=function(l,o,r){for(var n=0;n<o;n++){var a=new h.Nd,c=l[n];a.x=this.bb*c.x+this.eb*c.y+this.Ee*c.z+this.Gb,a.y=this.jb*c.x+this.ab*c.y+this.Fe*c.z+this.Lb,a.z=this.Ze*c.x+this.Ge*c.y+this.He*c.z+this.hg,r[n]=a}},g.prototype.fp=function(l){var o=new h.Nd;return o.x=this.bb*l.x+this.eb*l.y+this.Ee*l.z+this.Gb,o.y=this.jb*l.x+this.ab*l.y+this.Fe*l.z+this.Lb,o.z=this.Ze*l.x+this.Ge*l.y+this.He*l.z+this.hg,o},g.prototype.Ag=function(l){g.multiply(this,l,this)},g.multiply=function(l,o,r){var n=l.bb*o.bb+l.jb*o.eb+l.Ze*o.Ee,a=l.bb*o.jb+l.jb*o.ab+l.Ze*o.Fe,c=l.bb*o.Ze+l.jb*o.Ge+l.Ze*o.He,p=l.eb*o.bb+l.ab*o.eb+l.Ge*o.Ee,f=l.eb*o.jb+l.ab*o.ab+l.Ge*o.Fe,m=l.eb*o.Ze+l.ab*o.Ge+l.Ge*o.He,b=l.Ee*o.bb+l.Fe*o.eb+l.He*o.Ee,x=l.Ee*o.jb+l.Fe*o.ab+l.He*o.Fe,T=l.Ee*o.Ze+l.Fe*o.Ge+l.He*o.He,I=l.Gb*o.bb+l.Lb*o.eb+l.hg*o.Ee+o.Gb,A=l.Gb*o.jb+l.Lb*o.ab+l.hg*o.Fe+o.Lb;l=l.Gb*o.Ze+l.Lb*o.Ge+l.hg*o.He+o.hg,r.bb=n,r.jb=a,r.Ze=c,r.eb=p,r.ab=f,r.Ge=m,r.Ee=b,r.Fe=x,r.He=T,r.Gb=I,r.Lb=A,r.hg=l},g.inverse=function(l,o){var r=l.bb*(l.ab*l.He-l.Ge*l.Fe)-l.jb*(l.eb*l.He-l.Ge*l.Ee)+l.Ze*(l.eb*l.Fe-l.ab*l.Ee);if(r==0)throw h.i.fa("math singularity");var n=1/r;r=(l.ab*l.He-l.Ge*l.Fe)*n;var a=-(l.eb*l.He-l.Ge*l.Ee)*n,c=(l.eb*l.Fe-l.ab*l.Ee)*n,p=-(l.jb*l.He-l.Fe*l.Ze)*n,f=(l.bb*l.He-l.Ze*l.Ee)*n,m=-(l.bb*l.Fe-l.jb*l.Ee)*n,b=(l.jb*l.Ge-l.Ze*l.ab)*n,x=-(l.bb*l.Ge-l.Ze*l.eb)*n;n*=l.bb*l.ab-l.jb*l.eb;var T=-(l.Gb*r+l.Lb*a+l.hg*c),I=-(l.Gb*p+l.Lb*f+l.hg*m);l=-(l.Gb*b+l.Lb*x+l.hg*n),o.bb=r,o.jb=p,o.Ze=b,o.eb=a,o.ab=f,o.Ge=x,o.Ee=c,o.Fe=m,o.He=n,o.Gb=T,o.Lb=I,o.hg=l},g.prototype.Of=function(){var l=new g;return l.bb=this.bb,l.jb=this.jb,l.Ze=this.Ze,l.eb=this.eb,l.ab=this.ab,l.Ge=this.Ge,l.Ee=this.Ee,l.Fe=this.Fe,l.He=this.He,l.Gb=this.Gb,l.Lb=this.Lb,l.hg=this.hg,l},g}();h.JY=k}(q||(q={})),function(h){var k=function(l){function o(r){if(r!==void 0)r=l.call(this,r.cc(),r)||this;else{(r=l.call(this)||this).bg=[],r.bg[0]=0,r.Aa=1,r.uh=[];for(var n=0;10>n;n++)r.uh[n]=-1;r.uh[r.bg[0]]=0}return r.jq=!0,r}return nt(o,l),o.prototype.re=function(r){this.hasAttribute(r)||(this.uh[r]=0,this.jD())},o.prototype.removeAttribute=function(r){if(r==0)throw h.i.N("Position attribue cannot be removed");this.hasAttribute(r)&&(this.uh[r]=-1,this.jD())},o.prototype.reset=function(){this.bg[0]=0,this.Aa=1;for(var r=0;r<this.uh.length;r++)this.uh[r]=-1;this.uh[this.bg[0]]=0,this.jq=!0},o.prototype.EF=function(){return g.kz().add(this)},o.og=function(){return g.kz().$R()},o.prototype.tM=function(){var r=this.cc();return new h.ra(r,this)},o.prototype.jD=function(){for(var r=this.Aa=0,n=0;10>r;r++)0<=this.uh[r]&&(this.bg[n]=r,this.uh[r]=n,n++,this.Aa++);this.jq=!0},o.prototype.cc=function(){return this.jq&&(this.wl=this.An(),this.jq=!1),this.wl},o.prototype.Nb=function(r){if(r==null)return!1;if(r==this)return!0;if(!(r instanceof o)||r.Aa!=this.Aa)return!1;for(var n=0;n<this.Aa;n++)if(this.bg[n]!=r.bg[n])return!1;return this.jq==r.jq},o.prototype.GG=function(r){if(r.Aa!=this.Aa)return!1;for(var n=0;n<this.Aa;n++)if(this.bg[n]!=r.bg[n])return!1;return!0},o.Iw=function(r,n){for(var a=[],c=0;c<r.Aa;c++)a[c]=-1;c=0;for(var p=r.Aa;c<p;c++)a[c]=n.Pf(r.kd(c));return a},o.BR=function(r,n){return(r=new o(r)).re(n),r.EF()},o.CR=function(r,n){for(var a=null,c=0;10>c;c++)!r.hasAttribute(c)&&n.hasAttribute(c)&&(a==null&&(a=new o(r)),a.re(c));return a!=null?a.EF():r},o}(h.ra);h.ee=k;var g=function(){function l(){this.map=[];var o=new k;this.add(o),(o=new k).re(1),this.add(o)}return l.kz=function(){return l.bL},l.prototype.$R=function(){return l.ft},l.prototype.add=function(o){var r=o.cc();if(l.ft!=null&&l.ft.cc()==r&&o.GG(l.ft))return l.ft;if(l.Dw!=null&&l.Dw.cc()==r&&o.GG(l.Dw))return l.Dw;var n=null;return this.map[r]!==void 0&&(n=this.map[r]),n==null&&((n=o.tM()).Aa==1?l.ft=n:n.Aa==2&&n.kd(1)==1?l.Dw=n:this.map[r]=n),n},l.bL=new l,l}()}(q||(q={}));var ls={feet:9002,kilometers:9036,meters:9001,miles:9093,"nautical-miles":9030,yards:9096},Ed={acres:109402,ares:109463,hectares:109401,"square-feet":109405,"square-kilometers":109414,"square-meters":109404,"square-miles":109439,"square-yards":109442},In=new(function(){function h(){this.RM=50,this.np=new Map,this.gj=[]}return h.prototype.clear=function(){this.gj.length=0,this.np.clear()},h.prototype.delete=function(k){return!!this.np.delete(k)&&(this.gj.splice(this.gj.indexOf(k),1),!0)},h.prototype.get=function(k){var g=this.np.get(k);if(g!==void 0)return this.gj[0]!==k&&(this.gj.splice(this.gj.indexOf(k),1),this.gj.unshift(k)),g},h.prototype.has=function(k){return this.np.has(k)},h.prototype.set=function(k,g){return this.get(k)!==void 0&&this.delete(k),this.gj.unshift(k),this.np.set(k,g),this.oM(),this},h.prototype.oM=function(){for(;this.gj.length&&this.gj.length>this.RM;){var k=this.gj.pop();this.np.delete(k)}},h}()),ge=((ti={}).convertJSONToGeometry=function(h){return q.$b.fP(h)},ti.hasM=function(h){return h.hasAttribute(q.Ih.M)},ti.hasZ=function(h){return h.hasAttribute(q.Ih.Z)},ti.getPointX=function(h){return h.Lg()},ti.getPointY=function(h){return h.ih()},ti.getPointZ=function(h){return h.bS()},ti.getPointM=function(h){return h.zR()},ti.getXMin=function(h){return h.es()},ti.getYMin=function(h){return h.gs()},ti.getXMax=function(h){return h.ds()},ti.getYMax=function(h){return h.fs()},ti.getZExtent=function(h){return h.Tg(q.Ih.Z,0)},ti.getMExtent=function(h){return h.Tg(q.Ih.M,0)},ti.exportPaths=function(h){var k=[],g=h.da(),l=null,o=null,r=h.hasAttribute(q.Ih.Z),n=h.hasAttribute(q.Ih.M);r&&(l=h.ub(q.Ih.Z)),n&&(o=h.ub(q.Ih.M));for(var a=new q.h,c=0;c<g;c++){for(var p=h.Ba(c),f=h.Ja(c),m=0,b=0,x=NaN,T=NaN,I=NaN,A=NaN,P=h.dc(c),j=[],D=p;D<p+f;D++){h.D(D,a),A=I=NaN;var F=[a.x,a.y];r&&(I=l.get(D),F.push(I)),n&&(A=o.get(D),F.push(A)),D==p&&P&&(m=a.x,b=a.y,x=I,T=A),j.push(F)}!P||m==a.x&&b==a.y&&(!r||isNaN(x)&&isNaN(I)||x==I)&&(!n||isNaN(T)&&isNaN(A)||T==A)||j.push(j[0].slice(0)),k.push(j)}return k},ti.exportPathsFlat=function(){},ti.exportPoints=function(h){var k=h.hasAttribute(q.Ih.Z),g=h.hasAttribute(q.Ih.M),l=null,o=null;k&&(l=h.ub(q.Ih.Z)),g&&(o=h.ub(q.Ih.M));for(var r=new q.h,n=h.I(),a=[],c=0;c<n;c++){h.D(c,r);var p=[r.x,r.y];k&&p.push(l.get(c)),g&&p.push(o.get(c)),a.push(p)}return a},ti.exportPointsFlat=function(){},ti),wo=new Map;return function(){function h(){}return h.buffer=vr,h.clip=C,h.contains=L,h.convexHull=Me,h.crosses=G,h.cut=R,h.densify=$d,h.difference=Le,h.disjoint=ne,h.distance=U,h.equals=K,h.extendedSpatialReferenceInfo=O,h.generalize=mg,h.geodesicArea=Td,h.geodesicBuffer=Dt,h.geodesicDensify=gg,h.geodesicLength=bg,h.intersect=it,h.intersects=ee,h.isSimple=we,h.nearestCoordinate=wr,h.nearestVertex=yg,h.nearestVertices=Sd,h.offset=Ut,h.overlaps=le,h.planarArea=vg,h.planarLength=wg,h.relate=ve,h.simplify=Ee,h.symmetricDifference=Fe,h.touches=Q,h.union=Ce,h.within=re,h.rotate=q.Ex.rotate,h.flipHorizontal=q.Ex.JQ,h.flipVertical=q.Ex.KQ,h.intersectLinesToPoints=Ig,h.ExtendedParams=q.yC,h.clearDefaultSpatialReferenceTolerance=Mg,h.changeDefaultSpatialReferenceTolerance=Tg,h._enableProjection=_g,h._project=$g,h._getTransformation=xg,h._getTransformationBySuitability=Sg,h}()}var s=i();s!==void 0&&(e.exports=s)})(yC);var mC=yC.exports;const gC=LA(mC),fae=dae({__proto__:null,default:gC},[mC]),yae=Object.freeze(Object.defineProperty({__proto__:null,G:gC,g:fae},Symbol.toStringTag,{value:"Module"}));let eo=class extends RP(uC(Z5)){constructor(e){super(e),this.elevationInfo=null,this.graphics=new ou,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(e){return this.graphics.add(e),this}addMany(e){return this.graphics.addMany(e),this}removeAll(){return this.graphics.removeAll(),this}remove(e){this.graphics.remove(e)}removeMany(e){this.graphics.removeMany(e)}on(e,t){return super.on(e,t)}graphicChanged(e){this.emit("graphic-update",e)}};w([S({type:zP})],eo.prototype,"elevationInfo",void 0),w([S(_w(ou,"graphics"))],eo.prototype,"graphics",void 0),w([S({type:["show","hide"]})],eo.prototype,"listMode",void 0),w([S()],eo.prototype,"screenSizePerspectiveEnabled",void 0),w([S({readOnly:!0})],eo.prototype,"type",void 0),w([S({constructOnly:!0})],eo.prototype,"internal",void 0),eo=w([B("esri.layers.GraphicsLayer")],eo);const zde=eo;function mae(e){let t,i,s,u,d,y,v,_;return{c(){t=Ad("main"),i=Ad("div"),i.innerHTML="<h3>My first webmap!</h3>",s=o6(),u=Ad("div"),d=o6(),y=Ad("div"),y.innerHTML="",kg(i,"class","title svelte-105bpzu"),kg(u,"class","view svelte-105bpzu"),kg(y,"class","footer svelte-105bpzu")},m(M,E){TC(M,t,E),jc(t,i),jc(t,s),jc(t,u),jc(t,d),jc(t,y),v||(_=$C(e[0].call(null,u)),v=!0)},p:Ql,i:Ql,o:Ql,d(M){M&&cS(t),v=!1,_()}}}function gae(e){at.apiKey="AAPK77b67524572349b8b5df44655f368923grzTysj-uIREgjCMU52otjoA4UoQQKnPQTf0dWkjDkAH7SjBxJWGEyk_NvR-MelB";let t,i;return[u=>{t=new ME({basemap:"arcgis/topographic"}),new rie({container:u,map:t,zoom:14,center:[-80.5238211,43.4650994]}),i=new fC({url:"https://services1.arcgis.com/DwLTn0u9VBSZvUPe/arcgis/rest/services/Uptown_Trees_Joined/FeatureServer"}),t.add(i)}]}class vae extends DC{constructor(t){super(),LC(this,t,gae,mae,xC,{})}}new vae({target:document.getElementById("app")});export{hf as $,ede as A,lg as B,Ot as C,ka as D,ui as E,HZ as F,vu as G,ZI as H,uc as I,Ep as J,oe as K,Gse as L,OS as M,ble as N,et as O,rr as P,$A as Q,$4 as R,Tp as S,TL as T,Yt as U,Oe as V,_n as W,Or as X,ly as Y,hu as Z,Se as _,Roe as a,Cue as a$,KT as a0,JT as a1,WT as a2,Uh as a3,ZT as a4,gue as a5,oA as a6,bF as a7,Xl as a8,Ph as a9,ie as aA,ZZ as aB,Nu as aC,Mt as aD,Pa as aE,Je as aF,td as aG,Ae as aH,pe as aI,hde as aJ,ude as aK,PB as aL,AB as aM,F0e as aN,aY as aO,Fhe as aP,po as aQ,Cs as aR,$m as aS,Tt as aT,nJ as aU,Lhe as aV,Dhe as aW,Aue as aX,Oue as aY,gu as aZ,jue as a_,tp as aa,F5 as ab,Si as ac,Lf as ad,nw as ae,ts as af,F7 as ag,hce as ah,oue as ai,Tu as aj,rs as ak,Mu as al,LA as am,op as an,mr as ao,Ai as ap,at as aq,hT as ar,am as as,Gt as at,KB as au,sE as av,nE as aw,roe as ax,soe as ay,noe as az,ou as b,gm as b$,Ma as b0,Pue as b1,Iu as b2,Wle as b3,Rg as b4,jhe as b5,X5 as b6,Xe as b7,Ou as b8,Ea as b9,G0e as bA,U0e as bB,Z0e as bC,QA as bD,rpe as bE,fee as bF,lee as bG,me as bH,Pq as bI,$6 as bJ,nc as bK,zle as bL,Pr as bM,Lae as bN,$re as bO,Tc as bP,KL as bQ,Tre as bR,Ype as bS,Epe as bT,q7 as bU,yp as bV,m3 as bW,Qpe as bX,Xpe as bY,Vce as bZ,YZ as b_,Na as ba,fo as bb,Nv as bc,Rt as bd,jv as be,Lv as bf,my as bg,He as bh,wI as bi,tt as bj,Dg as bk,o4 as bl,z7 as bm,wue as bn,rce as bo,cce as bp,fde as bq,Ne as br,gW as bs,yn as bt,GK as bu,Dle as bv,fhe as bw,tae as bx,oC as by,V0e as bz,DY as c,M4 as c$,gC as c0,yue as c1,Y1 as c2,lv as c3,cQ as c4,dS as c5,vle as c6,OD as c7,c5 as c8,p5 as c9,m5 as cA,Mp as cB,AW as cC,VE as cD,aJ as cE,Vhe as cF,sJ as cG,zhe as cH,Sle as cI,xm as cJ,Ey as cK,NN as cL,Ev as cM,I$ as cN,C$ as cO,A$ as cP,JN as cQ,vR as cR,Rae as cS,UL as cT,sc as cU,t5 as cV,tj as cW,G4 as cX,GF as cY,Rce as cZ,ele as c_,PD as ca,a5 as cb,u5 as cc,ss as cd,ER as ce,kR as cf,AR as cg,RR as ch,VR as ci,G$ as cj,z$ as ck,V$ as cl,zR as cm,HR as cn,WR as co,j$ as cp,nR as cq,MR as cr,kv as cs,wm as ct,ED as cu,Xh as cv,tse as cw,HW as cx,Rhe as cy,b5 as cz,n0e as d,Of as d$,Qae as d0,fm as d1,Tm as d2,id as d3,J5 as d4,RP as d5,Hoe as d6,Aoe as d7,Doe as d8,uC as d9,nse as dA,kse as dB,gT as dC,Tn as dD,XI as dE,eae as dF,My as dG,_e as dH,St as dI,Ec as dJ,fC as dK,hue as dL,bq as dM,mue as dN,lue as dO,Hi as dP,is as dQ,zde as dR,Q6 as dS,sa as dT,$p as dU,zk as dV,Yr as dW,mt as dX,gc as dY,Cle as dZ,qle as d_,SP as da,ene as db,Yse as dc,Zse as dd,gr as de,ns as df,Zm as dg,za as dh,Cu as di,Z5 as dj,u$ as dk,cm as dl,u4 as dm,cd as dn,Fp as dp,pa as dq,Ar as dr,aK as ds,_m as dt,lK as du,iC as dv,Nle as dw,fce as dx,Joe as dy,ose as dz,Et as e,are as e$,$8 as e0,Ste as e1,B0e as e2,spe as e3,z0e as e4,Nae as e5,Lie as e6,nce as e7,pce as e8,Ca as e9,RQ as eA,uE as eB,N4 as eC,_y as eD,L9 as eE,R9 as eF,eX as eG,x6 as eH,xt as eI,Os as eJ,jj as eK,mI as eL,yle as eM,aue as eN,M$ as eO,cR as eP,KY as eQ,_i as eR,YY as eS,Y0e as eT,yte as eU,ope as eV,ID as eW,M7 as eX,oJ as eY,wu as eZ,Gpe as e_,$a as ea,ZG as eb,Oa as ec,fre as ed,zpe as ee,r6 as ef,Ihe as eg,kE as eh,$W as ei,Iy as ej,JP as ek,I0e as el,ku as em,bp as en,tD as eo,Z9 as ep,Zp as eq,Ve as er,w1 as es,zae as et,Gce as eu,TA as ev,L3 as ew,fc as ex,QY as ey,MA as ez,Loe as f,Tde as f$,WC as f0,Oae as f1,kae as f2,ad as f3,pR as f4,Oq as f5,Vy as f6,YN as f7,QN as f8,_R as f9,lW as fA,_7 as fB,Fh as fC,sr as fD,so as fE,ja as fF,Mm as fG,ei as fH,Dae as fI,t_ as fJ,qh as fK,ZL as fL,bn as fM,Ls as fN,hm as fO,Jp as fP,Q4 as fQ,zP as fR,ine as fS,tne as fT,vc as fU,_ne as fV,Xre as fW,go as fX,z4 as fY,oP as fZ,Mde as f_,U9 as fa,iR as fb,XN as fc,E$ as fd,yo as fe,bu as ff,Coe as fg,Eoe as fh,Use as fi,C7 as fj,jE as fk,rae as fl,Xse as fm,Z4 as fn,dg as fo,rv as fp,u9 as fq,K4 as fr,ug as fs,kre as ft,Kse as fu,s6 as fv,pC as fw,Koe as fx,dW as fy,pW as fz,Sae as g,HK as g$,$de as g0,qne as g1,Nse as g2,$ne as g3,Tne as g4,qK as g5,lne as g6,une as g7,hne as g8,pne as g9,Zt as gA,yu as gB,Qp as gC,wle as gD,ir as gE,_Y as gF,MT as gG,r$ as gH,lF as gI,vy as gJ,bce as gK,$ue as gL,FN as gM,es as gN,Aae as gO,Tae as gP,Rs as gQ,ole as gR,co as gS,hi as gT,uce as gU,mhe as gV,Q0 as gW,eY as gX,qm as gY,y4 as gZ,BK as g_,dne as ga,fne as gb,yne as gc,mne as gd,gne as ge,vne as gf,wne as gg,bne as gh,cC as gi,Qse as gj,Y4 as gk,$te as gl,epe as gm,q0e as gn,ipe as go,tpe as gp,dre as gq,gH as gr,Jle as gs,Vle as gt,Qre as gu,lde as gv,Pse as gw,Ase as gx,JS as gy,bhe as gz,yhe as h,Dm as h$,Eq as h0,yb as h1,Ode as h2,WP as h3,D9 as h4,Th as h5,ane as h6,Dde as h7,kne as h8,W1 as h9,_a as hA,q8 as hB,Np as hC,aX as hD,Tle as hE,q$ as hF,jP as hG,iW as hH,rW as hI,O$ as hJ,ot as hK,mo as hL,N6 as hM,oL as hN,Zr as hO,vI as hP,rj as hQ,a4 as hR,sce as hS,ice as hT,V as hU,Hle as hV,Kp as hW,tle as hX,ile as hY,whe as hZ,zA as h_,d8 as ha,Lce as hb,mL as hc,oR as hd,P$ as he,pue as hf,OF as hg,_S as hh,xS as hi,$ae as hj,Ue as hk,og as hl,bc as hm,ki as hn,Nr as ho,X0e as hp,qC as hq,Vae as hr,Ehe as hs,By as ht,Pc as hu,k9 as hv,A9 as hw,Zpe as hx,khe as hy,Ine as hz,Noe as i,DN as i$,ru as i0,xn as i1,mu as i2,eue as i3,vue as i4,CF as i5,rue as i6,vF as i7,qv as i8,Og as i9,Q0e as iA,fte as iB,K0e as iC,pte as iD,W0e as iE,J0e as iF,wO as iG,npe as iH,H0e as iI,La as iJ,rw as iK,fq as iL,zue as iM,X as iN,pI as iO,Gm as iP,zN as iQ,VN as iR,GN as iS,RN as iT,EH as iU,hE as iV,GH as iW,WY as iX,Yle as iY,Ble as iZ,mX as i_,iL as ia,bue as ib,xT as ic,n5 as id,nF as ie,pF as ig,Sm as ih,Qle as ii,Mae as ij,xle as ik,bR as il,Z1 as im,BZ as io,LN as ip,Zie as iq,ag as ir,wH as is,hR as it,by as iu,$le as iv,Eu as iw,Rp as ix,xae as iy,JC as iz,Xt as j,Yh as j$,qH as j0,cE as j1,pH as j2,zr as j3,xJ as j4,ig as j5,wd as j6,Ei as j7,Rue as j8,Wue as j9,bS as jA,sT as jB,Ple as jC,tu as jD,kD as jE,D6 as jF,lk as jG,xA as jH,nZ as jI,Bk as jJ,Ade as jK,$oe as jL,Npe as jM,Die as jN,BT as jO,_F as jP,iue as jQ,KI as jR,HS as jS,Kt as jT,C9 as jU,S6 as jV,Nie as jW,kpe as jX,KJ as jY,Ji as jZ,nu as j_,SS as ja,jle as jb,$L as jc,bm as jd,Gle as je,pde as jf,j9 as jg,XF as jh,fue as ji,Uj as jj,ule as jk,lle as jl,hle as jm,ale as jn,Eae as jo,HC as jp,cue as jq,ZY as jr,OZ as js,MZ as jt,yd as ju,_le as jv,q9 as jw,K5 as jx,Rle as jy,WS as jz,tc as k,tue as k$,pie as k0,Lle as k1,Ku as k2,Fse as k3,tX as k4,Dl as k5,dde as k6,mB as k7,KE as k8,yde as k9,jr as kA,Ghe as kB,rC as kC,sC as kD,Moe as kE,Oc as kF,j4 as kG,nie as kH,oie as kI,sg as kJ,KO as kK,Mie as kL,eP as kM,rm as kN,hv as kO,BO as kP,vp as kQ,uz as kR,Hpe as kS,Nj as kT,Pt as kU,mQ as kV,bae as kW,due as kX,nue as kY,kF as kZ,AF as k_,UK as ka,Ule as kb,Cae as kc,jae as kd,Pae as ke,VL as kf,bH as kg,cH as kh,dH as ki,Xae as kj,wS as kk,tr as kl,Up as km,wX as kn,Vpe as ko,Fpe as kp,zY as kq,Oy as kr,yv as ks,yi as kt,qse as ku,Nhe as kv,Ahe as kw,Phe as kx,Ohe as ky,Che as kz,Cde as l,j1 as l$,Ede as l0,kde as l1,Ide as l2,Ns as l3,HN as l4,tL as l5,k$ as l6,OT as l7,Q9 as l8,vhe as l9,Gp as lA,Uce as lB,Hk as lC,ks as lD,aoe as lE,loe as lF,uoe as lG,Ta as lH,tT as lI,yF as lJ,sue as lK,dce as lL,HY as lM,Hm as lN,uue as lO,Y5 as lP,L6 as lQ,Vv as lR,yJ as lS,Nue as lT,Ete as lU,kr as lV,Hue as lW,OU as lX,$n as lY,AU as lZ,e4 as l_,ghe as la,KD as lb,JD as lc,Kle as ld,yN as le,C0e as lf,sZ as lg,g4 as lh,Ym as li,Vp as lj,ba as lk,BA as ll,rc as lm,A0e as ln,Fle as lo,EA as lp,wa as lq,vn as lr,Qm as ls,_he as lt,dA as lu,Kk as lv,fA as lw,pY as lx,qce as ly,SY as lz,Rr as m,_ae as m0,vJ as m1,WQ as m2,Cj as m3,gJ as m4,Dy as m5,zy as m6,Dp as m7,Fae as m8,Zte as m9,upe as ma,rd as mb,Pe as mc,p7 as md,r4 as me,TJ as mf,MJ as mg,Hte as mh,$R as mi,$X as mj,TX as mk,bX as ml,rD as mm,oce as mn,ace as mo,eR as mp,BH as mq,UH as mr,UC as ms,lce as mt,Vue as mu,que as mv,Mpe as mw,Lpe as mx,vde as my,Fde as mz,_u as n,de as o,kc as p,w as q,U3 as r,ae as s,S as t,Pde as u,B as v,Ge as w,CP as x,r0e as y,ld as z};
